var hp = Object.defineProperty;
var fp = (l, n, L) => n in l ? hp(l, n, { enumerable: !0, configurable: !0, writable: !0, value: L }) : l[n] = L;
var ga = (l, n, L) => (fp(l, typeof n != "symbol" ? n + "" : n, L), L);
const gp = "_oneFile_1fi1j_1", mp = "_title_1fi1j_9", pp = "_convertActions_1fi1j_14", _p = "_actions_1fi1j_19", vp = "_textUpperCase_1fi1j_26", yp = "_primaryBtn_1fi1j_30", bp = "_secondaryBtn_1fi1j_47", Ns = {
  oneFile: gp,
  title: mp,
  convertActions: pp,
  actions: _p,
  textUpperCase: vp,
  primaryBtn: yp,
  secondaryBtn: bp
};
var Ku = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function wp(l) {
  return l && l.__esModule && Object.prototype.hasOwnProperty.call(l, "default") ? l.default : l;
}
function Yu(l) {
  throw new Error('Could not dynamically require "' + l + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var _f = { exports: {} };
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
(function(l, n) {
  (function(L) {
    l.exports = L();
  })(function() {
    return function L(k, re, R) {
      function C(U, H) {
        if (!re[U]) {
          if (!k[U]) {
            var K = typeof Yu == "function" && Yu;
            if (!H && K)
              return K(U, !0);
            if (p)
              return p(U, !0);
            var Y = new Error("Cannot find module '" + U + "'");
            throw Y.code = "MODULE_NOT_FOUND", Y;
          }
          var F = re[U] = { exports: {} };
          k[U][0].call(F.exports, function(q) {
            var O = k[U][1][q];
            return C(O || q);
          }, F, F.exports, L, k, re, R);
        }
        return re[U].exports;
      }
      for (var p = typeof Yu == "function" && Yu, N = 0; N < R.length; N++)
        C(R[N]);
      return C;
    }({ 1: [function(L, k, re) {
      var R = L("./utils"), C = L("./support"), p = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
      re.encode = function(N) {
        for (var U, H, K, Y, F, q, O, J = [], E = 0, me = N.length, Ee = me, Le = R.getTypeOf(N) !== "string"; E < N.length; )
          Ee = me - E, K = Le ? (U = N[E++], H = E < me ? N[E++] : 0, E < me ? N[E++] : 0) : (U = N.charCodeAt(E++), H = E < me ? N.charCodeAt(E++) : 0, E < me ? N.charCodeAt(E++) : 0), Y = U >> 2, F = (3 & U) << 4 | H >> 4, q = 1 < Ee ? (15 & H) << 2 | K >> 6 : 64, O = 2 < Ee ? 63 & K : 64, J.push(p.charAt(Y) + p.charAt(F) + p.charAt(q) + p.charAt(O));
        return J.join("");
      }, re.decode = function(N) {
        var U, H, K, Y, F, q, O = 0, J = 0, E = "data:";
        if (N.substr(0, E.length) === E)
          throw new Error("Invalid base64 input, it looks like a data url.");
        var me, Ee = 3 * (N = N.replace(/[^A-Za-z0-9+/=]/g, "")).length / 4;
        if (N.charAt(N.length - 1) === p.charAt(64) && Ee--, N.charAt(N.length - 2) === p.charAt(64) && Ee--, Ee % 1 != 0)
          throw new Error("Invalid base64 input, bad content length.");
        for (me = C.uint8array ? new Uint8Array(0 | Ee) : new Array(0 | Ee); O < N.length; )
          U = p.indexOf(N.charAt(O++)) << 2 | (Y = p.indexOf(N.charAt(O++))) >> 4, H = (15 & Y) << 4 | (F = p.indexOf(N.charAt(O++))) >> 2, K = (3 & F) << 6 | (q = p.indexOf(N.charAt(O++))), me[J++] = U, F !== 64 && (me[J++] = H), q !== 64 && (me[J++] = K);
        return me;
      };
    }, { "./support": 30, "./utils": 32 }], 2: [function(L, k, re) {
      var R = L("./external"), C = L("./stream/DataWorker"), p = L("./stream/Crc32Probe"), N = L("./stream/DataLengthProbe");
      function U(H, K, Y, F, q) {
        this.compressedSize = H, this.uncompressedSize = K, this.crc32 = Y, this.compression = F, this.compressedContent = q;
      }
      U.prototype = { getContentWorker: function() {
        var H = new C(R.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new N("data_length")), K = this;
        return H.on("end", function() {
          if (this.streamInfo.data_length !== K.uncompressedSize)
            throw new Error("Bug : uncompressed data size mismatch");
        }), H;
      }, getCompressedWorker: function() {
        return new C(R.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize", this.compressedSize).withStreamInfo("uncompressedSize", this.uncompressedSize).withStreamInfo("crc32", this.crc32).withStreamInfo("compression", this.compression);
      } }, U.createWorkerFrom = function(H, K, Y) {
        return H.pipe(new p()).pipe(new N("uncompressedSize")).pipe(K.compressWorker(Y)).pipe(new N("compressedSize")).withStreamInfo("compression", K);
      }, k.exports = U;
    }, { "./external": 6, "./stream/Crc32Probe": 25, "./stream/DataLengthProbe": 26, "./stream/DataWorker": 27 }], 3: [function(L, k, re) {
      var R = L("./stream/GenericWorker");
      re.STORE = { magic: "\0\0", compressWorker: function() {
        return new R("STORE compression");
      }, uncompressWorker: function() {
        return new R("STORE decompression");
      } }, re.DEFLATE = L("./flate");
    }, { "./flate": 7, "./stream/GenericWorker": 28 }], 4: [function(L, k, re) {
      var R = L("./utils"), C = function() {
        for (var p, N = [], U = 0; U < 256; U++) {
          p = U;
          for (var H = 0; H < 8; H++)
            p = 1 & p ? 3988292384 ^ p >>> 1 : p >>> 1;
          N[U] = p;
        }
        return N;
      }();
      k.exports = function(p, N) {
        return p !== void 0 && p.length ? R.getTypeOf(p) !== "string" ? function(U, H, K, Y) {
          var F = C, q = Y + K;
          U ^= -1;
          for (var O = Y; O < q; O++)
            U = U >>> 8 ^ F[255 & (U ^ H[O])];
          return -1 ^ U;
        }(0 | N, p, p.length, 0) : function(U, H, K, Y) {
          var F = C, q = Y + K;
          U ^= -1;
          for (var O = Y; O < q; O++)
            U = U >>> 8 ^ F[255 & (U ^ H.charCodeAt(O))];
          return -1 ^ U;
        }(0 | N, p, p.length, 0) : 0;
      };
    }, { "./utils": 32 }], 5: [function(L, k, re) {
      re.base64 = !1, re.binary = !1, re.dir = !1, re.createFolders = !0, re.date = null, re.compression = null, re.compressionOptions = null, re.comment = null, re.unixPermissions = null, re.dosPermissions = null;
    }, {}], 6: [function(L, k, re) {
      var R = null;
      R = typeof Promise < "u" ? Promise : L("lie"), k.exports = { Promise: R };
    }, { lie: 37 }], 7: [function(L, k, re) {
      var R = typeof Uint8Array < "u" && typeof Uint16Array < "u" && typeof Uint32Array < "u", C = L("pako"), p = L("./utils"), N = L("./stream/GenericWorker"), U = R ? "uint8array" : "array";
      function H(K, Y) {
        N.call(this, "FlateWorker/" + K), this._pako = null, this._pakoAction = K, this._pakoOptions = Y, this.meta = {};
      }
      re.magic = "\b\0", p.inherits(H, N), H.prototype.processChunk = function(K) {
        this.meta = K.meta, this._pako === null && this._createPako(), this._pako.push(p.transformTo(U, K.data), !1);
      }, H.prototype.flush = function() {
        N.prototype.flush.call(this), this._pako === null && this._createPako(), this._pako.push([], !0);
      }, H.prototype.cleanUp = function() {
        N.prototype.cleanUp.call(this), this._pako = null;
      }, H.prototype._createPako = function() {
        this._pako = new C[this._pakoAction]({ raw: !0, level: this._pakoOptions.level || -1 });
        var K = this;
        this._pako.onData = function(Y) {
          K.push({ data: Y, meta: K.meta });
        };
      }, re.compressWorker = function(K) {
        return new H("Deflate", K);
      }, re.uncompressWorker = function() {
        return new H("Inflate", {});
      };
    }, { "./stream/GenericWorker": 28, "./utils": 32, pako: 38 }], 8: [function(L, k, re) {
      function R(F, q) {
        var O, J = "";
        for (O = 0; O < q; O++)
          J += String.fromCharCode(255 & F), F >>>= 8;
        return J;
      }
      function C(F, q, O, J, E, me) {
        var Ee, Le, Oe = F.file, Te = F.compression, Re = me !== U.utf8encode, Ve = p.transformTo("string", me(Oe.name)), We = p.transformTo("string", U.utf8encode(Oe.name)), le = Oe.comment, je = p.transformTo("string", me(le)), fe = p.transformTo("string", U.utf8encode(le)), Me = We.length !== Oe.name.length, Z = fe.length !== le.length, Ue = "", ct = "", mt = "", at = Oe.dir, Ye = Oe.date, Et = { crc32: 0, compressedSize: 0, uncompressedSize: 0 };
        q && !O || (Et.crc32 = F.crc32, Et.compressedSize = F.compressedSize, Et.uncompressedSize = F.uncompressedSize);
        var Je = 0;
        q && (Je |= 8), Re || !Me && !Z || (Je |= 2048);
        var ce = 0, Ht = 0;
        at && (ce |= 16), E === "UNIX" ? (Ht = 798, ce |= function(Be, Ge) {
          var lt = Be;
          return Be || (lt = Ge ? 16893 : 33204), (65535 & lt) << 16;
        }(Oe.unixPermissions, at)) : (Ht = 20, ce |= function(Be) {
          return 63 & (Be || 0);
        }(Oe.dosPermissions)), Ee = Ye.getUTCHours(), Ee <<= 6, Ee |= Ye.getUTCMinutes(), Ee <<= 5, Ee |= Ye.getUTCSeconds() / 2, Le = Ye.getUTCFullYear() - 1980, Le <<= 4, Le |= Ye.getUTCMonth() + 1, Le <<= 5, Le |= Ye.getUTCDate(), Me && (ct = R(1, 1) + R(H(Ve), 4) + We, Ue += "up" + R(ct.length, 2) + ct), Z && (mt = R(1, 1) + R(H(je), 4) + fe, Ue += "uc" + R(mt.length, 2) + mt);
        var Dt = "";
        return Dt += `
\0`, Dt += R(Je, 2), Dt += Te.magic, Dt += R(Ee, 2), Dt += R(Le, 2), Dt += R(Et.crc32, 4), Dt += R(Et.compressedSize, 4), Dt += R(Et.uncompressedSize, 4), Dt += R(Ve.length, 2), Dt += R(Ue.length, 2), { fileRecord: K.LOCAL_FILE_HEADER + Dt + Ve + Ue, dirRecord: K.CENTRAL_FILE_HEADER + R(Ht, 2) + Dt + R(je.length, 2) + "\0\0\0\0" + R(ce, 4) + R(J, 4) + Ve + Ue + je };
      }
      var p = L("../utils"), N = L("../stream/GenericWorker"), U = L("../utf8"), H = L("../crc32"), K = L("../signature");
      function Y(F, q, O, J) {
        N.call(this, "ZipFileWorker"), this.bytesWritten = 0, this.zipComment = q, this.zipPlatform = O, this.encodeFileName = J, this.streamFiles = F, this.accumulate = !1, this.contentBuffer = [], this.dirRecords = [], this.currentSourceOffset = 0, this.entriesCount = 0, this.currentFile = null, this._sources = [];
      }
      p.inherits(Y, N), Y.prototype.push = function(F) {
        var q = F.meta.percent || 0, O = this.entriesCount, J = this._sources.length;
        this.accumulate ? this.contentBuffer.push(F) : (this.bytesWritten += F.data.length, N.prototype.push.call(this, { data: F.data, meta: { currentFile: this.currentFile, percent: O ? (q + 100 * (O - J - 1)) / O : 100 } }));
      }, Y.prototype.openedSource = function(F) {
        this.currentSourceOffset = this.bytesWritten, this.currentFile = F.file.name;
        var q = this.streamFiles && !F.file.dir;
        if (q) {
          var O = C(F, q, !1, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
          this.push({ data: O.fileRecord, meta: { percent: 0 } });
        } else
          this.accumulate = !0;
      }, Y.prototype.closedSource = function(F) {
        this.accumulate = !1;
        var q = this.streamFiles && !F.file.dir, O = C(F, q, !0, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
        if (this.dirRecords.push(O.dirRecord), q)
          this.push({ data: function(J) {
            return K.DATA_DESCRIPTOR + R(J.crc32, 4) + R(J.compressedSize, 4) + R(J.uncompressedSize, 4);
          }(F), meta: { percent: 100 } });
        else
          for (this.push({ data: O.fileRecord, meta: { percent: 0 } }); this.contentBuffer.length; )
            this.push(this.contentBuffer.shift());
        this.currentFile = null;
      }, Y.prototype.flush = function() {
        for (var F = this.bytesWritten, q = 0; q < this.dirRecords.length; q++)
          this.push({ data: this.dirRecords[q], meta: { percent: 100 } });
        var O = this.bytesWritten - F, J = function(E, me, Ee, Le, Oe) {
          var Te = p.transformTo("string", Oe(Le));
          return K.CENTRAL_DIRECTORY_END + "\0\0\0\0" + R(E, 2) + R(E, 2) + R(me, 4) + R(Ee, 4) + R(Te.length, 2) + Te;
        }(this.dirRecords.length, O, F, this.zipComment, this.encodeFileName);
        this.push({ data: J, meta: { percent: 100 } });
      }, Y.prototype.prepareNextSource = function() {
        this.previous = this._sources.shift(), this.openedSource(this.previous.streamInfo), this.isPaused ? this.previous.pause() : this.previous.resume();
      }, Y.prototype.registerPrevious = function(F) {
        this._sources.push(F);
        var q = this;
        return F.on("data", function(O) {
          q.processChunk(O);
        }), F.on("end", function() {
          q.closedSource(q.previous.streamInfo), q._sources.length ? q.prepareNextSource() : q.end();
        }), F.on("error", function(O) {
          q.error(O);
        }), this;
      }, Y.prototype.resume = function() {
        return !!N.prototype.resume.call(this) && (!this.previous && this._sources.length ? (this.prepareNextSource(), !0) : this.previous || this._sources.length || this.generatedError ? void 0 : (this.end(), !0));
      }, Y.prototype.error = function(F) {
        var q = this._sources;
        if (!N.prototype.error.call(this, F))
          return !1;
        for (var O = 0; O < q.length; O++)
          try {
            q[O].error(F);
          } catch {
          }
        return !0;
      }, Y.prototype.lock = function() {
        N.prototype.lock.call(this);
        for (var F = this._sources, q = 0; q < F.length; q++)
          F[q].lock();
      }, k.exports = Y;
    }, { "../crc32": 4, "../signature": 23, "../stream/GenericWorker": 28, "../utf8": 31, "../utils": 32 }], 9: [function(L, k, re) {
      var R = L("../compressions"), C = L("./ZipFileWorker");
      re.generateWorker = function(p, N, U) {
        var H = new C(N.streamFiles, U, N.platform, N.encodeFileName), K = 0;
        try {
          p.forEach(function(Y, F) {
            K++;
            var q = function(me, Ee) {
              var Le = me || Ee, Oe = R[Le];
              if (!Oe)
                throw new Error(Le + " is not a valid compression method !");
              return Oe;
            }(F.options.compression, N.compression), O = F.options.compressionOptions || N.compressionOptions || {}, J = F.dir, E = F.date;
            F._compressWorker(q, O).withStreamInfo("file", { name: Y, dir: J, date: E, comment: F.comment || "", unixPermissions: F.unixPermissions, dosPermissions: F.dosPermissions }).pipe(H);
          }), H.entriesCount = K;
        } catch (Y) {
          H.error(Y);
        }
        return H;
      };
    }, { "../compressions": 3, "./ZipFileWorker": 8 }], 10: [function(L, k, re) {
      function R() {
        if (!(this instanceof R))
          return new R();
        if (arguments.length)
          throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");
        this.files = /* @__PURE__ */ Object.create(null), this.comment = null, this.root = "", this.clone = function() {
          var C = new R();
          for (var p in this)
            typeof this[p] != "function" && (C[p] = this[p]);
          return C;
        };
      }
      (R.prototype = L("./object")).loadAsync = L("./load"), R.support = L("./support"), R.defaults = L("./defaults"), R.version = "3.10.1", R.loadAsync = function(C, p) {
        return new R().loadAsync(C, p);
      }, R.external = L("./external"), k.exports = R;
    }, { "./defaults": 5, "./external": 6, "./load": 11, "./object": 15, "./support": 30 }], 11: [function(L, k, re) {
      var R = L("./utils"), C = L("./external"), p = L("./utf8"), N = L("./zipEntries"), U = L("./stream/Crc32Probe"), H = L("./nodejsUtils");
      function K(Y) {
        return new C.Promise(function(F, q) {
          var O = Y.decompressed.getContentWorker().pipe(new U());
          O.on("error", function(J) {
            q(J);
          }).on("end", function() {
            O.streamInfo.crc32 !== Y.decompressed.crc32 ? q(new Error("Corrupted zip : CRC32 mismatch")) : F();
          }).resume();
        });
      }
      k.exports = function(Y, F) {
        var q = this;
        return F = R.extend(F || {}, { base64: !1, checkCRC32: !1, optimizedBinaryString: !1, createFolders: !1, decodeFileName: p.utf8decode }), H.isNode && H.isStream(Y) ? C.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")) : R.prepareContent("the loaded zip file", Y, !0, F.optimizedBinaryString, F.base64).then(function(O) {
          var J = new N(F);
          return J.load(O), J;
        }).then(function(O) {
          var J = [C.Promise.resolve(O)], E = O.files;
          if (F.checkCRC32)
            for (var me = 0; me < E.length; me++)
              J.push(K(E[me]));
          return C.Promise.all(J);
        }).then(function(O) {
          for (var J = O.shift(), E = J.files, me = 0; me < E.length; me++) {
            var Ee = E[me], Le = Ee.fileNameStr, Oe = R.resolve(Ee.fileNameStr);
            q.file(Oe, Ee.decompressed, { binary: !0, optimizedBinaryString: !0, date: Ee.date, dir: Ee.dir, comment: Ee.fileCommentStr.length ? Ee.fileCommentStr : null, unixPermissions: Ee.unixPermissions, dosPermissions: Ee.dosPermissions, createFolders: F.createFolders }), Ee.dir || (q.file(Oe).unsafeOriginalName = Le);
          }
          return J.zipComment.length && (q.comment = J.zipComment), q;
        });
      };
    }, { "./external": 6, "./nodejsUtils": 14, "./stream/Crc32Probe": 25, "./utf8": 31, "./utils": 32, "./zipEntries": 33 }], 12: [function(L, k, re) {
      var R = L("../utils"), C = L("../stream/GenericWorker");
      function p(N, U) {
        C.call(this, "Nodejs stream input adapter for " + N), this._upstreamEnded = !1, this._bindStream(U);
      }
      R.inherits(p, C), p.prototype._bindStream = function(N) {
        var U = this;
        (this._stream = N).pause(), N.on("data", function(H) {
          U.push({ data: H, meta: { percent: 0 } });
        }).on("error", function(H) {
          U.isPaused ? this.generatedError = H : U.error(H);
        }).on("end", function() {
          U.isPaused ? U._upstreamEnded = !0 : U.end();
        });
      }, p.prototype.pause = function() {
        return !!C.prototype.pause.call(this) && (this._stream.pause(), !0);
      }, p.prototype.resume = function() {
        return !!C.prototype.resume.call(this) && (this._upstreamEnded ? this.end() : this._stream.resume(), !0);
      }, k.exports = p;
    }, { "../stream/GenericWorker": 28, "../utils": 32 }], 13: [function(L, k, re) {
      var R = L("readable-stream").Readable;
      function C(p, N, U) {
        R.call(this, N), this._helper = p;
        var H = this;
        p.on("data", function(K, Y) {
          H.push(K) || H._helper.pause(), U && U(Y);
        }).on("error", function(K) {
          H.emit("error", K);
        }).on("end", function() {
          H.push(null);
        });
      }
      L("../utils").inherits(C, R), C.prototype._read = function() {
        this._helper.resume();
      }, k.exports = C;
    }, { "../utils": 32, "readable-stream": 16 }], 14: [function(L, k, re) {
      k.exports = { isNode: typeof Buffer < "u", newBufferFrom: function(R, C) {
        if (Buffer.from && Buffer.from !== Uint8Array.from)
          return Buffer.from(R, C);
        if (typeof R == "number")
          throw new Error('The "data" argument must not be a number');
        return new Buffer(R, C);
      }, allocBuffer: function(R) {
        if (Buffer.alloc)
          return Buffer.alloc(R);
        var C = new Buffer(R);
        return C.fill(0), C;
      }, isBuffer: function(R) {
        return Buffer.isBuffer(R);
      }, isStream: function(R) {
        return R && typeof R.on == "function" && typeof R.pause == "function" && typeof R.resume == "function";
      } };
    }, {}], 15: [function(L, k, re) {
      function R(Oe, Te, Re) {
        var Ve, We = p.getTypeOf(Te), le = p.extend(Re || {}, H);
        le.date = le.date || /* @__PURE__ */ new Date(), le.compression !== null && (le.compression = le.compression.toUpperCase()), typeof le.unixPermissions == "string" && (le.unixPermissions = parseInt(le.unixPermissions, 8)), le.unixPermissions && 16384 & le.unixPermissions && (le.dir = !0), le.dosPermissions && 16 & le.dosPermissions && (le.dir = !0), le.dir && (Oe = E(Oe)), le.createFolders && (Ve = J(Oe)) && me.call(this, Ve, !0);
        var je = We === "string" && le.binary === !1 && le.base64 === !1;
        Re && Re.binary !== void 0 || (le.binary = !je), (Te instanceof K && Te.uncompressedSize === 0 || le.dir || !Te || Te.length === 0) && (le.base64 = !1, le.binary = !0, Te = "", le.compression = "STORE", We = "string");
        var fe = null;
        fe = Te instanceof K || Te instanceof N ? Te : q.isNode && q.isStream(Te) ? new O(Oe, Te) : p.prepareContent(Oe, Te, le.binary, le.optimizedBinaryString, le.base64);
        var Me = new Y(Oe, fe, le);
        this.files[Oe] = Me;
      }
      var C = L("./utf8"), p = L("./utils"), N = L("./stream/GenericWorker"), U = L("./stream/StreamHelper"), H = L("./defaults"), K = L("./compressedObject"), Y = L("./zipObject"), F = L("./generate"), q = L("./nodejsUtils"), O = L("./nodejs/NodejsStreamInputAdapter"), J = function(Oe) {
        Oe.slice(-1) === "/" && (Oe = Oe.substring(0, Oe.length - 1));
        var Te = Oe.lastIndexOf("/");
        return 0 < Te ? Oe.substring(0, Te) : "";
      }, E = function(Oe) {
        return Oe.slice(-1) !== "/" && (Oe += "/"), Oe;
      }, me = function(Oe, Te) {
        return Te = Te !== void 0 ? Te : H.createFolders, Oe = E(Oe), this.files[Oe] || R.call(this, Oe, null, { dir: !0, createFolders: Te }), this.files[Oe];
      };
      function Ee(Oe) {
        return Object.prototype.toString.call(Oe) === "[object RegExp]";
      }
      var Le = { load: function() {
        throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
      }, forEach: function(Oe) {
        var Te, Re, Ve;
        for (Te in this.files)
          Ve = this.files[Te], (Re = Te.slice(this.root.length, Te.length)) && Te.slice(0, this.root.length) === this.root && Oe(Re, Ve);
      }, filter: function(Oe) {
        var Te = [];
        return this.forEach(function(Re, Ve) {
          Oe(Re, Ve) && Te.push(Ve);
        }), Te;
      }, file: function(Oe, Te, Re) {
        if (arguments.length !== 1)
          return Oe = this.root + Oe, R.call(this, Oe, Te, Re), this;
        if (Ee(Oe)) {
          var Ve = Oe;
          return this.filter(function(le, je) {
            return !je.dir && Ve.test(le);
          });
        }
        var We = this.files[this.root + Oe];
        return We && !We.dir ? We : null;
      }, folder: function(Oe) {
        if (!Oe)
          return this;
        if (Ee(Oe))
          return this.filter(function(We, le) {
            return le.dir && Oe.test(We);
          });
        var Te = this.root + Oe, Re = me.call(this, Te), Ve = this.clone();
        return Ve.root = Re.name, Ve;
      }, remove: function(Oe) {
        Oe = this.root + Oe;
        var Te = this.files[Oe];
        if (Te || (Oe.slice(-1) !== "/" && (Oe += "/"), Te = this.files[Oe]), Te && !Te.dir)
          delete this.files[Oe];
        else
          for (var Re = this.filter(function(We, le) {
            return le.name.slice(0, Oe.length) === Oe;
          }), Ve = 0; Ve < Re.length; Ve++)
            delete this.files[Re[Ve].name];
        return this;
      }, generate: function() {
        throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
      }, generateInternalStream: function(Oe) {
        var Te, Re = {};
        try {
          if ((Re = p.extend(Oe || {}, { streamFiles: !1, compression: "STORE", compressionOptions: null, type: "", platform: "DOS", comment: null, mimeType: "application/zip", encodeFileName: C.utf8encode })).type = Re.type.toLowerCase(), Re.compression = Re.compression.toUpperCase(), Re.type === "binarystring" && (Re.type = "string"), !Re.type)
            throw new Error("No output type specified.");
          p.checkSupport(Re.type), Re.platform !== "darwin" && Re.platform !== "freebsd" && Re.platform !== "linux" && Re.platform !== "sunos" || (Re.platform = "UNIX"), Re.platform === "win32" && (Re.platform = "DOS");
          var Ve = Re.comment || this.comment || "";
          Te = F.generateWorker(this, Re, Ve);
        } catch (We) {
          (Te = new N("error")).error(We);
        }
        return new U(Te, Re.type || "string", Re.mimeType);
      }, generateAsync: function(Oe, Te) {
        return this.generateInternalStream(Oe).accumulate(Te);
      }, generateNodeStream: function(Oe, Te) {
        return (Oe = Oe || {}).type || (Oe.type = "nodebuffer"), this.generateInternalStream(Oe).toNodejsStream(Te);
      } };
      k.exports = Le;
    }, { "./compressedObject": 2, "./defaults": 5, "./generate": 9, "./nodejs/NodejsStreamInputAdapter": 12, "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31, "./utils": 32, "./zipObject": 35 }], 16: [function(L, k, re) {
      k.exports = L("stream");
    }, { stream: void 0 }], 17: [function(L, k, re) {
      var R = L("./DataReader");
      function C(p) {
        R.call(this, p);
        for (var N = 0; N < this.data.length; N++)
          p[N] = 255 & p[N];
      }
      L("../utils").inherits(C, R), C.prototype.byteAt = function(p) {
        return this.data[this.zero + p];
      }, C.prototype.lastIndexOfSignature = function(p) {
        for (var N = p.charCodeAt(0), U = p.charCodeAt(1), H = p.charCodeAt(2), K = p.charCodeAt(3), Y = this.length - 4; 0 <= Y; --Y)
          if (this.data[Y] === N && this.data[Y + 1] === U && this.data[Y + 2] === H && this.data[Y + 3] === K)
            return Y - this.zero;
        return -1;
      }, C.prototype.readAndCheckSignature = function(p) {
        var N = p.charCodeAt(0), U = p.charCodeAt(1), H = p.charCodeAt(2), K = p.charCodeAt(3), Y = this.readData(4);
        return N === Y[0] && U === Y[1] && H === Y[2] && K === Y[3];
      }, C.prototype.readData = function(p) {
        if (this.checkOffset(p), p === 0)
          return [];
        var N = this.data.slice(this.zero + this.index, this.zero + this.index + p);
        return this.index += p, N;
      }, k.exports = C;
    }, { "../utils": 32, "./DataReader": 18 }], 18: [function(L, k, re) {
      var R = L("../utils");
      function C(p) {
        this.data = p, this.length = p.length, this.index = 0, this.zero = 0;
      }
      C.prototype = { checkOffset: function(p) {
        this.checkIndex(this.index + p);
      }, checkIndex: function(p) {
        if (this.length < this.zero + p || p < 0)
          throw new Error("End of data reached (data length = " + this.length + ", asked index = " + p + "). Corrupted zip ?");
      }, setIndex: function(p) {
        this.checkIndex(p), this.index = p;
      }, skip: function(p) {
        this.setIndex(this.index + p);
      }, byteAt: function() {
      }, readInt: function(p) {
        var N, U = 0;
        for (this.checkOffset(p), N = this.index + p - 1; N >= this.index; N--)
          U = (U << 8) + this.byteAt(N);
        return this.index += p, U;
      }, readString: function(p) {
        return R.transformTo("string", this.readData(p));
      }, readData: function() {
      }, lastIndexOfSignature: function() {
      }, readAndCheckSignature: function() {
      }, readDate: function() {
        var p = this.readInt(4);
        return new Date(Date.UTC(1980 + (p >> 25 & 127), (p >> 21 & 15) - 1, p >> 16 & 31, p >> 11 & 31, p >> 5 & 63, (31 & p) << 1));
      } }, k.exports = C;
    }, { "../utils": 32 }], 19: [function(L, k, re) {
      var R = L("./Uint8ArrayReader");
      function C(p) {
        R.call(this, p);
      }
      L("../utils").inherits(C, R), C.prototype.readData = function(p) {
        this.checkOffset(p);
        var N = this.data.slice(this.zero + this.index, this.zero + this.index + p);
        return this.index += p, N;
      }, k.exports = C;
    }, { "../utils": 32, "./Uint8ArrayReader": 21 }], 20: [function(L, k, re) {
      var R = L("./DataReader");
      function C(p) {
        R.call(this, p);
      }
      L("../utils").inherits(C, R), C.prototype.byteAt = function(p) {
        return this.data.charCodeAt(this.zero + p);
      }, C.prototype.lastIndexOfSignature = function(p) {
        return this.data.lastIndexOf(p) - this.zero;
      }, C.prototype.readAndCheckSignature = function(p) {
        return p === this.readData(4);
      }, C.prototype.readData = function(p) {
        this.checkOffset(p);
        var N = this.data.slice(this.zero + this.index, this.zero + this.index + p);
        return this.index += p, N;
      }, k.exports = C;
    }, { "../utils": 32, "./DataReader": 18 }], 21: [function(L, k, re) {
      var R = L("./ArrayReader");
      function C(p) {
        R.call(this, p);
      }
      L("../utils").inherits(C, R), C.prototype.readData = function(p) {
        if (this.checkOffset(p), p === 0)
          return new Uint8Array(0);
        var N = this.data.subarray(this.zero + this.index, this.zero + this.index + p);
        return this.index += p, N;
      }, k.exports = C;
    }, { "../utils": 32, "./ArrayReader": 17 }], 22: [function(L, k, re) {
      var R = L("../utils"), C = L("../support"), p = L("./ArrayReader"), N = L("./StringReader"), U = L("./NodeBufferReader"), H = L("./Uint8ArrayReader");
      k.exports = function(K) {
        var Y = R.getTypeOf(K);
        return R.checkSupport(Y), Y !== "string" || C.uint8array ? Y === "nodebuffer" ? new U(K) : C.uint8array ? new H(R.transformTo("uint8array", K)) : new p(R.transformTo("array", K)) : new N(K);
      };
    }, { "../support": 30, "../utils": 32, "./ArrayReader": 17, "./NodeBufferReader": 19, "./StringReader": 20, "./Uint8ArrayReader": 21 }], 23: [function(L, k, re) {
      re.LOCAL_FILE_HEADER = "PK", re.CENTRAL_FILE_HEADER = "PK", re.CENTRAL_DIRECTORY_END = "PK", re.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK\x07", re.ZIP64_CENTRAL_DIRECTORY_END = "PK", re.DATA_DESCRIPTOR = "PK\x07\b";
    }, {}], 24: [function(L, k, re) {
      var R = L("./GenericWorker"), C = L("../utils");
      function p(N) {
        R.call(this, "ConvertWorker to " + N), this.destType = N;
      }
      C.inherits(p, R), p.prototype.processChunk = function(N) {
        this.push({ data: C.transformTo(this.destType, N.data), meta: N.meta });
      }, k.exports = p;
    }, { "../utils": 32, "./GenericWorker": 28 }], 25: [function(L, k, re) {
      var R = L("./GenericWorker"), C = L("../crc32");
      function p() {
        R.call(this, "Crc32Probe"), this.withStreamInfo("crc32", 0);
      }
      L("../utils").inherits(p, R), p.prototype.processChunk = function(N) {
        this.streamInfo.crc32 = C(N.data, this.streamInfo.crc32 || 0), this.push(N);
      }, k.exports = p;
    }, { "../crc32": 4, "../utils": 32, "./GenericWorker": 28 }], 26: [function(L, k, re) {
      var R = L("../utils"), C = L("./GenericWorker");
      function p(N) {
        C.call(this, "DataLengthProbe for " + N), this.propName = N, this.withStreamInfo(N, 0);
      }
      R.inherits(p, C), p.prototype.processChunk = function(N) {
        if (N) {
          var U = this.streamInfo[this.propName] || 0;
          this.streamInfo[this.propName] = U + N.data.length;
        }
        C.prototype.processChunk.call(this, N);
      }, k.exports = p;
    }, { "../utils": 32, "./GenericWorker": 28 }], 27: [function(L, k, re) {
      var R = L("../utils"), C = L("./GenericWorker");
      function p(N) {
        C.call(this, "DataWorker");
        var U = this;
        this.dataIsReady = !1, this.index = 0, this.max = 0, this.data = null, this.type = "", this._tickScheduled = !1, N.then(function(H) {
          U.dataIsReady = !0, U.data = H, U.max = H && H.length || 0, U.type = R.getTypeOf(H), U.isPaused || U._tickAndRepeat();
        }, function(H) {
          U.error(H);
        });
      }
      R.inherits(p, C), p.prototype.cleanUp = function() {
        C.prototype.cleanUp.call(this), this.data = null;
      }, p.prototype.resume = function() {
        return !!C.prototype.resume.call(this) && (!this._tickScheduled && this.dataIsReady && (this._tickScheduled = !0, R.delay(this._tickAndRepeat, [], this)), !0);
      }, p.prototype._tickAndRepeat = function() {
        this._tickScheduled = !1, this.isPaused || this.isFinished || (this._tick(), this.isFinished || (R.delay(this._tickAndRepeat, [], this), this._tickScheduled = !0));
      }, p.prototype._tick = function() {
        if (this.isPaused || this.isFinished)
          return !1;
        var N = null, U = Math.min(this.max, this.index + 16384);
        if (this.index >= this.max)
          return this.end();
        switch (this.type) {
          case "string":
            N = this.data.substring(this.index, U);
            break;
          case "uint8array":
            N = this.data.subarray(this.index, U);
            break;
          case "array":
          case "nodebuffer":
            N = this.data.slice(this.index, U);
        }
        return this.index = U, this.push({ data: N, meta: { percent: this.max ? this.index / this.max * 100 : 0 } });
      }, k.exports = p;
    }, { "../utils": 32, "./GenericWorker": 28 }], 28: [function(L, k, re) {
      function R(C) {
        this.name = C || "default", this.streamInfo = {}, this.generatedError = null, this.extraStreamInfo = {}, this.isPaused = !0, this.isFinished = !1, this.isLocked = !1, this._listeners = { data: [], end: [], error: [] }, this.previous = null;
      }
      R.prototype = { push: function(C) {
        this.emit("data", C);
      }, end: function() {
        if (this.isFinished)
          return !1;
        this.flush();
        try {
          this.emit("end"), this.cleanUp(), this.isFinished = !0;
        } catch (C) {
          this.emit("error", C);
        }
        return !0;
      }, error: function(C) {
        return !this.isFinished && (this.isPaused ? this.generatedError = C : (this.isFinished = !0, this.emit("error", C), this.previous && this.previous.error(C), this.cleanUp()), !0);
      }, on: function(C, p) {
        return this._listeners[C].push(p), this;
      }, cleanUp: function() {
        this.streamInfo = this.generatedError = this.extraStreamInfo = null, this._listeners = [];
      }, emit: function(C, p) {
        if (this._listeners[C])
          for (var N = 0; N < this._listeners[C].length; N++)
            this._listeners[C][N].call(this, p);
      }, pipe: function(C) {
        return C.registerPrevious(this);
      }, registerPrevious: function(C) {
        if (this.isLocked)
          throw new Error("The stream '" + this + "' has already been used.");
        this.streamInfo = C.streamInfo, this.mergeStreamInfo(), this.previous = C;
        var p = this;
        return C.on("data", function(N) {
          p.processChunk(N);
        }), C.on("end", function() {
          p.end();
        }), C.on("error", function(N) {
          p.error(N);
        }), this;
      }, pause: function() {
        return !this.isPaused && !this.isFinished && (this.isPaused = !0, this.previous && this.previous.pause(), !0);
      }, resume: function() {
        if (!this.isPaused || this.isFinished)
          return !1;
        var C = this.isPaused = !1;
        return this.generatedError && (this.error(this.generatedError), C = !0), this.previous && this.previous.resume(), !C;
      }, flush: function() {
      }, processChunk: function(C) {
        this.push(C);
      }, withStreamInfo: function(C, p) {
        return this.extraStreamInfo[C] = p, this.mergeStreamInfo(), this;
      }, mergeStreamInfo: function() {
        for (var C in this.extraStreamInfo)
          Object.prototype.hasOwnProperty.call(this.extraStreamInfo, C) && (this.streamInfo[C] = this.extraStreamInfo[C]);
      }, lock: function() {
        if (this.isLocked)
          throw new Error("The stream '" + this + "' has already been used.");
        this.isLocked = !0, this.previous && this.previous.lock();
      }, toString: function() {
        var C = "Worker " + this.name;
        return this.previous ? this.previous + " -> " + C : C;
      } }, k.exports = R;
    }, {}], 29: [function(L, k, re) {
      var R = L("../utils"), C = L("./ConvertWorker"), p = L("./GenericWorker"), N = L("../base64"), U = L("../support"), H = L("../external"), K = null;
      if (U.nodestream)
        try {
          K = L("../nodejs/NodejsStreamOutputAdapter");
        } catch {
        }
      function Y(q, O) {
        return new H.Promise(function(J, E) {
          var me = [], Ee = q._internalType, Le = q._outputType, Oe = q._mimeType;
          q.on("data", function(Te, Re) {
            me.push(Te), O && O(Re);
          }).on("error", function(Te) {
            me = [], E(Te);
          }).on("end", function() {
            try {
              var Te = function(Re, Ve, We) {
                switch (Re) {
                  case "blob":
                    return R.newBlob(R.transformTo("arraybuffer", Ve), We);
                  case "base64":
                    return N.encode(Ve);
                  default:
                    return R.transformTo(Re, Ve);
                }
              }(Le, function(Re, Ve) {
                var We, le = 0, je = null, fe = 0;
                for (We = 0; We < Ve.length; We++)
                  fe += Ve[We].length;
                switch (Re) {
                  case "string":
                    return Ve.join("");
                  case "array":
                    return Array.prototype.concat.apply([], Ve);
                  case "uint8array":
                    for (je = new Uint8Array(fe), We = 0; We < Ve.length; We++)
                      je.set(Ve[We], le), le += Ve[We].length;
                    return je;
                  case "nodebuffer":
                    return Buffer.concat(Ve);
                  default:
                    throw new Error("concat : unsupported type '" + Re + "'");
                }
              }(Ee, me), Oe);
              J(Te);
            } catch (Re) {
              E(Re);
            }
            me = [];
          }).resume();
        });
      }
      function F(q, O, J) {
        var E = O;
        switch (O) {
          case "blob":
          case "arraybuffer":
            E = "uint8array";
            break;
          case "base64":
            E = "string";
        }
        try {
          this._internalType = E, this._outputType = O, this._mimeType = J, R.checkSupport(E), this._worker = q.pipe(new C(E)), q.lock();
        } catch (me) {
          this._worker = new p("error"), this._worker.error(me);
        }
      }
      F.prototype = { accumulate: function(q) {
        return Y(this, q);
      }, on: function(q, O) {
        var J = this;
        return q === "data" ? this._worker.on(q, function(E) {
          O.call(J, E.data, E.meta);
        }) : this._worker.on(q, function() {
          R.delay(O, arguments, J);
        }), this;
      }, resume: function() {
        return R.delay(this._worker.resume, [], this._worker), this;
      }, pause: function() {
        return this._worker.pause(), this;
      }, toNodejsStream: function(q) {
        if (R.checkSupport("nodestream"), this._outputType !== "nodebuffer")
          throw new Error(this._outputType + " is not supported by this method");
        return new K(this, { objectMode: this._outputType !== "nodebuffer" }, q);
      } }, k.exports = F;
    }, { "../base64": 1, "../external": 6, "../nodejs/NodejsStreamOutputAdapter": 13, "../support": 30, "../utils": 32, "./ConvertWorker": 24, "./GenericWorker": 28 }], 30: [function(L, k, re) {
      if (re.base64 = !0, re.array = !0, re.string = !0, re.arraybuffer = typeof ArrayBuffer < "u" && typeof Uint8Array < "u", re.nodebuffer = typeof Buffer < "u", re.uint8array = typeof Uint8Array < "u", typeof ArrayBuffer > "u")
        re.blob = !1;
      else {
        var R = new ArrayBuffer(0);
        try {
          re.blob = new Blob([R], { type: "application/zip" }).size === 0;
        } catch {
          try {
            var C = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
            C.append(R), re.blob = C.getBlob("application/zip").size === 0;
          } catch {
            re.blob = !1;
          }
        }
      }
      try {
        re.nodestream = !!L("readable-stream").Readable;
      } catch {
        re.nodestream = !1;
      }
    }, { "readable-stream": 16 }], 31: [function(L, k, re) {
      for (var R = L("./utils"), C = L("./support"), p = L("./nodejsUtils"), N = L("./stream/GenericWorker"), U = new Array(256), H = 0; H < 256; H++)
        U[H] = 252 <= H ? 6 : 248 <= H ? 5 : 240 <= H ? 4 : 224 <= H ? 3 : 192 <= H ? 2 : 1;
      U[254] = U[254] = 1;
      function K() {
        N.call(this, "utf-8 decode"), this.leftOver = null;
      }
      function Y() {
        N.call(this, "utf-8 encode");
      }
      re.utf8encode = function(F) {
        return C.nodebuffer ? p.newBufferFrom(F, "utf-8") : function(q) {
          var O, J, E, me, Ee, Le = q.length, Oe = 0;
          for (me = 0; me < Le; me++)
            (64512 & (J = q.charCodeAt(me))) == 55296 && me + 1 < Le && (64512 & (E = q.charCodeAt(me + 1))) == 56320 && (J = 65536 + (J - 55296 << 10) + (E - 56320), me++), Oe += J < 128 ? 1 : J < 2048 ? 2 : J < 65536 ? 3 : 4;
          for (O = C.uint8array ? new Uint8Array(Oe) : new Array(Oe), me = Ee = 0; Ee < Oe; me++)
            (64512 & (J = q.charCodeAt(me))) == 55296 && me + 1 < Le && (64512 & (E = q.charCodeAt(me + 1))) == 56320 && (J = 65536 + (J - 55296 << 10) + (E - 56320), me++), J < 128 ? O[Ee++] = J : (J < 2048 ? O[Ee++] = 192 | J >>> 6 : (J < 65536 ? O[Ee++] = 224 | J >>> 12 : (O[Ee++] = 240 | J >>> 18, O[Ee++] = 128 | J >>> 12 & 63), O[Ee++] = 128 | J >>> 6 & 63), O[Ee++] = 128 | 63 & J);
          return O;
        }(F);
      }, re.utf8decode = function(F) {
        return C.nodebuffer ? R.transformTo("nodebuffer", F).toString("utf-8") : function(q) {
          var O, J, E, me, Ee = q.length, Le = new Array(2 * Ee);
          for (O = J = 0; O < Ee; )
            if ((E = q[O++]) < 128)
              Le[J++] = E;
            else if (4 < (me = U[E]))
              Le[J++] = 65533, O += me - 1;
            else {
              for (E &= me === 2 ? 31 : me === 3 ? 15 : 7; 1 < me && O < Ee; )
                E = E << 6 | 63 & q[O++], me--;
              1 < me ? Le[J++] = 65533 : E < 65536 ? Le[J++] = E : (E -= 65536, Le[J++] = 55296 | E >> 10 & 1023, Le[J++] = 56320 | 1023 & E);
            }
          return Le.length !== J && (Le.subarray ? Le = Le.subarray(0, J) : Le.length = J), R.applyFromCharCode(Le);
        }(F = R.transformTo(C.uint8array ? "uint8array" : "array", F));
      }, R.inherits(K, N), K.prototype.processChunk = function(F) {
        var q = R.transformTo(C.uint8array ? "uint8array" : "array", F.data);
        if (this.leftOver && this.leftOver.length) {
          if (C.uint8array) {
            var O = q;
            (q = new Uint8Array(O.length + this.leftOver.length)).set(this.leftOver, 0), q.set(O, this.leftOver.length);
          } else
            q = this.leftOver.concat(q);
          this.leftOver = null;
        }
        var J = function(me, Ee) {
          var Le;
          for ((Ee = Ee || me.length) > me.length && (Ee = me.length), Le = Ee - 1; 0 <= Le && (192 & me[Le]) == 128; )
            Le--;
          return Le < 0 || Le === 0 ? Ee : Le + U[me[Le]] > Ee ? Le : Ee;
        }(q), E = q;
        J !== q.length && (C.uint8array ? (E = q.subarray(0, J), this.leftOver = q.subarray(J, q.length)) : (E = q.slice(0, J), this.leftOver = q.slice(J, q.length))), this.push({ data: re.utf8decode(E), meta: F.meta });
      }, K.prototype.flush = function() {
        this.leftOver && this.leftOver.length && (this.push({ data: re.utf8decode(this.leftOver), meta: {} }), this.leftOver = null);
      }, re.Utf8DecodeWorker = K, R.inherits(Y, N), Y.prototype.processChunk = function(F) {
        this.push({ data: re.utf8encode(F.data), meta: F.meta });
      }, re.Utf8EncodeWorker = Y;
    }, { "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./support": 30, "./utils": 32 }], 32: [function(L, k, re) {
      var R = L("./support"), C = L("./base64"), p = L("./nodejsUtils"), N = L("./external");
      function U(O) {
        return O;
      }
      function H(O, J) {
        for (var E = 0; E < O.length; ++E)
          J[E] = 255 & O.charCodeAt(E);
        return J;
      }
      L("setimmediate"), re.newBlob = function(O, J) {
        re.checkSupport("blob");
        try {
          return new Blob([O], { type: J });
        } catch {
          try {
            var E = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
            return E.append(O), E.getBlob(J);
          } catch {
            throw new Error("Bug : can't construct the Blob.");
          }
        }
      };
      var K = { stringifyByChunk: function(O, J, E) {
        var me = [], Ee = 0, Le = O.length;
        if (Le <= E)
          return String.fromCharCode.apply(null, O);
        for (; Ee < Le; )
          J === "array" || J === "nodebuffer" ? me.push(String.fromCharCode.apply(null, O.slice(Ee, Math.min(Ee + E, Le)))) : me.push(String.fromCharCode.apply(null, O.subarray(Ee, Math.min(Ee + E, Le)))), Ee += E;
        return me.join("");
      }, stringifyByChar: function(O) {
        for (var J = "", E = 0; E < O.length; E++)
          J += String.fromCharCode(O[E]);
        return J;
      }, applyCanBeUsed: { uint8array: function() {
        try {
          return R.uint8array && String.fromCharCode.apply(null, new Uint8Array(1)).length === 1;
        } catch {
          return !1;
        }
      }(), nodebuffer: function() {
        try {
          return R.nodebuffer && String.fromCharCode.apply(null, p.allocBuffer(1)).length === 1;
        } catch {
          return !1;
        }
      }() } };
      function Y(O) {
        var J = 65536, E = re.getTypeOf(O), me = !0;
        if (E === "uint8array" ? me = K.applyCanBeUsed.uint8array : E === "nodebuffer" && (me = K.applyCanBeUsed.nodebuffer), me)
          for (; 1 < J; )
            try {
              return K.stringifyByChunk(O, E, J);
            } catch {
              J = Math.floor(J / 2);
            }
        return K.stringifyByChar(O);
      }
      function F(O, J) {
        for (var E = 0; E < O.length; E++)
          J[E] = O[E];
        return J;
      }
      re.applyFromCharCode = Y;
      var q = {};
      q.string = { string: U, array: function(O) {
        return H(O, new Array(O.length));
      }, arraybuffer: function(O) {
        return q.string.uint8array(O).buffer;
      }, uint8array: function(O) {
        return H(O, new Uint8Array(O.length));
      }, nodebuffer: function(O) {
        return H(O, p.allocBuffer(O.length));
      } }, q.array = { string: Y, array: U, arraybuffer: function(O) {
        return new Uint8Array(O).buffer;
      }, uint8array: function(O) {
        return new Uint8Array(O);
      }, nodebuffer: function(O) {
        return p.newBufferFrom(O);
      } }, q.arraybuffer = { string: function(O) {
        return Y(new Uint8Array(O));
      }, array: function(O) {
        return F(new Uint8Array(O), new Array(O.byteLength));
      }, arraybuffer: U, uint8array: function(O) {
        return new Uint8Array(O);
      }, nodebuffer: function(O) {
        return p.newBufferFrom(new Uint8Array(O));
      } }, q.uint8array = { string: Y, array: function(O) {
        return F(O, new Array(O.length));
      }, arraybuffer: function(O) {
        return O.buffer;
      }, uint8array: U, nodebuffer: function(O) {
        return p.newBufferFrom(O);
      } }, q.nodebuffer = { string: Y, array: function(O) {
        return F(O, new Array(O.length));
      }, arraybuffer: function(O) {
        return q.nodebuffer.uint8array(O).buffer;
      }, uint8array: function(O) {
        return F(O, new Uint8Array(O.length));
      }, nodebuffer: U }, re.transformTo = function(O, J) {
        if (J = J || "", !O)
          return J;
        re.checkSupport(O);
        var E = re.getTypeOf(J);
        return q[E][O](J);
      }, re.resolve = function(O) {
        for (var J = O.split("/"), E = [], me = 0; me < J.length; me++) {
          var Ee = J[me];
          Ee === "." || Ee === "" && me !== 0 && me !== J.length - 1 || (Ee === ".." ? E.pop() : E.push(Ee));
        }
        return E.join("/");
      }, re.getTypeOf = function(O) {
        return typeof O == "string" ? "string" : Object.prototype.toString.call(O) === "[object Array]" ? "array" : R.nodebuffer && p.isBuffer(O) ? "nodebuffer" : R.uint8array && O instanceof Uint8Array ? "uint8array" : R.arraybuffer && O instanceof ArrayBuffer ? "arraybuffer" : void 0;
      }, re.checkSupport = function(O) {
        if (!R[O.toLowerCase()])
          throw new Error(O + " is not supported by this platform");
      }, re.MAX_VALUE_16BITS = 65535, re.MAX_VALUE_32BITS = -1, re.pretty = function(O) {
        var J, E, me = "";
        for (E = 0; E < (O || "").length; E++)
          me += "\\x" + ((J = O.charCodeAt(E)) < 16 ? "0" : "") + J.toString(16).toUpperCase();
        return me;
      }, re.delay = function(O, J, E) {
        setImmediate(function() {
          O.apply(E || null, J || []);
        });
      }, re.inherits = function(O, J) {
        function E() {
        }
        E.prototype = J.prototype, O.prototype = new E();
      }, re.extend = function() {
        var O, J, E = {};
        for (O = 0; O < arguments.length; O++)
          for (J in arguments[O])
            Object.prototype.hasOwnProperty.call(arguments[O], J) && E[J] === void 0 && (E[J] = arguments[O][J]);
        return E;
      }, re.prepareContent = function(O, J, E, me, Ee) {
        return N.Promise.resolve(J).then(function(Le) {
          return R.blob && (Le instanceof Blob || ["[object File]", "[object Blob]"].indexOf(Object.prototype.toString.call(Le)) !== -1) && typeof FileReader < "u" ? new N.Promise(function(Oe, Te) {
            var Re = new FileReader();
            Re.onload = function(Ve) {
              Oe(Ve.target.result);
            }, Re.onerror = function(Ve) {
              Te(Ve.target.error);
            }, Re.readAsArrayBuffer(Le);
          }) : Le;
        }).then(function(Le) {
          var Oe = re.getTypeOf(Le);
          return Oe ? (Oe === "arraybuffer" ? Le = re.transformTo("uint8array", Le) : Oe === "string" && (Ee ? Le = C.decode(Le) : E && me !== !0 && (Le = function(Te) {
            return H(Te, R.uint8array ? new Uint8Array(Te.length) : new Array(Te.length));
          }(Le))), Le) : N.Promise.reject(new Error("Can't read the data of '" + O + "'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));
        });
      };
    }, { "./base64": 1, "./external": 6, "./nodejsUtils": 14, "./support": 30, setimmediate: 54 }], 33: [function(L, k, re) {
      var R = L("./reader/readerFor"), C = L("./utils"), p = L("./signature"), N = L("./zipEntry"), U = L("./support");
      function H(K) {
        this.files = [], this.loadOptions = K;
      }
      H.prototype = { checkSignature: function(K) {
        if (!this.reader.readAndCheckSignature(K)) {
          this.reader.index -= 4;
          var Y = this.reader.readString(4);
          throw new Error("Corrupted zip or bug: unexpected signature (" + C.pretty(Y) + ", expected " + C.pretty(K) + ")");
        }
      }, isSignature: function(K, Y) {
        var F = this.reader.index;
        this.reader.setIndex(K);
        var q = this.reader.readString(4) === Y;
        return this.reader.setIndex(F), q;
      }, readBlockEndOfCentral: function() {
        this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2);
        var K = this.reader.readData(this.zipCommentLength), Y = U.uint8array ? "uint8array" : "array", F = C.transformTo(Y, K);
        this.zipComment = this.loadOptions.decodeFileName(F);
      }, readBlockZip64EndOfCentral: function() {
        this.zip64EndOfCentralSize = this.reader.readInt(8), this.reader.skip(4), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {};
        for (var K, Y, F, q = this.zip64EndOfCentralSize - 44; 0 < q; )
          K = this.reader.readInt(2), Y = this.reader.readInt(4), F = this.reader.readData(Y), this.zip64ExtensibleData[K] = { id: K, length: Y, value: F };
      }, readBlockZip64EndOfCentralLocator: function() {
        if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), 1 < this.disksCount)
          throw new Error("Multi-volumes zip are not supported");
      }, readLocalFiles: function() {
        var K, Y;
        for (K = 0; K < this.files.length; K++)
          Y = this.files[K], this.reader.setIndex(Y.localHeaderOffset), this.checkSignature(p.LOCAL_FILE_HEADER), Y.readLocalPart(this.reader), Y.handleUTF8(), Y.processAttributes();
      }, readCentralDir: function() {
        var K;
        for (this.reader.setIndex(this.centralDirOffset); this.reader.readAndCheckSignature(p.CENTRAL_FILE_HEADER); )
          (K = new N({ zip64: this.zip64 }, this.loadOptions)).readCentralPart(this.reader), this.files.push(K);
        if (this.centralDirRecords !== this.files.length && this.centralDirRecords !== 0 && this.files.length === 0)
          throw new Error("Corrupted zip or bug: expected " + this.centralDirRecords + " records in central dir, got " + this.files.length);
      }, readEndOfCentral: function() {
        var K = this.reader.lastIndexOfSignature(p.CENTRAL_DIRECTORY_END);
        if (K < 0)
          throw this.isSignature(0, p.LOCAL_FILE_HEADER) ? new Error("Corrupted zip: can't find end of central directory") : new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");
        this.reader.setIndex(K);
        var Y = K;
        if (this.checkSignature(p.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === C.MAX_VALUE_16BITS || this.diskWithCentralDirStart === C.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === C.MAX_VALUE_16BITS || this.centralDirRecords === C.MAX_VALUE_16BITS || this.centralDirSize === C.MAX_VALUE_32BITS || this.centralDirOffset === C.MAX_VALUE_32BITS) {
          if (this.zip64 = !0, (K = this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR)) < 0)
            throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");
          if (this.reader.setIndex(K), this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), !this.isSignature(this.relativeOffsetEndOfZip64CentralDir, p.ZIP64_CENTRAL_DIRECTORY_END) && (this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_END), this.relativeOffsetEndOfZip64CentralDir < 0))
            throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");
          this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral();
        }
        var F = this.centralDirOffset + this.centralDirSize;
        this.zip64 && (F += 20, F += 12 + this.zip64EndOfCentralSize);
        var q = Y - F;
        if (0 < q)
          this.isSignature(Y, p.CENTRAL_FILE_HEADER) || (this.reader.zero = q);
        else if (q < 0)
          throw new Error("Corrupted zip: missing " + Math.abs(q) + " bytes.");
      }, prepareReader: function(K) {
        this.reader = R(K);
      }, load: function(K) {
        this.prepareReader(K), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles();
      } }, k.exports = H;
    }, { "./reader/readerFor": 22, "./signature": 23, "./support": 30, "./utils": 32, "./zipEntry": 34 }], 34: [function(L, k, re) {
      var R = L("./reader/readerFor"), C = L("./utils"), p = L("./compressedObject"), N = L("./crc32"), U = L("./utf8"), H = L("./compressions"), K = L("./support");
      function Y(F, q) {
        this.options = F, this.loadOptions = q;
      }
      Y.prototype = { isEncrypted: function() {
        return (1 & this.bitFlag) == 1;
      }, useUTF8: function() {
        return (2048 & this.bitFlag) == 2048;
      }, readLocalPart: function(F) {
        var q, O;
        if (F.skip(22), this.fileNameLength = F.readInt(2), O = F.readInt(2), this.fileName = F.readData(this.fileNameLength), F.skip(O), this.compressedSize === -1 || this.uncompressedSize === -1)
          throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");
        if ((q = function(J) {
          for (var E in H)
            if (Object.prototype.hasOwnProperty.call(H, E) && H[E].magic === J)
              return H[E];
          return null;
        }(this.compressionMethod)) === null)
          throw new Error("Corrupted zip : compression " + C.pretty(this.compressionMethod) + " unknown (inner file : " + C.transformTo("string", this.fileName) + ")");
        this.decompressed = new p(this.compressedSize, this.uncompressedSize, this.crc32, q, F.readData(this.compressedSize));
      }, readCentralPart: function(F) {
        this.versionMadeBy = F.readInt(2), F.skip(2), this.bitFlag = F.readInt(2), this.compressionMethod = F.readString(2), this.date = F.readDate(), this.crc32 = F.readInt(4), this.compressedSize = F.readInt(4), this.uncompressedSize = F.readInt(4);
        var q = F.readInt(2);
        if (this.extraFieldsLength = F.readInt(2), this.fileCommentLength = F.readInt(2), this.diskNumberStart = F.readInt(2), this.internalFileAttributes = F.readInt(2), this.externalFileAttributes = F.readInt(4), this.localHeaderOffset = F.readInt(4), this.isEncrypted())
          throw new Error("Encrypted zip are not supported");
        F.skip(q), this.readExtraFields(F), this.parseZIP64ExtraField(F), this.fileComment = F.readData(this.fileCommentLength);
      }, processAttributes: function() {
        this.unixPermissions = null, this.dosPermissions = null;
        var F = this.versionMadeBy >> 8;
        this.dir = !!(16 & this.externalFileAttributes), F == 0 && (this.dosPermissions = 63 & this.externalFileAttributes), F == 3 && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || this.fileNameStr.slice(-1) !== "/" || (this.dir = !0);
      }, parseZIP64ExtraField: function() {
        if (this.extraFields[1]) {
          var F = R(this.extraFields[1].value);
          this.uncompressedSize === C.MAX_VALUE_32BITS && (this.uncompressedSize = F.readInt(8)), this.compressedSize === C.MAX_VALUE_32BITS && (this.compressedSize = F.readInt(8)), this.localHeaderOffset === C.MAX_VALUE_32BITS && (this.localHeaderOffset = F.readInt(8)), this.diskNumberStart === C.MAX_VALUE_32BITS && (this.diskNumberStart = F.readInt(4));
        }
      }, readExtraFields: function(F) {
        var q, O, J, E = F.index + this.extraFieldsLength;
        for (this.extraFields || (this.extraFields = {}); F.index + 4 < E; )
          q = F.readInt(2), O = F.readInt(2), J = F.readData(O), this.extraFields[q] = { id: q, length: O, value: J };
        F.setIndex(E);
      }, handleUTF8: function() {
        var F = K.uint8array ? "uint8array" : "array";
        if (this.useUTF8())
          this.fileNameStr = U.utf8decode(this.fileName), this.fileCommentStr = U.utf8decode(this.fileComment);
        else {
          var q = this.findExtraFieldUnicodePath();
          if (q !== null)
            this.fileNameStr = q;
          else {
            var O = C.transformTo(F, this.fileName);
            this.fileNameStr = this.loadOptions.decodeFileName(O);
          }
          var J = this.findExtraFieldUnicodeComment();
          if (J !== null)
            this.fileCommentStr = J;
          else {
            var E = C.transformTo(F, this.fileComment);
            this.fileCommentStr = this.loadOptions.decodeFileName(E);
          }
        }
      }, findExtraFieldUnicodePath: function() {
        var F = this.extraFields[28789];
        if (F) {
          var q = R(F.value);
          return q.readInt(1) !== 1 || N(this.fileName) !== q.readInt(4) ? null : U.utf8decode(q.readData(F.length - 5));
        }
        return null;
      }, findExtraFieldUnicodeComment: function() {
        var F = this.extraFields[25461];
        if (F) {
          var q = R(F.value);
          return q.readInt(1) !== 1 || N(this.fileComment) !== q.readInt(4) ? null : U.utf8decode(q.readData(F.length - 5));
        }
        return null;
      } }, k.exports = Y;
    }, { "./compressedObject": 2, "./compressions": 3, "./crc32": 4, "./reader/readerFor": 22, "./support": 30, "./utf8": 31, "./utils": 32 }], 35: [function(L, k, re) {
      function R(q, O, J) {
        this.name = q, this.dir = J.dir, this.date = J.date, this.comment = J.comment, this.unixPermissions = J.unixPermissions, this.dosPermissions = J.dosPermissions, this._data = O, this._dataBinary = J.binary, this.options = { compression: J.compression, compressionOptions: J.compressionOptions };
      }
      var C = L("./stream/StreamHelper"), p = L("./stream/DataWorker"), N = L("./utf8"), U = L("./compressedObject"), H = L("./stream/GenericWorker");
      R.prototype = { internalStream: function(q) {
        var O = null, J = "string";
        try {
          if (!q)
            throw new Error("No output type specified.");
          var E = (J = q.toLowerCase()) === "string" || J === "text";
          J !== "binarystring" && J !== "text" || (J = "string"), O = this._decompressWorker();
          var me = !this._dataBinary;
          me && !E && (O = O.pipe(new N.Utf8EncodeWorker())), !me && E && (O = O.pipe(new N.Utf8DecodeWorker()));
        } catch (Ee) {
          (O = new H("error")).error(Ee);
        }
        return new C(O, J, "");
      }, async: function(q, O) {
        return this.internalStream(q).accumulate(O);
      }, nodeStream: function(q, O) {
        return this.internalStream(q || "nodebuffer").toNodejsStream(O);
      }, _compressWorker: function(q, O) {
        if (this._data instanceof U && this._data.compression.magic === q.magic)
          return this._data.getCompressedWorker();
        var J = this._decompressWorker();
        return this._dataBinary || (J = J.pipe(new N.Utf8EncodeWorker())), U.createWorkerFrom(J, q, O);
      }, _decompressWorker: function() {
        return this._data instanceof U ? this._data.getContentWorker() : this._data instanceof H ? this._data : new p(this._data);
      } };
      for (var K = ["asText", "asBinary", "asNodeBuffer", "asUint8Array", "asArrayBuffer"], Y = function() {
        throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
      }, F = 0; F < K.length; F++)
        R.prototype[K[F]] = Y;
      k.exports = R;
    }, { "./compressedObject": 2, "./stream/DataWorker": 27, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31 }], 36: [function(L, k, re) {
      (function(R) {
        var C, p, N = R.MutationObserver || R.WebKitMutationObserver;
        if (N) {
          var U = 0, H = new N(q), K = R.document.createTextNode("");
          H.observe(K, { characterData: !0 }), C = function() {
            K.data = U = ++U % 2;
          };
        } else if (R.setImmediate || R.MessageChannel === void 0)
          C = "document" in R && "onreadystatechange" in R.document.createElement("script") ? function() {
            var O = R.document.createElement("script");
            O.onreadystatechange = function() {
              q(), O.onreadystatechange = null, O.parentNode.removeChild(O), O = null;
            }, R.document.documentElement.appendChild(O);
          } : function() {
            setTimeout(q, 0);
          };
        else {
          var Y = new R.MessageChannel();
          Y.port1.onmessage = q, C = function() {
            Y.port2.postMessage(0);
          };
        }
        var F = [];
        function q() {
          var O, J;
          p = !0;
          for (var E = F.length; E; ) {
            for (J = F, F = [], O = -1; ++O < E; )
              J[O]();
            E = F.length;
          }
          p = !1;
        }
        k.exports = function(O) {
          F.push(O) !== 1 || p || C();
        };
      }).call(this, typeof Ku < "u" ? Ku : typeof self < "u" ? self : typeof window < "u" ? window : {});
    }, {}], 37: [function(L, k, re) {
      var R = L("immediate");
      function C() {
      }
      var p = {}, N = ["REJECTED"], U = ["FULFILLED"], H = ["PENDING"];
      function K(E) {
        if (typeof E != "function")
          throw new TypeError("resolver must be a function");
        this.state = H, this.queue = [], this.outcome = void 0, E !== C && O(this, E);
      }
      function Y(E, me, Ee) {
        this.promise = E, typeof me == "function" && (this.onFulfilled = me, this.callFulfilled = this.otherCallFulfilled), typeof Ee == "function" && (this.onRejected = Ee, this.callRejected = this.otherCallRejected);
      }
      function F(E, me, Ee) {
        R(function() {
          var Le;
          try {
            Le = me(Ee);
          } catch (Oe) {
            return p.reject(E, Oe);
          }
          Le === E ? p.reject(E, new TypeError("Cannot resolve promise with itself")) : p.resolve(E, Le);
        });
      }
      function q(E) {
        var me = E && E.then;
        if (E && (typeof E == "object" || typeof E == "function") && typeof me == "function")
          return function() {
            me.apply(E, arguments);
          };
      }
      function O(E, me) {
        var Ee = !1;
        function Le(Re) {
          Ee || (Ee = !0, p.reject(E, Re));
        }
        function Oe(Re) {
          Ee || (Ee = !0, p.resolve(E, Re));
        }
        var Te = J(function() {
          me(Oe, Le);
        });
        Te.status === "error" && Le(Te.value);
      }
      function J(E, me) {
        var Ee = {};
        try {
          Ee.value = E(me), Ee.status = "success";
        } catch (Le) {
          Ee.status = "error", Ee.value = Le;
        }
        return Ee;
      }
      (k.exports = K).prototype.finally = function(E) {
        if (typeof E != "function")
          return this;
        var me = this.constructor;
        return this.then(function(Ee) {
          return me.resolve(E()).then(function() {
            return Ee;
          });
        }, function(Ee) {
          return me.resolve(E()).then(function() {
            throw Ee;
          });
        });
      }, K.prototype.catch = function(E) {
        return this.then(null, E);
      }, K.prototype.then = function(E, me) {
        if (typeof E != "function" && this.state === U || typeof me != "function" && this.state === N)
          return this;
        var Ee = new this.constructor(C);
        return this.state !== H ? F(Ee, this.state === U ? E : me, this.outcome) : this.queue.push(new Y(Ee, E, me)), Ee;
      }, Y.prototype.callFulfilled = function(E) {
        p.resolve(this.promise, E);
      }, Y.prototype.otherCallFulfilled = function(E) {
        F(this.promise, this.onFulfilled, E);
      }, Y.prototype.callRejected = function(E) {
        p.reject(this.promise, E);
      }, Y.prototype.otherCallRejected = function(E) {
        F(this.promise, this.onRejected, E);
      }, p.resolve = function(E, me) {
        var Ee = J(q, me);
        if (Ee.status === "error")
          return p.reject(E, Ee.value);
        var Le = Ee.value;
        if (Le)
          O(E, Le);
        else {
          E.state = U, E.outcome = me;
          for (var Oe = -1, Te = E.queue.length; ++Oe < Te; )
            E.queue[Oe].callFulfilled(me);
        }
        return E;
      }, p.reject = function(E, me) {
        E.state = N, E.outcome = me;
        for (var Ee = -1, Le = E.queue.length; ++Ee < Le; )
          E.queue[Ee].callRejected(me);
        return E;
      }, K.resolve = function(E) {
        return E instanceof this ? E : p.resolve(new this(C), E);
      }, K.reject = function(E) {
        var me = new this(C);
        return p.reject(me, E);
      }, K.all = function(E) {
        var me = this;
        if (Object.prototype.toString.call(E) !== "[object Array]")
          return this.reject(new TypeError("must be an array"));
        var Ee = E.length, Le = !1;
        if (!Ee)
          return this.resolve([]);
        for (var Oe = new Array(Ee), Te = 0, Re = -1, Ve = new this(C); ++Re < Ee; )
          We(E[Re], Re);
        return Ve;
        function We(le, je) {
          me.resolve(le).then(function(fe) {
            Oe[je] = fe, ++Te !== Ee || Le || (Le = !0, p.resolve(Ve, Oe));
          }, function(fe) {
            Le || (Le = !0, p.reject(Ve, fe));
          });
        }
      }, K.race = function(E) {
        var me = this;
        if (Object.prototype.toString.call(E) !== "[object Array]")
          return this.reject(new TypeError("must be an array"));
        var Ee = E.length, Le = !1;
        if (!Ee)
          return this.resolve([]);
        for (var Oe = -1, Te = new this(C); ++Oe < Ee; )
          Re = E[Oe], me.resolve(Re).then(function(Ve) {
            Le || (Le = !0, p.resolve(Te, Ve));
          }, function(Ve) {
            Le || (Le = !0, p.reject(Te, Ve));
          });
        var Re;
        return Te;
      };
    }, { immediate: 36 }], 38: [function(L, k, re) {
      var R = {};
      (0, L("./lib/utils/common").assign)(R, L("./lib/deflate"), L("./lib/inflate"), L("./lib/zlib/constants")), k.exports = R;
    }, { "./lib/deflate": 39, "./lib/inflate": 40, "./lib/utils/common": 41, "./lib/zlib/constants": 44 }], 39: [function(L, k, re) {
      var R = L("./zlib/deflate"), C = L("./utils/common"), p = L("./utils/strings"), N = L("./zlib/messages"), U = L("./zlib/zstream"), H = Object.prototype.toString, K = 0, Y = -1, F = 0, q = 8;
      function O(E) {
        if (!(this instanceof O))
          return new O(E);
        this.options = C.assign({ level: Y, method: q, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: F, to: "" }, E || {});
        var me = this.options;
        me.raw && 0 < me.windowBits ? me.windowBits = -me.windowBits : me.gzip && 0 < me.windowBits && me.windowBits < 16 && (me.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new U(), this.strm.avail_out = 0;
        var Ee = R.deflateInit2(this.strm, me.level, me.method, me.windowBits, me.memLevel, me.strategy);
        if (Ee !== K)
          throw new Error(N[Ee]);
        if (me.header && R.deflateSetHeader(this.strm, me.header), me.dictionary) {
          var Le;
          if (Le = typeof me.dictionary == "string" ? p.string2buf(me.dictionary) : H.call(me.dictionary) === "[object ArrayBuffer]" ? new Uint8Array(me.dictionary) : me.dictionary, (Ee = R.deflateSetDictionary(this.strm, Le)) !== K)
            throw new Error(N[Ee]);
          this._dict_set = !0;
        }
      }
      function J(E, me) {
        var Ee = new O(me);
        if (Ee.push(E, !0), Ee.err)
          throw Ee.msg || N[Ee.err];
        return Ee.result;
      }
      O.prototype.push = function(E, me) {
        var Ee, Le, Oe = this.strm, Te = this.options.chunkSize;
        if (this.ended)
          return !1;
        Le = me === ~~me ? me : me === !0 ? 4 : 0, typeof E == "string" ? Oe.input = p.string2buf(E) : H.call(E) === "[object ArrayBuffer]" ? Oe.input = new Uint8Array(E) : Oe.input = E, Oe.next_in = 0, Oe.avail_in = Oe.input.length;
        do {
          if (Oe.avail_out === 0 && (Oe.output = new C.Buf8(Te), Oe.next_out = 0, Oe.avail_out = Te), (Ee = R.deflate(Oe, Le)) !== 1 && Ee !== K)
            return this.onEnd(Ee), !(this.ended = !0);
          Oe.avail_out !== 0 && (Oe.avail_in !== 0 || Le !== 4 && Le !== 2) || (this.options.to === "string" ? this.onData(p.buf2binstring(C.shrinkBuf(Oe.output, Oe.next_out))) : this.onData(C.shrinkBuf(Oe.output, Oe.next_out)));
        } while ((0 < Oe.avail_in || Oe.avail_out === 0) && Ee !== 1);
        return Le === 4 ? (Ee = R.deflateEnd(this.strm), this.onEnd(Ee), this.ended = !0, Ee === K) : Le !== 2 || (this.onEnd(K), !(Oe.avail_out = 0));
      }, O.prototype.onData = function(E) {
        this.chunks.push(E);
      }, O.prototype.onEnd = function(E) {
        E === K && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = C.flattenChunks(this.chunks)), this.chunks = [], this.err = E, this.msg = this.strm.msg;
      }, re.Deflate = O, re.deflate = J, re.deflateRaw = function(E, me) {
        return (me = me || {}).raw = !0, J(E, me);
      }, re.gzip = function(E, me) {
        return (me = me || {}).gzip = !0, J(E, me);
      };
    }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/deflate": 46, "./zlib/messages": 51, "./zlib/zstream": 53 }], 40: [function(L, k, re) {
      var R = L("./zlib/inflate"), C = L("./utils/common"), p = L("./utils/strings"), N = L("./zlib/constants"), U = L("./zlib/messages"), H = L("./zlib/zstream"), K = L("./zlib/gzheader"), Y = Object.prototype.toString;
      function F(O) {
        if (!(this instanceof F))
          return new F(O);
        this.options = C.assign({ chunkSize: 16384, windowBits: 0, to: "" }, O || {});
        var J = this.options;
        J.raw && 0 <= J.windowBits && J.windowBits < 16 && (J.windowBits = -J.windowBits, J.windowBits === 0 && (J.windowBits = -15)), !(0 <= J.windowBits && J.windowBits < 16) || O && O.windowBits || (J.windowBits += 32), 15 < J.windowBits && J.windowBits < 48 && !(15 & J.windowBits) && (J.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new H(), this.strm.avail_out = 0;
        var E = R.inflateInit2(this.strm, J.windowBits);
        if (E !== N.Z_OK)
          throw new Error(U[E]);
        this.header = new K(), R.inflateGetHeader(this.strm, this.header);
      }
      function q(O, J) {
        var E = new F(J);
        if (E.push(O, !0), E.err)
          throw E.msg || U[E.err];
        return E.result;
      }
      F.prototype.push = function(O, J) {
        var E, me, Ee, Le, Oe, Te, Re = this.strm, Ve = this.options.chunkSize, We = this.options.dictionary, le = !1;
        if (this.ended)
          return !1;
        me = J === ~~J ? J : J === !0 ? N.Z_FINISH : N.Z_NO_FLUSH, typeof O == "string" ? Re.input = p.binstring2buf(O) : Y.call(O) === "[object ArrayBuffer]" ? Re.input = new Uint8Array(O) : Re.input = O, Re.next_in = 0, Re.avail_in = Re.input.length;
        do {
          if (Re.avail_out === 0 && (Re.output = new C.Buf8(Ve), Re.next_out = 0, Re.avail_out = Ve), (E = R.inflate(Re, N.Z_NO_FLUSH)) === N.Z_NEED_DICT && We && (Te = typeof We == "string" ? p.string2buf(We) : Y.call(We) === "[object ArrayBuffer]" ? new Uint8Array(We) : We, E = R.inflateSetDictionary(this.strm, Te)), E === N.Z_BUF_ERROR && le === !0 && (E = N.Z_OK, le = !1), E !== N.Z_STREAM_END && E !== N.Z_OK)
            return this.onEnd(E), !(this.ended = !0);
          Re.next_out && (Re.avail_out !== 0 && E !== N.Z_STREAM_END && (Re.avail_in !== 0 || me !== N.Z_FINISH && me !== N.Z_SYNC_FLUSH) || (this.options.to === "string" ? (Ee = p.utf8border(Re.output, Re.next_out), Le = Re.next_out - Ee, Oe = p.buf2string(Re.output, Ee), Re.next_out = Le, Re.avail_out = Ve - Le, Le && C.arraySet(Re.output, Re.output, Ee, Le, 0), this.onData(Oe)) : this.onData(C.shrinkBuf(Re.output, Re.next_out)))), Re.avail_in === 0 && Re.avail_out === 0 && (le = !0);
        } while ((0 < Re.avail_in || Re.avail_out === 0) && E !== N.Z_STREAM_END);
        return E === N.Z_STREAM_END && (me = N.Z_FINISH), me === N.Z_FINISH ? (E = R.inflateEnd(this.strm), this.onEnd(E), this.ended = !0, E === N.Z_OK) : me !== N.Z_SYNC_FLUSH || (this.onEnd(N.Z_OK), !(Re.avail_out = 0));
      }, F.prototype.onData = function(O) {
        this.chunks.push(O);
      }, F.prototype.onEnd = function(O) {
        O === N.Z_OK && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = C.flattenChunks(this.chunks)), this.chunks = [], this.err = O, this.msg = this.strm.msg;
      }, re.Inflate = F, re.inflate = q, re.inflateRaw = function(O, J) {
        return (J = J || {}).raw = !0, q(O, J);
      }, re.ungzip = q;
    }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/constants": 44, "./zlib/gzheader": 47, "./zlib/inflate": 49, "./zlib/messages": 51, "./zlib/zstream": 53 }], 41: [function(L, k, re) {
      var R = typeof Uint8Array < "u" && typeof Uint16Array < "u" && typeof Int32Array < "u";
      re.assign = function(N) {
        for (var U = Array.prototype.slice.call(arguments, 1); U.length; ) {
          var H = U.shift();
          if (H) {
            if (typeof H != "object")
              throw new TypeError(H + "must be non-object");
            for (var K in H)
              H.hasOwnProperty(K) && (N[K] = H[K]);
          }
        }
        return N;
      }, re.shrinkBuf = function(N, U) {
        return N.length === U ? N : N.subarray ? N.subarray(0, U) : (N.length = U, N);
      };
      var C = { arraySet: function(N, U, H, K, Y) {
        if (U.subarray && N.subarray)
          N.set(U.subarray(H, H + K), Y);
        else
          for (var F = 0; F < K; F++)
            N[Y + F] = U[H + F];
      }, flattenChunks: function(N) {
        var U, H, K, Y, F, q;
        for (U = K = 0, H = N.length; U < H; U++)
          K += N[U].length;
        for (q = new Uint8Array(K), U = Y = 0, H = N.length; U < H; U++)
          F = N[U], q.set(F, Y), Y += F.length;
        return q;
      } }, p = { arraySet: function(N, U, H, K, Y) {
        for (var F = 0; F < K; F++)
          N[Y + F] = U[H + F];
      }, flattenChunks: function(N) {
        return [].concat.apply([], N);
      } };
      re.setTyped = function(N) {
        N ? (re.Buf8 = Uint8Array, re.Buf16 = Uint16Array, re.Buf32 = Int32Array, re.assign(re, C)) : (re.Buf8 = Array, re.Buf16 = Array, re.Buf32 = Array, re.assign(re, p));
      }, re.setTyped(R);
    }, {}], 42: [function(L, k, re) {
      var R = L("./common"), C = !0, p = !0;
      try {
        String.fromCharCode.apply(null, [0]);
      } catch {
        C = !1;
      }
      try {
        String.fromCharCode.apply(null, new Uint8Array(1));
      } catch {
        p = !1;
      }
      for (var N = new R.Buf8(256), U = 0; U < 256; U++)
        N[U] = 252 <= U ? 6 : 248 <= U ? 5 : 240 <= U ? 4 : 224 <= U ? 3 : 192 <= U ? 2 : 1;
      function H(K, Y) {
        if (Y < 65537 && (K.subarray && p || !K.subarray && C))
          return String.fromCharCode.apply(null, R.shrinkBuf(K, Y));
        for (var F = "", q = 0; q < Y; q++)
          F += String.fromCharCode(K[q]);
        return F;
      }
      N[254] = N[254] = 1, re.string2buf = function(K) {
        var Y, F, q, O, J, E = K.length, me = 0;
        for (O = 0; O < E; O++)
          (64512 & (F = K.charCodeAt(O))) == 55296 && O + 1 < E && (64512 & (q = K.charCodeAt(O + 1))) == 56320 && (F = 65536 + (F - 55296 << 10) + (q - 56320), O++), me += F < 128 ? 1 : F < 2048 ? 2 : F < 65536 ? 3 : 4;
        for (Y = new R.Buf8(me), O = J = 0; J < me; O++)
          (64512 & (F = K.charCodeAt(O))) == 55296 && O + 1 < E && (64512 & (q = K.charCodeAt(O + 1))) == 56320 && (F = 65536 + (F - 55296 << 10) + (q - 56320), O++), F < 128 ? Y[J++] = F : (F < 2048 ? Y[J++] = 192 | F >>> 6 : (F < 65536 ? Y[J++] = 224 | F >>> 12 : (Y[J++] = 240 | F >>> 18, Y[J++] = 128 | F >>> 12 & 63), Y[J++] = 128 | F >>> 6 & 63), Y[J++] = 128 | 63 & F);
        return Y;
      }, re.buf2binstring = function(K) {
        return H(K, K.length);
      }, re.binstring2buf = function(K) {
        for (var Y = new R.Buf8(K.length), F = 0, q = Y.length; F < q; F++)
          Y[F] = K.charCodeAt(F);
        return Y;
      }, re.buf2string = function(K, Y) {
        var F, q, O, J, E = Y || K.length, me = new Array(2 * E);
        for (F = q = 0; F < E; )
          if ((O = K[F++]) < 128)
            me[q++] = O;
          else if (4 < (J = N[O]))
            me[q++] = 65533, F += J - 1;
          else {
            for (O &= J === 2 ? 31 : J === 3 ? 15 : 7; 1 < J && F < E; )
              O = O << 6 | 63 & K[F++], J--;
            1 < J ? me[q++] = 65533 : O < 65536 ? me[q++] = O : (O -= 65536, me[q++] = 55296 | O >> 10 & 1023, me[q++] = 56320 | 1023 & O);
          }
        return H(me, q);
      }, re.utf8border = function(K, Y) {
        var F;
        for ((Y = Y || K.length) > K.length && (Y = K.length), F = Y - 1; 0 <= F && (192 & K[F]) == 128; )
          F--;
        return F < 0 || F === 0 ? Y : F + N[K[F]] > Y ? F : Y;
      };
    }, { "./common": 41 }], 43: [function(L, k, re) {
      k.exports = function(R, C, p, N) {
        for (var U = 65535 & R | 0, H = R >>> 16 & 65535 | 0, K = 0; p !== 0; ) {
          for (p -= K = 2e3 < p ? 2e3 : p; H = H + (U = U + C[N++] | 0) | 0, --K; )
            ;
          U %= 65521, H %= 65521;
        }
        return U | H << 16 | 0;
      };
    }, {}], 44: [function(L, k, re) {
      k.exports = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };
    }, {}], 45: [function(L, k, re) {
      var R = function() {
        for (var C, p = [], N = 0; N < 256; N++) {
          C = N;
          for (var U = 0; U < 8; U++)
            C = 1 & C ? 3988292384 ^ C >>> 1 : C >>> 1;
          p[N] = C;
        }
        return p;
      }();
      k.exports = function(C, p, N, U) {
        var H = R, K = U + N;
        C ^= -1;
        for (var Y = U; Y < K; Y++)
          C = C >>> 8 ^ H[255 & (C ^ p[Y])];
        return -1 ^ C;
      };
    }, {}], 46: [function(L, k, re) {
      var R, C = L("../utils/common"), p = L("./trees"), N = L("./adler32"), U = L("./crc32"), H = L("./messages"), K = 0, Y = 4, F = 0, q = -2, O = -1, J = 4, E = 2, me = 8, Ee = 9, Le = 286, Oe = 30, Te = 19, Re = 2 * Le + 1, Ve = 15, We = 3, le = 258, je = le + We + 1, fe = 42, Me = 113, Z = 1, Ue = 2, ct = 3, mt = 4;
      function at(ge, Wt) {
        return ge.msg = H[Wt], Wt;
      }
      function Ye(ge) {
        return (ge << 1) - (4 < ge ? 9 : 0);
      }
      function Et(ge) {
        for (var Wt = ge.length; 0 <= --Wt; )
          ge[Wt] = 0;
      }
      function Je(ge) {
        var Wt = ge.state, xt = Wt.pending;
        xt > ge.avail_out && (xt = ge.avail_out), xt !== 0 && (C.arraySet(ge.output, Wt.pending_buf, Wt.pending_out, xt, ge.next_out), ge.next_out += xt, Wt.pending_out += xt, ge.total_out += xt, ge.avail_out -= xt, Wt.pending -= xt, Wt.pending === 0 && (Wt.pending_out = 0));
      }
      function ce(ge, Wt) {
        p._tr_flush_block(ge, 0 <= ge.block_start ? ge.block_start : -1, ge.strstart - ge.block_start, Wt), ge.block_start = ge.strstart, Je(ge.strm);
      }
      function Ht(ge, Wt) {
        ge.pending_buf[ge.pending++] = Wt;
      }
      function Dt(ge, Wt) {
        ge.pending_buf[ge.pending++] = Wt >>> 8 & 255, ge.pending_buf[ge.pending++] = 255 & Wt;
      }
      function Be(ge, Wt) {
        var xt, He, Ne = ge.max_chain_length, bt = ge.strstart, Ut = ge.prev_length, Zt = ge.nice_match, rt = ge.strstart > ge.w_size - je ? ge.strstart - (ge.w_size - je) : 0, Xt = ge.window, dn = ge.w_mask, an = ge.prev, Rn = ge.strstart + le, xr = Xt[bt + Ut - 1], hr = Xt[bt + Ut];
        ge.prev_length >= ge.good_match && (Ne >>= 2), Zt > ge.lookahead && (Zt = ge.lookahead);
        do
          if (Xt[(xt = Wt) + Ut] === hr && Xt[xt + Ut - 1] === xr && Xt[xt] === Xt[bt] && Xt[++xt] === Xt[bt + 1]) {
            bt += 2, xt++;
            do
              ;
            while (Xt[++bt] === Xt[++xt] && Xt[++bt] === Xt[++xt] && Xt[++bt] === Xt[++xt] && Xt[++bt] === Xt[++xt] && Xt[++bt] === Xt[++xt] && Xt[++bt] === Xt[++xt] && Xt[++bt] === Xt[++xt] && Xt[++bt] === Xt[++xt] && bt < Rn);
            if (He = le - (Rn - bt), bt = Rn - le, Ut < He) {
              if (ge.match_start = Wt, Zt <= (Ut = He))
                break;
              xr = Xt[bt + Ut - 1], hr = Xt[bt + Ut];
            }
          }
        while ((Wt = an[Wt & dn]) > rt && --Ne != 0);
        return Ut <= ge.lookahead ? Ut : ge.lookahead;
      }
      function Ge(ge) {
        var Wt, xt, He, Ne, bt, Ut, Zt, rt, Xt, dn, an = ge.w_size;
        do {
          if (Ne = ge.window_size - ge.lookahead - ge.strstart, ge.strstart >= an + (an - je)) {
            for (C.arraySet(ge.window, ge.window, an, an, 0), ge.match_start -= an, ge.strstart -= an, ge.block_start -= an, Wt = xt = ge.hash_size; He = ge.head[--Wt], ge.head[Wt] = an <= He ? He - an : 0, --xt; )
              ;
            for (Wt = xt = an; He = ge.prev[--Wt], ge.prev[Wt] = an <= He ? He - an : 0, --xt; )
              ;
            Ne += an;
          }
          if (ge.strm.avail_in === 0)
            break;
          if (Ut = ge.strm, Zt = ge.window, rt = ge.strstart + ge.lookahead, Xt = Ne, dn = void 0, dn = Ut.avail_in, Xt < dn && (dn = Xt), xt = dn === 0 ? 0 : (Ut.avail_in -= dn, C.arraySet(Zt, Ut.input, Ut.next_in, dn, rt), Ut.state.wrap === 1 ? Ut.adler = N(Ut.adler, Zt, dn, rt) : Ut.state.wrap === 2 && (Ut.adler = U(Ut.adler, Zt, dn, rt)), Ut.next_in += dn, Ut.total_in += dn, dn), ge.lookahead += xt, ge.lookahead + ge.insert >= We)
            for (bt = ge.strstart - ge.insert, ge.ins_h = ge.window[bt], ge.ins_h = (ge.ins_h << ge.hash_shift ^ ge.window[bt + 1]) & ge.hash_mask; ge.insert && (ge.ins_h = (ge.ins_h << ge.hash_shift ^ ge.window[bt + We - 1]) & ge.hash_mask, ge.prev[bt & ge.w_mask] = ge.head[ge.ins_h], ge.head[ge.ins_h] = bt, bt++, ge.insert--, !(ge.lookahead + ge.insert < We)); )
              ;
        } while (ge.lookahead < je && ge.strm.avail_in !== 0);
      }
      function lt(ge, Wt) {
        for (var xt, He; ; ) {
          if (ge.lookahead < je) {
            if (Ge(ge), ge.lookahead < je && Wt === K)
              return Z;
            if (ge.lookahead === 0)
              break;
          }
          if (xt = 0, ge.lookahead >= We && (ge.ins_h = (ge.ins_h << ge.hash_shift ^ ge.window[ge.strstart + We - 1]) & ge.hash_mask, xt = ge.prev[ge.strstart & ge.w_mask] = ge.head[ge.ins_h], ge.head[ge.ins_h] = ge.strstart), xt !== 0 && ge.strstart - xt <= ge.w_size - je && (ge.match_length = Be(ge, xt)), ge.match_length >= We)
            if (He = p._tr_tally(ge, ge.strstart - ge.match_start, ge.match_length - We), ge.lookahead -= ge.match_length, ge.match_length <= ge.max_lazy_match && ge.lookahead >= We) {
              for (ge.match_length--; ge.strstart++, ge.ins_h = (ge.ins_h << ge.hash_shift ^ ge.window[ge.strstart + We - 1]) & ge.hash_mask, xt = ge.prev[ge.strstart & ge.w_mask] = ge.head[ge.ins_h], ge.head[ge.ins_h] = ge.strstart, --ge.match_length != 0; )
                ;
              ge.strstart++;
            } else
              ge.strstart += ge.match_length, ge.match_length = 0, ge.ins_h = ge.window[ge.strstart], ge.ins_h = (ge.ins_h << ge.hash_shift ^ ge.window[ge.strstart + 1]) & ge.hash_mask;
          else
            He = p._tr_tally(ge, 0, ge.window[ge.strstart]), ge.lookahead--, ge.strstart++;
          if (He && (ce(ge, !1), ge.strm.avail_out === 0))
            return Z;
        }
        return ge.insert = ge.strstart < We - 1 ? ge.strstart : We - 1, Wt === Y ? (ce(ge, !0), ge.strm.avail_out === 0 ? ct : mt) : ge.last_lit && (ce(ge, !1), ge.strm.avail_out === 0) ? Z : Ue;
      }
      function ot(ge, Wt) {
        for (var xt, He, Ne; ; ) {
          if (ge.lookahead < je) {
            if (Ge(ge), ge.lookahead < je && Wt === K)
              return Z;
            if (ge.lookahead === 0)
              break;
          }
          if (xt = 0, ge.lookahead >= We && (ge.ins_h = (ge.ins_h << ge.hash_shift ^ ge.window[ge.strstart + We - 1]) & ge.hash_mask, xt = ge.prev[ge.strstart & ge.w_mask] = ge.head[ge.ins_h], ge.head[ge.ins_h] = ge.strstart), ge.prev_length = ge.match_length, ge.prev_match = ge.match_start, ge.match_length = We - 1, xt !== 0 && ge.prev_length < ge.max_lazy_match && ge.strstart - xt <= ge.w_size - je && (ge.match_length = Be(ge, xt), ge.match_length <= 5 && (ge.strategy === 1 || ge.match_length === We && 4096 < ge.strstart - ge.match_start) && (ge.match_length = We - 1)), ge.prev_length >= We && ge.match_length <= ge.prev_length) {
            for (Ne = ge.strstart + ge.lookahead - We, He = p._tr_tally(ge, ge.strstart - 1 - ge.prev_match, ge.prev_length - We), ge.lookahead -= ge.prev_length - 1, ge.prev_length -= 2; ++ge.strstart <= Ne && (ge.ins_h = (ge.ins_h << ge.hash_shift ^ ge.window[ge.strstart + We - 1]) & ge.hash_mask, xt = ge.prev[ge.strstart & ge.w_mask] = ge.head[ge.ins_h], ge.head[ge.ins_h] = ge.strstart), --ge.prev_length != 0; )
              ;
            if (ge.match_available = 0, ge.match_length = We - 1, ge.strstart++, He && (ce(ge, !1), ge.strm.avail_out === 0))
              return Z;
          } else if (ge.match_available) {
            if ((He = p._tr_tally(ge, 0, ge.window[ge.strstart - 1])) && ce(ge, !1), ge.strstart++, ge.lookahead--, ge.strm.avail_out === 0)
              return Z;
          } else
            ge.match_available = 1, ge.strstart++, ge.lookahead--;
        }
        return ge.match_available && (He = p._tr_tally(ge, 0, ge.window[ge.strstart - 1]), ge.match_available = 0), ge.insert = ge.strstart < We - 1 ? ge.strstart : We - 1, Wt === Y ? (ce(ge, !0), ge.strm.avail_out === 0 ? ct : mt) : ge.last_lit && (ce(ge, !1), ge.strm.avail_out === 0) ? Z : Ue;
      }
      function Kt(ge, Wt, xt, He, Ne) {
        this.good_length = ge, this.max_lazy = Wt, this.nice_length = xt, this.max_chain = He, this.func = Ne;
      }
      function Lt() {
        this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = me, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new C.Buf16(2 * Re), this.dyn_dtree = new C.Buf16(2 * (2 * Oe + 1)), this.bl_tree = new C.Buf16(2 * (2 * Te + 1)), Et(this.dyn_ltree), Et(this.dyn_dtree), Et(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new C.Buf16(Ve + 1), this.heap = new C.Buf16(2 * Le + 1), Et(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new C.Buf16(2 * Le + 1), Et(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
      }
      function bn(ge) {
        var Wt;
        return ge && ge.state ? (ge.total_in = ge.total_out = 0, ge.data_type = E, (Wt = ge.state).pending = 0, Wt.pending_out = 0, Wt.wrap < 0 && (Wt.wrap = -Wt.wrap), Wt.status = Wt.wrap ? fe : Me, ge.adler = Wt.wrap === 2 ? 0 : 1, Wt.last_flush = K, p._tr_init(Wt), F) : at(ge, q);
      }
      function Fn(ge) {
        var Wt = bn(ge);
        return Wt === F && function(xt) {
          xt.window_size = 2 * xt.w_size, Et(xt.head), xt.max_lazy_match = R[xt.level].max_lazy, xt.good_match = R[xt.level].good_length, xt.nice_match = R[xt.level].nice_length, xt.max_chain_length = R[xt.level].max_chain, xt.strstart = 0, xt.block_start = 0, xt.lookahead = 0, xt.insert = 0, xt.match_length = xt.prev_length = We - 1, xt.match_available = 0, xt.ins_h = 0;
        }(ge.state), Wt;
      }
      function wn(ge, Wt, xt, He, Ne, bt) {
        if (!ge)
          return q;
        var Ut = 1;
        if (Wt === O && (Wt = 6), He < 0 ? (Ut = 0, He = -He) : 15 < He && (Ut = 2, He -= 16), Ne < 1 || Ee < Ne || xt !== me || He < 8 || 15 < He || Wt < 0 || 9 < Wt || bt < 0 || J < bt)
          return at(ge, q);
        He === 8 && (He = 9);
        var Zt = new Lt();
        return (ge.state = Zt).strm = ge, Zt.wrap = Ut, Zt.gzhead = null, Zt.w_bits = He, Zt.w_size = 1 << Zt.w_bits, Zt.w_mask = Zt.w_size - 1, Zt.hash_bits = Ne + 7, Zt.hash_size = 1 << Zt.hash_bits, Zt.hash_mask = Zt.hash_size - 1, Zt.hash_shift = ~~((Zt.hash_bits + We - 1) / We), Zt.window = new C.Buf8(2 * Zt.w_size), Zt.head = new C.Buf16(Zt.hash_size), Zt.prev = new C.Buf16(Zt.w_size), Zt.lit_bufsize = 1 << Ne + 6, Zt.pending_buf_size = 4 * Zt.lit_bufsize, Zt.pending_buf = new C.Buf8(Zt.pending_buf_size), Zt.d_buf = 1 * Zt.lit_bufsize, Zt.l_buf = 3 * Zt.lit_bufsize, Zt.level = Wt, Zt.strategy = bt, Zt.method = xt, Fn(ge);
      }
      R = [new Kt(0, 0, 0, 0, function(ge, Wt) {
        var xt = 65535;
        for (xt > ge.pending_buf_size - 5 && (xt = ge.pending_buf_size - 5); ; ) {
          if (ge.lookahead <= 1) {
            if (Ge(ge), ge.lookahead === 0 && Wt === K)
              return Z;
            if (ge.lookahead === 0)
              break;
          }
          ge.strstart += ge.lookahead, ge.lookahead = 0;
          var He = ge.block_start + xt;
          if ((ge.strstart === 0 || ge.strstart >= He) && (ge.lookahead = ge.strstart - He, ge.strstart = He, ce(ge, !1), ge.strm.avail_out === 0) || ge.strstart - ge.block_start >= ge.w_size - je && (ce(ge, !1), ge.strm.avail_out === 0))
            return Z;
        }
        return ge.insert = 0, Wt === Y ? (ce(ge, !0), ge.strm.avail_out === 0 ? ct : mt) : (ge.strstart > ge.block_start && (ce(ge, !1), ge.strm.avail_out), Z);
      }), new Kt(4, 4, 8, 4, lt), new Kt(4, 5, 16, 8, lt), new Kt(4, 6, 32, 32, lt), new Kt(4, 4, 16, 16, ot), new Kt(8, 16, 32, 32, ot), new Kt(8, 16, 128, 128, ot), new Kt(8, 32, 128, 256, ot), new Kt(32, 128, 258, 1024, ot), new Kt(32, 258, 258, 4096, ot)], re.deflateInit = function(ge, Wt) {
        return wn(ge, Wt, me, 15, 8, 0);
      }, re.deflateInit2 = wn, re.deflateReset = Fn, re.deflateResetKeep = bn, re.deflateSetHeader = function(ge, Wt) {
        return ge && ge.state ? ge.state.wrap !== 2 ? q : (ge.state.gzhead = Wt, F) : q;
      }, re.deflate = function(ge, Wt) {
        var xt, He, Ne, bt;
        if (!ge || !ge.state || 5 < Wt || Wt < 0)
          return ge ? at(ge, q) : q;
        if (He = ge.state, !ge.output || !ge.input && ge.avail_in !== 0 || He.status === 666 && Wt !== Y)
          return at(ge, ge.avail_out === 0 ? -5 : q);
        if (He.strm = ge, xt = He.last_flush, He.last_flush = Wt, He.status === fe)
          if (He.wrap === 2)
            ge.adler = 0, Ht(He, 31), Ht(He, 139), Ht(He, 8), He.gzhead ? (Ht(He, (He.gzhead.text ? 1 : 0) + (He.gzhead.hcrc ? 2 : 0) + (He.gzhead.extra ? 4 : 0) + (He.gzhead.name ? 8 : 0) + (He.gzhead.comment ? 16 : 0)), Ht(He, 255 & He.gzhead.time), Ht(He, He.gzhead.time >> 8 & 255), Ht(He, He.gzhead.time >> 16 & 255), Ht(He, He.gzhead.time >> 24 & 255), Ht(He, He.level === 9 ? 2 : 2 <= He.strategy || He.level < 2 ? 4 : 0), Ht(He, 255 & He.gzhead.os), He.gzhead.extra && He.gzhead.extra.length && (Ht(He, 255 & He.gzhead.extra.length), Ht(He, He.gzhead.extra.length >> 8 & 255)), He.gzhead.hcrc && (ge.adler = U(ge.adler, He.pending_buf, He.pending, 0)), He.gzindex = 0, He.status = 69) : (Ht(He, 0), Ht(He, 0), Ht(He, 0), Ht(He, 0), Ht(He, 0), Ht(He, He.level === 9 ? 2 : 2 <= He.strategy || He.level < 2 ? 4 : 0), Ht(He, 3), He.status = Me);
          else {
            var Ut = me + (He.w_bits - 8 << 4) << 8;
            Ut |= (2 <= He.strategy || He.level < 2 ? 0 : He.level < 6 ? 1 : He.level === 6 ? 2 : 3) << 6, He.strstart !== 0 && (Ut |= 32), Ut += 31 - Ut % 31, He.status = Me, Dt(He, Ut), He.strstart !== 0 && (Dt(He, ge.adler >>> 16), Dt(He, 65535 & ge.adler)), ge.adler = 1;
          }
        if (He.status === 69)
          if (He.gzhead.extra) {
            for (Ne = He.pending; He.gzindex < (65535 & He.gzhead.extra.length) && (He.pending !== He.pending_buf_size || (He.gzhead.hcrc && He.pending > Ne && (ge.adler = U(ge.adler, He.pending_buf, He.pending - Ne, Ne)), Je(ge), Ne = He.pending, He.pending !== He.pending_buf_size)); )
              Ht(He, 255 & He.gzhead.extra[He.gzindex]), He.gzindex++;
            He.gzhead.hcrc && He.pending > Ne && (ge.adler = U(ge.adler, He.pending_buf, He.pending - Ne, Ne)), He.gzindex === He.gzhead.extra.length && (He.gzindex = 0, He.status = 73);
          } else
            He.status = 73;
        if (He.status === 73)
          if (He.gzhead.name) {
            Ne = He.pending;
            do {
              if (He.pending === He.pending_buf_size && (He.gzhead.hcrc && He.pending > Ne && (ge.adler = U(ge.adler, He.pending_buf, He.pending - Ne, Ne)), Je(ge), Ne = He.pending, He.pending === He.pending_buf_size)) {
                bt = 1;
                break;
              }
              bt = He.gzindex < He.gzhead.name.length ? 255 & He.gzhead.name.charCodeAt(He.gzindex++) : 0, Ht(He, bt);
            } while (bt !== 0);
            He.gzhead.hcrc && He.pending > Ne && (ge.adler = U(ge.adler, He.pending_buf, He.pending - Ne, Ne)), bt === 0 && (He.gzindex = 0, He.status = 91);
          } else
            He.status = 91;
        if (He.status === 91)
          if (He.gzhead.comment) {
            Ne = He.pending;
            do {
              if (He.pending === He.pending_buf_size && (He.gzhead.hcrc && He.pending > Ne && (ge.adler = U(ge.adler, He.pending_buf, He.pending - Ne, Ne)), Je(ge), Ne = He.pending, He.pending === He.pending_buf_size)) {
                bt = 1;
                break;
              }
              bt = He.gzindex < He.gzhead.comment.length ? 255 & He.gzhead.comment.charCodeAt(He.gzindex++) : 0, Ht(He, bt);
            } while (bt !== 0);
            He.gzhead.hcrc && He.pending > Ne && (ge.adler = U(ge.adler, He.pending_buf, He.pending - Ne, Ne)), bt === 0 && (He.status = 103);
          } else
            He.status = 103;
        if (He.status === 103 && (He.gzhead.hcrc ? (He.pending + 2 > He.pending_buf_size && Je(ge), He.pending + 2 <= He.pending_buf_size && (Ht(He, 255 & ge.adler), Ht(He, ge.adler >> 8 & 255), ge.adler = 0, He.status = Me)) : He.status = Me), He.pending !== 0) {
          if (Je(ge), ge.avail_out === 0)
            return He.last_flush = -1, F;
        } else if (ge.avail_in === 0 && Ye(Wt) <= Ye(xt) && Wt !== Y)
          return at(ge, -5);
        if (He.status === 666 && ge.avail_in !== 0)
          return at(ge, -5);
        if (ge.avail_in !== 0 || He.lookahead !== 0 || Wt !== K && He.status !== 666) {
          var Zt = He.strategy === 2 ? function(rt, Xt) {
            for (var dn; ; ) {
              if (rt.lookahead === 0 && (Ge(rt), rt.lookahead === 0)) {
                if (Xt === K)
                  return Z;
                break;
              }
              if (rt.match_length = 0, dn = p._tr_tally(rt, 0, rt.window[rt.strstart]), rt.lookahead--, rt.strstart++, dn && (ce(rt, !1), rt.strm.avail_out === 0))
                return Z;
            }
            return rt.insert = 0, Xt === Y ? (ce(rt, !0), rt.strm.avail_out === 0 ? ct : mt) : rt.last_lit && (ce(rt, !1), rt.strm.avail_out === 0) ? Z : Ue;
          }(He, Wt) : He.strategy === 3 ? function(rt, Xt) {
            for (var dn, an, Rn, xr, hr = rt.window; ; ) {
              if (rt.lookahead <= le) {
                if (Ge(rt), rt.lookahead <= le && Xt === K)
                  return Z;
                if (rt.lookahead === 0)
                  break;
              }
              if (rt.match_length = 0, rt.lookahead >= We && 0 < rt.strstart && (an = hr[Rn = rt.strstart - 1]) === hr[++Rn] && an === hr[++Rn] && an === hr[++Rn]) {
                xr = rt.strstart + le;
                do
                  ;
                while (an === hr[++Rn] && an === hr[++Rn] && an === hr[++Rn] && an === hr[++Rn] && an === hr[++Rn] && an === hr[++Rn] && an === hr[++Rn] && an === hr[++Rn] && Rn < xr);
                rt.match_length = le - (xr - Rn), rt.match_length > rt.lookahead && (rt.match_length = rt.lookahead);
              }
              if (rt.match_length >= We ? (dn = p._tr_tally(rt, 1, rt.match_length - We), rt.lookahead -= rt.match_length, rt.strstart += rt.match_length, rt.match_length = 0) : (dn = p._tr_tally(rt, 0, rt.window[rt.strstart]), rt.lookahead--, rt.strstart++), dn && (ce(rt, !1), rt.strm.avail_out === 0))
                return Z;
            }
            return rt.insert = 0, Xt === Y ? (ce(rt, !0), rt.strm.avail_out === 0 ? ct : mt) : rt.last_lit && (ce(rt, !1), rt.strm.avail_out === 0) ? Z : Ue;
          }(He, Wt) : R[He.level].func(He, Wt);
          if (Zt !== ct && Zt !== mt || (He.status = 666), Zt === Z || Zt === ct)
            return ge.avail_out === 0 && (He.last_flush = -1), F;
          if (Zt === Ue && (Wt === 1 ? p._tr_align(He) : Wt !== 5 && (p._tr_stored_block(He, 0, 0, !1), Wt === 3 && (Et(He.head), He.lookahead === 0 && (He.strstart = 0, He.block_start = 0, He.insert = 0))), Je(ge), ge.avail_out === 0))
            return He.last_flush = -1, F;
        }
        return Wt !== Y ? F : He.wrap <= 0 ? 1 : (He.wrap === 2 ? (Ht(He, 255 & ge.adler), Ht(He, ge.adler >> 8 & 255), Ht(He, ge.adler >> 16 & 255), Ht(He, ge.adler >> 24 & 255), Ht(He, 255 & ge.total_in), Ht(He, ge.total_in >> 8 & 255), Ht(He, ge.total_in >> 16 & 255), Ht(He, ge.total_in >> 24 & 255)) : (Dt(He, ge.adler >>> 16), Dt(He, 65535 & ge.adler)), Je(ge), 0 < He.wrap && (He.wrap = -He.wrap), He.pending !== 0 ? F : 1);
      }, re.deflateEnd = function(ge) {
        var Wt;
        return ge && ge.state ? (Wt = ge.state.status) !== fe && Wt !== 69 && Wt !== 73 && Wt !== 91 && Wt !== 103 && Wt !== Me && Wt !== 666 ? at(ge, q) : (ge.state = null, Wt === Me ? at(ge, -3) : F) : q;
      }, re.deflateSetDictionary = function(ge, Wt) {
        var xt, He, Ne, bt, Ut, Zt, rt, Xt, dn = Wt.length;
        if (!ge || !ge.state || (bt = (xt = ge.state).wrap) === 2 || bt === 1 && xt.status !== fe || xt.lookahead)
          return q;
        for (bt === 1 && (ge.adler = N(ge.adler, Wt, dn, 0)), xt.wrap = 0, dn >= xt.w_size && (bt === 0 && (Et(xt.head), xt.strstart = 0, xt.block_start = 0, xt.insert = 0), Xt = new C.Buf8(xt.w_size), C.arraySet(Xt, Wt, dn - xt.w_size, xt.w_size, 0), Wt = Xt, dn = xt.w_size), Ut = ge.avail_in, Zt = ge.next_in, rt = ge.input, ge.avail_in = dn, ge.next_in = 0, ge.input = Wt, Ge(xt); xt.lookahead >= We; ) {
          for (He = xt.strstart, Ne = xt.lookahead - (We - 1); xt.ins_h = (xt.ins_h << xt.hash_shift ^ xt.window[He + We - 1]) & xt.hash_mask, xt.prev[He & xt.w_mask] = xt.head[xt.ins_h], xt.head[xt.ins_h] = He, He++, --Ne; )
            ;
          xt.strstart = He, xt.lookahead = We - 1, Ge(xt);
        }
        return xt.strstart += xt.lookahead, xt.block_start = xt.strstart, xt.insert = xt.lookahead, xt.lookahead = 0, xt.match_length = xt.prev_length = We - 1, xt.match_available = 0, ge.next_in = Zt, ge.input = rt, ge.avail_in = Ut, xt.wrap = bt, F;
      }, re.deflateInfo = "pako deflate (from Nodeca project)";
    }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./messages": 51, "./trees": 52 }], 47: [function(L, k, re) {
      k.exports = function() {
        this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1;
      };
    }, {}], 48: [function(L, k, re) {
      k.exports = function(R, C) {
        var p, N, U, H, K, Y, F, q, O, J, E, me, Ee, Le, Oe, Te, Re, Ve, We, le, je, fe, Me, Z, Ue;
        p = R.state, N = R.next_in, Z = R.input, U = N + (R.avail_in - 5), H = R.next_out, Ue = R.output, K = H - (C - R.avail_out), Y = H + (R.avail_out - 257), F = p.dmax, q = p.wsize, O = p.whave, J = p.wnext, E = p.window, me = p.hold, Ee = p.bits, Le = p.lencode, Oe = p.distcode, Te = (1 << p.lenbits) - 1, Re = (1 << p.distbits) - 1;
        e:
          do {
            Ee < 15 && (me += Z[N++] << Ee, Ee += 8, me += Z[N++] << Ee, Ee += 8), Ve = Le[me & Te];
            t:
              for (; ; ) {
                if (me >>>= We = Ve >>> 24, Ee -= We, (We = Ve >>> 16 & 255) === 0)
                  Ue[H++] = 65535 & Ve;
                else {
                  if (!(16 & We)) {
                    if (!(64 & We)) {
                      Ve = Le[(65535 & Ve) + (me & (1 << We) - 1)];
                      continue t;
                    }
                    if (32 & We) {
                      p.mode = 12;
                      break e;
                    }
                    R.msg = "invalid literal/length code", p.mode = 30;
                    break e;
                  }
                  le = 65535 & Ve, (We &= 15) && (Ee < We && (me += Z[N++] << Ee, Ee += 8), le += me & (1 << We) - 1, me >>>= We, Ee -= We), Ee < 15 && (me += Z[N++] << Ee, Ee += 8, me += Z[N++] << Ee, Ee += 8), Ve = Oe[me & Re];
                  n:
                    for (; ; ) {
                      if (me >>>= We = Ve >>> 24, Ee -= We, !(16 & (We = Ve >>> 16 & 255))) {
                        if (!(64 & We)) {
                          Ve = Oe[(65535 & Ve) + (me & (1 << We) - 1)];
                          continue n;
                        }
                        R.msg = "invalid distance code", p.mode = 30;
                        break e;
                      }
                      if (je = 65535 & Ve, Ee < (We &= 15) && (me += Z[N++] << Ee, (Ee += 8) < We && (me += Z[N++] << Ee, Ee += 8)), F < (je += me & (1 << We) - 1)) {
                        R.msg = "invalid distance too far back", p.mode = 30;
                        break e;
                      }
                      if (me >>>= We, Ee -= We, (We = H - K) < je) {
                        if (O < (We = je - We) && p.sane) {
                          R.msg = "invalid distance too far back", p.mode = 30;
                          break e;
                        }
                        if (Me = E, (fe = 0) === J) {
                          if (fe += q - We, We < le) {
                            for (le -= We; Ue[H++] = E[fe++], --We; )
                              ;
                            fe = H - je, Me = Ue;
                          }
                        } else if (J < We) {
                          if (fe += q + J - We, (We -= J) < le) {
                            for (le -= We; Ue[H++] = E[fe++], --We; )
                              ;
                            if (fe = 0, J < le) {
                              for (le -= We = J; Ue[H++] = E[fe++], --We; )
                                ;
                              fe = H - je, Me = Ue;
                            }
                          }
                        } else if (fe += J - We, We < le) {
                          for (le -= We; Ue[H++] = E[fe++], --We; )
                            ;
                          fe = H - je, Me = Ue;
                        }
                        for (; 2 < le; )
                          Ue[H++] = Me[fe++], Ue[H++] = Me[fe++], Ue[H++] = Me[fe++], le -= 3;
                        le && (Ue[H++] = Me[fe++], 1 < le && (Ue[H++] = Me[fe++]));
                      } else {
                        for (fe = H - je; Ue[H++] = Ue[fe++], Ue[H++] = Ue[fe++], Ue[H++] = Ue[fe++], 2 < (le -= 3); )
                          ;
                        le && (Ue[H++] = Ue[fe++], 1 < le && (Ue[H++] = Ue[fe++]));
                      }
                      break;
                    }
                }
                break;
              }
          } while (N < U && H < Y);
        N -= le = Ee >> 3, me &= (1 << (Ee -= le << 3)) - 1, R.next_in = N, R.next_out = H, R.avail_in = N < U ? U - N + 5 : 5 - (N - U), R.avail_out = H < Y ? Y - H + 257 : 257 - (H - Y), p.hold = me, p.bits = Ee;
      };
    }, {}], 49: [function(L, k, re) {
      var R = L("../utils/common"), C = L("./adler32"), p = L("./crc32"), N = L("./inffast"), U = L("./inftrees"), H = 1, K = 2, Y = 0, F = -2, q = 1, O = 852, J = 592;
      function E(fe) {
        return (fe >>> 24 & 255) + (fe >>> 8 & 65280) + ((65280 & fe) << 8) + ((255 & fe) << 24);
      }
      function me() {
        this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new R.Buf16(320), this.work = new R.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
      }
      function Ee(fe) {
        var Me;
        return fe && fe.state ? (Me = fe.state, fe.total_in = fe.total_out = Me.total = 0, fe.msg = "", Me.wrap && (fe.adler = 1 & Me.wrap), Me.mode = q, Me.last = 0, Me.havedict = 0, Me.dmax = 32768, Me.head = null, Me.hold = 0, Me.bits = 0, Me.lencode = Me.lendyn = new R.Buf32(O), Me.distcode = Me.distdyn = new R.Buf32(J), Me.sane = 1, Me.back = -1, Y) : F;
      }
      function Le(fe) {
        var Me;
        return fe && fe.state ? ((Me = fe.state).wsize = 0, Me.whave = 0, Me.wnext = 0, Ee(fe)) : F;
      }
      function Oe(fe, Me) {
        var Z, Ue;
        return fe && fe.state ? (Ue = fe.state, Me < 0 ? (Z = 0, Me = -Me) : (Z = 1 + (Me >> 4), Me < 48 && (Me &= 15)), Me && (Me < 8 || 15 < Me) ? F : (Ue.window !== null && Ue.wbits !== Me && (Ue.window = null), Ue.wrap = Z, Ue.wbits = Me, Le(fe))) : F;
      }
      function Te(fe, Me) {
        var Z, Ue;
        return fe ? (Ue = new me(), (fe.state = Ue).window = null, (Z = Oe(fe, Me)) !== Y && (fe.state = null), Z) : F;
      }
      var Re, Ve, We = !0;
      function le(fe) {
        if (We) {
          var Me;
          for (Re = new R.Buf32(512), Ve = new R.Buf32(32), Me = 0; Me < 144; )
            fe.lens[Me++] = 8;
          for (; Me < 256; )
            fe.lens[Me++] = 9;
          for (; Me < 280; )
            fe.lens[Me++] = 7;
          for (; Me < 288; )
            fe.lens[Me++] = 8;
          for (U(H, fe.lens, 0, 288, Re, 0, fe.work, { bits: 9 }), Me = 0; Me < 32; )
            fe.lens[Me++] = 5;
          U(K, fe.lens, 0, 32, Ve, 0, fe.work, { bits: 5 }), We = !1;
        }
        fe.lencode = Re, fe.lenbits = 9, fe.distcode = Ve, fe.distbits = 5;
      }
      function je(fe, Me, Z, Ue) {
        var ct, mt = fe.state;
        return mt.window === null && (mt.wsize = 1 << mt.wbits, mt.wnext = 0, mt.whave = 0, mt.window = new R.Buf8(mt.wsize)), Ue >= mt.wsize ? (R.arraySet(mt.window, Me, Z - mt.wsize, mt.wsize, 0), mt.wnext = 0, mt.whave = mt.wsize) : (Ue < (ct = mt.wsize - mt.wnext) && (ct = Ue), R.arraySet(mt.window, Me, Z - Ue, ct, mt.wnext), (Ue -= ct) ? (R.arraySet(mt.window, Me, Z - Ue, Ue, 0), mt.wnext = Ue, mt.whave = mt.wsize) : (mt.wnext += ct, mt.wnext === mt.wsize && (mt.wnext = 0), mt.whave < mt.wsize && (mt.whave += ct))), 0;
      }
      re.inflateReset = Le, re.inflateReset2 = Oe, re.inflateResetKeep = Ee, re.inflateInit = function(fe) {
        return Te(fe, 15);
      }, re.inflateInit2 = Te, re.inflate = function(fe, Me) {
        var Z, Ue, ct, mt, at, Ye, Et, Je, ce, Ht, Dt, Be, Ge, lt, ot, Kt, Lt, bn, Fn, wn, ge, Wt, xt, He, Ne = 0, bt = new R.Buf8(4), Ut = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
        if (!fe || !fe.state || !fe.output || !fe.input && fe.avail_in !== 0)
          return F;
        (Z = fe.state).mode === 12 && (Z.mode = 13), at = fe.next_out, ct = fe.output, Et = fe.avail_out, mt = fe.next_in, Ue = fe.input, Ye = fe.avail_in, Je = Z.hold, ce = Z.bits, Ht = Ye, Dt = Et, Wt = Y;
        e:
          for (; ; )
            switch (Z.mode) {
              case q:
                if (Z.wrap === 0) {
                  Z.mode = 13;
                  break;
                }
                for (; ce < 16; ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                if (2 & Z.wrap && Je === 35615) {
                  bt[Z.check = 0] = 255 & Je, bt[1] = Je >>> 8 & 255, Z.check = p(Z.check, bt, 2, 0), ce = Je = 0, Z.mode = 2;
                  break;
                }
                if (Z.flags = 0, Z.head && (Z.head.done = !1), !(1 & Z.wrap) || (((255 & Je) << 8) + (Je >> 8)) % 31) {
                  fe.msg = "incorrect header check", Z.mode = 30;
                  break;
                }
                if ((15 & Je) != 8) {
                  fe.msg = "unknown compression method", Z.mode = 30;
                  break;
                }
                if (ce -= 4, ge = 8 + (15 & (Je >>>= 4)), Z.wbits === 0)
                  Z.wbits = ge;
                else if (ge > Z.wbits) {
                  fe.msg = "invalid window size", Z.mode = 30;
                  break;
                }
                Z.dmax = 1 << ge, fe.adler = Z.check = 1, Z.mode = 512 & Je ? 10 : 12, ce = Je = 0;
                break;
              case 2:
                for (; ce < 16; ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                if (Z.flags = Je, (255 & Z.flags) != 8) {
                  fe.msg = "unknown compression method", Z.mode = 30;
                  break;
                }
                if (57344 & Z.flags) {
                  fe.msg = "unknown header flags set", Z.mode = 30;
                  break;
                }
                Z.head && (Z.head.text = Je >> 8 & 1), 512 & Z.flags && (bt[0] = 255 & Je, bt[1] = Je >>> 8 & 255, Z.check = p(Z.check, bt, 2, 0)), ce = Je = 0, Z.mode = 3;
              case 3:
                for (; ce < 32; ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                Z.head && (Z.head.time = Je), 512 & Z.flags && (bt[0] = 255 & Je, bt[1] = Je >>> 8 & 255, bt[2] = Je >>> 16 & 255, bt[3] = Je >>> 24 & 255, Z.check = p(Z.check, bt, 4, 0)), ce = Je = 0, Z.mode = 4;
              case 4:
                for (; ce < 16; ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                Z.head && (Z.head.xflags = 255 & Je, Z.head.os = Je >> 8), 512 & Z.flags && (bt[0] = 255 & Je, bt[1] = Je >>> 8 & 255, Z.check = p(Z.check, bt, 2, 0)), ce = Je = 0, Z.mode = 5;
              case 5:
                if (1024 & Z.flags) {
                  for (; ce < 16; ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je += Ue[mt++] << ce, ce += 8;
                  }
                  Z.length = Je, Z.head && (Z.head.extra_len = Je), 512 & Z.flags && (bt[0] = 255 & Je, bt[1] = Je >>> 8 & 255, Z.check = p(Z.check, bt, 2, 0)), ce = Je = 0;
                } else
                  Z.head && (Z.head.extra = null);
                Z.mode = 6;
              case 6:
                if (1024 & Z.flags && (Ye < (Be = Z.length) && (Be = Ye), Be && (Z.head && (ge = Z.head.extra_len - Z.length, Z.head.extra || (Z.head.extra = new Array(Z.head.extra_len)), R.arraySet(Z.head.extra, Ue, mt, Be, ge)), 512 & Z.flags && (Z.check = p(Z.check, Ue, Be, mt)), Ye -= Be, mt += Be, Z.length -= Be), Z.length))
                  break e;
                Z.length = 0, Z.mode = 7;
              case 7:
                if (2048 & Z.flags) {
                  if (Ye === 0)
                    break e;
                  for (Be = 0; ge = Ue[mt + Be++], Z.head && ge && Z.length < 65536 && (Z.head.name += String.fromCharCode(ge)), ge && Be < Ye; )
                    ;
                  if (512 & Z.flags && (Z.check = p(Z.check, Ue, Be, mt)), Ye -= Be, mt += Be, ge)
                    break e;
                } else
                  Z.head && (Z.head.name = null);
                Z.length = 0, Z.mode = 8;
              case 8:
                if (4096 & Z.flags) {
                  if (Ye === 0)
                    break e;
                  for (Be = 0; ge = Ue[mt + Be++], Z.head && ge && Z.length < 65536 && (Z.head.comment += String.fromCharCode(ge)), ge && Be < Ye; )
                    ;
                  if (512 & Z.flags && (Z.check = p(Z.check, Ue, Be, mt)), Ye -= Be, mt += Be, ge)
                    break e;
                } else
                  Z.head && (Z.head.comment = null);
                Z.mode = 9;
              case 9:
                if (512 & Z.flags) {
                  for (; ce < 16; ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je += Ue[mt++] << ce, ce += 8;
                  }
                  if (Je !== (65535 & Z.check)) {
                    fe.msg = "header crc mismatch", Z.mode = 30;
                    break;
                  }
                  ce = Je = 0;
                }
                Z.head && (Z.head.hcrc = Z.flags >> 9 & 1, Z.head.done = !0), fe.adler = Z.check = 0, Z.mode = 12;
                break;
              case 10:
                for (; ce < 32; ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                fe.adler = Z.check = E(Je), ce = Je = 0, Z.mode = 11;
              case 11:
                if (Z.havedict === 0)
                  return fe.next_out = at, fe.avail_out = Et, fe.next_in = mt, fe.avail_in = Ye, Z.hold = Je, Z.bits = ce, 2;
                fe.adler = Z.check = 1, Z.mode = 12;
              case 12:
                if (Me === 5 || Me === 6)
                  break e;
              case 13:
                if (Z.last) {
                  Je >>>= 7 & ce, ce -= 7 & ce, Z.mode = 27;
                  break;
                }
                for (; ce < 3; ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                switch (Z.last = 1 & Je, ce -= 1, 3 & (Je >>>= 1)) {
                  case 0:
                    Z.mode = 14;
                    break;
                  case 1:
                    if (le(Z), Z.mode = 20, Me !== 6)
                      break;
                    Je >>>= 2, ce -= 2;
                    break e;
                  case 2:
                    Z.mode = 17;
                    break;
                  case 3:
                    fe.msg = "invalid block type", Z.mode = 30;
                }
                Je >>>= 2, ce -= 2;
                break;
              case 14:
                for (Je >>>= 7 & ce, ce -= 7 & ce; ce < 32; ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                if ((65535 & Je) != (Je >>> 16 ^ 65535)) {
                  fe.msg = "invalid stored block lengths", Z.mode = 30;
                  break;
                }
                if (Z.length = 65535 & Je, ce = Je = 0, Z.mode = 15, Me === 6)
                  break e;
              case 15:
                Z.mode = 16;
              case 16:
                if (Be = Z.length) {
                  if (Ye < Be && (Be = Ye), Et < Be && (Be = Et), Be === 0)
                    break e;
                  R.arraySet(ct, Ue, mt, Be, at), Ye -= Be, mt += Be, Et -= Be, at += Be, Z.length -= Be;
                  break;
                }
                Z.mode = 12;
                break;
              case 17:
                for (; ce < 14; ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                if (Z.nlen = 257 + (31 & Je), Je >>>= 5, ce -= 5, Z.ndist = 1 + (31 & Je), Je >>>= 5, ce -= 5, Z.ncode = 4 + (15 & Je), Je >>>= 4, ce -= 4, 286 < Z.nlen || 30 < Z.ndist) {
                  fe.msg = "too many length or distance symbols", Z.mode = 30;
                  break;
                }
                Z.have = 0, Z.mode = 18;
              case 18:
                for (; Z.have < Z.ncode; ) {
                  for (; ce < 3; ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je += Ue[mt++] << ce, ce += 8;
                  }
                  Z.lens[Ut[Z.have++]] = 7 & Je, Je >>>= 3, ce -= 3;
                }
                for (; Z.have < 19; )
                  Z.lens[Ut[Z.have++]] = 0;
                if (Z.lencode = Z.lendyn, Z.lenbits = 7, xt = { bits: Z.lenbits }, Wt = U(0, Z.lens, 0, 19, Z.lencode, 0, Z.work, xt), Z.lenbits = xt.bits, Wt) {
                  fe.msg = "invalid code lengths set", Z.mode = 30;
                  break;
                }
                Z.have = 0, Z.mode = 19;
              case 19:
                for (; Z.have < Z.nlen + Z.ndist; ) {
                  for (; Kt = (Ne = Z.lencode[Je & (1 << Z.lenbits) - 1]) >>> 16 & 255, Lt = 65535 & Ne, !((ot = Ne >>> 24) <= ce); ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je += Ue[mt++] << ce, ce += 8;
                  }
                  if (Lt < 16)
                    Je >>>= ot, ce -= ot, Z.lens[Z.have++] = Lt;
                  else {
                    if (Lt === 16) {
                      for (He = ot + 2; ce < He; ) {
                        if (Ye === 0)
                          break e;
                        Ye--, Je += Ue[mt++] << ce, ce += 8;
                      }
                      if (Je >>>= ot, ce -= ot, Z.have === 0) {
                        fe.msg = "invalid bit length repeat", Z.mode = 30;
                        break;
                      }
                      ge = Z.lens[Z.have - 1], Be = 3 + (3 & Je), Je >>>= 2, ce -= 2;
                    } else if (Lt === 17) {
                      for (He = ot + 3; ce < He; ) {
                        if (Ye === 0)
                          break e;
                        Ye--, Je += Ue[mt++] << ce, ce += 8;
                      }
                      ce -= ot, ge = 0, Be = 3 + (7 & (Je >>>= ot)), Je >>>= 3, ce -= 3;
                    } else {
                      for (He = ot + 7; ce < He; ) {
                        if (Ye === 0)
                          break e;
                        Ye--, Je += Ue[mt++] << ce, ce += 8;
                      }
                      ce -= ot, ge = 0, Be = 11 + (127 & (Je >>>= ot)), Je >>>= 7, ce -= 7;
                    }
                    if (Z.have + Be > Z.nlen + Z.ndist) {
                      fe.msg = "invalid bit length repeat", Z.mode = 30;
                      break;
                    }
                    for (; Be--; )
                      Z.lens[Z.have++] = ge;
                  }
                }
                if (Z.mode === 30)
                  break;
                if (Z.lens[256] === 0) {
                  fe.msg = "invalid code -- missing end-of-block", Z.mode = 30;
                  break;
                }
                if (Z.lenbits = 9, xt = { bits: Z.lenbits }, Wt = U(H, Z.lens, 0, Z.nlen, Z.lencode, 0, Z.work, xt), Z.lenbits = xt.bits, Wt) {
                  fe.msg = "invalid literal/lengths set", Z.mode = 30;
                  break;
                }
                if (Z.distbits = 6, Z.distcode = Z.distdyn, xt = { bits: Z.distbits }, Wt = U(K, Z.lens, Z.nlen, Z.ndist, Z.distcode, 0, Z.work, xt), Z.distbits = xt.bits, Wt) {
                  fe.msg = "invalid distances set", Z.mode = 30;
                  break;
                }
                if (Z.mode = 20, Me === 6)
                  break e;
              case 20:
                Z.mode = 21;
              case 21:
                if (6 <= Ye && 258 <= Et) {
                  fe.next_out = at, fe.avail_out = Et, fe.next_in = mt, fe.avail_in = Ye, Z.hold = Je, Z.bits = ce, N(fe, Dt), at = fe.next_out, ct = fe.output, Et = fe.avail_out, mt = fe.next_in, Ue = fe.input, Ye = fe.avail_in, Je = Z.hold, ce = Z.bits, Z.mode === 12 && (Z.back = -1);
                  break;
                }
                for (Z.back = 0; Kt = (Ne = Z.lencode[Je & (1 << Z.lenbits) - 1]) >>> 16 & 255, Lt = 65535 & Ne, !((ot = Ne >>> 24) <= ce); ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                if (Kt && !(240 & Kt)) {
                  for (bn = ot, Fn = Kt, wn = Lt; Kt = (Ne = Z.lencode[wn + ((Je & (1 << bn + Fn) - 1) >> bn)]) >>> 16 & 255, Lt = 65535 & Ne, !(bn + (ot = Ne >>> 24) <= ce); ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je += Ue[mt++] << ce, ce += 8;
                  }
                  Je >>>= bn, ce -= bn, Z.back += bn;
                }
                if (Je >>>= ot, ce -= ot, Z.back += ot, Z.length = Lt, Kt === 0) {
                  Z.mode = 26;
                  break;
                }
                if (32 & Kt) {
                  Z.back = -1, Z.mode = 12;
                  break;
                }
                if (64 & Kt) {
                  fe.msg = "invalid literal/length code", Z.mode = 30;
                  break;
                }
                Z.extra = 15 & Kt, Z.mode = 22;
              case 22:
                if (Z.extra) {
                  for (He = Z.extra; ce < He; ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je += Ue[mt++] << ce, ce += 8;
                  }
                  Z.length += Je & (1 << Z.extra) - 1, Je >>>= Z.extra, ce -= Z.extra, Z.back += Z.extra;
                }
                Z.was = Z.length, Z.mode = 23;
              case 23:
                for (; Kt = (Ne = Z.distcode[Je & (1 << Z.distbits) - 1]) >>> 16 & 255, Lt = 65535 & Ne, !((ot = Ne >>> 24) <= ce); ) {
                  if (Ye === 0)
                    break e;
                  Ye--, Je += Ue[mt++] << ce, ce += 8;
                }
                if (!(240 & Kt)) {
                  for (bn = ot, Fn = Kt, wn = Lt; Kt = (Ne = Z.distcode[wn + ((Je & (1 << bn + Fn) - 1) >> bn)]) >>> 16 & 255, Lt = 65535 & Ne, !(bn + (ot = Ne >>> 24) <= ce); ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je += Ue[mt++] << ce, ce += 8;
                  }
                  Je >>>= bn, ce -= bn, Z.back += bn;
                }
                if (Je >>>= ot, ce -= ot, Z.back += ot, 64 & Kt) {
                  fe.msg = "invalid distance code", Z.mode = 30;
                  break;
                }
                Z.offset = Lt, Z.extra = 15 & Kt, Z.mode = 24;
              case 24:
                if (Z.extra) {
                  for (He = Z.extra; ce < He; ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je += Ue[mt++] << ce, ce += 8;
                  }
                  Z.offset += Je & (1 << Z.extra) - 1, Je >>>= Z.extra, ce -= Z.extra, Z.back += Z.extra;
                }
                if (Z.offset > Z.dmax) {
                  fe.msg = "invalid distance too far back", Z.mode = 30;
                  break;
                }
                Z.mode = 25;
              case 25:
                if (Et === 0)
                  break e;
                if (Be = Dt - Et, Z.offset > Be) {
                  if ((Be = Z.offset - Be) > Z.whave && Z.sane) {
                    fe.msg = "invalid distance too far back", Z.mode = 30;
                    break;
                  }
                  Ge = Be > Z.wnext ? (Be -= Z.wnext, Z.wsize - Be) : Z.wnext - Be, Be > Z.length && (Be = Z.length), lt = Z.window;
                } else
                  lt = ct, Ge = at - Z.offset, Be = Z.length;
                for (Et < Be && (Be = Et), Et -= Be, Z.length -= Be; ct[at++] = lt[Ge++], --Be; )
                  ;
                Z.length === 0 && (Z.mode = 21);
                break;
              case 26:
                if (Et === 0)
                  break e;
                ct[at++] = Z.length, Et--, Z.mode = 21;
                break;
              case 27:
                if (Z.wrap) {
                  for (; ce < 32; ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je |= Ue[mt++] << ce, ce += 8;
                  }
                  if (Dt -= Et, fe.total_out += Dt, Z.total += Dt, Dt && (fe.adler = Z.check = Z.flags ? p(Z.check, ct, Dt, at - Dt) : C(Z.check, ct, Dt, at - Dt)), Dt = Et, (Z.flags ? Je : E(Je)) !== Z.check) {
                    fe.msg = "incorrect data check", Z.mode = 30;
                    break;
                  }
                  ce = Je = 0;
                }
                Z.mode = 28;
              case 28:
                if (Z.wrap && Z.flags) {
                  for (; ce < 32; ) {
                    if (Ye === 0)
                      break e;
                    Ye--, Je += Ue[mt++] << ce, ce += 8;
                  }
                  if (Je !== (4294967295 & Z.total)) {
                    fe.msg = "incorrect length check", Z.mode = 30;
                    break;
                  }
                  ce = Je = 0;
                }
                Z.mode = 29;
              case 29:
                Wt = 1;
                break e;
              case 30:
                Wt = -3;
                break e;
              case 31:
                return -4;
              case 32:
              default:
                return F;
            }
        return fe.next_out = at, fe.avail_out = Et, fe.next_in = mt, fe.avail_in = Ye, Z.hold = Je, Z.bits = ce, (Z.wsize || Dt !== fe.avail_out && Z.mode < 30 && (Z.mode < 27 || Me !== 4)) && je(fe, fe.output, fe.next_out, Dt - fe.avail_out) ? (Z.mode = 31, -4) : (Ht -= fe.avail_in, Dt -= fe.avail_out, fe.total_in += Ht, fe.total_out += Dt, Z.total += Dt, Z.wrap && Dt && (fe.adler = Z.check = Z.flags ? p(Z.check, ct, Dt, fe.next_out - Dt) : C(Z.check, ct, Dt, fe.next_out - Dt)), fe.data_type = Z.bits + (Z.last ? 64 : 0) + (Z.mode === 12 ? 128 : 0) + (Z.mode === 20 || Z.mode === 15 ? 256 : 0), (Ht == 0 && Dt === 0 || Me === 4) && Wt === Y && (Wt = -5), Wt);
      }, re.inflateEnd = function(fe) {
        if (!fe || !fe.state)
          return F;
        var Me = fe.state;
        return Me.window && (Me.window = null), fe.state = null, Y;
      }, re.inflateGetHeader = function(fe, Me) {
        var Z;
        return fe && fe.state && 2 & (Z = fe.state).wrap ? ((Z.head = Me).done = !1, Y) : F;
      }, re.inflateSetDictionary = function(fe, Me) {
        var Z, Ue = Me.length;
        return fe && fe.state ? (Z = fe.state).wrap !== 0 && Z.mode !== 11 ? F : Z.mode === 11 && C(1, Me, Ue, 0) !== Z.check ? -3 : je(fe, Me, Ue, Ue) ? (Z.mode = 31, -4) : (Z.havedict = 1, Y) : F;
      }, re.inflateInfo = "pako inflate (from Nodeca project)";
    }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./inffast": 48, "./inftrees": 50 }], 50: [function(L, k, re) {
      var R = L("../utils/common"), C = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0], p = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78], N = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0], U = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
      k.exports = function(H, K, Y, F, q, O, J, E) {
        var me, Ee, Le, Oe, Te, Re, Ve, We, le, je = E.bits, fe = 0, Me = 0, Z = 0, Ue = 0, ct = 0, mt = 0, at = 0, Ye = 0, Et = 0, Je = 0, ce = null, Ht = 0, Dt = new R.Buf16(16), Be = new R.Buf16(16), Ge = null, lt = 0;
        for (fe = 0; fe <= 15; fe++)
          Dt[fe] = 0;
        for (Me = 0; Me < F; Me++)
          Dt[K[Y + Me]]++;
        for (ct = je, Ue = 15; 1 <= Ue && Dt[Ue] === 0; Ue--)
          ;
        if (Ue < ct && (ct = Ue), Ue === 0)
          return q[O++] = 20971520, q[O++] = 20971520, E.bits = 1, 0;
        for (Z = 1; Z < Ue && Dt[Z] === 0; Z++)
          ;
        for (ct < Z && (ct = Z), fe = Ye = 1; fe <= 15; fe++)
          if (Ye <<= 1, (Ye -= Dt[fe]) < 0)
            return -1;
        if (0 < Ye && (H === 0 || Ue !== 1))
          return -1;
        for (Be[1] = 0, fe = 1; fe < 15; fe++)
          Be[fe + 1] = Be[fe] + Dt[fe];
        for (Me = 0; Me < F; Me++)
          K[Y + Me] !== 0 && (J[Be[K[Y + Me]]++] = Me);
        if (Re = H === 0 ? (ce = Ge = J, 19) : H === 1 ? (ce = C, Ht -= 257, Ge = p, lt -= 257, 256) : (ce = N, Ge = U, -1), fe = Z, Te = O, at = Me = Je = 0, Le = -1, Oe = (Et = 1 << (mt = ct)) - 1, H === 1 && 852 < Et || H === 2 && 592 < Et)
          return 1;
        for (; ; ) {
          for (Ve = fe - at, le = J[Me] < Re ? (We = 0, J[Me]) : J[Me] > Re ? (We = Ge[lt + J[Me]], ce[Ht + J[Me]]) : (We = 96, 0), me = 1 << fe - at, Z = Ee = 1 << mt; q[Te + (Je >> at) + (Ee -= me)] = Ve << 24 | We << 16 | le | 0, Ee !== 0; )
            ;
          for (me = 1 << fe - 1; Je & me; )
            me >>= 1;
          if (me !== 0 ? (Je &= me - 1, Je += me) : Je = 0, Me++, --Dt[fe] == 0) {
            if (fe === Ue)
              break;
            fe = K[Y + J[Me]];
          }
          if (ct < fe && (Je & Oe) !== Le) {
            for (at === 0 && (at = ct), Te += Z, Ye = 1 << (mt = fe - at); mt + at < Ue && !((Ye -= Dt[mt + at]) <= 0); )
              mt++, Ye <<= 1;
            if (Et += 1 << mt, H === 1 && 852 < Et || H === 2 && 592 < Et)
              return 1;
            q[Le = Je & Oe] = ct << 24 | mt << 16 | Te - O | 0;
          }
        }
        return Je !== 0 && (q[Te + Je] = fe - at << 24 | 64 << 16 | 0), E.bits = ct, 0;
      };
    }, { "../utils/common": 41 }], 51: [function(L, k, re) {
      k.exports = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" };
    }, {}], 52: [function(L, k, re) {
      var R = L("../utils/common"), C = 0, p = 1;
      function N(Ne) {
        for (var bt = Ne.length; 0 <= --bt; )
          Ne[bt] = 0;
      }
      var U = 0, H = 29, K = 256, Y = K + 1 + H, F = 30, q = 19, O = 2 * Y + 1, J = 15, E = 16, me = 7, Ee = 256, Le = 16, Oe = 17, Te = 18, Re = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0], Ve = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], We = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7], le = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], je = new Array(2 * (Y + 2));
      N(je);
      var fe = new Array(2 * F);
      N(fe);
      var Me = new Array(512);
      N(Me);
      var Z = new Array(256);
      N(Z);
      var Ue = new Array(H);
      N(Ue);
      var ct, mt, at, Ye = new Array(F);
      function Et(Ne, bt, Ut, Zt, rt) {
        this.static_tree = Ne, this.extra_bits = bt, this.extra_base = Ut, this.elems = Zt, this.max_length = rt, this.has_stree = Ne && Ne.length;
      }
      function Je(Ne, bt) {
        this.dyn_tree = Ne, this.max_code = 0, this.stat_desc = bt;
      }
      function ce(Ne) {
        return Ne < 256 ? Me[Ne] : Me[256 + (Ne >>> 7)];
      }
      function Ht(Ne, bt) {
        Ne.pending_buf[Ne.pending++] = 255 & bt, Ne.pending_buf[Ne.pending++] = bt >>> 8 & 255;
      }
      function Dt(Ne, bt, Ut) {
        Ne.bi_valid > E - Ut ? (Ne.bi_buf |= bt << Ne.bi_valid & 65535, Ht(Ne, Ne.bi_buf), Ne.bi_buf = bt >> E - Ne.bi_valid, Ne.bi_valid += Ut - E) : (Ne.bi_buf |= bt << Ne.bi_valid & 65535, Ne.bi_valid += Ut);
      }
      function Be(Ne, bt, Ut) {
        Dt(Ne, Ut[2 * bt], Ut[2 * bt + 1]);
      }
      function Ge(Ne, bt) {
        for (var Ut = 0; Ut |= 1 & Ne, Ne >>>= 1, Ut <<= 1, 0 < --bt; )
          ;
        return Ut >>> 1;
      }
      function lt(Ne, bt, Ut) {
        var Zt, rt, Xt = new Array(J + 1), dn = 0;
        for (Zt = 1; Zt <= J; Zt++)
          Xt[Zt] = dn = dn + Ut[Zt - 1] << 1;
        for (rt = 0; rt <= bt; rt++) {
          var an = Ne[2 * rt + 1];
          an !== 0 && (Ne[2 * rt] = Ge(Xt[an]++, an));
        }
      }
      function ot(Ne) {
        var bt;
        for (bt = 0; bt < Y; bt++)
          Ne.dyn_ltree[2 * bt] = 0;
        for (bt = 0; bt < F; bt++)
          Ne.dyn_dtree[2 * bt] = 0;
        for (bt = 0; bt < q; bt++)
          Ne.bl_tree[2 * bt] = 0;
        Ne.dyn_ltree[2 * Ee] = 1, Ne.opt_len = Ne.static_len = 0, Ne.last_lit = Ne.matches = 0;
      }
      function Kt(Ne) {
        8 < Ne.bi_valid ? Ht(Ne, Ne.bi_buf) : 0 < Ne.bi_valid && (Ne.pending_buf[Ne.pending++] = Ne.bi_buf), Ne.bi_buf = 0, Ne.bi_valid = 0;
      }
      function Lt(Ne, bt, Ut, Zt) {
        var rt = 2 * bt, Xt = 2 * Ut;
        return Ne[rt] < Ne[Xt] || Ne[rt] === Ne[Xt] && Zt[bt] <= Zt[Ut];
      }
      function bn(Ne, bt, Ut) {
        for (var Zt = Ne.heap[Ut], rt = Ut << 1; rt <= Ne.heap_len && (rt < Ne.heap_len && Lt(bt, Ne.heap[rt + 1], Ne.heap[rt], Ne.depth) && rt++, !Lt(bt, Zt, Ne.heap[rt], Ne.depth)); )
          Ne.heap[Ut] = Ne.heap[rt], Ut = rt, rt <<= 1;
        Ne.heap[Ut] = Zt;
      }
      function Fn(Ne, bt, Ut) {
        var Zt, rt, Xt, dn, an = 0;
        if (Ne.last_lit !== 0)
          for (; Zt = Ne.pending_buf[Ne.d_buf + 2 * an] << 8 | Ne.pending_buf[Ne.d_buf + 2 * an + 1], rt = Ne.pending_buf[Ne.l_buf + an], an++, Zt === 0 ? Be(Ne, rt, bt) : (Be(Ne, (Xt = Z[rt]) + K + 1, bt), (dn = Re[Xt]) !== 0 && Dt(Ne, rt -= Ue[Xt], dn), Be(Ne, Xt = ce(--Zt), Ut), (dn = Ve[Xt]) !== 0 && Dt(Ne, Zt -= Ye[Xt], dn)), an < Ne.last_lit; )
            ;
        Be(Ne, Ee, bt);
      }
      function wn(Ne, bt) {
        var Ut, Zt, rt, Xt = bt.dyn_tree, dn = bt.stat_desc.static_tree, an = bt.stat_desc.has_stree, Rn = bt.stat_desc.elems, xr = -1;
        for (Ne.heap_len = 0, Ne.heap_max = O, Ut = 0; Ut < Rn; Ut++)
          Xt[2 * Ut] !== 0 ? (Ne.heap[++Ne.heap_len] = xr = Ut, Ne.depth[Ut] = 0) : Xt[2 * Ut + 1] = 0;
        for (; Ne.heap_len < 2; )
          Xt[2 * (rt = Ne.heap[++Ne.heap_len] = xr < 2 ? ++xr : 0)] = 1, Ne.depth[rt] = 0, Ne.opt_len--, an && (Ne.static_len -= dn[2 * rt + 1]);
        for (bt.max_code = xr, Ut = Ne.heap_len >> 1; 1 <= Ut; Ut--)
          bn(Ne, Xt, Ut);
        for (rt = Rn; Ut = Ne.heap[1], Ne.heap[1] = Ne.heap[Ne.heap_len--], bn(Ne, Xt, 1), Zt = Ne.heap[1], Ne.heap[--Ne.heap_max] = Ut, Ne.heap[--Ne.heap_max] = Zt, Xt[2 * rt] = Xt[2 * Ut] + Xt[2 * Zt], Ne.depth[rt] = (Ne.depth[Ut] >= Ne.depth[Zt] ? Ne.depth[Ut] : Ne.depth[Zt]) + 1, Xt[2 * Ut + 1] = Xt[2 * Zt + 1] = rt, Ne.heap[1] = rt++, bn(Ne, Xt, 1), 2 <= Ne.heap_len; )
          ;
        Ne.heap[--Ne.heap_max] = Ne.heap[1], function(hr, Vr) {
          var Zn, It, Mt, Yt, $t, Pn, nr = Vr.dyn_tree, _r = Vr.max_code, vr = Vr.stat_desc.static_tree, Fr = Vr.stat_desc.has_stree, Or = Vr.stat_desc.extra_bits, Jr = Vr.stat_desc.extra_base, $n = Vr.stat_desc.max_length, no = 0;
          for (Yt = 0; Yt <= J; Yt++)
            hr.bl_count[Yt] = 0;
          for (nr[2 * hr.heap[hr.heap_max] + 1] = 0, Zn = hr.heap_max + 1; Zn < O; Zn++)
            $n < (Yt = nr[2 * nr[2 * (It = hr.heap[Zn]) + 1] + 1] + 1) && (Yt = $n, no++), nr[2 * It + 1] = Yt, _r < It || (hr.bl_count[Yt]++, $t = 0, Jr <= It && ($t = Or[It - Jr]), Pn = nr[2 * It], hr.opt_len += Pn * (Yt + $t), Fr && (hr.static_len += Pn * (vr[2 * It + 1] + $t)));
          if (no !== 0) {
            do {
              for (Yt = $n - 1; hr.bl_count[Yt] === 0; )
                Yt--;
              hr.bl_count[Yt]--, hr.bl_count[Yt + 1] += 2, hr.bl_count[$n]--, no -= 2;
            } while (0 < no);
            for (Yt = $n; Yt !== 0; Yt--)
              for (It = hr.bl_count[Yt]; It !== 0; )
                _r < (Mt = hr.heap[--Zn]) || (nr[2 * Mt + 1] !== Yt && (hr.opt_len += (Yt - nr[2 * Mt + 1]) * nr[2 * Mt], nr[2 * Mt + 1] = Yt), It--);
          }
        }(Ne, bt), lt(Xt, xr, Ne.bl_count);
      }
      function ge(Ne, bt, Ut) {
        var Zt, rt, Xt = -1, dn = bt[1], an = 0, Rn = 7, xr = 4;
        for (dn === 0 && (Rn = 138, xr = 3), bt[2 * (Ut + 1) + 1] = 65535, Zt = 0; Zt <= Ut; Zt++)
          rt = dn, dn = bt[2 * (Zt + 1) + 1], ++an < Rn && rt === dn || (an < xr ? Ne.bl_tree[2 * rt] += an : rt !== 0 ? (rt !== Xt && Ne.bl_tree[2 * rt]++, Ne.bl_tree[2 * Le]++) : an <= 10 ? Ne.bl_tree[2 * Oe]++ : Ne.bl_tree[2 * Te]++, Xt = rt, xr = (an = 0) === dn ? (Rn = 138, 3) : rt === dn ? (Rn = 6, 3) : (Rn = 7, 4));
      }
      function Wt(Ne, bt, Ut) {
        var Zt, rt, Xt = -1, dn = bt[1], an = 0, Rn = 7, xr = 4;
        for (dn === 0 && (Rn = 138, xr = 3), Zt = 0; Zt <= Ut; Zt++)
          if (rt = dn, dn = bt[2 * (Zt + 1) + 1], !(++an < Rn && rt === dn)) {
            if (an < xr)
              for (; Be(Ne, rt, Ne.bl_tree), --an != 0; )
                ;
            else
              rt !== 0 ? (rt !== Xt && (Be(Ne, rt, Ne.bl_tree), an--), Be(Ne, Le, Ne.bl_tree), Dt(Ne, an - 3, 2)) : an <= 10 ? (Be(Ne, Oe, Ne.bl_tree), Dt(Ne, an - 3, 3)) : (Be(Ne, Te, Ne.bl_tree), Dt(Ne, an - 11, 7));
            Xt = rt, xr = (an = 0) === dn ? (Rn = 138, 3) : rt === dn ? (Rn = 6, 3) : (Rn = 7, 4);
          }
      }
      N(Ye);
      var xt = !1;
      function He(Ne, bt, Ut, Zt) {
        Dt(Ne, (U << 1) + (Zt ? 1 : 0), 3), function(rt, Xt, dn, an) {
          Kt(rt), an && (Ht(rt, dn), Ht(rt, ~dn)), R.arraySet(rt.pending_buf, rt.window, Xt, dn, rt.pending), rt.pending += dn;
        }(Ne, bt, Ut, !0);
      }
      re._tr_init = function(Ne) {
        xt || (function() {
          var bt, Ut, Zt, rt, Xt, dn = new Array(J + 1);
          for (rt = Zt = 0; rt < H - 1; rt++)
            for (Ue[rt] = Zt, bt = 0; bt < 1 << Re[rt]; bt++)
              Z[Zt++] = rt;
          for (Z[Zt - 1] = rt, rt = Xt = 0; rt < 16; rt++)
            for (Ye[rt] = Xt, bt = 0; bt < 1 << Ve[rt]; bt++)
              Me[Xt++] = rt;
          for (Xt >>= 7; rt < F; rt++)
            for (Ye[rt] = Xt << 7, bt = 0; bt < 1 << Ve[rt] - 7; bt++)
              Me[256 + Xt++] = rt;
          for (Ut = 0; Ut <= J; Ut++)
            dn[Ut] = 0;
          for (bt = 0; bt <= 143; )
            je[2 * bt + 1] = 8, bt++, dn[8]++;
          for (; bt <= 255; )
            je[2 * bt + 1] = 9, bt++, dn[9]++;
          for (; bt <= 279; )
            je[2 * bt + 1] = 7, bt++, dn[7]++;
          for (; bt <= 287; )
            je[2 * bt + 1] = 8, bt++, dn[8]++;
          for (lt(je, Y + 1, dn), bt = 0; bt < F; bt++)
            fe[2 * bt + 1] = 5, fe[2 * bt] = Ge(bt, 5);
          ct = new Et(je, Re, K + 1, Y, J), mt = new Et(fe, Ve, 0, F, J), at = new Et(new Array(0), We, 0, q, me);
        }(), xt = !0), Ne.l_desc = new Je(Ne.dyn_ltree, ct), Ne.d_desc = new Je(Ne.dyn_dtree, mt), Ne.bl_desc = new Je(Ne.bl_tree, at), Ne.bi_buf = 0, Ne.bi_valid = 0, ot(Ne);
      }, re._tr_stored_block = He, re._tr_flush_block = function(Ne, bt, Ut, Zt) {
        var rt, Xt, dn = 0;
        0 < Ne.level ? (Ne.strm.data_type === 2 && (Ne.strm.data_type = function(an) {
          var Rn, xr = 4093624447;
          for (Rn = 0; Rn <= 31; Rn++, xr >>>= 1)
            if (1 & xr && an.dyn_ltree[2 * Rn] !== 0)
              return C;
          if (an.dyn_ltree[18] !== 0 || an.dyn_ltree[20] !== 0 || an.dyn_ltree[26] !== 0)
            return p;
          for (Rn = 32; Rn < K; Rn++)
            if (an.dyn_ltree[2 * Rn] !== 0)
              return p;
          return C;
        }(Ne)), wn(Ne, Ne.l_desc), wn(Ne, Ne.d_desc), dn = function(an) {
          var Rn;
          for (ge(an, an.dyn_ltree, an.l_desc.max_code), ge(an, an.dyn_dtree, an.d_desc.max_code), wn(an, an.bl_desc), Rn = q - 1; 3 <= Rn && an.bl_tree[2 * le[Rn] + 1] === 0; Rn--)
            ;
          return an.opt_len += 3 * (Rn + 1) + 5 + 5 + 4, Rn;
        }(Ne), rt = Ne.opt_len + 3 + 7 >>> 3, (Xt = Ne.static_len + 3 + 7 >>> 3) <= rt && (rt = Xt)) : rt = Xt = Ut + 5, Ut + 4 <= rt && bt !== -1 ? He(Ne, bt, Ut, Zt) : Ne.strategy === 4 || Xt === rt ? (Dt(Ne, 2 + (Zt ? 1 : 0), 3), Fn(Ne, je, fe)) : (Dt(Ne, 4 + (Zt ? 1 : 0), 3), function(an, Rn, xr, hr) {
          var Vr;
          for (Dt(an, Rn - 257, 5), Dt(an, xr - 1, 5), Dt(an, hr - 4, 4), Vr = 0; Vr < hr; Vr++)
            Dt(an, an.bl_tree[2 * le[Vr] + 1], 3);
          Wt(an, an.dyn_ltree, Rn - 1), Wt(an, an.dyn_dtree, xr - 1);
        }(Ne, Ne.l_desc.max_code + 1, Ne.d_desc.max_code + 1, dn + 1), Fn(Ne, Ne.dyn_ltree, Ne.dyn_dtree)), ot(Ne), Zt && Kt(Ne);
      }, re._tr_tally = function(Ne, bt, Ut) {
        return Ne.pending_buf[Ne.d_buf + 2 * Ne.last_lit] = bt >>> 8 & 255, Ne.pending_buf[Ne.d_buf + 2 * Ne.last_lit + 1] = 255 & bt, Ne.pending_buf[Ne.l_buf + Ne.last_lit] = 255 & Ut, Ne.last_lit++, bt === 0 ? Ne.dyn_ltree[2 * Ut]++ : (Ne.matches++, bt--, Ne.dyn_ltree[2 * (Z[Ut] + K + 1)]++, Ne.dyn_dtree[2 * ce(bt)]++), Ne.last_lit === Ne.lit_bufsize - 1;
      }, re._tr_align = function(Ne) {
        Dt(Ne, 2, 3), Be(Ne, Ee, je), function(bt) {
          bt.bi_valid === 16 ? (Ht(bt, bt.bi_buf), bt.bi_buf = 0, bt.bi_valid = 0) : 8 <= bt.bi_valid && (bt.pending_buf[bt.pending++] = 255 & bt.bi_buf, bt.bi_buf >>= 8, bt.bi_valid -= 8);
        }(Ne);
      };
    }, { "../utils/common": 41 }], 53: [function(L, k, re) {
      k.exports = function() {
        this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
      };
    }, {}], 54: [function(L, k, re) {
      (function(R) {
        (function(C, p) {
          if (!C.setImmediate) {
            var N, U, H, K, Y = 1, F = {}, q = !1, O = C.document, J = Object.getPrototypeOf && Object.getPrototypeOf(C);
            J = J && J.setTimeout ? J : C, N = {}.toString.call(C.process) === "[object process]" ? function(Le) {
              process.nextTick(function() {
                me(Le);
              });
            } : function() {
              if (C.postMessage && !C.importScripts) {
                var Le = !0, Oe = C.onmessage;
                return C.onmessage = function() {
                  Le = !1;
                }, C.postMessage("", "*"), C.onmessage = Oe, Le;
              }
            }() ? (K = "setImmediate$" + Math.random() + "$", C.addEventListener ? C.addEventListener("message", Ee, !1) : C.attachEvent("onmessage", Ee), function(Le) {
              C.postMessage(K + Le, "*");
            }) : C.MessageChannel ? ((H = new MessageChannel()).port1.onmessage = function(Le) {
              me(Le.data);
            }, function(Le) {
              H.port2.postMessage(Le);
            }) : O && "onreadystatechange" in O.createElement("script") ? (U = O.documentElement, function(Le) {
              var Oe = O.createElement("script");
              Oe.onreadystatechange = function() {
                me(Le), Oe.onreadystatechange = null, U.removeChild(Oe), Oe = null;
              }, U.appendChild(Oe);
            }) : function(Le) {
              setTimeout(me, 0, Le);
            }, J.setImmediate = function(Le) {
              typeof Le != "function" && (Le = new Function("" + Le));
              for (var Oe = new Array(arguments.length - 1), Te = 0; Te < Oe.length; Te++)
                Oe[Te] = arguments[Te + 1];
              var Re = { callback: Le, args: Oe };
              return F[Y] = Re, N(Y), Y++;
            }, J.clearImmediate = E;
          }
          function E(Le) {
            delete F[Le];
          }
          function me(Le) {
            if (q)
              setTimeout(me, 0, Le);
            else {
              var Oe = F[Le];
              if (Oe) {
                q = !0;
                try {
                  (function(Te) {
                    var Re = Te.callback, Ve = Te.args;
                    switch (Ve.length) {
                      case 0:
                        Re();
                        break;
                      case 1:
                        Re(Ve[0]);
                        break;
                      case 2:
                        Re(Ve[0], Ve[1]);
                        break;
                      case 3:
                        Re(Ve[0], Ve[1], Ve[2]);
                        break;
                      default:
                        Re.apply(p, Ve);
                    }
                  })(Oe);
                } finally {
                  E(Le), q = !1;
                }
              }
            }
          }
          function Ee(Le) {
            Le.source === C && typeof Le.data == "string" && Le.data.indexOf(K) === 0 && me(+Le.data.slice(K.length));
          }
        })(typeof self > "u" ? R === void 0 ? this : R : self);
      }).call(this, typeof Ku < "u" ? Ku : typeof self < "u" ? self : typeof window < "u" ? window : {});
    }, {}] }, {}, [10])(10);
  });
})(_f);
var Ip = _f.exports;
const pf = /* @__PURE__ */ wp(Ip);
var vf = !!(typeof global == "object" && global.process && global.process.release && global.process.release.name && typeof HTMLCanvasElement > "u"), Xi = vf ? global : self || {}, G = Xi.Dynamsoft || { Lib: {} };
(function(l) {
  l.Lib || (l.Lib = {}), l.DWT || (l.DWT = {}), l = l.Lib, l.bNode = vf, l.noop = function() {
  }, l._defaultAgent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36", l._defaultPlatform = "Win64", Xi && (Xi.Dynamsoft = G);
})(G);
(function() {
  var l = Xi.Dynamsoft, n = !0;
  function L(E, Ht) {
    var F, q, O, J, E = E.toLowerCase(), Ht = Ht.toLowerCase(), me = /harmonyos/g.test(E), Ee = (Ht == "linux" && 0 <= E.indexOf("windows nt") && (Ht = "harmonyos", me = !0), !me && /cros/.test(E)), Le = !me && /android/g.test(E) || /android/g.test(Ht), Oe = /iphone/g.test(E) || /iphone/g.test(Ht), Te = /macintosh/.test(E), Re = navigator.maxTouchPoints || 0, Te = /ipad/g.test(E) || (Te || Ht == "macintel") && 1 < Re, Re = /ucweb|ucbrowser/g.test(E), Ve = !Re && /nexus/g.test(E) && /version\/[\d.]+.*safari\//g.test(E), We = /playbook/g.test(E), mt = /hp-tablet/g.test(E), le = /blackberry|bb10/g.test(E), je = /symbian/g.test(E), fe = /windows phone/g.test(E), at = /mobile/g.test(E), Me = /arm64|aarch64/g.test(E), Z = /mips64/g.test(E), Ue = /huaweibrowser/g.test(E), ct = /jsdom/g.test(E), mt = We || Te || mt, at = !mt && !Ee && (Oe || Ve || le || je || fe || Le || me || at), ce = !at && !mt && !Ee, Ye = ce && /win32|win64|windows/.test(Ht), Et = Ye && /win64|x64/.test(E), Je = ce && /mac68k|macppc|macintosh|macintel/.test(E), ce = ce && /linux/.test(Ht), Ht = Ht == "win64" || /wow64|x86_64|win64|x64/.test(E) || Me || Z, Dt = /wow64/g.test(E), Be = !1, Ge = /opera|opr/g.test(E), lt = /360se/g.test(E), ot = /maxthon/g.test(E), Kt = /tencenttraveler|qqbrowser/g.test(E), Lt = /the world/g.test(E), bn = /metasr/g.test(E), Fn = /avant/g.test(E), wn = /firefox|fxios/g.test(E), ge = /gecko/g.test(E), Wt = !(wn || Ue) && /edge\/|edga\/|edgios\/|edg\//g.test(E), xt = !(le || We || Re || Ge || Wt || Ue || ct) && /chrome|crios/g.test(E), He = at || mt, Ne = !1, bt = "", Ut = 0, Zt = 0, rt = "";
    return !Ye || Wt || wn || xt || (q = E.indexOf("msie "), O = E.indexOf("trident"), J = E.indexOf("rv:"), Ne = q != -1 || O != -1 || J != -1), !(Je || Oe || Te || Ye || le || We || Ve) || Re || Ge || Wt || Ne || wn || (F = E.match(/version\/([\d.]+).*safari\//)) && (le || We || Ve || (xt = !(Be = n)), rt = F[1]), Wt ? (-1 < (q = E.indexOf("edge/")) ? q += 5 : -1 < (q = E.indexOf("edg/")) ? q += 4 : -1 < (q = E.indexOf("edga/")) ? q += 5 : -1 < (q = E.indexOf("edgios/")) && (q += 7), -1 < q && -1 < (F = (rt = E.slice(q)).indexOf(" ")) && (rt = rt.slice(0, F)), He = n) : wn ? (F = E.indexOf("firefox/"), He = n, -1 < F ? (F = -1 < (O = (rt = F = -1 < (O = (F = E.slice(F + 8)).indexOf(" ")) ? F.slice(0, O) : F).indexOf(".")) ? rt.slice(0, O) : F) < 27 && (He = !1) : (Oe || Te) && -1 < (F = E.indexOf("fxios/")) && (rt = F = (F = E.slice(F + 6)).slice(0, F.indexOf(" ")))) : Ne ? (J = E.indexOf("msie "), le = E.indexOf("trident"), We = E.indexOf("rv:"), J != -1 ? bt = F = (F = E.slice(J + 5)).slice(0, F.indexOf(";")) : We != -1 ? bt = F = (F = (F = E.slice(We + 3)).slice(0, F.indexOf(";"))).slice(0, F.indexOf(")")) : le != -1 && (bt = F = (F = E.slice(le + 7)).slice(0, F.indexOf(";"))), (bt === "" || 10 <= parseInt(bt)) && (He = n), rt = F) : Be ? (F = rt.indexOf("."), He = n, -1 < F && (F = rt.slice(0, F)) < 7 && (He = !1)) : Re ? (-1 < (F = E.indexOf("ucweb")) ? rt = E.slice(F + 5) : -1 < (F = E.indexOf("ucbrowser/")) && -1 < (F = (rt = E.slice(F + 10)).indexOf(" ")) && (rt = rt.slice(0, F)), He = n) : Ge ? (-1 < (F = E.indexOf("version/")) ? rt = E.slice(F + 8) : -1 < (F = E.indexOf("opr/")) && (rt = E.slice(F + 4)), He = n) : je ? (-1 < (F = E.indexOf("browserng/")) && (rt = E.slice(F + 10)), He = n) : fe ? (-1 < (F = E.indexOf("iemobile/")) && (rt = E.slice(F + 9)), He = n) : xt ? (-1 < (q = E.indexOf("chrome/")) ? -1 < (F = (rt = E.slice(q + 7)).indexOf(" ")) && (rt = rt.slice(0, F)) : -1 < (q = E.indexOf("crios/")) && -1 < (F = (rt = E.slice(q + 6)).indexOf(" ")) && (rt = rt.slice(0, F)), He = n, -1 < (F = rt.indexOf(".")) && (F = rt.slice(0, F)) < 27 && (He = !1)) : Ue ? (-1 < (O = E.indexOf("huaweibrowser")) && -1 < (F = (rt = E.slice(O + 14)).indexOf(" ")) && (rt = rt.slice(0, F)), He = n) : ct && (-1 < (J = E.indexOf("jsdom")) && -1 < (F = (rt = E.slice(J + 6)).indexOf(" ")) && (rt = rt.slice(0, F)), He = n), (Wt || Ne) && ((We = window && window.document) && We.documentMode ? Ut = We.documentMode : (Ut = 5, We.compatMode && We.compatMode == "CSS1Compat" && (Ut = 7)), Ne && (Zt = parseInt(rt))), (Je || ce) && (Ht = !0, Je && (F = E.match(/mac os x (\d+)(_|\.)(\d+)/)) && 3 < F.length && (F[1] == 10 && F[3] < 14 || F[1] < 10) && (Ht = !1)), { bUseUserAgent: !0, bWin: Ye, bMac: Je, bLinux: ce, bMobile: at = Ye || Je || ce || Me || Z ? at : !0, bPad: mt, bChromeOS: Ee, bHarmonyOS: me, bArm64: Me, bMips64: Z, bEmbed: Me || Z, bAndroid: Le, biPhone: Oe, biPad: Te, bWin64: Et, bWOW64: Dt, bOSx64: Ht, bIE: Ne, bEdge: Wt, bChrome: xt, bFirefox: wn, bSafari: Be, bOpera: Ge, bNexus: Ve, bUC: Re, b360SE: lt, bMaxthon: ot, bTencentTraveler: Kt, bTheWorld: Lt, bMetaSr: bn, bAvant: Fn, bHuaWeiBrowser: Ue, bJSDom: ct, bGecko: ge, bHTML5Edition: He, strBrowserVersion: rt, IEVersion: Zt, IEMode: Ut };
  }
  function k() {
  }
  var re, R, C, p, N = l.Lib, U = navigator;
  N.bNode ? (N.win = global, p = L(N._defaultAgent, N._defaultPlatform), l.navInfo = p) : (typeof window == "object" ? (N.win = window, N.doc = window.document) : N.win = {}, H = !0, C = void 0, "userAgentData" in U && (R = [], (re = U.userAgentData).platform && re.platform != "" && ("brands" in re && Array.isArray(re.brands) && 0 < re.brands.length ? R = re.brands : "uaList" in re && Array.isArray(re.uaList) && 0 < re.uaList.length && (R = re.uaList), 0 < R.length && (H = !1, C = re.platform.toLowerCase(), p = function(K, Y, F) {
    for (var q, O, J, E, me, Ee = !1, Le = !1, Oe = !1, Te = K.mobile, Re = !1, Ve = "", We = navigator.maxTouchPoints || 0, le = Y.length, je = 0; je < le; je++) {
      var fe = Y[je].brand.toLowerCase();
      if (0 <= fe.indexOf("chrome")) {
        Oe = !0, Ve = Y[je].version;
        break;
      }
      if (0 <= fe.indexOf("edge")) {
        Ee = !0, Ve = Y[je].version;
        break;
      }
      if (0 <= fe.indexOf("opera")) {
        Le = !0, Ve = Y[je].version;
        break;
      }
    }
    return Oe || Ee || Le || (Oe = !0, Ve = "100"), { bUseUserAgent: !1, bWin: q = /windows/g.test(F), bMac: /mac/g.test(F), bLinux: O = /linux/g.test(F), bAndroid: J = /android/g.test(F), bHarmonyOS: E = /harmony/g.test(F), bChromeOS: /(chromeos|chrome\sos)/g.test(F), bIE: !1, bEdge: Ee, bUC: !1, bPlaybook: !1, bBlackBerry: !1, bHuaWeiBrowser: !1, bOpera: Le, bFirefox: !1, bChrome: Oe, bJSDom: !1, biPhone: me = /iphone/g.test(F), biPad: Re = q || J || O || me ? Re : /macintel/g.test(F) && 1 < We, bPad: J && !K.mobile, bSafari: !1, bMobile: Te = J || E || me || Re ? !0 : Te, strBrowserVersion: Ve, bHTML5Edition: !0, IEVersion: 0, IEMode: 0 };
  }(re, R, C)))), H && (p = L(U.userAgent.toLowerCase(), C = U.platform.toLowerCase()), l.navInfo = p)), N.doc || (N.doc = { getElementById: k, getElementsByTagName: k, styleSheets: [] });
  var H = (H = (R = (re = N.win) == null ? void 0 : re.location) == null ? void 0 : R.protocol) || "http:";
  p.protocol = H, p.bSSL = H === "https:", p.bFileSystem = H !== "https:" && H !== "http:", l.navInfoSync = p;
})();
if (G.navInfoSync.bIE) {
  /* @preserve
   * The MIT License (MIT)
   * 
   * Copyright (c) 2013-2018 Petka Antonov
   * 
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   * 
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   * 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   * 
   */
  (function(l) {
    if (typeof exports == "object" && typeof module < "u")
      module.exports = l();
    else if (typeof define == "function" && define.amd)
      define([], l);
    else {
      var n;
      typeof window < "u" ? n = window : typeof global < "u" ? n = global : typeof self < "u" && (n = self), n.Promise = l();
    }
  })(function() {
    return function l(n, L, k) {
      function re(p, N) {
        if (!L[p]) {
          if (!n[p]) {
            var U = typeof _dereq_ == "function" && _dereq_;
            if (!N && U)
              return U(p, !0);
            if (R)
              return R(p, !0);
            var H = new Error("Cannot find module '" + p + "'");
            throw H.code = "MODULE_NOT_FOUND", H;
          }
          var K = L[p] = { exports: {} };
          n[p][0].call(K.exports, function(Y) {
            var F = n[p][1][Y];
            return re(F || Y);
          }, K, K.exports, l, n, L, k);
        }
        return L[p].exports;
      }
      for (var R = typeof _dereq_ == "function" && _dereq_, C = 0; C < k.length; C++)
        re(k[C]);
      return re;
    }({ 1: [function(l, n, L) {
      n.exports = function(k) {
        function re(C) {
          var p = new R(C), N = p.promise();
          return p.setHowMany(1), p.setUnwrap(), p.init(), N;
        }
        var R = k._SomePromiseArray;
        k.any = function(C) {
          return re(C);
        }, k.prototype.any = function() {
          return re(this);
        };
      };
    }, {}], 2: [function(l, n, L) {
      function k() {
        this._customScheduler = !1, this._isTickUsed = !1, this._lateQueue = new K(16), this._normalQueue = new K(16), this._haveDrainedQueues = !1;
        var Y = this;
        this.drainQueues = function() {
          Y._drainQueues();
        }, this._schedule = H;
      }
      function re(Y, F, q) {
        this._lateQueue.push(Y, F, q), this._queueTick();
      }
      function R(Y, F, q) {
        this._normalQueue.push(Y, F, q), this._queueTick();
      }
      function C(Y) {
        this._normalQueue._pushOne(Y), this._queueTick();
      }
      function p(Y) {
        for (; Y.length() > 0; )
          N(Y);
      }
      function N(Y) {
        var F = Y.shift();
        if (typeof F != "function")
          F._settlePromises();
        else {
          var q = Y.shift(), O = Y.shift();
          F.call(q, O);
        }
      }
      var U;
      try {
        throw new Error();
      } catch (Y) {
        U = Y;
      }
      var H = l("./schedule"), K = l("./queue");
      k.prototype.setScheduler = function(Y) {
        var F = this._schedule;
        return this._schedule = Y, this._customScheduler = !0, F;
      }, k.prototype.hasCustomScheduler = function() {
        return this._customScheduler;
      }, k.prototype.haveItemsQueued = function() {
        return this._isTickUsed || this._haveDrainedQueues;
      }, k.prototype.fatalError = function(Y, F) {
        F ? (process.stderr.write("Fatal " + (Y instanceof Error ? Y.stack : Y) + `
`), process.exit(2)) : this.throwLater(Y);
      }, k.prototype.throwLater = function(Y, F) {
        if (arguments.length === 1 && (F = Y, Y = function() {
          throw F;
        }), typeof setTimeout < "u")
          setTimeout(function() {
            Y(F);
          }, 0);
        else
          try {
            this._schedule(function() {
              Y(F);
            });
          } catch {
            throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`);
          }
      }, k.prototype.invokeLater = re, k.prototype.invoke = R, k.prototype.settlePromises = C, k.prototype._drainQueues = function() {
        p(this._normalQueue), this._reset(), this._haveDrainedQueues = !0, p(this._lateQueue);
      }, k.prototype._queueTick = function() {
        this._isTickUsed || (this._isTickUsed = !0, this._schedule(this.drainQueues));
      }, k.prototype._reset = function() {
        this._isTickUsed = !1;
      }, n.exports = k, n.exports.firstLineError = U;
    }, { "./queue": 26, "./schedule": 29 }], 3: [function(l, n, L) {
      n.exports = function(k, re, R, C) {
        var p = !1, N = function(Y, F) {
          this._reject(F);
        }, U = function(Y, F) {
          F.promiseRejectionQueued = !0, F.bindingPromise._then(N, N, null, this, Y);
        }, H = function(Y, F) {
          !(50397184 & this._bitField) && this._resolveCallback(F.target);
        }, K = function(Y, F) {
          F.promiseRejectionQueued || this._reject(Y);
        };
        k.prototype.bind = function(Y) {
          p || (p = !0, k.prototype._propagateFrom = C.propagateFromFunction(), k.prototype._boundValue = C.boundValueFunction());
          var F = R(Y), q = new k(re);
          q._propagateFrom(this, 1);
          var O = this._target();
          if (q._setBoundTo(F), F instanceof k) {
            var J = { promiseRejectionQueued: !1, promise: q, target: O, bindingPromise: F };
            O._then(re, U, void 0, q, J), F._then(H, K, void 0, q, J), q._setOnCancel(F);
          } else
            q._resolveCallback(O);
          return q;
        }, k.prototype._setBoundTo = function(Y) {
          Y !== void 0 ? (this._bitField = 2097152 | this._bitField, this._boundTo = Y) : this._bitField = -2097153 & this._bitField;
        }, k.prototype._isBound = function() {
          return (2097152 & this._bitField) === 2097152;
        }, k.bind = function(Y, F) {
          return k.resolve(F).bind(Y);
        };
      };
    }, {}], 4: [function(l, n, L) {
      function k() {
        try {
          Promise === R && (Promise = re);
        } catch {
        }
        return R;
      }
      var re;
      typeof Promise < "u" && (re = Promise);
      var R = l("./promise")();
      R.noConflict = k, n.exports = R;
    }, { "./promise": 22 }], 5: [function(l, n, L) {
      var k = Object.create;
      if (k) {
        var re = k(null), R = k(null);
        re[" size"] = R[" size"] = 0;
      }
      n.exports = function(C) {
        function p(q, O) {
          var J;
          if (q != null && (J = q[O]), typeof J != "function") {
            var E = "Object " + Y.classString(q) + " has no method '" + Y.toString(O) + "'";
            throw new C.TypeError(E);
          }
          return J;
        }
        function N(q) {
          var O = this.pop(), J = p(q, O);
          return J.apply(q, this);
        }
        function U(q) {
          return q[this];
        }
        function H(q) {
          var O = +this;
          return 0 > O && (O = Math.max(0, O + q.length)), q[O];
        }
        var K, Y = l("./util"), F = Y.canEvaluate;
        Y.isIdentifier, C.prototype.call = function(q) {
          var O = [].slice.call(arguments, 1);
          return O.push(q), this._then(N, void 0, void 0, O, void 0);
        }, C.prototype.get = function(q) {
          var O, J = typeof q == "number";
          if (J)
            O = H;
          else if (F) {
            var E = K(q);
            O = E !== null ? E : U;
          } else
            O = U;
          return this._then(O, void 0, void 0, q, void 0);
        };
      };
    }, { "./util": 36 }], 6: [function(l, n, L) {
      n.exports = function(k, re, R, C) {
        var p = l("./util"), N = p.tryCatch, U = p.errorObj, H = k._async;
        k.prototype.break = k.prototype.cancel = function() {
          if (!C.cancellation())
            return this._warn("cancellation is disabled");
          for (var K = this, Y = K; K._isCancellable(); ) {
            if (!K._cancelBy(Y)) {
              Y._isFollowing() ? Y._followee().cancel() : Y._cancelBranched();
              break;
            }
            var F = K._cancellationParent;
            if (F == null || !F._isCancellable()) {
              K._isFollowing() ? K._followee().cancel() : K._cancelBranched();
              break;
            }
            K._isFollowing() && K._followee().cancel(), K._setWillBeCancelled(), Y = K, K = F;
          }
        }, k.prototype._branchHasCancelled = function() {
          this._branchesRemainingToCancel--;
        }, k.prototype._enoughBranchesHaveCancelled = function() {
          return this._branchesRemainingToCancel === void 0 || this._branchesRemainingToCancel <= 0;
        }, k.prototype._cancelBy = function(K) {
          return K === this ? (this._branchesRemainingToCancel = 0, this._invokeOnCancel(), !0) : (this._branchHasCancelled(), this._enoughBranchesHaveCancelled() ? (this._invokeOnCancel(), !0) : !1);
        }, k.prototype._cancelBranched = function() {
          this._enoughBranchesHaveCancelled() && this._cancel();
        }, k.prototype._cancel = function() {
          this._isCancellable() && (this._setCancelled(), H.invoke(this._cancelPromises, this, void 0));
        }, k.prototype._cancelPromises = function() {
          this._length() > 0 && this._settlePromises();
        }, k.prototype._unsetOnCancel = function() {
          this._onCancelField = void 0;
        }, k.prototype._isCancellable = function() {
          return this.isPending() && !this._isCancelled();
        }, k.prototype.isCancellable = function() {
          return this.isPending() && !this.isCancelled();
        }, k.prototype._doInvokeOnCancel = function(K, Y) {
          if (p.isArray(K))
            for (var F = 0; F < K.length; ++F)
              this._doInvokeOnCancel(K[F], Y);
          else if (K !== void 0)
            if (typeof K == "function") {
              if (!Y) {
                var q = N(K).call(this._boundValue());
                q === U && (this._attachExtraTrace(q.e), H.throwLater(q.e));
              }
            } else
              K._resultCancelled(this);
        }, k.prototype._invokeOnCancel = function() {
          var K = this._onCancel();
          this._unsetOnCancel(), H.invoke(this._doInvokeOnCancel, this, K);
        }, k.prototype._invokeInternalOnCancel = function() {
          this._isCancellable() && (this._doInvokeOnCancel(this._onCancel(), !0), this._unsetOnCancel());
        }, k.prototype._resultCancelled = function() {
          this.cancel();
        };
      };
    }, { "./util": 36 }], 7: [function(l, n, L) {
      n.exports = function(k) {
        function re(U, H, K) {
          return function(Y) {
            var F = K._boundValue();
            e:
              for (var q = 0; q < U.length; ++q) {
                var O = U[q];
                if (O === Error || O != null && O.prototype instanceof Error) {
                  if (Y instanceof O)
                    return p(H).call(F, Y);
                } else if (typeof O == "function") {
                  var J = p(O).call(F, Y);
                  if (J === N)
                    return J;
                  if (J)
                    return p(H).call(F, Y);
                } else if (R.isObject(Y)) {
                  for (var E = C(O), me = 0; me < E.length; ++me) {
                    var Ee = E[me];
                    if (O[Ee] != Y[Ee])
                      continue e;
                  }
                  return p(H).call(F, Y);
                }
              }
            return k;
          };
        }
        var R = l("./util"), C = l("./es5").keys, p = R.tryCatch, N = R.errorObj;
        return re;
      };
    }, { "./es5": 13, "./util": 36 }], 8: [function(l, n, L) {
      n.exports = function(k) {
        function re() {
          this._trace = new re.CapturedTrace(C());
        }
        function R() {
          return p ? new re() : void 0;
        }
        function C() {
          var U = N.length - 1;
          return U >= 0 ? N[U] : void 0;
        }
        var p = !1, N = [];
        return k.prototype._promiseCreated = function() {
        }, k.prototype._pushContext = function() {
        }, k.prototype._popContext = function() {
          return null;
        }, k._peekContext = k.prototype._peekContext = function() {
        }, re.prototype._pushContext = function() {
          this._trace !== void 0 && (this._trace._promiseCreated = null, N.push(this._trace));
        }, re.prototype._popContext = function() {
          if (this._trace !== void 0) {
            var U = N.pop(), H = U._promiseCreated;
            return U._promiseCreated = null, H;
          }
          return null;
        }, re.CapturedTrace = null, re.create = R, re.deactivateLongStackTraces = function() {
        }, re.activateLongStackTraces = function() {
          var U = k.prototype._pushContext, H = k.prototype._popContext, K = k._peekContext, Y = k.prototype._peekContext, F = k.prototype._promiseCreated;
          re.deactivateLongStackTraces = function() {
            k.prototype._pushContext = U, k.prototype._popContext = H, k._peekContext = K, k.prototype._peekContext = Y, k.prototype._promiseCreated = F, p = !1;
          }, p = !0, k.prototype._pushContext = re.prototype._pushContext, k.prototype._popContext = re.prototype._popContext, k._peekContext = k.prototype._peekContext = C, k.prototype._promiseCreated = function() {
            var q = this._peekContext();
            q && q._promiseCreated == null && (q._promiseCreated = this);
          };
        }, re;
      };
    }, {}], 9: [function(l, n, L) {
      n.exports = function(k, re, R, C) {
        function p(It, Mt) {
          return { promise: Mt };
        }
        function N() {
          return !1;
        }
        function U(It, Mt, Yt) {
          var $t = this;
          try {
            It(Mt, Yt, function(Pn) {
              if (typeof Pn != "function")
                throw new TypeError("onCancel must be a function, got: " + lt.toString(Pn));
              $t._attachCancellationCallback(Pn);
            });
          } catch (Pn) {
            return Pn;
          }
        }
        function H(It) {
          if (!this._isCancellable())
            return this;
          var Mt = this._onCancel();
          Mt !== void 0 ? lt.isArray(Mt) ? Mt.push(It) : this._setOnCancel([Mt, It]) : this._setOnCancel(It);
        }
        function K() {
          return this._onCancelField;
        }
        function Y(It) {
          this._onCancelField = It;
        }
        function F() {
          this._cancellationParent = void 0, this._onCancelField = void 0;
        }
        function q(It, Mt) {
          if (1 & Mt) {
            this._cancellationParent = It;
            var Yt = It._branchesRemainingToCancel;
            Yt === void 0 && (Yt = 0), It._branchesRemainingToCancel = Yt + 1;
          }
          2 & Mt && It._isBound() && this._setBoundTo(It._boundTo);
        }
        function O(It, Mt) {
          2 & Mt && It._isBound() && this._setBoundTo(It._boundTo);
        }
        function J() {
          var It = this._boundTo;
          return It !== void 0 && It instanceof k ? It.isFulfilled() ? It.value() : void 0 : It;
        }
        function E() {
          this._trace = new Et(this._peekContext());
        }
        function me(It, Mt) {
          if (Kt(It)) {
            var Yt = this._trace;
            if (Yt !== void 0 && Mt && (Yt = Yt._parent), Yt !== void 0)
              Yt.attachExtraTrace(It);
            else if (!It.__stackCleaned__) {
              var $t = fe(It);
              lt.notEnumerableProp(It, "stack", $t.message + `
` + $t.stack.join(`
`)), lt.notEnumerableProp(It, "__stackCleaned__", !0);
            }
          }
        }
        function Ee() {
          this._trace = void 0;
        }
        function Le(It, Mt, Yt, $t, Pn) {
          if (It === void 0 && Mt !== null && bt) {
            if (Pn !== void 0 && Pn._returnedNonUndefined() || !(65535 & $t._bitField))
              return;
            Yt && (Yt += " ");
            var nr = "", _r = "";
            if (Mt._trace) {
              for (var vr = Mt._trace.stack.split(`
`), Fr = le(vr), Or = Fr.length - 1; Or >= 0; --Or) {
                var Jr = Fr[Or];
                if (!bn.test(Jr)) {
                  var $n = Jr.match(Fn);
                  $n && (nr = "at " + $n[1] + ":" + $n[2] + ":" + $n[3] + " ");
                  break;
                }
              }
              if (Fr.length > 0) {
                for (var no = Fr[0], Or = 0; Or < vr.length; ++Or)
                  if (vr[Or] === no) {
                    Or > 0 && (_r = `
` + vr[Or - 1]);
                    break;
                  }
              }
            }
            var Li = "a promise was created in a " + Yt + "handler " + nr + "but was not returned from it, see http://goo.gl/rRqMUw" + _r;
            $t._warn(Li, !0, Mt);
          }
        }
        function Oe(It, Mt) {
          var Yt = It + " is deprecated and will be removed in a future version.";
          return Mt && (Yt += " Use " + Mt + " instead."), Te(Yt);
        }
        function Te(It, Mt, Yt) {
          if (Zn.warnings) {
            var $t, Pn = new Ge(It);
            if (Mt)
              Yt._attachExtraTrace(Pn);
            else if (Zn.longStackTraces && ($t = k._peekContext()))
              $t.attachExtraTrace(Pn);
            else {
              var nr = fe(Pn);
              Pn.stack = nr.message + `
` + nr.stack.join(`
`);
            }
            an("warning", Pn) || Me(Pn, "", !0);
          }
        }
        function Re(It, Mt) {
          for (var Yt = 0; Yt < Mt.length - 1; ++Yt)
            Mt[Yt].push("From previous event:"), Mt[Yt] = Mt[Yt].join(`
`);
          return Yt < Mt.length && (Mt[Yt] = Mt[Yt].join(`
`)), It + `
` + Mt.join(`
`);
        }
        function Ve(It) {
          for (var Mt = 0; Mt < It.length; ++Mt)
            (It[Mt].length === 0 || Mt + 1 < It.length && It[Mt][0] === It[Mt + 1][0]) && (It.splice(Mt, 1), Mt--);
        }
        function We(It) {
          for (var Mt = It[0], Yt = 1; Yt < It.length; ++Yt) {
            for (var $t = It[Yt], Pn = Mt.length - 1, nr = Mt[Pn], _r = -1, vr = $t.length - 1; vr >= 0; --vr)
              if ($t[vr] === nr) {
                _r = vr;
                break;
              }
            for (var vr = _r; vr >= 0; --vr) {
              var Fr = $t[vr];
              if (Mt[Pn] !== Fr)
                break;
              Mt.pop(), Pn--;
            }
            Mt = $t;
          }
        }
        function le(It) {
          for (var Mt = [], Yt = 0; Yt < It.length; ++Yt) {
            var $t = It[Yt], Pn = $t === "    (No stack trace)" || wn.test($t), nr = Pn && xr($t);
            Pn && !nr && (Wt && $t.charAt(0) !== " " && ($t = "    " + $t), Mt.push($t));
          }
          return Mt;
        }
        function je(It) {
          for (var Mt = It.stack.replace(/\s+$/g, "").split(`
`), Yt = 0; Yt < Mt.length; ++Yt) {
            var $t = Mt[Yt];
            if ($t === "    (No stack trace)" || wn.test($t))
              break;
          }
          return Yt > 0 && It.name != "SyntaxError" && (Mt = Mt.slice(Yt)), Mt;
        }
        function fe(It) {
          var Mt = It.stack, Yt = It.toString();
          return Mt = typeof Mt == "string" && Mt.length > 0 ? je(It) : ["    (No stack trace)"], { message: Yt, stack: It.name == "SyntaxError" ? Mt : le(Mt) };
        }
        function Me(It, Mt, Yt) {
          if (typeof console < "u") {
            var $t;
            if (lt.isObject(It)) {
              var Pn = It.stack;
              $t = Mt + ge(Pn, It);
            } else
              $t = Mt + String(It);
            typeof Ht == "function" ? Ht($t, Yt) : (typeof console.log == "function" || typeof console.log == "object") && console.log($t);
          }
        }
        function Z(It, Mt, Yt, $t) {
          var Pn = !1;
          try {
            typeof Mt == "function" && (Pn = !0, It === "rejectionHandled" ? Mt($t) : Mt(Yt, $t));
          } catch (nr) {
            Be.throwLater(nr);
          }
          It === "unhandledRejection" ? an(It, Yt, $t) || Pn || Me(Yt, "Unhandled rejection ") : an(It, $t);
        }
        function Ue(It) {
          var Mt;
          if (typeof It == "function")
            Mt = "[function " + (It.name || "anonymous") + "]";
          else {
            Mt = It && typeof It.toString == "function" ? It.toString() : lt.toString(It);
            var Yt = /\[object [a-zA-Z0-9$_]+\]/;
            if (Yt.test(Mt))
              try {
                var $t = JSON.stringify(It);
                Mt = $t;
              } catch {
              }
            Mt.length === 0 && (Mt = "(empty array)");
          }
          return "(<" + ct(Mt) + ">, no stack trace)";
        }
        function ct(It) {
          var Mt = 41;
          return It.length < Mt ? It : It.substr(0, Mt - 3) + "...";
        }
        function mt() {
          return typeof Vr == "function";
        }
        function at(It) {
          var Mt = It.match(hr);
          return Mt ? { fileName: Mt[1], line: parseInt(Mt[2], 10) } : void 0;
        }
        function Ye(It, Mt) {
          if (mt()) {
            for (var Yt, $t, Pn = (It.stack || "").split(`
`), nr = (Mt.stack || "").split(`
`), _r = -1, vr = -1, Fr = 0; Fr < Pn.length; ++Fr) {
              var Or = at(Pn[Fr]);
              if (Or) {
                Yt = Or.fileName, _r = Or.line;
                break;
              }
            }
            for (var Fr = 0; Fr < nr.length; ++Fr) {
              var Or = at(nr[Fr]);
              if (Or) {
                $t = Or.fileName, vr = Or.line;
                break;
              }
            }
            0 > _r || 0 > vr || !Yt || !$t || Yt !== $t || _r >= vr || (xr = function(Jr) {
              if (Lt.test(Jr))
                return !0;
              var $n = at(Jr);
              return !!($n && $n.fileName === Yt && _r <= $n.line && $n.line <= vr);
            });
          }
        }
        function Et(It) {
          this._parent = It, this._promisesCreated = 0;
          var Mt = this._length = 1 + (It === void 0 ? 0 : It._length);
          Vr(this, Et), Mt > 32 && this.uncycle();
        }
        var Je, ce, Ht, Dt, Be = k._async, Ge = l("./errors").Warning, lt = l("./util"), ot = l("./es5"), Kt = lt.canAttachTrace, Lt = /[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/, bn = /\((?:timers\.js):\d+:\d+\)/, Fn = /[\/<\(](.+?):(\d+):(\d+)\)?\s*$/, wn = null, ge = null, Wt = !1, xt = !(lt.env("BLUEBIRD_DEBUG") == 0 || !lt.env("BLUEBIRD_DEBUG") && lt.env("NODE_ENV") !== "development"), He = !(lt.env("BLUEBIRD_WARNINGS") == 0 || !xt && !lt.env("BLUEBIRD_WARNINGS")), Ne = !(lt.env("BLUEBIRD_LONG_STACK_TRACES") == 0 || !xt && !lt.env("BLUEBIRD_LONG_STACK_TRACES")), bt = lt.env("BLUEBIRD_W_FORGOTTEN_RETURN") != 0 && (He || !!lt.env("BLUEBIRD_W_FORGOTTEN_RETURN"));
        (function() {
          function It() {
            for (var $t = 0; $t < Yt.length; ++$t)
              Yt[$t]._notifyUnhandledRejection();
            Mt();
          }
          function Mt() {
            Yt.length = 0;
          }
          var Yt = [];
          Dt = function($t) {
            Yt.push($t), setTimeout(It, 1);
          }, ot.defineProperty(k, "_unhandledRejectionCheck", { value: It }), ot.defineProperty(k, "_unhandledRejectionClear", { value: Mt });
        })(), k.prototype.suppressUnhandledRejections = function() {
          var It = this._target();
          It._bitField = -1048577 & It._bitField | 524288;
        }, k.prototype._ensurePossibleRejectionHandled = function() {
          !(524288 & this._bitField) && (this._setRejectionIsUnhandled(), Dt(this));
        }, k.prototype._notifyUnhandledRejectionIsHandled = function() {
          Z("rejectionHandled", Je, void 0, this);
        }, k.prototype._setReturnedNonUndefined = function() {
          this._bitField = 268435456 | this._bitField;
        }, k.prototype._returnedNonUndefined = function() {
          return (268435456 & this._bitField) !== 0;
        }, k.prototype._notifyUnhandledRejection = function() {
          if (this._isRejectionUnhandled()) {
            var It = this._settledValue();
            this._setUnhandledRejectionIsNotified(), Z("unhandledRejection", ce, It, this);
          }
        }, k.prototype._setUnhandledRejectionIsNotified = function() {
          this._bitField = 262144 | this._bitField;
        }, k.prototype._unsetUnhandledRejectionIsNotified = function() {
          this._bitField = -262145 & this._bitField;
        }, k.prototype._isUnhandledRejectionNotified = function() {
          return (262144 & this._bitField) > 0;
        }, k.prototype._setRejectionIsUnhandled = function() {
          this._bitField = 1048576 | this._bitField;
        }, k.prototype._unsetRejectionIsUnhandled = function() {
          this._bitField = -1048577 & this._bitField, this._isUnhandledRejectionNotified() && (this._unsetUnhandledRejectionIsNotified(), this._notifyUnhandledRejectionIsHandled());
        }, k.prototype._isRejectionUnhandled = function() {
          return (1048576 & this._bitField) > 0;
        }, k.prototype._warn = function(It, Mt, Yt) {
          return Te(It, Mt, Yt || this);
        }, k.onPossiblyUnhandledRejection = function(It) {
          var Mt = k._getContext();
          ce = lt.contextBind(Mt, It);
        }, k.onUnhandledRejectionHandled = function(It) {
          var Mt = k._getContext();
          Je = lt.contextBind(Mt, It);
        };
        var Ut = function() {
        };
        k.longStackTraces = function() {
          if (Be.haveItemsQueued() && !Zn.longStackTraces)
            throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);
          if (!Zn.longStackTraces && mt()) {
            var It = k.prototype._captureStackTrace, Mt = k.prototype._attachExtraTrace, Yt = k.prototype._dereferenceTrace;
            Zn.longStackTraces = !0, Ut = function() {
              if (Be.haveItemsQueued() && !Zn.longStackTraces)
                throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);
              k.prototype._captureStackTrace = It, k.prototype._attachExtraTrace = Mt, k.prototype._dereferenceTrace = Yt, re.deactivateLongStackTraces(), Zn.longStackTraces = !1;
            }, k.prototype._captureStackTrace = E, k.prototype._attachExtraTrace = me, k.prototype._dereferenceTrace = Ee, re.activateLongStackTraces();
          }
        }, k.hasLongStackTraces = function() {
          return Zn.longStackTraces && mt();
        };
        var Zt = { unhandledrejection: { before: function() {
          var It = lt.global.onunhandledrejection;
          return lt.global.onunhandledrejection = null, It;
        }, after: function(It) {
          lt.global.onunhandledrejection = It;
        } }, rejectionhandled: { before: function() {
          var It = lt.global.onrejectionhandled;
          return lt.global.onrejectionhandled = null, It;
        }, after: function(It) {
          lt.global.onrejectionhandled = It;
        } } }, rt = function() {
          var It = function(Yt, $t) {
            if (!Yt)
              return !lt.global.dispatchEvent($t);
            var Pn;
            try {
              return Pn = Yt.before(), !lt.global.dispatchEvent($t);
            } finally {
              Yt.after(Pn);
            }
          };
          try {
            if (typeof CustomEvent == "function") {
              var Mt = new CustomEvent("CustomEvent");
              return lt.global.dispatchEvent(Mt), function($t, Pn) {
                $t = $t.toLowerCase();
                var nr = { detail: Pn, cancelable: !0 }, _r = new CustomEvent($t, nr);
                return ot.defineProperty(_r, "promise", { value: Pn.promise }), ot.defineProperty(_r, "reason", { value: Pn.reason }), It(Zt[$t], _r);
              };
            }
            if (typeof Event == "function") {
              var Mt = new Event("CustomEvent");
              return lt.global.dispatchEvent(Mt), function($t, Pn) {
                $t = $t.toLowerCase();
                var nr = new Event($t, { cancelable: !0 });
                return nr.detail = Pn, ot.defineProperty(nr, "promise", { value: Pn.promise }), ot.defineProperty(nr, "reason", { value: Pn.reason }), It(Zt[$t], nr);
              };
            }
            var Mt = document.createEvent("CustomEvent");
            return Mt.initCustomEvent("testingtheevent", !1, !0, {}), lt.global.dispatchEvent(Mt), function(Yt, $t) {
              Yt = Yt.toLowerCase();
              var Pn = document.createEvent("CustomEvent");
              return Pn.initCustomEvent(Yt, !1, !0, $t), It(Zt[Yt], Pn);
            };
          } catch {
          }
          return function() {
            return !1;
          };
        }(), Xt = function() {
          return lt.isNode ? function() {
            return process.emit.apply(process, arguments);
          } : lt.global ? function(It) {
            var Mt = "on" + It.toLowerCase(), Yt = lt.global[Mt];
            return Yt ? (Yt.apply(lt.global, [].slice.call(arguments, 1)), !0) : !1;
          } : function() {
            return !1;
          };
        }(), dn = { promiseCreated: p, promiseFulfilled: p, promiseRejected: p, promiseResolved: p, promiseCancelled: p, promiseChained: function(It, Mt, Yt) {
          return { promise: Mt, child: Yt };
        }, warning: function(It, Mt) {
          return { warning: Mt };
        }, unhandledRejection: function(It, Mt, Yt) {
          return { reason: Mt, promise: Yt };
        }, rejectionHandled: p }, an = function(It) {
          var Mt = !1;
          try {
            Mt = Xt.apply(null, arguments);
          } catch ($t) {
            Be.throwLater($t), Mt = !0;
          }
          var Yt = !1;
          try {
            Yt = rt(It, dn[It].apply(null, arguments));
          } catch ($t) {
            Be.throwLater($t), Yt = !0;
          }
          return Yt || Mt;
        };
        k.config = function(It) {
          if (It = Object(It), "longStackTraces" in It && (It.longStackTraces ? k.longStackTraces() : !It.longStackTraces && k.hasLongStackTraces() && Ut()), "warnings" in It) {
            var Mt = It.warnings;
            Zn.warnings = !!Mt, bt = Zn.warnings, lt.isObject(Mt) && "wForgottenReturn" in Mt && (bt = !!Mt.wForgottenReturn);
          }
          if ("cancellation" in It && It.cancellation && !Zn.cancellation) {
            if (Be.haveItemsQueued())
              throw new Error("cannot enable cancellation after promises are in use");
            k.prototype._clearCancellationData = F, k.prototype._propagateFrom = q, k.prototype._onCancel = K, k.prototype._setOnCancel = Y, k.prototype._attachCancellationCallback = H, k.prototype._execute = U, Rn = q, Zn.cancellation = !0;
          }
          if ("monitoring" in It && (It.monitoring && !Zn.monitoring ? (Zn.monitoring = !0, k.prototype._fireEvent = an) : !It.monitoring && Zn.monitoring && (Zn.monitoring = !1, k.prototype._fireEvent = N)), "asyncHooks" in It && lt.nodeSupportsAsyncResource) {
            var Yt = Zn.asyncHooks, $t = !!It.asyncHooks;
            Yt !== $t && (Zn.asyncHooks = $t, $t ? R() : C());
          }
          return k;
        }, k.prototype._fireEvent = N, k.prototype._execute = function(It, Mt, Yt) {
          try {
            It(Mt, Yt);
          } catch ($t) {
            return $t;
          }
        }, k.prototype._onCancel = function() {
        }, k.prototype._setOnCancel = function(It) {
        }, k.prototype._attachCancellationCallback = function(It) {
        }, k.prototype._captureStackTrace = function() {
        }, k.prototype._attachExtraTrace = function() {
        }, k.prototype._dereferenceTrace = function() {
        }, k.prototype._clearCancellationData = function() {
        }, k.prototype._propagateFrom = function(It, Mt) {
        };
        var Rn = O, xr = function() {
          return !1;
        }, hr = /[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;
        lt.inherits(Et, Error), re.CapturedTrace = Et, Et.prototype.uncycle = function() {
          var It = this._length;
          if (!(2 > It)) {
            for (var Mt = [], Yt = {}, $t = 0, Pn = this; Pn !== void 0; ++$t)
              Mt.push(Pn), Pn = Pn._parent;
            It = this._length = $t;
            for (var $t = It - 1; $t >= 0; --$t) {
              var nr = Mt[$t].stack;
              Yt[nr] === void 0 && (Yt[nr] = $t);
            }
            for (var $t = 0; It > $t; ++$t) {
              var _r = Mt[$t].stack, vr = Yt[_r];
              if (vr !== void 0 && vr !== $t) {
                vr > 0 && (Mt[vr - 1]._parent = void 0, Mt[vr - 1]._length = 1), Mt[$t]._parent = void 0, Mt[$t]._length = 1;
                var Fr = $t > 0 ? Mt[$t - 1] : this;
                It - 1 > vr ? (Fr._parent = Mt[vr + 1], Fr._parent.uncycle(), Fr._length = Fr._parent._length + 1) : (Fr._parent = void 0, Fr._length = 1);
                for (var Or = Fr._length + 1, Jr = $t - 2; Jr >= 0; --Jr)
                  Mt[Jr]._length = Or, Or++;
                return;
              }
            }
          }
        }, Et.prototype.attachExtraTrace = function(It) {
          if (!It.__stackCleaned__) {
            this.uncycle();
            for (var Mt = fe(It), Yt = Mt.message, $t = [Mt.stack], Pn = this; Pn !== void 0; )
              $t.push(le(Pn.stack.split(`
`))), Pn = Pn._parent;
            We($t), Ve($t), lt.notEnumerableProp(It, "stack", Re(Yt, $t)), lt.notEnumerableProp(It, "__stackCleaned__", !0);
          }
        };
        var Vr = function() {
          var It = /^\s*at\s*/, Mt = function(nr, _r) {
            return typeof nr == "string" ? nr : _r.name !== void 0 && _r.message !== void 0 ? _r.toString() : Ue(_r);
          };
          if (typeof Error.stackTraceLimit == "number" && typeof Error.captureStackTrace == "function") {
            Error.stackTraceLimit += 6, wn = It, ge = Mt;
            var Yt = Error.captureStackTrace;
            return xr = function(nr) {
              return Lt.test(nr);
            }, function(nr, _r) {
              Error.stackTraceLimit += 6, Yt(nr, _r), Error.stackTraceLimit -= 6;
            };
          }
          var $t = new Error();
          if (typeof $t.stack == "string" && $t.stack.split(`
`)[0].indexOf("stackDetection@") >= 0)
            return wn = /@/, ge = Mt, Wt = !0, function(nr) {
              nr.stack = new Error().stack;
            };
          var Pn;
          try {
            throw new Error();
          } catch (nr) {
            Pn = "stack" in nr;
          }
          return "stack" in $t || !Pn || typeof Error.stackTraceLimit != "number" ? (ge = function(nr, _r) {
            return typeof nr == "string" ? nr : typeof _r != "object" && typeof _r != "function" || _r.name === void 0 || _r.message === void 0 ? Ue(_r) : _r.toString();
          }, null) : (wn = It, ge = Mt, function(nr) {
            Error.stackTraceLimit += 6;
            try {
              throw new Error();
            } catch (_r) {
              nr.stack = _r.stack;
            }
            Error.stackTraceLimit -= 6;
          });
        }();
        typeof console < "u" && typeof console.warn < "u" && (Ht = function(It) {
          console.warn(It);
        }, lt.isNode && process.stderr.isTTY ? Ht = function(It, Mt) {
          var Yt = Mt ? "\x1B[33m" : "\x1B[31m";
          console.warn(Yt + It + `\x1B[0m
`);
        } : lt.isNode || typeof new Error().stack != "string" || (Ht = function(It, Mt) {
          console.warn("%c" + It, Mt ? "color: darkorange" : "color: red");
        }));
        var Zn = { warnings: He, longStackTraces: !1, cancellation: !1, monitoring: !1, asyncHooks: !1 };
        return Ne && k.longStackTraces(), { asyncHooks: function() {
          return Zn.asyncHooks;
        }, longStackTraces: function() {
          return Zn.longStackTraces;
        }, warnings: function() {
          return Zn.warnings;
        }, cancellation: function() {
          return Zn.cancellation;
        }, monitoring: function() {
          return Zn.monitoring;
        }, propagateFromFunction: function() {
          return Rn;
        }, boundValueFunction: function() {
          return J;
        }, checkForgottenReturns: Le, setBounds: Ye, warn: Te, deprecated: Oe, CapturedTrace: Et, fireDomEvent: rt, fireGlobalEvent: Xt };
      };
    }, { "./errors": 12, "./es5": 13, "./util": 36 }], 10: [function(l, n, L) {
      n.exports = function(k) {
        function re() {
          return this.value;
        }
        function R() {
          throw this.reason;
        }
        k.prototype.return = k.prototype.thenReturn = function(C) {
          return C instanceof k && C.suppressUnhandledRejections(), this._then(re, void 0, void 0, { value: C }, void 0);
        }, k.prototype.throw = k.prototype.thenThrow = function(C) {
          return this._then(R, void 0, void 0, { reason: C }, void 0);
        }, k.prototype.catchThrow = function(C) {
          if (arguments.length <= 1)
            return this._then(void 0, R, void 0, { reason: C }, void 0);
          var p = arguments[1], N = function() {
            throw p;
          };
          return this.caught(C, N);
        }, k.prototype.catchReturn = function(C) {
          if (arguments.length <= 1)
            return C instanceof k && C.suppressUnhandledRejections(), this._then(void 0, re, void 0, { value: C }, void 0);
          var p = arguments[1];
          p instanceof k && p.suppressUnhandledRejections();
          var N = function() {
            return p;
          };
          return this.caught(C, N);
        };
      };
    }, {}], 11: [function(l, n, L) {
      n.exports = function(k, re) {
        function R() {
          return N(this);
        }
        function C(U, H) {
          return p(U, H, re, re);
        }
        var p = k.reduce, N = k.all;
        k.prototype.each = function(U) {
          return p(this, U, re, 0)._then(R, void 0, void 0, this, void 0);
        }, k.prototype.mapSeries = function(U) {
          return p(this, U, re, re);
        }, k.each = function(U, H) {
          return p(U, H, re, 0)._then(R, void 0, void 0, U, void 0);
        }, k.mapSeries = C;
      };
    }, {}], 12: [function(l, n, L) {
      function k(Le, Oe) {
        function Te(Re) {
          return this instanceof Te ? (K(this, "message", typeof Re == "string" ? Re : Oe), K(this, "name", Le), void (Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : Error.call(this))) : new Te(Re);
        }
        return H(Te, Error), Te;
      }
      function re(Le) {
        return this instanceof re ? (K(this, "name", "OperationalError"), K(this, "message", Le), this.cause = Le, this.isOperational = !0, void (Le instanceof Error ? (K(this, "message", Le.message), K(this, "stack", Le.stack)) : Error.captureStackTrace && Error.captureStackTrace(this, this.constructor))) : new re(Le);
      }
      var R, C, p = l("./es5"), N = p.freeze, U = l("./util"), H = U.inherits, K = U.notEnumerableProp, Y = k("Warning", "warning"), F = k("CancellationError", "cancellation error"), q = k("TimeoutError", "timeout error"), O = k("AggregateError", "aggregate error");
      try {
        R = TypeError, C = RangeError;
      } catch {
        R = k("TypeError", "type error"), C = k("RangeError", "range error");
      }
      for (var J = "join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "), E = 0; E < J.length; ++E)
        typeof Array.prototype[J[E]] == "function" && (O.prototype[J[E]] = Array.prototype[J[E]]);
      p.defineProperty(O.prototype, "length", { value: 0, configurable: !1, writable: !0, enumerable: !0 }), O.prototype.isOperational = !0;
      var me = 0;
      O.prototype.toString = function() {
        var Le = Array(4 * me + 1).join(" "), Oe = `
` + Le + `AggregateError of:
`;
        me++, Le = Array(4 * me + 1).join(" ");
        for (var Te = 0; Te < this.length; ++Te) {
          for (var Re = this[Te] === this ? "[Circular AggregateError]" : this[Te] + "", Ve = Re.split(`
`), We = 0; We < Ve.length; ++We)
            Ve[We] = Le + Ve[We];
          Re = Ve.join(`
`), Oe += Re + `
`;
        }
        return me--, Oe;
      }, H(re, Error);
      var Ee = Error.__BluebirdErrorTypes__;
      Ee || (Ee = N({ CancellationError: F, TimeoutError: q, OperationalError: re, RejectionError: re, AggregateError: O }), p.defineProperty(Error, "__BluebirdErrorTypes__", { value: Ee, writable: !1, enumerable: !1, configurable: !1 })), n.exports = { Error, TypeError: R, RangeError: C, CancellationError: Ee.CancellationError, OperationalError: Ee.OperationalError, TimeoutError: Ee.TimeoutError, AggregateError: Ee.AggregateError, Warning: Y };
    }, { "./es5": 13, "./util": 36 }], 13: [function(l, n, L) {
      var k = function() {
        return this === void 0;
      }();
      if (k)
        n.exports = { freeze: Object.freeze, defineProperty: Object.defineProperty, getDescriptor: Object.getOwnPropertyDescriptor, keys: Object.keys, names: Object.getOwnPropertyNames, getPrototypeOf: Object.getPrototypeOf, isArray: Array.isArray, isES5: k, propertyIsWritable: function(F, q) {
          var O = Object.getOwnPropertyDescriptor(F, q);
          return !(O && !O.writable && !O.set);
        } };
      else {
        var re = {}.hasOwnProperty, R = {}.toString, C = {}.constructor.prototype, p = function(F) {
          var q = [];
          for (var O in F)
            re.call(F, O) && q.push(O);
          return q;
        }, N = function(F, q) {
          return { value: F[q] };
        }, U = function(F, q, O) {
          return F[q] = O.value, F;
        }, H = function(F) {
          return F;
        }, K = function(F) {
          try {
            return Object(F).constructor.prototype;
          } catch {
            return C;
          }
        }, Y = function(F) {
          try {
            return R.call(F) === "[object Array]";
          } catch {
            return !1;
          }
        };
        n.exports = { isArray: Y, keys: p, names: p, defineProperty: U, getDescriptor: N, freeze: H, getPrototypeOf: K, isES5: k, propertyIsWritable: function() {
          return !0;
        } };
      }
    }, {}], 14: [function(l, n, L) {
      n.exports = function(k, re) {
        var R = k.map;
        k.prototype.filter = function(C, p) {
          return R(this, C, p, re);
        }, k.filter = function(C, p, N) {
          return R(C, p, N, re);
        };
      };
    }, {}], 15: [function(l, n, L) {
      n.exports = function(k, re, R) {
        function C(J, E, me) {
          this.promise = J, this.type = E, this.handler = me, this.called = !1, this.cancelPromise = null;
        }
        function p(J) {
          this.finallyHandler = J;
        }
        function N(J, E) {
          return J.cancelPromise != null ? (arguments.length > 1 ? J.cancelPromise._reject(E) : J.cancelPromise._cancel(), J.cancelPromise = null, !0) : !1;
        }
        function U() {
          return K.call(this, this.promise._target()._settledValue());
        }
        function H(J) {
          return N(this, J) ? void 0 : (q.e = J, q);
        }
        function K(J) {
          var E = this.promise, me = this.handler;
          if (!this.called) {
            this.called = !0;
            var Ee = this.isFinallyHandler() ? me.call(E._boundValue()) : me.call(E._boundValue(), J);
            if (Ee === R)
              return Ee;
            if (Ee !== void 0) {
              E._setReturnedNonUndefined();
              var Le = re(Ee, E);
              if (Le instanceof k) {
                if (this.cancelPromise != null) {
                  if (Le._isCancelled()) {
                    var Oe = new F("late cancellation observer");
                    return E._attachExtraTrace(Oe), q.e = Oe, q;
                  }
                  Le.isPending() && Le._attachCancellationCallback(new p(this));
                }
                return Le._then(U, H, void 0, this, void 0);
              }
            }
          }
          return E.isRejected() ? (N(this), q.e = J, q) : (N(this), J);
        }
        var Y = l("./util"), F = k.CancellationError, q = Y.errorObj, O = l("./catch_filter")(R);
        return C.prototype.isFinallyHandler = function() {
          return this.type === 0;
        }, p.prototype._resultCancelled = function() {
          N(this.finallyHandler);
        }, k.prototype._passThrough = function(J, E, me, Ee) {
          return typeof J != "function" ? this.then() : this._then(me, Ee, void 0, new C(this, E, J), void 0);
        }, k.prototype.lastly = k.prototype.finally = function(J) {
          return this._passThrough(J, 0, K, K);
        }, k.prototype.tap = function(J) {
          return this._passThrough(J, 1, K);
        }, k.prototype.tapCatch = function(J) {
          var E = arguments.length;
          if (E === 1)
            return this._passThrough(J, 1, void 0, K);
          var me, Ee = new Array(E - 1), Le = 0;
          for (me = 0; E - 1 > me; ++me) {
            var Oe = arguments[me];
            if (!Y.isObject(Oe))
              return k.reject(new TypeError("tapCatch statement predicate: expecting an object but got " + Y.classString(Oe)));
            Ee[Le++] = Oe;
          }
          Ee.length = Le;
          var Te = arguments[me];
          return this._passThrough(O(Ee, Te, this), 1, void 0, K);
        }, C;
      };
    }, { "./catch_filter": 7, "./util": 36 }], 16: [function(l, n, L) {
      n.exports = function(k, re, R, C, p, N) {
        function U(E, me, Ee) {
          for (var Le = 0; Le < me.length; ++Le) {
            Ee._pushContext();
            var Oe = O(me[Le])(E);
            if (Ee._popContext(), Oe === q) {
              Ee._pushContext();
              var Te = k.reject(q.e);
              return Ee._popContext(), Te;
            }
            var Re = C(Oe, Ee);
            if (Re instanceof k)
              return Re;
          }
          return null;
        }
        function H(E, me, Ee, Le) {
          if (N.cancellation()) {
            var Oe = new k(R), Te = this._finallyPromise = new k(R);
            this._promise = Oe.lastly(function() {
              return Te;
            }), Oe._captureStackTrace(), Oe._setOnCancel(this);
          } else {
            var Re = this._promise = new k(R);
            Re._captureStackTrace();
          }
          this._stack = Le, this._generatorFunction = E, this._receiver = me, this._generator = void 0, this._yieldHandlers = typeof Ee == "function" ? [Ee].concat(J) : J, this._yieldedPromise = null, this._cancellationPhase = !1;
        }
        var K = l("./errors"), Y = K.TypeError, F = l("./util"), q = F.errorObj, O = F.tryCatch, J = [];
        F.inherits(H, p), H.prototype._isResolved = function() {
          return this._promise === null;
        }, H.prototype._cleanup = function() {
          this._promise = this._generator = null, N.cancellation() && this._finallyPromise !== null && (this._finallyPromise._fulfill(), this._finallyPromise = null);
        }, H.prototype._promiseCancelled = function() {
          if (!this._isResolved()) {
            var E, me = typeof this._generator.return < "u";
            if (me)
              this._promise._pushContext(), E = O(this._generator.return).call(this._generator, void 0), this._promise._popContext();
            else {
              var Ee = new k.CancellationError("generator .return() sentinel");
              k.coroutine.returnSentinel = Ee, this._promise._attachExtraTrace(Ee), this._promise._pushContext(), E = O(this._generator.throw).call(this._generator, Ee), this._promise._popContext();
            }
            this._cancellationPhase = !0, this._yieldedPromise = null, this._continue(E);
          }
        }, H.prototype._promiseFulfilled = function(E) {
          this._yieldedPromise = null, this._promise._pushContext();
          var me = O(this._generator.next).call(this._generator, E);
          this._promise._popContext(), this._continue(me);
        }, H.prototype._promiseRejected = function(E) {
          this._yieldedPromise = null, this._promise._attachExtraTrace(E), this._promise._pushContext();
          var me = O(this._generator.throw).call(this._generator, E);
          this._promise._popContext(), this._continue(me);
        }, H.prototype._resultCancelled = function() {
          if (this._yieldedPromise instanceof k) {
            var E = this._yieldedPromise;
            this._yieldedPromise = null, E.cancel();
          }
        }, H.prototype.promise = function() {
          return this._promise;
        }, H.prototype._run = function() {
          this._generator = this._generatorFunction.call(this._receiver), this._receiver = this._generatorFunction = void 0, this._promiseFulfilled(void 0);
        }, H.prototype._continue = function(E) {
          var me = this._promise;
          if (E === q)
            return this._cleanup(), this._cancellationPhase ? me.cancel() : me._rejectCallback(E.e, !1);
          var Ee = E.value;
          if (E.done === !0)
            return this._cleanup(), this._cancellationPhase ? me.cancel() : me._resolveCallback(Ee);
          var Le = C(Ee, this._promise);
          if (!(Le instanceof k) && (Le = U(Le, this._yieldHandlers, this._promise), Le === null))
            return void this._promiseRejected(new Y(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s", String(Ee)) + `From coroutine:
` + this._stack.split(`
`).slice(1, -7).join(`
`)));
          Le = Le._target();
          var Oe = Le._bitField;
          50397184 & Oe ? 33554432 & Oe ? k._async.invoke(this._promiseFulfilled, this, Le._value()) : 16777216 & Oe ? k._async.invoke(this._promiseRejected, this, Le._reason()) : this._promiseCancelled() : (this._yieldedPromise = Le, Le._proxy(this, null));
        }, k.coroutine = function(E, me) {
          if (typeof E != "function")
            throw new Y(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);
          var Ee = Object(me).yieldHandler, Le = H, Oe = new Error().stack;
          return function() {
            var Te = E.apply(this, arguments), Re = new Le(void 0, void 0, Ee, Oe), Ve = Re.promise();
            return Re._generator = Te, Re._promiseFulfilled(void 0), Ve;
          };
        }, k.coroutine.addYieldHandler = function(E) {
          if (typeof E != "function")
            throw new Y("expecting a function but got " + F.classString(E));
          J.push(E);
        }, k.spawn = function(E) {
          if (N.deprecated("Promise.spawn()", "Promise.coroutine()"), typeof E != "function")
            return re(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);
          var me = new H(E, this), Ee = me.promise();
          return me._run(k.spawn), Ee;
        };
      };
    }, { "./errors": 12, "./util": 36 }], 17: [function(l, n, L) {
      n.exports = function(k, re, R, C, p) {
        var N = l("./util");
        N.canEvaluate, N.tryCatch, N.errorObj, k.join = function() {
          var U, H = arguments.length - 1;
          if (H > 0 && typeof arguments[H] == "function") {
            U = arguments[H];
            var Y;
          }
          var K = [].slice.call(arguments);
          U && K.pop();
          var Y = new re(K).promise();
          return U !== void 0 ? Y.spread(U) : Y;
        };
      };
    }, { "./util": 36 }], 18: [function(l, n, L) {
      n.exports = function(k, re, R, C, p, N) {
        function U(O, J, E, me) {
          this.constructor$(O), this._promise._captureStackTrace();
          var Ee = k._getContext();
          if (this._callback = K.contextBind(Ee, J), this._preservedValues = me === p ? new Array(this.length()) : null, this._limit = E, this._inFlight = 0, this._queue = [], q.invoke(this._asyncInit, this, void 0), K.isArray(O))
            for (var Le = 0; Le < O.length; ++Le) {
              var Oe = O[Le];
              Oe instanceof k && Oe.suppressUnhandledRejections();
            }
        }
        function H(O, J, E, me) {
          if (typeof J != "function")
            return R("expecting a function but got " + K.classString(J));
          var Ee = 0;
          if (E !== void 0) {
            if (typeof E != "object" || E === null)
              return k.reject(new TypeError("options argument must be an object but it is " + K.classString(E)));
            if (typeof E.concurrency != "number")
              return k.reject(new TypeError("'concurrency' must be a number but it is " + K.classString(E.concurrency)));
            Ee = E.concurrency;
          }
          return Ee = typeof Ee == "number" && isFinite(Ee) && Ee >= 1 ? Ee : 0, new U(O, J, Ee, me).promise();
        }
        var K = l("./util"), Y = K.tryCatch, F = K.errorObj, q = k._async;
        K.inherits(U, re), U.prototype._asyncInit = function() {
          this._init$(void 0, -2);
        }, U.prototype._init = function() {
        }, U.prototype._promiseFulfilled = function(O, J) {
          var E = this._values, me = this.length(), Ee = this._preservedValues, Le = this._limit;
          if (0 > J) {
            if (J = -1 * J - 1, E[J] = O, Le >= 1 && (this._inFlight--, this._drainQueue(), this._isResolved()))
              return !0;
          } else {
            if (Le >= 1 && this._inFlight >= Le)
              return E[J] = O, this._queue.push(J), !1;
            Ee !== null && (Ee[J] = O);
            var Oe = this._promise, Te = this._callback, Re = Oe._boundValue();
            Oe._pushContext();
            var Ve = Y(Te).call(Re, O, J, me), We = Oe._popContext();
            if (N.checkForgottenReturns(Ve, We, Ee !== null ? "Promise.filter" : "Promise.map", Oe), Ve === F)
              return this._reject(Ve.e), !0;
            var le = C(Ve, this._promise);
            if (le instanceof k) {
              le = le._target();
              var je = le._bitField;
              if (!(50397184 & je))
                return Le >= 1 && this._inFlight++, E[J] = le, le._proxy(this, -1 * (J + 1)), !1;
              if (!(33554432 & je))
                return 16777216 & je ? (this._reject(le._reason()), !0) : (this._cancel(), !0);
              Ve = le._value();
            }
            E[J] = Ve;
          }
          var fe = ++this._totalResolved;
          return fe >= me ? (Ee !== null ? this._filter(E, Ee) : this._resolve(E), !0) : !1;
        }, U.prototype._drainQueue = function() {
          for (var O = this._queue, J = this._limit, E = this._values; O.length > 0 && this._inFlight < J; ) {
            if (this._isResolved())
              return;
            var me = O.pop();
            this._promiseFulfilled(E[me], me);
          }
        }, U.prototype._filter = function(O, J) {
          for (var E = J.length, me = new Array(E), Ee = 0, Le = 0; E > Le; ++Le)
            O[Le] && (me[Ee++] = J[Le]);
          me.length = Ee, this._resolve(me);
        }, U.prototype.preservedValues = function() {
          return this._preservedValues;
        }, k.prototype.map = function(O, J) {
          return H(this, O, J, null);
        }, k.map = function(O, J, E, me) {
          return H(O, J, E, me);
        };
      };
    }, { "./util": 36 }], 19: [function(l, n, L) {
      n.exports = function(k, re, R, C, p) {
        var N = l("./util"), U = N.tryCatch;
        k.method = function(H) {
          if (typeof H != "function")
            throw new k.TypeError("expecting a function but got " + N.classString(H));
          return function() {
            var K = new k(re);
            K._captureStackTrace(), K._pushContext();
            var Y = U(H).apply(this, arguments), F = K._popContext();
            return p.checkForgottenReturns(Y, F, "Promise.method", K), K._resolveFromSyncValue(Y), K;
          };
        }, k.attempt = k.try = function(H) {
          if (typeof H != "function")
            return C("expecting a function but got " + N.classString(H));
          var K = new k(re);
          K._captureStackTrace(), K._pushContext();
          var Y;
          if (arguments.length > 1) {
            p.deprecated("calling Promise.try with more than 1 argument");
            var F = arguments[1], q = arguments[2];
            Y = N.isArray(F) ? U(H).apply(q, F) : U(H).call(q, F);
          } else
            Y = U(H)();
          var O = K._popContext();
          return p.checkForgottenReturns(Y, O, "Promise.try", K), K._resolveFromSyncValue(Y), K;
        }, k.prototype._resolveFromSyncValue = function(H) {
          H === N.errorObj ? this._rejectCallback(H.e, !1) : this._resolveCallback(H, !0);
        };
      };
    }, { "./util": 36 }], 20: [function(l, n, L) {
      function k(Y) {
        return Y instanceof Error && H.getPrototypeOf(Y) === Error.prototype;
      }
      function re(Y) {
        var F;
        if (k(Y)) {
          F = new U(Y), F.name = Y.name, F.message = Y.message, F.stack = Y.stack;
          for (var q = H.keys(Y), O = 0; O < q.length; ++O) {
            var J = q[O];
            K.test(J) || (F[J] = Y[J]);
          }
          return F;
        }
        return C.markAsOriginatingFromRejection(Y), Y;
      }
      function R(Y, F) {
        return function(q, O) {
          if (Y !== null) {
            if (q) {
              var J = re(p(q));
              Y._attachExtraTrace(J), Y._reject(J);
            } else if (F) {
              var E = [].slice.call(arguments, 1);
              Y._fulfill(E);
            } else
              Y._fulfill(O);
            Y = null;
          }
        };
      }
      var C = l("./util"), p = C.maybeWrapAsError, N = l("./errors"), U = N.OperationalError, H = l("./es5"), K = /^(?:name|message|stack|cause)$/;
      n.exports = R;
    }, { "./errors": 12, "./es5": 13, "./util": 36 }], 21: [function(l, n, L) {
      n.exports = function(k) {
        function re(K, Y) {
          var F = this;
          if (!p.isArray(K))
            return R.call(F, K, Y);
          var q = U(Y).apply(F._boundValue(), [null].concat(K));
          q === H && N.throwLater(q.e);
        }
        function R(K, Y) {
          var F = this, q = F._boundValue(), O = K === void 0 ? U(Y).call(q, null) : U(Y).call(q, null, K);
          O === H && N.throwLater(O.e);
        }
        function C(K, Y) {
          var F = this;
          if (!K) {
            var q = new Error(K + "");
            q.cause = K, K = q;
          }
          var O = U(Y).call(F._boundValue(), K);
          O === H && N.throwLater(O.e);
        }
        var p = l("./util"), N = k._async, U = p.tryCatch, H = p.errorObj;
        k.prototype.asCallback = k.prototype.nodeify = function(K, Y) {
          if (typeof K == "function") {
            var F = R;
            Y !== void 0 && Object(Y).spread && (F = re), this._then(F, C, void 0, this, K);
          }
          return this;
        };
      };
    }, { "./util": 36 }], 22: [function(l, n, L) {
      n.exports = function() {
        function k() {
        }
        function re(Be, Ge) {
          if (Be == null || Be.constructor !== R && typeof Promise < "u" && Be.constructor !== Promise)
            throw new le(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);
          if (typeof Ge != "function")
            throw new le("expecting a function but got " + F.classString(Ge));
        }
        function R(Be) {
          Be !== fe && re(this, Be), this._bitField = 0, this._fulfillmentHandler0 = void 0, this._rejectionHandler0 = void 0, this._promise0 = void 0, this._receiver0 = void 0, this._resolveFromExecutor(Be), this._promiseCreated(), this._fireEvent("promiseCreated", this);
        }
        function C(Be) {
          this.promise._resolveCallback(Be);
        }
        function p(Be) {
          this.promise._rejectCallback(Be, !1);
        }
        function N(Be) {
          var Ge = new R(fe);
          Ge._fulfillmentHandler0 = Be, Ge._rejectionHandler0 = Be, Ge._promise0 = Be, Ge._receiver0 = Be;
        }
        var U = function() {
          return new le(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`);
        }, H = function() {
          return new R.PromiseInspection(this._target());
        }, K = function(Be) {
          return R.reject(new le(Be));
        }, Y = {}, F = l("./util");
        F.setReflectHandler(H);
        var q = function() {
          var Be = process.domain;
          return Be === void 0 ? null : Be;
        }, O = function() {
          return null;
        }, J = function() {
          return { domain: q(), async: null };
        }, E = F.isNode && F.nodeSupportsAsyncResource ? l("async_hooks").AsyncResource : null, me = function() {
          return { domain: q(), async: new E("Bluebird::Promise") };
        }, Ee = F.isNode ? J : O;
        F.notEnumerableProp(R, "_getContext", Ee);
        var Le = function() {
          Ee = me, F.notEnumerableProp(R, "_getContext", me);
        }, Oe = function() {
          Ee = J, F.notEnumerableProp(R, "_getContext", J);
        }, Te = l("./es5"), Re = l("./async"), Ve = new Re();
        Te.defineProperty(R, "_async", { value: Ve });
        var We = l("./errors"), le = R.TypeError = We.TypeError;
        R.RangeError = We.RangeError;
        var je = R.CancellationError = We.CancellationError;
        R.TimeoutError = We.TimeoutError, R.OperationalError = We.OperationalError, R.RejectionError = We.OperationalError, R.AggregateError = We.AggregateError;
        var fe = function() {
        }, Me = {}, Z = {}, Ue = l("./thenables")(R, fe), ct = l("./promise_array")(R, fe, Ue, K, k), mt = l("./context")(R), at = mt.create, Ye = l("./debuggability")(R, mt, Le, Oe), Et = (Ye.CapturedTrace, l("./finally")(R, Ue, Z)), Je = l("./catch_filter")(Z), ce = l("./nodeback"), Ht = F.errorObj, Dt = F.tryCatch;
        return R.prototype.toString = function() {
          return "[object Promise]";
        }, R.prototype.caught = R.prototype.catch = function(Be) {
          var Ge = arguments.length;
          if (Ge > 1) {
            var lt, ot = new Array(Ge - 1), Kt = 0;
            for (lt = 0; Ge - 1 > lt; ++lt) {
              var Lt = arguments[lt];
              if (!F.isObject(Lt))
                return K("Catch statement predicate: expecting an object but got " + F.classString(Lt));
              ot[Kt++] = Lt;
            }
            if (ot.length = Kt, Be = arguments[lt], typeof Be != "function")
              throw new le("The last argument to .catch() must be a function, got " + F.toString(Be));
            return this.then(void 0, Je(ot, Be, this));
          }
          return this.then(void 0, Be);
        }, R.prototype.reflect = function() {
          return this._then(H, H, void 0, this, void 0);
        }, R.prototype.then = function(Be, Ge) {
          if (Ye.warnings() && arguments.length > 0 && typeof Be != "function" && typeof Ge != "function") {
            var lt = ".then() only accepts functions but was passed: " + F.classString(Be);
            arguments.length > 1 && (lt += ", " + F.classString(Ge)), this._warn(lt);
          }
          return this._then(Be, Ge, void 0, void 0, void 0);
        }, R.prototype.done = function(Be, Ge) {
          var lt = this._then(Be, Ge, void 0, void 0, void 0);
          lt._setIsFinal();
        }, R.prototype.spread = function(Be) {
          return typeof Be != "function" ? K("expecting a function but got " + F.classString(Be)) : this.all()._then(Be, void 0, void 0, Me, void 0);
        }, R.prototype.toJSON = function() {
          var Be = { isFulfilled: !1, isRejected: !1, fulfillmentValue: void 0, rejectionReason: void 0 };
          return this.isFulfilled() ? (Be.fulfillmentValue = this.value(), Be.isFulfilled = !0) : this.isRejected() && (Be.rejectionReason = this.reason(), Be.isRejected = !0), Be;
        }, R.prototype.all = function() {
          return arguments.length > 0 && this._warn(".all() was passed arguments but it does not take any"), new ct(this).promise();
        }, R.prototype.error = function(Be) {
          return this.caught(F.originatesFromRejection, Be);
        }, R.getNewLibraryCopy = n.exports, R.is = function(Be) {
          return Be instanceof R;
        }, R.fromNode = R.fromCallback = function(Be) {
          var Ge = new R(fe);
          Ge._captureStackTrace();
          var lt = arguments.length > 1 ? !!Object(arguments[1]).multiArgs : !1, ot = Dt(Be)(ce(Ge, lt));
          return ot === Ht && Ge._rejectCallback(ot.e, !0), Ge._isFateSealed() || Ge._setAsyncGuaranteed(), Ge;
        }, R.all = function(Be) {
          return new ct(Be).promise();
        }, R.cast = function(Be) {
          var Ge = Ue(Be);
          return Ge instanceof R || (Ge = new R(fe), Ge._captureStackTrace(), Ge._setFulfilled(), Ge._rejectionHandler0 = Be), Ge;
        }, R.resolve = R.fulfilled = R.cast, R.reject = R.rejected = function(Be) {
          var Ge = new R(fe);
          return Ge._captureStackTrace(), Ge._rejectCallback(Be, !0), Ge;
        }, R.setScheduler = function(Be) {
          if (typeof Be != "function")
            throw new le("expecting a function but got " + F.classString(Be));
          return Ve.setScheduler(Be);
        }, R.prototype._then = function(Be, Ge, lt, ot, Kt) {
          var Lt = Kt !== void 0, bn = Lt ? Kt : new R(fe), Fn = this._target(), wn = Fn._bitField;
          Lt || (bn._propagateFrom(this, 3), bn._captureStackTrace(), ot === void 0 && 2097152 & this._bitField && (ot = 50397184 & wn ? this._boundValue() : Fn === this ? void 0 : this._boundTo), this._fireEvent("promiseChained", this, bn));
          var ge = Ee();
          if (50397184 & wn) {
            var Wt, xt, He = Fn._settlePromiseCtx;
            33554432 & wn ? (xt = Fn._rejectionHandler0, Wt = Be) : 16777216 & wn ? (xt = Fn._fulfillmentHandler0, Wt = Ge, Fn._unsetRejectionIsUnhandled()) : (He = Fn._settlePromiseLateCancellationObserver, xt = new je("late cancellation observer"), Fn._attachExtraTrace(xt), Wt = Ge), Ve.invoke(He, Fn, { handler: F.contextBind(ge, Wt), promise: bn, receiver: ot, value: xt });
          } else
            Fn._addCallbacks(Be, Ge, bn, ot, ge);
          return bn;
        }, R.prototype._length = function() {
          return 65535 & this._bitField;
        }, R.prototype._isFateSealed = function() {
          return (117506048 & this._bitField) !== 0;
        }, R.prototype._isFollowing = function() {
          return (67108864 & this._bitField) === 67108864;
        }, R.prototype._setLength = function(Be) {
          this._bitField = -65536 & this._bitField | 65535 & Be;
        }, R.prototype._setFulfilled = function() {
          this._bitField = 33554432 | this._bitField, this._fireEvent("promiseFulfilled", this);
        }, R.prototype._setRejected = function() {
          this._bitField = 16777216 | this._bitField, this._fireEvent("promiseRejected", this);
        }, R.prototype._setFollowing = function() {
          this._bitField = 67108864 | this._bitField, this._fireEvent("promiseResolved", this);
        }, R.prototype._setIsFinal = function() {
          this._bitField = 4194304 | this._bitField;
        }, R.prototype._isFinal = function() {
          return (4194304 & this._bitField) > 0;
        }, R.prototype._unsetCancelled = function() {
          this._bitField = -65537 & this._bitField;
        }, R.prototype._setCancelled = function() {
          this._bitField = 65536 | this._bitField, this._fireEvent("promiseCancelled", this);
        }, R.prototype._setWillBeCancelled = function() {
          this._bitField = 8388608 | this._bitField;
        }, R.prototype._setAsyncGuaranteed = function() {
          if (!Ve.hasCustomScheduler()) {
            var Be = this._bitField;
            this._bitField = Be | (536870912 & Be) >> 2 ^ 134217728;
          }
        }, R.prototype._setNoAsyncGuarantee = function() {
          this._bitField = -134217729 & (536870912 | this._bitField);
        }, R.prototype._receiverAt = function(Be) {
          var Ge = Be === 0 ? this._receiver0 : this[4 * Be - 4 + 3];
          return Ge === Y ? void 0 : Ge === void 0 && this._isBound() ? this._boundValue() : Ge;
        }, R.prototype._promiseAt = function(Be) {
          return this[4 * Be - 4 + 2];
        }, R.prototype._fulfillmentHandlerAt = function(Be) {
          return this[4 * Be - 4 + 0];
        }, R.prototype._rejectionHandlerAt = function(Be) {
          return this[4 * Be - 4 + 1];
        }, R.prototype._boundValue = function() {
        }, R.prototype._migrateCallback0 = function(Be) {
          var Ge = (Be._bitField, Be._fulfillmentHandler0), lt = Be._rejectionHandler0, ot = Be._promise0, Kt = Be._receiverAt(0);
          Kt === void 0 && (Kt = Y), this._addCallbacks(Ge, lt, ot, Kt, null);
        }, R.prototype._migrateCallbackAt = function(Be, Ge) {
          var lt = Be._fulfillmentHandlerAt(Ge), ot = Be._rejectionHandlerAt(Ge), Kt = Be._promiseAt(Ge), Lt = Be._receiverAt(Ge);
          Lt === void 0 && (Lt = Y), this._addCallbacks(lt, ot, Kt, Lt, null);
        }, R.prototype._addCallbacks = function(Be, Ge, lt, ot, Kt) {
          var Lt = this._length();
          if (Lt >= 65531 && (Lt = 0, this._setLength(0)), Lt === 0)
            this._promise0 = lt, this._receiver0 = ot, typeof Be == "function" && (this._fulfillmentHandler0 = F.contextBind(Kt, Be)), typeof Ge == "function" && (this._rejectionHandler0 = F.contextBind(Kt, Ge));
          else {
            var bn = 4 * Lt - 4;
            this[bn + 2] = lt, this[bn + 3] = ot, typeof Be == "function" && (this[bn + 0] = F.contextBind(Kt, Be)), typeof Ge == "function" && (this[bn + 1] = F.contextBind(Kt, Ge));
          }
          return this._setLength(Lt + 1), Lt;
        }, R.prototype._proxy = function(Be, Ge) {
          this._addCallbacks(void 0, void 0, Ge, Be, null);
        }, R.prototype._resolveCallback = function(Be, Ge) {
          if (!(117506048 & this._bitField)) {
            if (Be === this)
              return this._rejectCallback(U(), !1);
            var lt = Ue(Be, this);
            if (!(lt instanceof R))
              return this._fulfill(Be);
            Ge && this._propagateFrom(lt, 2);
            var ot = lt._target();
            if (ot === this)
              return void this._reject(U());
            var Kt = ot._bitField;
            if (50397184 & Kt)
              if (33554432 & Kt)
                this._fulfill(ot._value());
              else if (16777216 & Kt)
                this._reject(ot._reason());
              else {
                var Fn = new je("late cancellation observer");
                ot._attachExtraTrace(Fn), this._reject(Fn);
              }
            else {
              var Lt = this._length();
              Lt > 0 && ot._migrateCallback0(this);
              for (var bn = 1; Lt > bn; ++bn)
                ot._migrateCallbackAt(this, bn);
              this._setFollowing(), this._setLength(0), this._setFollowee(lt);
            }
          }
        }, R.prototype._rejectCallback = function(Be, Ge, lt) {
          var ot = F.ensureErrorObject(Be), Kt = ot === Be;
          if (!Kt && !lt && Ye.warnings()) {
            var Lt = "a promise was rejected with a non-error: " + F.classString(Be);
            this._warn(Lt, !0);
          }
          this._attachExtraTrace(ot, Ge ? Kt : !1), this._reject(Be);
        }, R.prototype._resolveFromExecutor = function(Be) {
          if (Be !== fe) {
            var Ge = this;
            this._captureStackTrace(), this._pushContext();
            var lt = !0, ot = this._execute(Be, function(Kt) {
              Ge._resolveCallback(Kt);
            }, function(Kt) {
              Ge._rejectCallback(Kt, lt);
            });
            lt = !1, this._popContext(), ot !== void 0 && Ge._rejectCallback(ot, !0);
          }
        }, R.prototype._settlePromiseFromHandler = function(Be, Ge, lt, ot) {
          var Kt = ot._bitField;
          if (!(65536 & Kt)) {
            ot._pushContext();
            var Lt;
            Ge === Me ? lt && typeof lt.length == "number" ? Lt = Dt(Be).apply(this._boundValue(), lt) : (Lt = Ht, Lt.e = new le("cannot .spread() a non-array: " + F.classString(lt))) : Lt = Dt(Be).call(Ge, lt);
            var bn = ot._popContext();
            Kt = ot._bitField, !(65536 & Kt) && (Lt === Z ? ot._reject(lt) : Lt === Ht ? ot._rejectCallback(Lt.e, !1) : (Ye.checkForgottenReturns(Lt, bn, "", ot, this), ot._resolveCallback(Lt)));
          }
        }, R.prototype._target = function() {
          for (var Be = this; Be._isFollowing(); )
            Be = Be._followee();
          return Be;
        }, R.prototype._followee = function() {
          return this._rejectionHandler0;
        }, R.prototype._setFollowee = function(Be) {
          this._rejectionHandler0 = Be;
        }, R.prototype._settlePromise = function(Be, Ge, lt, ot) {
          var Kt = Be instanceof R, Lt = this._bitField, bn = (134217728 & Lt) !== 0;
          65536 & Lt ? (Kt && Be._invokeInternalOnCancel(), lt instanceof Et && lt.isFinallyHandler() ? (lt.cancelPromise = Be, Dt(Ge).call(lt, ot) === Ht && Be._reject(Ht.e)) : Ge === H ? Be._fulfill(H.call(lt)) : lt instanceof k ? lt._promiseCancelled(Be) : Kt || Be instanceof ct ? Be._cancel() : lt.cancel()) : typeof Ge == "function" ? Kt ? (bn && Be._setAsyncGuaranteed(), this._settlePromiseFromHandler(Ge, lt, ot, Be)) : Ge.call(lt, ot, Be) : lt instanceof k ? lt._isResolved() || (33554432 & Lt ? lt._promiseFulfilled(ot, Be) : lt._promiseRejected(ot, Be)) : Kt && (bn && Be._setAsyncGuaranteed(), 33554432 & Lt ? Be._fulfill(ot) : Be._reject(ot));
        }, R.prototype._settlePromiseLateCancellationObserver = function(Be) {
          var Ge = Be.handler, lt = Be.promise, ot = Be.receiver, Kt = Be.value;
          typeof Ge == "function" ? lt instanceof R ? this._settlePromiseFromHandler(Ge, ot, Kt, lt) : Ge.call(ot, Kt, lt) : lt instanceof R && lt._reject(Kt);
        }, R.prototype._settlePromiseCtx = function(Be) {
          this._settlePromise(Be.promise, Be.handler, Be.receiver, Be.value);
        }, R.prototype._settlePromise0 = function(Be, Ge, lt) {
          var ot = this._promise0, Kt = this._receiverAt(0);
          this._promise0 = void 0, this._receiver0 = void 0, this._settlePromise(ot, Be, Kt, Ge);
        }, R.prototype._clearCallbackDataAtIndex = function(Be) {
          var Ge = 4 * Be - 4;
          this[Ge + 2] = this[Ge + 3] = this[Ge + 0] = this[Ge + 1] = void 0;
        }, R.prototype._fulfill = function(Be) {
          var Ge = this._bitField;
          if (!((117506048 & Ge) >>> 16)) {
            if (Be === this) {
              var lt = U();
              return this._attachExtraTrace(lt), this._reject(lt);
            }
            this._setFulfilled(), this._rejectionHandler0 = Be, (65535 & Ge) > 0 && (134217728 & Ge ? this._settlePromises() : Ve.settlePromises(this), this._dereferenceTrace());
          }
        }, R.prototype._reject = function(Be) {
          var Ge = this._bitField;
          if (!((117506048 & Ge) >>> 16))
            return this._setRejected(), this._fulfillmentHandler0 = Be, this._isFinal() ? Ve.fatalError(Be, F.isNode) : void ((65535 & Ge) > 0 ? Ve.settlePromises(this) : this._ensurePossibleRejectionHandled());
        }, R.prototype._fulfillPromises = function(Be, Ge) {
          for (var lt = 1; Be > lt; lt++) {
            var ot = this._fulfillmentHandlerAt(lt), Kt = this._promiseAt(lt), Lt = this._receiverAt(lt);
            this._clearCallbackDataAtIndex(lt), this._settlePromise(Kt, ot, Lt, Ge);
          }
        }, R.prototype._rejectPromises = function(Be, Ge) {
          for (var lt = 1; Be > lt; lt++) {
            var ot = this._rejectionHandlerAt(lt), Kt = this._promiseAt(lt), Lt = this._receiverAt(lt);
            this._clearCallbackDataAtIndex(lt), this._settlePromise(Kt, ot, Lt, Ge);
          }
        }, R.prototype._settlePromises = function() {
          var Be = this._bitField, Ge = 65535 & Be;
          if (Ge > 0) {
            if (16842752 & Be) {
              var lt = this._fulfillmentHandler0;
              this._settlePromise0(this._rejectionHandler0, lt, Be), this._rejectPromises(Ge, lt);
            } else {
              var ot = this._rejectionHandler0;
              this._settlePromise0(this._fulfillmentHandler0, ot, Be), this._fulfillPromises(Ge, ot);
            }
            this._setLength(0);
          }
          this._clearCancellationData();
        }, R.prototype._settledValue = function() {
          var Be = this._bitField;
          return 33554432 & Be ? this._rejectionHandler0 : 16777216 & Be ? this._fulfillmentHandler0 : void 0;
        }, typeof Symbol < "u" && Symbol.toStringTag && Te.defineProperty(R.prototype, Symbol.toStringTag, { get: function() {
          return "Object";
        } }), R.defer = R.pending = function() {
          Ye.deprecated("Promise.defer", "new Promise");
          var Be = new R(fe);
          return { promise: Be, resolve: C, reject: p };
        }, F.notEnumerableProp(R, "_makeSelfResolutionError", U), l("./method")(R, fe, Ue, K, Ye), l("./bind")(R, fe, Ue, Ye), l("./cancel")(R, ct, K, Ye), l("./direct_resolve")(R), l("./synchronous_inspection")(R), l("./join")(R, ct, Ue, fe, Ve), R.Promise = R, R.version = "3.7.2", l("./call_get.js")(R), l("./generators.js")(R, K, fe, Ue, k, Ye), l("./map.js")(R, ct, K, Ue, fe, Ye), l("./nodeify.js")(R), l("./promisify.js")(R, fe), l("./props.js")(R, ct, Ue, K), l("./race.js")(R, fe, Ue, K), l("./reduce.js")(R, ct, K, Ue, fe, Ye), l("./settle.js")(R, ct, Ye), l("./some.js")(R, ct, K), l("./timers.js")(R, fe, Ye), l("./using.js")(R, K, Ue, at, fe, Ye), l("./any.js")(R), l("./each.js")(R, fe), l("./filter.js")(R, fe), F.toFastProperties(R), F.toFastProperties(R.prototype), N({ a: 1 }), N({ b: 2 }), N({ c: 3 }), N(1), N(function() {
        }), N(void 0), N(!1), N(new R(fe)), Ye.setBounds(Re.firstLineError, F.lastLineError), R;
      };
    }, { "./any.js": 1, "./async": 2, "./bind": 3, "./call_get.js": 5, "./cancel": 6, "./catch_filter": 7, "./context": 8, "./debuggability": 9, "./direct_resolve": 10, "./each.js": 11, "./errors": 12, "./es5": 13, "./filter.js": 14, "./finally": 15, "./generators.js": 16, "./join": 17, "./map.js": 18, "./method": 19, "./nodeback": 20, "./nodeify.js": 21, "./promise_array": 23, "./promisify.js": 24, "./props.js": 25, "./race.js": 27, "./reduce.js": 28, "./settle.js": 30, "./some.js": 31, "./synchronous_inspection": 32, "./thenables": 33, "./timers.js": 34, "./using.js": 35, "./util": 36, async_hooks: void 0 }], 23: [function(l, n, L) {
      n.exports = function(k, re, R, C, p) {
        function N(K) {
          switch (K) {
            case -2:
              return [];
            case -3:
              return {};
            case -6:
              return /* @__PURE__ */ new Map();
          }
        }
        function U(K) {
          var Y = this._promise = new k(re);
          K instanceof k && (Y._propagateFrom(K, 3), K.suppressUnhandledRejections()), Y._setOnCancel(this), this._values = K, this._length = 0, this._totalResolved = 0, this._init(void 0, -2);
        }
        var H = l("./util");
        return H.isArray, H.inherits(U, p), U.prototype.length = function() {
          return this._length;
        }, U.prototype.promise = function() {
          return this._promise;
        }, U.prototype._init = function K(Y, F) {
          var q = R(this._values, this._promise);
          if (q instanceof k) {
            q = q._target();
            var O = q._bitField;
            if (this._values = q, (50397184 & O) === 0)
              return this._promise._setAsyncGuaranteed(), q._then(K, this._reject, void 0, this, F);
            if (!(33554432 & O))
              return 16777216 & O ? this._reject(q._reason()) : this._cancel();
            q = q._value();
          }
          if (q = H.asArray(q), q === null) {
            var J = C("expecting an array or an iterable object but got " + H.classString(q)).reason();
            return void this._promise._rejectCallback(J, !1);
          }
          return q.length === 0 ? void (F === -5 ? this._resolveEmptyArray() : this._resolve(N(F))) : void this._iterate(q);
        }, U.prototype._iterate = function(K) {
          var Y = this.getActualLength(K.length);
          this._length = Y, this._values = this.shouldCopyValues() ? new Array(Y) : this._values;
          for (var F = this._promise, q = !1, O = null, J = 0; Y > J; ++J) {
            var E = R(K[J], F);
            E instanceof k ? (E = E._target(), O = E._bitField) : O = null, q ? O !== null && E.suppressUnhandledRejections() : O !== null ? 50397184 & O ? q = 33554432 & O ? this._promiseFulfilled(E._value(), J) : 16777216 & O ? this._promiseRejected(E._reason(), J) : this._promiseCancelled(J) : (E._proxy(this, J), this._values[J] = E) : q = this._promiseFulfilled(E, J);
          }
          q || F._setAsyncGuaranteed();
        }, U.prototype._isResolved = function() {
          return this._values === null;
        }, U.prototype._resolve = function(K) {
          this._values = null, this._promise._fulfill(K);
        }, U.prototype._cancel = function() {
          !this._isResolved() && this._promise._isCancellable() && (this._values = null, this._promise._cancel());
        }, U.prototype._reject = function(K) {
          this._values = null, this._promise._rejectCallback(K, !1);
        }, U.prototype._promiseFulfilled = function(K, Y) {
          this._values[Y] = K;
          var F = ++this._totalResolved;
          return F >= this._length ? (this._resolve(this._values), !0) : !1;
        }, U.prototype._promiseCancelled = function() {
          return this._cancel(), !0;
        }, U.prototype._promiseRejected = function(K) {
          return this._totalResolved++, this._reject(K), !0;
        }, U.prototype._resultCancelled = function() {
          if (!this._isResolved()) {
            var K = this._values;
            if (this._cancel(), K instanceof k)
              K.cancel();
            else
              for (var Y = 0; Y < K.length; ++Y)
                K[Y] instanceof k && K[Y].cancel();
          }
        }, U.prototype.shouldCopyValues = function() {
          return !0;
        }, U.prototype.getActualLength = function(K) {
          return K;
        }, U;
      };
    }, { "./util": 36 }], 24: [function(l, n, L) {
      n.exports = function(k, re) {
        function R(fe) {
          return !Ve.test(fe);
        }
        function C(fe) {
          try {
            return fe.__isPromisified__ === !0;
          } catch {
            return !1;
          }
        }
        function p(fe, Me, Z) {
          var Ue = O.getDataPropertyOrDefault(fe, Me + Z, Te);
          return Ue ? C(Ue) : !1;
        }
        function N(fe, Me, Z) {
          for (var Ue = 0; Ue < fe.length; Ue += 2) {
            var ct = fe[Ue];
            if (Z.test(ct)) {
              for (var mt = ct.replace(Z, ""), at = 0; at < fe.length; at += 2)
                if (fe[at] === mt)
                  throw new Le(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s", Me));
            }
          }
        }
        function U(fe, Me, Z, Ue) {
          for (var ct = O.inheritedDataKeys(fe), mt = [], at = 0; at < ct.length; ++at) {
            var Ye = ct[at], Et = fe[Ye], Je = Ue === We ? !0 : We(Ye);
            typeof Et != "function" || C(Et) || p(fe, Ye, Me) || !Ue(Ye, Et, fe, Je) || mt.push(Ye, Et);
          }
          return N(mt, Me, Z), mt;
        }
        function H(fe, Me, Z, Ue, ct, mt) {
          function at() {
            var Je = Me;
            Me === q && (Je = this);
            var ce = new k(re);
            ce._captureStackTrace();
            var Ht = typeof Et == "string" && this !== Ye ? this[Et] : fe, Dt = J(ce, mt);
            try {
              Ht.apply(Je, E(arguments, Dt));
            } catch (Be) {
              ce._rejectCallback(me(Be), !0, !0);
            }
            return ce._isFateSealed() || ce._setAsyncGuaranteed(), ce;
          }
          var Ye = function() {
            return this;
          }(), Et = fe;
          return typeof Et == "string" && (fe = Ue), O.notEnumerableProp(at, "__isPromisified__", !0), at;
        }
        function K(fe, Me, Z, Ue, ct) {
          for (var mt = new RegExp(le(Me) + "$"), at = U(fe, Me, mt, Z), Ye = 0, Et = at.length; Et > Ye; Ye += 2) {
            var Je = at[Ye], ce = at[Ye + 1], Ht = Je + Me;
            if (Ue === je)
              fe[Ht] = je(Je, q, Je, ce, Me, ct);
            else {
              var Dt = Ue(ce, function() {
                return je(Je, q, Je, ce, Me, ct);
              });
              O.notEnumerableProp(Dt, "__isPromisified__", !0), fe[Ht] = Dt;
            }
          }
          return O.toFastProperties(fe), fe;
        }
        function Y(fe, Me, Z) {
          return je(fe, Me, void 0, fe, null, Z);
        }
        var F, q = {}, O = l("./util"), J = l("./nodeback"), E = O.withAppended, me = O.maybeWrapAsError, Ee = O.canEvaluate, Le = l("./errors").TypeError, Oe = "Async", Te = { __isPromisified__: !0 }, Re = ["arity", "length", "name", "arguments", "caller", "callee", "prototype", "__isPromisified__"], Ve = new RegExp("^(?:" + Re.join("|") + ")$"), We = function(fe) {
          return O.isIdentifier(fe) && fe.charAt(0) !== "_" && fe !== "constructor";
        }, le = function(fe) {
          return fe.replace(/([$])/, "\\$");
        }, je = Ee ? F : H;
        k.promisify = function(fe, Me) {
          if (typeof fe != "function")
            throw new Le("expecting a function but got " + O.classString(fe));
          if (C(fe))
            return fe;
          Me = Object(Me);
          var Z = Me.context === void 0 ? q : Me.context, Ue = !!Me.multiArgs, ct = Y(fe, Z, Ue);
          return O.copyDescriptors(fe, ct, R), ct;
        }, k.promisifyAll = function(fe, Me) {
          if (typeof fe != "function" && typeof fe != "object")
            throw new Le(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);
          Me = Object(Me);
          var Z = !!Me.multiArgs, Ue = Me.suffix;
          typeof Ue != "string" && (Ue = Oe);
          var ct = Me.filter;
          typeof ct != "function" && (ct = We);
          var mt = Me.promisifier;
          if (typeof mt != "function" && (mt = je), !O.isIdentifier(Ue))
            throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);
          for (var at = O.inheritedDataKeys(fe), Ye = 0; Ye < at.length; ++Ye) {
            var Et = fe[at[Ye]];
            at[Ye] !== "constructor" && O.isClass(Et) && (K(Et.prototype, Ue, ct, mt, Z), K(Et, Ue, ct, mt, Z));
          }
          return K(fe, Ue, ct, mt, Z);
        };
      };
    }, { "./errors": 12, "./nodeback": 20, "./util": 36 }], 25: [function(l, n, L) {
      n.exports = function(k, re, R, C) {
        function p(O) {
          var J, E = !1;
          if (U !== void 0 && O instanceof U)
            J = F(O), E = !0;
          else {
            var me = Y.keys(O), Ee = me.length;
            J = new Array(2 * Ee);
            for (var Le = 0; Ee > Le; ++Le) {
              var Oe = me[Le];
              J[Le] = O[Oe], J[Le + Ee] = Oe;
            }
          }
          this.constructor$(J), this._isMap = E, this._init$(void 0, E ? -6 : -3);
        }
        function N(O) {
          var J, E = R(O);
          return K(E) ? (J = E instanceof k ? E._then(k.props, void 0, void 0, void 0, void 0) : new p(E).promise(), E instanceof k && J._propagateFrom(E, 2), J) : C(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);
        }
        var U, H = l("./util"), K = H.isObject, Y = l("./es5");
        typeof Map == "function" && (U = Map);
        var F = function() {
          function O(me, Ee) {
            this[J] = me, this[J + E] = Ee, J++;
          }
          var J = 0, E = 0;
          return function(me) {
            E = me.size, J = 0;
            var Ee = new Array(2 * me.size);
            return me.forEach(O, Ee), Ee;
          };
        }(), q = function(O) {
          for (var J = new U(), E = O.length / 2 | 0, me = 0; E > me; ++me) {
            var Ee = O[E + me], Le = O[me];
            J.set(Ee, Le);
          }
          return J;
        };
        H.inherits(p, re), p.prototype._init = function() {
        }, p.prototype._promiseFulfilled = function(O, J) {
          this._values[J] = O;
          var E = ++this._totalResolved;
          if (E >= this._length) {
            var me;
            if (this._isMap)
              me = q(this._values);
            else {
              me = {};
              for (var Ee = this.length(), Le = 0, Oe = this.length(); Oe > Le; ++Le)
                me[this._values[Le + Ee]] = this._values[Le];
            }
            return this._resolve(me), !0;
          }
          return !1;
        }, p.prototype.shouldCopyValues = function() {
          return !1;
        }, p.prototype.getActualLength = function(O) {
          return O >> 1;
        }, k.prototype.props = function() {
          return N(this);
        }, k.props = function(O) {
          return N(O);
        };
      };
    }, { "./es5": 13, "./util": 36 }], 26: [function(l, n, L) {
      function k(R, C, p, N, U) {
        for (var H = 0; U > H; ++H)
          p[H + N] = R[H + C], R[H + C] = void 0;
      }
      function re(R) {
        this._capacity = R, this._length = 0, this._front = 0;
      }
      re.prototype._willBeOverCapacity = function(R) {
        return this._capacity < R;
      }, re.prototype._pushOne = function(R) {
        var C = this.length();
        this._checkCapacity(C + 1);
        var p = this._front + C & this._capacity - 1;
        this[p] = R, this._length = C + 1;
      }, re.prototype.push = function(R, C, p) {
        var N = this.length() + 3;
        if (this._willBeOverCapacity(N))
          return this._pushOne(R), this._pushOne(C), void this._pushOne(p);
        var U = this._front + N - 3;
        this._checkCapacity(N);
        var H = this._capacity - 1;
        this[U + 0 & H] = R, this[U + 1 & H] = C, this[U + 2 & H] = p, this._length = N;
      }, re.prototype.shift = function() {
        var R = this._front, C = this[R];
        return this[R] = void 0, this._front = R + 1 & this._capacity - 1, this._length--, C;
      }, re.prototype.length = function() {
        return this._length;
      }, re.prototype._checkCapacity = function(R) {
        this._capacity < R && this._resizeTo(this._capacity << 1);
      }, re.prototype._resizeTo = function(R) {
        var C = this._capacity;
        this._capacity = R;
        var p = this._front, N = this._length, U = p + N & C - 1;
        k(this, 0, this, C, U);
      }, n.exports = re;
    }, {}], 27: [function(l, n, L) {
      n.exports = function(k, re, R, C) {
        function p(H, K) {
          var Y = R(H);
          if (Y instanceof k)
            return U(Y);
          if (H = N.asArray(H), H === null)
            return C("expecting an array or an iterable object but got " + N.classString(H));
          var F = new k(re);
          K !== void 0 && F._propagateFrom(K, 3);
          for (var q = F._fulfill, O = F._reject, J = 0, E = H.length; E > J; ++J) {
            var me = H[J];
            (me !== void 0 || J in H) && k.cast(me)._then(q, O, void 0, F, null);
          }
          return F;
        }
        var N = l("./util"), U = function(H) {
          return H.then(function(K) {
            return p(K, H);
          });
        };
        k.race = function(H) {
          return p(H, void 0);
        }, k.prototype.race = function() {
          return p(this, void 0);
        };
      };
    }, { "./util": 36 }], 28: [function(l, n, L) {
      n.exports = function(k, re, R, C, p, N) {
        function U(J, E, me, Ee) {
          this.constructor$(J);
          var Le = k._getContext();
          this._fn = q.contextBind(Le, E), me !== void 0 && (me = k.resolve(me), me._attachCancellationCallback(this)), this._initialValue = me, this._currentCancellable = null, Ee === p ? this._eachValues = Array(this._length) : Ee === 0 ? this._eachValues = null : this._eachValues = void 0, this._promise._captureStackTrace(), this._init$(void 0, -5);
        }
        function H(J, E) {
          this.isFulfilled() ? E._resolve(J) : E._reject(J);
        }
        function K(J, E, me, Ee) {
          if (typeof E != "function")
            return R("expecting a function but got " + q.classString(E));
          var Le = new U(J, E, me, Ee);
          return Le.promise();
        }
        function Y(J) {
          this.accum = J, this.array._gotAccum(J);
          var E = C(this.value, this.array._promise);
          return E instanceof k ? (this.array._currentCancellable = E, E._then(F, void 0, void 0, this, void 0)) : F.call(this, E);
        }
        function F(J) {
          var E = this.array, me = E._promise, Ee = O(E._fn);
          me._pushContext();
          var Le;
          Le = E._eachValues !== void 0 ? Ee.call(me._boundValue(), J, this.index, this.length) : Ee.call(me._boundValue(), this.accum, J, this.index, this.length), Le instanceof k && (E._currentCancellable = Le);
          var Oe = me._popContext();
          return N.checkForgottenReturns(Le, Oe, E._eachValues !== void 0 ? "Promise.each" : "Promise.reduce", me), Le;
        }
        var q = l("./util"), O = q.tryCatch;
        q.inherits(U, re), U.prototype._gotAccum = function(J) {
          this._eachValues !== void 0 && this._eachValues !== null && J !== p && this._eachValues.push(J);
        }, U.prototype._eachComplete = function(J) {
          return this._eachValues !== null && this._eachValues.push(J), this._eachValues;
        }, U.prototype._init = function() {
        }, U.prototype._resolveEmptyArray = function() {
          this._resolve(this._eachValues !== void 0 ? this._eachValues : this._initialValue);
        }, U.prototype.shouldCopyValues = function() {
          return !1;
        }, U.prototype._resolve = function(J) {
          this._promise._resolveCallback(J), this._values = null;
        }, U.prototype._resultCancelled = function(J) {
          return J === this._initialValue ? this._cancel() : void (this._isResolved() || (this._resultCancelled$(), this._currentCancellable instanceof k && this._currentCancellable.cancel(), this._initialValue instanceof k && this._initialValue.cancel()));
        }, U.prototype._iterate = function(J) {
          this._values = J;
          var E, me, Ee = J.length;
          this._initialValue !== void 0 ? (E = this._initialValue, me = 0) : (E = k.resolve(J[0]), me = 1), this._currentCancellable = E;
          for (var Le = me; Ee > Le; ++Le) {
            var Oe = J[Le];
            Oe instanceof k && Oe.suppressUnhandledRejections();
          }
          if (!E.isRejected())
            for (; Ee > me; ++me) {
              var Te = { accum: null, value: J[me], index: me, length: Ee, array: this };
              E = E._then(Y, void 0, void 0, Te, void 0), !(127 & me) && E._setNoAsyncGuarantee();
            }
          this._eachValues !== void 0 && (E = E._then(this._eachComplete, void 0, void 0, this, void 0)), E._then(H, H, void 0, E, this);
        }, k.prototype.reduce = function(J, E) {
          return K(this, J, E, null);
        }, k.reduce = function(J, E, me, Ee) {
          return K(J, E, me, Ee);
        };
      };
    }, { "./util": 36 }], 29: [function(l, n, L) {
      var k, re = l("./util"), R = function() {
        throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`);
      }, C = re.getNativePromise();
      if (re.isNode && typeof MutationObserver > "u") {
        var p = global.setImmediate, N = process.nextTick;
        k = re.isRecentNode ? function(H) {
          p.call(global, H);
        } : function(H) {
          N.call(process, H);
        };
      } else if (typeof C == "function" && typeof C.resolve == "function") {
        var U = C.resolve();
        k = function(H) {
          U.then(H);
        };
      } else
        k = typeof MutationObserver < "u" && (typeof window > "u" || !window.navigator || !window.navigator.standalone && !window.cordova) && "classList" in document.documentElement ? function() {
          var H = document.createElement("div"), K = { attributes: !0 }, Y = !1, F = document.createElement("div"), q = new MutationObserver(function() {
            H.classList.toggle("foo"), Y = !1;
          });
          q.observe(F, K);
          var O = function() {
            Y || (Y = !0, F.classList.toggle("foo"));
          };
          return function(J) {
            var E = new MutationObserver(function() {
              E.disconnect(), J();
            });
            E.observe(H, K), O();
          };
        }() : typeof setImmediate < "u" ? function(H) {
          setImmediate(H);
        } : typeof setTimeout < "u" ? function(H) {
          setTimeout(H, 0);
        } : R;
      n.exports = k;
    }, { "./util": 36 }], 30: [function(l, n, L) {
      n.exports = function(k, re, R) {
        function C(U) {
          this.constructor$(U);
        }
        var p = k.PromiseInspection, N = l("./util");
        N.inherits(C, re), C.prototype._promiseResolved = function(U, H) {
          this._values[U] = H;
          var K = ++this._totalResolved;
          return K >= this._length ? (this._resolve(this._values), !0) : !1;
        }, C.prototype._promiseFulfilled = function(U, H) {
          var K = new p();
          return K._bitField = 33554432, K._settledValueField = U, this._promiseResolved(H, K);
        }, C.prototype._promiseRejected = function(U, H) {
          var K = new p();
          return K._bitField = 16777216, K._settledValueField = U, this._promiseResolved(H, K);
        }, k.settle = function(U) {
          return R.deprecated(".settle()", ".reflect()"), new C(U).promise();
        }, k.allSettled = function(U) {
          return new C(U).promise();
        }, k.prototype.settle = function() {
          return k.settle(this);
        };
      };
    }, { "./util": 36 }], 31: [function(l, n, L) {
      n.exports = function(k, re, R) {
        function C(F) {
          this.constructor$(F), this._howMany = 0, this._unwrap = !1, this._initialized = !1;
        }
        function p(F, q) {
          if ((0 | q) !== q || 0 > q)
            return R(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);
          var O = new C(F), J = O.promise();
          return O.setHowMany(q), O.init(), J;
        }
        var N = l("./util"), U = l("./errors").RangeError, H = l("./errors").AggregateError, K = N.isArray, Y = {};
        N.inherits(C, re), C.prototype._init = function() {
          if (this._initialized) {
            if (this._howMany === 0)
              return void this._resolve([]);
            this._init$(void 0, -5);
            var F = K(this._values);
            !this._isResolved() && F && this._howMany > this._canPossiblyFulfill() && this._reject(this._getRangeError(this.length()));
          }
        }, C.prototype.init = function() {
          this._initialized = !0, this._init();
        }, C.prototype.setUnwrap = function() {
          this._unwrap = !0;
        }, C.prototype.howMany = function() {
          return this._howMany;
        }, C.prototype.setHowMany = function(F) {
          this._howMany = F;
        }, C.prototype._promiseFulfilled = function(F) {
          return this._addFulfilled(F), this._fulfilled() === this.howMany() ? (this._values.length = this.howMany(), this.howMany() === 1 && this._unwrap ? this._resolve(this._values[0]) : this._resolve(this._values), !0) : !1;
        }, C.prototype._promiseRejected = function(F) {
          return this._addRejected(F), this._checkOutcome();
        }, C.prototype._promiseCancelled = function() {
          return this._values instanceof k || this._values == null ? this._cancel() : (this._addRejected(Y), this._checkOutcome());
        }, C.prototype._checkOutcome = function() {
          if (this.howMany() > this._canPossiblyFulfill()) {
            for (var F = new H(), q = this.length(); q < this._values.length; ++q)
              this._values[q] !== Y && F.push(this._values[q]);
            return F.length > 0 ? this._reject(F) : this._cancel(), !0;
          }
          return !1;
        }, C.prototype._fulfilled = function() {
          return this._totalResolved;
        }, C.prototype._rejected = function() {
          return this._values.length - this.length();
        }, C.prototype._addRejected = function(F) {
          this._values.push(F);
        }, C.prototype._addFulfilled = function(F) {
          this._values[this._totalResolved++] = F;
        }, C.prototype._canPossiblyFulfill = function() {
          return this.length() - this._rejected();
        }, C.prototype._getRangeError = function(F) {
          var q = "Input array must contain at least " + this._howMany + " items but contains only " + F + " items";
          return new U(q);
        }, C.prototype._resolveEmptyArray = function() {
          this._reject(this._getRangeError(0));
        }, k.some = function(F, q) {
          return p(F, q);
        }, k.prototype.some = function(F) {
          return p(this, F);
        }, k._SomePromiseArray = C;
      };
    }, { "./errors": 12, "./util": 36 }], 32: [function(l, n, L) {
      n.exports = function(k) {
        function re(K) {
          K !== void 0 ? (K = K._target(), this._bitField = K._bitField, this._settledValueField = K._isFateSealed() ? K._settledValue() : void 0) : (this._bitField = 0, this._settledValueField = void 0);
        }
        re.prototype._settledValue = function() {
          return this._settledValueField;
        };
        var R = re.prototype.value = function() {
          if (!this.isFulfilled())
            throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);
          return this._settledValue();
        }, C = re.prototype.error = re.prototype.reason = function() {
          if (!this.isRejected())
            throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);
          return this._settledValue();
        }, p = re.prototype.isFulfilled = function() {
          return (33554432 & this._bitField) !== 0;
        }, N = re.prototype.isRejected = function() {
          return (16777216 & this._bitField) !== 0;
        }, U = re.prototype.isPending = function() {
          return (50397184 & this._bitField) === 0;
        }, H = re.prototype.isResolved = function() {
          return (50331648 & this._bitField) !== 0;
        };
        re.prototype.isCancelled = function() {
          return (8454144 & this._bitField) !== 0;
        }, k.prototype.__isCancelled = function() {
          return (65536 & this._bitField) === 65536;
        }, k.prototype._isCancelled = function() {
          return this._target().__isCancelled();
        }, k.prototype.isCancelled = function() {
          return (8454144 & this._target()._bitField) !== 0;
        }, k.prototype.isPending = function() {
          return U.call(this._target());
        }, k.prototype.isRejected = function() {
          return N.call(this._target());
        }, k.prototype.isFulfilled = function() {
          return p.call(this._target());
        }, k.prototype.isResolved = function() {
          return H.call(this._target());
        }, k.prototype.value = function() {
          return R.call(this._target());
        }, k.prototype.reason = function() {
          var K = this._target();
          return K._unsetRejectionIsUnhandled(), C.call(K);
        }, k.prototype._value = function() {
          return this._settledValue();
        }, k.prototype._reason = function() {
          return this._unsetRejectionIsUnhandled(), this._settledValue();
        }, k.PromiseInspection = re;
      };
    }, {}], 33: [function(l, n, L) {
      n.exports = function(k, re) {
        function R(q, O) {
          if (Y(q)) {
            if (q instanceof k)
              return q;
            var J = p(q);
            if (J === K) {
              O && O._pushContext();
              var E = k.reject(J.e);
              return O && O._popContext(), E;
            }
            if (typeof J == "function") {
              if (N(q)) {
                var E = new k(re);
                return q._then(E._fulfill, E._reject, void 0, E, null), E;
              }
              return U(q, J, O);
            }
          }
          return q;
        }
        function C(q) {
          return q.then;
        }
        function p(q) {
          try {
            return C(q);
          } catch (O) {
            return K.e = O, K;
          }
        }
        function N(q) {
          try {
            return F.call(q, "_promise0");
          } catch {
            return !1;
          }
        }
        function U(q, O, J) {
          function E(Re) {
            Ee && (Ee._resolveCallback(Re), Ee = null);
          }
          function me(Re) {
            Ee && (Ee._rejectCallback(Re, Oe, !0), Ee = null);
          }
          var Ee = new k(re), Le = Ee;
          J && J._pushContext(), Ee._captureStackTrace(), J && J._popContext();
          var Oe = !0, Te = H.tryCatch(O).call(q, E, me);
          return Oe = !1, Ee && Te === K && (Ee._rejectCallback(Te.e, !0, !0), Ee = null), Le;
        }
        var H = l("./util"), K = H.errorObj, Y = H.isObject, F = {}.hasOwnProperty;
        return R;
      };
    }, { "./util": 36 }], 34: [function(l, n, L) {
      n.exports = function(k, re, R) {
        function C(q) {
          this.handle = q;
        }
        function p(q) {
          return clearTimeout(this.handle), q;
        }
        function N(q) {
          throw clearTimeout(this.handle), q;
        }
        var U = l("./util"), H = k.TimeoutError;
        C.prototype._resultCancelled = function() {
          clearTimeout(this.handle);
        };
        var K = function(q) {
          return Y(+this).thenReturn(q);
        }, Y = k.delay = function(q, O) {
          var J, E;
          return O !== void 0 ? (J = k.resolve(O)._then(K, null, null, q, void 0), R.cancellation() && O instanceof k && J._setOnCancel(O)) : (J = new k(re), E = setTimeout(function() {
            J._fulfill();
          }, +q), R.cancellation() && J._setOnCancel(new C(E)), J._captureStackTrace()), J._setAsyncGuaranteed(), J;
        };
        k.prototype.delay = function(q) {
          return Y(q, this);
        };
        var F = function(q, O, J) {
          var E;
          E = typeof O != "string" ? O instanceof Error ? O : new H("operation timed out") : new H(O), U.markAsOriginatingFromRejection(E), q._attachExtraTrace(E), q._reject(E), J != null && J.cancel();
        };
        k.prototype.timeout = function(q, O) {
          q = +q;
          var J, E, me = new C(setTimeout(function() {
            J.isPending() && F(J, O, E);
          }, q));
          return R.cancellation() ? (E = this.then(), J = E._then(p, N, void 0, me, void 0), J._setOnCancel(me)) : J = this._then(p, N, void 0, me, void 0), J;
        };
      };
    }, { "./util": 36 }], 35: [function(l, n, L) {
      n.exports = function(k, re, R, C, p, N) {
        function U(Te) {
          setTimeout(function() {
            throw Te;
          }, 0);
        }
        function H(Te) {
          var Re = R(Te);
          return Re !== Te && typeof Te._isDisposable == "function" && typeof Te._getDisposer == "function" && Te._isDisposable() && Re._setDisposable(Te._getDisposer()), Re;
        }
        function K(Te, Re) {
          function Ve() {
            if (We >= le)
              return je._fulfill();
            var fe = H(Te[We++]);
            if (fe instanceof k && fe._isDisposable()) {
              try {
                fe = R(fe._getDisposer().tryDispose(Re), Te.promise);
              } catch (Me) {
                return U(Me);
              }
              if (fe instanceof k)
                return fe._then(Ve, U, null, null, null);
            }
            Ve();
          }
          var We = 0, le = Te.length, je = new k(p);
          return Ve(), je;
        }
        function Y(Te, Re, Ve) {
          this._data = Te, this._promise = Re, this._context = Ve;
        }
        function F(Te, Re, Ve) {
          this.constructor$(Te, Re, Ve);
        }
        function q(Te) {
          return Y.isDisposer(Te) ? (this.resources[this.index]._setDisposable(Te), Te.promise()) : Te;
        }
        function O(Te) {
          this.length = Te, this.promise = null, this[Te - 1] = null;
        }
        var J = l("./util"), E = l("./errors").TypeError, me = l("./util").inherits, Ee = J.errorObj, Le = J.tryCatch, Oe = {};
        Y.prototype.data = function() {
          return this._data;
        }, Y.prototype.promise = function() {
          return this._promise;
        }, Y.prototype.resource = function() {
          return this.promise().isFulfilled() ? this.promise().value() : Oe;
        }, Y.prototype.tryDispose = function(Te) {
          var Re = this.resource(), Ve = this._context;
          Ve !== void 0 && Ve._pushContext();
          var We = Re !== Oe ? this.doDispose(Re, Te) : null;
          return Ve !== void 0 && Ve._popContext(), this._promise._unsetDisposable(), this._data = null, We;
        }, Y.isDisposer = function(Te) {
          return Te != null && typeof Te.resource == "function" && typeof Te.tryDispose == "function";
        }, me(F, Y), F.prototype.doDispose = function(Te, Re) {
          var Ve = this.data();
          return Ve.call(Te, Te, Re);
        }, O.prototype._resultCancelled = function() {
          for (var Te = this.length, Re = 0; Te > Re; ++Re) {
            var Ve = this[Re];
            Ve instanceof k && Ve.cancel();
          }
        }, k.using = function() {
          var Te = arguments.length;
          if (2 > Te)
            return re("you must pass at least 2 arguments to Promise.using");
          var Re = arguments[Te - 1];
          if (typeof Re != "function")
            return re("expecting a function but got " + J.classString(Re));
          var Ve, We = !0;
          Te === 2 && Array.isArray(arguments[0]) ? (Ve = arguments[0], Te = Ve.length, We = !1) : (Ve = arguments, Te--);
          for (var le = new O(Te), je = 0; Te > je; ++je) {
            var fe = Ve[je];
            if (Y.isDisposer(fe)) {
              var Me = fe;
              fe = fe.promise(), fe._setDisposable(Me);
            } else {
              var Z = R(fe);
              Z instanceof k && (fe = Z._then(q, null, null, { resources: le, index: je }, void 0));
            }
            le[je] = fe;
          }
          for (var Ue = new Array(le.length), je = 0; je < Ue.length; ++je)
            Ue[je] = k.resolve(le[je]).reflect();
          var ct = k.all(Ue).then(function(at) {
            for (var Ye = 0; Ye < at.length; ++Ye) {
              var Et = at[Ye];
              if (Et.isRejected())
                return Ee.e = Et.error(), Ee;
              if (!Et.isFulfilled())
                return void ct.cancel();
              at[Ye] = Et.value();
            }
            mt._pushContext(), Re = Le(Re);
            var Je = We ? Re.apply(void 0, at) : Re(at), ce = mt._popContext();
            return N.checkForgottenReturns(Je, ce, "Promise.using", mt), Je;
          }), mt = ct.lastly(function() {
            var at = new k.PromiseInspection(ct);
            return K(le, at);
          });
          return le.promise = mt, mt._setOnCancel(le), mt;
        }, k.prototype._setDisposable = function(Te) {
          this._bitField = 131072 | this._bitField, this._disposer = Te;
        }, k.prototype._isDisposable = function() {
          return (131072 & this._bitField) > 0;
        }, k.prototype._getDisposer = function() {
          return this._disposer;
        }, k.prototype._unsetDisposable = function() {
          this._bitField = -131073 & this._bitField, this._disposer = void 0;
        }, k.prototype.disposer = function(Te) {
          if (typeof Te == "function")
            return new F(Te, this, C());
          throw new E();
        };
      };
    }, { "./errors": 12, "./util": 36 }], 36: [function(l, n, L) {
      function k() {
        try {
          var Ge = Me;
          return Me = null, Ge.apply(this, arguments);
        } catch (lt) {
          return fe.e = lt, fe;
        }
      }
      function re(Ge) {
        return Me = Ge, k;
      }
      function R(Ge) {
        return Ge == null || Ge === !0 || Ge === !1 || typeof Ge == "string" || typeof Ge == "number";
      }
      function C(Ge) {
        return typeof Ge == "function" || typeof Ge == "object" && Ge !== null;
      }
      function p(Ge) {
        return R(Ge) ? new Error(J(Ge)) : Ge;
      }
      function N(Ge, lt) {
        var ot, Kt = Ge.length, Lt = new Array(Kt + 1);
        for (ot = 0; Kt > ot; ++ot)
          Lt[ot] = Ge[ot];
        return Lt[ot] = lt, Lt;
      }
      function U(Ge, lt, ot) {
        if (!le.isES5)
          return {}.hasOwnProperty.call(Ge, lt) ? Ge[lt] : void 0;
        var Kt = Object.getOwnPropertyDescriptor(Ge, lt);
        return Kt != null ? Kt.get == null && Kt.set == null ? Kt.value : ot : void 0;
      }
      function H(Ge, lt, ot) {
        if (R(Ge))
          return Ge;
        var Kt = { value: ot, configurable: !0, enumerable: !1, writable: !0 };
        return le.defineProperty(Ge, lt, Kt), Ge;
      }
      function K(Ge) {
        throw Ge;
      }
      function Y(Ge) {
        try {
          if (typeof Ge == "function") {
            var lt = le.names(Ge.prototype), ot = le.isES5 && lt.length > 1, Kt = lt.length > 0 && !(lt.length === 1 && lt[0] === "constructor"), Lt = mt.test(Ge + "") && le.names(Ge).length > 0;
            if (ot || Kt || Lt)
              return !0;
          }
          return !1;
        } catch {
          return !1;
        }
      }
      function F(Ge) {
        function lt() {
        }
        function ot() {
          return typeof Kt.foo;
        }
        lt.prototype = Ge;
        var Kt = new lt();
        return ot(), ot(), Ge;
      }
      function q(Ge) {
        return at.test(Ge);
      }
      function O(Ge, lt, ot) {
        for (var Kt = new Array(Ge), Lt = 0; Ge > Lt; ++Lt)
          Kt[Lt] = lt + Lt + ot;
        return Kt;
      }
      function J(Ge) {
        try {
          return Ge + "";
        } catch {
          return "[no string representation]";
        }
      }
      function E(Ge) {
        return Ge instanceof Error || Ge !== null && typeof Ge == "object" && typeof Ge.message == "string" && typeof Ge.name == "string";
      }
      function me(Ge) {
        try {
          H(Ge, "isOperational", !0);
        } catch {
        }
      }
      function Ee(Ge) {
        return Ge == null ? !1 : Ge instanceof Error.__BluebirdErrorTypes__.OperationalError || Ge.isOperational === !0;
      }
      function Le(Ge) {
        return E(Ge) && le.propertyIsWritable(Ge, "stack");
      }
      function Oe(Ge) {
        return {}.toString.call(Ge);
      }
      function Te(Ge, lt, ot) {
        for (var Kt = le.names(Ge), Lt = 0; Lt < Kt.length; ++Lt) {
          var bn = Kt[Lt];
          if (ot(bn))
            try {
              le.defineProperty(lt, bn, le.getDescriptor(Ge, bn));
            } catch {
            }
        }
      }
      function Re(Ge) {
        return Ht ? process.env[Ge] : void 0;
      }
      function Ve() {
        if (typeof Promise == "function")
          try {
            var Ge = new Promise(function() {
            });
            if (Oe(Ge) === "[object Promise]")
              return Promise;
          } catch {
          }
      }
      function We(Ge, lt) {
        if (Ge === null || typeof lt != "function" || lt === Dt)
          return lt;
        Ge.domain !== null && (lt = Ge.domain.bind(lt));
        var ot = Ge.async;
        if (ot !== null) {
          var Kt = lt;
          lt = function() {
            var Lt = new Array(2).concat([].slice.call(arguments));
            return Lt[0] = Kt, Lt[1] = this, ot.runInAsyncScope.apply(ot, Lt);
          };
        }
        return lt;
      }
      var le = l("./es5"), je = typeof navigator > "u", fe = { e: {} }, Me, Z = typeof self < "u" ? self : typeof window < "u" ? window : typeof global < "u" ? global : this !== void 0 ? this : null, Ue = function(Ge, lt) {
        function ot() {
          this.constructor = Ge, this.constructor$ = lt;
          for (var Lt in lt.prototype)
            Kt.call(lt.prototype, Lt) && Lt.charAt(Lt.length - 1) !== "$" && (this[Lt + "$"] = lt.prototype[Lt]);
        }
        var Kt = {}.hasOwnProperty;
        return ot.prototype = lt.prototype, Ge.prototype = new ot(), Ge.prototype;
      }, ct = function() {
        var Ge = [Array.prototype, Object.prototype, Function.prototype], lt = function(Lt) {
          for (var bn = 0; bn < Ge.length; ++bn)
            if (Ge[bn] === Lt)
              return !0;
          return !1;
        };
        if (le.isES5) {
          var ot = Object.getOwnPropertyNames;
          return function(Lt) {
            for (var bn = [], Fn = /* @__PURE__ */ Object.create(null); Lt != null && !lt(Lt); ) {
              var wn;
              try {
                wn = ot(Lt);
              } catch {
                return bn;
              }
              for (var ge = 0; ge < wn.length; ++ge) {
                var Wt = wn[ge];
                if (!Fn[Wt]) {
                  Fn[Wt] = !0;
                  var xt = Object.getOwnPropertyDescriptor(Lt, Wt);
                  xt != null && xt.get == null && xt.set == null && bn.push(Wt);
                }
              }
              Lt = le.getPrototypeOf(Lt);
            }
            return bn;
          };
        }
        var Kt = {}.hasOwnProperty;
        return function(Lt) {
          if (lt(Lt))
            return [];
          var bn = [];
          e:
            for (var Fn in Lt)
              if (Kt.call(Lt, Fn))
                bn.push(Fn);
              else {
                for (var wn = 0; wn < Ge.length; ++wn)
                  if (Kt.call(Ge[wn], Fn))
                    continue e;
                bn.push(Fn);
              }
          return bn;
        };
      }(), mt = /this\s*\.\s*\S+\s*=/, at = /^[a-z$_][a-z$_0-9]*$/i, Ye = function() {
        return "stack" in new Error() ? function(Ge) {
          return Le(Ge) ? Ge : new Error(J(Ge));
        } : function(Ge) {
          if (Le(Ge))
            return Ge;
          try {
            throw new Error(J(Ge));
          } catch (lt) {
            return lt;
          }
        };
      }(), Et = function(Ge) {
        return le.isArray(Ge) ? Ge : null;
      };
      if (typeof Symbol < "u" && Symbol.iterator) {
        var Je = typeof Array.from == "function" ? function(Ge) {
          return Array.from(Ge);
        } : function(Ge) {
          for (var lt, ot = [], Kt = Ge[Symbol.iterator](); !(lt = Kt.next()).done; )
            ot.push(lt.value);
          return ot;
        };
        Et = function(Ge) {
          return le.isArray(Ge) ? Ge : Ge != null && typeof Ge[Symbol.iterator] == "function" ? Je(Ge) : null;
        };
      }
      var ce = typeof process < "u" && Oe(process).toLowerCase() === "[object process]", Ht = typeof process < "u" && typeof process.env < "u", Dt, Be = { setReflectHandler: function(Ge) {
        Dt = Ge;
      }, isClass: Y, isIdentifier: q, inheritedDataKeys: ct, getDataPropertyOrDefault: U, thrower: K, isArray: le.isArray, asArray: Et, notEnumerableProp: H, isPrimitive: R, isObject: C, isError: E, canEvaluate: je, errorObj: fe, tryCatch: re, inherits: Ue, withAppended: N, maybeWrapAsError: p, toFastProperties: F, filledRange: O, toString: J, canAttachTrace: Le, ensureErrorObject: Ye, originatesFromRejection: Ee, markAsOriginatingFromRejection: me, classString: Oe, copyDescriptors: Te, isNode: ce, hasEnvVariables: Ht, env: Re, global: Z, getNativePromise: Ve, contextBind: We };
      Be.isRecentNode = Be.isNode && function() {
        var Ge;
        return process.versions && process.versions.node ? Ge = process.versions.node.split(".").map(Number) : process.version && (Ge = process.version.split(".").map(Number)), Ge[0] === 0 && Ge[1] > 10 || Ge[0] > 0;
      }(), Be.nodeSupportsAsyncResource = Be.isNode && function() {
        var Ge = !1;
        try {
          var lt = l("async_hooks").AsyncResource;
          Ge = typeof lt.prototype.runInAsyncScope == "function";
        } catch {
          Ge = !1;
        }
        return Ge;
      }(), Be.isNode && Be.toFastProperties(process);
      try {
        throw new Error();
      } catch (Ge) {
        Be.lastLineError = Ge;
      }
      n.exports = Be;
    }, { "./es5": 13, async_hooks: void 0 }] }, {}, [4])(4);
  }), typeof window < "u" && window !== null ? window.P = window.Promise : typeof self < "u" && self !== null && (self.P = self.Promise);
}
(function() {
  var l, n = Xi.Dynamsoft;
  function L(ye) {
    return ye === l;
  }
  function k(ye) {
    return ye !== l;
  }
  function re(ye) {
    return ye === null;
  }
  var R = { "[object Function]": "function", "[object String]": "string", "[object Object]": "object", "[object Boolean]": "boolean", "[object Number]": "number", "[object Array]": "array" };
  function C(ye) {
    return re(ye) || L(ye) ? String(ye) : R[{}.toString.call(ye)] || "object";
  }
  function p(ye) {
    return C(ye) === "function";
  }
  function N(ye) {
    return C(ye) === "string";
  }
  function U(ye) {
    return C(ye) === "object";
  }
  function H(ye) {
    return C(ye) === "boolean";
  }
  function K(ye) {
    return C(ye) === "number";
  }
  function Y(ye) {
    return Array.isArray ? Array.isArray(ye) : C(ye) === "array";
  }
  var F = !0, q = !1;
  function O(ye, oe, ae) {
    if (ye) {
      var ie = void 0, _e = void 0, de = void 0, Se = 0, Ae = ye.length;
      if (ae = ae || null, L(Ae) || p(ye))
        for (de = Object.keys(ye); Se < de.length && (ie = de[Se], oe.call(ae, ye[ie], ie, ye) !== q); Se++)
          ;
      else
        for (_e = ye[0]; Se < Ae && oe.call(ae, _e, Se, ye) !== q; _e = ye[++Se])
          ;
    }
    return ye;
  }
  var J = {}.hasOwnProperty;
  function E(ye) {
    if (!ye || C(ye) !== "object" || ye.nodeType || ye.window == ye)
      return q;
    var oe, ae;
    try {
      if ((ae = ye.constructor) && !J(ye, "constructor") && !J(ae.prototype, "isPrototypeOf"))
        return q;
    } catch {
      return q;
    }
    for (oe in ye)
      ;
    return L(oe) || J(ye, oe);
  }
  var me = typeof HTMLElement == "object";
  function Ee(ye) {
    return me ? ye instanceof HTMLElement : ye && typeof ye == "object" && (ye.nodeType === 1 || ye.nodeType === 9) && typeof ye.nodeName == "string";
  }
  function Le(ye) {
    var oe = ye;
    if (Ee(ye))
      for (; !oe && oe != document.body; )
        oe = oe.parentNode;
    else
      oe = 0;
    return !!oe;
  }
  var Oe = "", Te = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, Re = String.prototype, Ve = Re.trim;
  function We(ye, oe) {
    return ye.lastIndexOf(oe, 0) === 0;
  }
  function le(ye, oe) {
    var ae = ye.length - oe.length;
    return ae >= 0 && ye.indexOf(oe, ae) === ae;
  }
  function je(ye) {
    return ye == null ? Oe : Ve.call(ye);
  }
  function fe(ye) {
    if (ye == null)
      return [];
    if (Y(ye))
      return ye;
    var oe = typeof ye.length, ae = typeof ye;
    if (oe !== "number" || ye.alert || ae === "string" || ae === "function" && (!("item" in ye) || oe !== "number"))
      return [ye];
    for (var ie = [], _e = 0, de = ye.length; _e < de; _e++)
      ie[_e] = ye[_e];
    return ie;
  }
  function Me(ye) {
    var oe = ye ? new Date(ye) : /* @__PURE__ */ new Date(), ae = "yyyy-MM-dd HH:mm:ss.SSSZ", ie = { "M+": oe.getUTCMonth() + 1, "d+": oe.getUTCDate(), "H+": oe.getUTCHours(), "h+": oe.getUTCHours() % 12 || 12, "m+": oe.getUTCMinutes(), "s+": oe.getUTCSeconds(), "q+": Math.floor((oe.getUTCMonth() + 3) / 3), "S+": oe.getUTCMilliseconds() };
    for (var _e in /(y+)/.test(ae) && (ae = ae.replace(RegExp.$1, (oe.getUTCFullYear() + "").substr(4 - RegExp.$1.length))), ie)
      new RegExp("(" + _e + ")").test(ae) && (ae = ae.replace(RegExp.$1, RegExp.$1.length == 1 ? ie[_e] : ("000" + ie[_e]).substr(("000" + ie[_e]).length - RegExp.$1.length)));
    return ae;
  }
  Ve || (Ve = Re.trim = function() {
    return this.replace(Te, Oe);
  });
  var Z, Ue, ct = n.Lib, mt = ct.win;
  function at(ye, oe, ae, ie) {
    if (ct.debug && Ue && p(Ue.log)) {
      var _e = Me((/* @__PURE__ */ new Date()).getTime()), de = fe(arguments);
      Ue.log(["[", _e, "] ", de].join(""));
    }
  }
  function Ye(ye, oe, ae, ie) {
    if ((ct.debug || ct.showConsoleError) && Ue && p(Ue.error)) {
      var _e = Me((/* @__PURE__ */ new Date()).getTime()), de = fe(arguments);
      Ue.error(["[", _e, "] ", de].join(""));
    }
  }
  function Et(ye, oe, ae, ie) {
    if (ct.debug && Ue && p(Ue.warn)) {
      var _e = Me((/* @__PURE__ */ new Date()).getTime()), de = fe(arguments);
      Ue.warn(["[", _e, "] ", de].join(""));
    }
  }
  function Je(ye, oe, ae, ie) {
    if (ct.debug && Ue && p(Ue.info)) {
      var _e = Me((/* @__PURE__ */ new Date()).getTime()), de = fe(arguments);
      Ue.info(["[", _e, "] ", de].join(""));
    }
  }
  function ce(ye, oe) {
    var ae;
    for (ae in oe)
      oe.hasOwnProperty(ae) && (ye[ae] = oe[ae]);
    return ye;
  }
  function Ht(ye) {
    if (ye == null || typeof ye != "object")
      return ye;
    var oe, ae, ie;
    if (ye instanceof Date)
      return (oe = /* @__PURE__ */ new Date()).setTime(ye.getTime()), oe;
    if (ye instanceof Array) {
      for (oe = [], ie = ye.length, ae = 0; ae < ie; ae++)
        oe[ae] = Ht(ye[ae]);
      return oe;
    }
    if (ye instanceof Object) {
      for (ae in oe = {}, ye)
        ye.hasOwnProperty(ae) && (oe[ae] = Ht(ye[ae]));
      return oe;
    }
    return 0;
  }
  mt && k(mt.console) && (p((Ue = mt.console).log) && p(Ue.error) ? Z = { log: at, error: Ye, info: Je, warn: Et, debug: function(ye, oe, ae, ie) {
    if (ct.debug && Ue && p(Ue.debug)) {
      var _e = Me((/* @__PURE__ */ new Date()).getTime()), de = fe(arguments);
      Ue.debug(["[", _e, "] ", de].join(""));
    }
  } } : (Ue = !1, Z = !1)), ct.showConsoleError = !1;
  var Dt = /[#\/\?@]/g, Be = /[#\?]/g, Ge = { scheme: 1, userInfo: 2, hostname: 3, port: 4, path: 5 }, lt = new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?(.+)?$");
  function ot(ye, oe) {
    return N(ye) && N(oe) ? ye.toLowerCase() === oe.toLowerCase() : ye === oe;
  }
  function Kt(ye, oe) {
    return encodeURI(ye).replace(oe, function(ae) {
      return "%" + function(ie) {
        return ie.length === 1 ? "0" + ie : ie;
      }(ae.charCodeAt(0).toString(16));
    });
  }
  var Lt = function() {
    function ye(oe) {
      if (this.scheme = "", this.userInfo = "", this.hostname = "", this.port = "", this.path = "", oe instanceof ye)
        return Ht(oe);
      ye.getComponents(oe, this);
    }
    return ye.prototype.clone = function() {
      var oe = new ye(), ae = this;
      return O(Ge, function(ie, _e) {
        oe[_e] = ae[_e];
      }), oe;
    }, ye.prototype.getScheme = function() {
      return this.scheme;
    }, ye.prototype.setScheme = function(oe) {
      return this.scheme = oe, this;
    }, ye.prototype.getHostname = function() {
      return this.hostname;
    }, ye.prototype.setHostname = function(oe) {
      return this.hostname = oe, this;
    }, ye.prototype.setUserInfo = function(oe) {
      return this.userInfo = oe, this;
    }, ye.prototype.getUserInfo = function() {
      return this.userInfo;
    }, ye.prototype.setPort = function(oe) {
      return this.port = oe, this;
    }, ye.prototype.getPort = function() {
      return this.port;
    }, ye.prototype.setPath = function(oe) {
      return this.path = oe, this;
    }, ye.prototype.getPath = function() {
      return this.path;
    }, ye.prototype.isSameOriginAs = function(oe) {
      var ae = this;
      return ot(ae.hostname, oe.hostname) && ot(ae.scheme, oe.scheme) && ot(ae.port, oe.port);
    }, ye.prototype.toString = function(oe) {
      var ae, ie, _e, de, Se, Ae = [], ze = this;
      return (ae = ze.scheme) && (Ae.push(Kt(ae, Dt)), Ae.push(":")), (ie = ze.hostname) && (Ae.push("//"), (Se = ze.userInfo) && (Ae.push(Kt(Se, Dt)), Ae.push("@")), Ae.push(encodeURIComponent(ie)), (de = ze.port) && (Ae.push(":"), Ae.push(de))), (_e = ze.path) && (ie && !We(_e, "/") && (_e = "/" + _e), Ae.push(Kt(_e, Be))), Ae.join("");
    }, ye.getComponents = function(oe, ae) {
      var ie = (oe = oe || Oe).match(lt) || [], _e = ae || {};
      return O(Ge, function(de, Se) {
        _e[Se] = ie[de];
      }), _e;
    }, ye;
  }(), bn = n.Lib, Fn = n.navInfoSync, wn = Fn.bIE && parseInt(Fn.IEVersion) <= 9, ge = Fn.bIE && parseInt(Fn.IEVersion) <= 10, Wt = bn.win, xt = new Lt(location.href), He = xt && /^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(xt.getScheme()), Ne = !1, bt = function() {
    try {
      return new Wt.XMLHttpRequest();
    } catch {
    }
  }, Ut = function() {
    try {
      var ye = q;
      return O(["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.3.0", "Msxml3.XMLHTTP"], function(oe) {
        try {
          if (!ye)
            return ye = new Wt.ActiveXObject(oe), q;
        } catch (ae) {
          Ye("new xhr error: " + ae.message);
        }
      }), ye;
    } catch {
    }
  }, Zt = !(He || !Wt.XMLHttpRequest) && "withCredentials" in (bt() || []), rt = Wt.ActiveXObject ? function(ye) {
    return wn ? Ut() : !He && bt() || Ut();
  } : bt, Xt = function(ye) {
    return Ne;
  }, dn = /^(?:GET|HEAD)$/, an = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, Rn = { xml: "application/xml, text/xml", html: "text/html", text: "text/plain", json: "application/json, text/javascript", "*": "*/*" }, xr = void 0;
  ge && (xr = function() {
  });
  var hr = function() {
    function ye() {
      this.url = !1, this.onSuccess = !1, this.onError = !1, this.onComplete = !1, this.method = "GET", this.async = !0, this.xhrFields = !1, this.mimeType = !1, this.username = !1, this.password = !1, this.data = !1, this.dataType = "text", this.headers = !1, this.contentType = "application/x-www-form-urlencoded; charset=UTF-8", this.beforeSend = !1, this.afterSend = !1, this.timeout = 0, this.cache = !0, this.crossDomain = !1, this.retry = 0;
    }
    return ye.prototype.setRequestHeader = function(oe, ae) {
      this.headers[oe] = ae;
    }, ye.prototype.getAllResponseHeaders = function() {
      return this.state === 2 ? this.responseHeadersString : null;
    }, ye.prototype.getNativeXhr = function() {
      return this.nativeXhr;
    }, ye.prototype.getResponseHeader = function(oe) {
      var ae, ie;
      if (oe = oe.toLowerCase(), this.state === 2) {
        if (!(ie = this.responseHeaders))
          for (ie = this.responseHeaders = {}; ae = an.exec(this.responseHeadersString); )
            ie[ae[1].toLowerCase()] = ae[2];
        ae = ie[oe];
      }
      return ae === void 0 ? null : ae;
    }, ye.prototype.overrideMimeType = function(oe) {
      return this.state || (this.mimeType = oe), this;
    }, ye.prototype.abort = function(oe) {
      return oe = oe || "abort", this.state = 3, this.status = 0, this.statusText = oe, this.nativeXhr && this.nativeXhr.abort(), this._callback(), this;
    }, ye.prototype._ioReady = function(oe, ae) {
      var ie = !1, _e = this;
      if (this.state !== 2 && this.state !== 3) {
        this.state === 1 && (this.state = 2), this.readyState = 4, oe >= 200 && oe < 300 || oe === 304 ? oe === 304 ? (ae = "not modified", ie = !0) : (ae = "success", ie = !0) : oe < 0 && (oe = 0);
        try {
          oe >= 200 && this.handleResponseData();
        } catch (de) {
          Ye(de, "error"), ae = de.message || "parser error";
        }
        if ((oe < 200 || !ie) && this.retry > 0)
          return this.retry = this.retry - 1, void setTimeout(function() {
            _e.sendInternal();
          }, 200);
        this.status = oe, this.statusText = ae, this._callback(ie);
      }
    }, ye.prototype._callback = function(oe) {
      var ae = this, ie = this.timeoutTimer;
      ie && (clearTimeout(ie), this.timeoutTimer = 0), O([oe ? this.onSuccess : this.onError, this.onComplete], function(_e) {
        p(_e) && _e.apply(ae.context, [ae.responseData, ae.statusText, ae]);
      }), this.responseData = null;
    }, ye.prototype.handleResponseData = function() {
      var oe, ae = this.dataType, ie = this.nativeXhr;
      if (ae === "blob" || ae === "arraybuffer")
        if (wn) {
          var _e = void 0, de = void 0;
          if ("responseBody" in ie)
            _e = ie.responseBody, de = Wt.dsVbsBinGetLength(_e), oe = new Wt.VBArray(Wt.dsVbsBinGetBytes(_e, 0, de)).toArray();
          else {
            var Se = void 0;
            for (oe = [], de = (_e = ie.responseText).length, Se = 0; Se < de; ++Se)
              oe.push(255 & _e.charCodeAt(Se));
          }
          _e = null;
        } else
          oe = Wt.Blob ? ie.response : "responseBody" in ie ? ie.responseBody : ie.responseText;
      else if (ae == "json")
        oe = ie.responseType && ie.responseType.toLowerCase() == "json" ? ie.response : ie.responseText ? n.Lib.parse(ie.responseText) : n.Lib.parse(ie.response);
      else if (ae === "user-defined")
        oe = ie.response !== void 0 ? ie.response : ie.responseText;
      else {
        this.responseText = oe = ie.responseText || "";
        try {
          var Ae = ie.responseXML;
          Ae && Ae.documentElement && (this.responseXML = Ae);
        } catch {
        }
      }
      this.responseData = oe;
    }, ye.prototype.sendInternal = function(oe) {
      var ae, ie, _e, de, Se, Ae, ze, qe, Ke, At, _n, Jt = this;
      if (N(ie = (ae = this._setup(oe)).method) && (ie = ie.toUpperCase()), Se = ae.contentType, _e = ae.url, de = ae.dataType, qe = ae.mimeType, N(_e) && (this.nativeXhr = Ae = rt(ae.crossDomain), Ae)) {
        try {
          if (this.state = 1, ae.username ? Ae.open(ie, _e, ae.async, ae.username, ae.password) : Ae.open(ie, _e, ae.async), (ae.async || Fn.bIE) && de && de != "user-defined" && "responseType" in Ae)
            try {
              Ae.responseType = de;
            } catch {
            }
        } catch (In) {
          return void (this.state < 2 ? (Ye(In, "error"), this._ioReady(-1, "open error: " + (K(In.number) ? "(" + In.number + ")" : "") + (In.message || ""))) : Ye(In));
        }
        "withCredentials" in (ze = ae.xhrFields || {}) && (Zt || delete ze.withCredentials), O(ze, function(In, jt) {
          try {
            Ae[jt] = In;
          } catch (_t) {
            Ye(_t);
          }
        }), qe && Ae.overrideMimeType && Ae.overrideMimeType(qe), (Ke = ae.headers || {})["X-Requested-With"] === !1 && delete Ke["X-Requested-With"], "setRequestHeader" in Ae && (Se && Ae.setRequestHeader("Content-Type", ae.contentType), Ae.setRequestHeader("Accept", de && Rn[de] ? Rn[de] + (de === "*" ? "" : ", */*; q=0.01") : Rn["*"]), O(Ke, function(In, jt) {
          Ae.setRequestHeader(jt, In);
        })), ae.cache || (Ae.setRequestHeader("If-Modified-Since", "0"), Ae.setRequestHeader("Cache-Control", "no-cache")), _n = (At = !dn.test(ae.method)) && ae.data || null, At && wn && (_n = ae.data), ae.async && ae.timeout > 0 && (ae.timeout < 300 && (ae.timeout = 300), this.timeoutTimer = setTimeout(function() {
          Jt.abort("timeout");
        }, ae.timeout));
        try {
          if (this.state = 1, p(this.beforeSend) && this.beforeSend(Ae, Jt) === !1)
            return void this.abort("cancel");
          Ae.send(_n), _n = null, ae.data = null, p(this.afterSend) && this.afterSend(Jt);
        } catch (In) {
          this.state < 2 ? (Ye(In, "error"), this._ioReady(-1, "send error: " + (In.message || ""))) : Ye(In);
        }
        ae.async && Ae.readyState !== 4 ? Ae.onreadystatechange = function() {
          Jt._xhrCallback();
        } : Jt._xhrCallback();
      }
    }, ye.prototype._xhrCallback = function(oe, ae) {
      var ie = this.nativeXhr;
      try {
        if (ie.readyState === 4 || ae)
          if (Xt() || (ie.onreadystatechange = xr), ae)
            ie.readyState !== 4 && ie.abort();
          else {
            Xt() || (this.responseHeadersString = ie.getAllResponseHeaders());
            var _e = ie.status, de = void 0;
            try {
              de = ie.statusText;
            } catch (Se) {
              Ye("xhr statusText error: "), Ye(Se), de = "";
            }
            this._ioReady(_e, de);
          }
      } catch (Se) {
        Ye(Se, "error"), ie.onreadystatechange = xr, ae || this._ioReady(-1, Se.message || "process error");
      }
    }, ye.prototype._setup = function(oe) {
      var ae, ie, _e, de, Se;
      if (oe) {
        for (ie in this.context = oe.context, delete oe.context, oe instanceof ye && (oe = oe.config), this.config = oe, We(de = oe.url, "//") && (oe.url = de = "http:" + de), (We(de, "http://") || We(de, "https://")) && (Se = new Lt(de)), ae = oe.dataType ? oe.dataType.toLowerCase() : "text", oe.dataType = ae, oe.method ? oe.method = oe.method.toUpperCase() : oe.method = "GET", Se && !("crossDomain" in oe) && (oe.crossDomain = !Se.isSameOriginAs(xt)), _e = oe.headers)
          L(_e[ie]) && delete _e[ie];
        ce(this, oe);
      }
      return this.state = 1, this;
    }, ye;
  }();
  function Vr(ye) {
    if (ye && N(ye.url)) {
      var oe = new hr();
      return oe.sendInternal(ye), oe;
    }
    at("the url is error.");
  }
  var Zn = function() {
    function ye() {
    }
    return ye.prototype.get = function(oe, ae, ie, _e) {
      return Vr({ method: "GET", url: oe, onSuccess: ae, onError: ie, dataType: _e });
    }, ye.prototype.post = function(oe, ae, ie, _e, de) {
      return Vr({ method: "POST", data: ae, url: oe, onSuccess: ie, onError: _e, dataType: de });
    }, ye.prototype.put = function(oe, ae, ie, _e, de) {
      return Vr({ method: "PUT", data: ae, url: oe, onSuccess: ie, onError: _e, dataType: de });
    }, ye;
  }();
  function It(ye) {
    var oe, ae;
    if (!n.Lib.bNode && !n.navInfoSync.bJSDom) {
      var ie = n.Lib.doc;
      if (ie && N(ae = ye.body) && ae != Oe) {
        (oe = ie.createElement("script")).charset = "utf-8", n.navInfoSync.bIE ? oe.text = ae : oe.appendChild(ie.createTextNode(ae)), ye.language ? oe.language = ye.language : oe.language = "javascript", ye.type ? oe.type = ye.type : oe.type = "text/javascript";
        var _e = ie && ie.documentElement, de = ie.getElementsByTagName("head")[0] || _e;
        de.insertBefore(oe, de.firstChild);
      }
    }
  }
  function Mt(ye) {
    It({ body: ye });
  }
  function Yt(ye) {
    It({ body: ye, language: "vbscript", type: "text/vbscript" });
  }
  var $t, Pn, nr, _r = n.Lib, vr = _r.win, Fr = n.navInfoSync, Or = Fr.bIE && parseInt(Fr.IEVersion) <= 9;
  ($t = self && self.fetch ? self.fetch : vr.fetch) ? nr = function(ye, oe) {
    var ae = "text", ie = !1;
    if (oe && (oe.dataType && (ae = oe.dataType), oe.fetchRaw && (ie = !0), oe.timeout)) {
      var _e = oe.timeout;
      _e < 300 && (_e = 300);
      var de = new AbortController();
      oe.signal = de.signal, setTimeout(function() {
        de.abort();
      }, _e);
    }
    var Se = $t(ye, oe).then(function(Ae) {
      if (Ae.ok)
        return Ae;
      throw { httpCode: Ae.status, errorString: ["HTTP process error: ", Ae.statusText, " (", Ae.status, ")."].join("") };
    });
    return ie ? Se : Se = ae == "blob" ? Se.then(function(Ae) {
      return Ae.blob();
    }) : ae == "json" ? Se.then(function(Ae) {
      return Ae.json();
    }) : ae == "arraybuffer" ? Se.then(function(Ae) {
      return Ae.arrayBuffer();
    }) : Se.then(function(Ae) {
      return Ae.text();
    });
  } : (Or && Yt([`Function dsVbsBinGetAt(strBinary,iOffset)\r
`, ` dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r
`, `End Function\r
`, `Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r
`, ` Dim aBytes()\r
`, ` ReDim aBytes(iLength-1)\r
`, ` For i=0 To iLength-1\r
`, `  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r
`, ` Next\r
`, ` dsVbsBinGetBytes=aBytes\r
`, `End Function\r
`, `Function dsVbsBinGetLength(strBinary)\r
`, ` dsVbsBinGetLength=LenB(strBinary)\r
`, "End Function"].join("")), nr = function(ye, oe) {
    return new (_r.nativePromise || window.Promise)(function(ae, ie) {
      var _e = { url: ye, onSuccess: function(Se, Ae, ze) {
        ae(Se);
      }, onError: function(Se, Ae, ze) {
        ie({ httpCode: ze.status, errorString: Ae });
      }, dataType: "text", method: Pn, data: Pn, headers: Pn, contentType: Pn, mimeType: Pn }, de = !1;
      oe && (oe.method && (_e.method = oe.method), oe.body && (_e.data = oe.body), oe.headers && (_e.headers || (_e.headers = {}), O(oe.headers, function(Se, Ae) {
        Ae.toLowerCase() == "content-type" && (de = !0), _e.headers[Ae] = Se;
      })), oe.dataType && (_e.dataType = oe.dataType), oe.contentType && (_e.contentType = oe.contentType)), de && (_e.contentType = !1), _e.dataType == "blob" && Or && (_e.mimeType = "text/plain; charset=x-user-defined"), Vr(_e);
    });
  });
  var Jr = n.Lib, $n = Jr.bNode, no = Jr.Promise || ($n ? global.Promise : window.Promise);
  function Li() {
    if (n.navInfo)
      return no.resolve(n.navInfo);
    var ye, oe = Jr.bNode || n.navInfoSync.bJSDom ? void 0 : navigator;
    if (oe && "userAgentData" in oe) {
      var ae = navigator.userAgentData;
      if (ae.platform && ae.platform != "") {
        var ie = [];
        if ("brands" in ae && Jr.isArray(ae.brands) && ae.brands.length > 0 ? ie = ae.brands : "uaList" in ae && Jr.isArray(ae.uaList) && ae.uaList.length > 0 && (ie = ae.uaList), ie.length > 0)
          return (ye = function(_e) {
            var de = n.navInfoSync, Se = _e.architecture.toLowerCase(), Ae = _e.bitness == "64", ze = Se.indexOf("arm") > -1, qe = Se.indexOf("mips") > -1;
            return { bUseUserAgent: !1, bWin: de.bWin, bMac: de.bMac, bLinux: de.bLinux, bAndroid: de.bAndroid, bMobile: de.bMobile, bPad: de.bPad, bChromeOS: de.bChromeOS, bHarmonyOS: de.bHarmonyOS, bArm64: ze, bMips64: qe, bEmbed: ze || qe, bOSx64: Ae, bIE: !1, bEdge: de.bEdge, bChrome: de.bChrome, bFirefox: de.bFirefox, bSafari: de.bSafari, bOpera: de.bOpera, bGecko: !0, bHuaWeiBrowser: !1, bHTML5Edition: !0, strBrowserVersion: de.strBrowserVersion, IEMode: 0 };
          }, navigator.userAgentData.getHighEntropyValues(["platform", "platformVersion", "architecture", "bitness"]).then(ye)).then(function(_e) {
            return n.navInfo = _e, _e;
          });
      }
    }
    return n.navInfo = n.navInfoSync, no.resolve(n.navInfo);
  }
  var ei, Qi = void 0, Zi = function(ye) {
    return typeof ye == "function";
  }, _i = function(ye) {
    return Array.isArray ? Array.isArray(ye) : ye instanceof Array;
  }, Gi = function(ye) {
    return ye === !1 || ye === Qi || ye === null;
  }, Gn = "undefined", gi = typeof TypeError === Gn ? Error : TypeError;
  if (typeof process !== Gn && process.nextTick)
    ei = process.nextTick;
  else if (typeof MessageChannel !== Gn) {
    var ra = new MessageChannel(), Ro = [];
    ra.port1.onmessage = function() {
      Ro.length && Ro.shift()();
    }, ei = function(ye) {
      Ro.push(ye), ra.port2.postMessage(0);
    };
  } else
    ei = function(ye) {
      setTimeout(ye, 0);
    };
  function zn(ye) {
    ei(function() {
      throw ye;
    });
  }
  function Ur(ye) {
    return this.then(ye, Qi);
  }
  function pt(ye) {
    return this.then(Qi, ye);
  }
  function ia(ye, oe) {
    return this.then(function(ae) {
      return Zi(ye) ? ye.apply(null, _i(ae) ? ae : [ae]) : Co.onlyFuncs ? ae : ye;
    }, oe || Qi);
  }
  function ma(ye) {
    function oe() {
      ye();
    }
    return this.then(oe, oe), this;
  }
  function pa(ye) {
    return this.then(function(oe) {
      return Zi(ye) ? ye.apply(null, _i(oe) ? oe.splice(0, 0, void 0) && oe : [void 0, oe]) : Co.onlyFuncs ? oe : ye;
    }, function(oe) {
      return ye(oe);
    });
  }
  function Vo(ye) {
    return this.then(Qi, ye ? function(oe) {
      throw ye(oe), oe;
    } : zn);
  }
  var Co = function() {
    function ye(oe) {
      this.alwaysAsyncFn = null, this.status = 0, this.pendings = [], this.promise = { then: function(ae, ie) {
        var _e = new ye();
        return this.pendings.push([function(de) {
          try {
            Gi(ae) ? _e.resolve(de) : _e.resolve(Zi(ae) ? ae(de) : ye.onlyFuncs ? de : ae);
          } catch (Se) {
            _e.reject(Se);
          }
        }, function(de) {
          if ((Gi(ie) || !Zi(ie) && ye.onlyFuncs) && _e.reject(de), ie)
            try {
              _e.resolve(Zi(ie) ? ie(de) : ie);
            } catch (Se) {
              _e.reject(Se);
            }
        }]), this.status !== 0 && this.alwaysAsyncFn(this.execCallbacks), _e.promise;
      }, success: Ur, error: pt, otherwise: pt, apply: ia, spread: ia, ensure: ma, nodify: pa, rethrow: Vo, isPending: function() {
        return this.status === 0;
      }, getStatus: function() {
        return this.status;
      } }, this.alwaysAsyncFn = (Qi !== oe ? oe : ye.alwaysAsync) ? ei : function(ae) {
        ae();
      }, this.promise.toSource = this.promise.toString = this.promise.valueOf = function() {
        return this.value === void 0 ? this : this.value;
      };
    }
    return ye.prototype.resolve = function(oe) {
      var ae, ie = !1;
      function _e(Se) {
        return function(Ae) {
          return ie ? void 0 : (ie = !0, Se(Ae));
        };
      }
      if (this.status)
        return this;
      try {
        var de = !(!(ae = oe) || !(typeof ae).match(/function|object/)) && oe.then;
        if (Zi(de)) {
          if (oe === this.promise)
            throw new gi("Promise can't resolve itself");
          return de.call(oe, _e(this.resolve), _e(this.reject)), this;
        }
      } catch (Se) {
        return _e(this.reject)(Se), this;
      }
      return this.alwaysAsyncFn(function() {
        this.value = oe, this.status = 1, this.execCallbacks();
      }), this;
    }, ye.prototype.reject = function(oe) {
      return this.status || this.alwaysAsyncFn(function() {
        try {
          throw oe;
        } catch (ae) {
          this.value = ae;
        }
        this.status = -1, this.execCallbacks();
      }), this;
    }, ye.prototype.execCallbacks = function() {
      if (this.status !== 0) {
        var oe, ae = this.pendings, ie = 0, _e = ae.length, de = ~this.status ? 0 : 1;
        for (this.pendings = []; ie < _e; ie++)
          (oe = ae[ie][de]) && oe(this.value);
      }
    }, ye.deferred = ye, ye.defer = ye, ye.nextTick = ei, ye.alwaysAsync = !0, ye.onlyFuncs = !0, ye.resolve = function(oe) {
      return new ye(!0).resolve(oe).promise;
    }, ye.resolved = ye.resolve, ye.fulfilled = ye.resolve, ye.reject = function(oe) {
      return new ye(!0).reject(oe).promise;
    }, ye.rejected = ye.reject, ye;
  }(), oi = n.Lib, vi = /^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;
  function ar(ye, oe) {
    var ae, ie = [];
    for (ae = 0; ae < ye.length; ae++) {
      var _e = ye[ae];
      _e && _e !== "." && (_e === ".." ? ie.length && ie[ie.length - 1] !== ".." ? ie.pop() : oe && ie.push("..") : ie.push(_e));
    }
    return ie;
  }
  function _o(ye) {
    var oe = ye.charAt(0) === "/", ae = ye.slice(-1) === "/";
    return (ye = ar(oi.filter(ye.split("/"), function(ie) {
      return !!ie;
    }), !oe).join("/")) || oe || (ye = "."), ye && ae && (ye += "/"), (oe ? "/" : "") + ye;
  }
  var Ln = function() {
    function ye() {
    }
    return ye.prototype.resolve = function() {
      var oe, ae, ie = "", _e = arguments, de = !1;
      for (oe = _e.length - 1; oe >= 0 && !de; oe--)
        N(ae = _e[oe]) && ae && (ie = ae + "/" + ie, de = ae.charAt(0) === "/");
      return (de ? "/" : "") + ar(oi.filter(ie.split("/"), function(Se) {
        return !!Se;
      }), !de).join("/") || ".";
    }, ye.prototype.join = function() {
      var oe = fe(arguments);
      return _o(oi.filter(oe, function(ae) {
        return ae && N(ae);
      }).join("/"));
    }, ye.prototype.relative = function(oe, ae) {
      oe = _o(oe), ae = _o(ae);
      var ie, _e, de = oi.filter(oe.split("/"), function(qe) {
        return !!qe;
      }), Se = [], Ae = oi.filter(ae.split("/"), function(qe) {
        return !!qe;
      }), ze = Math.min(de.length, Ae.length);
      for (ie = 0; ie < ze && de[ie] === Ae[ie]; ie++)
        ;
      for (_e = ie; ie < de.length; )
        Se.push(".."), ie++;
      return (Se = Se.concat(Ae.slice(_e))).join("/");
    }, ye.prototype.basename = function(oe, ae) {
      var ie;
      return ie = (oe.match(vi) || [])[3] || "", ae && ie && ie.slice(-1 * ae.length) === ae && (ie = ie.slice(0, -1 * ae.length)), ie;
    }, ye.prototype.dirname = function(oe) {
      var ae = oe.match(vi) || [], ie = ae[1] || "", _e = ae[2] || "";
      return ie || _e ? (_e && (_e = _e.substring(0, _e.length - 1)), ie + _e) : ".";
    }, ye.prototype.extname = function(oe) {
      return (oe.match(vi) || [])[4] || "";
    }, ye;
  }();
  function ln(ye) {
    return decodeURIComponent(ye.replace(/\+/g, " "));
  }
  function mn(ye) {
    return encodeURIComponent(String(ye));
  }
  var Hr, Rr = n.Lib;
  function $(ye) {
    var oe = typeof ye;
    return ye == null || oe !== "object" && oe !== "function";
  }
  function pe(ye, oe, ae, ie) {
    oe = oe || "&", ae = ae || "=", L(ie) && (ie = F);
    var _e = [];
    return O(ye, function(de, Se) {
      var Ae = mn(Se);
      $(de) ? (_e.push(Ae), k(de) && _e.push(ae, mn(de + Oe)), _e.push(oe)) : Y(de) && de.length && O(de, function(ze) {
        $(ze) && (_e.push(Ae, ie ? mn("[]") : Oe), k(ze) && _e.push(ae, mn(ze + Oe)), _e.push(oe));
      });
    }), _e.pop(), _e.join(Oe);
  }
  function se(ye, oe, ae) {
    if (!N(ye) || !(ye = je(ye)))
      return {};
    oe = oe || "&", ae = ae || "=";
    for (var ie, _e, de, Se = {}, Ae = ln, ze = ye.split(oe), qe = 0, Ke = ze.length; qe < Ke; ++qe) {
      if ((ie = Rr.indexOf(ae, ze[qe])) === -1)
        _e = Ae(ze[qe]), de = void 0;
      else {
        _e = Ae(ze[qe].substring(0, ie)), de = ze[qe].substring(ie + 1);
        try {
          de = Ae(de);
        } catch (At) {
          Ye("decodeURIComponent error : " + de), Ye(At);
        }
        le(_e, "[]") && (_e = _e.substring(0, _e.length - 2));
      }
      _e in Se ? Y(Se[_e]) ? Se[_e].push(de) : Se[_e] = [Se[_e], de] : Se[_e] = de;
    }
    return Se;
  }
  function Ie(ye) {
    ye._queryMap || (ye._queryMap = se(ye._query));
  }
  O({ "&amp;": "&", "&gt;": ">", "&lt;": "<", "&#x60;": "`", "&#x2F;": "/", "&quot;": '"', "&#x27;": "'" }, function(ye, oe) {
  });
  var he, tt, ht = function() {
    function ye(oe) {
      this._query = oe || "";
    }
    return ye.prototype.clone = function() {
      return new ye(this.toString());
    }, ye.prototype.reset = function(oe) {
      var ae = this;
      return ae._query = oe || "", ae._queryMap = null, ae;
    }, ye.prototype.count = function() {
      var oe = 0;
      return Ie(this), O(this._queryMap, function(ae) {
        Y(ae) ? oe += ae.length : oe++;
      }), oe;
    }, ye.prototype.has = function(oe) {
      var ae;
      return Ie(this), ae = this._queryMap, oe ? oe in ae : !function(ie) {
        var _e;
        if (ie) {
          for (_e in ie)
            if (!L(_e))
              return !1;
        }
        return !0;
      }(ae);
    }, ye.prototype.get = function(oe) {
      var ae;
      return Ie(this), ae = this._queryMap, oe ? ae[oe] : ae;
    }, ye.prototype.keys = function() {
      return Ie(this), Object.keys(this._queryMap);
    }, ye.prototype.set = function(oe, ae) {
      var ie, _e = this;
      return Ie(_e), ie = _e._queryMap, N(oe) ? _e._queryMap[oe] = ae : (oe instanceof ye && (oe = oe.get()), O(oe, function(de, Se) {
        ie[Se] = de;
      })), _e;
    }, ye.prototype.remove = function(oe) {
      var ae = this;
      return Ie(ae), oe ? delete ae._queryMap[oe] : ae._queryMap = {}, ae;
    }, ye.prototype.add = function(oe, ae) {
      var ie, _e, de = this;
      return N(oe) ? (Ie(de), _e = L(_e = (ie = de._queryMap)[oe]) ? ae : [].concat(_e).concat(ae), ie[oe] = _e) : (oe instanceof ye && (oe = oe.get()), O(oe, function(Se, Ae) {
        de.add(Ae, Se);
      })), de;
    }, ye.prototype.toString = function(oe) {
      return Ie(this), pe(this._queryMap, Hr, Hr, oe);
    }, ye;
  }(), wt = n.Lib, kt = /[\-#$\^*()+\[\]{}|\\,.?\s]/g, Vt = { "&amp;": "&", "&gt;": ">", "&lt;": "<", "&#x60;": "`", "&#x2F;": "/", "&quot;": '"', "&#x27;": "'" }, Nt = {};
  O(Vt, function(ye, oe) {
    Nt[ye] = oe;
  });
  var fn = function() {
    function ye(oe) {
      var ae = oe.createElement("div"), ie = oe.createElement("div");
      ie.style && (this.div = ie, this.container = ae, this.docElem = oe.documentElement, ie.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", this.leadingWhitespace = ie.firstChild.nodeType === 3, this.tbody = !ie.getElementsByTagName("tbody").length, this.htmlSerialize = !!ie.getElementsByTagName("link").length, ie.style.cssText = "float:left;opacity:.5", this.opacity = ie.style.opacity === "0.5", this.cssFloat = !!ie.style.cssFloat, ie.style.backgroundClip = "content-box", ie.cloneNode(!0).style.backgroundClip = "", this.clearCloneStyle = ie.style.backgroundClip === "content-box", (ae = document.createElement("div")).style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute", ie.innerHTML = "", ae.appendChild(ie), this.boxSizing = ie.style.boxSizing === "" || ie.style.MozBoxSizing === "" || ie.style.WebkitBoxSizing === "");
    }
    return ye.prototype.reliableHiddenOffsets = function() {
      return this.pixelPositionVal == null && this.computeStyleTests(), this.reliableHiddenOffsetsVal;
    }, ye.prototype.boxSizingReliable = function() {
      return this.pixelPositionVal == null && this.computeStyleTests(), this.boxSizingReliableVal;
    }, ye.prototype.pixelMarginRight = function() {
      return this.pixelPositionVal == null && this.computeStyleTests(), this.pixelMarginRightVal;
    }, ye.prototype.pixelPosition = function() {
      return this.pixelPositionVal == null && this.computeStyleTests(), this.pixelPositionVal;
    }, ye.prototype.reliableMarginRight = function() {
      return this.pixelPositionVal == null && this.computeStyleTests(), this.reliableMarginRightVal;
    }, ye.prototype.reliableMarginLeft = function() {
      return this.pixelPositionVal == null && this.computeStyleTests(), this.reliableMarginLeftVal;
    }, ye.prototype.computeStyleTests = function() {
      var oe, ae, ie = this.div;
      this.docElem && this.docElem.appendChild(this.container), ie.style.cssText = "-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%", this.pixelPositionVal = this.boxSizingReliableVal = this.reliableMarginLeftVal = !1, this.pixelMarginRightVal = this.reliableMarginRightVal = !0, window.getComputedStyle && (ae = window.getComputedStyle(ie), this.pixelPositionVal = (ae || {}).top !== "1%", this.reliableMarginLeftVal = (ae || {}).marginLeft === "2px", this.boxSizingReliableVal = (ae || { width: "4px" }).width === "4px", ie.style.marginRight = "50%", this.pixelMarginRightVal = (ae || { marginRight: "4px" }).marginRight === "4px", (oe = ie.appendChild(document.createElement("div"))).style.cssText = ie.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", oe.style.marginRight = oe.style.width = "0", ie.style.width = "1px", this.reliableMarginRightVal = !parseFloat((window.getComputedStyle(oe) || {}).marginRight), ie && ie.removeChild(oe)), ie.style.display = "none", this.reliableHiddenOffsetsVal = ie.getClientRects().length === 0, this.reliableHiddenOffsetsVal && (ie.style.display = "", ie.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", ie.childNodes[0].style.borderCollapse = "separate", (oe = ie.getElementsByTagName("td"))[0].style.cssText = "margin:0;border:0;padding:0;display:none", this.reliableHiddenOffsetsVal = oe[0].offsetHeight === 0, this.reliableHiddenOffsetsVal && (oe[0].style.display = "", oe[1].style.display = "none", this.reliableHiddenOffsetsVal = oe[0].offsetHeight === 0)), this.docElem && this.docElem.removeChild(this.container);
    }, ye;
  }();
  function Hn(ye) {
    return Math.random().toString(16).substring(2, 2 + ye);
  }
  var er = Date.now || function() {
    return +/* @__PURE__ */ new Date();
  };
  function sr(ye, oe, ae, ie) {
    return new (ae || (ae = Promise))(function(_e, de) {
      function Se(qe) {
        try {
          ze(ie.next(qe));
        } catch (Ke) {
          de(Ke);
        }
      }
      function Ae(qe) {
        try {
          ze(ie.throw(qe));
        } catch (Ke) {
          de(Ke);
        }
      }
      function ze(qe) {
        var Ke;
        qe.done ? _e(qe.value) : (Ke = qe.value, Ke instanceof ae ? Ke : new ae(function(At) {
          At(Ke);
        })).then(Se, Ae);
      }
      ze((ie = ie.apply(ye, oe || [])).next());
    });
  }
  function li(ye, oe) {
    var ae, ie, _e, de, Se = { label: 0, sent: function() {
      if (1 & _e[0])
        throw _e[1];
      return _e[1];
    }, trys: [], ops: [] };
    return de = { next: Ae(0), throw: Ae(1), return: Ae(2) }, typeof Symbol == "function" && (de[Symbol.iterator] = function() {
      return this;
    }), de;
    function Ae(ze) {
      return function(qe) {
        return function(Ke) {
          if (ae)
            throw new TypeError("Generator is already executing.");
          for (; Se; )
            try {
              if (ae = 1, ie && (_e = 2 & Ke[0] ? ie.return : Ke[0] ? ie.throw || ((_e = ie.return) && _e.call(ie), 0) : ie.next) && !(_e = _e.call(ie, Ke[1])).done)
                return _e;
              switch (ie = 0, _e && (Ke = [2 & Ke[0], _e.value]), Ke[0]) {
                case 0:
                case 1:
                  _e = Ke;
                  break;
                case 4:
                  return Se.label++, { value: Ke[1], done: !1 };
                case 5:
                  Se.label++, ie = Ke[1], Ke = [0];
                  continue;
                case 7:
                  Ke = Se.ops.pop(), Se.trys.pop();
                  continue;
                default:
                  if (_e = Se.trys, !((_e = _e.length > 0 && _e[_e.length - 1]) || Ke[0] !== 6 && Ke[0] !== 2)) {
                    Se = 0;
                    continue;
                  }
                  if (Ke[0] === 3 && (!_e || Ke[1] > _e[0] && Ke[1] < _e[3])) {
                    Se.label = Ke[1];
                    break;
                  }
                  if (Ke[0] === 6 && Se.label < _e[1]) {
                    Se.label = _e[1], _e = Ke;
                    break;
                  }
                  if (_e && Se.label < _e[2]) {
                    Se.label = _e[2], Se.ops.push(Ke);
                    break;
                  }
                  _e[2] && Se.ops.pop(), Se.trys.pop();
                  continue;
              }
              Ke = oe.call(ye, Se);
            } catch (At) {
              Ke = [6, At], ie = 0;
            } finally {
              ae = _e = 0;
            }
          if (5 & Ke[0])
            throw Ke[1];
          return { value: Ke[0] ? Ke[1] : void 0, done: !0 };
        }([ze, qe]);
      };
    }
  }
  var Lr = !1;
  "wakeLock" in navigator && (Lr = !0);
  var Ci, Er, mr = null;
  function yr() {
    Lr && (mr == null ? function() {
      sr(this, void 0, void 0, function() {
        return li(this, function(ye) {
          switch (ye.label) {
            case 0:
              return ye.trys.push([0, 2, , 3]), [4, navigator.wakeLock.request("screen")];
            case 1:
              return mr = ye.sent(), [3, 3];
            case 2:
              return ye.sent(), mr = null, [3, 3];
            case 3:
              return [2];
          }
        });
      });
    }() : mr.release().then(function() {
      mr = null;
    }));
  }
  function Gr() {
    return mr;
  }
  var yi, ui = 20221111, Ei = n.Lib, jn = !1;
  Ei && Ei.__ver && Ei.isNumber(Ei.__ver) && Ei.__ver >= ui && (jn = !0), jn || ((yi = Xi) && !yi.Map && (yi.Map = function() {
    this.keys = [], this.data = {}, this.set = function(ye, oe) {
      this.data[ye] == null && this.keys.indexOf(ye) == -1 && this.keys.push(ye), this.data[ye] = oe;
    }, this.get = function(ye) {
      return this.data[ye];
    };
  }), ce(n.Lib, { debug: !1, nil: void 0, mix: ce, clone: Ht, keys: Object.keys, now: er, getRandom: function() {
    for (var ye, oe = er() % 1e4, ae = [], ie = 0; ie < 5; ie++)
      ye = Math.floor(10 * Math.random()), ie != 0 || ye != 0 ? ae.push(ye) : ie = -1;
    return oe < 10 ? ae.push("000") : oe < 100 ? ae.push("00") : oe < 1e3 && ae.push("0"), ae.push(oe), ae.join("");
  }, guid: function(ye) {
    var oe = [Hn(8), "-", Hn(4), "-", Hn(4), "-", Hn(4), "-", Hn(8)];
    return ye && oe.unshift(ye), oe.join("");
  }, stringify: (Ci = Xi.JSON) === null || Ci === void 0 ? void 0 : Ci.stringify, parse: (Er = Xi.JSON) === null || Er === void 0 ? void 0 : Er.parse, __ver: ui }), function(ye) {
    var oe = ye.Lib;
    oe.mix(oe, { isDef: k, isUndef: L, isUndefined: L, isNull: re, isNaN, isFunction: p, isString: N, isObject: U, isBoolean: H, isNumber: K, isArray: Y, type: C, isPlainObject: E, isDOM: Ee, isDOMInBody: Le, each: O });
  }(n), ce(n.Lib, { getFormatedNow: Me, getLogger: function() {
    return Z;
  }, setLogger: function(ye) {
    Z = ye;
  }, log: at, error: Ye, warn: Et, info: Je }), function(ye) {
    var oe = ye.Lib, ae = Array.prototype;
    oe.mix(oe, { filter: function(ie, _e, de) {
      return ae.filter.call(ie, _e, de || this);
    }, indexOf: function(ie, _e) {
      return ae.indexOf.call(_e, ie);
    }, uniq: function(ie) {
      var _e, de, Se = [], Ae = ie.length;
      for (_e = 0; _e < Ae; _e++) {
        for (de = _e + 1; de < Ae; de++)
          ie[_e] === ie[de] && (de = ++_e);
        Se.push(ie[_e]);
      }
      return Se;
    } });
  }(n), function(ye) {
    var oe = ye.Lib;
    oe.mix(oe, { startsWith: We, endsWith: le, replaceAll: function(ae, ie, _e) {
      return ae.replace(new RegExp(ie, "gi"), _e);
    }, upperCaseFirst: function(ae) {
      return ae.charAt(0).toUpperCase() + ae.substr(1);
    }, removeNonPrintableChar: function(ae) {
      return oe.isString(ae) ? ae.replace(/[^\x20-\x7E]/g, "") : ae;
    }, makeArray: fe, trim: je });
  }(n), function(ye) {
    var oe = ye.Lib;
    oe.extend = function(ae, ie) {
      var _e = function() {
        ae.apply(this, arguments), ie && ie.apply(this, arguments);
      };
      return oe.each(ae.prototype, function(de, Se) {
        _e.prototype[Se] = de;
      }), _e.prototype.constructor = _e, _e;
    };
  }(n), function(ye) {
    var oe = ye.Lib;
    function ae(ie) {
      var _e = this, de = _e.constructor;
      for (_e.__attrs = {}, _e.__attrVals = {}, _e.userConfig = ie; de; )
        _e.addAttrs(de.ATTRS), de = de.superclass ? de.superclass.constructor : null;
      oe.mix(_e.__attrs, ie);
    }
    oe.mix(ae.prototype, { get: function(ie) {
      return ie in this.__attrs ? this.__attrs[ie] : "";
    }, set: function(ie, _e) {
      ie in this.__attrs && (this.__attrs[ie] = _e);
    }, addAttrs: function(ie) {
      oe.mix(this.__attrs, ie);
    } }), ae.extend = function(ie) {
      var _e, de;
      return (ie = ie || {}).constructor && (_e = ie.constructor), de = oe.extend(this, _e), oe.mix(de, ie), de;
    }, oe.Attributes = ae;
  }(n), ce(wt, { urlEncode: mn, urlDecode: ln, fromUnicode: function(ye) {
    return ye.replace(/\\u([a-f\d]{4})/gi, function(oe, ae) {
      return String.fromCharCode(parseInt(ae, 16));
    });
  }, escapeHtml: function(ye) {
    return (ye + "").replace(function() {
      if (he)
        return he;
      var oe = Oe;
      return O(Vt, function(ae) {
        oe += ae + "|";
      }), oe = oe.slice(0, -1), he = new RegExp(oe, "g");
    }(), function(oe) {
      return Nt[oe];
    });
  }, escapeRegExp: function(ye) {
    return ye.replace(kt, "\\$&");
  }, unEscapeHtml: function(ye) {
    return ye.replace(function() {
      if (tt)
        return tt;
      var oe = Oe;
      return O(Nt, function(ae) {
        oe += ae + "|";
      }), oe += "&#(\\d{1,5});", tt = new RegExp(oe, "g");
    }(), function(oe, ae) {
      return Vt[oe] || String.fromCharCode(+ae);
    });
  }, param: pe, unparam: se }), n.Lib.Path = new Ln(), n.Lib.uriQuery = ht, n.Lib.Uri = Lt, function(ye) {
    var oe = ye.Lib, ae = oe.win, ie = 20220622;
    if (!(oe._promise_ver && oe.isNumber(oe._promise_ver) && oe._promise_ver >= ie)) {
      if (oe._promise_ver = ie, ae && oe.isFunction(ae.__zone_symbol__Promise) && (oe.nativePromise = ae.__zone_symbol__Promise), self && self.Promise)
        return oe.Promise = self.Promise, void (oe.nativePromise || (oe.nativePromise = oe.Promise));
      if (ae && ae.Promise)
        return oe.Promise = ae.Promise, void (oe.nativePromise || (oe.nativePromise = oe.Promise));
      oe.Promise = Co, oe.nativePromise || (oe.nativePromise = oe.Promise);
    }
  }(n), n.Lib.asyncGetNavInfo = Li, function(ye) {
    var oe = ye.Lib, ae = ye.navInfoSync, ie = !1, _e = !1;
    if (!(oe.bNode || ae.bJSDom || ae.bEdge && ae.bFileSystem || ae.bIE && ae.IEVersion < 8))
      try {
        _e = window.localStorage, ie = !!_e;
      } catch {
        _e = !1;
      }
    oe.LS = { isSupportLS: function() {
      return ie;
    }, item: function(de, Se, Ae) {
      var ze = null;
      return this.isSupportLS() ? (Se ? (_e.setItem(de, Se), ze = Se) : ze = _e.getItem(de), ze === null ? Ae : ze) : Ae;
    }, removeItem: function(de) {
      return !!this.isSupportLS() && (_e.removeItem(de), !0);
    } };
  }(n), function(ye) {
    var oe = ye.Lib, ae = oe.win, ie = oe.doc, _e = 0, de = [], Se = /\S/, Ae = !(!ie || !ie.addEventListener), ze = "DOMContentLoaded", qe = "readystatechange", Ke = "load", At = "complete", _n = Ae ? function(_t, St, sn) {
      _t.addEventListener(St, sn, !1);
    } : function(_t, St, sn) {
      _t.attachEvent("on" + St, sn);
    }, Jt = Ae ? function(_t, St, sn) {
      _t.removeEventListener(St, sn, !1);
    } : function(_t, St, sn) {
      _t.detachEvent("on" + St, sn);
    };
    function In() {
      for (var _t = 0; _t < de.length; _t++)
        try {
          de[_t](oe);
        } catch (St) {
          oe.log(St, "error"), setTimeout(function() {
            throw St;
          }, 0);
        }
    }
    function jt() {
      if (!_e) {
        if (_e = 1, oe.bNode || ye.navInfoSync.bJSDom)
          return void In();
        Li().then(function() {
          ie && Jt(ae, Ke, jt), In();
        });
      }
    }
    if (oe.mix(oe, { isWindow: function(_t) {
      return _t != null && _t == _t.window;
    }, globalEval: function(_t) {
      _t && Se.test(_t) && (ae.execScript ? ae.execScript(_t) : function(St) {
        ae.eval.call(ae, St);
      }(_t));
    }, domReady: function(_t) {
      if (_e)
        try {
          _t(oe);
        } catch (St) {
          oe.log(St, "error"), setTimeout(function() {
            throw St;
          }, 0);
        }
      else
        de.push(_t);
      return this;
    } }), oe.ready = oe.domReady, oe.bNode || ye.navInfoSync.bJSDom)
      jt();
    else if (function() {
      if (ie && ie.readyState !== At)
        if (_n(ae, Ke, jt), Ae) {
          var _t = function() {
            Jt(ie, ze, _t), jt();
          };
          _n(ie, ze, _t);
        } else {
          var St = function() {
            ie.readyState === At && (Jt(ie, qe, St), jt());
          };
          _n(ie, qe, St);
          var sn = void 0, yn = ie && ie.documentElement, Wn = yn && yn.doScroll;
          try {
            sn = ae.frameElement === null;
          } catch {
            sn = !1;
          }
          if (Wn && sn) {
            var Jn = function() {
              try {
                Wn("left"), setTimeout(jt, 30);
              } catch {
                setTimeout(Jn, 40);
              }
            };
            Jn();
          }
        }
      else
        jt();
    }(), ye.navInfoSync.bIE)
      try {
        ie.execCommand("BackgroundImageCache", !1, !0);
      } catch {
      }
  }(n), function(ye) {
    var oe = ye.Lib, ae = "none";
    oe.mix(oe, { get: function(ie) {
      return oe.doc.getElementById(ie);
    }, hide: function(ie) {
      var _e = oe.isString(ie) ? oe.get(ie) : ie;
      _e && (_e.length > 0 && (_e = _e[0]), _e.style.display = ae);
    }, show: function(ie) {
      var _e = oe.isString(ie) ? oe.get(ie) : ie;
      _e && (_e.length > 0 && (_e = _e[0]), _e.style.display = Oe);
    }, toggle: function(ie) {
      var _e = oe.isString(ie) ? oe.get(ie) : ie;
      _e && (_e.length > 0 && (_e = _e[0]), _e.style.display === ae ? _e.style.display = Oe : _e.style.display = ae);
    }, empty: function(ie) {
      if (ie)
        for (; ie.firstChild; )
          ie.removeChild(ie.firstChild);
    } });
  }(n), function(ye) {
    var oe = ye.Lib;
    oe.colorStrToInt = function(ae) {
      var ie, _e, de = "0x";
      if (/^(rgb|RGB)/.test(ae)) {
        var Se = ae.replace(/[^\d,.]/g, "").split(",");
        for (_e = 0; _e < 3; ++_e)
          (ie = Number(Se[_e]).toString(16)).length == 1 && (ie = "0" + ie), de += ie;
        Se.length == 4 ? ((ie = Math.round(255 * Number(Se[_e])).toString(16)).length == 1 && (ie = "0" + ie), de += ie) : de += "ff";
      } else if (ae == "transparent")
        de += "00000000";
      else if (/^#[0-9a-fA-f]{6}$/.test(ae))
        de += ae.replace(/#/, "") + "ff";
      else if (/^#[0-9a-fA-f]{3}$/.test(ae)) {
        for (_e = 0; _e < 3; ++_e)
          de += ae[_e] + ae[_e];
        de += "ff";
      } else
        de = "-1";
      return Number(de);
    }, oe.IntToColorStr = function(ae) {
      if (ae > 4294967295 || ae < 0)
        return null;
      var ie;
      if (ye.navInfoSync.bHTML5Edition)
        ie = "rgba(" + Math.floor(ae / 16777216) + "," + Math.floor(ae / 65536) % 256 + "," + Math.floor(ae / 256) % 256 + "," + ae % 256 / 255 + ")";
      else if (ae % 256 == 0)
        ie = "transparent";
      else {
        for (ie = Math.floor(ae / 256).toString(16); ie.length != 6; )
          ie = "0" + ie;
        ie = "#" + ie;
      }
      return ie;
    };
  }(n), function(ye) {
    var oe = n.Lib, ae = oe.doc, ie = ae && ae.documentElement, _e = ae.getElementsByTagName("head")[0] || ie, de = ae.createElement("script").readyState ? function(Se, Ae) {
      var ze = Se.onreadystatechange;
      Se.onreadystatechange = function() {
        var qe = Se.readyState;
        qe === "loaded" || qe === "complete" ? (Se.onreadystatechange = null, ze && ze(), Ae.call(this, !0)) : qe === "loading" || Ae.call(this, !1);
      };
    } : function(Se, Ae) {
      Se.addEventListener("load", Ae, q), Se.addEventListener("error", Ae, q);
    };
    oe.scriptOnload = de, oe.getScript = function(Se, Ae, ze) {
      return oe.addScript(Se, Ae, !1, ze);
    }, oe.addScript = function(Se, Ae, ze, qe) {
      var Ke, At, _n = qe;
      if (oe.isFunction(_n) || (_n = function() {
      }), oe.bNode || n.navInfoSync.bJSDom)
        _n();
      else {
        if (oe.isString(Se) && Se != Oe)
          return Ke = ae.createElement("script"), At = ["", Se].join(Oe), Ke.src = At, Ae && (Ke.async = !0), Ke.charset = "utf-8", de(Ke, _n), ze ? _e.appendChild(Ke) : _e.insertBefore(Ke, _e.firstChild), Ke;
        _n();
      }
    }, oe.getScripts = function(Se, Ae, ze) {
      return oe.addScripts(Se, Ae, !1, ze);
    }, oe.addScripts = function(Se, Ae, ze, qe) {
      var Ke = qe;
      if (oe.isFunction(Ke) || (Ke = function() {
      }), oe.bNode || n.navInfoSync.bJSDom)
        Ke("ok");
      else if (oe.isArray(Se)) {
        var At = Se.length, _n = function(Jt) {
          Jt ? At-- : Ke(), At <= 0 && Ke("ok");
        };
        At <= 0 ? Ke("ok") : oe.each(Se, function(Jt) {
          oe.addScript(Jt, Ae, ze, _n);
        });
      } else
        Ke();
    }, oe.getCss = function(Se, Ae) {
      return oe.addCss(Se, !1, Ae);
    }, oe.addCss = function(Se, Ae, ze) {
      var qe, Ke = ze;
      if (oe.isFunction(Ke) || (Ke = !1), oe.isString(Se) && Se != Oe) {
        if (!oe.bNode && !n.navInfoSync.bJSDom)
          return (qe = ae.createElement("link")).href = Se, qe.rel = "stylesheet", qe.async = !0, Ke && de(qe, Ke), Ae ? _e.appendChild(qe) : _e.insertBefore(qe, _e.firstChild), qe;
        Ke && Ke();
      } else
        Ke && Ke();
    }, oe.getAllCss = function(Se, Ae) {
      return oe.addAllCss(Se, !1, Ae);
    }, oe.addAllCss = function(Se, Ae, ze) {
      if (oe.bNode || n.navInfoSync.bJSDom)
        ze && ze("ok");
      else if (oe.isArray(Se)) {
        var qe = Se.length, Ke = function(At) {
          At ? qe-- : ze(), qe <= 0 && ze("ok");
        };
        oe.each(Se, function(At) {
          oe.addCss(At, Ae, Ke);
        });
      } else
        ze && ze();
    }, oe.addJS = Mt, oe.addVBS = Yt;
  }(), ce(n.Lib, { ajax: Vr, io: new Zn(), fetch: nr }), function(ye) {
    var oe = ye.Lib, ae = { fire: function(ie) {
      var _e, de = this;
      de.exec = de.exec || {}, ie = ie.toLowerCase(), _e = Array.prototype.slice.call(arguments, 1), oe.each(de.exec[ie] || [], function(Se) {
        var Ae = Se.f, ze = Se.c || de;
        try {
          Ae.apply(ze, _e);
        } catch (qe) {
          oe.log(qe);
        }
      });
    }, on: function(ie, _e, de) {
      var Se = this;
      Se.exec = Se.exec || {}, ie = ie.toLowerCase(), Se.exec[ie] = Se.exec[ie] || [], Se.exec[ie].push({ f: _e, c: de });
    }, off: function(ie, _e, de) {
      var Se = this.exec;
      if (Se)
        if (ie)
          if (ie = ie.toLowerCase(), _e)
            for (var Ae = Se[ie] || [], ze = Ae.length - 1; ze >= 0; ze--)
              Ae[ze] === _e && Ae.splice(ze, 1);
          else
            Se[ie] = null;
        else
          this.exec = null;
    } };
    oe.obj = { customEvent: ae };
  }(n), function(ye) {
    var oe, ae = ye.Lib;
    oe = function(ie) {
      return ye.navInfoSync.bGecko && ie === "mousewheel" ? "DOMMouseScroll" : ie;
    }, ae.mix(ae, { addEventListener: function(ie, _e, de) {
      var Se = oe(_e);
      ie && ie.addEventListener(Se, de, !1);
    }, removeEventListener: function(ie, _e, de) {
      var Se = oe(_e);
      ie && ie.removeEventListener(Se, de, !1);
    }, stopPropagation: function(ie) {
      var _e = ie || ae.win.event;
      _e.preventDefault && _e.preventDefault(), _e.stopPropagation && _e.stopPropagation(), _e.returnValue = !1, _e.cancelBubble = !0;
    }, fireEvent: function(ie, _e) {
      var de = ae.win.document.createEvent("HTMLEvents");
      de.initEvent(ie, F, F), _e.dispatchEvent && _e.dispatchEvent(de);
    } });
  }(n), function(ye) {
    var oe = ye.Lib, ae = { encodeChars: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", decodeChars: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1] };
    oe.base64 = { UTF16ToUTF8: function(de) {
      for (var Se, Ae, ze = [], qe = de.length, Ke = 0; Ke < qe; Ke++) {
        var At = de.charCodeAt(Ke);
        if (At > 0 && At <= 127)
          ze.push(de.charAt(Ke));
        else if (At >= 128 && At <= 2047)
          Se = 192 | At >> 6 & 31, Ae = 128 | 63 & At, ze.push(String.fromCharCode(Se), String.fromCharCode(Ae));
        else if (At >= 2048 && At <= 65535) {
          Se = 224 | At >> 12 & 15, Ae = 128 | At >> 6 & 63;
          var _n = 128 | 63 & At;
          ze.push(String.fromCharCode(Se), String.fromCharCode(Ae), String.fromCharCode(_n));
        }
      }
      return ze.join("");
    }, UTF8ToUTF16: function(de) {
      var Se, Ae, ze, qe, Ke = [], At = de.length;
      for (Se = 0; Se < At; Se++)
        (Ae = de.charCodeAt(Se)) >> 7 & 255 ? (Ae >> 5 & 255) == 6 ? (qe = (31 & Ae) << 6 | 63 & (ze = de.charCodeAt(++Se)), Ke.push(String.fromCharCode(qe))) : (Ae >> 4 & 255) == 14 && (qe = (255 & (Ae << 4 | (ze = de.charCodeAt(++Se)) >> 2 & 15)) << 8 | (3 & ze) << 6 | 63 & de.charCodeAt(++Se), Ke.push(String.fromCharCode(qe))) : Ke.push(de.charAt(Se));
      return Ke.join("");
    }, encode: function(de) {
      for (var Se, Ae, ze, qe = this.UTF16ToUTF8(de), Ke = [], At = 0, _n = qe.length; At < _n; ) {
        if (Se = 255 & qe.charCodeAt(At++), At == _n) {
          Ke.push(ae.encodeChars.charAt(Se >> 2)), Ke.push(ae.encodeChars.charAt((3 & Se) << 4)), Ke.push("==");
          break;
        }
        if (Ae = qe.charCodeAt(At++), At == _n) {
          Ke.push(ae.encodeChars.charAt(Se >> 2)), Ke.push(ae.encodeChars.charAt((3 & Se) << 4 | (240 & Ae) >> 4)), Ke.push(ae.encodeChars.charAt((15 & Ae) << 2)), Ke.push("=");
          break;
        }
        ze = qe.charCodeAt(At++), Ke.push(ae.encodeChars.charAt(Se >> 2)), Ke.push(ae.encodeChars.charAt((3 & Se) << 4 | (240 & Ae) >> 4)), Ke.push(ae.encodeChars.charAt((15 & Ae) << 2 | (192 & ze) >> 6)), Ke.push(ae.encodeChars.charAt(63 & ze));
      }
      return Ke.join("");
    }, encodeArray: function(de) {
      for (var Se, Ae, ze, qe = [], Ke = 0, At = de.length; Ke < At; ) {
        if (Se = 255 & de[Ke++], Ke == At) {
          qe.push(ae.encodeChars.charAt(Se >> 2)), qe.push(ae.encodeChars.charAt((3 & Se) << 4)), qe.push("==");
          break;
        }
        if (Ae = 255 & de[Ke++], Ke == At) {
          qe.push(ae.encodeChars.charAt(Se >> 2)), qe.push(ae.encodeChars.charAt((3 & Se) << 4 | (240 & Ae) >> 4)), qe.push(ae.encodeChars.charAt((15 & Ae) << 2)), qe.push("=");
          break;
        }
        ze = 255 & de[Ke++], qe.push(ae.encodeChars.charAt(Se >> 2)), qe.push(ae.encodeChars.charAt((3 & Se) << 4 | (240 & Ae) >> 4)), qe.push(ae.encodeChars.charAt((15 & Ae) << 2 | (192 & ze) >> 6)), qe.push(ae.encodeChars.charAt(63 & ze));
      }
      return qe.join("");
    }, decode: function(de, Se) {
      for (var Ae, ze, qe, Ke, At = this, _n = [], Jt = 0, In = de.length; Jt < In; ) {
        do
          Ae = ae.decodeChars[255 & de.charCodeAt(Jt++)];
        while (Jt < In && Ae == -1);
        if (Ae == -1)
          break;
        do
          ze = ae.decodeChars[255 & de.charCodeAt(Jt++)];
        while (Jt < In && ze == -1);
        if (ze == -1)
          break;
        Se ? _n.push(Ae << 2 | (48 & ze) >> 4) : _n.push(String.fromCharCode(Ae << 2 | (48 & ze) >> 4));
        do {
          if ((qe = 255 & de.charCodeAt(Jt++)) == 61)
            return Se ? _n : At.UTF8ToUTF16(_n.join(""));
          qe = ae.decodeChars[qe];
        } while (Jt < In && qe == -1);
        if (qe == -1)
          break;
        Se ? _n.push((15 & ze) << 4 | (60 & qe) >> 2) : _n.push(String.fromCharCode((15 & ze) << 4 | (60 & qe) >> 2));
        do {
          if ((Ke = 255 & de.charCodeAt(Jt++)) == 61)
            return Se ? _n : At.UTF8ToUTF16(_n.join(""));
          Ke = ae.decodeChars[Ke];
        } while (Jt < In && Ke == -1);
        if (Ke == -1)
          break;
        Se ? _n.push((3 & qe) << 6 | Ke) : _n.push(String.fromCharCode((3 & qe) << 6 | Ke));
      }
      return Se ? _n : At.UTF8ToUTF16(_n.join(""));
    } }, oe.utf8 = { fromUTF16: function(de) {
      for (var Se, Ae = [], ze = 0, qe = de.length; ze < qe; )
        (Se = de.charCodeAt(ze)) >= 1 && Se <= 127 ? Ae.push(de.charAt(ze)) : Se > 2047 ? (Ae.push(String.fromCharCode(224 | Se >> 12 & 15)), Ae.push(String.fromCharCode(128 | Se >> 6 & 63)), Ae.push(String.fromCharCode(128 | Se >> 0 & 63))) : (Ae.push(String.fromCharCode(192 | Se >> 6 & 31)), Ae.push(String.fromCharCode(128 | Se >> 0 & 63))), ze++;
      return Ae.join("");
    }, toUTF16: function(de) {
      for (var Se, Ae, ze, qe = [], Ke = 0, At = de.length; Ke < At; )
        switch ((Se = de.charCodeAt(Ke++)) >> 4) {
          case 0:
          case 1:
          case 2:
          case 3:
          case 4:
          case 5:
          case 6:
          case 7:
            qe.push(de.charAt(Ke - 1));
            break;
          case 12:
          case 13:
            Ae = de.charCodeAt(Ke++), qe.push(String.fromCharCode((31 & Se) << 6 | 63 & Ae));
            break;
          case 14:
            Ae = de.charCodeAt(Ke++), ze = de.charCodeAt(Ke++), qe.push(String.fromCharCode((15 & Se) << 12 | (63 & Ae) << 6 | (63 & ze) << 0));
        }
      return qe.join("");
    } };
    var ie = typeof self < "u" ? self : global;
    function _e(de) {
      this.message = de;
    }
    _e.prototype = new Error(), _e.prototype.name = "InvalidCharacterError", oe.btoa = ie.btoa ? function(de) {
      return ie.btoa(de);
    } : function(de) {
      var Se, Ae, ze = String(de), qe = 0, Ke = ae.encodeChars, At = "";
      for (qe = 0, Ke = ae.encodeChars, At = ""; ze.charAt(0 | qe) || (Ke = "=", qe % 1); At += Ke.charAt(63 & Se >> 8 - qe % 1 * 8)) {
        if ((Ae = ze.charCodeAt(qe += 3 / 4)) > 255)
          throw new _e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");
        Se = Se << 8 | Ae;
      }
      return At;
    }, oe.atob = ie.atob ? function(de) {
      return ie.atob(de);
    } : function(de) {
      var Se, Ae, ze = String(de).replace(/[=]+$/, ""), qe = 0, Ke = 0, At = "";
      if (ze.length % 4 == 1)
        throw new _e("'atob' failed: The string to be decoded is not correctly encoded.");
      for (qe = 0, Ke = 0, At = ""; Ae = ze.charAt(Ke++); ~Ae && (Se = qe % 4 ? 64 * Se + Ae : Ae, qe++ % 4) ? At += String.fromCharCode(255 & Se >> (-2 * qe & 6)) : 0)
        Ae = ae.encodeChars.indexOf(Ae);
      return At;
    };
  }(n), function(ye) {
    var oe = ye.Lib, ae = { queue: [], doNextStarted: !1, timer: null, pushToDo: function(ie, _e, de) {
      ae.queue.push({ obj: ie, method: _e, args: de });
    }, doNext: function() {
      if (ae.doNextStarted)
        if (ae.queue.length != 0) {
          var ie = ae.queue[0], _e = ie.obj, de = ie.method, Se = ie.args;
          if (ae.queue.splice(0, 1), _e && oe.isFunction(_e[de])) {
            var Ae = !1;
            if (Se.length > 2) {
              var ze = Se[Se.length - 2], qe = Se[Se.length - 1];
              oe.isFunction(ze) && oe.isFunction(qe) && (Se[Se.length - 2] = function() {
                try {
                  ze.apply(_e, arguments);
                } catch {
                }
                ae.timer = setTimeout(ae.doNext, 0);
              }, Se[Se.length - 1] = function() {
                try {
                  qe.apply(_e, arguments);
                } catch {
                }
                ae.timer = setTimeout(ae.doNext, 0);
              }, Ae = !0);
            }
            try {
              _e[de].apply(_e, Se);
            } catch {
            }
            Ae || (ae.timer = setTimeout(ae.doNext, 0));
          } else if (_e === null && oe.isFunction(de)) {
            try {
              de.apply(null, Se);
            } catch {
            }
            ae.timer = setTimeout(ae.doNext, 0);
          } else
            oe.log("not invoke a function: " + de), ae.timer = setTimeout(ae.doNext, 0);
        } else
          ae.stop();
      else
        ae.stop();
    }, start: function() {
      ae.doNextStarted || (ae.doNextStarted = !0, ae.timer = setTimeout(ae.doNext, 0));
    }, stop: function() {
      clearTimeout(ae.timer), ae.timer = null, ae.doNextStarted = !1, ae.queue = [];
    } };
    oe.asyncQueue = ae;
  }(n), function(ye) {
    var oe, ae = ye.Lib, ie = { not_string: /[^s]/, not_bool: /[^t]/, not_type: /[^T]/, not_primitive: /[^v]/, number: /[diefg]/, numeric_arg: /[bcdiefguxX]/, json: /[j]/, not_json: /[^j]/, text: /^[^\x25]+/, modulo: /^\x25{2}/, placeholder: /^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/, key: /^([a-z_][a-z_\d]*)/i, key_access: /^\.([a-z_][a-z_\d]*)/i, index_access: /^\[(\d+)\]/, sign: /^[+-]/ };
    function _e(ze, qe) {
      if (ae.isFunction("_".repeat))
        return ze.repeat(qe);
      for (var Ke = 0, At = []; Ke < qe; Ke++)
        At.push(ze);
      return At.join("");
    }
    function de(ze, qe) {
      var Ke, At, _n, Jt, In, jt, _t, St, sn, yn = 1, Wn = ze.length, Jn = "";
      for (At = 0; At < Wn; At++)
        if (typeof ze[At] == "string")
          Jn += ze[At];
        else if (typeof ze[At] == "object") {
          if ((Jt = ze[At]).keys)
            for (Ke = qe[yn], _n = 0; _n < Jt.keys.length; _n++) {
              if (Ke == null)
                throw new Error(oe('[sprintf] Cannot access property "%s" of undefined value "%s"', Jt.keys[_n], Jt.keys[_n - 1]));
              Ke = Ke[Jt.keys[_n]];
            }
          else
            Ke = Jt.param_no ? qe[Jt.param_no] : qe[yn++];
          if (ie.not_type.test(Jt.type) && ie.not_primitive.test(Jt.type) && Ke instanceof Function && (Ke = Ke()), ie.numeric_arg.test(Jt.type) && typeof Ke != "number" && isNaN(Ke))
            throw new TypeError(oe("[sprintf] expecting number but found %T", Ke));
          switch (ie.number.test(Jt.type) && (St = Ke >= 0), Jt.type) {
            case "b":
              Ke = parseInt(Ke, 10).toString(2);
              break;
            case "c":
              Ke = String.fromCharCode(parseInt(Ke, 10));
              break;
            case "d":
            case "i":
              Ke = parseInt(Ke, 10);
              break;
            case "j":
              Ke = JSON.stringify(Ke, null, Jt.width ? parseInt(Jt.width) : 0);
              break;
            case "e":
              Ke = Jt.precision ? parseFloat(Ke).toExponential(Jt.precision) : parseFloat(Ke).toExponential();
              break;
            case "f":
              Ke = Jt.precision ? parseFloat(Ke).toFixed(Jt.precision) : parseFloat(Ke);
              break;
            case "g":
              Ke = Jt.precision ? String(Number(Ke.toPrecision(Jt.precision))) : parseFloat(Ke);
              break;
            case "o":
              Ke = (parseInt(Ke, 10) >>> 0).toString(8);
              break;
            case "s":
              Ke = String(Ke), Ke = Jt.precision ? Ke.substring(0, Jt.precision) : Ke;
              break;
            case "t":
              Ke = String(!!Ke), Ke = Jt.precision ? Ke.substring(0, Jt.precision) : Ke;
              break;
            case "T":
              Ke = Object.prototype.toString.call(Ke).slice(8, -1).toLowerCase(), Ke = Jt.precision ? Ke.substring(0, Jt.precision) : Ke;
              break;
            case "u":
              Ke = parseInt(Ke, 10) >>> 0;
              break;
            case "v":
              Ke = Ke.valueOf(), Ke = Jt.precision ? Ke.substring(0, Jt.precision) : Ke;
              break;
            case "x":
              Ke = (parseInt(Ke, 10) >>> 0).toString(16);
              break;
            case "X":
              Ke = (parseInt(Ke, 10) >>> 0).toString(16).toUpperCase();
          }
          ie.json.test(Jt.type) ? Jn += Ke : (!ie.number.test(Jt.type) || St && !Jt.sign ? sn = "" : (sn = St ? "+" : "-", Ke = Ke.toString().replace(ie.sign, "")), jt = Jt.pad_char ? Jt.pad_char === "0" ? "0" : Jt.pad_char.charAt(1) : " ", _t = Jt.width - (sn + Ke).length, In = Jt.width && _t > 0 ? _e(jt, _t) : "", Jn += Jt.align ? sn + Ke + In : jt === "0" ? sn + In + Ke : In + sn + Ke);
        }
      return Jn;
    }
    var Se = Object.create ? /* @__PURE__ */ Object.create(null) : {};
    function Ae(ze) {
      if (Se[ze])
        return Se[ze];
      for (var qe, Ke = ze, At = [], _n = 0; Ke; ) {
        if ((qe = ie.text.exec(Ke)) !== null)
          At.push(qe[0]);
        else if ((qe = ie.modulo.exec(Ke)) !== null)
          At.push("%");
        else {
          if ((qe = ie.placeholder.exec(Ke)) === null)
            throw new SyntaxError("[sprintf] unexpected placeholder");
          if (qe[2]) {
            _n |= 1;
            var Jt = [], In = qe[2], jt = [];
            if ((jt = ie.key.exec(In)) === null)
              throw new SyntaxError("[sprintf] failed to parse named argument key");
            for (Jt.push(jt[1]); (In = In.substring(jt[0].length)) !== ""; )
              if ((jt = ie.key_access.exec(In)) !== null)
                Jt.push(jt[1]);
              else {
                if ((jt = ie.index_access.exec(In)) === null)
                  throw new SyntaxError("[sprintf] failed to parse named argument key");
                Jt.push(jt[1]);
              }
            qe[2] = Jt;
          } else
            _n |= 2;
          if (_n === 3)
            throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");
          At.push({ placeholder: qe[0], param_no: qe[1], keys: qe[2], sign: qe[3], pad_char: qe[4], align: qe[5], width: qe[6], precision: qe[7], type: qe[8] });
        }
        Ke = Ke.substring(qe[0].length);
      }
      return Se[ze] = At, At;
    }
    oe = function(ze) {
      return de(Ae(ze), arguments);
    }, ae.sprintf = oe, ae.vsprintf = function(ze, qe) {
      return oe.apply(null, [ze].concat(qe || []));
    };
  }(n), function(ye) {
    var oe = ye.Lib, ae = oe.doc;
    oe.Events = { registedClass: [], registedObjs: [] };
    var ie = function(de) {
      var Se = de || window.event, Ae = !0;
      return oe.each(oe.Events.registedObjs, function(ze) {
        oe.each(oe.Events.registedClass, function(qe) {
          if (ze instanceof qe && ze.bFocus && ze.handlerKeyDown && !(Ae = ze.handlerKeyDown(Se)))
            return !1;
        });
      }), Ae;
    };
    oe.ready(function() {
      oe.addEventListener(ae.documentElement, "keydown", ie);
    }), oe.mix(oe, { getWheelDelta: function(de) {
      var Se, Ae = (de = de || window.event).wheelDelta, ze = de.detail;
      return Ae && (Se = Ae / 120), ze && (Se = -(ze % 3 == 0 ? ze / 3 : ze)), Se;
    } });
    var _e = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };
    oe.EnumMouseButton = _e, oe.detectButton = function(de) {
      var Se = de || window.event;
      return Se.which == null ? Se.button < 2 ? _e.LEFT : Se.button == 4 ? _e.MIDDLE : _e.RIGHT : Se.which < 2 ? _e.LEFT : Se.which == 2 ? _e.MIDDLE : _e.RIGHT;
    };
  }(n), function(ye) {
    ye.Lib.switchEvent = function(oe) {
      return (oe = oe || window.event).which == null ? oe.which = oe.button < 2 ? 1 : oe.button == 4 ? 2 : 3 : oe.which = oe.which < 2 ? 1 : oe.which == 2 ? 2 : 3, oe;
    };
  }(n), function(ye) {
    var oe = ye.Lib;
    oe.currentStyle = function(ae, ie) {
      var _e = oe.win, de = _e.doc;
      return ae.currentStyle ? ae.currentStyle[ie] : _e.getComputedStyle ? (ie.replace(/([A-Z])/g, "-$1"), ie.toLowerCase(), de.defaultView.getComputedStyle(ae, null)[ie]) : null;
    };
  }(n), function(ye) {
    var oe = Array.prototype, ae = ye.Lib, ie = ye.navInfoSync, _e = ae.isString, de = ae.each, Se = oe.slice, Ae = " ", ze = ie.bIE && ie.IEMode < 10, qe = /[\n\t\r\.]/g, Ke = function() {
      function jt(_t, St, sn) {
        this.isNodeList = !0, this.length = 0;
        var yn = this;
        return yn instanceof jt ? _t ? typeof _t == "string" ? (ae.error("Err 4001."), yn) : ae.isArray(_t) || _t.isNodeList ? (Array.prototype.push.apply(yn, fe(_t)), yn) : (yn[0] = _t, yn.length = 1, yn) : yn : new jt(_t);
      }
      return jt.prototype.item = function(_t) {
        return ae.isNumber(_t) ? _t >= this.length ? null : new jt(this[_t]) : new jt(_t);
      }, jt.prototype.slice = function() {
        return new jt(Se.apply(this, arguments));
      }, jt.prototype.getDOMNodes = function() {
        return Se.call(this);
      }, jt.prototype.each = function(_t, St) {
        var sn = this;
        return de(sn, function(yn, Wn) {
          return yn = new jt(yn), _t.call(St || yn, yn, Wn, sn);
        }), sn;
      }, jt.prototype.getEL = function() {
        return this.length > 0 ? this[0] : void 0;
      }, jt.prototype.all = function(_t) {
        return this.length > 0 ? ae.all(_t, this) : new jt();
      }, jt.prototype.one = function(_t) {
        var St = this.all(_t);
        return St.length ? St.slice(0, 1) : St;
      }, jt;
    }();
    function At(jt) {
      return _e(jt) && (jt = ae.trim(jt)) && jt.length >= 3 && ae.startsWith(jt, "<") && ae.endsWith(jt, ">");
    }
    function _n(jt) {
      return (Ae + jt + Ae).replace(qe, Ae);
    }
    function Jt(jt) {
      return jt.replace(qe, "");
    }
    function In(jt, _t) {
      var St = _t;
      return St && St.isNodeList && (St = St.getEL()), _e(jt) ? (At(jt) && ae.err("Err 4002."), new Ke(ae.sizzle(jt, St))) : jt.isNodeList ? jt : new Ke(jt);
    }
    ae.mix(Ke.prototype, { before: function(jt) {
      var _t = this.getEL(), St = [jt];
      _t && (At(jt) && (St = ae.parseHTML(jt)), de(St, function(sn) {
        _t.insertBefore(sn, _t.childNodes[0]);
      }));
    }, append: function(jt) {
      var _t = this.getEL(), St = [jt];
      _t && (At(jt) && (St = ae.parseHTML(jt)), de(St, function(sn) {
        _t.appendChild(sn);
      }));
    }, html: function(jt) {
      var _t, St = this.getEL();
      if (St) {
        if (L(jt))
          return _t = St.innerHTML, document.all ? (_t = _t.replace(/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/gi, '$1="$2"').replace(/"'([^'"]*)'"/gi, '"$1"')).replace(/<(\/?)(\w+)([^>]*)>/g, function(sn, yn, Wn, Jn) {
            return yn ? "</" + Wn.toLowerCase() + ">" : ("<" + Wn.toLowerCase() + Jn + ">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g, function(pr, cr, Fi, Oi, Di, Wr, Ki, Lo) {
              return Di ? '="' + Di + '"' + Wr : pr;
            });
          }).replace(/<\/?([^>]+)>/g, function(sn) {
            return sn;
          }) : _t;
        St.innerHTML = "", de(ae.parseHTML(jt), function(sn) {
          St.appendChild(sn);
        });
      }
    }, attr: function(jt, _t) {
      var St = this.getEL();
      if (St) {
        if (L(_t))
          return jt === "readonly" ? St.readOnly ? "readonly" : "" : (jt !== "style" && ze ? St = St[jt] : (St = St.attributes[jt]) && (St = St.value), St);
        jt == "class" ? St.className = _t : St[jt] = _t;
      }
    }, style: function(jt, _t) {
      var St = this.getEL();
      if (St)
        return ae.style(St, jt, _t);
    }, css: function(jt) {
      de(this, function(_t) {
        de(jt, function(St, sn) {
          ae.style(_t, sn, St);
        });
      });
    }, addClass: function(jt) {
      var _t = this.getEL();
      _t && function(St, sn) {
        var yn, Wn, Jn, pr, cr = St.className, Fi = sn.length;
        if (cr) {
          for (yn = _n(cr), Wn = cr, Jn = 0; Jn < Fi; Jn++)
            pr = Jt(sn[Jn]), yn.indexOf(Ae + pr + Ae) < 0 && (Wn += Ae + pr);
          Wn = ae.trim(Wn);
        } else
          Wn = sn.join(" ");
        St.className = Wn;
      }(_t, jt.split(Ae));
    }, removeClass: function(jt) {
      var _t = this.getEL();
      _t && function(St, sn) {
        var yn, Wn, Jn, pr = St.className, cr = sn.length;
        if (pr && cr) {
          for (yn = _n(pr), Wn = 0; Wn < cr; Wn++)
            for (Jn = Ae + Jt(sn[Wn]) + Ae; yn.indexOf(Jn) >= 0; )
              yn = yn.replace(Jn, Ae);
          St.className = ae.trim(yn);
        }
      }(_t, jt.split(Ae));
    }, hasClass: function(jt) {
      var _t = this.getEL();
      if (_t)
        return function(St, sn) {
          var yn, Wn, Jn, pr = St.className, cr = sn.length;
          if (pr && cr) {
            for (yn = _n(pr), Wn = 0; Wn < cr; Wn++)
              if (Jn = Ae + Jt(sn[Wn]) + Ae, yn.indexOf(Jn) < 0)
                return q;
            return F;
          }
          return q;
        }(_t, jt.split(Ae));
    }, parent: function() {
      var jt = this.getEL();
      return jt && (jt = jt.parentNode), new Ke(jt);
    }, remove: function() {
      var jt = this.getEL();
      jt && jt.parentNode && jt.parentNode.removeChild(jt);
    }, offset: function() {
      var jt = this.getEL();
      return ae.DOM.getElDimensions(jt, F);
    } }), ae.mix(ae, { all: In, one: function(jt, _t) {
      var St = In(jt, _t);
      return St.length ? St.slice(0, 1) : St;
    }, isNodeList: function(jt) {
      return jt instanceof Ke;
    } }), ae.ready(function() {
      ae.all = In;
    });
  }(n), function(ye) {
    var oe = ye.Lib, ae = oe.win, ie = isNaN;
    oe.DOM = { getOffset: function(_e, de, Se) {
      var Ae, ze;
      _e = _e || ae.event;
      for (var qe, Ke, At = Se || _e.target, _n = 0, Jt = 0, In = 0, jt = 0, _t = !1, St = oe.doc; At && !ie(At.offsetLeft) && !ie(At.offsetTop); )
        Ke = At.scrollLeft, qe = At.scrollTop, At.tagName === "BODY" ? _t ? (Ke = 0, qe = 0) : (Ke |= (Ae = St.documentElement) === null || Ae === void 0 ? void 0 : Ae.scrollLeft, qe |= (ze = St.documentElement) === null || ze === void 0 ? void 0 : ze.scrollTop) : At.style.position === "fixed" && (_t = !0), _n += At.offsetLeft - Ke, Jt += At.offsetTop - qe, At = At.offsetParent;
      return de && (In = de.Left, jt = de.Top), { x: _n = _e.clientX - _n - In, y: Jt = _e.clientY - Jt - jt };
    }, getElDimensions: function(_e, de) {
      var Se, Ae;
      return _e ? (Se = _e.style.display, _e.style.display = "", Ae = de ? { offsetTop: _e.offsetTop, offsetLeft: _e.offsetLeft, offsetWidth: _e.offsetWidth, offsetHeight: _e.offsetHeight } : { clientTop: _e.clientTop, clientLeft: _e.clientLeft, clientWidth: _e.clientWidth ? _e.clientWidth : parseInt(_e.style.width) ? parseInt(_e.style.width) : 0, clientHeight: _e.clientHeight ? _e.clientHeight : parseInt(_e.style.height) ? parseInt(_e.style.height) : 0 }, _e.style.display = Se, Ae) : { offsetTop: 0, offsetLeft: 0, offsetWidth: 0, offsetHeight: 0 };
    } }, oe.getElDimensions = oe.DOM.getElDimensions;
  }(n), function(ye) {
    var oe, ae = ye.Lib;
    ae.loaderBarClassName = "ds-dwt-loaderBar", ae.loaderBarSource = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjE2IiBmaWxsPSIjZmU4ZTE0Ii8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMi41MzEiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDkwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEwLjc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iOC4wNjMiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDIyNSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI2LjQzOCIgZmlsbD0iI2ZlOGUxNCIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgzMTUgNjQgNjQpIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHZhbHVlcz0iNDUgNjQgNjQ7OTAgNjQgNjQ7MTM1IDY0IDY0OzE4MCA2NCA2NDsyMjUgNjQgNjQ7MjcwIDY0IDY0OzMxNSA2NCA2NDswIDY0IDY0IiBjYWxjTW9kZT0iZGlzY3JldGUiIGR1cj0iNzIwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==", ae.loaderBarSourceIE = "data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=", ae.createShowMaskContent = function(_t) {
      var St, sn, yn, Wn = "", Jn = "230px", pr = "240px", cr = "", Fi = "";
      return _t && (_t.background && (Wn = ";background:" + _t.background), _t.width && (Jn = _t.width), _t.height && (pr = _t.height), _t.imageSource && (St = _t.imageSource)), St || (St = ae.loaderBarSource), yn = parseInt(Jn) / 2, ae.isNumber(yn) && yn > 0 && (Fi = ";width:" + yn + "px"), sn = parseInt(pr) / 2, ae.isNumber(sn) && sn > 0 && (cr = ";height:" + sn + "px"), ['<div align="center" ', 'class="', ae.loaderBarClassName, '" ', 'style="margin:0 auto;max-width:', Jn, ";max-height:", pr, ";line-height:", pr, Wn, '"><img style="user-select:none', cr, Fi, ';max-width:230px;max-height:240px;vertical-align:middle" src="', St, '" draggable="false" /></div>'].join("");
    };
    var ie, _e = ae.win, de = ae.doc, Se = 5e5;
    function Ae(_t, St) {
      for (var sn = 0; sn < _t.length; ++sn)
        if (_t[sn] == St)
          return F;
      return q;
    }
    function ze(_t) {
      var St;
      return _e.getComputedStyle ? St = _e.getComputedStyle(_t) : _t.currentStyle && (St = _t.currentStyle), St && St.position != "absolute" || _t.style.top != "auto" && _t.style.top != "" || _t.style.bottom != "auto" && _t.style.bottom != "" ? q : !function(sn) {
        for (var yn = 0; yn < de.styleSheets.length; ++yn) {
          var Wn = de.styleSheets[yn], Jn = [], pr = void 0, cr = void 0, Fi = void 0;
          try {
            Jn = Wn.cssRules, pr = de.querySelectorAll;
          } catch {
          }
          if (Jn && pr)
            for (var Oi = 0; Oi < Jn.length; ++Oi) {
              cr = Jn[Oi], Fi = q;
              try {
                Fi = pr(cr.selectorText);
              } catch {
              }
              if (Fi && Ae(Fi, sn)) {
                var Di = cr.style.getPropertyValue("top"), Wr = cr.style.getPropertyValue("bottom");
                if (Di && Di != "auto" || Wr && Wr != "auto")
                  return F;
              }
            }
        }
        return q;
      }(_t);
    }
    function qe(_t) {
      var St = de.createEvent("MouseEvents");
      return St == null || St.initMouseEvent(_t.type, _t.bubbles, _t.cancelable, _e, _t.detail, _t.screenX, _t.screenY, _t.clientX, _t.clientY, _t.ctrlKey, _t.altKey, _t.shiftKey, _t.metaKey, _t.button, _t.relatedTarget), St;
    }
    function Ke(_t) {
      var St;
      (St = de.body) === null || St === void 0 || St.dispatchEvent(qe(_t));
    }
    function At(_t, St) {
      if (ie) {
        var sn = ie.style;
        sn.backgroundColor = ["rgba(", St, ",", St, ",", St, ",", _t, ")"].join(""), sn.filter = ["alpha(opacity=", 100 * _t, ")"].join(""), sn.opacity = sn.MozOpacity = _t;
      }
    }
    function _n(_t, St) {
      ie === oe ? function(sn, yn) {
        if (ie = de.createElement("div")) {
          var Wn = ie.style;
          Wn.position = "fixed", Wn.display = "block", Wn.left = Wn.top = Wn.margin = Wn.padding = 0, At(sn, yn), Wn.zIndex = Se, Wn.width = Wn.height = "100%", ye.navInfoSync.bIE && (ie.innerHTML = `<iframe src="javascript:''" style="background:none;margin:0px auto;border:0;width:100%;height:100%;position:relative;z-index:9999;"></iframe>`), de.createEvent && ae.addEventListener(ie, "click", Ke);
        }
      }(_t, St) : At(_t, St), de.body && !de.body.contains(ie) && de.body.appendChild(ie);
    }
    var Jt = { pendingDialogStack: [], opacity: 0.1, grayHex: 128, _updateStacking: function(_t) {
      var St, sn;
      (St = this.pendingDialogStack).length != 0 ? (_t != 1 && _n(Jt.opacity, Jt.grayHex), sn = Se, ae.each(St, function(yn) {
        sn++, yn._dlgInfo.mask && (yn._dlgInfo.mask.style.zIndex = sn++), yn.style.zIndex = sn;
      })) : ie !== oe && (ae.removeEventListener(ie, "click", Ke), de && de.body && de.body.removeChild(ie), ie = oe);
    }, pushDialog: function(_t, St) {
      var sn, yn = this;
      _t.getBoundingClientRect(), yn.pendingDialogStack.length >= 1e3 ? ae.error("Too many modal dialogs.") : ((sn = de.createElement("div")).className = "dynamsoft-backdrop", St == 1 ? (sn.style.left = 0, sn.style.top = 0, sn.style.position = "absolute") : (sn.style.left = 0, sn.style.top = 0, sn.style.width = "100%", sn.style.height = "100%", sn.style.position = "fixed"), de.createEvent && ae.addEventListener(sn, "click", function(Wn) {
        if (_t.dispatchEvent) {
          var Jn = qe(Wn);
          _t.dispatchEvent(Jn);
        }
      }), _t.parentNode.insertBefore(sn, _t.nextSibling), _t._dlgInfo.mask = sn, yn.pendingDialogStack.push(_t), yn._updateStacking(St));
    }, removeDialog: function(_t) {
      var St, sn, yn = this;
      (St = ae.isArray(yn.pendingDialogStack) ? ae.indexOf(_t, yn.pendingDialogStack) : -1) != -1 && (yn.pendingDialogStack.splice(St, 1), (sn = _t._dlgInfo.mask).parentNode && sn.parentNode.removeChild(sn), _t._dlgInfo.mask = null, yn._updateStacking());
    } };
    function In(_t, St) {
      var sn, yn = this, Wn = !0, Jn = St == 1 ? "absolute" : "fixed", pr = "50%", cr = "50%", Fi = "", Oi = "", Di = null;
      if (yn._dlgInfo && yn._dlgInfo.styleConfig) {
        var Wr = yn._dlgInfo.styleConfig;
        ae.isString(Wr.style) ? (sn = Wr.style, Wn = !1) : (ae.isString(Wr.position) && (Jn = Wr.position, Wn = !1), (ae.isString(Wr.left) || ae.isNumber(Wr.left)) && (cr = Wr.left, Wn = !1), (ae.isString(Wr.top) || ae.isNumber(Wr.top)) && (pr = Wr.top, Wn = !1), (ae.isString(Wr.width) || ae.isNumber(Wr.width)) && (Fi = Wr.width, Wn = !1), (ae.isString(Wr.height) || ae.isNumber(Wr.height)) && (Oi = Wr.height, Wn = !1), ae.isString(Wr.transform) && (Di = Wr.transform, Wn = !1));
      }
      if (yn.open)
        ae.error("showDialog called on open dialog.");
      else {
        if (yn.open = F, yn.removeAttribute("closed"), yn.setAttribute("open", "open"), sn)
          yn.setAttribute("style", sn);
        else {
          var Ki = void 0;
          Wn ? Ki = ["display:block;position:", Jn, ";left:50%;top:50%;transform:translate(-50%,-50%)"] : (Ki = ["display:block;position:", Jn, ";left:", cr, ";top:", pr, ";width:", Fi, ";height:", Oi], Di && (Ki.push(";transform:"), Ki.push(Di))), yn.tagName == "DIALOG" ? Ki.push(";margin:0;border-radius:6px;box-shadow:2px 2px 0 0 rgba(0,0,0,.05);-webkit-box-sizing:border-box;box-sizing:border-box;") : Ki.push(";border:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;"), yn.setAttribute("style", Ki.join(""));
        }
        ze(yn) && function(Lo) {
          var Eo, ro, di, Ga;
          Ga = (((Eo = de.body) === null || Eo === void 0 ? void 0 : Eo.scrollTop) || ((ro = de.documentElement) === null || ro === void 0 ? void 0 : ro.scrollTop) || 0) + ((_e.innerHeight ? _e.innerHeight : (di = de.documentElement) === null || di === void 0 ? void 0 : di.clientHeight) - Lo.offsetHeight) / 2, Lo.style.top = Ga + "px", Lo._dlgInfo.isTopOverridden = F;
        }(yn), _t && (yn._dlgInfo.modal = F, Jt.pushDialog(yn, St));
      }
    }
    function jt(_t) {
      var St = this;
      return St.open || ae.error("closeDialog called on closed dialog."), St.open = q, St.removeAttribute("open"), St.setAttribute("closed", "closed"), St.style.display = "none", _t !== void 0 && (St.returnValue = _t), St._dlgInfo.isTopOverridden && (St.style.top = "auto"), St._dlgInfo.modal && Jt.removeDialog(St), St.returnValue;
    }
    ae.dialog = { setup: function(_t, St) {
      _t.show = In.bind(_t, q, St), _t.showModal = In.bind(_t, F, St), _t.close = jt.bind(_t), _t._dlgInfo = {};
    } }, ae.mask = { dlgMask: !1, preOnresize: !1, preOnscroll: !1 }, ae.setBackOpacity = function(_t) {
      ae.isNumber(_t.opacity) ? Jt.opacity = _t.opacity : Jt.opacity = 0.1, ae.isNumber(_t.grayHex) ? Jt.grayHex = _t.grayHex : Jt.grayHex = 128;
    }, ae.showMask = function(_t) {
      var St, sn, yn, Wn, Jn;
      if (!ae.mask.dlgMask && !ae.dlgLoadingShowStatus) {
        var pr, cr, Fi, Oi, Di = !1;
        if (_t && (Oi = {}, _t.style ? Oi.style = _t.style : ((ae.isString(_t.top) || ae.isNumber(_t.top)) && (Oi.top = _t.top), (ae.isString(_t.left) || ae.isNumber(_t.left)) && (Oi.left = _t.left), ae.isString(_t.position) && (Oi.position = _t.position)), _t.confined && (Di = _t.confined), (ae.isString(_t.width) || ae.isNumber(_t.width)) && (sn = _t.width), (ae.isString(_t.height) || ae.isNumber(_t.height)) && (yn = _t.height), ae.isString(_t.background) && (Wn = _t.background), ae.isString(_t.imageSource) && (Jn = _t.imageSource), ae.setBackOpacity(_t), Di && _t.wrapperEl && (cr = _t.wrapperEl, ae.isString(cr) && (cr = de.getElementById(cr)))), !Jn) {
          var Wr = void 0;
          ye.DWT && ye.DWT.CustomizableDisplayInfo && (Wr = ye.DWT.CustomizableDisplayInfo), Jn = Wr && ae.isString(Wr.loaderBarSource) && Wr.loaderBarSource != "" ? Wr.loaderBarSource : ye.navInfoSync.bIE ? ae.loaderBarSourceIE : ae.loaderBarSource;
        }
        cr && (Fi = cr.getBoundingClientRect(), cr.style.position = "relative"), (pr = de.createElement("div")) && (pr.className = "dynamsoft-dialog-wrap", pr.innerHTML = ae.createShowMaskContent({ width: sn, height: yn, backgroundColor: Wn, imageSource: Jn }), cr ? (cr.appendChild(pr), pr.style.position = "absolute", pr.style.top = "50%", pr.style.left = "50%", pr.style.transform = "translate(-50%, -50%)") : (St = de.body) === null || St === void 0 || St.appendChild(pr), Di && Fi && (window.onresize ? ae.mask.preOnresize = window.onresize : ae.mask.preOnresize = !1, window.onscroll ? ae.mask.preOnscroll = window.onscroll : ae.mask.preOnscroll = !1), ae.mask.dlgMask = pr, ae.dialog.setup(pr, Di), Oi && (pr._dlgInfo.styleConfig = Oi), cr && (pr._dlgInfo.wrapperEl = cr), pr.showModal());
      }
    }, ae.hideMask = function() {
      var _t, St = ae.mask.dlgMask;
      St && (St.close(), St._dlgInfo && St._dlgInfo.wrapperEl ? (St._dlgInfo.wrapperEl.removeChild(St), St._dlgInfo.wrapperEl = null) : (_t = de.body) === null || _t === void 0 || _t.removeChild(St), ae.mask.dlgMask = !1), ae.mask.preOnresize ? window.onresize = ae.mask.preOnresize : window.onresize = null, ae.mask.preOnresize = !1, ae.mask.preOnscroll ? window.onscroll = ae.mask.preOnscroll : window.onscroll = null, ae.mask.preOnscroll = !1;
    };
  }(n), function(ye) {
    var oe, ae, ie, _e, de = ye.Lib, Se = window.document, Ae = [], ze = Ae.push, qe = Ae.slice, Ke = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, At = function() {
      ae();
    };
    try {
      ze.apply(qe.call(Se.childNodes), Se.childNodes);
    } catch {
      return;
    }
    function _n(Jt, In, jt, _t) {
      var St, sn, yn, Wn = In && In.ownerDocument, Jn = In ? In.nodeType : 9;
      if (jt = jt || [], typeof Jt != "string" || !Jt || Jn !== 1 && Jn !== 9 && Jn !== 11)
        return jt;
      if (!_t && ((In ? In.ownerDocument || In : Se) !== ie && ae(In), In = In || ie, Jn !== 11 && (yn = Ke.exec(Jt))))
        if (St = yn[1]) {
          if (Jn === 9) {
            if (!(sn = In.getElementById(St)))
              return jt;
            if (sn.id === St)
              return jt.push(sn), jt;
          } else if (Wn && (sn = Wn.getElementById(St)) && _e(In, sn) && sn.id === St)
            return jt.push(sn), jt;
        } else {
          if (yn[2])
            return ze.apply(jt, In.getElementsByTagName(Jt)), jt;
          if ((St = yn[3]) && In.getElementsByClassName)
            return ze.apply(jt, In.getElementsByClassName(St)), jt;
        }
      return jt;
    }
    ae = _n.setDocument = function(Jt) {
      var In, jt = Jt ? Jt.ownerDocument || Jt : Se;
      return jt !== ie && jt.nodeType === 9 && jt.documentElement && (Se !== (ie = jt) && (In = ie.defaultView) && In.top !== In && (In.addEventListener ? In.addEventListener("unload", At, !1) : In.attachEvent && In.attachEvent("onunload", At)), _e = function(_t, St) {
        if (St) {
          for (; St = St.parentNode; )
            if (St === _t)
              return !0;
        }
        return !1;
      }), ie;
    }, _n.contains = function(Jt, In) {
      return (Jt.ownerDocument || Jt) !== ie && ae(Jt), _e(Jt, In);
    }, _n.error = function(Jt) {
      throw new Error("Syntax error: " + Jt);
    }, oe = _n.getText = function(Jt) {
      var In, jt = "", _t = 0, St = Jt.nodeType;
      if (St) {
        if (St === 1 || St === 9 || St === 11) {
          if (typeof Jt.textContent == "string")
            return Jt.textContent;
          for (Jt = Jt.firstChild; Jt; Jt = Jt.nextSibling)
            jt += oe(Jt);
        } else if (St === 3 || St === 4)
          return Jt.nodeValue;
      } else
        for (; In = Jt[_t++]; )
          jt += oe(In);
      return jt;
    }, ae(), de.sizzle = _n;
  }(n), function(ye) {
    var oe, ae, ie = ye.Lib, _e = ie.doc, de = ie.each, Se = new fn(_e), Ae = Se.docElem, ze = ie.sizzle, qe = /^margin/, Ke = /^(top|right|bottom|left)$/, At = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, _n = new RegExp("^(" + At + ")(?!px)[a-z%]+$", "i"), Jt = new RegExp("^(" + At + ")(.*)$", "i");
    window.getComputedStyle ? (oe = function(Sn) {
      var Kn, Cn;
      return (Cn = (Kn = ie.isFunction(Sn.getEL) ? Sn.getEL() : Sn).ownerDocument.defaultView) && Cn.opener || (Cn = window), Cn.getComputedStyle(Kn);
    }, ae = function(Sn, Kn, Cn) {
      var lr, Vn, wr, rr, Dr = Sn.style;
      return (rr = (Cn = Cn || oe(Sn)) ? Cn.getPropertyValue(Kn) || Cn[Kn] : void 0) !== "" && rr !== void 0 || ze.contains(Sn.ownerDocument, Sn) || (rr = ie.style(Sn, Kn)), Cn && !Se.pixelMarginRight() && _n.test(rr) && qe.test(Kn) && (lr = Dr.width, Vn = Dr.minWidth, wr = Dr.maxWidth, Dr.minWidth = Dr.maxWidth = Dr.width = rr, rr = Cn.width, Dr.width = lr, Dr.minWidth = Vn, Dr.maxWidth = wr), rr === void 0 ? rr : rr + "";
    }) : Ae && Ae.currentStyle && (oe = function(Sn) {
      return Sn.currentStyle;
    }, ae = function(Sn, Kn, Cn) {
      var lr, Vn, wr, rr, Dr = Sn.style;
      return (rr = (Cn = Cn || oe(Sn)) ? Cn[Kn] : void 0) == null && Dr && Dr[Kn] && (rr = Dr[Kn]), _n.test(rr) && !Ke.test(Kn) && (lr = Dr.left, (wr = (Vn = Sn.runtimeStyle) && Vn.left) && (Vn.left = Sn.currentStyle.left), Dr.left = Kn === "fontSize" ? "1em" : rr, rr = Dr.pixelLeft + "px", Dr.left = lr, wr && (Vn.left = wr)), rr === void 0 ? rr : rr + "" || "auto";
    });
    var In, jt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi, _t = /<([\w:-]+)/, St = /^\s+/, sn = /<|&#?\w+;/, yn = /<tbody/i, Wn = /^-ms-/, Jn = /-([\da-z])/gi, pr = /^(none|table(?!-c[ea]).+)/, cr = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/, Fi = { position: "absolute", visibility: "hidden", display: "block" }, Oi = { letterSpacing: "0", fontWeight: "400" }, Di = ["Top", "Right", "Bottom", "Left"], Wr = { option: [1, "<select multiple='multiple'>", "</select>"], legend: [1, "<fieldset>", "</fieldset>"], area: [1, "<map>", "</map>"], param: [1, "<object>", "</object>"], thead: [1, "<table>", "</table>"], tr: [2, "<table><tbody>", "</tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: Se.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"] }, Ki = ["Webkit", "O", "Moz", "ms"], Lo = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video", Eo = document.createElement("div");
    if (Eo.style) {
      In = Eo.style, Se.cssFloat = !!Eo.style.cssFloat;
      var ro = function(Sn, Kn) {
        return Kn.toUpperCase();
      }, di = { type: ie.type, cssHooks: {}, htmlPrefilter: function(Sn) {
        return Sn.replace(jt, "<$1></$2>");
      }, nodeName: function(Sn, Kn) {
        return Sn.nodeName && Sn.nodeName.toLowerCase() === Kn.toLowerCase();
      }, merge: function(Sn, Kn) {
        for (var Cn = +Kn.length, lr = 0, Vn = Sn.length; lr < Cn; )
          Sn[Vn++] = Kn[lr++];
        if (Cn != Cn)
          for (; Kn[lr] !== void 0; )
            Sn[Vn++] = Kn[lr++];
        return Sn.length = Vn, Sn;
      }, camelCase: function(Sn) {
        return Sn.replace(Wn, "ms-").replace(Jn, ro);
      }, cssProps: {}, cssNumber: { animationIterationCount: !0, columnCount: !0, fillOpacity: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 } }, Ga = ["flo", "at"].join("");
      di.cssProps[Ga] = Se.cssFloat ? "cssFloat" : "styleFloat", de(["height", "width"], function(Sn, Kn) {
        di.cssHooks[Sn] = { get: function(Cn, lr, Vn) {
          if (lr)
            return pr.test(ie.css(Cn, "display")) && Cn.offsetWidth === 0 ? function(wr, rr, Dr, Do) {
              var Wi, Ir = {};
              return de(rr, function(ti, Pi) {
                Ir[Pi] = wr.style[Pi], wr.style[Pi] = rr[Pi];
              }), Wi = Dr.apply(wr, Do || []), de(rr, function(ti, Pi) {
                wr.style[Pi] = Ir[Pi];
              }), Wi;
            }(Cn, Fi, function() {
              return is(Cn, Sn, Vn);
            }) : is(Cn, Sn, Vn);
        }, set: function(Cn, lr, Vn) {
          var wr = Vn && oe(Cn);
          return function(rr, Dr, Do) {
            var Wi = Jt.exec(Dr);
            return Wi ? Math.max(0, parseInt(Wi[1]) - (Do || 0)) + (Wi[2] || "px") : Dr;
          }(0, lr, Vn ? rs(Cn, Sn, Vn, Se.boxSizing && ie.css(Cn, "boxSizing", !1, wr) === "border-box", wr) : 0);
        } };
      }), ie.style = function(Sn, Kn, Cn, lr) {
        if (Sn && Sn.nodeType !== 3 && Sn.nodeType !== 8 && Sn.style) {
          var Vn, wr, rr, Dr = di.camelCase(Kn), Do = Sn.style;
          if (Kn = di.cssProps[Dr] || (di.cssProps[Dr] = ts(Dr) || Dr), rr = di.cssHooks[Kn] || di.cssHooks[Dr], Cn === void 0)
            return rr && "get" in rr && (Vn = rr.get(Sn, !1, lr)) !== void 0 ? Vn : Do[Kn] + "";
          (wr = typeof Cn) == "string" && (Vn = _a(Cn)) && Vn[1] && (Cn = function(Wi, Ir, ti, Pi) {
            var lo, ji = 1, ho = 20, vo = Pi ? function() {
              return Pi.cur();
            } : function() {
              return ie.css(Wi, Ir, "");
            }, va = vo(), Qo = ti && ti[3] || (di.cssNumber[Ir] ? "" : "px"), yo = (di.cssNumber[Ir] || Qo !== "px" && +va) && _a(ie.css(Wi, Ir));
            if (yo && yo[3] !== Qo) {
              Qo = Qo || yo[3], ti = ti || [], yo = +va || 1;
              do
                yo /= ji = ji || ".5", ie.style(Wi, Ir, yo + Qo);
              while (ji !== (ji = vo() / va) && ji !== 1 && --ho);
            }
            return ti && (yo = +yo || +va || 0, lo = ti[1] ? yo + (ti[1] + 1) * ti[2] : +ti[2], Pi && (Pi.unit = Qo, Pi.start = yo, Pi.end = lo)), lo;
          }(Sn, Kn, Vn), wr = "number"), Cn != null && Cn == Cn && (wr === "number" && (Cn += Vn && Vn[3] || (di.cssNumber[Dr] ? "" : "px")), Se.clearCloneStyle || Cn !== "" || Kn.indexOf("background") !== 0 || (Do[Kn] = "inherit"), rr && "set" in rr && (Cn = rr.set(Sn, Cn, lr)) === void 0 || (Do[Kn] = Cn));
        }
      }, ie.css = function(Sn, Kn, Cn, lr) {
        var Vn, wr, rr, Dr = di.camelCase(Kn);
        return Kn = di.cssProps[Dr] || (di.cssProps[Dr] = ts(Dr) || Dr), (rr = di.cssHooks[Kn] || di.cssHooks[Dr]) && "get" in rr && (wr = rr.get(Sn, !0, Cn)), wr === void 0 && (wr = ae(Sn, Kn, lr)), wr === "normal" && Kn in Oi && (wr = Oi[Kn]), Cn === "" || Cn ? (Vn = parseFloat(wr), Cn === !0 || isFinite(Vn) ? Vn || 0 : wr) : wr;
      }, ie.parseHTML = function(Sn, Kn) {
        if (!Sn || typeof Sn != "string")
          return [];
        typeof Kn == "boolean" && (Kn = !1), Kn = Kn || document;
        var Cn = cr.exec(Sn);
        return Cn ? [Kn.createElement(Cn[1])] : (Cn = ns([Sn], Kn), di.merge([], Cn.childNodes));
      }, ie.support = Se;
    }
    function ts(Sn) {
      if (Sn in In)
        return Sn;
      for (var Kn = Sn.charAt(0).toUpperCase() + Sn.slice(1), Cn = Ki.length; Cn--; )
        if ((Sn = Ki[Cn] + Kn) in In)
          return Sn;
    }
    function ns(Sn, Kn) {
      for (var Cn, lr, Vn, wr, rr, Dr, Do = Sn.length, Wi = function(lo) {
        var ji = Lo.split("|"), ho = lo.createDocumentFragment();
        if (ho.createElement)
          for (; ji.length; )
            ho.createElement(ji.pop());
        return ho;
      }(Kn), Ir = [], ti = 0; ti < Do; ti++)
        if ((lr = Sn[ti]) || lr === 0)
          if (ie.type(lr) === "object")
            di.merge(Ir, lr.nodeType ? [lr] : lr);
          else if (sn.test(lr)) {
            if (Vn = Vn || Wi.appendChild(Kn.createElement("div"))) {
              for (wr = (_t.exec(lr) || ["", ""])[1].toLowerCase(), Dr = Wr[wr] || Wr._default, Vn.innerHTML = Dr[1] + di.htmlPrefilter(lr) + Dr[2], Cn = Dr[0]; Cn--; )
                Vn = Vn.lastChild;
              if (!Se.leadingWhitespace && St.test(lr)) {
                var Pi = St.exec(lr);
                Pi && Pi.length > 0 && Ir.push(Kn.createTextNode(Pi[0]));
              }
              if (!Se.tbody && (Cn = (lr = wr !== "table" || yn.test(lr) ? Dr[1] !== "<table>" || yn.test(lr) ? 0 : Vn : Vn.firstChild) && lr.childNodes.length, lr))
                for (; Cn--; )
                  di.nodeName(rr = lr.childNodes[Cn], "tbody") && !rr.childNodes.length && lr.removeChild(rr);
              for (di.merge(Ir, Vn.childNodes), Vn.textContent = ""; Vn.firstChild; )
                Vn.removeChild(Vn.firstChild);
              Vn = Wi.lastChild;
            }
          } else
            Ir.push(Kn.createTextNode(lr));
      for (Vn && Wi && Wi.removeChild(Vn), ti = 0; lr = Ir[ti++]; )
        lr.tagName !== "SCRIPT" && (ze.contains(lr.ownerDocument, lr), Wi.appendChild(lr));
      return Vn = null, Wi;
    }
    function rs(Sn, Kn, Cn, lr, Vn) {
      for (var wr = Cn === (lr ? "border" : "content") ? 4 : Kn === "width" ? 1 : 0, rr = 0; wr < 4; wr += 2)
        Cn === "margin" && (rr += ie.css(Sn, Cn + Di[wr], !0, Vn)), lr ? (Cn === "content" && (rr -= ie.css(Sn, "padding" + Di[wr], !0, Vn)), Cn !== "margin" && (rr -= ie.css(Sn, "border" + Di[wr] + "Width", !0, Vn))) : (rr += ie.css(Sn, "padding" + Di[wr], !0, Vn), Cn !== "padding" && (rr += ie.css(Sn, "border" + Di[wr] + "Width", !0, Vn)));
      return rr;
    }
    function is(Sn, Kn, Cn) {
      var lr = !0, Vn = Kn === "width" ? Sn.offsetWidth : Sn.offsetHeight, wr = oe(Sn), rr = Se.boxSizing && ie.css(Sn, "boxSizing", !1, wr) === "border-box";
      if (Vn <= 0 || Vn == null) {
        if (((Vn = ae(Sn, Kn, wr)) < 0 || Vn == null) && (Vn = Sn.style[Kn]), _n.test(Vn))
          return Vn;
        lr = rr && (Se.boxSizingReliable() || Vn === Sn.style[Kn]), Vn = parseFloat(Vn) || 0;
      }
      return Vn + rs(Sn, Kn, Cn || (rr ? "border" : "content"), lr, wr);
    }
    function _a(Sn) {
      return new RegExp("^(?:([+-])=|)(" + At + ")([a-z%]*)$", "i").exec(Sn);
    }
  }(n), n.Lib.wakeLock = { toggle: yr, getWakeLock: Gr });
})();
(function(l) {
  typeof module == "object" && typeof module.exports == "object" && (typeof Object.create == "function" ? Object.defineProperty(module.exports, "__esModule", { value: !0 }) : module.exports.__esModule = !0, module.exports.default = l);
})(Xi.Dynamsoft);
(function(l) {
  l.DWT || (l.DWT = {}), l.DWT.LTS || (l.DWT.LTS = {}), l.Lib.UI || (l.Lib.UI = {}), l.Lib.html5 || (l.Lib.html5 = {});
})(G);
(function(l) {
  if (!l.WeakSet) {
    let C = function(p) {
      this.name = "__st" + (1e9 * Math.random() >>> 0) + (n++ + "__"), p && p.forEach && p.forEach(this.add, this);
    };
    l.WeakSet = C;
    var n = Date.now() % 1e9, L = C.prototype;
    L.add = function(p) {
      var N = this.name;
      return p[N] || Object.defineProperty(p, N, { value: !0, writable: !0 }), this;
    }, L.delete = function(p) {
      return p[this.name] ? (p[this.name] = void 0, !0) : !1;
    }, L.has = function(p) {
      return !!p[this.name];
    };
  }
  if (!l.WeakMap) {
    let C = function(p) {
      return Object(p) === p;
    };
    var k = Object.prototype.hasOwnProperty, re = Object.defineProperty && function() {
      try {
        return Object.defineProperty({}, "x", { value: 1 }).x === 1;
      } catch {
      }
    }(), R = function(p, N, U) {
      re ? Object.defineProperty(p, N, { configurable: !0, writable: !0, value: U }) : p[N] = U;
    };
    l.WeakMap = function() {
      function p() {
        if (this === void 0)
          throw new TypeError("Constructor WeakMap requires 'new'");
        if (R(this, "_id", U("_WeakMap")), arguments.length > 0)
          throw new TypeError("WeakMap iterable is not supported");
      }
      R(p.prototype, "delete", function(K) {
        if (N(this, "delete"), !C(K))
          return !1;
        var Y = K[this._id];
        return Y && Y[0] === K ? (delete K[this._id], !0) : !1;
      }), R(p.prototype, "get", function(K) {
        if (N(this, "get"), !!C(K)) {
          var Y = K[this._id];
          if (Y && Y[0] === K)
            return Y[1];
        }
      }), R(p.prototype, "has", function(K) {
        if (N(this, "has"), !C(K))
          return !1;
        var Y = K[this._id];
        return !!(Y && Y[0] === K);
      }), R(p.prototype, "set", function(K, Y) {
        if (N(this, "set"), !C(K))
          throw new TypeError("Invalid value used as weak map key");
        var F = K[this._id];
        return F && F[0] === K ? (F[1] = Y, this) : (R(K, this._id, [K, Y]), this);
      });
      function N(K, Y) {
        if (!C(K) || !k.call(K, "_id"))
          throw new TypeError(Y + " method called on incompatible receiver " + typeof K);
      }
      function U(K) {
        return K + "_" + H() + "." + H();
      }
      function H() {
        return Math.random().toString().substring(2);
      }
      return R(p, "_polyfill", !0), p;
    }();
  }
})(typeof Xi < "u" ? Xi : typeof self < "u" ? self : typeof window < "u" ? window : typeof global < "u" ? global : globalThis);
(function() {
  var l = Xi.Dynamsoft, n = l.Lib;
  function L(o) {
    return Math.floor(o);
  }
  var k = "18", re = "0", R = "1025", C = "127.0.0.1", p = "".concat(k, ",").concat(re, ",").concat("0", ",").concat(R), N = { JSVersion: p, ServerVersionInfo: p, ServerLinuxVersionInfo: p, ServerMacVersionInfo: p, ActiveXVersion: p, ActiveXPdfVersion: "11.4.1.1025", PdfVersion: "11.4.1.1025", ProductName: "Dynamic Web TWAIN " + [k, re].join("."), Containers: void 0, DynamicContainers: [], ContainerMap: {}, Trial: !1, ResourcesPath: "Resources", Debug: !1, IfUpdateService: !1, AutoLoad: !0, ReConnectToService: !0, OnWebTwainReady: !1, OnWebTwainNotFound: !1, OnWebTwainOldPluginNotAllowed: !1, OnWebTwainNeedUpgrade: !1, OnWebTwainNeedUpgradeWebJavascript: !1, OnWebTwainInitMessage: !1, ViewerJSIntegerited: !0, ActiveXInstallWithCAB: !1, IfUseActiveXForIE10Plus: !1, IfInstallDWTModuleWithZIP: !1, IfUseEmbeddedDownloadNoticeForActiveX: !1, IfCheckDCP: !1, IfDisableDefaultSettings: !1, OnWebTwainWillInit: !1, IfAddMD5InUploadHeader: !1, IfAlwaysFocusOnPopupWindow: !0, IfConfineMaskWithinTheViewer: !1, UseDefaultViewer: !0, fetchOptions: { mode: "cors", credentials: "same-origin" }, HideTrialMessage: !1, CheckCertExpired: !0, ConnectWithSocket: !1, SSLPort: 18623, Port: 18622, showLoadingMsgDialog: !0, licenseServer: void 0, sessionPassword: void 0, organizationID: void 0, handshakeCode: void 0, Host: C }, U = { URL: "", UpdateDaysBeforeExpired: 30 }, H = { loaderBarClassName: "ds-dwt-loaderBar", loaderBarBackgroundColor: "", loaderBarSource: l.navInfoSync.bIE ? l.Lib.loaderBarSourceIE : l.Lib.loaderBarSource, errorMessages: { ERR_MODULE_NOT_INSTALLED: "Error: The Dynamic Web TWAIN module is not installed.", ERR_BROWSER_NOT_SUPPORT: "Error: This browser is currently not supported.", ERR_CreateID_MustNotInContainers: "Error: Duplicate ContainerId detected for creating Dynamic Web TWAIN objects, please check and modify.", ERR_CreateID_WebTwainIdDuplicated: "Error: Duplicate id detected for creating Dynamic Web TWAIN objects, please check and modify.", ERR_CreateID_NotContainer: "Error: The ID of the DIV for creating the new DWT object is invalid.", ERR_CreateID_WasmEnvNotLoaded: "Error: The wasm env not loaded.", ERR_DWT_NOT_DOWNLOADED: "Error: Failed to download the Dynamic Web TWAIN module.", limitReachedForZoomIn: "Error: You have reached the limit for zooming in", limitReachedForZoomOut: "Error: You have reached the limit for zooming out", insufficientParas: "Error: Not enough parameters.", invalidAngle: "Error: The angle you entered is invalid.", invalidIndex: "Error: The index you entered is invalid.", invalidHeightOrWidth: "Error: The height or width you entered is invalid.", imageNotChanged: "Error: You have not changed the current image." }, generalMessages: { checkingDWTVersion: "Checking WebTwain version ...", updatingDService: "Dynamsoft Service is updating ...", downloadingDWTModule: "Downloading the Dynamic Web TWAIN module.", refreshNeeded: "Please REFRESH your browser.", downloadNeeded: "Please download and install the Dynamic Web TWAIN.", DWTmoduleLoaded: "The Dynamic Web TWAIN module is loaded." }, customProgressText: { upload: "Uploading...", download: "Downloading...", load: "Loading...", decode: "Processing...", decodeTIFF: "Processing tiff...", decodePDF: "Processing pdf...", encode: "Processing...", encodeTIFF: "Processing tiff...", encodePDF: "Processing pdf...", canvasLoading: "Loading ..." }, buttons: { titles: { previous: "Previous Image", next: "Next Image", print: "Print Image", scan: "Scan Documents", load: "Load Local Images", rotateleft: "Rotate Left", rotate: "Rotate", rotateright: "Rotate Right", deskew: "Deskew", crop: "Crop Selected Area", cut: "Cut Selected Area", changeimagesize: "Change Image Size", flip: "Flip Image", mirror: "Mirror Image", zoomin: "Zoom In", originalsize: "Show Original Size", zoomout: "Zoom Out", stretch: "Stretch Mode", fit: "Fit Window", fitw: "Fit Horizontally", fith: "Fit Vertically", hand: "Hand Mode", rectselect: "Select Mode", zoom: "Click to Zoom In", restore: "Restore Original Image", save: "Save Changes", close: "Close the Editor", removeall: "Remove All Images", removeselected: "Remove All Selected Images" }, bShowAllButtons: !0, visibility: { scan: !0, load: !0, print: !0, removeall: !0, removeselected: !0, rotateleft: !0, rotate: !0, rotateright: !0, deskew: !0, crop: !0, cut: !0, changeimagesize: !0, flip: !0, mirror: !0, zoomin: !0, originalsize: !0, zoomout: !0, stretch: !0, fit: !0, fitw: !0, fith: !0, hand: !0, rectselect: !0, zoom: !0, restore: !0, save: !0, close: !0 } }, dialogText: { dlgRotateAnyAngle: ["Angle :", "Interpolation:", "Keep size", "  OK  ", "Cancel"], dlgChangeImageSize: ["New Height :", "New Width :", "Interpolation method:", "  OK  ", "Cancel"], saveChangedImage: ["You have changed the image. Do you want to keep the change(s)?", "  Yes  ", "  No  "], selectSource: ["Select Source:", "Select", "Cancel", "There is no source available!"] } };
  function K() {
    var o = l.DWT.Host;
    return n.isString(o) && o != "" || (l.DWT.Host = o = C), o;
  }
  function Y() {
    return n.detect.ssl ? l.dcp.SSLPort : l.dcp.Port;
  }
  var F = { CertificateConfig: {}, CustomizableDisplayInfo: {} }, q = l.DWT;
  F.RegisterEvent = function(o, e) {
    return (o === "OnWebTwainReady" && n.isFunction(e) || o === "OnWebTwainInitMessage" && n.isFunction(e)) && (l.DWT[o] = e), !0;
  }, n.mix(F, N), n.mix(F.CertificateConfig, U), n.mix(F.CustomizableDisplayInfo, H), n.mix(F, q), l.DWT = F;
  var O = l.DWT;
  O.EnumDWT_PixelType = { TWPT_BW: 0, TWPT_GRAY: 1, TWPT_RGB: 2, TWPT_PALLETE: 3, TWPT_CMY: 4, TWPT_CMYK: 5, TWPT_YUV: 6, TWPT_YUVK: 7, TWPT_CIEXYZ: 8, TWPT_LAB: 9, TWPT_SRGB: 10, TWPT_SCRGB: 11, TWPT_INFRARED: 16 }, O.EnumDWT_BorderStyle = { TWBS_NONE: 0, TWBS_SINGLEFLAT: 1, TWBS_SINGLE3D: 2 }, O.EnumDWT_MessageType = { TWQC_GET: 1, TWQC_SET: 2, TWQC_GETDEFAULT: 4, TWQC_GETCURRENT: 8, TWQC_RESET: 16 }, O.EnumDWT_Cap = { CAP_NONE: 0, CAP_XFERCOUNT: 1, ICAP_COMPRESSION: 256, ICAP_PIXELTYPE: 257, ICAP_UNITS: 258, ICAP_XFERMECH: 259, CAP_AUTHOR: 4096, CAP_CAPTION: 4097, CAP_FEEDERENABLED: 4098, CAP_FEEDERLOADED: 4099, CAP_TIMEDATE: 4100, CAP_SUPPORTEDCAPS: 4101, CAP_EXTENDEDCAPS: 4102, CAP_AUTOFEED: 4103, CAP_CLEARPAGE: 4104, CAP_FEEDPAGE: 4105, CAP_REWINDPAGE: 4106, CAP_INDICATORS: 4107, CAP_SUPPORTEDCAPSEXT: 4108, CAP_PAPERDETECTABLE: 4109, CAP_UICONTROLLABLE: 4110, CAP_DEVICEONLINE: 4111, CAP_AUTOSCAN: 4112, CAP_THUMBNAILSENABLED: 4113, CAP_DUPLEX: 4114, CAP_DUPLEXENABLED: 4115, CAP_ENABLEDSUIONLY: 4116, CAP_CUSTOMDSDATA: 4117, CAP_ENDORSER: 4118, CAP_ALARMS: 4120, CAP_ALARMVOLUME: 4121, CAP_AUTOMATICCAPTURE: 4122, CAP_TIMEBEFOREFIRSTCAPTURE: 4123, CAP_TIMEBETWEENCAPTURES: 4124, CAP_CLEARBUFFERS: 4125, CAP_MAXBATCHBUFFERS: 4126, CAP_DEVICETIMEDATE: 4127, CAP_POWERSUPPLY: 4128, CAP_CAMERAPREVIEWUI: 4129, CAP_SERIALNUMBER: 4132, CAP_PRINTER: 4134, CAP_PRINTERENABLED: 4135, CAP_PRINTERINDEX: 4136, CAP_PRINTERMODE: 4137, CAP_PRINTERSTRING: 4138, CAP_PRINTERSUFFIX: 4139, CAP_LANGUAGE: 4140, CAP_FEEDERALIGNMENT: 4141, CAP_FEEDERORDER: 4142, CAP_REACQUIREALLOWED: 4144, CAP_BATTERYMINUTES: 4146, CAP_BATTERYPERCENTAGE: 4147, CAP_CAMERASIDE: 4148, CAP_SEGMENTED: 4149, CAP_CAMERAENABLED: 4150, CAP_CAMERAORDER: 4151, CAP_MICRENABLED: 4152, CAP_FEEDERPREP: 4153, CAP_FEEDERPOCKET: 4154, CAP_AUTOMATICSENSEMEDIUM: 4155, CAP_CUSTOMINTERFACEGUID: 4156, ICAP_AUTOBRIGHT: 4352, ICAP_BRIGHTNESS: 4353, ICAP_CONTRAST: 4355, ICAP_CUSTHALFTONE: 4356, ICAP_EXPOSURETIME: 4357, ICAP_FILTER: 4358, ICAP_FLASHUSED: 4359, ICAP_GAMMA: 4360, ICAP_HALFTONES: 4361, ICAP_HIGHLIGHT: 4362, ICAP_IMAGEFILEFORMAT: 4364, ICAP_LAMPSTATE: 4365, ICAP_LIGHTSOURCE: 4366, ICAP_ORIENTATION: 4368, ICAP_PHYSICALWIDTH: 4369, ICAP_PHYSICALHEIGHT: 4370, ICAP_SHADOW: 4371, ICAP_FRAMES: 4372, ICAP_XNATIVERESOLUTION: 4374, ICAP_YNATIVERESOLUTION: 4375, ICAP_XRESOLUTION: 4376, ICAP_YRESOLUTION: 4377, ICAP_MAXFRAMES: 4378, ICAP_TILES: 4379, ICAP_BITORDER: 4380, ICAP_CCITTKFACTOR: 4381, ICAP_LIGHTPATH: 4382, ICAP_PIXELFLAVOR: 4383, ICAP_PLANARCHUNKY: 4384, ICAP_ROTATION: 4385, ICAP_SUPPORTEDSIZES: 4386, ICAP_THRESHOLD: 4387, ICAP_XSCALING: 4388, ICAP_YSCALING: 4389, ICAP_BITORDERCODES: 4390, ICAP_PIXELFLAVORCODES: 4391, ICAP_JPEGPIXELTYPE: 4392, ICAP_TIMEFILL: 4394, ICAP_BITDEPTH: 4395, ICAP_BITDEPTHREDUCTION: 4396, ICAP_UNDEFINEDIMAGESIZE: 4397, ICAP_EXTIMAGEINFO: 4399, ICAP_MINIMUMHEIGHT: 4400, ICAP_MINIMUMWIDTH: 4401, ICAP_AUTODISCARDBLANKPAGES: 4404, ICAP_FLIPROTATION: 4406, ICAP_BARCODEDETECTIONENABLED: 4407, ICAP_SUPPORTEDBARCODETYPES: 4408, ICAP_BARCODEMAXSEARCHPRIORITIES: 4409, ICAP_BARCODESEARCHPRIORITIES: 4410, ICAP_BARCODESEARCHMODE: 4411, ICAP_BARCODEMAXRETRIES: 4412, ICAP_BARCODETIMEOUT: 4413, ICAP_ZOOMFACTOR: 4414, ICAP_PATCHCODEDETECTIONENABLED: 4415, ICAP_SUPPORTEDPATCHCODETYPES: 4416, ICAP_PATCHCODEMAXSEARCHPRIORITIES: 4417, ICAP_PATCHCODESEARCHPRIORITIES: 4418, ICAP_PATCHCODESEARCHMODE: 4419, ICAP_PATCHCODEMAXRETRIES: 4420, ICAP_PATCHCODETIMEOUT: 4421, ICAP_FLASHUSED2: 4422, ICAP_IMAGEFILTER: 4423, ICAP_NOISEFILTER: 4424, ICAP_OVERSCAN: 4425, ICAP_AUTOMATICBORDERDETECTION: 4432, ICAP_AUTOMATICDESKEW: 4433, ICAP_AUTOMATICROTATE: 4434, ICAP_JPEGQUALITY: 4435, ICAP_FEEDERTYPE: 4436, ICAP_ICCPROFILE: 4437, ICAP_AUTOSIZE: 4438, ICAP_AUTOMATICCROPUSESFRAME: 4439, ICAP_AUTOMATICLENGTHDETECTION: 4440, ICAP_AUTOMATICCOLORENABLED: 4441, ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE: 4442, ICAP_COLORMANAGEMENTENABLED: 4443, ICAP_IMAGEMERGE: 4444, ICAP_IMAGEMERGEHEIGHTTHRESHOLD: 4445, ICAP_SUPPORTEDEXTIMAGEINFO: 4446 }, O.EnumDWT_CapType = { TWON_NONE: 0, TWON_ARRAY: 3, TWON_ENUMERATION: 4, TWON_ONEVALUE: 5, TWON_RANGE: 6 }, O.EnumDWT_TransferMode = { TWSX_NATIVE: 0, TWSX_FILE: 1, TWSX_MEMORY: 2 }, O.EnumDWT_FileFormat = { TWFF_TIFF: 0, TWFF_PICT: 1, TWFF_BMP: 2, TWFF_XBM: 3, TWFF_JFIF: 4, TWFF_FPX: 5, TWFF_TIFFMULTI: 6, TWFF_PNG: 7, TWFF_SPIFF: 8, TWFF_EXIF: 9, TWFF_PDF: 10, TWFF_JP2: 11, TWFF_JPN: 12, TWFF_JPX: 13, TWFF_DEJAVU: 14, TWFF_PDFA: 15, TWFF_PDFA2: 16 }, O.EnumDWT_TIFFCompressionType = { TIFF_AUTO: 0, TIFF_NONE: 1, TIFF_RLE: 2, TIFF_FAX3: 3, TIFF_T4: 3, TIFF_FAX4: 4, TIFF_T6: 4, TIFF_LZW: 5, TIFF_JPEG: 7, TIFF_PACKBITS: 32773 }, O.EnumDWT_InterpolationMethod = { IM_NEARESTNEIGHBOUR: 1, IM_BILINEAR: 2, IM_BICUBIC: 3, IM_BESTQUALITY: 5 }, O.EnumDWT_ImageType = { IT_BMP: 0, IT_JPG: 1, IT_TIF: 2, IT_PNG: 3, IT_PDF: 4, IT_ALL: 5, IT_MULTIPAGE_PDF: 7, IT_MULTIPAGE_TIF: 8, IT_J2K: 14 }, O.EnumDWT_PDFCompressionType = { PDF_AUTO: 0, PDF_FAX3: 1, PDF_FAX4: 2, PDF_LZW: 3, PDF_RLE: 4, PDF_JPEG: 5, PDF_JP2000: 6, PDF_JBIG2: 7 }, O.EnumDWT_ShowMode = { SW_ACTIVE: 0, SW_MAX: 1, SW_MIN: 2, SW_CLOSE: 3, SW_IFLIVE: 4 }, O.EnumDWT_CapValueType = { TWTY_INT8: 0, TWTY_INT16: 1, TWTY_INT32: 2, TWTY_UINT8: 3, TWTY_UINT16: 4, TWTY_int: 5, TWTY_BOOL: 6, TWTY_FIX32: 7, TWTY_FRAME: 8, TWTY_STR32: 9, TWTY_STR64: 10, TWTY_STR128: 11, TWTY_STR255: 12 }, O.EnumDWT_UnitType = { TWUN_INCHES: 0, TWUN_CENTIMETERS: 1, TWUN_PICAS: 2, TWUN_POINTS: 3, TWUN_TWIPS: 4, TWUN_PIXELS: 5, TWUN_MILLIMETERS: 6 }, O.EnumDWT_DUPLEX = { TWDX_NONE: 0, TWDX_1PASSDUPLEX: 1, TWDX_2PASSDUPLEX: 2 }, O.EnumDWT_CapLanguage = { TWLG_DAN: 0, TWLG_DUT: 1, TWLG_ENG: 2, TWLG_FCF: 3, TWLG_FIN: 4, TWLG_FRN: 5, TWLG_GER: 6, TWLG_ICE: 7, TWLG_ITN: 8, TWLG_NOR: 9, TWLG_POR: 10, TWLG_SPA: 11, TWLG_SWE: 12, TWLG_USA: 13, TWLG_USERLOCALE: -1, TWLG_AFRIKAANS: 14, TWLG_ALBANIA: 15, TWLG_ARABIC: 16, TWLG_ARABIC_ALGERIA: 17, TWLG_ARABIC_BAHRAIN: 18, TWLG_ARABIC_EGYPT: 19, TWLG_ARABIC_IRAQ: 20, TWLG_ARABIC_JORDAN: 21, TWLG_ARABIC_KUWAIT: 22, TWLG_ARABIC_LEBANON: 23, TWLG_ARABIC_LIBYA: 24, TWLG_ARABIC_MOROCCO: 25, TWLG_ARABIC_OMAN: 26, TWLG_ARABIC_QATAR: 27, TWLG_ARABIC_SAUDIARABIA: 28, TWLG_ARABIC_SYRIA: 29, TWLG_ARABIC_TUNISIA: 30, TWLG_ARABIC_UAE: 31, TWLG_ARABIC_YEMEN: 32, TWLG_BASQUE: 33, TWLG_BYELORUSSIAN: 34, TWLG_BULGARIAN: 35, TWLG_CATALAN: 36, TWLG_CHINESE: 37, TWLG_CHINESE_HONGKONG: 38, TWLG_CHINESE_PRC: 39, TWLG_CHINESE_SINGAPORE: 40, TWLG_CHINESE_SIMPLIFIED: 41, TWLG_CHINESE_TAIWAN: 42, TWLG_CHINESE_TRADITIONAL: 43, TWLG_CROATIA: 44, TWLG_CZECH: 45, TWLG_DANISH: 0, TWLG_DUTCH: 1, TWLG_DUTCH_BELGIAN: 46, TWLG_ENGLISH: 2, TWLG_ENGLISH_AUSTRALIAN: 47, TWLG_ENGLISH_CANADIAN: 48, TWLG_ENGLISH_IRELAND: 49, TWLG_ENGLISH_NEWZEALAND: 50, TWLG_ENGLISH_SOUTHAFRICA: 51, TWLG_ENGLISH_UK: 52, TWLG_ENGLISH_USA: 13, TWLG_ESTONIAN: 53, TWLG_FAEROESE: 54, TWLG_FARSI: 55, TWLG_FINNISH: 4, TWLG_FRENCH: 5, TWLG_FRENCH_BELGIAN: 56, TWLG_FRENCH_CANADIAN: 3, TWLG_FRENCH_LUXEMBOURG: 57, TWLG_FRENCH_SWISS: 58, TWLG_GERMAN: 6, TWLG_GERMAN_AUSTRIAN: 59, TWLG_GERMAN_LUXEMBOURG: 60, TWLG_GERMAN_LIECHTENSTEIN: 61, TWLG_GERMAN_SWISS: 62, TWLG_GREEK: 63, TWLG_HEBREW: 64, TWLG_HUNGARIAN: 65, TWLG_ICELANDIC: 7, TWLG_INDONESIAN: 66, TWLG_ITALIAN: 8, TWLG_ITALIAN_SWISS: 67, TWLG_JAPANESE: 68, TWLG_KOREAN: 69, TWLG_KOREAN_JOHAB: 70, TWLG_LATVIAN: 71, TWLG_LITHUANIAN: 72, TWLG_NORWEGIAN: 9, TWLG_NORWEGIAN_BOKMAL: 73, TWLG_NORWEGIAN_NYNORSK: 74, TWLG_POLISH: 75, TWLG_PORTUGUESE: 10, TWLG_PORTUGUESE_BRAZIL: 76, TWLG_ROMANIAN: 77, TWLG_RUSSIAN: 78, TWLG_SERBIAN_LATIN: 79, TWLG_SLOVAK: 80, TWLG_SLOVENIAN: 81, TWLG_SPANISH: 11, TWLG_SPANISH_MEXICAN: 82, TWLG_SPANISH_MODERN: 83, TWLG_SWEDISH: 12, TWLG_THAI: 84, TWLG_TURKISH: 85, TWLG_UKRANIAN: 86, TWLG_ASSAMESE: 87, TWLG_BENGALI: 88, TWLG_BIHARI: 89, TWLG_BODO: 90, TWLG_DOGRI: 91, TWLG_GUJARATI: 92, TWLG_HARYANVI: 93, TWLG_HINDI: 94, TWLG_KANNADA: 95, TWLG_KASHMIRI: 96, TWLG_MALAYALAM: 97, TWLG_MARATHI: 98, TWLG_MARWARI: 99, TWLG_MEGHALAYAN: 100, TWLG_MIZO: 101, TWLG_NAGA: 102, TWLG_ORISSI: 103, TWLG_PUNJABI: 104, TWLG_PUSHTU: 105, TWLG_SERBIAN_CYRILLIC: 106, TWLG_SIKKIMI: 107, TWLG_SWEDISH_FINLAND: 108, TWLG_TAMIL: 109, TWLG_TELUGU: 110, TWLG_TRIPURI: 111, TWLG_URDU: 112, TWLG_VIETNAMESE: 113 }, O.EnumDWT_CapSupportedSizes = { TWSS_NONE: 0, TWSS_A4LETTER: 1, TWSS_B5LETTER: 2, TWSS_USLETTER: 3, TWSS_USLEGAL: 4, TWSS_A5: 5, TWSS_B4: 6, TWSS_B6: 7, TWSS_USLEDGER: 9, TWSS_USEXECUTIVE: 10, TWSS_A3: 11, TWSS_B3: 12, TWSS_A6: 13, TWSS_C4: 14, TWSS_C5: 15, TWSS_C6: 16, TWSS_4A0: 17, TWSS_2A0: 18, TWSS_A0: 19, TWSS_A1: 20, TWSS_A2: 21, TWSS_A4: 1, TWSS_A7: 22, TWSS_A8: 23, TWSS_A9: 24, TWSS_A10: 25, TWSS_ISOB0: 26, TWSS_ISOB1: 27, TWSS_ISOB2: 28, TWSS_ISOB3: 12, TWSS_ISOB4: 6, TWSS_ISOB5: 29, TWSS_ISOB6: 7, TWSS_ISOB7: 30, TWSS_ISOB8: 31, TWSS_ISOB9: 32, TWSS_ISOB10: 33, TWSS_JISB0: 34, TWSS_JISB1: 35, TWSS_JISB2: 36, TWSS_JISB3: 37, TWSS_JISB4: 38, TWSS_JISB5: 2, TWSS_JISB6: 39, TWSS_JISB7: 40, TWSS_JISB8: 41, TWSS_JISB9: 42, TWSS_JISB10: 43, TWSS_C0: 44, TWSS_C1: 45, TWSS_C2: 46, TWSS_C3: 47, TWSS_C7: 48, TWSS_C8: 49, TWSS_C9: 50, TWSS_C10: 51, TWSS_USSTATEMENT: 52, TWSS_BUSINESSCARD: 53, TWSS_MAXSIZE: 54 }, O.EnumDWT_CapFeederAlignment = { TWFA_NONE: 0, TWFA_LEFT: 1, TWFA_CENTER: 2, TWFA_RIGHT: 3 }, O.EnumDWT_CapFeederOrder = { TWFO_FIRSTPAGEFIRST: 0, TWFO_LASTPAGEFIRST: 1 }, O.EnumDWT_CapPrinter = { TWPR_IMPRINTERTOPBEFORE: 0, TWPR_IMPRINTERTOPAFTER: 1, TWPR_IMPRINTERBOTTOMBEFORE: 2, TWPR_IMPRINTERBOTTOMAFTER: 3, TWPR_ENDORSERTOPBEFORE: 4, TWPR_ENDORSERTOPAFTER: 5, TWPR_ENDORSERBOTTOMBEFORE: 6, TWPR_ENDORSERBOTTOMAFTER: 7 }, O.EnumDWT_CapPrinterMode = { TWPM_SINGLESTRING: 0, TWPM_MULTISTRING: 1, TWPM_COMPOUNDSTRING: 2 }, O.EnumDWT_CapBitdepthReduction = { TWBR_THRESHOLD: 0, TWBR_HALFTONE: 1, TWBR_CUSTHALFTONE: 2, TWBR_DIFFUSION: 3 }, O.EnumDWT_CapBitOrder = { TWBO_LSBFIRST: 0, TWBO_MSBFIRST: 1 }, O.EnumDWT_CapFilterType = { TWFT_RED: 0, TWFT_GREEN: 1, TWFT_BLUE: 2, TWFT_NONE: 3, TWFT_WHITE: 4, TWFT_CYAN: 5, TWFT_MAGENTA: 6, TWFT_YELLOW: 7, TWFT_BLACK: 8 }, O.EnumDWT_CapFlash = { TWFL_NONE: 0, TWFL_OFF: 1, TWFL_ON: 2, TWFL_AUTO: 3, TWFL_REDEYE: 4 }, O.EnumDWT_CapFlipRotation = { TWFR_BOOK: 0, TWFR_FANFOLD: 1 }, O.EnumDWT_CapImageFilter = { TWIF_NONE: 0, TWIF_AUTO: 1, TWIF_LOWPASS: 2, TWIF_BANDPASS: 3, TWIF_HIGHPASS: 4, TWIF_TEXT: 3, TWIF_FINELINE: 4 }, O.EnumDWT_CapLightPath = { TWLP_REFLECTIVE: 0, TWLP_TRANSMISSIVE: 1 }, O.EnumDWT_CapLightSource = { TWLS_RED: 0, TWLS_GREEN: 1, TWLS_BLUE: 2, TWLS_NONE: 3, TWLS_WHITE: 4, TWLS_UV: 5, TWLS_IR: 6 }, O.EnumDWT_MagType = { TWMD_MICR: 0, TWMD_RAW: 1, TWMD_INVALID: 2 }, O.EnumDWT_CapNoiseFilter = { TWNF_NONE: 0, TWNF_AUTO: 1, TWNF_LONEPIXEL: 2, TWNF_MAJORITYRULE: 3 }, O.EnumDWT_CapORientation = { TWOR_ROT0: 0, TWOR_ROT90: 1, TWOR_ROT180: 2, TWOR_ROT270: 3, TWOR_PORTRAIT: 0, TWOR_LANDSCAPE: 3, TWOR_AUTO: 4, TWOR_AUTOTEXT: 5, TWOR_AUTOPICTURE: 6 }, O.EnumDWT_CapOverscan = { TWOV_NONE: 0, TWOV_AUTO: 1, TWOV_TOPBOTTOM: 2, TWOV_LEFTRIGHT: 3, TWOV_ALL: 4 }, O.EnumDWT_CapPixelFlavor = { TWPF_CHOCOLATE: 0, TWPF_VANILLA: 1 }, O.EnumDWT_CapPlanarChunky = { TWPC_CHUNKY: 0, TWPC_PLANAR: 1 }, O.EnumDWT_DataSourceStatus = { TWDSS_CLOSED: 0, TWDSS_OPENED: 1, TWDSS_ENABLED: 2, TWDSS_ACQUIRING: 3 };
  var J = 0, E = 1, me = 2;
  O.EnumDWT_FitWindowType = { enumFitWindow: J, enumFitWindowHeight: E, enumFitWindowWidth: me };
  var Ee = -1, Le = 0, Oe = 1, Te = 2, Re = 3, Ve = 4, We = 5, le = 6, je = 7;
  O.EnumDWT_PlatformType = { enumUnknown: Ee, enumWindow: Le, enumMac: Oe, enumLinux: Te, enumEmbed: Re, enumChromeOS: Ve, enumHarmonyOS: We, enumAndroid: le, enumiOS: je }, O.EnumDWT_UploadDataFormat = { Binary: 0, Base64: 1 };
  var fe = 0, Me = 1, Z = 2, Ue = 3, ct = 4, mt = 5, at = 6, Ye = 7, Et = 8;
  O.EnumDWT_MouseShape = { Default: fe, Hand: Me, Crosshair: Z, Zoom: Ue, NWResize: ct, EResize: mt, NResize: at, Resize: Ye, Move: Et }, O.EnumDWT_Language = { English: 0, French: 1, Arabic: 2, Spanish: 3, Portuguese: 4, German: 5, Italian: 6, Russian: 7, Chinese: 8 };
  var Je = 1, ce = 2, Ht = 3, Dt = 4, Be = 5;
  O.EnumDWT_InitMsg = { Info: Je, Error: ce, NotInstalledError: Ht, DownloadError: Dt, DownloadNotRestartError: Be };
  var Ge = 0, lt = 3, ot = 3, Kt = 4, Lt = 4, bn = 5;
  O.EnumDWT_Driver = { TWAIN: Ge, ICA: lt, SANE: ot, TWAIN_AND_ICA: Kt, TWAIN_AND_TWAIN64: Lt, TWAIN64: bn }, O.EnumDWT_CompressionType = { TWCP_NONE: 0, TWCP_PACKBITS: 1, TWCP_GROUP31D: 2, TWCP_GROUP31DEOL: 3, TWCP_GROUP32D: 4, TWCP_GROUP4: 5, TWCP_JPEG: 6, TWCP_LZW: 7, TWCP_JBIG: 8, TWCP_PNG: 9, TWCP_RLE4: 10, TWCP_RLE8: 11, TWCP_BITFIELDS: 12, TWCP_ZIP: 13, TWCP_JPEG2000: 14 };
  var Fn = 0, wn = 1;
  O.EnumDWT_SelectionMode = { Single: Fn, Multiple: wn }, O.EnumDWT_ConfirmExitType = { Cancel: 0, Exit: 1, SaveAndExit: 2 };
  var ge = 0, Wt = 1, xt = 2, He = 3;
  O.EnumDWT_WebsocketReadyState = { CONNECTING: ge, OPEN: Wt, CLOSING: xt, CLOSED: He };
  var Ne = 16, bt = 32, Ut = 64, Zt = 128, rt = 256, Xt = 512, dn = 1024, an = Ne | bt | Ut | Zt | rt, Rn = Ne | bt, xr = Xt | dn;
  O.EnumDWT_DeviceType = { TWAINSCANNER: Ne, WIATWAINSCANNER: bt, TWAINX64SCANNER: Ut, ICASCANNER: Zt, SANESCANNER: rt, ESCLSCANNER: Xt, WIFIDIRECTSCANNER: dn };
  var hr = 0, Vr = 1, Zn = 2;
  O.EnumDWT_ServiceType = { Wasm: hr, TwainService: Vr };
  var It = 1, Mt = 2, Yt = 4, $t = 8, Pn = 16, nr = 32;
  O.EnumDWT_SourceMatchField = { SMF_NAME: It, SMF_TWAINVERSION: Mt, SMF_TWAINPROTOCOL: Yt, SMF_ICAUUID: $t, SMF_ICAMODULEVERSION: Pn, SMF_ICALOCATIONTYPE: nr };
  var _r = 0, vr = 2, Fr = 3, Or = 4, Jr = 0, $n = 1, no = 2;
  O.EnumDWT_ExtImageInfo = { default: Jr, standard: $n, supported: no };
  var Li = 0, ei = 1, Qi = 2, Zi = 3, _i = 4, Gi = 5;
  function Gn(o, e) {
    if (!(o instanceof e))
      throw new TypeError("Cannot call a class as a function");
  }
  function gi(o) {
    return gi = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
      return typeof e;
    } : function(e) {
      return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
    }, gi(o);
  }
  function ra(o) {
    var e = function(r, t) {
      if (gi(r) !== "object" || r === null)
        return r;
      var i = r[Symbol.toPrimitive];
      if (i !== void 0) {
        var a = i.call(r, t || "default");
        if (gi(a) !== "object")
          return a;
        throw new TypeError("@@toPrimitive must return a primitive value.");
      }
      return (t === "string" ? String : Number)(r);
    }(o, "string");
    return gi(e) === "symbol" ? e : String(e);
  }
  function Ro(o, e) {
    for (var r = 0; r < e.length; r++) {
      var t = e[r];
      t.enumerable = t.enumerable || !1, t.configurable = !0, "value" in t && (t.writable = !0), Object.defineProperty(o, ra(t.key), t);
    }
  }
  function zn(o, e, r) {
    return e && Ro(o.prototype, e), r && Ro(o, r), Object.defineProperty(o, "prototype", { writable: !1 }), o;
  }
  function Ur(o) {
    return l.Lib.isString(o) ? o : ("errorMessage" in o && (e = o.errorMessage), "message" in o && (e = o.message), l.Lib.isString(e) || (e = "message" in e ? e.message : ""), "errorCode" in o && e.indexOf("(") == -1 && (e += "(" + o.errorCode + ")"), "code" in o && e.indexOf("(") == -1 && (e += "(" + o.code + ")"), e);
    var e;
  }
  function pt(o, e, r) {
    o._errorCode = e, o._errorString = r;
  }
  l.DWT.EnumDWT_Error = { UserCancelled: -1032, ModuleNotExists: -2371, FailedToCreateDWTObject: -2607 };
  var ia = function() {
    function o() {
      Gn(this, o);
    }
    return zn(o, [{ key: "OutOfRange", value: function(e) {
      pt(e, -1010, "Data parameter out of supported range.");
    } }, { key: "InvalidIndex", value: function(e) {
      pt(e, -1033, "Invalid index.");
    } }, { key: "InvalidValue", value: function(e) {
      pt(e, -1034, "Invalid value.");
    } }, { key: "NoImage", value: function(e) {
      pt(e, -1035, "There is no image.");
    } }, { key: "UnrecognizedExt", value: function(e) {
      pt(e, -1110, "Unrecognized file extension.");
    } }, { key: "LoadTextPDFButSetImageOnly", value: function(e) {
      pt(e, -1119, "The text-based PDF file was not imported correctly because ConvertMode was set to CM_IMAGEONLY, which means PDF Rasterizer is turned off. Please set ConvertMode to Dynamsoft.DWT.EnumDWT_ConvertMode.CM_AUTO to enable it.");
    } }, { key: "SourceHasNothingToCapture", value: function(e) {
      pt(e, -1029, "Source has nothing to capture.");
    } }, { key: "bImageOnlyError_NotPurelyPDF", value: function(e) {
      return e == -1416;
    } }, { key: "SystemBusy", value: function(e) {
      pt(e, -2007, "The system is busy, some operations are not completed. Please try later.");
    } }, { key: "MustUpgradeService", value: function(e) {
      pt(e, -2207, "The Dynamsoft Service installed on your computer is outdated and no longer works with the JavaScript code on the website.");
    } }, { key: "Server_Restarted", value: function(e) {
      pt(e, -2208, "The connection with the local Dynamsoft Service encountered a problem and has been reset.");
    } }, { key: "HTML5NotSupport", value: function(e) {
      pt(e, -2209, "The HTML5 edition does not support this method or property.");
    } }, { key: "CannotCallUIMethodWhenNotBindDefaultViewer", value: function(e) {
      pt(e, -2210, "You cannot call this method on this WebTwain instance because it does not use the default viewer.");
    } }, { key: "HttpServerCannotEmpty", value: function(e) {
      pt(e, -2300, "Http upload error: the HTTP Server name/ip cannot be empty.");
    } }, { key: "NetworkError", value: function(e) {
      pt(e, -2301, "Network error.");
    } }, { key: "InvalidResultFormat", value: function(e) {
      pt(e, -2302, "The result format is invalid.");
    } }, { key: "UploadError", value: function(e, r, t, i) {
      if (r)
        pt(e, -2303, "Upload cancelled.");
      else if (e._errorCode = -2003, i && i > 0 || t) {
        var a = ["HTTP process error: "];
        t && a.push(t), i && i > 0 && a.push(" (" + i + ")"), e._errorString = a.join("") + ".";
      } else
        e._errorString = "HTTP process error.";
    } }, { key: "HttpDownloadUrlError", value: function(e) {
      pt(e, -2304, "Http download error: the url is invalid.");
    } }, { key: "HttpDownloadError", value: function(e, r, t, i) {
      if (r)
        pt(e, -2305, "User cancelled the operation.");
      else if (e._errorCode = -2003, i && i > 0 || t) {
        var a = ["HTTP process error: "];
        t && a.push(t), i && i > 0 && a.push(" (" + i + ")"), e._errorString = a.join("") + ".";
      } else
        e._errorString = "HTTP process error.";
    } }, { key: "UploadFileCannotEmpty", value: function(e) {
      pt(e, -2306, "Upload Error: the upload file cannot be empty.");
    } }, { key: "InvalidWidthOrHeight", value: function(e) {
      pt(e, -2307, "The width or height you entered is invalid.");
    } }, { key: "Server_Invalid", value: function(e) {
      e._errorCode == 0 && pt(e, -2308, "The local Dynamsoft Service has been stopped.");
    } }, { key: "InvalidLocalFilename", value: function(e, r) {
      pt(e, -2309, "The LocalFile is empty in the name " + r + " Function.");
    } }, { key: "BarCode_InvalidIndex", value: function(e, r) {
      pt(e, -2310, "The index is out of range.");
    } }, { key: "BarCode_InvalidRemoteFilename", value: function(e) {
      pt(e, -2311, "The RemoteFile field is empty in the Barcode Download Function.");
    } }, { key: "ImageFileLengthCannotZero", value: function(e) {
      pt(e, -2312, "The file length is empty.");
    } }, { key: "UploadExceededMaxSize", value: function(e) {
      pt(e, -2313, "The size of the images you are about to upload has exceeded the limit.");
    } }, { key: "ParameterCannotEmpty", value: function(e) {
      pt(e, -2314, "The parameter cannot be empty.");
    } }, { key: "Webcam_InvalidIndex", value: function(e, r) {
      pt(e, -2315, "The index is out of range.");
    } }, { key: "Webcam_InvalidRemoteFilename", value: function(e) {
      pt(e, -2316, "The RemoteFile field is empty in the Webcam Download Function.");
    } }, { key: "Pdf_InvalidRemoteFilename", value: function(e) {
      pt(e, -2317, "The RemoteFile field is empty in the Pdf Download Function.");
    } }, { key: "InvalidDestination", value: function(e) {
      pt(e, -2318, "Invalid destination file.");
    } }, { key: "InvalidSourceFile", value: function(e) {
      pt(e, -2319, "Invalid source file.");
    } }, { key: "InvalidFile", value: function(e) {
      pt(e, -2320, "Invalid file.");
    } }, { key: "hasLicenseError", value: function(e) {
      return e._errorCode >= -2348 && e._errorCode <= -2325;
    } }, { key: "OCR_InvalidIndex", value: function(e, r) {
      pt(e, -2321, "The index is out of range.");
    } }, { key: "OCR_InvalidLeftOrTopOrRightOrBottom", value: function(e) {
      pt(e, -2322, "The left or top or right or bottom you entered is invalid.");
    } }, { key: "OCR_InvalidOutputFormat", value: function(e) {
      pt(e, -2323, "The OCR output format is not supported.");
    } }, { key: "OCR_InvalidPageSetMode", value: function(e) {
      pt(e, -2324, "The OCR page set mode is not supported.");
    } }, { key: "LicenseEmptyOrInvalid", value: function(e) {
      pt(e, -2325, l.Lib.License.isLTS() ? "The license is invalid." : "The current product key is empty or invalid."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseExpired", value: function(e, r) {
      e._errorCode = -2326;
      var t = "";
      if (r && r != "" && r.indexOf("on") == -1 && (t = " on " + r), l.Lib.License.isLTS()) {
        var i, a, u, c, d;
        e._isTwainServiceType() ? (i = l.DWT.EnumInstance.dwt_desktop, e._bRemoteMode ? a = (u = (c = e._dmService) === null || c === void 0 || (d = c.attrs) === null || d === void 0 ? void 0 : d.UUID) !== null && u !== void 0 ? u : "" : a = "") : (i = l.DWT.EnumInstance.dwt_browser, a = ""), e._errorString = "The license has expired" + t + ".", l.DWT.lcexp(i, a).then(function() {
          e._errorString = l.DWT.licenseException.message;
        });
      } else
        e._errorString = "The current product key has expired" + t + ". Please contact the site administrator.", l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoChrome", value: function(e) {
      pt(e, -2327, "The current product key does not support Chrome. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoFirefox", value: function(e) {
      pt(e, -2328, "The current product key does not support Firefox. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoIE", value: function(e) {
      pt(e, -2329, "The current product key does not support IE. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoEdge", value: function(e) {
      pt(e, -2330, "The current product key does not support Edge. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoSafari", value: function(e) {
      pt(e, -2392, "The current product key does not support Safari. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoCore", value: function(e, r, t) {
      e._errorCode = -2333, l.Lib.License.isLTS() ? e._errorString = r ? t == 111 ? "The license for v" + k + " WebAssembly Core Module has expired." : "The license for v" + k + " WebAssembly Core Module is not found." : t == 111 ? "The license for v" + k + " Service Core Module has expired." : "The license for v" + k + " Service Core Module is not found." : e._errorString = r ? "The current product key is missing the WebAssembly Core license. Please contact the site administrator." : "The current product key is missing the Service Core license. Please contact the site administrator.", l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoWebcam", value: function(e) {
      e._errorCode = -2338, l.Lib.License.isLTS() ? e._errorString = "The license for the module direct show is not found or has expired." : e._errorString = "The current product key does not support Webcam. Please contact the site administrator.", l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoPDF", value: function(e) {
      e._errorCode = -2339, l.Lib.License.isLTS() ? e._errorString = "The license for the module pdf rasterizer is not found or has expired." : e._errorString = "The current product key does not support pdf rasterizer. Please contact the site administrator.", l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoOCR", value: function(e) {
      e._errorCode = -2340, l.Lib.License.isLTS() ? e._errorString = "The license for the module ocr is not found or has expired." : e._errorString = "The current product key does not support OCR. Please contact the site administrator.", l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNoOCRPro", value: function(e) {
      e._errorCode = -2341, l.Lib.License.isLTS() ? e._errorString = "The license for the module ocr pro is not found or has expired." : e._errorString = "The current product key does not support OCR pro. Please contact the site administrator.", l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseBadDomain", value: function(e) {
      pt(e, -2342, "The domain of your current site does not match the domain bound in the current product key. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNotSupportBorwser", value: function(e) {
      pt(e, -2343, "The current product key does not support your browser. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNotSupportWindows", value: function(e) {
      pt(e, -2344, "The current product key does not support Windows OS. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNotSupportMAC", value: function(e) {
      pt(e, -2345, "The current product key does not support MAC OS. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNotSupportLinux", value: function(e) {
      pt(e, -2346, "The current product key does not support Linux OS. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNotSupportOS", value: function(e) {
      pt(e, -2347, "The current product key does not support your OS. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseLower", value: function(e) {
      pt(e, -2348, "The current product key is invalid because it's generated with the licenses of a different major version."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "BarcodeLicenseEmpty", value: function(e) {
      pt(e, -2349, "The current product key does not include a license for reading barcode. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "IndicesCannotEmpty", value: function(e) {
      pt(e, -2350, "The indices cannot be empty.");
    } }, { key: "UploadIndexMoreThanOne", value: function(e) {
      pt(e, -2351, "You cannot upload more than one image when the format is BMP, JPG or PNG");
    } }, { key: "IndicesOutOfRange", value: function(e) {
      pt(e, -2352, "The indices are out of range.");
    } }, { key: "HttpHeaderNotAllowed", value: function(e) {
      pt(e, -2353, "The header name being used is a protected keyword and is not allowed.");
    } }, { key: "HttpHeaderIsEmpty", value: function(e) {
      pt(e, -2354, "The header name cannot be empty.");
    } }, { key: "HttpHeaderIsNull", value: function(e) {
      pt(e, -2355, "The header name cannot be null.");
    } }, { key: "HttpHeaderIsUndefined", value: function(e) {
      pt(e, -2356, "The header name cannot be undefined.");
    } }, { key: "HttpHeaderIsInvalid", value: function(e) {
      pt(e, -2357, "The header name you entered is invalid.");
    } }, { key: "IndicesNotArray", value: function(e) {
      pt(e, -2358, "The type of the parameter indices must be an Array.");
    } }, { key: "IndexOutOfRange", value: function(e) {
      pt(e, -2359, "The index is out of range.");
    } }, { key: "IndexNullOrUndefined", value: function(e) {
      pt(e, -2360, "The index is null or undefined.");
    } }, { key: "ConvertBase64IndexMoreThanOne", value: function(e) {
      pt(e, -2361, "You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG.");
    } }, { key: "InvalidImageType", value: function(e) {
      pt(e, -2362, "The image type is not supported.");
    } }, { key: "InvalidDataFormat", value: function(e) {
      pt(e, -2363, "The data format is not supported.");
    } }, { key: "InvalidUploadInSegments", value: function(e) {
      pt(e, -2364, "Please use a Boolean value for the parameter bUploadInSegments.");
    } }, { key: "InvalidUrl", value: function(e) {
      pt(e, -2365, "The url is invalid.");
    } }, { key: "ConvertBase64Failed", value: function(e) {
      pt(e, -2366, "Converting images to a base64 string failed.");
    } }, { key: "InvalidSegmentUploadThreshold", value: function(e) {
      pt(e, -2367, "Invalid value for the parameter segmentUploadThreshold.");
    } }, { key: "InvalidModuleSize", value: function(e) {
      pt(e, -2368, "Invalid value for the parameter moduleSize.");
    } }, { key: "LicenseNotSupportWasm", value: function(e) {
      pt(e, -2369, "The current product key is missing the WASM license. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNotSupportPdfRWasm", value: function(e) {
      e._errorCode = -2370, l.Lib.License.isLTS() ? e._errorString = "The license for the module pdf rasterizer is not found or has expired." : e._errorString = "The current product key does not support Pdf Rasterizer Wasm. Please contact the site administrator.", l.Lib.Errors.SetLTSException(e);
    } }, { key: "WebTwainModuleNotExist", value: function(e) {
      pt(e, l.DWT.EnumDWT_Error.ModuleNotExists, "Dynamic Web TWAIN scanner module is not installed and it is also missing on the server. Please contact the site administrator.");
    } }, { key: "ConvertBinaryIndexMoreThanOne", value: function(e) {
      pt(e, -2372, "You cannot convert more than one image to binary when the format is BMP, JPG or PNG.");
    } }, { key: "Overlay_InvalidLeftOrTopOrRightOrBottom", value: function(e) {
      pt(e, -2375, "The left or top or right or bottom you entered is invalid.");
    } }, { key: "GenerateURL_InvalidRetFromServer", value: function(e) {
      pt(e, -2376, "The generate url failed.");
    } }, { key: "ImageCaptureDriverTypeError", value: function(e) {
      pt(e, -2377, "Failed to set Image Capture Driver Type.");
    } }, { key: "InvalidTiffTagError", value: function(e) {
      pt(e, -2378, "Invalid value for the tiff tag code.");
    } }, { key: "OCR_InvalidRemoteFilename", value: function(e) {
      pt(e, -2379, "The RemoteFile field is empty in the OCR Download Function.");
    } }, { key: "Uploader_ModuleError", value: function(e) {
      pt(e, -2380, "Please make sure the Uploader Module has been installed.");
    } }, { key: "ScanUploader_InvalidScanSetup", value: function(e) {
      pt(e, -2381, "scanSetup is invalid.");
    } }, { key: "ScanUploader_InvalidTransferMode", value: function(e) {
      pt(e, -2382, "Scanner setup error: Invalid Transfer Mode.");
    } }, { key: "ScanUploader_InvalidFileXfer", value: function(e) {
      pt(e, -2383, "Scanner setup error: fileXfer is invalid.");
    } }, { key: "ScanUploader_InvalidFileXferFilename", value: function(e) {
      pt(e, -2384, "Scanner setup error: Invalid fileName in fileXfer.");
    } }, { key: "ScanUploader_InvalidFileXferFileFormat", value: function(e) {
      pt(e, -2385, "Scanner setup error: Invalid fileFormat in fileXfer.");
    } }, { key: "ScanUploader_InvalidHttpParams", value: function(e) {
      pt(e, -2386, "Output setup error: Invalid httpParams in outputSetup.");
    } }, { key: "ScanUploader_InvalidHttpType", value: function(e) {
      pt(e, -2387, "Output setup error: Invalid type in outputSetup.");
    } }, { key: "ScanUploader_InvalidHttpUrl", value: function(e) {
      pt(e, -2388, "Output setup error: Invalid url in outputSetup.httpParams.");
    } }, { key: "ScanUploader_InvalidHttpFilename", value: function(e) {
      pt(e, -2389, "Output setup error: Invalid fileName in outputSetup.httpParams.");
    } }, { key: "ScanUploader_InvalidOutputFormat", value: function(e) {
      pt(e, -2390, "Output setup error: Invalid format in outputSetup.");
    } }, { key: "InvalidImageID", value: function(e) {
      pt(e, -1034, "Invalid image ID.");
    } }, { key: "InvalidEventName", value: function(e) {
      pt(e, -2391, "Invalid event name.");
    } }, { key: "ConvertBlobIsEmpty", value: function(e) {
      pt(e, -2393, "Failed to convert the data to blob.");
    } }, { key: "InvalidTagName", value: function(e) {
      pt(e, -2394, "Invalid tag name.");
    } }, { key: "WebTwainModuleDownloadFailure", value: function(e) {
      pt(e, -2395, "The module for Dynamic Web TWAIN has failed to download.");
    } }, { key: "LicenseIsFuture", value: function(e, r) {
      pt(e, -2396, "The current product key is invalid. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "ServiceNotSupport", value: function(e, r) {
      pt(e, -2397, r + " doesn't work under current settings.");
    } }, { key: "ScannerNotSupport", value: function(e, r) {
      pt(e, -2398, r + " is not supported for the current scanner.");
    } }, { key: "MobileNotSupport", value: function(e, r) {
      pt(e, -2400, r + " doesn't work under current settings.");
    } }, { key: "LoadImageFailed", value: function(e, r) {
      pt(e, -2401, "Failed to load image: " + Ur(r));
    } }, { key: "RotateFailed", value: function(e, r) {
      pt(e, -2402, "Failed to rotate image: " + Ur(r));
    } }, { key: "FlipFailed", value: function(e, r) {
      pt(e, -2403, "Failed to flip image: " + Ur(r));
    } }, { key: "MirrorFailed", value: function(e, r) {
      pt(e, -2404, "Failed to mirror image: " + Ur(r));
    } }, { key: "EraseFailed", value: function(e, r) {
      pt(e, -2405, "Failed to erase image: " + Ur(r));
    } }, { key: "InvertFailed", value: function(e, r) {
      pt(e, -2406, "Failed to invert image: " + Ur(r));
    } }, { key: "SaveImageFailed", value: function(e, r) {
      pt(e, -2407, "Failed to save image: " + Ur(r));
    } }, { key: "ChangeImageSizeFailed", value: function(e, r) {
      pt(e, -2408, "Failed to change image size: " + Ur(r));
    } }, { key: "CropFailed", value: function(e, r) {
      pt(e, -2409, "Failed to crop image: " + Ur(r));
    } }, { key: "SkewAngleFailed", value: function(e, r) {
      pt(e, -2410, "Failed to skew angle: " + Ur(r));
    } }, { key: "ConvertToGrayScaleFailed", value: function(e, r) {
      pt(e, -2411, "Failed to convert to gray scale: " + Ur(r));
    } }, { key: "ConvertToBWScaleFailed", value: function(e, r) {
      pt(e, -2412, "Failed to convert to black and white scale: " + Ur(r));
    } }, { key: "SetDPIFailed", value: function(e, r) {
      pt(e, -2413, "Failed to set dpi: " + Ur(r));
    } }, { key: "SetImageWidthFailed", value: function(e, r) {
      pt(e, -2414, "Failed to set image width: " + Ur(r));
    } }, { key: "GetLicenseInfoFailed", value: function(e, r) {
      pt(e, -2415, "Failed to get license info: " + Ur(r));
    } }, { key: "InvalidParameter", value: function(e) {
      pt(e, -2416, "Invalid parameter type.");
    } }, { key: "MobileServer_InvalidLeftOrTopOrRightOrBottom", value: function(e) {
      pt(e, -2417, "The left or top or right or bottom you entered is invalid.");
    } }, { key: "MobileServer_InvalidWidth", value: function(e) {
      pt(e, -2418, "The width you entered is invalid.");
    } }, { key: "MobileServer_InvalidHeight", value: function(e) {
      pt(e, -2419, "The height you entered is invalid.");
    } }, { key: "MobileServer_InvalidXResolution", value: function(e) {
      pt(e, -2420, "The x resolution you entered is invalid.");
    } }, { key: "MobileServer_InvalidYResolution", value: function(e) {
      pt(e, -2421, "The y resolution you entered is invalid.");
    } }, { key: "MobileServer_InvalidImage", value: function(e) {
      pt(e, -2422, "The image source is invalid.");
    } }, { key: "MobileServer_InvalidIndex", value: function(e) {
      pt(e, -2423, "The index is invalid.");
    } }, { key: "GetMD5Failed", value: function(e, r) {
      pt(e, -2424, "Failed to get MD5: " + Ur(r));
    } }, { key: "ConvertFromBase64Failed", value: function(e) {
      pt(e, -2425, "Converting image from a base64 string failed.");
    } }, { key: "LicenseTrialFullMixed", value: function(e) {
      pt(e, -2426, "You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.DWT.ProductKey.");
    } }, { key: "BarcodeReaderError", value: function(e, r) {
      pt(e, -2427, r);
    } }, { key: "TiffTagCountExceedError", value: function(e) {
      pt(e, -2428, "Tiff tag count has exceeded the limit.");
    } }, { key: "SelectSourceMustAsync", value: function(e) {
      pt(e, -2429, "The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64.");
    } }, { key: "HttpLicenseInvalid", value: function(e) {
      pt(e, -2430, "The current product key is invalid."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LicenseNotSupportWebcamWasm", value: function(e) {
      e._errorCode = -2431, l.Lib.License.isLTS() ? e._errorString = "The license for the Camera Addon is not found or has expired." : pt(e, -2431, "The current product key does not support Camera Addon. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "InvalidParameterInCallback", value: function(e) {
      pt(e, -2432, "Invalid parameter.");
    } }, { key: "ActiveXNotSupport", value: function(e) {
      pt(e, -2433, "The ActiveX edition does not support this method or property.");
    } }, { key: "DetectCallbackErr", value: function(e) {
      e._errorCode = -2434;
    } }, { key: "PerspectiveCallback", value: function(e) {
      e._errorCode = -2435;
    } }, { key: "HTTPSRequired", value: function(e, r, t) {
      pt(e, -2436, "Mixed Content: The page at '" + r + "' was loaded over HTTPS, but requested an insecure resource '" + t + "/ddm/18625/ddm/SearchScanner'. This request has been blocked; the content must be served over HTTPS.");
    } }, { key: "webtwain_id_not_string", value: function() {
      return 'Error: The "WebTwainId" is not a string.';
    } }, { key: "container_id_not_string", value: function() {
      return 'Error: The argument you passed to the parameter "conatinerId" is not a string.';
    } }, { key: "container_id_not_exist", value: function(e) {
      return 'Error: The element specified by the id "' + e + `" doesn't exist.`;
    } }, { key: "StartScanFailed", value: function(e) {
      pt(e, -2436, "Operation in progress, please try again when the current operation has finished.");
    } }, { key: "ImageEditorOpenCannotPlayVideo", value: function(e) {
      pt(e, -2437, "The video can not be played while the Image Editor is open.");
    } }, { key: "SelectSourceMustAsyncWhenRemote", value: function(e) {
      pt(e, -2438, "SelectSource cannot be used synchronously when Object is created by CreateRemoteScanObjectAsync. Please use SelectSourceAsync instead.");
    } }, { key: "CannotBindViewerWhenNoViewerJS", value: function(e) {
      pt(e, -2439, "You cannot call the method bindViewer() when Dynamsoft.DWT.UseDefaultViewer is set to false.");
    } }, { key: "LTSErrors", value: function(e) {
      pt(e, -2440, "");
    } }, { key: "LongKeyShortKeyMixed", value: function(e) {
      pt(e, -2444, "A license can only be specified once and has already been set using the ProductKey API. ");
    } }, { key: "ImageEditorExist", value: function(e) {
      pt(e, -2500, "An ImageEditor already exists.");
    } }, { key: "ThumbnailViewerExist", value: function(e) {
      pt(e, -2501, "A ThumbnailViewer already exists.");
    } }, { key: "CustomElementExist", value: function(e) {
      pt(e, -2502, "A CustomElement already exists.");
    } }, { key: "ImageEditorNotExist", value: function(e) {
      pt(e, -2503, "This ImageEditor doesn't exist.");
    } }, { key: "ImageEditorDispose", value: function(e) {
      pt(e, -2504, "The ImageEditor object has been disposed.");
    } }, { key: "ThumbnailViewerNotExist", value: function(e) {
      pt(e, -2505, "This ThumbnailViewer doesn't exist.");
    } }, { key: "ThumbnailViewerDispose", value: function(e) {
      pt(e, -2506, "The ThumbnailViewer object has been disposed.");
    } }, { key: "CustomElementNotExist", value: function(e) {
      pt(e, -2507, "This CustomElement doesn't exist.");
    } }, { key: "CustomElementDispose", value: function(e) {
      pt(e, -2508, "The CustomElement object has been disposed.");
    } }, { key: "EventNotExist", value: function(e) {
      pt(e, -2509, "The specified event doesn't exist.");
    } }, { key: "CallbackNotAFunction", value: function(e) {
      pt(e, -2510, "The callback is not a function.");
    } }, { key: "ElementRequired", value: function(e) {
      pt(e, -2511, "Parameter 'element' is required.");
    } }, { key: "ElementNotExist", value: function(e) {
      pt(e, -2512, "Parameter 'element' doesn't exist.");
    } }, { key: "Destroyed", value: function(e) {
      pt(e, -2513, "The WebTwain instance has been destroyed and can not be used anymore.");
    } }, { key: "InvalidPropertyValue", value: function(e) {
      pt(e, -2514, "Invalid property value.");
    } }, { key: "HostNotAvailable", value: function(e, r) {
      pt(e, -2515, "The Dynamsoft Service is not configured correctly on " + r + ". Please check.");
    } }, { key: "CameraRequired", value: function(e) {
      pt(e, -2516, "The camera addon is required.");
    } }, { key: "OldTagNameRequired", value: function(e) {
      pt(e, -2517, "Old tag name is required.");
    } }, { key: "NewTagNameRequired", value: function(e) {
      pt(e, -2518, "New tag name is required.");
    } }, { key: "CursorInvalidMode", value: function(e) {
      pt(e, -2519, "The current mode does not support setting the cursor to zoom-in.");
    } }, { key: "SystemExceptionError", value: function(e, r) {
      pt(e, -2520, r);
    } }, { key: "ChangeContrastFailed", value: function(e, r) {
      pt(e, -2521, "Failed to change contrast: " + Ur(r));
    } }, { key: "ChangeBrightnessFailed", value: function(e, r) {
      pt(e, -2522, "Failed to change brightening: " + Ur(r));
    } }, { key: "ConvertToGrayScaleFilterCallbackErr", value: function(e, r) {
      pt(e, -2523, 'Failed to apply "gray" filter: ' + Ur(r));
    } }, { key: "ConvertToBWScaleFilterCallbackErr", value: function(e, r) {
      pt(e, -2524, 'Failed to apply "black and white" filter: ' + Ur(r));
    } }, { key: "RemoveShadowFilterCallbackErr", value: function(e, r) {
      pt(e, -2525, 'Failed to apply "remove shadow" filter: ' + Ur(r));
    } }, { key: "EnhanceAndSharpenFilterCallbackErr", value: function(e, r) {
      pt(e, -2526, 'Failed to apply "enhance and sharpen" filter: ' + Ur(r));
    } }, { key: "BrightenFilterCallbackErr", value: function(e, r) {
      pt(e, -2527, 'Failed to apply "brightening" filter: ' + Ur(r));
    } }, { key: "SaveTonerCallbackErr", value: function(e, r) {
      pt(e, -2528, 'Failed to apply "save toner" filter: ' + Ur(r));
    } }, { key: "GetBlurryScoreErr", value: function(e, r) {
      pt(e, -2529, "Failed to get blurry score: " + Ur(r));
    } }, { key: "FileNameCannotEmpty", value: function(e) {
      pt(e, -2530, "Document name cannot be empty.");
    } }, { key: "FileNameNotString", value: function(e) {
      pt(e, -2531, "Document name is not a string.");
    } }, { key: "DocumentEditorNotExist", value: function(e) {
      pt(e, -2532, "This documentEditor doesn't exist.");
    } }, { key: "DocumentEditorDispose", value: function(e) {
      pt(e, -2533, "The documentEditor object has been disposed.");
    } }, { key: "DocumentEditorExist", value: function(e) {
      pt(e, -2534, "A documentEditor already exists.");
    } }, { key: "RgbaImageToBlobErr", value: function(e, r) {
      pt(e, -2535, "Failed to convert image data: " + Ur(r));
    } }, { key: "LoadTextPDFButNoPdfrLicenseErr", value: function(e) {
      pt(e, -2536, "This PDF file is not supported by the Core module. You may need to activate your PDF Rasterizer license to support this PDF file. Please contact support for further information.");
    } }, { key: "WasmNotLoaded", value: function(e) {
      pt(e, -2537, "The wasm not loaded.");
    } }, { key: "WasmNotLoaded_UseWasmFalse", value: function(e) {
      pt(e, -2538, "The wasm not loaded when Dynamsoft.DWT.UseCameraAddonWasm is set to false.");
    } }, { key: "LicenseVersionNotCurrent", value: function(e, r) {
      pt(e, -2539, "The current product key is not for version ".concat(r, ". Please contact the site administrator.")), l.Lib.Errors.SetLTSException(e);
    } }, { key: "FileNotExist", value: function(e) {
      pt(e, -2540, "The document does not exist.");
    } }, { key: "FileExist", value: function(e) {
      pt(e, -2541, "The document already exists.");
    } }, { key: "LicenseNotSupportMobile", value: function(e) {
      pt(e, -2542, "The current product key is missing the mobile license. Please contact the site administrator."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "LTSLicenseMixedWithOthers", value: function(e) {
      pt(e, -2543, 'You are using two different generations of Dynamsoft licenses. Please check the "Dynamsoft.DWT.ProductKey" specified in your application.');
    } }, { key: "SelectScannerMustInvokeBeforeOperation", value: function(e) {
      pt(e, -2544, "The method SelectDeviceAsync() must be invoked before the current operation.");
    } }, { key: "InvalidServerUrl", value: function(e) {
      pt(e, -2545, "The  proxy server URL is invalid.");
    } }, { key: "FailedParseProductKey", value: function(e) {
      pt(e, -2546, "The license is invalid.");
    } }, { key: "GetDevicesMustInvokeBeforeAcuireImage", value: function(e) {
      pt(e, -2547, "The method GetDevicesAsync() must be invoked before the current operation.");
    } }, { key: "WebviewerError", value: function(e, r, t) {
      pt(e, t || -2600, r);
    } }, { key: "ClearErrorInfo", value: function(e) {
      pt(e, 0, "");
    } }, { key: "SetLTSException", value: function(e) {
      var r = l.DWT.licenseException;
      r.code = e._errorCode, r.message = e._errorString, r.fromLTS = !1;
    } }, { key: "ThrowFailedConnectToRemoteDynamsoftService", value: function(e) {
      var r = e;
      return r || (r = "[]"), { code: -2601, message: "Failed to connect to the Dynamsoft Service on " + r + `.\r
Please make sure Dynamsoft Service is running or the certificate is valid.` };
    } }, { key: "ThrowInvalidParameterSendTo", value: function() {
      return { code: -2602, message: 'The parameter "SendTo" is invalid.' };
    } }, { key: "ThrowMobileNotSupportOS", value: function(e) {
      return { code: -2603, message: e + " is not supported for your Operating System." };
    } }, { key: "ThrowFailedConnectToProxyServer", value: function() {
      return { code: -2604, message: `Failed to connect to the Proxy Service.\r
 Please make sure the Proxy Service is configured successfully, Dynamsoft Service is running, or the certificate is valid.` };
    } }, { key: "ServiceSyncMethodNotSupport", value: function(e, r) {
      pt(e, -2605, 'The synchronized method "' + r + '" is not supported under the current settings.');
    } }, { key: "ServiceAsyncMethodNotSupport", value: function(e, r) {
      pt(e, -2606, 'The asynchronized method "' + r + '" is not supported under the current settings.');
    } }, { key: "ThrowString_FailedToCreateDWTObject", value: function(e) {
      if (e._bRemoteMode) {
        var r, t, i = (r = e._dmService) === null || r === void 0 || (t = r.attrs) === null || t === void 0 ? void 0 : t.name;
        return n.Errors.ThrowFailedConnectToRemoteDynamsoftService(i).message;
      }
      return "The Dynamsoft Service has been stopped.";
    } }, { key: "DeviceNotFound", value: function(e) {
      pt(e, -2607, "The device selected was not found under the current service object.");
    } }, { key: "RemoteServiceCannotSetShowFileDialog", value: function(e) {
      pt(e, -2608, "IfShowFileDialog cannot be set to true when Object is created by CreateRemoteScanObjectAsync.");
    } }, { key: "RemoteServiceCannotLoadDibFromClipboard", value: function(e) {
      pt(e, -2609, "LoadDibFromClipboard is not supported when Object is created by CreateRemoteScanObjectAsync.");
    } }, { key: "OpenSourceMustAsyncWhenRemote", value: function(e) {
      pt(e, -2610, "OpenSource is not supported when Object is created by CreateRemoteScanObjectAsync. Please use OpenSourceAsync instead.");
    } }, { key: "LicenseNoDbr", value: function(e) {
      pt(e, -2611, "The license for the Barcode module is invalid."), l.Lib.Errors.SetLTSException(e);
    } }, { key: "ThrowDevicesNotArray", value: function() {
      return { code: -2612, message: "The devices must be an Array." };
    } }, { key: "DynamsoftServiceStopped", value: function(e) {
      pt(e, -2613, "The Dynamsoft Service has been stopped.");
    } }, { key: "DynamsoftServiceRestarted", value: function(e) {
      pt(e, -2614, "The Dynamsoft Service has been restarted.");
    } }, { key: "UserCanceled", value: function(e) {
      pt(e, -2615, "User cancelled the operation.");
    } }]), o;
  }();
  function ma(o) {
    var e = o.server;
    return e || (e = K()), o.ssl ? ["https://", e, ":", o.port, "/"].join("") : ["http://", e, ":", o.port, "/"].join("");
  }
  function pa(o, e, r) {
    var t = o.data;
    if (gi(t) === "object")
      return t = null, o = null, void (r && r());
    var i = t.replace(/\0/g, "");
    try {
      e && e(i);
    } catch {
      n.log(t), r && r();
    }
    t = null, o = null;
  }
  function Vo(o, e) {
    o && o.readyState != xt && o.readyState != He ? o.readyState == ge ? (o.onerror = function(r) {
      r && n.log("websocket error: " + r), o._reject && (o._reject(), o._reject = null), o.close();
    }, o.onclose = function(r) {
      o.onclose = null, o.onerror = null, o.onmessage = null, o.onopen = null, o._reject = null;
    }, o.onopen = function() {
      o.readyState == Wt ? (o.onopen = null, o.send(e)) : o.readyState == ge && (o.onopen ? setTimeout(o.onopen, 100) : o._reject && (o._reject(), o._reject = null));
    }) : o.readyState == Wt && (o.onopen = null, o.send(e)) : o._reject && (o._reject(), o._reject = null);
  }
  function Co(o, e, r) {
    var t = r;
    return t || (t = l.navInfoSync.bSSL ? "https://" : "http://"), [t, o, ":", e, "/"].join("");
  }
  n.Errors = new ia();
  var oi = function() {
    function o() {
      Gn(this, o);
    }
    return zn(o, null, [{ key: "postStringDataByWS", value: function(e, r) {
      return new n.Promise(function(t, i) {
        e.onmessage = function(a) {
          pa(a, function(u) {
            t(u), e.close(), e = null;
          }, function() {
            i(), e.close(), e = null;
          });
        }, e._reject = i, Vo(e, r);
      });
    } }, { key: "postStringDataByWSUrl", value: function(e, r) {
      var t = new n.Promise(function(i, a) {
        var u = o.newWebsocket(e, !1);
        u.onmessage = function(c) {
          pa(c, function(d) {
            i(d), u.close(), u = null;
          }, function() {
            a(), u.close(), u = null;
          });
        }, u._reject = a, Vo(u, r);
      });
      return l.navInfoSync.bEdge && t.catch(function() {
        return new n.Promise(function(i, a) {
          var u = o.newWebsocket(e, !0);
          u.onmessage = function(c) {
            pa(c, function(d) {
              i(d), u.close(), u = null;
            }, function() {
              a(), u.close(), u = null;
            });
          }, u._reject = a, Vo(u, r);
        });
      }), t;
    } }, { key: "newWebsocket", value: function(e, r) {
      var t, i = l.dcp.wsProtocol, a = window.MozWebSocket;
      if (a !== void 0)
        t = i ? new a(e, i) : new a(e);
      else {
        var u = window.WebSocket;
        if (r) {
          var c = window, d = parent;
          try {
            for (; c != d && d.WebSocket; )
              u = d.WebSocket, c = d.window, d = d.parent;
          } catch {
            u = window.WebSocket;
          }
        }
        t = i ? new u(e, i) : new u(e);
      }
      return t;
    } }, { key: "getWsUrl", value: function(e, r, t) {
      var i = t;
      return i === void 0 && (i = l.navInfoSync.bSSL), Co(e, r, i ? "wss://" : "ws://");
    } }, { key: "getDDMUrl", value: function(e, r, t) {
      var i, a, u = "/";
      return n.startsWith(e, "https://") ? i = !0 : n.startsWith(e, "http://") ? i = !1 : e = (i = n.detect.ssl) ? "https://" + e : "http://" + e, a = i ? "18626/" : "18625/", n.endsWith(e, "/") && (u = ""), r ? [e, u, "ddm/", a, t].join("") : [e, u, t].join("");
    } }, { key: "getModuleUrl", value: function(e) {
      var r, t = l.dcp;
      return r = Co(K(), l.navInfoSync.bSSL ? t.SSLPort : t.Port), e ? r + e : r;
    } }]), o;
  }();
  l.DWT.NetManager = oi;
  var vi = zn(function o(e, r, t, i, a) {
    Gn(this, o), this.server = e, this.port = r, this.ssl = t, this.useWS = i, this.protocol = a;
  });
  function ar(o, e, r) {
    return (e = ra(e)) in o ? Object.defineProperty(o, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : o[e] = r, o;
  }
  function _o(o, e, r, t, i, a, u) {
    try {
      var c = o[a](u), d = c.value;
    } catch (_) {
      return void r(_);
    }
    c.done ? e(d) : Promise.resolve(d).then(t, i);
  }
  function Ln(o) {
    return function() {
      var e = this, r = arguments;
      return new Promise(function(t, i) {
        var a = o.apply(e, r);
        function u(d) {
          _o(a, t, i, u, c, "next", d);
        }
        function c(d) {
          _o(a, t, i, u, c, "throw", d);
        }
        u(void 0);
      });
    };
  }
  function ln(o) {
    if (o === void 0)
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return o;
  }
  function mn(o, e) {
    return mn = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(r, t) {
      return r.__proto__ = t, r;
    }, mn(o, e);
  }
  function Hr(o, e) {
    if (typeof e != "function" && e !== null)
      throw new TypeError("Super expression must either be null or a function");
    o.prototype = Object.create(e && e.prototype, { constructor: { value: o, writable: !0, configurable: !0 } }), Object.defineProperty(o, "prototype", { writable: !1 }), e && mn(o, e);
  }
  function Rr(o, e) {
    if (e && (gi(e) === "object" || typeof e == "function"))
      return e;
    if (e !== void 0)
      throw new TypeError("Derived constructors may only return object or undefined");
    return ln(o);
  }
  function $(o) {
    return $ = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
      return e.__proto__ || Object.getPrototypeOf(e);
    }, $(o);
  }
  var pe = { exports: {} }, se = { exports: {} };
  (function(o) {
    function e(r) {
      return o.exports = e = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
        return typeof t;
      } : function(t) {
        return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
      }, o.exports.__esModule = !0, o.exports.default = o.exports, e(r);
    }
    o.exports = e, o.exports.__esModule = !0, o.exports.default = o.exports;
  })(se), function(o) {
    var e = se.exports.default;
    function r() {
      o.exports = r = function() {
        return t;
      }, o.exports.__esModule = !0, o.exports.default = o.exports;
      var t = {}, i = Object.prototype, a = i.hasOwnProperty, u = Object.defineProperty || function(ft, Pt, Ot) {
        ft[Pt] = Ot.value;
      }, c = typeof Symbol == "function" ? Symbol : {}, d = c.iterator || "@@iterator", _ = c.asyncIterator || "@@asyncIterator", v = c.toStringTag || "@@toStringTag";
      function T(ft, Pt, Ot) {
        return Object.defineProperty(ft, Pt, { value: Ot, enumerable: !0, configurable: !0, writable: !0 }), ft[Pt];
      }
      try {
        T({}, "");
      } catch {
        T = function(Pt, Ot, pn) {
          return Pt[Ot] = pn;
        };
      }
      function M(ft, Pt, Ot, pn) {
        var un = Pt && Pt.prototype instanceof V ? Pt : V, An = Object.create(un.prototype), Mr = new Ft(pn || []);
        return u(An, "_invoke", { value: it(ft, Ot, Mr) }), An;
      }
      function A(ft, Pt, Ot) {
        try {
          return { type: "normal", arg: ft.call(Pt, Ot) };
        } catch (pn) {
          return { type: "throw", arg: pn };
        }
      }
      t.wrap = M;
      var S = {};
      function V() {
      }
      function ne() {
      }
      function z() {
      }
      var ue = {};
      T(ue, d, function() {
        return this;
      });
      var xe = Object.getPrototypeOf, Fe = xe && xe(xe(st([])));
      Fe && Fe !== i && a.call(Fe, d) && (ue = Fe);
      var Qe = z.prototype = V.prototype = Object.create(ue);
      function Ze(ft) {
        ["next", "throw", "return"].forEach(function(Pt) {
          T(ft, Pt, function(Ot) {
            return this._invoke(Pt, Ot);
          });
        });
      }
      function Ct(ft, Pt) {
        function Ot(un, An, Mr, tr) {
          var Qn = A(ft[un], ft, An);
          if (Qn.type !== "throw") {
            var wi = Qn.arg, Xr = wi.value;
            return Xr && e(Xr) == "object" && a.call(Xr, "__await") ? Pt.resolve(Xr.__await).then(function(Mn) {
              Ot("next", Mn, Mr, tr);
            }, function(Mn) {
              Ot("throw", Mn, Mr, tr);
            }) : Pt.resolve(Xr).then(function(Mn) {
              wi.value = Mn, Mr(wi);
            }, function(Mn) {
              return Ot("throw", Mn, Mr, tr);
            });
          }
          tr(Qn.arg);
        }
        var pn;
        u(this, "_invoke", { value: function(un, An) {
          function Mr() {
            return new Pt(function(tr, Qn) {
              Ot(un, An, tr, Qn);
            });
          }
          return pn = pn ? pn.then(Mr, Mr) : Mr();
        } });
      }
      function it(ft, Pt, Ot) {
        var pn = "suspendedStart";
        return function(un, An) {
          if (pn === "executing")
            throw new Error("Generator is already running");
          if (pn === "completed") {
            if (un === "throw")
              throw An;
            return nt();
          }
          for (Ot.method = un, Ot.arg = An; ; ) {
            var Mr = Ot.delegate;
            if (Mr) {
              var tr = Bt(Mr, Ot);
              if (tr) {
                if (tr === S)
                  continue;
                return tr;
              }
            }
            if (Ot.method === "next")
              Ot.sent = Ot._sent = Ot.arg;
            else if (Ot.method === "throw") {
              if (pn === "suspendedStart")
                throw pn = "completed", Ot.arg;
              Ot.dispatchException(Ot.arg);
            } else
              Ot.method === "return" && Ot.abrupt("return", Ot.arg);
            pn = "executing";
            var Qn = A(ft, Pt, Ot);
            if (Qn.type === "normal") {
              if (pn = Ot.done ? "completed" : "suspendedYield", Qn.arg === S)
                continue;
              return { value: Qn.arg, done: Ot.done };
            }
            Qn.type === "throw" && (pn = "completed", Ot.method = "throw", Ot.arg = Qn.arg);
          }
        };
      }
      function Bt(ft, Pt) {
        var Ot = Pt.method, pn = ft.iterator[Ot];
        if (pn === void 0)
          return Pt.delegate = null, Ot === "throw" && ft.iterator.return && (Pt.method = "return", Pt.arg = void 0, Bt(ft, Pt), Pt.method === "throw") || Ot !== "return" && (Pt.method = "throw", Pt.arg = new TypeError("The iterator does not provide a '" + Ot + "' method")), S;
        var un = A(pn, ft.iterator, Pt.arg);
        if (un.type === "throw")
          return Pt.method = "throw", Pt.arg = un.arg, Pt.delegate = null, S;
        var An = un.arg;
        return An ? An.done ? (Pt[ft.resultName] = An.value, Pt.next = ft.nextLoc, Pt.method !== "return" && (Pt.method = "next", Pt.arg = void 0), Pt.delegate = null, S) : An : (Pt.method = "throw", Pt.arg = new TypeError("iterator result is not an object"), Pt.delegate = null, S);
      }
      function yt(ft) {
        var Pt = { tryLoc: ft[0] };
        1 in ft && (Pt.catchLoc = ft[1]), 2 in ft && (Pt.finallyLoc = ft[2], Pt.afterLoc = ft[3]), this.tryEntries.push(Pt);
      }
      function en(ft) {
        var Pt = ft.completion || {};
        Pt.type = "normal", delete Pt.arg, ft.completion = Pt;
      }
      function Ft(ft) {
        this.tryEntries = [{ tryLoc: "root" }], ft.forEach(yt, this), this.reset(!0);
      }
      function st(ft) {
        if (ft) {
          var Pt = ft[d];
          if (Pt)
            return Pt.call(ft);
          if (typeof ft.next == "function")
            return ft;
          if (!isNaN(ft.length)) {
            var Ot = -1, pn = function un() {
              for (; ++Ot < ft.length; )
                if (a.call(ft, Ot))
                  return un.value = ft[Ot], un.done = !1, un;
              return un.value = void 0, un.done = !0, un;
            };
            return pn.next = pn;
          }
        }
        return { next: nt };
      }
      function nt() {
        return { value: void 0, done: !0 };
      }
      return ne.prototype = z, u(Qe, "constructor", { value: z, configurable: !0 }), u(z, "constructor", { value: ne, configurable: !0 }), ne.displayName = T(z, v, "GeneratorFunction"), t.isGeneratorFunction = function(ft) {
        var Pt = typeof ft == "function" && ft.constructor;
        return !!Pt && (Pt === ne || (Pt.displayName || Pt.name) === "GeneratorFunction");
      }, t.mark = function(ft) {
        return Object.setPrototypeOf ? Object.setPrototypeOf(ft, z) : (ft.__proto__ = z, T(ft, v, "GeneratorFunction")), ft.prototype = Object.create(Qe), ft;
      }, t.awrap = function(ft) {
        return { __await: ft };
      }, Ze(Ct.prototype), T(Ct.prototype, _, function() {
        return this;
      }), t.AsyncIterator = Ct, t.async = function(ft, Pt, Ot, pn, un) {
        un === void 0 && (un = Promise);
        var An = new Ct(M(ft, Pt, Ot, pn), un);
        return t.isGeneratorFunction(Pt) ? An : An.next().then(function(Mr) {
          return Mr.done ? Mr.value : An.next();
        });
      }, Ze(Qe), T(Qe, v, "Generator"), T(Qe, d, function() {
        return this;
      }), T(Qe, "toString", function() {
        return "[object Generator]";
      }), t.keys = function(ft) {
        var Pt = Object(ft), Ot = [];
        for (var pn in Pt)
          Ot.push(pn);
        return Ot.reverse(), function un() {
          for (; Ot.length; ) {
            var An = Ot.pop();
            if (An in Pt)
              return un.value = An, un.done = !1, un;
          }
          return un.done = !0, un;
        };
      }, t.values = st, Ft.prototype = { constructor: Ft, reset: function(ft) {
        if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(en), !ft)
          for (var Pt in this)
            Pt.charAt(0) === "t" && a.call(this, Pt) && !isNaN(+Pt.slice(1)) && (this[Pt] = void 0);
      }, stop: function() {
        this.done = !0;
        var ft = this.tryEntries[0].completion;
        if (ft.type === "throw")
          throw ft.arg;
        return this.rval;
      }, dispatchException: function(ft) {
        if (this.done)
          throw ft;
        var Pt = this;
        function Ot(Qn, wi) {
          return An.type = "throw", An.arg = ft, Pt.next = Qn, wi && (Pt.method = "next", Pt.arg = void 0), !!wi;
        }
        for (var pn = this.tryEntries.length - 1; pn >= 0; --pn) {
          var un = this.tryEntries[pn], An = un.completion;
          if (un.tryLoc === "root")
            return Ot("end");
          if (un.tryLoc <= this.prev) {
            var Mr = a.call(un, "catchLoc"), tr = a.call(un, "finallyLoc");
            if (Mr && tr) {
              if (this.prev < un.catchLoc)
                return Ot(un.catchLoc, !0);
              if (this.prev < un.finallyLoc)
                return Ot(un.finallyLoc);
            } else if (Mr) {
              if (this.prev < un.catchLoc)
                return Ot(un.catchLoc, !0);
            } else {
              if (!tr)
                throw new Error("try statement without catch or finally");
              if (this.prev < un.finallyLoc)
                return Ot(un.finallyLoc);
            }
          }
        }
      }, abrupt: function(ft, Pt) {
        for (var Ot = this.tryEntries.length - 1; Ot >= 0; --Ot) {
          var pn = this.tryEntries[Ot];
          if (pn.tryLoc <= this.prev && a.call(pn, "finallyLoc") && this.prev < pn.finallyLoc) {
            var un = pn;
            break;
          }
        }
        un && (ft === "break" || ft === "continue") && un.tryLoc <= Pt && Pt <= un.finallyLoc && (un = null);
        var An = un ? un.completion : {};
        return An.type = ft, An.arg = Pt, un ? (this.method = "next", this.next = un.finallyLoc, S) : this.complete(An);
      }, complete: function(ft, Pt) {
        if (ft.type === "throw")
          throw ft.arg;
        return ft.type === "break" || ft.type === "continue" ? this.next = ft.arg : ft.type === "return" ? (this.rval = this.arg = ft.arg, this.method = "return", this.next = "end") : ft.type === "normal" && Pt && (this.next = Pt), S;
      }, finish: function(ft) {
        for (var Pt = this.tryEntries.length - 1; Pt >= 0; --Pt) {
          var Ot = this.tryEntries[Pt];
          if (Ot.finallyLoc === ft)
            return this.complete(Ot.completion, Ot.afterLoc), en(Ot), S;
        }
      }, catch: function(ft) {
        for (var Pt = this.tryEntries.length - 1; Pt >= 0; --Pt) {
          var Ot = this.tryEntries[Pt];
          if (Ot.tryLoc === ft) {
            var pn = Ot.completion;
            if (pn.type === "throw") {
              var un = pn.arg;
              en(Ot);
            }
            return un;
          }
        }
        throw new Error("illegal catch attempt");
      }, delegateYield: function(ft, Pt, Ot) {
        return this.delegate = { iterator: st(ft), resultName: Pt, nextLoc: Ot }, this.method === "next" && (this.arg = void 0), S;
      } }, t;
    }
    o.exports = r, o.exports.__esModule = !0, o.exports.default = o.exports;
  }(pe);
  var Ie = pe.exports(), he = Ie;
  try {
    regeneratorRuntime = Ie;
  } catch {
    typeof Xi == "object" ? Xi.regeneratorRuntime = Ie : Function("r", "regeneratorRuntime = r")(Ie);
  }
  var tt = 0, ht = -1, wt = -4201, kt = -5001, Vt = -5002, Nt = -5003, fn = -5004, Hn = "The Web Socket connection failed.", er = "The input is not a JSON object or JSON styled string.", sr = "The object has been disposed.", li = "The task is invalid.", Lr = "The object need to be disposed.", Ci = function() {
    function o() {
      Gn(this, o);
    }
    return zn(o, null, [{ key: "message", value: function(e) {
      return this._errorMessage[e];
    } }, { key: "init", value: function() {
      this._errorMessage[tt] = "Successful.", this._errorMessage[wt] = Hn, this._errorMessage[kt] = er, this._errorMessage[Vt] = sr, this._errorMessage[Nt] = li, this._errorMessage[fn] = Lr;
    } }]), o;
  }();
  ar(Ci, "_errorMessage", /* @__PURE__ */ Object.create(null)), Ci.init();
  var Er, mr = function() {
    function o(e, r) {
      Gn(this, o), ar(this, "_code", tt), this.name = "DSError", this.message = r ?? (typeof e == "string" ? e : Ci.message(e)), this._code = typeof e == "string" ? ht : e;
    }
    return zn(o, [{ key: "code", get: function() {
      return this._code;
    } }]), o;
  }();
  function yr(o) {
    return { code: o._errorCode, message: o._errorString };
  }
  (function(o) {
    o[o.NONE = 0] = "NONE", o[o.TRACE = 1] = "TRACE", o[o.DEBUG = 2] = "DEBUG", o[o.INFO = 4] = "INFO", o[o.WARN = 8] = "WARN", o[o.ERROR = 16] = "ERROR";
  })(Er || (Er = {}));
  var Gr = n.getLogger(), yi = function() {
    function o() {
      Gn(this, o);
    }
    return zn(o, null, [{ key: "LogLevel", get: function() {
      return this._logLevel;
    }, set: function(e) {
      this._logLevel = e;
    } }, { key: "LogFunc", set: function(e) {
      this._logFunc = e;
    } }, { key: "all", value: function(e, r) {
      if ((this._logLevel & e) == e)
        if (this._logFunc)
          this._logFunc(r, e);
        else
          switch (e) {
            case Er.DEBUG:
              Gr.debug(r);
              break;
            case Er.ERROR:
              Gr.error(r);
              break;
            case Er.INFO:
              Gr.info(r);
              break;
            case Er.WARN:
              Gr.warn(r);
              break;
            case Er.TRACE:
              Gr.trace(r);
          }
    } }, { key: "trace", value: function(e) {
      this.all(Er.TRACE, e);
    } }, { key: "debug", value: function(e) {
      this.all(Er.DEBUG, e);
    } }, { key: "info", value: function(e) {
      this.all(Er.INFO, e);
    } }, { key: "warn", value: function(e) {
      this.all(Er.WARN, e);
    } }, { key: "error", value: function(e) {
      this.all(Er.ERROR, e);
    } }]), o;
  }();
  ar(yi, "_logLevel", Er.ERROR), ar(yi, "_logFunc", void 0);
  var ui = 0, Ei = 1, jn = 2, ye = 3, oe = 4, ae = 5, ie = 6, _e = function() {
    function o(t) {
      Gn(this, o), ar(this, "_serverInfo", void 0), ar(this, "_disposed", !1), this._serverInfo = t, this._ref = 1;
    }
    var e, r;
    return zn(o, [{ key: "serverInfo", get: function() {
      return this._serverInfo;
    } }, { key: "requestSync", value: function(t, i) {
      return yi.error("requestSync should be implemented in child class"), void 0;
    } }, { key: "request", value: function() {
      var t = Ln(he.mark(function i(a, u, c, d) {
        return he.wrap(function(_) {
          for (; ; )
            switch (_.prev = _.next) {
              case 0:
                return yi.error("request should be implemented in child class"), _.abrupt("return", Promise.resolve(null));
              case 2:
              case "end":
                return _.stop();
            }
        }, i);
      }));
      return function(i, a, u, c) {
        return t.apply(this, arguments);
      };
    }() }, { key: "send", value: (r = Ln(he.mark(function t(i, a, u) {
      return he.wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              yi.error("reqsenduestSync should be implemented in child class");
            case 1:
            case "end":
              return c.stop();
          }
      }, t);
    })), function(t, i, a) {
      return r.apply(this, arguments);
    }) }, { key: "testConnection", value: (e = Ln(he.mark(function t(i, a, u, c) {
      return he.wrap(function(d) {
        for (; ; )
          switch (d.prev = d.next) {
            case 0:
              return yi.error("testConnection should be implemented in child class"), d.abrupt("return", Promise.resolve(void 0));
            case 2:
            case "end":
              return d.stop();
          }
      }, t);
    })), function(t, i, a, u) {
      return e.apply(this, arguments);
    }) }, { key: "disposed", get: function() {
      return this._disposed;
    } }, { key: "dispose", value: function() {
      if (this._ref--, this._ref > 0)
        return !1;
      this._disposed = !0, this._terminate();
    } }, { key: "_terminate", value: function() {
    } }, { key: "addRef", value: function() {
      this._ref++;
    } }]), o;
  }();
  function de(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function Se(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function Ae(o, e, r) {
    return e.has(o), r;
  }
  var ze = n.getLogger(), qe = n.fetch, Ke = /* @__PURE__ */ new WeakSet(), At = /* @__PURE__ */ new WeakSet(), _n = function(o) {
    Hr(a, o);
    var e, r, t, i = de(a);
    function a() {
      var u;
      Gn(this, a);
      for (var c = arguments.length, d = new Array(c), _ = 0; _ < c; _++)
        d[_] = arguments[_];
      return Se(ln(u = i.call.apply(i, [this].concat(d))), At), Se(ln(u), Ke), u;
    }
    return zn(a, [{ key: "send", value: (t = Ln(he.mark(function u(c, d, _) {
      return he.wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              ze.error("HTTP Client send not supported");
            case 1:
            case "end":
              return v.stop();
          }
      }, u);
    })), function(u, c, d) {
      return t.apply(this, arguments);
    }) }, { key: "requestSync", value: function(u, c, d) {
    } }, { key: "request", value: (r = Ln(he.mark(function u(c, d, _, v) {
      return he.wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              return T.abrupt("return", Ae(this, At, In).call(this, c, d, _, void 0, void 0, v));
            case 1:
            case "end":
              return T.stop();
          }
      }, u, this);
    })), function(u, c, d, _) {
      return r.apply(this, arguments);
    }) }, { key: "testConnection", value: (e = Ln(he.mark(function u(c, d, _, v) {
      return he.wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              return T.abrupt("return", Ae(this, At, In).call(this, void 0, void 0, c, d, _, v));
            case 1:
            case "end":
              return T.stop();
          }
      }, u, this);
    })), function(u, c, d, _) {
      return e.apply(this, arguments);
    }) }]), a;
  }(_e);
  function Jt(o) {
    var e = this.serverInfo, r = "";
    return r = e.ssl ? "https://" : "http://", r += e.server, e.port && (r += ":", r += e.port), o && (n.startsWith(o, "/") || n.endsWith(r, "/") || (r += "/"), n.endsWith(o, "/") ? r += o.slice(0, -1) : r += o), r;
  }
  function In(o, e, r, t, i, a) {
    return jt.apply(this, arguments);
  }
  function jt() {
    return (jt = Ln(he.mark(function o(e, r, t, i, a, u) {
      var c, d, _;
      return he.wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              return v.prev = 0, c = t ?? {}, e && (c.body = e), c.method || (c.method = "POST"), u && (c.timeout = u), d = Ae(this, Ke, Jt).call(this, r), ze.debug("HTTP URL: " + d), v.next = 9, qe(d, c, i, a);
            case 9:
              return _ = v.sent, v.abrupt("return", Promise.resolve(_));
            case 13:
              if (v.prev = 13, v.t0 = v.catch(0), !(v.t0 instanceof mr)) {
                v.next = 19;
                break;
              }
              throw v.t0;
            case 19:
              throw new mr(v.t0.message);
            case 20:
            case "end":
              return v.stop();
          }
      }, o, this, [[0, 13]]);
    }))).apply(this, arguments);
  }
  function _t(o) {
    try {
      return gi(o) === "object" ? o : (o = typeof o != "string" ? n.stringify(o) : o, n.parse(o));
    } catch (e) {
      throw e instanceof mr ? e : new mr(kt);
    }
  }
  function St(o) {
    return Math.random().toString(16).substring(2, 2 + o);
  }
  function sn(o) {
    var e = [St(8), "-", St(4), "-", St(4), "-", St(4), "-", St(8)];
    return o && e.unshift(o), e.join("");
  }
  function yn(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function Wn(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function Jn(o, e, r) {
    return e.has(o), r;
  }
  var pr, cr = n.getLogger(), Fi = /* @__PURE__ */ new WeakSet(), Oi = /* @__PURE__ */ new WeakSet(), Di = /* @__PURE__ */ new WeakSet(), Wr = /* @__PURE__ */ new WeakSet(), Ki = /* @__PURE__ */ new WeakSet(), Lo = /* @__PURE__ */ new WeakSet(), Eo = /* @__PURE__ */ new WeakSet(), ro = function(o) {
    Hr(u, o);
    var e, r, t, i, a = yn(u);
    function u(c) {
      var d;
      return Gn(this, u), Wn(ln(d = a.call(this, c)), Eo), Wn(ln(d), Lo), Wn(ln(d), Ki), Wn(ln(d), Wr), Wn(ln(d), Di), Wn(ln(d), Oi), Wn(ln(d), Fi), ar(ln(d), "_defaultRetries", 1), ar(ln(d), "_ws", pr), ar(ln(d), "_events", {}), ar(ln(d), "_bHeartBeatStarted", !1), ar(ln(d), "_heartBeatTicks", 6e4), d._ws = pr, d.bUseParentWS = !1, d._tasks = /* @__PURE__ */ Object.create(null), d;
    }
    return zn(u, [{ key: "ws", get: function() {
      return this._ws;
    } }, { key: "requestSync", value: function(c, d, _) {
      return cr.error("WebSocket Client requestSync not supported"), void 0;
    } }, { key: "send", value: (i = Ln(he.mark(function c(d, _, v) {
      var T, M, A, S, V;
      return he.wrap(function(ne) {
        for (; ; )
          switch (ne.prev = ne.next) {
            case 0:
              if (T = v.client, ne.prev = 1, (M = v.taskId) !== void 0) {
                ne.next = 7;
                break;
              }
              return ne.next = 6, _(d, ui, T._requestTaskId, v);
            case 6:
              M = ne.sent;
            case 7:
              if (A = T._tasks[M]) {
                ne.next = 11;
                break;
              }
              throw cr.error("invalid task id: " + M), new mr(Nt);
            case 11:
              return ne.next = 13, Jn(T, Ki, _a).call(T, !1);
            case 13:
              return ne.next = 15, Jn(T, Lo, Kn).call(T, d, _, v, A);
            case 15:
              cr.debug("begin to send data " + M), T.disposed || T._ws.send(d), d = null, cr.debug("end to send data " + M), ne.next = 27;
              break;
            case 21:
              ne.prev = 21, ne.t0 = ne.catch(1), cr.debug("failed to send data."), cr.error(ne.t0), delete T._tasks[M], (S = A) === null || S === void 0 || (V = S.resolver) === null || V === void 0 || V.reject(ne.t0.message);
            case 27:
            case "end":
              return ne.stop();
          }
      }, c, null, [[1, 21]]);
    })), function(c, d, _) {
      return i.apply(this, arguments);
    }) }, { key: "request", value: (t = Ln(he.mark(function c(d, _, v, T) {
      var M, A, S;
      return he.wrap(function(V) {
        for (; ; )
          switch (V.prev = V.next) {
            case 0:
              return M = this._defaultRetries, A = _ ?? Jn(this, Wr, rs), S = v ?? { client: this, userData: this }, V.abrupt("return", Jn(this, Eo, lr).call(this, d, A, S, M, !1, void 0, T));
            case 2:
            case "end":
              return V.stop();
          }
      }, c, this);
    })), function(c, d, _, v) {
      return t.apply(this, arguments);
    }) }, { key: "connected", get: function() {
      var c;
      return ((c = this._ws) === null || c === void 0 ? void 0 : c.readyState) == WebSocket.OPEN;
    } }, { key: "startHeartBeat", value: function() {
      var c = this;
      c._bHeartBeatStarted || (c._bHeartBeatStarted = !0, setTimeout(function() {
        c._innerSendHeartBeat();
      }, c._heartBeatTicks));
    } }, { key: "_innerSendHeartBeat", value: (r = Ln(he.mark(function c() {
      var d, _, v, T, M;
      return he.wrap(function(A) {
        for (; ; )
          switch (A.prev = A.next) {
            case 0:
              return d = this, _ = { client: null, userData: null, taskId: "0", eventTaskId: "0", lastEventTaskId: "0" }, v = new ArrayBuffer(14), (T = new DataView(v)).setUint8(0, 2), T.setUint8(8, 2), T.setUint8(12, 123), T.setUint8(13, 125), M = new Blob([v]), A.prev = 9, A.next = 12, Jn(d, Eo, lr).call(d, M, null, _, 0, !0);
            case 12:
              A.next = 16;
              break;
            case 14:
              A.prev = 14, A.t0 = A.catch(9);
            case 16:
              d.connected && setTimeout(function() {
                d._innerSendHeartBeat();
              }, d._heartBeatTicks);
            case 17:
            case "end":
              return A.stop();
          }
      }, c, this, [[9, 14]]);
    })), function() {
      return r.apply(this, arguments);
    }) }, { key: "testConnection", value: function(c, d, _, v) {
      return Jn(this, Ki, _a).call(this, !0, d ?? 0, _, v);
    } }, { key: "_terminate", value: (e = Ln(he.mark(function c() {
      var d;
      return he.wrap(function(_) {
        for (; ; )
          switch (_.prev = _.next) {
            case 0:
              for (d in cr.debug("terminate WSClient"), this.fireEvent("disposed"), this._tasks)
                this._tasks[d] !== void 0 && this._tasks[d].resolver && this._tasks[d].resolver.reject(new mr(fn));
              this._ws && (this._ws.close(), this._ws.onopen = null, this._ws.onerror = null, this._ws.onmessage = null, this._ws.onclose = null), this._ws = pr, this._tasks = /* @__PURE__ */ Object.create(null);
            case 6:
            case "end":
              return _.stop();
          }
      }, c, this);
    })), function() {
      return e.apply(this, arguments);
    }) }, { key: "setRetry", value: function(c) {
      this._defaultRetries = c ?? 1;
    } }, { key: "addEvent", value: function(c, d, _) {
      var v = this._events[c];
      v || (this._events[c] = {}, v = this._events[c]), n.isString(d) && n.isFunction(_) && (v[d] = _);
    } }, { key: "removeEvent", value: function(c, d) {
      var _ = this._events[c];
      _ && n.isString(d) && delete _[d];
    } }, { key: "clearEvent", value: function(c) {
      this._events[c] && (this._events[c] = {});
    } }, { key: "fireEvent", value: function(c) {
      var d, _ = this._events[c];
      if (_) {
        var v = Object.keys(_);
        for (d = 0; d < v.length; d++)
          n.isFunction(_[v[d]]) && _[v[d]]();
      }
    } }, { key: "getRequestTaskId", value: function() {
      return this._requestTaskId ? this._requestTaskId : 0;
    } }]), u;
  }(_e);
  function di(o) {
    var e = "";
    return e = o.ssl ? "wss://" : "ws://", e += o.server, o.port && (e += ":", e += o.port), e;
  }
  function Ga(o, e, r, t) {
    var i = this;
    return new n.Promise(function(a, u) {
      try {
        var c, d;
        if (t && (d = setTimeout(function() {
          c.close();
          var M = new mr("createWebSocket timed out.");
          cr.debug(M.message), u(M);
        }, t)), o.bUseParentWS) {
          var _ = window, v = parent, T = _.WebSocket;
          try {
            for (; _ != v && v && v.WebSocket; )
              T = v.WebSocket, _ = v.window, v = v.parent;
          } catch {
            T = window.WebSocket;
          }
          c = r ? new T(e, r) : new T(e);
        } else
          c = r ? new WebSocket(e, r) : new WebSocket(e);
        c.onopen = function() {
          d && clearTimeout(d), o._ws = c, a(c);
        }, c.onerror = function(M) {
          c.close(), d && clearTimeout(d), i.fireEvent("error"), u(M);
        }, c.onmessage = function(M) {
          Jn(o, Di, ts).call(o, o, M.data);
        }, c.onclose = function(M) {
          d && clearTimeout(d), i.fireEvent("close"), u(M);
        };
      } catch (M) {
        throw M instanceof mr ? M : new mr(M.message);
      }
    });
  }
  function ts(o, e) {
    return ns.apply(this, arguments);
  }
  function ns() {
    return (ns = Ln(he.mark(function o(e, r) {
      var t, i, a, u, c, d, _, v, T;
      return he.wrap(function(M) {
        for (; ; )
          switch (M.prev = M.next) {
            case 0:
              if (t = e, M.prev = 1, u = { client: t, userData: void 0 }, t._cbToGetTaskId) {
                M.next = 5;
                break;
              }
              return M.abrupt("return");
            case 5:
              return M.next = 7, t._cbToGetTaskId(r, jn, t._requestTaskId, u);
            case 7:
              return c = M.sent, d = !1, M.next = 11, t._cbToGetTaskId(c, ye, t._requestTaskId, u);
            case 11:
              if (a = M.sent) {
                M.next = 17;
                break;
              }
              return M.next = 15, t._cbToGetTaskId(c, oe, t._requestTaskId, u);
            case 15:
              (a = M.sent) && (d = !0);
            case 17:
              if (i = t._tasks[a]) {
                M.next = 27;
                break;
              }
              if (!d) {
                M.next = 23;
                break;
              }
              i = {}, M.next = 25;
              break;
            case 23:
              return a != "" && cr.log("invalid task id: " + a), M.abrupt("return");
            case 25:
              M.next = 29;
              break;
            case 27:
              if (!i.timedout) {
                M.next = 29;
                break;
              }
              return M.abrupt("return");
            case 29:
              return M.next = 31, t._cbToGetTaskId(r, ae, t._requestTaskId, i.ctx);
            case 31:
              if ((_ = M.sent) !== void 0) {
                M.next = 36;
                break;
              }
              return M.next = 35, t._cbToGetTaskId(c, ie, t._requestTaskId, i.ctx);
            case 35:
              _ = M.sent;
            case 36:
              _ && !d && (i.tmid && clearTimeout(i.tmid), delete t._tasks[a], i.resolver && i.resolver.resolve(_)), M.next = 45;
              break;
            case 39:
              M.prev = 39, M.t0 = M.catch(1), cr.debug("failed to handle message."), cr.error(M.t0), delete t._tasks[a], (v = i) === null || v === void 0 || (T = v.resolver) === null || T === void 0 || T.reject(M.t0.message);
            case 45:
            case "end":
              return M.stop();
          }
      }, o, null, [[1, 39]]);
    }))).apply(this, arguments);
  }
  function rs(o, e, r) {
    return is.apply(this, arguments);
  }
  function is() {
    return (is = Ln(he.mark(function o(e, r, t) {
      var i, a;
      return he.wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              u.t0 = r, u.next = u.t0 === ui ? 3 : u.t0 === ae ? 7 : 9;
              break;
            case 3:
              return (a = _t(e)).cmdId = (i = a.cmdId) !== null && i !== void 0 ? i : sn(), Promise.resolve(["cmdId"]), u.abrupt("break", 9);
            case 7:
              return Promise.resolve(e), u.abrupt("break", 9);
            case 9:
            case "end":
              return u.stop();
          }
      }, o);
    }))).apply(this, arguments);
  }
  function _a(o, e, r, t) {
    return Sn.apply(this, arguments);
  }
  function Sn() {
    return (Sn = Ln(he.mark(function o(e, r, t, i) {
      var a, u, c, d;
      return he.wrap(function(_) {
        for (; ; )
          switch (_.prev = _.next) {
            case 0:
              if (!this.connected && !this.disposed) {
                _.next = 2;
                break;
              }
              return _.abrupt("return");
            case 2:
              if (!(c = this)._connectPromise) {
                _.next = 7;
                break;
              }
              return _.next = 6, c._connectPromise;
            case 6:
              return _.abrupt("return");
            case 7:
              return r = (a = r) !== null && a !== void 0 ? a : this._defaultRetries, t = (u = t) !== null && u !== void 0 ? u : 100, d = Jn(c, Fi, di).call(c, c.serverInfo), cr.debug("WebSocket URL: " + d), cr.debug("try to create websocket " + r + "--" + t), c._connectPromise = new n.Promise(function(v, T) {
                var M = function(S) {
                  Jn(c, Oi, Ga).call(c, c, d, c.serverInfo.protocol, i).then(function(V) {
                    v(V);
                  }).catch(function(V) {
                    cr.debug("create websocket failed: " + V.message), S < r ? A(S) : T(V);
                  });
                };
                function A(S, V, ne) {
                  setTimeout(function() {
                    M(++S);
                  }, t);
                }
                M(0);
              }), _.prev = 13, _.next = 16, c._connectPromise;
            case 16:
              _.next = 21;
              break;
            case 18:
              throw _.prev = 18, _.t0 = _.catch(13), _.t0;
            case 21:
              return _.prev = 21, c._connectPromise = null, _.finish(21);
            case 24:
            case "end":
              return _.stop();
          }
      }, o, this, [[13, 18, 21, 24]]);
    }))).apply(this, arguments);
  }
  function Kn(o, e, r, t) {
    return Cn.apply(this, arguments);
  }
  function Cn() {
    return (Cn = Ln(he.mark(function o(e, r, t, i) {
      var a, u, c, d;
      return he.wrap(function(_) {
        for (; ; )
          switch (_.prev = _.next) {
            case 0:
              if (a = this, u = t.eventTaskId, c = t.lastEventTaskId, u !== void 0) {
                _.next = 7;
                break;
              }
              return _.next = 6, r(e, Ei, a._requestTaskId, t);
            case 6:
              u = _.sent;
            case 7:
              u && (a._tasks[u] ? t && t.userData && t.userData.command && ((d = a._tasks[u]).ctx = t, c && ((d = a._tasks[c]).ctx = t)) : (d = { id: i.id, resolver: null, ctx: t, timedout: !1 }, a._tasks[u] = d, c && (a._tasks[c] = d)));
            case 8:
            case "end":
              return _.stop();
          }
      }, o, this);
    }))).apply(this, arguments);
  }
  function lr(o, e, r, t, i, a, u) {
    return Vn.apply(this, arguments);
  }
  function Vn() {
    return (Vn = Ln(he.mark(function o(e, r, t, i, a, u, c) {
      var d, _, v, T;
      return he.wrap(function(M) {
        for (; ; )
          switch (M.prev = M.next) {
            case 0:
              return d = this, M.prev = 1, t.client = d, M.next = 5, Jn(d, Ki, _a).call(d, a, i, u, c);
            case 5:
              if ((_ = t.taskId) != "0") {
                M.next = 12;
                break;
              }
              return d.disposed || d._ws.send(e), e = null, M.abrupt("return");
            case 12:
              if (_ !== void 0) {
                M.next = 16;
                break;
              }
              return M.next = 15, r(e, ui, null, t);
            case 15:
              _ = M.sent;
            case 16:
              return _ === void 0 && cr.debug("websocket send: task id is invalid."), (v = {}).promise = new n.Promise(function(A, S) {
                v.resolve = A, v.reject = S;
              }), T = { id: _, resolver: v, ctx: t, timedout: !1 }, d._tasks[_] = T, d._requestTaskId = _, M.next = 24, Jn(d, Lo, Kn).call(d, e, r, t, T);
            case 24:
              return d._cbToGetTaskId = r, c && (T.tmid = setTimeout(function() {
                cr.debug("ws request time out."), T.timedout = !0, T.resolver.reject("request timed out.");
              }, c)), d.disposed || d._ws.send(e), cr.debug("end to send task " + _), e = null, M.abrupt("return", v.promise);
            case 32:
              if (M.prev = 32, M.t0 = M.catch(1), _ && delete d._tasks[_], !(M.t0 instanceof mr)) {
                M.next = 39;
                break;
              }
              throw M.t0;
            case 39:
              throw new mr(M.t0.message);
            case 40:
              return M.prev = 40, e = null, M.finish(40);
            case 43:
            case "end":
              return M.stop();
          }
      }, o, this, [[1, 32, 40, 43]]);
    }))).apply(this, arguments);
  }
  function wr(o, e) {
    var r = typeof Symbol < "u" && o[Symbol.iterator] || o["@@iterator"];
    if (!r) {
      if (Array.isArray(o) || (r = function(d, _) {
        if (d) {
          if (typeof d == "string")
            return rr(d, _);
          var v = Object.prototype.toString.call(d).slice(8, -1);
          if (v === "Object" && d.constructor && (v = d.constructor.name), v === "Map" || v === "Set")
            return Array.from(d);
          if (v === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))
            return rr(d, _);
        }
      }(o)) || e && o && typeof o.length == "number") {
        r && (o = r);
        var t = 0, i = function() {
        };
        return { s: i, n: function() {
          return t >= o.length ? { done: !0 } : { done: !1, value: o[t++] };
        }, e: function(d) {
          throw d;
        }, f: i };
      }
      throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
    }
    var a, u = !0, c = !1;
    return { s: function() {
      r = r.call(o);
    }, n: function() {
      var d = r.next();
      return u = d.done, d;
    }, e: function(d) {
      c = !0, a = d;
    }, f: function() {
      try {
        u || r.return == null || r.return();
      } finally {
        if (c)
          throw a;
      }
    } };
  }
  function rr(o, e) {
    (e == null || e > o.length) && (e = o.length);
    for (var r = 0, t = new Array(e); r < e; r++)
      t[r] = o[r];
    return t;
  }
  function Dr(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function Do(o, e, r) {
    return e.has(o), r;
  }
  var Wi = /* @__PURE__ */ new WeakSet(), Ir = /* @__PURE__ */ new WeakSet(), ti = function() {
    function o() {
      Gn(this, o), Dr(this, Ir), Dr(this, Wi), ar(this, "_maxWebSocketCon", 10), ar(this, "_wsClients", []);
    }
    return zn(o, [{ key: "removeTerminatedWSClient", value: function() {
      this._wsClients = this._wsClients.filter(function(e) {
        return !e.disposed;
      });
    } }, { key: "getClient", value: function(e) {
      return e.useWS ? Do(this, Ir, lo).call(this, e) : new _n(e);
    } }, { key: "terminate", value: function() {
      var e = this._wsClients.slice();
      this._wsClients = [], e.forEach(function(r) {
        r.dispose();
      });
    } }], [{ key: "Instance", get: function() {
      return this._gClientPool || (this._gClientPool = new o()), this._gClientPool;
    } }]), o;
  }();
  function Pi(o) {
    this.removeTerminatedWSClient();
    var e, r, t, i = wr(this._wsClients);
    try {
      for (i.s(); !(e = i.n()).done; ) {
        var a = e.value;
        if (r = a.serverInfo, t = o, (r == null ? void 0 : r.port) == (t == null ? void 0 : t.port) && (r == null ? void 0 : r.protocol) == (t == null ? void 0 : t.protocol) && (r == null ? void 0 : r.server) == (t == null ? void 0 : t.server) && (r == null ? void 0 : r.ssl) == (t == null ? void 0 : t.ssl) && (r == null ? void 0 : r.useWS) == (t == null ? void 0 : t.useWS) && !a.disposed)
          return a.addRef(), a;
      }
    } catch (u) {
      i.e(u);
    } finally {
      i.f();
    }
    return null;
  }
  function lo(o) {
    var e = Do(this, Wi, Pi).call(this, o);
    return e || (this._wsClients.length < this._maxWebSocketCon ? ((e = new ro(o)).addEvent("disposed", "1", function() {
      ti.Instance.removeTerminatedWSClient();
    }), this._wsClients.push(e), e) : null);
  }
  ar(ti, "_gClientPool", null);
  var ji = function() {
    function o() {
      Gn(this, o);
    }
    return zn(o, null, [{ key: "getHttpClientForDcp", value: function(e, r) {
      var t, i = l.dcp, a = n.detect.ssl;
      if (r || !l.navInfoSync.bSSL ? (t = i.Port, a = !1) : (t = i.SSLPort, a = !0), e) {
        var u = new vi();
        return n.startsWith(e, "https://") ? (u.ssl = !0, u.server = e.substring(8)) : n.startsWith(e, "http://") ? (u.ssl = !1, u.server = e.substring(7)) : (u.ssl = n.detect.ssl, u.server = e), ti.Instance.getClient(u);
      }
      return o.getHttpClient(null, t, a);
    } }, { key: "getHttpClient", value: function(e, r, t) {
      var i = t ? "https" : "http", a = new vi(e || K(), r, t, !1, i);
      return ti.Instance.getClient(a);
    } }, { key: "getWsClient", value: function(e, r, t) {
      var i = new vi(e || K(), r, t, !0, l.dcp.wsProtocol);
      return ti.Instance.getClient(i);
    } }]), o;
  }();
  n.ClientPool = ti;
  var ho, vo = 3e3, va = parseInt(k), Qo = parseInt(re), yo = parseInt("0"), Vs = R, Us = R, ps = 20220801, _s = function() {
    if (l.dcp) {
      var o = l.dcp.dcpJSVer;
      if (n.isNumber(o))
        return o >= ps;
    }
    return !1;
  };
  if (_s())
    _s = ho, ps = ho;
  else {
    var On, ya = n.win, br = { dcpStatus: 0, dwtPort: 0, bConnected: !1, connectedResult: "", IMAXCONNECTCOUNT: 5, EnumDCP_DetectStatus: { Init: 0, Connected: 1, DownloadingZip: 2, DownloadedZip: 3, DownloadFailed: 4, CheckingManagerVer: 15, CheckingServiceVer: 16, NotInstalled: 17, CheckedService: 5, VerifyingZip: 6, VerifiedZip: 7, UpdatingService: 8, UpdateSucceed: 9, UpdateFailed: 10, UpdateSkipped: 11 } };
    l.dcp = On = { SSLPort: 18626, Port: 18625, bEnhancedMode: !1, dcpJSVer: ps, oldDWASMVerStr: "dwasm_13000404", oldDWASMVer: [13, 0, 0, "0404"], wsProtocol: "dwt_command", managerVersion: [va, Qo, yo, Vs], managerVersionMac: [va, Qo, yo, Vs], managerVersionLinux: [va, Qo, yo, Vs], serviceVersion: [1, 7, 3, Us], serviceVersionMac: [1, 7, 3, Us], serviceVersionLinux: [1, 7, 3, Us], detect: br, strSID: "", b64bit: !0, getManagerVersion: function() {
      var o = l.navInfoSync;
      if (!o.bWin) {
        if (o.bMac)
          return On.managerVersionMac;
        if (o.bLinux)
          return On.managerVersionLinux;
      }
      return On.managerVersion;
    }, getServiceVersion: function() {
      var o = l.navInfoSync;
      if (!o.bWin) {
        if (o.bMac)
          return On.serviceVersionMac;
        if (o.bLinux)
          return On.serviceVersionLinux;
      }
      return On.serviceVersion;
    }, _checkManagerVersion: function(o, e, r) {
      br.dcpStatus = br.EnumDCP_DetectStatus.CheckingManagerVer, this._postBase("VersionInfo", !1, o, e, r);
    }, _checkService: function(o, e) {
      br.dcpStatus = br.EnumDCP_DetectStatus.CheckingServiceVer, this._postBase("DSVersion", !1, ho, o, e);
    }, _checkUpdateFile: function(o, e) {
      this._postBase("CheckUpdateFile", !1, ho, o, e);
    }, _updateService: function(o, e) {
      this._postBase("UpdateService", !1, ho, o, e);
    }, _postBase: function(o, e, r, t, i) {
      var a, u;
      return a = e ? On.oldDWASMVerStr : "dwasm2_" + On._getModuleVer(), u = { id: (/* @__PURE__ */ new Date()).getTime().toString(), method: o, version: a, parameter: [] }, n.License.isLongKey(r) && (u.productKey = r), this._postBaseV2(o, e, u, vo, t, i), !0;
    }, _postBaseV2: function(o, e, r, t, i, a) {
      var u, c, d = n.stringify(r);
      if (n.isFunction(i) && n.isFunction(a))
        if (On.detect.bConnected && o == "VersionInfo" && On.detect.connectedResult != "")
          i(On.detect.connectedResult);
        else {
          u = function(v, T, M) {
            a(v, T, M);
          }, c = function(v, T, M) {
            var A;
            v && (A = n.parse(v)), !(A && "result" in A && (On.detect.bConnected || (On.detect.bConnected = !0, On.detect.dcpStatus = On.detect.EnumDCP_DetectStatus.Connected, i(A.result)))) && u(v, T, M);
          }, On.detect.bConnected = !1;
          var _ = [e ? "dcp/" + On.oldDWASMVerStr : On._getModuleName_Ver(), "/", o, "?type=1&dsver=", On.getServiceVersion().join(""), "&ts=", n.now()].join("");
          ji.getHttpClientForDcp().request(d, _, {}, t).then(c, u);
        }
    }, loadZip: function(o, e, r, t) {
      var i = e, a = r;
      i === 100 && (i = 0, a = function(u) {
        n.isString(u) && (u = u.replace('"result" : [ 0,', '"result" : [ 100,')), r(u);
      }), l.DWT.IfUpdateService ? [On._getModuleName_Ver(), "/LoadZipFromBytes?type=", i, "&dsver=", On.getServiceVersion().join(""), "&ts=", n.now()].join("") : ["dcp/", On.oldDWASMVerStr, "/LoadZipFromBytes?type=0", "&dsver=", On.getServiceVersion().join(""), "&ts=", n.now()].join(""), ji.getHttpClientForDcp().request(o, void 0, {}, 3e4).then(a, t);
    }, _getModuleName_Ver: function() {
      return On.__getModuleName() + On._getModuleVer();
    }, __getModuleName: function() {
      return "dcp/dwasm2_";
    }, _getModuleVer: function() {
      return On.getManagerVersion().join("");
    }, _compareVersion: function(o, e) {
      return !n.isLocalIP(K()) || (n.isArray(o) && o.length == 4 && n.isArray(e) && e.length >= 4 ? o[0] > e[0] || o[0] == e[0] && o[1] > e[1] || o[0] == e[0] && o[1] == e[1] && o[2] > e[2] || o[0] == e[0] && o[1] == e[1] && o[2] == e[2] && parseInt(o[3]) >= parseInt(e[3]) : !!(n.isArray(o) && o.length == 1 && n.isArray(e) && e.length >= 1) && parseInt(o[0]) >= parseInt(e[0]));
    }, _getDSUpdateZipUrl: function() {
      var o, e, r = l.navInfoSync, t = "";
      return o = "Win", r.bMac ? o = "Mac" : r.bLinux && (o = "Linux"), e = r.bFileSystem ? "" : "?t=" + n.now(), r.bWin && On.b64bit && (t = "_x64"), [l.DWT.ResourcesPath, "/dist/serviceupdate/", o, "DSUpdate_", On.getManagerVersion().join("."), t, ".zip", e].join("");
    }, getPorts: function(o, e, r) {
      var t = "GetPorts", i = "dwasm2_" + On._getModuleVer(), a = { id: n.now(), method: t, version: i, parameter: [o] };
      this._postBaseV2(t, !1, a, vo, e, r);
    }, _setDefaultValuesFromServer: function(o) {
      var e = "", r = !1, t = !1, i = {};
      if (o.length > 4 && (e = n.isString(o[2]) ? o[2] : "", r = n.isString(o[3]) && o[3] === "true", t = n.isString(o[4]) && o[4] === "64"), o.length > 5 && (i = o[5]), On.detect.connectedResult = o, On.strSID = e, On.bEnhancedMode = r, On.b64bit = t, On.objEnhancedPorts = i, r && i && i.dcp) {
        var a = i.dcp;
        On.SSLPort = a.sslPort, On.Port = a.Port;
      }
      if (r && i && i.dwt) {
        var u = i.dwt;
        u ? l.navInfoSync.bSSL ? br.dwtPort = u.sslPort : br.dwtPort = u.port : br.dwtPort = 0;
      }
    }, _checkUpdateZip: function(o, e, r, t, i) {
      var a, u, c, d, _, v, T, M = 3;
      a = function(A, S, V) {
        var ne = -1;
        if (V && (ne = V.status), ne == 0)
          return setTimeout(function() {
            On._checkService(v, T);
          }, 5e3), !0;
        var z = On._getDSUpdateZipUrl();
        return br.dcpStatus = br.EnumDCP_DetectStatus.DownloadingZip, On._sendStatusEvent(), n.fetch(z, { mode: "cors", dataType: "arraybuffer" }).then(d, u), !0;
      }, u = function(A) {
        br.dcpStatus = br.EnumDCP_DetectStatus.DownloadFailed, e && e();
        var S = "The update package can't be downloaded. The error code is " + A.httpCode + ".";
        return r && r(!0, S), On._sendStatusEvent(!0, S), setTimeout(t, 0), !0;
      }, c = function(A) {
        if (!(n.isArray(A) && A.length > 1))
          return !1;
        if (A[1] == 1)
          br.dcpStatus = br.EnumDCP_DetectStatus.VerifiedZip, On._sendStatusEvent(), br.dcpStatus = br.EnumDCP_DetectStatus.UpdatingService, On._sendStatusEvent(), setTimeout(function() {
            On._checkService(v, T);
          }, 5e3);
        else {
          var S = 0;
          if ("exception" in A && (S = A.exception), S == -2373)
            return On._funUpdateFailed(e, r, A, 200), setTimeout(t, 0), !0;
          setTimeout(a, 0);
        }
        return !0;
      }, d = function(A) {
        l.dcp.loadZip(A, 1, function(S) {
          var V, ne;
          try {
            n.isString(S) && "result" in (ne = n.parse(S.replace(/\0/g, ""))) && (V = ne.result);
          } catch {
          }
          n.isArray(V) && V.length > 2 && V[2] == 1 ? setTimeout(function() {
            On._checkService(v, T);
          }, 5e3) : (On._funUpdateFailed(e, r, S, 200), setTimeout(t, 0));
        }, _), A = null;
      }, _ = function(A, S, V) {
        var ne = -1;
        return V && (ne = V.status), ne == 0 ? setTimeout(function() {
          On._checkService(v, T);
        }, 5e3) : (On._funUpdateFailed(e, r, A, V.status), setTimeout(t, 0)), !0;
      }, v = function(A) {
        if (!(n.isArray(A) && A.length > 0 && A[0]))
          return !1;
        var S = A[0].split(",");
        return !!On._compareVersion(S, On.getServiceVersion()) && (br.bConnected = !0, e && e(), br.dcpStatus = br.EnumDCP_DetectStatus.CheckedService, On._sendStatusEvent(!1, A[0]), br.dcpStatus = br.EnumDCP_DetectStatus.UpdateSucceed, On._sendStatusEvent(), setTimeout(t, 0), !0);
      }, T = function(A, S) {
        var V = 1e3;
        return M < 3 && (V = 500), --M < 0 ? (On._funShowUpgradeDialogWhenUpdateFailed(e, r), setTimeout(t, 0), !0) : (setTimeout(function() {
          On._checkService(v, T);
        }, V), !0);
      }, o && o(), br.dcpStatus = br.EnumDCP_DetectStatus.VerifyingZip, On._sendStatusEvent(), On._checkUpdateFile(c, a);
    }, _getStatusString: function(o, e) {
      var r, t, i = "";
      return o == br.EnumDCP_DetectStatus.Init ? "Getting manager version" : o == br.EnumDCP_DetectStatus.Connected ? (e && (i = e), "Getting manager version succeeded and the version is " + i) : o == br.EnumDCP_DetectStatus.DownloadingZip ? "Downloading the update package" : o == br.EnumDCP_DetectStatus.DownloadedZip ? "Update package downloaded" : o == br.EnumDCP_DetectStatus.DownloadFailed ? (t = ".", e && e.length > 0 ? (e.slice(e.length - 1) == "." && (t = ""), r = " with the error: " + e) : r = "", "Update package failed to download" + r + t) : o == br.EnumDCP_DetectStatus.CheckingManagerVer ? "Getting manager version" : o == br.EnumDCP_DetectStatus.CheckingServiceVer ? "Getting service version" : o == br.EnumDCP_DetectStatus.NotInstalled ? "Dynamsoft Service Not Installed" : o == br.EnumDCP_DetectStatus.UpdateSkipped ? "Update skipped" : o == br.EnumDCP_DetectStatus.CheckedService ? (e && (i = e), "Getting service version succeeded and the version is " + i) : o == br.EnumDCP_DetectStatus.VerifyingZip ? "Verifying the update package" : o == br.EnumDCP_DetectStatus.VerifiedZip ? "Update package verified" : o == br.EnumDCP_DetectStatus.UpdatingService ? "Updating the service" : o == br.EnumDCP_DetectStatus.UpdateSucceed ? "Update succeeded" : o == br.EnumDCP_DetectStatus.UpdateFailed ? (t = ".", e && e.length > 0 ? (e.slice(e.length - 1) == "." && (t = ""), r = " with the error: " + e) : r = "", "The update failed" + r + t) : "";
    }, _sendStatusEvent: function(o, e) {
      var r = !!o;
      n.isFunction(ya.OnGetServiceUpdateStatus) && ya.OnGetServiceUpdateStatus(r, br.dcpStatus, On._getStatusString(br.dcpStatus, e));
    }, _getErr: function(o) {
      var e, r = "";
      try {
        n.isString(o) ? (e = o.replace(/\0/g, ""), e = n.parse(e)) : o && (e = o), "description" in e && (r = e.description);
      } catch {
      }
      return r;
    }, _funShowUpgradeDialogWhenUpdateFailed: function(o, e) {
      return br.bConnected = !0, br.dcpStatus = br.EnumDCP_DetectStatus.UpdateFailed, o && o(), e && e(), On._sendStatusEvent(!0), !0;
    }, _funUpdateFailed: function(o, e, r, t) {
      var i, a;
      return br.bConnected = !0, br.dcpStatus = br.EnumDCP_DetectStatus.UpdateFailed, o && o(), t == 200 ? (i = "The update failed.", a = On._getStatusString(br.dcpStatus, On._getErr(r))) : a = i = "The update failed. The error code is " + t, e && e(!0, i), On._sendStatusEvent(!0, a), !0;
    }, getDSPath: function(o, e) {
      var r = l.DWT.ResourcesPath, t = e;
      if (l.Lib.isString(r) && r.length > 0 ? r[r.length - 1] != "/" && (r += "/") : r = "Resources/", !t) {
        var i = l.navInfoSync;
        t = i.bWin ? ".msi" : i.bMac ? ".pkg" : l.navInfo.bArm64 ? "-arm64.deb" : l.navInfo.bMips64 ? "-mips64el.deb" : l.navInfo.bAndroid ? ".apk" : i.bLinux || i.bChromeOS || i.bHarmonyOS ? ".deb" : ".msi";
      }
      return [r, "dist/DynamsoftServiceSetup", t].join("");
    }, getLinuxHTML5DebPath: function() {
      return l.dcp.getDSPath(!1, ".deb");
    }, getLinuxHTML5RpmPath: function() {
      return l.dcp.getDSPath(!1, ".rpm");
    }, _checkManagerVersionWS: function(o, e, r) {
      var t = oi.getWsUrl(l.DWT.Host, l.navInfoSync.bSSL ? On.SSLPort : On.Port), i = { id: (/* @__PURE__ */ new Date()).getTime().toString(), method: "VersionInfo", version: "dwasm2_" + On._getModuleVer(), parameter: [] };
      return n.License.isLongKey(o) && (i.productKey = o), oi.postStringDataByWSUrl(t, n.stringify(i)).then(function(a) {
        var u = n.parse(a);
        u && "result" in u ? e(u.result) : r();
      }, r), !0;
    }, getBinaryFileInfo: function(o, e) {
      var r = "GetBinaryFileInfo", t = { id: (/* @__PURE__ */ new Date()).getTime().toString(), method: r, version: "dwasm2_" + On._getModuleVer(), parameter: [] }, i = n.stringify(t), a = function(d, _, v) {
        var T;
        d && (T = n.parse(d)), T ? o(T) : e(d, _, v);
      };
      if (l.DWT.ConnectWithSocket && l.navInfoSync.bHTML5Edition) {
        var u = oi.getWsUrl(l.DWT.Host, l.navInfoSync.bSSL ? On.SSLPort : On.Port);
        return oi.postStringDataByWSUrl(u, i).then(a, e), !0;
      }
      var c = [On._getModuleName_Ver(), "/", r, "?type=1&dsver=", On.getServiceVersion().join(""), "&ts=", n.now()].join("");
      ji.getHttpClientForDcp().request(i, c, {}, 500).then(a, e);
    } }, _s = ho, ps = ho;
  }
  var mu = function() {
    function o() {
      Gn(this, o), ar(this, "_exec", {});
    }
    return zn(o, [{ key: "fire", value: function(e, r) {
      var t, i = this;
      e = e.toLowerCase(), t = Array.prototype.slice.call(arguments, 1), n.each(i._exec[e] || [], function(a) {
        var u = a.f, c = a.c || i;
        try {
          u.apply(c, t);
        } catch (d) {
          n.error(d);
        }
      });
    } }, { key: "on", value: function(e, r, t) {
      e = e.toLowerCase(), this._exec[e] = this._exec[e] || [], this._exec[e].push({ f: r, c: t });
    } }, { key: "off", value: function(e, r, t) {
      if (e && r) {
        e = e.toLowerCase();
        for (var i = this._exec[e] || [], a = i.length - 1; a >= 0; a--)
          i[a] === r && i.splice(a, 1);
      } else
        this._exec = {};
    } }]), o;
  }(), vt = !1, Gt = !0;
  function Gs(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function Zo(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function zi(o, e, r) {
    return e.has(o), r;
  }
  var vs = "[bio]: ", js = n.win, ys = js && js.FormData, zs = /* @__PURE__ */ new WeakSet(), Hs = /* @__PURE__ */ new WeakSet(), pu = /* @__PURE__ */ new WeakSet(), ni = /* @__PURE__ */ new WeakSet(), bs = /* @__PURE__ */ new WeakSet(), ba = /* @__PURE__ */ new WeakSet(), Aa = /* @__PURE__ */ new WeakSet(), os = /* @__PURE__ */ new WeakSet(), ws = /* @__PURE__ */ new WeakSet(), as = /* @__PURE__ */ new WeakSet(), io = function(o) {
    Hr(r, o);
    var e = Gs(r);
    function r(t) {
      var i;
      return Gn(this, r), Zo(ln(i = e.call(this)), as), Zo(ln(i), ws), Zo(ln(i), os), Zo(ln(i), Aa), Zo(ln(i), ba), Zo(ln(i), bs), Zo(ln(i), ni), Zo(ln(i), pu), Zo(ln(i), Hs), Zo(ln(i), zs), ar(ln(i), "_attrs", {}), n.mix(i._attrs, { action: "", data: {}, bChunkedSendData: Gt, blockSize: 0, ajaxConfig: { value: {}, type: "post", processData: vt, cache: vt, dataType: "text", async: Gt, contentType: vt, retry: 0, headers: { "X-Requested-With": vt } }, ajax: "", formData: "", CORS: vt, bOnlyEmptyIsOK: Gt }), n.mix(i._attrs, t), zi(ln(i), zs, _u).call(ln(i)), i;
    }
    return zn(r, [{ key: "get", value: function(t) {
      return t in this._attrs ? this._attrs[t] : "";
    } }, { key: "set", value: function(t, i) {
      t in this._attrs && (this._attrs[t] = i);
    } }, { key: "uploadToServer", value: function(t) {
      var i = this;
      return i.get("blockSize") > 0 && t && t.size > 0 ? zi(i, ni, Ju).call(i, t) : zi(i, Hs, vu).call(i, t);
    } }, { key: "uploadFilesToServer", value: function(t) {
      return zi(this, pu, Ks).call(this, t);
    } }, { key: "abort", value: function() {
      var t = this, i = t.get("ajax");
      return n.isObject(i) ? (i.abort(), t.set("ajax", !1), t) : (n.log(vs + "abort(), the value of io invalid!"), t);
    } }, { key: "setRequestHeader", value: function(t, i) {
      var a = this.get("ajaxConfig");
      return a.headers[t] = i, this.set("ajaxConfig", a), i;
    } }]), r;
  }(mu);
  function _u() {
    this.get("CORS");
    var o = this.get("ajaxConfig");
    return n.mix(o, { xhrFields: { withCredentials: !1 } }), o;
  }
  function vu(o) {
    var e = this, r = e.get("ajaxConfig"), t = !0;
    zi(e, bs, Bn).call(e), o && o.size > 0 && (zi(e, ba, fo).call(e, o), n.isString(o.name) && o.name != "" ? e.name = o.name : e.name = o.fileName), n.mix(r, { data: e.get("formData"), url: e.get("action"), beforeSend: function(a, u, c) {
      a.upload.addEventListener("progress", function(d) {
        e.fire(io.event.PROGRESS, { loaded: d.loaded, total: d.total, name: e.name });
      }, !1);
    } }), n.mix(r, { method: "POST", onSuccess: function(a) {
      var u = "";
      a && (a && n.isArray(a) && a.length > 1 ? u = a[0] : n.isString(a) && (u = a)), u = zi(e, as, f).call(e, u), e.fire(io.event.SUCCESS, u);
    }, onError: function(a, u, c) {
      var d, _;
      t = !1, a && n.isArray(a) && a.length > 2 ? (d = a[1], _ = a[2]) : (d = u, _ = c), zi(e, Aa, te).call(e, _, d, o);
    } });
    var i = n.ajax(r);
    return e.set("formData", null), r.async ? (e.set("ajax", i), !0) : (e.set("ajax", !1), t);
  }
  function Ks(o) {
    var e = this, r = e.get("ajaxConfig"), t = !0, i = [];
    zi(e, bs, Bn).call(e), n.each(o, function(u) {
      u && u.size > 0 ? (zi(e, ba, fo).call(e, u), n.isString(u.name) && u.name != "" ? i.push(u.name) : i.push(u.fileName)) : i.push("");
    }), n.mix(r, { data: e.get("formData"), url: e.get("action"), beforeSend: function(u, c, d) {
      u.upload.addEventListener("progress", function(_) {
        e.fire(io.event.PROGRESS, { loaded: _.loaded, total: _.total, name: "" });
      }, !1);
    } }), n.mix(r, { method: "POST", onSuccess: function(u) {
      var c = "";
      i = [], u && (u && n.isArray(u) && u.length > 1 ? c = u[0] : n.isString(u) && (c = u)), c = zi(e, as, f).call(e, c), e.fire(io.event.SUCCESS, c);
    }, onError: function(u, c, d) {
      var _, v;
      t = !1, i = [], u && n.isArray(u) && u.length > 2 ? (_ = u[1], v = u[2]) : (_ = c, v = d), zi(e, Aa, te).call(e, v, _, o);
    } }), e.name = "";
    var a = n.ajax(r);
    return e.set("formData", null), r.async ? (e.set("ajax", a), !0) : (e.set("ajax", !1), t);
  }
  function Ju(o) {
    var e = this, r = e.get("ajaxConfig"), t = function(d, _, v) {
      var T, M;
      d && n.isArray(d) && d.length > 2 ? (T = d[1], M = d[2]) : (T = _, M = v), zi(e, Aa, te).call(e, M, T, o);
    };
    n.mix(r, { url: e.get("action") });
    var i = o.size, a = 0, u = e.get("blockSize") || i, c = o.slice || o.webkitSlice || o.mozSlice;
    (function d(_) {
      var v = c.call(o, a, a + u, o.type), T = v.size, M = o.name;
      zi(e, ws, g).call(e, a, T, i), zi(e, bs, Bn).call(e), _ && e.set("data", []), n.isString(M) && M != "" || (M = o.fileName), v.name = M, e.name = M, zi(e, ba, fo).call(e, v), n.mix(r, { data: e.get("formData") }), n.mix(r, { method: "POST", onSuccess: function(A, S, V) {
        var ne, z;
        a = zi(e, os, W).call(e, V) || a + T, e.fire(io.event.PROGRESS, { loaded: a, total: i, name: e.name }), a < i ? d(!1) : (z = "", (ne = A) && (ne && n.isArray(ne) && ne.length > 1 ? z = ne[0] : n.isString(ne) && (z = ne)), z = zi(e, as, f).call(e, z), e.fire(io.event.SUCCESS, z));
      }, onError: t }), n.ajax(r), e.set("formData", null);
    })(!0);
  }
  function Bn() {
    var o, e = this, r = e.get("data");
    if (ys)
      if (r instanceof ys)
        e.set("formData", r);
      else {
        o = new ys();
        try {
          n.each(r, function(t, i) {
            o.append(i, t);
          }), e.set("formData", o);
        } catch {
          n.log(vs + "something error when reset FormData.");
        }
      }
    else
      n.log(vs + "the browser does not support ajax.");
  }
  function fo(o) {
    if (!n.isObject(o))
      return n.log(vs + "_addFileData(), file parameter invalid!"), !1;
    var e = this.get("formData"), r = o.name, t = o.remoteFilename;
    return t || (t = "RemoteFile"), e.append(t, o, r), this.set("formData", e), e;
  }
  function te(o, e, r) {
    var t = io.status.ERROR, i = { status: t, msg: e, response: !1, name: this.name };
    o && (i.httpStatus = o.status, i.response = o.responseText), this.fire(t, i);
  }
  function W(o) {
    var e = o.getResponseHeader("Range"), r = e && e.split("-"), t = r && r.length > 1 && parseInt(r[1], 10);
    return t && t + 1;
  }
  function g(o, e, r) {
    var t = "bytes " + o + "-" + (o + e - 1) + "/" + r;
    return this.get("ajaxConfig").headers["Content-Range"] = t, t;
  }
  function f(o) {
    var e, r, t, i = !1, a = this.name, u = io.status.SUCCESS, c = io.event.ERROR;
    if (n.log("Response from server: " + o), !this.get("bOnlyEmptyIsOK"))
      return { status: u, msg: !1, json: !1, response: o, name: a };
    if (n.isUndefined(o) || o === "")
      e = { status: u, msg: !1, json: !1, response: "", name: a };
    else if (n.isString(o)) {
      try {
        for (r = 0; r < o.length && !(r > 10); r++) {
          if ((t = o[r]) == "{") {
            i = !0;
            break;
          }
          if (t != " " && t != "\r" && t != `
` && t != "	")
            break;
        }
        if (i) {
          var d = n.parse(o);
          e = d.status == 1 ? { status: u, msg: !1, json: d, response: o, name: a } : { status: c, msg: !1, json: d, response: o, name: a };
        }
      } catch (v) {
        i = !1, n.log(v);
      }
      if (!i) {
        var _ = String(o);
        e = (_ = _.replace(/( |\t|\r|\n)/g, "")) == "" ? { status: u, msg: !1, json: !1, response: o, name: a } : { status: c, msg: !1, json: !1, response: o, name: a };
      }
    } else
      e = { status: u, msg: !1, json: !1, response: "", name: a };
    return e;
  }
  function b(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function m(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function I(o, e, r) {
    return e.has(o), r;
  }
  ar(io, "event", { SUCCESS: "success", ERROR: "error", PROGRESS: "progress" }), ar(io, "status", { SUCCESS: "success", ERROR: "error" });
  var x = /* @__PURE__ */ new WeakSet(), D = /* @__PURE__ */ new WeakSet(), B = /* @__PURE__ */ new WeakSet(), X = /* @__PURE__ */ new WeakSet(), Q = function(o) {
    Hr(r, o);
    var e = b(r);
    function r(t) {
      var i;
      return Gn(this, r), m(ln(i = e.call(this)), X), m(ln(i), B), m(ln(i), D), m(ln(i), x), i._attrs = { action: "", retry: 0, timeout: 0, CORS: vt, async: Gt, dataType: "text", fileStatus: "", uploadType: vt, data: {}, bOnlyEmptyIsOK: Gt }, n.mix(i._attrs, t), I(ln(i), D, ke).call(ln(i)), i;
    }
    return zn(r, [{ key: "get", value: function(t) {
      return t in this._attrs ? this._attrs[t] : "";
    } }, { key: "set", value: function(t, i) {
      t in this._attrs && (this._attrs[t] = i);
    } }, { key: "upload", value: function(t) {
      var i = this, a = i.get("uploadType");
      if (t) {
        if (n.isArray(t)) {
          var u = t;
          return a.uploadFilesToServer(u);
        }
        if (n.isObject(t)) {
          var c = t;
          return c.size ? (c.id || (c.id = n.guid("file-")), c.size && (c.textSize = I(i, x, ve).call(i, c.size))) : c.size = 0, a.uploadToServer(c);
        }
      }
      return a.uploadToServer(t);
    } }, { key: "abort", value: function() {
      return this.get("uploadType").abort(), !0;
    } }, { key: "setRequestHeader", value: function(t, i) {
      this.get("uploadType").setRequestHeader(t, i);
    } }]), r;
  }(mu);
  function ve(o) {
    var e = -1;
    do
      o /= 1024, e++;
    while (o > 99 && e < 4);
    return Math.max(o, 0.1).toFixed(1) + ["KB", "MB", "GB", "TB"][e];
  }
  function ke() {
    var o = this, e = { action: o.get("action"), data: o.get("data"), CORS: o.get("CORS"), bOnlyEmptyIsOK: o.get("bOnlyEmptyIsOK") }, r = new io(e), t = r.get("ajaxConfig");
    return t && (t.dataType = o.get("dataType"), t.async = o.get("async"), t.retry = o.get("retry")), r.on(io.event.SUCCESS, I(o, X, et), o), r.on(io.event.ERROR, I(o, X, et), o), r.on(io.event.PROGRESS, I(o, B, dt), o), o.set("uploadType", r), r;
  }
  function dt(o) {
    this.fire(Q.event.PROGRESS, o);
  }
  function et(o) {
    var e = this, r = o.status, t = o.msg, i = e.get("file");
    n.mix(o, { file: i }), r === "success" ? e.fire(Q.event.SUCCESS, o) : (t === !1 || (t === "abort" ? n.mix(o, { canceled: !0 }) : t === "timeout" && n.mix(o, { timeout: !0 })), e.fire(Q.event.ERROR, o));
  }
  ar(Q, "event", { SUCCESS: "success", ERROR: "error", PROGRESS: "progress" }), l.DWT.__innerCheckCertDate = function(o) {
    var e = Date.parse(o + "T00:00:00");
    o == "" || isNaN(e) || l.DWT.CheckCertExpired && (/* @__PURE__ */ new Date()).getTime() >= e - 864e5 * l.DWT.CertificateConfig.UpdateDaysBeforeExpired && (n.isFunction(l.OnCertExpired) && l.OnCertExpired(o), setTimeout(function() {
      l.DWT.UpdateCert(l.DWT.CertificateConfig.URL, l.OnUpdateCertSuccess, l.OnUpdateCertFailure);
    }, 5e3));
  }, l.DWT.__innerUpdateCert = function(o, e, r, t) {
    var i = l.dcp, a = [i._getModuleName_Ver(), "/LoadZipFromBytes?type=", 2, "&dsver=", i.getServiceVersion().join(""), "&ts=", n.now()].join("");
    ji.getHttpClientForDcp(null, e).request(o, a, {}, 3e4).then(r, function() {
      n.isFunction(t) && t();
    });
  }, l.DWT.__innerReboot = function(o, e) {
    var r = [l.dcp._getModuleName_Ver(), "/admin?ts=", n.now()].join(""), t = '{"id":"' + (/* @__PURE__ */ new Date()).getTime().toString() + '","method":"Reboot","parameter":[],"version":"dwasm2_' + l.dcp._getModuleVer() + '"}';
    ji.getHttpClientForDcp().request(t, r, {}, 3e4).then(o, e);
  }, l.DWT.UpdateCert = function(o, e, r) {
    n.isString(o) && o != "" ? n.fetch(o, { mode: "cors", dataType: "arraybuffer" }).then(function(t) {
      l.DWT.__innerUpdateCert(t, !1, function() {
        l.DWT.CheckCertExpired = !1, n.isFunction(e) && e();
      }, function() {
        l.navInfoSync.bSSL ? l.DWT.__innerUpdateCert(t, !0, e, r) : n.isFunction(r) && r();
      }), t = null;
    }, r) : n.isFunction(r) && r();
  };
  var $e = { Errors: { FilePathSyntaxIncorrect: function(o) {
    o._errorCode = -3123, o._errorString = "The filename, directory name, or volume label syntax is incorrect.";
  } }, checkFilePath: function(o, e) {
    return n.isString(e) && e.length != 0 ? n.startsWith(e, "http://") || n.startsWith(e, "https://") || n.startsWith(e, "ftp://") ? (n.File.Errors.FilePathSyntaxIncorrect(o), vt) : Gt : (n.Errors.InvalidFile(o), vt);
  } };
  $e.checkFolder = $e.checkFilePath, n.File = $e, n.showProgress = function() {
  }, n.closeProgress = function() {
  }, String.prototype.startsWith || (String.prototype.startsWith = function(o) {
    return this.indexOf(o) == 0;
  });
  var gt = function(o) {
    var e, r = o, t = r._license || "", i = JSON.parse(JSON.stringify(r._licenseServer)), a = r._sessionPassword, u = 0;
    if (t.startsWith("t") || t.startsWith("f"))
      u = 0;
    else if (t.length === 0 || t.startsWith("P") || t.startsWith("L") || t.startsWith("Y") || t.startsWith("A"))
      u = 1;
    else {
      u = 2;
      var c = t.indexOf(":");
      if (c != -1 && (t = t.substring(c + 1)), t.startsWith("DLS2")) {
        var d;
        try {
          var _ = t.substring(4);
          _ = G.Lib.atob(_), d = JSON.parse(_);
        } catch {
          throw new Error("Format Error: The license string you specified is invalid, please check to make sure it is correct.");
        }
        if (typeof (t = d.handshakeCode ? d.handshakeCode : d.organizationID ? d.organizationID : "") == "number" && (t = JSON.stringify(t)), i.length === 0) {
          var v = [];
          d.mainServerURL && (v[0] = d.mainServerURL), d.standbyServerURL && (v[1] = d.standbyServerURL), i = function(T) {
            if (T == null)
              T = [];
            else {
              T instanceof Array || (T = [T]);
              for (var M = 0; M < T.length; ++M) {
                if (document && document.createElement) {
                  var A = document.createElement("a");
                  A.href = T[M], T[M] = A.href;
                }
                T[M].lastIndexOf("/") != T[M].length - 1 && (T[M] += "/");
              }
            }
            return T;
          }(v);
        }
        !a && d.sessionPassword && (a = d.sessionPassword), e = d.remark;
      }
      (t === "200001" || t.startsWith("200001-")) && (i && i.length || (t = "")), t || (u = 1);
    }
    return u === 1 && (t = ""), { lt: u, l: t, ls: i, sp: a, rmk: e };
  };
  function hn() {
    return !!n.wakeLock.getWakeLock();
  }
  function Tt(o) {
    return Dn.apply(this, arguments);
  }
  function Dn() {
    return (Dn = Ln(he.mark(function o(e) {
      var r;
      return he.wrap(function(t) {
        for (; ; )
          switch (t.prev = t.next) {
            case 0:
              if (r = n.wakeLock.getWakeLock(), !e) {
                t.next = 7;
                break;
              }
              if (r != null) {
                t.next = 5;
                break;
              }
              return t.next = 5, n.wakeLock.toggle();
            case 5:
              t.next = 10;
              break;
            case 7:
              if (!r) {
                t.next = 10;
                break;
              }
              return t.next = 10, n.wakeLock.toggle();
            case 10:
            case "end":
              return t.stop();
          }
      }, o);
    }))).apply(this, arguments);
  }
  function Xn(o) {
    return o == "" || !n.isString(o) && !n.isNumber(o) ? vt : Gt;
  }
  function vn(o) {
    return o && !n.isString(o) ? Gt : vt;
  }
  function Nn(o, e, r, t) {
    n.isFunction(o) && setTimeout(function() {
      o(e, r, t);
    }, 10);
  }
  function ir(o) {
    if (l.WasmEnv && !l.WasmEnv.wasmLoad)
      try {
        l.WasmEnv.resourceDir = l.DWT.ResourcesPath + "/src/", l.WasmEnv.logLevel = l.DWT.Debug ? "logDebug" : "", l.WasmEnv.load(o.ar, !0, o.cu), l.WasmEnv.wasmLoad = !0;
      } catch (e) {
        e && n.error(e.message);
      }
  }
  function kn() {
    if (l.WasmEnv && !l.WasmEnv.wasmLoad)
      try {
        l.WasmEnv.resourceDir = l.DWT.ResourcesPath + "/src/", l.WasmEnv.logLevel = l.DWT.Debug ? "logDebug" : "", l.WasmEnv.load(n.product.refProductKey), l.WasmEnv.wasmLoad = !0;
      } catch (o) {
        o && n.error(o.message);
      }
  }
  var En = parseInt(k), Un = parseInt(re), Ai = parseInt("0"), Ar = "ddm/", Qr = "ddm_" + [En, Un, Ai, R].join("");
  function qi() {
    return Ar + Qr;
  }
  function oo(o) {
    return ko.apply(this, arguments);
  }
  function ko() {
    return (ko = Ln(he.mark(function o(e) {
      var r, t, i;
      return he.wrap(function(a) {
        for (; ; )
          switch (a.prev = a.next) {
            case 0:
              return r = [qi(), "/VersionInfo?", "ts=", n.now()].join(""), t = ['{"id":"', n.guid(), '","method":"VersionInfo"}'].join(""), i = ji.getHttpClientForDcp(e), a.abrupt("return", i.request(t, r, { dataType: "json" }, 3e3));
            case 4:
            case "end":
              return a.stop();
          }
      }, o);
    }))).apply(this, arguments);
  }
  var xo = n.isString, wa = n.isArray, Ia = n.each;
  function Ra(o, e) {
    if (xo(e))
      o.push('"'), o.push(e), o.push('"');
    else if (wa(e)) {
      var r = Gt;
      o.push("["), Ia(e, function(t) {
        r ? r = vt : o.push(","), Ra(o, t);
      }), o.push("]");
    } else
      e === void 0 ? o.push('""') : o.push(e);
  }
  function Kr() {
    for (var o = arguments.length, e = new Array(o), r = 0; r < o; r++)
      e[r] = arguments[r];
    return e;
  }
  function zt() {
    for (var o = [], e = arguments.length, r = new Array(e), t = 0; t < e; t++)
      r[t] = arguments[t];
    if (r.length > 0)
      if (r.length === 1) {
        var i = r[0];
        o.push("["), Ra(o, i), o.push("]");
      } else if (r.length === 2) {
        var a = r[0], u = r[1];
        o.push("["), Ra(o, a), o.push(","), Ra(o, u), o.push("]");
      } else
        Ra(o, Array.prototype.slice.call(r));
    return o.join("");
  }
  function ja(o) {
    var e, r = l.DWT.EnumDWT_ImageType, t = o;
    return (o instanceof ArrayBuffer || o instanceof Array) && (t = new Uint8Array(o.slice(0, 12))), e = function(i) {
      return i[0] == 37 && i[1] == 80 && i[2] == 68 && i[3] == 70;
    }(t) ? r.IT_PDF : function(i) {
      return i[0] == 73 && i[1] == 73 && i[2] == 42 && i[3] == 0 || i[0] == 77 && i[1] == 77 && i[2] == 0 && i[3] == 42;
    }(t) ? r.IT_TIF : function(i) {
      return i[0] == 137 && i[1] == 80 && i[2] == 78 && i[3] == 71;
    }(t) ? r.IT_PNG : function(i) {
      return i[0] == 255 && i[1] == 216;
    }(t) ? r.IT_JPG : function(i) {
      return i[0] == 66 && i[1] == 77;
    }(t) ? r.IT_BMP : function(i) {
      return i[0] == 0 && i[1] == 0 && i[2] == 0 && i[3] == 12 && i[4] == 106 && i[5] == 80 && i[6] == 32 && i[7] == 32 || i[0] == 255 && i[1] == 79 && i[2] == 255 && i[3] == 81;
    }(t) ? r.IT_J2K : r.IT_PNG, e;
  }
  var oa = zn(function o() {
    Gn(this, o);
  }), ki = zn(function o() {
    Gn(this, o);
  });
  function yu(o) {
    var e = new ki();
    return e.server = o.server, o.attrs && (e.attrs = n.clone(o.attrs)), e;
  }
  var on = { notSupportProperty: function(o) {
  }, notSupportMethod: function(o) {
  }, cformat: function(o, e) {
    if (n.isString(o)) {
      var r, t, i, a, u, c = o.indexOf("<%");
      if (c == -1 || (t = o.substring(0, c), !(c + 2 < (r = o.indexOf(">", t)))))
        return o;
      i = o.substring(c + 1, r), a = o.substring(r + 1);
      try {
        u = n.sprintf(i, e);
      } catch {
        u = "";
      }
      return [t, u, a].join("");
    }
    return "";
  }, refreshImageAfterInvokeFun: function(o, e, r) {
    return r == 1;
  }, loadHttpBlob: function(o, e, r, t, i, a, u, c) {
    var d, _, v = vt;
    if (_ = { method: e, dataType: "blob" }, c && (_.headers = c), o.HTTPUserName != "" && (_.username = o.HTTPUserName, _.password = o.HTTPPassword), t) {
      if ((l.Lib.env.bMobile || l.navInfoSync.bChrome || l.navInfoSync.bFirefox) && e == "get")
        return _.fetchRaw = !0, fetch(r, _).then(function(S) {
          var V;
          if (!S.ok)
            throw { httpCode: S.status, errorString: S.statusText };
          var ne = S.headers.get("Content-Length"), z = 0, ue = S == null || (V = S.body) === null || V === void 0 ? void 0 : V.getReader(), xe = new ReadableStream({ start: function(Qe) {
            setTimeout(function Ze() {
              ue == null || ue.read().then(function(Ct) {
                Ct.done ? Qe.close() : (z += Ct.value.length, u({ loaded: z, total: ne }), Qe.enqueue(Ct.value), setTimeout(Ze, 0));
              });
            }, 0);
          } }), Fe = S.headers.get("Content-Type");
          return Fe && Fe != "" || (Fe = "application/octet-stream"), new Response(xe, { headers: { "Content-Type": Fe } });
        }).then(function(S) {
          return S.blob();
        }).then(function(S) {
          i(S), S = null;
        }, function(S) {
          S && S.httpCode ? n.Errors.HttpDownloadError(o, !1, S.errorString, S.httpCode) : n.Errors.HttpDownloadUrlError(o), n.isFunction(a) && a({ code: o._errorCode, message: o._getErrorString() });
        }), !0;
      _.onSuccess = i, n.isFunction(u) && (_.beforeSend = function(S) {
        S.addEventListener("progress", function(V) {
          !l.navInfoSync.bSafari && V && (delete V.totalSize, delete V.position), u(V);
        }, vt);
      }), v = Gt;
    } else
      l.navInfoSync.bIE ? (_.dataType = "arraybuffer", _.onSuccess = function(S, V, ne) {
        var z, ue;
        (z = S || ne.responseData) && (ue = new Uint8Array(z)), o._errorCode = 0, o._errorString = "", i(ue), ue = null, v = Gt;
      }) : (_.dataType = "text", _.contentType = "text/plain; charset=x-user-defined", _.mimeType = "text/plain; charset=x-user-defined", _.onSuccess = function(S, V, ne) {
        var z, ue, xe;
        ue = (z = ne.responseText).length, xe = new Uint8Array(ue);
        for (var Fe = 0; Fe < ue; Fe++)
          xe[Fe] = z.charCodeAt(Fe);
        o._errorCode = 0, o._errorString = "", i(xe), xe = null, v = Gt;
      }), _.headers ? n.mix(_.headers, { "X-Requested-With": vt }) : _.headers = { "X-Requested-With": vt };
    if (e == "post") {
      var T, M = o.httpFormFields;
      if (M)
        try {
          T = new FormData(), n.each(M, function(S, V) {
            if (S instanceof Blob) {
              var ne = S.name;
              T.append(V, S, ne);
            } else
              T.append(V, S);
          }), n.mix(_, { data: T, processData: vt, contentType: vt });
        } catch {
        }
    }
    d = function(S, V, ne) {
      var z, ue;
      S && n.isArray(S) && S.length > 2 ? (z = S[1], ue = S[2]) : (z = V, ue = ne), ue.state == 2 && ue.status == 0 ? ue.statusText === "abort" ? n.Errors.HttpDownloadError(o, !0) : n.Errors.HttpDownloadUrlError(o) : n.Errors.HttpDownloadError(o, vt, z, ue.status), n.isFunction(a) && a();
    }, _.url = r, _.async = t, _.onError = d, _.onComplete = function() {
      n.bio = vt;
    };
    var A = n.ajax(_);
    return t && (n.bio = A), v;
  }, combineUrl: function(o, e, r) {
    var t = [], i = e;
    return i === void 0 || r === void 0 ? void 0 : (n.isString(i) || (i = String(e)), i.indexOf("http://") == 0 ? (i = i.replace("http://", ""), t.push("http://")) : i.indexOf("https://") == 0 ? (i = i.replace("https://", ""), t.push("https://")) : (i.indexOf("//") == 0 && (i = i.replace("//", "")), o.IfSSL ? t.push("https://") : t.push("http://")), t.push(i), i.indexOf(":") < 0 && (o.HTTPPort == "" && (o.HTTPPort = n.detect.ssl ? 443 : 80), (!n.detect.ssl && o.HTTPPort != 80 || n.detect.ssl && o.HTTPPort != 443) && (t.push(":"), t.push(o.HTTPPort))), r.indexOf("/") !== 0 && t.push("/"), t.push(r), t.join(""));
  }, httpPostUpload: function(o, e, r, t, i, a, u, c, d, _, v, T) {
    if (!r || r.size <= 0)
      return n.Errors.UploadFileCannotEmpty(o), n.isFunction(T) && T(), vt;
    var M, A, S = o.MaxUploadImageSize, V = r.size, ne = r.type;
    if (V > S && S != -1)
      return n.Errors.UploadExceededMaxSize(o), n.isFunction(T) && T(), vt;
    if (ne === "" || ne && ne != o.HttpContentTypeFieldValue) {
      var z = r.slice || r.webkitSlice || r.mozSlice, ue = r.name;
      n.isString(ue) && ue != "" || (ue = r.fileName), (M = z.call(r, 0, V, o.HttpContentTypeFieldValue)).name = ue;
    } else
      M = r;
    return r = null, M.remoteFilename = o.__remoteFilename, A = this.httpUploadByBIO(o, e, M, i, t, a, u, c, d, _, v, T), M = null, A;
  }, httpPostUploadFiles: function(o, e, r, t, i, a, u, c, d, _, v) {
    var T, M, A = o.MaxUploadImageSize, S = 0;
    if (!r || !n.isArray(r) || r.length <= 0)
      return n.Errors.UploadFileCannotEmpty(o), n.isFunction(v) && v(), vt;
    for (T = 0; T < r.length; T++) {
      var V = r[T];
      if (!V || V.size <= 0)
        return n.Errors.UploadFileCannotEmpty(o), n.isFunction(v) && v(), vt;
      var ne = V.size, z = V.type;
      if (S += ne, z === "" || z && z != o.HttpContentTypeFieldValue) {
        var ue = V.slice || V.webkitSlice || V.mozSlice, xe = V.name, Fe = ue.call(V, 0, ne, o.HttpContentTypeFieldValue);
        n.isString(xe) && xe != "" || (xe = V.fileName), Fe.name = this.cformat(xe, T + 1), r[T] = Fe;
      }
      r[T].remoteFilename = this.cformat(o.__remoteFilename, T + 1), V = null;
    }
    if (S > A && A != -1)
      return n.Errors.UploadExceededMaxSize(o), n.isFunction(v) && v(), vt;
    for (M = this.httpUploadByBIO(o, e, r, i, t, a, u, c, d, !1, _, v), T = 0; T < r.length; T++)
      r[T] = null;
    return r = null, M;
  }, httpPostUploadString: function(o, e, r, t, i, a, u, c, d, _, v) {
    var T, M, A;
    return r == "" ? (n.Errors.UploadFileCannotEmpty(o), n.isFunction(v) && v(), vt) : (M = o.MaxUploadImageSize, r.length > M && M != -1 ? (n.Errors.UploadExceededMaxSize(o), n.isFunction(v) && v(), vt) : ((T = new Blob([r], { type: "text/plain" })).name = t, A = this.httpUploadByBIO(o, e, T, i, Gt, a, u, c, d, !1, _, v), T = null, A));
  }, httpUploadByBIO: function(o, e, r, t, i, a, u, c, d, _, v, T) {
    var M, A, S, V;
    if (S = o.httpFormFields, V = new FormData(), n.each(S, function(z, ue) {
      if (z instanceof Blob) {
        var xe = z.name;
        V.append(ue, z, xe);
      } else
        V.append(ue, z);
    }), n.bio = new n.BIO({ action: e, data: V, async: i, retry: c, bOnlyEmptyIsOK: d }), (M = n.bio.get("uploadType")) && ((A = M.get("ajaxConfig")) && A.headers && a && n.mix(A.headers, a), t >= 0 && M.set("blockSize", t), o.__withCredentials && n.mix(A.xhrFields, { withCredentials: !0 })), o.__HTTPPostResponseString = vt, n.bio.on(n.BIO.event.SUCCESS, function(z) {
      if (n.bio = vt, z && n.isString(z.response) ? o.__HTTPPostResponseString = z.response : o.__HTTPPostResponseString = "", n.isFunction(o.__OnHttpUploadStatus)) {
        var ue;
        ue = { fileName: z.name, percentage: 100, statusCode: 200, responseString: o.__HTTPPostResponseString }, o.__OnHttpUploadStatus(ue);
      }
      n.isFunction(v) && v(o.__HTTPPostResponseString);
    }), n.bio.on(n.BIO.event.ERROR, function(z) {
      var ue = z && z.canceled;
      z && z.timeout;
      var xe, Fe = vt, Qe = 0;
      n.bio = vt, z && n.isString(z.response) ? o.__HTTPPostResponseString = z.response : o.__HTTPPostResponseString = "", ue || (z && z.msg && (Fe = z.msg), z && z.httpStatus && (Qe = z.httpStatus)), n.Errors.UploadError(o, ue, Fe, Qe), n.isFunction(o.__OnHttpUploadStatus) && (xe = { fileName: z.name, percentage: 100, statusCode: Qe, responseString: o.__HTTPPostResponseString }, o.__OnHttpUploadStatus(xe)), n.isFunction(T) && T(o.__HTTPPostResponseString);
    }), (u || n.isFunction(o.__OnHttpUploadStatus)) && (n.bio.on(n.BIO.event.PROGRESS, function(z) {
      !l.navInfoSync.bSafari && z && (delete z.totalSize, delete z.position);
      var ue = z.total === 0 ? 100 : Math.round(100 * z.loaded / z.total);
      if ([z.loaded, " / ", z.total].join(""), n.isFunction(o.__OnHttpUploadStatus)) {
        var xe;
        ue > 99 && (ue = 99), xe = { fileName: z.name, percentage: ue, statusCode: 0, responseString: "" }, o.__OnHttpUploadStatus(xe);
      }
      u && o._OnPercentDone([0, ue, "", "http", z.name]);
    }), u && o._OnPercentDone([0, -1, l.MSG.Uploading, "http"]), n.isFunction(o.__OnHttpUploadStatus))) {
      var ne = "";
      n.isArray(r) && r.length > 0 || (r && r.name && r.name != "" ? ne = r.name : r && r.fileName && (ne = r.fileName)), o.__OnHttpUploadStatus({ fileName: ne, percentage: 0, statusCode: 0, responseString: "" });
    }
    return _ && _.bCancel ? (_.st = 2, n.isFunction(T) && T(!1), !1) : n.bio.upload(r);
  }, httpPutImage: function(o, e, r, t, i, a, u) {
    var c = Gt, d = { method: "PUT", url: e, hasContent: Gt, processData: vt, async: t, data: r, onSuccess: i, onError: function() {
      c = vt, n.isFunction(a) && a();
    }, onComplete: function() {
      n.bio = vt;
    }, beforeSend: function(_) {
      n.isFunction(u) && _.upload.addEventListener("progress", function(v) {
        !l.navInfoSync.bSafari && v && (delete v.totalSize, delete v.position), u(v);
      }, vt);
    } };
    return o.HTTPUserName != "" && (d.username = o.HTTPUserName, d.password = o.HTTPPassword), t || n.mix(d, { headers: { "X-Requested-With": vt } }), n.bio = n.ajax(d), c;
  }, EVENTS: ["OnPostAllTransfers", "OnPostTransfer", "OnPostLoad", "OnPreTransfer", "OnPreAllTransfers", "OnResult", "OnTransferCancelled", "OnTransferError", "OnSourceUIClose", "OnGetFilePath", "OnPercentDone", "OnPostTransferAsync", "OnPreAllTransfersAsync", "OnRemoteScanStatusAsync", "OnConsumed"], SEND_BACK_EVENTS: ["OnPreAllTransfers", "OnPreTransfer", "OnPostTransfer", "OnGetFilePath", "OnPostLoad"], handleOnBitmapChangedEvent: function(o, e, r) {
    var t = "_OnBitmapChanged";
    return n.isFunction(o[t]) && o[t](e.result, e, r), vt;
  }, addImageFileExt: function(o, e) {
    var r, t = o.substring(o.lastIndexOf(".")).toLowerCase();
    return t == ".bmp" || t == ".dib" || t == ".jpg" || t == ".jpe" || t == ".jpeg" || t == ".jfif" || t == ".tif" || t == ".tiff" || t == ".png" || t == ".pdf" ? o : (e == l.DWT.EnumDWT_ImageType.IT_BMP ? r = [o, ".bmp"].join("") : e == l.DWT.EnumDWT_ImageType.IT_JPG ? r = [o, ".jpg"].join("") : e == l.DWT.EnumDWT_ImageType.IT_PNG ? r = [o, ".png"].join("") : e == l.DWT.EnumDWT_ImageType.IT_TIF ? r = [o, ".tif"].join("") : e == l.DWT.EnumDWT_ImageType.IT_PDF ? r = [o, ".pdf"].join("") : e == l.DWT.EnumDWT_ImageType.IT_J2K && (r = [o, ".jp2"].join("")), r);
  }, GetImageInfo: function(o, e) {
    var r = o._ImgManager.convertClientIndexToServerId(e);
    return r == -1 ? (n.Errors.IndexOutOfRange(o), !1) : o._innerFun("GetImageInfo", zt(r));
  }, getBlobTypeByImageType: function(o) {
    var e = "application/octet-stream";
    switch (o) {
      case 0:
        e = "image/bmp";
        break;
      case 1:
        e = "image/jpeg";
        break;
      case 2:
        e = "image/tiff";
        break;
      case 3:
        e = "image/png";
        break;
      case 4:
        e = "application/pdf";
        break;
      case 14:
        e = "image/jp2";
    }
    return e;
  }, callbacks: [], pushCallback: function(o, e, r) {
    var t = { method: o, callback: e, ticks: r };
    on.callbacks.push(t);
  }, refreshUIRef: 0, isServerInvalid: function(o) {
    var e = o, r = !1, t = !1;
    return (o._isTwainServiceType() || o._isWasmWithScan()) && (r = !e._bReady || e._wsClient === null, t = e.__bMustUpgradeService), r ? n.Errors.Server_Invalid(e) : t ? n.Errors.MustUpgradeService(e) : e._destroy && n.Errors.Destroyed(e), r || t || e._errorCode == -2208 || e._destroy;
  }, replaceLocalFilename: function(o) {
    var e;
    return o === void 0 ? "" : (e = (o = String(o)).replace(/\\/g, "\\\\"), l.navInfoSync.bFileSystem && (e = decodeURI(e)), e);
  }, getImageType: function(o) {
    if (o === void 0 || o.length < 4)
      return -1;
    var e = o.lastIndexOf(".");
    if (e === -1)
      return -1;
    var r = o.slice(e).toLowerCase();
    return r === ".bmp" || r === ".dib" ? l.DWT.EnumDWT_ImageType.IT_BMP : r === ".jpg" || r === ".jpe" || r === ".jpeg" || r === ".jfif" ? l.DWT.EnumDWT_ImageType.IT_JPG : r === ".tif" || r === ".tiff" ? l.DWT.EnumDWT_ImageType.IT_TIF : r === ".png" ? l.DWT.EnumDWT_ImageType.IT_PNG : r === ".pdf" ? l.DWT.EnumDWT_ImageType.IT_PDF : r === ".jp2" || r === ".j2k" || r === ".j2c" ? l.DWT.EnumDWT_ImageType.IT_J2K : -1;
  }, makeParams: zt, showMask: fr, hideMask: Yn };
  n.html5.Funs = on;
  var Sa = 0;
  function fr(o, e, r) {
    if (n.log("showMask:" + o + "--" + Sa), Sa == 0)
      if (e) {
        n.detect.showMask(e);
        var t = n.mask.dlgMask;
        if (t) {
          t.style.zIndex = "9990";
          var i = n.one(".dynamsoft-backdrop", t.parentNode);
          i && i.length > 0 && (i[0].style.zIndex = "9990");
        }
      } else
        n.detect.showMask(r || {});
    Sa++;
  }
  function Yn(o) {
    n.log("hideMask:" + o + "--" + Sa), Sa > 1 ? Sa-- : Sa <= 1 && (n.detect.hideMask(), Sa = 0);
  }
  function bu(o, e, r, t) {
    var i = 0;
    return o == Ge && (i = Rn), o == bn ? i = Ut : o == lt ? r ? i = rt : t ? i = Zt : e && (i = Rn) : o == Lt && (r ? i = Rn | rt : t ? i = Rn | Zt : e && (i = Rn | Ut)), i;
  }
  var wu = ["OnPreAllTransfers", "OnPreTransfer", "OnPostTransfer", "OnPostTransferAsync"];
  function Iu(o, e) {
    for (var r = o._ImgManager.GetAllServerIdList(), t = 0; t < r.length; t++)
      e.push(r[t]);
  }
  function Xu(o, e) {
    return o._ImgManager.count() != 0 || (n.Errors.NoImage(o), n.isFunction(e) && e(o._errorCode, o._getErrorString()), !1);
  }
  function za(o, e, r) {
    return !!Xu(o, r) && (!(isNaN(e) || !n.isNumber(e) || e < 0 || e >= o._ImgManager.count()) || (n.Errors.IndexOutOfRange(o), n.isFunction(r) && r(o._errorCode, o._getErrorString()), !1));
  }
  function yf(o) {
    if (o.ProductName) {
      var e = o.ProductName;
      o.ProductName = n.base64.decode(e);
    }
    if (o.ProductFamily) {
      var r = o.ProductFamily;
      o.ProductFamily = n.base64.decode(r);
    }
    if (o.Manufacturer) {
      var t = o.Manufacturer;
      o.Manufacturer = n.base64.decode(t);
    }
    if (o.Version && o.Version.Info) {
      var i = o.Version.Info;
      o.Version.Info = n.base64.decode(i);
    }
  }
  function Is(o) {
    var e, r, t, i = [];
    return o._ImgManager.count() <= 0 || ((r = o._ImgManager.getCurrentImageIndex()) >= 0 && (e = o._ImgManager.convertClientIndexToServerId(r)), t = o._ImgManager.getSelectedClientIndexArray(), n.isArray(t) && n.each(t, function(a) {
      var u = o._ImgManager.convertClientIndexToServerId(a);
      u != -1 && i.push(u);
    }), e != -1 && i.length == 0 && i.push(e)), i;
  }
  function $i(o, e, r) {
    return o._resetErr(), !!o._isValid() && (isNaN(e) ? (n.Errors.InvalidIndex(o), n.isFunction(r) && r(o._errorCode, o.ErrorString), vt) : e < 0 || e >= o._ImgManager.count() ? (n.Errors.IndexOutOfRange(o), n.isFunction(r) && r(o._errorCode, o.ErrorString), vt) : Gt);
  }
  function Su(o) {
    return o == Ne || o == bt || o == Ut || o == Zt || o == rt;
  }
  function Tu(o) {
    return o == Xt || o == dn;
  }
  function bf(o, e) {
    var r, t = o.name, i = "", a = o.deviceType;
    r = a == Ne ? "" : a == Ut ? "Twain64-" : a == bt ? "" : a == Zt ? "ICA-" : a == rt ? "Sane-" : "", e && e.attrs && e.attrs.ty && (i = " on [" + e.attrs.ty + "]"), o.displayName = [r, t, i].join("");
  }
  n.removeNonPrintableChar;
  var wf = 1;
  function Qu() {
    return (++wf).toString();
  }
  var Zu = function() {
    function o(e, r) {
      Gn(this, o), ar(this, "m_server", ""), ar(this, "m_iUsingTime", 0), ar(this, "m_countMap", {}), ar(this, "m_newConsum", !1), ar(this, "m_mapSavedToDb", !1), this.clearData(), this.m_enumInstance = e, e == l.DWT.EnumInstance.dwt_desktop ? (this.m_deploymentType = "desktop", this.m_server = r) : e != l.DWT.EnumInstance.dwt_browser && e != l.DWT.EnumInstance.dbr || (this.m_deploymentType = "browser", this.m_server = "");
    }
    return zn(o, [{ key: "clearData", value: function() {
      this.m_iUsingTime = 0, this.m_jvUsingTime = n.nil, this.m_countMap = {}, this.m_newConsum = !1, this.m_mapSavedToDb = !1, this.m_minExpiredTime = n.nil, this.m_maxExpiredTime = n.nil, this.m_cu = n.nil, this.m_ar = n.nil, this.m_ltsInstance = n.nil;
    } }, { key: "set_cu", value: function(e) {
      this.m_cu = e;
    } }, { key: "get_cu", value: function() {
      return this.m_cu;
    } }, { key: "set_ar", value: function(e) {
      this.m_ar = e;
    } }, { key: "get_ar", value: function() {
      return this.m_ar;
    } }, { key: "get_ltsInstance", value: function(e) {
      return this.m_ltsInstance || (this.m_ltsInstance = e(this.m_enumInstance)), this.m_ltsInstance;
    } }, { key: "inited_ltsInstance", value: function() {
      return !!this.m_ltsInstance;
    } }, { key: "set_maxExpiredTime", value: function(e) {
      this.m_maxExpiredTime = e;
    } }, { key: "get_maxExpiredTime", value: function() {
      return this.m_maxExpiredTime;
    } }, { key: "set_minExpiredTime", value: function(e) {
      this.m_minExpiredTime = e;
    } }, { key: "get_minExpiredTime", value: function() {
      return this.m_minExpiredTime;
    } }, { key: "get_deploymentType", value: function() {
      return this.m_deploymentType;
    } }, { key: "get_enumDeploymentType", value: function() {
      return this.m_enumInstance;
    } }]), o;
  }(), qu = 3008, Qt = l.DWT;
  Qt.LTS = Qt.LTS || {}, Qt.licenseException = { code: 0, message: "", fromLTS: !1 }, Qt.bLTSOnline = !0, Qt.axInstance = void 0, Qt.lOnUpdateDWObj = [], Qt.EnumInstance = { dwt_desktop: 0, dwt_browser: 1, dbr: 2 };
  var La, $u, ec, tc, bo = 0, aa = {}, Ys = !1, Ss = !1, Cu = {}, Js = !1, nc = !1, Xs = !1;
  function gl() {
    var o = n.product.handshakeCode;
    return n.isString(o) || (o = ""), o;
  }
  function ml() {
    var o = n.product.organizationID;
    return n.isNumber(o) ? o = "" + o : n.isString(o) || (o = ""), o;
  }
  function rc() {
    return n.replaceAll(Qt.JSVersion, ",", ".");
  }
  function mi(o, e) {
    var r = o;
    return r === n.nil && (r = n.IsNeedLoadWasm() ? Qt.EnumInstance.dwt_browser : Qt.EnumInstance.dwt_desktop), r == Qt.EnumInstance.dwt_browser ? ($u || ($u = new Zu(r, "")), $u) : r == Qt.EnumInstance.dbr ? (tc || (tc = new Zu(r, "")), tc) : (ec || (ec = new Zu(r, "")), ec);
  }
  Qt.lupverfy = function() {
    mi(Qt.EnumInstance.dwt_desktop).get_ltsInstance(Uo), mi(Qt.EnumInstance.dwt_browser).get_ltsInstance(Uo), mi(Qt.EnumInstance.dbr).get_ltsInstance(Uo);
  }, Qt.lsmid = function(o, e) {
    mi(Qt.EnumInstance.dwt_desktop).set_cu(o);
  }, Qt.lsar = function(o, e) {
    mi(Qt.EnumInstance.dwt_desktop).set_ar(o);
  }, Qt.lsmid2b = function(o) {
    mi(Qt.EnumInstance.dwt_browser).set_cu(o);
  }, Qt.lgar = function(o, e) {
    mi(o).get_ar();
  }, Qt.laddDWTObj = function(o) {
    var e = !1;
    n.each(Qt.lOnUpdateDWObj, function(r) {
      if (r == o)
        return e = !0, !1;
    }), e || Qt.lOnUpdateDWObj.push(o);
  }, Qt.lremoveDWTObj = function(o) {
    n.each(Qt.lOnUpdateDWObj, function(e, r) {
      if (e == o)
        return Qt.lOnUpdateDWObj.splice(r, 1), !1;
    });
  }, Qt.lsendUpdateEvt = function(o, e) {
    var r = [];
    if (n.each(Qt.lOnUpdateDWObj, function(a) {
      o == Qt.EnumInstance.dwt_desktop ? (a._bAx || a._isTwainServiceType() || a._isDMServiceType()) && r.push(a) : o == Qt.EnumInstance.dwt_browser && (a._bAx || a._isTwainServiceType() || a._isDMServiceType() || r.push(a));
    }), r.length == 0)
      return n.Promise.resolve();
    var t, i = r[0];
    return i._bAx ? (n.each(r, function(a) {
      a.SetLTSInfo(mi(o).get_ar(), mi(o).get_cu());
    }), i.GetLicenseInfo().then(function(a) {
      a && n.isArray(a.Detail) && a.Detail.length > 0 && Qt.lsexp(o, a.Detail[0].ExpireDate, e);
    })) : (t = i.SetLTSLicenseAsync(mi(o).get_ar()).then(function(a) {
      a && n.isArray(a.Detail) && a.Detail.length > 0 && Qt.lsexp(o, a.Detail[0].ExpireDate, e);
    }), n.each(r, function(a, u) {
      u != 0 && a.SetLTSLicenseAsync(mi(o).get_ar());
    }), t);
  }, Qt.lgcb = function() {
    var o = l.navInfoSync, e = [];
    return o.bChrome ? e.push("Chrome") : o.bFirefox ? e.push("Firefox") : o.bEdge ? e.push("Edge") : o.bIE ? e.push("IE") : o.bSafari ? e.push("Safari") : o.bOpera ? e.push("Opera") : o.b360SE ? e.push("360SE") : o.bTencentTraveler ? e.push("TencentTraveler") : o.bMaxthon ? e.push("Maxthon") : o.bMetaSr ? e.push("MetaSr") : o.bTheWorld ? e.push("TheWorld") : o.bUC ? e.push("UC") : o.bHuaWeiBrowser && e.push("HuaWeiBrowser"), e.push(o.strBrowserVersion), o.bWin ? e.push("Windows") : o.bMac ? e.push("Mac") : o.bLinux ? e.push("Linux") : o.bAndroid ? e.push("Android") : o.bChromeOS ? e.push("ChromeOS") : o.bHarmonyOS ? e.push("HarmonyOS") : n.env.bMobile ? e.push("Mobile OS") : l.navInfo.bEmbed && e.push("Embed OS"), e.join(" ");
  };
  var If = -2440, Sf = -2441, Tf = -2443, Cf = -2445, pl = -2446, Ef = -2447;
  function Uo(o) {
    var e, r, t = n.product.licenseServer;
    if (t && t.length > 0)
      for (e = 0; e < t.length; e++)
        r = t[e], n.endsWith(r, "/") || (t[e] = r + "/");
    var i = { dm: location.origin ? n.startsWith(location.origin, "http") ? location.origin : "https://localhost" : n.startsWith(location.href, "http") ? location.href : "https://localhost", lf: n.localforage, btoa: n.btoa, atob: n.atob, sutlcb: function() {
      n.isFunction(Qt.lonsend) && Qt.lonsend();
    }, fol: Qt.OnFirstOffline, dwt: !0 };
    if (o == Qt.EnumInstance.dwt_browser || o == Qt.EnumInstance.dbr ? i.feab = Qt.lfeab_wasm : i.feab = Qt.lfeab_ax, !l.navInfoSync.bIE && n.product.ltsDebug && (i.debugLog = console.log), l.LTS && l.LTS._)
      return l.LTS._.createLtsInstance(i);
    var a = {}, u = function() {
      return n.Promise.reject({ code: pl, message: "The dynamsoft.lts.js load failed." });
    };
    return a.i = u, a.s = u, a.caret = u, a;
  }
  function Fa(o, e) {
    var r = e ?? "", t = mi(o), i = t.get_enumDeploymentType();
    if (Qt.lclex(), t.get_ar() && t.get_cu())
      return Promise.resolve({ ar: t.get_ar(), cu: t.get_cu() });
    var a = { pd: Qt.lgpd(o), v: rc(), os: Qt.lgcb(), fn: Qt.DeviceFriendlyName || "", ls: n.product.licenseServer, sp: n.product.sessionPassword, l: n.License.getLTSLicense(), mnet: function() {
      return t.get_maxExpiredTime();
    }, mxet: function() {
      return t.get_minExpiredTime();
    }, fol: Qt.OnFirstOffline };
    return a.dt = t.get_deploymentType(), i == Qt.EnumInstance.dwt_desktop ? a.lsu = t.get_cu() : i == Qt.EnumInstance.dbr || (a.dwt = !0, t.get_cu() != "" && (a.lsu = t.get_cu()), a.updateLicense = function(u) {
      t.set_ar(u.ar), t.get_cu() || t.set_cu(u.cu), Qt.lsendUpdateEvt(i, r);
    }), t.get_ltsInstance(Uo).i(a).then(function(u) {
      return t.get_ar() || t.set_ar(u.ar), t.get_cu() || t.set_cu(u.cu), u;
    });
  }
  function _l() {
    return mi(Qt.EnumInstance.dwt_browser).get_ltsInstance(Uo).u();
  }
  function Ha() {
    return Date.now();
  }
  function ss(o) {
    var e = o ? new Date(o) : /* @__PURE__ */ new Date(), r = "yyyy-MM-ddTHH:mm:ss.SSSZ", t = { "M+": e.getUTCMonth() + 1, "d+": e.getUTCDate(), "H+": e.getUTCHours(), "h+": e.getUTCHours() % 12 || 12, "m+": e.getUTCMinutes(), "s+": e.getUTCSeconds(), "q+": Math.floor((e.getUTCMonth() + 3) / 3), "S+": e.getUTCMilliseconds() };
    for (var i in /(y+)/.test(r) && (r = r.replace(RegExp.$1, (e.getUTCFullYear() + "").substr(4 - RegExp.$1.length))), t)
      new RegExp("(" + i + ")").test(r) && (r = r.replace(RegExp.$1, RegExp.$1.length == 1 ? t[i] : ("000" + t[i]).substr(("000" + t[i]).length - RegExp.$1.length)));
    return r;
  }
  function Df(o, e, r, t) {
    return vl.apply(this, arguments);
  }
  function vl() {
    return (vl = Ln(he.mark(function o(e, r, t, i) {
      var a;
      return he.wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (r != ui) {
                u.next = 4;
                break;
              }
              return u.abrupt("return", i.taskId);
            case 4:
              if (r != jn) {
                u.next = 8;
                break;
              }
              return u.abrupt("return", n.parse(e));
            case 8:
              if (r != ye) {
                u.next = 13;
                break;
              }
              if (!i || !i.client) {
                u.next = 11;
                break;
              }
              return u.abrupt("return", i.client.getRequestTaskId());
            case 11:
              u.next = 20;
              break;
            case 13:
              if (r != ae) {
                u.next = 20;
                break;
              }
              if (a = i == null ? void 0 : i.userData) {
                u.next = 17;
                break;
              }
              return u.abrupt("return", !1);
            case 17:
              return e.indexOf("Version not found") >= 0 ? n.isFunction(a.fFun) && a.fFun() : n.isFunction(a.sFun) && a.sFun(), u.abrupt("return", !0);
            case 20:
            case "end":
              return u.stop();
          }
      }, o);
    }))).apply(this, arguments);
  }
  Qt.lgpd = function(o) {
    return l.navInfoSync.bWin && o == Qt.EnumInstance.dwt_desktop ? "dwt|dbr" : "dwt";
  }, Qt.lglic = Fa, Qt.lgbuuid = _l, Qt.lshow = function() {
    return { t: La, t2: bo, m: JSON.stringify(aa) };
  }, Qt.lgct = function(o) {
    switch (o) {
      case 0:
        return "3011";
      case 1:
        return "3012";
      case 2:
        return "3014";
      case 3:
        return "3013";
      case 4:
        return "3015";
      case 14:
        return "3016";
      case 3001:
        return "3001";
      case 3002:
        return "3002";
      case 3003:
        return "3003";
      case 3004:
        return "3004";
      case 3005:
        return "3005";
      case 3006:
        return "3006";
      case 3007:
        return "3007";
      case qu:
        return "3008";
      case 3009:
        return "3009";
      case 5001:
        return "5001";
      case 4001:
        return "4001";
      case 4002:
        return "4002";
      case 4003:
        return "4003";
    }
    return "";
  }, Qt.lcvrf = function(o) {
    o && setTimeout(function() {
      Qt.lcvrf_(o);
    }, 1);
  }, Qt.lcvrf_ = function(o) {
    var e;
    e = o._bAx ? Qt.EnumInstance.dwt_desktop : o._isMobileMode() ? Qt.EnumInstance.dwt_browser : Qt.EnumInstance.dwt_desktop;
    var r, t = Qt.DeviceFriendlyName || "", i = Qt.lgcb(), a = mi(e), u = { hs: gl(), og: ml(), cu: a.get_cu(), fn: t, cw: "", os: i, v: rc(), dt: a.get_deploymentType(), ed: "js" }, c = function(T, M) {
      var A, S, V = l.Lib, ne = 0;
      if (V.isString(T) && T != "" && T != "{}" && M && V.isArray(M) && !(M.length < 1)) {
        if (S = mi(M[0]), A = V.parse(T), Qt.lclex(), bo == 0) {
          var z = Ha(), ue = "";
          bo = z, La = ss(z), aa = {}, ne = 0, V.each(A, function(xe, Fe) {
            (Fe < ne || ne == 0) && (ne = Fe, ue = xe);
          }), ne > 0 && S.get_ltsInstance(Uo).s(V.product.licenseServer, ue, ne, !0).then(function() {
          }, function(xe) {
          });
        }
        V.each(A, function(xe, Fe) {
          var Qe = !1, Ze = parseInt(Fe);
          Ze > 0 && Ze != ne && (Ze + 18e4 < Ha() && (Qe = !0), S.get_ltsInstance(Uo).s(V.product.licenseServer, xe, Fe, Qe).then(function() {
          }, function(Ct) {
          }));
        });
      }
    };
    if (u.pd = Qt.lgpd(e), r = JSON.stringify(u), !o._bAx) {
      var d = "GetBuffer", _ = zt(n.replaceAll(r, '"', '\\"')), v = { cmd: d, cmdId: Qu(), sFun: c, fFun: function() {
      }, params: [e] };
      return o._innerSendByWS(d, _, v, null, !0);
    }
    c(o.GetBuffer(r), [e, ""]);
  }, Qt.lavrf = function(o, e, r, t) {
    var i = 1;
    if (o != "") {
      e > 1 && (i = e);
      var a = Ha();
      if (bo > 0 && bo + 18e4 < a) {
        Ss ? (aa = {}, Qt.lavrf__unload()) : Qt.lavrf__(!0, r, t);
        var u = Ha() + 1;
        bo = u, La = ss(u), aa = {};
      }
      Ys = !0, Ss = !1, aa[o] ? aa[o] += i : aa[o] = i, bo == 0 && Qt.lavrf__(!0, r, t);
    }
  }, Qt.lavrf_ = function(o, e, r) {
    if (Ys) {
      var t = 1;
      o && (t = o), setTimeout(function() {
        Qt.lavrf__(!1, e, r);
      }, t);
    }
  }, Qt.lavrf__ = function(o, e, r) {
    var t, i, a, u = Ha(), c = !1, d = !!o, _ = 0, v = e;
    n.isUndefined(v) && (v = Qt.EnumInstance.dwt_browser), a = mi(v), Ys = !1, bo == 0 && (c = !0, bo = u, La = ss(u)), t = bo, i = La;
    var T = {};
    T.ut = i;
    var M = {};
    if (n.each(aa, function(ue, xe) {
      M[xe] = ue, ue > 0 && _++;
    }), T.cts = M, d || t + 18e4 < u) {
      d = !0;
      var A = Ha() + 1;
      if (bo = A, La = ss(A), aa = {}, Ss = !1, _ == 0)
        return;
    } else {
      if (_ == 0)
        return;
      Ss = !0;
    }
    T.dur = c ? 1 : 180;
    var S, V = Qt.DeviceFriendlyName || "", ne = Qt.lgcb(), z = { hs: gl(), og: ml(), cu: a.get_cu(), fn: V, cw: "", os: ne, v: rc(), dt: a.get_deploymentType(), ed: "js", rcs: [T] };
    z.product = Qt.lgpd(e), S = JSON.stringify(z), n.product.ltsDebug && ss(), Qt.lclex(), a.get_ltsInstance(Uo).s(n.product.licenseServer, S, "" + t, d).then(function() {
    }, function(ue) {
    });
  }, Qt.lavrf__unload = function() {
    var o, e = Ha(), r = !0, t = !1, i = mi(Qt.EnumInstance.dwt_desktop), a = mi(Qt.EnumInstance.dwt_browser), u = mi(Qt.EnumInstance.dbr);
    Ys = !1, bo == 0 && (bo = e, La = ss(e)), o = bo;
    var c = Ha() + 1;
    bo = c, La = ss(c), aa = {}, Ss = !1, o += 1, Qt.lclex(), i.inited_ltsInstance() && i.get_ltsInstance(Uo).s(n.product.licenseServer, t, "" + o, r).then(function() {
    }, function(v) {
    }), a.inited_ltsInstance() && a.get_ltsInstance(Uo).s(n.product.licenseServer, t, "" + o, r).then(function() {
    }, function(v) {
    }), u.inited_ltsInstance() && u.get_ltsInstance(Uo).s(n.product.licenseServer, t, "" + o, r).then(function() {
    }, function(v) {
    });
    var d, _ = Object.keys(Cu);
    n.each(_, function(v) {
      (d = Cu[v]).inited_ltsInstance() && d.get_ltsInstance(Uo).s(n.product.licenseServer, t, "" + o, r).then(function() {
      }, function(T) {
      });
    });
  }, Qt.lclex = function() {
    var o = Qt.licenseException;
    o.code = 0, o.message = "", o.httpResponse = "", o.fromLTS = !1;
  }, Qt.li = function(o, e) {
    var r;
    return o.axInstance && (Qt.axInstance = o.axInstance, Qt.axInstance) ? (r = Qt.axInstance.GetUUID(), n.product.ltsDebug && n.log("ActiveX cu: " + r), mi(o.instanceMode).set_cu(r), r) : mi(o.instanceMode).get_cu();
  }, Qt.lfeab_ax = function(o) {
    return new n.Promise(function(e, r) {
      var t = "";
      if (Qt.axInstance)
        try {
          t = Qt.axInstance.Encrypt(o, 0);
        } catch {
        }
      e(t);
    });
  }, Qt.lfeab_wasm = function(o) {
    return new n.Promise(function(e, r) {
      var t = new l.Imagecore();
      t.getAesResult(o).then(function(i) {
        t.terminate(), e(i);
      }, function(i) {
        t.terminate(), r(i);
      });
    });
  }, Qt.lwsproc = function(o, e) {
    try {
      o = n.parse(o);
    } catch (r) {
      return void (e.fFun && e.fFun(r));
    }
    o.method == "GetBuffer" ? e.sFun && o.result.length > 0 ? e.sFun(o.result[0], e.params) : e.sFun("", e.params) : e.sFun && e.sFun(o);
  }, Qt.lsexp = function(o, e, r) {
    var t, i = e;
    if ((t = (i = n.replaceAll(i, "/", "-")).split("-")).length == 3) {
      var a = t[0], u = t[1], c = t[2];
      u.length < 2 && (u = (u = "00" + u).substr(u.length - 2)), c.length < 2 && (c = (c = "00" + c).substr(c.length - 2)), i = [a, u, c].join("-");
    }
    var d = [i, "T23:59:59.999Z"].join("");
    mi(o).set_minExpiredTime(d), mi(o).set_maxExpiredTime(d);
  }, Qt.lunload = function() {
    Qt.lavrf__unload();
    var o = mi(Qt.EnumInstance.dwt_desktop), e = mi(Qt.EnumInstance.dwt_browser), r = mi(Qt.EnumInstance.dbr);
    o.clearData(), e.clearData(), r.clearData();
    var t = Object.keys(Cu);
    n.each(t, function(i) {
      Cu[i].clearData();
    }), bo = 0, La = n.nil, aa = {}, Ss = !1, Ys = !1, Js = !1, nc = !1, Xs = !1, Qt.lclex(), Qt.bLTSOnline = !0, Qt.axInstance = n.nil, Qt.lOnUpdateDWObj = [];
  }, Qt.lcexp = function(o, e) {
    return mi(o).get_ltsInstance(Uo).caret().then(function() {
      return !1;
    }, function(r) {
      var t = Qt.licenseException, i = "";
      return r instanceof Error || "message" in r ? i = r.message : n.isString(r) && (i = r), Qt.lsetException(Cf, i, !1), nc || (nc = !0, n.error(i), l.OnLTSLicenseError && l.OnLTSLicenseError(n.License.getPublicLicenseContent(t.message))), !0;
    });
  }, Qt.OnLicenseException = function() {
    var o = Qt.licenseException, e = o.message;
    if (n.isString(e) && (e.indexOf("Error Code") > -1 ? e = n.replaceAll(e, "Error Code", "error code") : e.indexOf("Error code") > -1 && (e = n.replaceAll(e, "Error code", "error code"))), e.indexOf("(https://www.dynamsoft.com/purchase-center/)") > -1 && (e = e.replace("(https://www.dynamsoft.com/purchase-center/)", "(https://www.dynamsoft.com/store/dynamic-web-twain/)"), o.message = e), e.indexOf("error code:") > -1) {
      var r = e.substr(0, e.indexOf("message")), t = e.substr(e.indexOf("message"));
      r.indexOf("{") > -1 && (r = r.substr(r.indexOf("{") + 1)), t.indexOf("}") > -1 && (t = t.substr(0, t.indexOf("}"))), r = n.replaceAll(r, "error code:", ""), t = n.replaceAll(t, "message: ", ""), Qt.lsetException(parseInt(r), t, !0), n.error(t), l.OnLTSLicenseError && l.OnLTSLicenseError(n.License.getPublicLicenseContent(e));
    } else {
      if (!o.code) {
        var i = If;
        e.indexOf("timed out") > -1 || e.indexOf("timeout") > -1 ? i = Sf : (e.indexOf("access-control-allow-origin") > -1 || e.indexOf("cors") > -1) && (i = Tf), Qt.lsetException(i, e, !0);
      }
      if (n.error(o.message), o.code == pl)
        return;
      l.OnLTSLicenseError && l.OnLTSLicenseError(n.License.getPublicLicenseContent(o.message));
    }
  }, Qt.lol = function() {
    return Qt.bLTSOnline;
  }, Qt.OnFirstOffline = function(o) {
    Qt.bLTSOnline = !1;
  }, Qt.lpubdlg = function(o, e) {
    if (n.isString(o) && o != "") {
      if (o = n.atob(o), e == 1)
        return Js || (Js = !0, l.OnLTSPublicLicenseMessage && l.OnLTSPublicLicenseMessage(n.License.getPublicLicenseContent(o))), !0;
      e == 2 && (Js || (Js = !0));
    }
    return !1;
  }, Qt.lcheckLic = function(o, e, r) {
    var t = !1;
    if (e) {
      if (n.isArray(e.Detail) && e.Detail.length > 0) {
        var i = e.Detail[0].ExpireDate;
        return Qt.lsexp(o, i, r), Qt.lcexp(o, r).then(function(a) {
          var u = !1;
          a ? u = !0 : e.Trial != 1 && e.Trial != 2 || (u = Qt.lpubdlg(e.Message, e.Trial)), u || Qt.bLTSOnline || Xs || (Xs = !0, l.OnLTSConnectionWarning && l.OnLTSConnectionWarning());
        });
      }
      e.Trial != 1 && e.Trial != 2 || (t = Qt.lpubdlg(e.Message, e.Trial));
    }
    t || Qt.bLTSOnline || Xs || (Xs = !0, l.OnLTSConnectionWarning && l.OnLTSConnectionWarning());
  }, Qt.lisValidID = function(o) {
    if (n.isString(o) && o != "")
      return !0;
    var e, r = Qt.licenseException;
    return Qt.lsetException(Ef, "Failed to generate an ID for your device to license it: not enough permission.", !0), n.error(r.message), e = r.message, l.OnLTSUUIDError && l.OnLTSUUIDError(e), !1;
  }, Qt.lsetException = function(o, e, r) {
    var t = Qt.licenseException;
    t.code = o, t.message = e, n.isUndefined(r) || (t.fromLTS = r);
  }, l.DWT.NeedCheckWebTwainBySocket = function() {
    return function() {
      var o = location.hostname;
      return o != "localhost" && o != "127.0.0.1" && o.indexOf("192.168.") != 0 && o.indexOf("172.16.") != 0 && o.indexOf("10.") != 0 && !l.navInfoSync.bSSL;
    }() && !!((l.navInfoSync.bChrome || l.navInfoSync.bEdge) && parseInt(l.navInfoSync.strBrowserVersion) >= 94);
  }, l.DWT.CheckWebTwainBySocket = function(o, e, r) {
    var t, i, a, u = l.Lib.detect.urls;
    if (u && u.length > 0) {
      var c = u[0];
      t = c.host || K(), i = c.port, a = c.ssl;
    } else
      t = K(), i = (a = l.navInfoSync.bSSL) ? l.DWT.SSLPort : l.DWT.Port;
    var d = n.now(), _ = ji.getWsClient(t, i, a);
    if (_.connected)
      return n.isFunction(o) && o(), void _.dispose();
    var v, T = { id: d, method: "VersionInfo", cmdId: d, version: [l.Lib.product.getDWTPrefix(), l.Lib.product.getServerVersionInfo()].join("") }, M = Df, A = { cmdId: d, cmd: null, sFun: o, fFun: e }, S = 500;
    l.navInfoSync.bAndroid && (S = 1500), v = { client: _, userData: A, taskId: d }, _.setRetry(0), _.request(n.stringify(T), M, v, S).then(function() {
      _.dispose();
    }, function() {
      n.isFunction(r) && r(), _.dispose();
    });
  }, l.DWT.IsLocalServiceConnected = function() {
    return new n.Promise(function(o, e) {
      var r, t = K();
      n.each(n.detect.ports, function(i) {
        l.navInfoSync.bSSL ? i.ssl && (r = i.port) : i.ssl || (r = i.port);
      }), l.DWT.CheckConnectToTheService(t, r, function(i, a, u) {
        o(!0);
      }, function() {
        e(!1);
      });
    });
  };
  var yl, bl, ic = 0;
  function wl(o) {
    return l.WasmEnv ? (l.WasmEnv && (l.WasmEnv.useFastcompEdition = l.Lib.env.isWasmUseFastcomp(), l.DWT.WasmConfig && (l.DWT.WasmConfig.fetchOptions && (l.WasmEnv.fetchOptions = l.DWT.WasmConfig.fetchOptions), l.DWT.WasmConfig.maxHeapSize && (l.WasmEnv.maxHeapSize = l.DWT.WasmConfig.maxHeapSize))), n.detect.wasmScriptLoaded = !0, void o()) : ic > 3 ? (n.detect.wasmScriptLoaded = !0, void o()) : (ic++, void setTimeout(function() {
      wl(o);
    }, 500));
  }
  function Il(o, e) {
    if (function() {
      try {
        if ((typeof WebAssembly > "u" ? "undefined" : gi(WebAssembly)) === "object" && typeof WebAssembly.instantiate == "function") {
          var i = new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0]));
          if (i instanceof WebAssembly.Module)
            return new WebAssembly.Instance(i) instanceof WebAssembly.Instance;
        }
      } catch {
      }
      return !1;
    }())
      if (n.detect.wasmScriptLoaded)
        o();
      else {
        e && n.showLoadingMsg(-1, "", l.MSG.Init_DownloadingWasm);
        var r = function(i) {
          ic = 0, wl(o), e && n.showLoadingMsg(-1, "", l.MSG.Init_CompilingWasm);
        };
        if (l.DWT.bNpm)
          r();
        else {
          var t = [l.DWT.ResourcesPath, "/src/dynamsoft.imageio.js", l.Lib.timestamp].join("");
          n.addScript(t, !0, !1, r);
        }
      }
    else
      o();
  }
  function Sl(o, e) {
    if (!(n.bNode || l.navInfoSync.bJSDom || n.product.bActiveXEdition)) {
      if (n.IsNeedLoadWasm())
        return Il(o, !0);
      if (n.product.bHTML5Edition && n.product.UseLocalService && !n.detect.wasmScriptLoaded && !l.navInfoSync.bFileSystem && l.DWT.UseCameraAddonWasm)
        return Il(o, !1);
    }
    o();
  }
  function Tl() {
    n.detect.scriptLoaded ? new n.Promise(Sl).then(yl, bl) : setTimeout(Tl, 100);
  }
  function Qs() {
    return n.detect.scriptLoaded ? new n.Promise(Sl) : new n.Promise(function(o, e) {
      yl = o, bl = e, setTimeout(Tl, 100);
    });
  }
  function Cl() {
    var o = l.navInfoSync;
    return o.bAndroid ? le : o.bMac ? Oe : o.bChromeOS ? Ve : o.bHarmonyOS ? We : l.navInfo.bEmbed ? Re : o.bLinux ? Te : o.biPhone || o.biPad ? je : Le;
  }
  function Zs(o, e, r, t, i) {
    var a, u = n.product, c = l.navInfoSync, d = l.dcp.getDSPath();
    if (o && (n.one(o).before(n.install._strNonInstallDIV), (a = n.get(n.install._divDWTNonInstallContainerID)) && (a.style.width = e, a.style.height = r), n.show(n.install._divDWTNonInstallContainerID)), n.install._divDWTemessageContainer != "" && n.hide(n.install._divDWTemessageContainer), c.bMac)
      t ? n.isFunction(l.OnWebTwainNeedUpgradeCallback) && l.OnWebTwainNeedUpgradeCallback(u.name, { default: d }, u.bHTML5Edition, Oe, c.bIE, c.bSafari, n.detect.ssl, n.env.strIEVersion) : n.isFunction(l.OnWebTwainNotFoundOnMacCallback) && l.OnWebTwainNotFoundOnMacCallback(u.name, d, u.bHTML5Edition, c.bIE, c.bSafari, n.detect.ssl, n.env.strIEVersion, i);
    else if (c.bLinux || l.navInfo.bEmbed || c.bChromeOS || c.bMobile) {
      var _, v, T = Cl();
      if (l.navInfo.bEmbed || c.bAndroid || c.bChromeOS || c.bHarmonyOS ? _ = d : (_ = l.dcp.getLinuxHTML5DebPath(), v = l.dcp.getLinuxHTML5RpmPath()), t) {
        if (n.isFunction(l.OnWebTwainNeedUpgradeCallback)) {
          var M = { default: _ };
          c.bLinux && (M.deb = _, M.rpm = v), l.OnWebTwainNeedUpgradeCallback(u.name, M, u.bHTML5Edition, T, c.bIE, c.bSafari, n.detect.ssl, n.env.strIEVersion);
        }
      } else
        c.bAndroid ? n.isFunction(l.OnWebTwainNotFoundOnAndroidCallback) && l.OnWebTwainNotFoundOnAndroidCallback(u.name, _, v, u.bHTML5Edition, c.bIE, c.bSafari, n.detect.ssl, n.env.strIEVersion, T, i) : n.isFunction(l.OnWebTwainNotFoundOnLinuxCallback) && l.OnWebTwainNotFoundOnLinuxCallback(u.name, _, v, u.bHTML5Edition, c.bIE, c.bSafari, n.detect.ssl, n.env.strIEVersion, T, i);
    } else if (c.bChrome || c.bSafari || c.bFirefox || c.bOpera || l.DWT.IfUseActiveXForIE10Plus == vt || !l.DWT.ActiveXInstallWithCAB && c.bIE)
      if (t) {
        if (n.isFunction(l.OnWebTwainNeedUpgradeCallback)) {
          var A = { default: d };
          l.OnWebTwainNeedUpgradeCallback(u.name, A, u.bHTML5Edition, Le, c.bIE, c.bSafari, n.detect.ssl, n.env.strIEVersion);
        }
      } else
        n.isFunction(l.OnWebTwainNotFoundOnWindowsCallback) && l.OnWebTwainNotFoundOnWindowsCallback(u.name, d, u.bHTML5Edition, c.bIE, c.bSafari, n.detect.ssl, n.env.strIEVersion, i);
  }
  function Fo(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function Nr(o, e, r) {
    return e.has(o), r;
  }
  var El = k + ".", kf = parseInt(k), xf = 0, Mf = 1, Pf = 2, Af = 3, Rf = 4, Lf = 7, Ff = 8, Of = 9, Wf = 10, Bf = 50, Nf = 51, Vf = 52, Eu = n.getLogger();
  function Ts(o) {
    return n.isString(o) ? n.trim(o) : o;
  }
  var oc = /* @__PURE__ */ new WeakSet(), Dl = /* @__PURE__ */ new WeakSet(), ac = /* @__PURE__ */ new WeakSet(), kl = /* @__PURE__ */ new WeakSet(), Du = /* @__PURE__ */ new WeakSet(), Go = /* @__PURE__ */ new WeakSet(), xl = /* @__PURE__ */ new WeakSet(), qs = /* @__PURE__ */ new WeakSet(), sc = /* @__PURE__ */ new WeakSet(), Ml = /* @__PURE__ */ new WeakSet(), Pl = /* @__PURE__ */ new WeakSet(), ku = /* @__PURE__ */ new WeakSet(), Al = /* @__PURE__ */ new WeakSet(), uc = /* @__PURE__ */ new WeakSet(), Uf = function() {
    function o() {
      Gn(this, o), Fo(this, uc), Fo(this, Al), Fo(this, ku), Fo(this, Pl), Fo(this, Ml), Fo(this, sc), Fo(this, qs), Fo(this, xl), Fo(this, Go), Fo(this, Du), Fo(this, kl), Fo(this, ac), Fo(this, Dl), Fo(this, oc);
    }
    return zn(o, [{ key: "isLTS", value: function() {
      return n.isString(l.Lib.product.handshakeCode) || n.isString(l.Lib.product.organizationID) || l.Lib.product.bPublicLTS || n.isString(l.DWT.ProductKey) && n.startsWith(l.DWT.ProductKey, "DLS2");
    } }, { key: "isLongKey", value: function(e) {
      if (!(n.isString(e) && e.length > 0))
        return !1;
      var r = e.charAt(0);
      return r == "f" || r == "t";
    } }, { key: "isLicenseMixed", value: function(e, r) {
      var t, i = !1, a = e || l.DWT.ProductKey;
      if (l.DWT.lclex(), r && (Ts(l.DWT.organizationID) || Ts(l.DWT.handshakeCode)) && a && (i = !0, t = {}, n.Errors.LongKeyShortKeyMixed(t)), !i && n.isString(a) && (a = n.trim(a), !(n.startsWith(a, "f") || n.startsWith(a, "t")))) {
        if (a != "")
          if (n.startsWith(a, "DLS2"))
            try {
              Nr(this, Dl, Gf).call(this, a);
            } catch (c) {
              i = !0, t = {}, n.Errors.LTSErrors(t), t._errorString = c.message;
            }
          else
            Nr(this, oc, Rl).call(this, a).LTS || (i = !0, t = {}, n.Errors.FailedParseProductKey(t));
      }
      if (i && t && (l.Lib.Errors.SetLTSException(t), Eu)) {
        var u = l.DWT.licenseException;
        Eu.error(u.message);
      }
      return i;
    } }, { key: "reparseProductKey", value: function() {
      var e = Ts(l.DWT.organizationID), r = Ts(l.DWT.handshakeCode), t = e || r, i = n.product, a = n.trim(l.DWT.ProductKey);
      if (!t) {
        var u = Nr(this, oc, Rl).call(this, a);
        u.LTS && (r = Ts(u.handshakeCode), t = (e = Ts(u.organizationID)) || r);
      }
      if (t)
        return this._innerResetLicense(), n.isNumber(a) && (e = a), i.handshakeCode = r, i.organizationID = e, i.licenseServer = l.DWT.licenseServer, i.sessionPassword = l.DWT.sessionPassword, void (i.bPublicLTS = Nr(this, ac, Ll).call(this, i.licenseServer, t));
      var c = !1;
      if (i.refProductKey !== a && (this._innerResetLicense(), n.isString(a) && a.length > 0 && (i.refProductKey = a, c = !0)), c) {
        var d = i.refProductKey.charAt(0);
        if (d != "f" && d != "t") {
          var _, v = { _pLoad: { isEmpty: Gt }, _license: i.refProductKey, _licenseServer: [] };
          try {
            _ = gt(v);
          } catch (M) {
            n.error(M), _ = !1;
          }
          if (_ && n.isString(_.l)) {
            var T = n.trim(_.l);
            T == "" ? (T = "200001", i.organizationID = T) : T.indexOf("-") != -1 ? i.handshakeCode = T : i.organizationID = T, n.isArray(_.ls) && _.ls.length > 0 && (i.licenseServer = _.ls), i.bPublicLTS = Nr(this, ac, Ll).call(this, i.licenseServer, T), i.sessionPassword = _.sp;
          } else
            i.bPublicLTS = !1;
        } else
          i.bPublicLTS = !1;
      }
    } }, { key: "_innerResetLicense", value: function() {
      var e = l.Lib.product;
      e.refProductKey = "", e.handshakeCode = void 0, e.organizationID = void 0, e.licenseServer = void 0, e.sessionPassword = "", e.bPublicLTS = !0;
    } }, { key: "checkOSForAllowCore", value: function(e, r, t) {
      if (n.product.bHTML5Edition) {
        if (e)
          return Nr(this, uc, Ol).call(this, r);
        var i = t._bRemoteMode, a = t.__serverPlatform;
        return this.isOSOK(r, i, a);
      }
      return Gt;
    } }, { key: "checkLocalPlatformForRemoteService", value: function(e) {
      var r, t, i, a = e.__licenseInfo, u = Cl(), c = !1;
      for (r = 0; r < a.Detail.length && (t = a.Detail[r], (i = Nr(this, ku, lc).call(this, t.EnumLicenseType, t.LicenseType)).AndroidW && !l.navInfoSync.bAndroid && (t.OS = n.replaceAll(t.OS, "Wasm", "AndroidW")), !(i.Core && n.isString(t.Version) && t.Version.indexOf(El) == 0 && ((c = Nr(this, uc, Ol).call(this, t.OS)) || (c = this.isOSOK(t.OS, !0, u))))); r++)
        ;
      return c || (u == Le ? n.Errors.LicenseNotSupportWindows(e) : u == Te ? n.Errors.LicenseNotSupportLinux(e) : u == Oe ? n.Errors.LicenseNotSupportMAC(e) : n.Errors.LicenseNotSupportOS(e)), c;
    } }, { key: "checkProductKey", value: function(e, r, t, i) {
      var a = l.DWT.licenseException, u = !1, c = vt;
      return r.Camera ? this.checkCameraProductKey(e) : (n.isFunction(e._isMobileMode) && e._isMobileMode() && (c = Gt), (u = Nr(this, Du, cc).call(this, e, e.__licenseInfo, c, r, t, i)) && r.Core && n.isFunction(e._isWasmWithScan) && e._isWasmWithScan() && (u = this.checkAndroidServiceCore(e, t, i)), u || (a.code = e._errorCode, a.message = e._getErrorString(), a.fromLTS = !1), u);
    } }, { key: "checkCameraProductKey", value: function(e) {
      var r, t = l.DWT.licenseException, i = e.__calic;
      return (r = Nr(this, Du, cc).call(this, e, i, !0, { Camera: !0 }, !0, !1)) || (t.code = e._errorCode, t.message = e._getErrorString(), t.fromLTS = !1), r;
    } }, { key: "checkAndroidServiceCore", value: function(e, r, t) {
      var i = l.DWT.licenseException, a = !1;
      return n.isFunction(e._isWasmWithScan) && e._isWasmWithScan() && (a = Nr(this, Du, cc).call(this, e, e.__anlic, !1, { Core: !0 }, r, t)), a || (i.code = e._errorCode, i.message = e._getErrorString(), i.fromLTS = !1), a;
    } }, { key: "showLicenseErrorDialog", value: function(e) {
      var r = e.code;
      r != 0 && (r == Nr(this, xl, zf).call(this) ? Nr(this, Ml, Hf).call(this) : Nr(this, Go, qo).call(this, e));
    } }, { key: "isBindDomainOK", value: function(e) {
      if (n.isUndefined(e) || e == null || e == "" || e == "*" || e == "*.*")
        return Gt;
      var r = location.hostname, t = vt;
      if (r == "")
        return Gt;
      for (var i = r.toLowerCase().split("."), a = i.length, u = e.toLowerCase().split(";"), c = 0; c < u.length; c++) {
        var d = u[c];
        if (d == "*.*") {
          t = Gt;
          break;
        }
        var _ = d.split("."), v = _.length;
        if (v > 0 && v - 1 <= a) {
          for (var T = Gt, M = v - 1; M > 0; M--) {
            if (_[M].indexOf("*") > -1) {
              t = Gt;
              break;
            }
            if (M + a - v >= 0) {
              if (i[M + a - v] != _[M]) {
                T = vt;
                break;
              }
            } else if (_[M] != "*") {
              T = vt;
              break;
            }
          }
          if (T && (_[0] == "*" || a >= v && i[a - v] == _[0])) {
            t = Gt;
            break;
          }
        }
      }
      return t;
    } }, { key: "isExpiredOrFuture", value: function(e, r) {
      if (e == "")
        return vt;
      if (!r) {
        var t = e.length;
        if (t > 2 && e[t - 2] == "/" && e[t - 1] == "0")
          return vt;
      }
      var i = this.parseDateFromString(e), a = (/* @__PURE__ */ new Date()).getTime(), u = a + 5184e6;
      return i.getTime() < a || r && i.getTime() > u ? Gt : vt;
    } }, { key: "remainExpireDays", value: function(e) {
      if (e == "")
        return 65536;
      var r = this.parseDateFromString(e), t = (/* @__PURE__ */ new Date()).getTime(), i = (r.getTime() - t) / 864e5;
      return r.getTime() < t ? 0 : Math.ceil(i);
    } }, { key: "isOSOK", value: function(e, r, t) {
      var i = !1, a = !1, u = !1, c = !1, d = !1, _ = !1, v = !1, T = !1;
      if (e == "" || e == "0")
        return Gt;
      if (r)
        t == Le ? u = !0 : t == Te ? a = !0 : t == Oe ? i = !0 : t == Re ? d = !0 : t == Ve ? _ = !0 : t == le ? v = !0 : t == We ? T = !0 : t == je && (c = !0);
      else {
        var M = l.navInfoSync;
        i = M.bMac, a = M.bLinux, u = M.bWin, c = M.biPhone || M.biPad, _ = M.bChromeOS, d = l.navInfo.bEmbed, v = M.bAndroid, T = M.bHarmonyOS;
      }
      return (e = e.toLowerCase()).indexOf("windows") > -1 && u || e.indexOf("mac") > -1 && i || e.indexOf("linux") > -1 && (a || _ || T) || e.indexOf("android") > -1 && v || e.indexOf("ios") > -1 && c || e.indexOf("embed") > -1 && d ? Gt : vt;
    } }, { key: "isBrowserOK", value: function(e) {
      if (n.isString(e)) {
        if (e == "" || e == "0")
          return Gt;
        var r = (e = e.toLowerCase()).split(";"), t = vt, i = l.navInfoSync;
        return n.each(r, function(a) {
          (n.trim(a) == "chrome" && (i.bChrome || i.bSafari || i.bOpera || i.bEdge) || n.trim(a) == "ie" && i.bIE || n.trim(a) == "firefox" && i.bFirefox) && (t = Gt);
        }), t;
      }
      return vt;
    } }, { key: "parseDateFromString", value: function(e) {
      var r, t = e;
      return t = t.replace(/-/g, "/"), r = Date.parse(t), isNaN(r) && (r = 0), (r = new Date(r)).setHours(23, 59, 59, 999), r;
    } }, { key: "isAllowLicenseType", value: function(e, r) {
      return r.Core ? e.Core : r.PDFRasterizer ? e.PDFRasterizer : r.Webcam || r.Camera ? e.Webcam : r.barcode1D ? e.barcode1D : r.QR ? e.QR : r.PDF417 ? e.PDF417 : r.DataMatrix ? e.DataMatrix : r.OCR ? e.OCR : r.OCRPro ? e.OCRPro : e.Core;
    } }, { key: "setNoAllowedLicenseTypeError", value: function(e, r, t) {
      t.Core ? n.Errors.LicenseNoCore(e, r) : t.Webcam || t.Camera ? r || t.Camera ? n.Errors.LicenseNotSupportWebcamWasm(e) : n.Errors.LicenseNoWebcam(e) : t.PDFRasterizer ? r ? n.Errors.LicenseNotSupportPdfRWasm(e) : n.Errors.LicenseNoPDF(e) : t.OCR ? n.Errors.LicenseNoOCR(e) : t.OCRPro ? n.Errors.LicenseNoOCRPro(e) : n.Errors.LicenseEmptyOrInvalid(e);
    } }, { key: "getLicenseDateString", value: function(e) {
      var r, t = e.getFullYear();
      return [(r = e.getMonth() + 1) >= 10 ? "" + r : "0" + r, "/", e.getDate() >= 10 ? "" + e.getDate() : "0" + e.getDate(), "/", t].join("");
    } }, { key: "hasPDFRProductKey", value: function(e) {
      return !!this.checkProductKey(e, { PDFRasterizer: !0 }, !0) || (e._resetErr(), !1);
    } }, { key: "checkPDFProductKeyWhenNeeds", value: function(e, r) {
      if (r == l.DWT.EnumDWT_ImageType.IT_PDF || r == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF) {
        var t;
        if (n.product.bHTML5Edition ? e.__addon && e.__addon.PDF && (t = e.__addon.PDF.GetConvertMode()) : e.Addon && e.Addon.PDF && (t = e.Addon.PDF.GetConvertMode()), t == 1 || t == 4)
          return this.checkProductKey(e, { PDFRasterizer: !0 }, !0);
      }
      return Gt;
    } }, { key: "getPublicLicenseContent", value: function(e) {
      var r = [], t = e;
      if (!n.isString(t)) {
        if (n.isUndef(t))
          return "";
        t = t instanceof Error || "message" in t ? t.message : "" + t;
      }
      var i = t.indexOf("["), a = t.indexOf("]", i), u = t.indexOf("(", a), c = t.indexOf(")", u);
      if (i == -1 || a == -1 || u == -1 || c == -1)
        return t;
      i > 0 && r.push(t.substring(0, i));
      var d = t.substring(i + 1, a), _ = t.substring(u + 1, c);
      return r.push(['<a href="', _, '" target="_blank" class="dynamsoft-major-color">', d, "</a>"].join("")), r.push(t.substring(c + 1)), r.join("");
    } }, { key: "getLTSLicense", value: function() {
      return l.Lib.product.bPublicLTS ? "" : l.Lib.product.handshakeCode || l.Lib.product.organizationID;
    } }]), o;
  }();
  function Rl(o) {
    var e, r, t = o, i = o.indexOf("-"), a = i != -1;
    return r = {}, a && (t = o.substring(0, i)), (e = Number(t)) != NaN && String(Number(e)) === t && (a ? r.handshakeCode = o : r.organizationID = o, r.LTS = Gt), r;
  }
  function Gf(o) {
    gt({ _pLoad: { isEmpty: Gt }, _license: o, _licenseServer: [] });
  }
  function Ll(o, e) {
    var r = !0;
    if (n.isArray(o) && o.length > 0) {
      var t = o[0];
      n.isString(t) && t != "" && t.indexOf("https://mlts.dynamsoft.com") == -1 && (r = !1);
    }
    return r && (e === "200001" || n.startsWith(e, "200001-"));
  }
  function jf(o, e, r) {
    return this.checkOSForAllowCore(o, e, r);
  }
  function cc(o, e, r, t, i, a) {
    var u, c = a;
    if (e && e.LTS) {
      if (!e || !n.isArray(e.Detail) || e.Detail.length == 0)
        return this.isLTS() ? n.Errors.LicenseNoCore(o, r) : n.Errors.LicenseEmptyOrInvalid(o), Nr(this, qs, xu).call(this, "", !0), vt;
    } else if (!e || !n.isArray(e.Detail) || e.Detail.length == 0)
      return this.isLTS() ? n.Errors.LicenseNoCore(o, r) : n.Errors.LicenseEmptyOrInvalid(o), Nr(this, qs, xu).call(this, "", !0), vt;
    var d, _, v, T, M = 0, A = 0, S = [], V = [], ne = vt, z = vt, ue = vt, xe = vt, Fe = vt;
    if (!this.isBindDomainOK(e.Domain))
      return n.Errors.LicenseBadDomain(o), c && Nr(this, Go, qo).call(this, yr(o)), vt;
    for (e.Detail.length > 0 && (u = (v = e.Detail[0]).Trial != "FALSE"), _ = 1; _ < e.Detail.length; _++)
      if ((v = e.Detail[_]).Trial == "FALSE" && u || v.Trial == "TRUE" && !u)
        return n.Errors.LicenseTrialFullMixed(o), c && Nr(this, Go, qo).call(this, yr(o)), vt;
    if (t.Core || t.Webcam) {
      var Qe, Ze = [], Ct = !1;
      for (_ = 0; _ < e.Detail.length; _++)
        if (v = e.Detail[_], (T = Nr(this, ku, lc).call(this, v.EnumLicenseType, v.LicenseType)).AndroidW && !l.navInfoSync.bAndroid && (v.OS = n.replaceAll(v.OS, "Wasm", "AndroidW")), t.Core && T.Core && this.checkOSForAllowCore(r, v.OS, o) || t.Core && T.Core && n.product.bActiveXEdition && T.ActiveX || t.Webcam && T.Webcam && !r) {
          if (!e.LTS) {
            if (!T.Webcam) {
              if (!n.isString(v.Version) || v.Version.indexOf(El) != 0) {
                Ze.push(v);
                continue;
              }
            }
          }
          if (n.product.bHTML5Edition) {
            if (T.ActiveX && !T.Html5)
              continue;
            V.push(v);
          } else {
            if (!T.ActiveX && T.Html5)
              continue;
            V.push(v);
          }
          Ct = !0;
        }
      if (!Ct && Ze.length > 0)
        return Ze.splice(0), Qe = [k, re].join("."), n.Errors.LicenseVersionNotCurrent(o, Qe), c && Nr(this, Go, qo).call(this, yr(o)), !1;
      Ze.splice(0);
    } else
      V = e.Detail;
    for (_ = 0; _ < V.length; _++) {
      var it = Gt;
      if (v = V[_], (T = Nr(this, ku, lc).call(this, v.EnumLicenseType, v.LicenseType)).AndroidW && !l.navInfoSync.bAndroid && (v.OS = n.replaceAll(v.OS, "Wasm", "AndroidW")), t.Core && T.Core || this.isAllowLicenseType(T, t)) {
        d = v.ExpireDate.replace(/-/g, "/");
        var Bt = v.Trial != "FALSE";
        if (Bt && !l.DWT.HideTrialMessage) {
          var yt = this.remainExpireDays(d);
          yt <= 5 && (n.isFunction(l.OnLicenseExpiredMessage) && l.OnLicenseExpiredMessage(d, yt), l.DWT.HideTrialMessage = !0);
        }
        if (this.isExpiredOrFuture(d, Bt))
          S.push(d);
        else if (e.LTS || T.Core && n.product.bHTML5Edition && parseInt(v.Version) >= kf || T.Core && n.product.bActiveXEdition || !T.Core) {
          var en = !1;
          if (T.Core)
            (this.checkOSForAllowCore(r, v.OS, o) || n.product.bActiveXEdition && T.ActiveX) && (en = !0);
          else {
            var Ft = r;
            t.Camera && (Ft = !0), Nr(this, kl, jf).call(this, Ft, v.OS, o) && (en = !0);
          }
          en ? this.isBrowserOK(v.Browser) || i ? (M++, it = vt) : z = Gt : t.Core ? ne = Gt : t.PDFRasterizer ? xe = Gt : (t.Webcam || t.Camera) && (Fe = Gt);
        } else
          ue = Gt;
        it && A++;
      }
    }
    if (M > 0)
      return Gt;
    if (A == 0)
      return this.setNoAllowedLicenseTypeError(o, r, t), c && Nr(this, Go, qo).call(this, yr(o)), vt;
    if (S.length > 0) {
      var st, nt = 0, ft = 1e20, Pt = "", Ot = (/* @__PURE__ */ new Date()).getTime();
      for (d = "", _ = 0; _ < S.length; _++)
        (st = this.parseDateFromString(S[_])).getTime() < Ot && st.getTime() > nt ? (nt = st.getTime(), d = S[_]) : st.getTime() > Ot && st.getTime() < ft && (ft = st.getTime(), Pt = S[_]);
      return d != "" ? (st = this.parseDateFromString(d), d = this.getLicenseDateString(st), n.Errors.LicenseExpired(o, d), this.isLTS() || Nr(this, qs, xu).call(this, d, u), c = !1) : Pt != "" ? (st = this.parseDateFromString(Pt), Pt = this.getLicenseDateString(st), n.Errors.LicenseIsFuture(o, Pt)) : (n.Errors.LicenseExpired(o, ""), c = !1, Nr(this, qs, xu).call(this)), c && Nr(this, Go, qo).call(this, yr(o)), vt;
    }
    if (ue)
      return n.Errors.LicenseLower(o), c && Nr(this, Go, qo).call(this, yr(o)), vt;
    var pn = l.navInfoSync;
    return z ? (pn.bEdge ? n.Errors.LicenseNoEdge(o) : pn.bChrome ? n.Errors.LicenseNoChrome(o) : pn.bFirefox ? n.Errors.LicenseNoFirefox(o) : pn.bIE ? n.Errors.LicenseNoIE(o) : pn.bSafari ? n.Errors.LicenseNoSafari(o) : n.Errors.LicenseNotSupportBorwser(o), c && Nr(this, Go, qo).call(this, yr(o)), vt) : ne ? (this.setNoAllowedLicenseTypeError(o, r, { Core: !0 }), c && Nr(this, Go, qo).call(this, yr(o)), vt) : xe ? (this.setNoAllowedLicenseTypeError(o, r, { PDFRasterizer: !0 }), c && Nr(this, Go, qo).call(this, yr(o)), vt) : Fe ? (this.setNoAllowedLicenseTypeError(o, r, { Webcam: !0 }), c && Nr(this, Go, qo).call(this, yr(o)), vt) : (n.Errors.LicenseEmptyOrInvalid(o), c && Nr(this, Go, qo).call(this, yr(o)), vt);
  }
  function qo(o) {
    var e = 0, r = o.message;
    n.isNumber(o.code) ? e = o.code : n.isString(r) && (e = -1), e != 0 && (Eu && Eu.error(r), n.isFunction(l.OnLicenseError) && l.OnLicenseError(r, e));
  }
  function zf() {
    var o = {};
    return n.Errors.FailedParseProductKey(o), (o = yr(o)).code;
  }
  function xu(o, e) {
    if (!n.detect.needUpgrade)
      if (this.isLTS()) {
        var r = l.DWT.licenseException.message;
        l.OnLTSLicenseError && l.OnLTSLicenseError(this.getPublicLicenseContent(r));
      } else
        Nr(this, sc, Fl).call(this, o, e);
  }
  function Fl(o, e) {
    var r = [], t = "is not valid", i = screen.width, a = i > 640 ? 640 : i - 10;
    if (o && o != "" && (t = o.indexOf("on") == -1 ? "has expired on " + o : "has expired " + o), r.push('<div style="padding:0 25px 25px 25px;">'), n.env.bMobile ? (r.push("The <strong>ProductKey</strong> is not valid."), e && (r.push(" Please <br /><ul><li>1. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a trial license</a>.</li>"), r.push("<li>2. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key?product=dwt&utm_source=in-product' target='_blank'>Update the ProductKey</a>.</li>"), r.push("</ul>"))) : e ? (r.push("You are seeing this message because your trial key "), r.push(t), r.push(". Two quick steps to extend your trial: <br /><div><ul>"), r.push("<li style='padding-left:25px'>1.<strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a new trial key</a></strong> and follow the instructions to set the new key</li>"), r.push("<li style='padding-left:25px'>2.Refresh your scan page and try again</li>"), r.push("</ul></div>If you run into any issues, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a>.")) : (r.push("You are seeing this message because the license for doc scanning support "), r.push(t), r.push(".<br /><div><ul>"), r.push("<li><strong>If you are the owner of the website</strong>, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/order/renewalList' target='_blank'>renew your license</a> and follow the instructions to set the new key. Please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a> if you need any help.</li>"), r.push("<li><strong>If you are an end-user</strong>, please inform the owner or developer of this website.</li>"), r.push("</ul></div>")), r.push("</div>"), l.DWT.ShowMessage(r.join(""), { width: a, height: 0, headerStyle: 1 }), n.env.bMobile) {
      var u = n.one(".ds-dwt-ui-dlg-wrap");
      u && u.length > 0 && (u[0].style.fontSize = "1.5em", u[0].style.lineHeight = "1.5em");
    }
  }
  function Hf() {
    Nr(this, sc, Fl).call(this, "", !0);
  }
  function Kf(o) {
    var e = vt, r = vt, t = vt, i = vt, a = vt, u = vt, c = vt, d = vt, _ = vt;
    return n.isString(o) && o != "" && n.each(o.split(";"), function(v) {
      var T = 1 * v;
      T == Pf || T == Af || T == xf || T == Mf ? e = Gt : T == Rf ? r = Gt : T == Bf ? t = Gt : T == Nf ? i = Gt : T == Vf ? a = Gt : T == Lf ? u = Gt : T == Ff ? c = Gt : T == Of ? d = Gt : T == Wf && (_ = Gt);
    }), { Core: e, PDFRasterizer: d, Webcam: c, barcode1D: r, QR: t, PDF417: i, DataMatrix: a, OCR: u, OCRPro: _, AndroidW: vt };
  }
  function lc(o, e) {
    var r = Nr(this, Pl, Kf).call(this, o), t = Nr(this, Al, Yf).call(this, e);
    return n.each(["Core", "Html5", "ActiveX", "PDFRasterizer", "Webcam", "barcode1D", "QR", "PDF417", "DataMatrix", "OCR", "OCRPro", "AndroidW"], function(i) {
      r[i] = r[i] || t[i];
    }), r;
  }
  function Yf(o) {
    var e = vt, r = vt, t = vt, i = vt, a = vt, u = vt, c = vt, d = vt, _ = vt, v = vt, T = vt, M = vt;
    return o && o != "" && ((o = o.toLowerCase()) == "html5;activex;oldie" ? (i = Gt, e = Gt) : o == "html5;activex" ? (r = Gt, i = Gt, e = Gt) : o.indexOf("html5") > -1 || o == "win=(aph) or mac=(ph) or linux(h)" ? (r = Gt, e = Gt) : o == "1d barcode reader" ? t = Gt : o == "2d barcode reader(qrcode)" ? a = Gt : o == "2d barcode reader(pdf417)" ? u = Gt : o == "2d barcode reader(data matrix)" ? c = Gt : o == "ocr" ? d = Gt : o == "webcam" ? _ = Gt : o == "pdf rasterizer" ? v = Gt : o == "proocr" && (T = Gt), o.indexOf("androidw") > -1 && (M = Gt, r = Gt)), { Core: e, Html5: r, ActiveX: i, PDFRasterizer: v, Webcam: _, barcode1D: t, QR: a, PDF417: u, DataMatrix: c, OCR: d, OCRPro: T, AndroidW: M };
  }
  function Ol(o) {
    var e = o.toLowerCase();
    return e.indexOf("wasm") > -1 || e.indexOf("mobile") > -1;
  }
  function Mu(o) {
    return o._isMobileMode() || !o._blts;
  }
  function dc(o) {
    return Wl.apply(this, arguments);
  }
  function Wl() {
    return (Wl = Ln(he.mark(function o(e) {
      var r, t, i;
      return he.wrap(function(a) {
        for (; ; )
          switch (a.prev = a.next) {
            case 0:
              if (e.__calic) {
                a.next = 27;
                break;
              }
              if (!Mu(e)) {
                a.next = 5;
                break;
              }
              a.next = 27;
              break;
            case 5:
              return l.DWT.UseCameraAddonWasm = !0, n.detect.bNeedWasm = !0, a.next = 9, Qs();
            case 9:
              if (!n.detect.wasmScriptLoaded) {
                a.next = 27;
                break;
              }
              return a.next = 12, Ka(e._bRemoteMode);
            case 12:
              return l.DWT.li({ instanceMode: l.DWT.EnumInstance.dwt_browser }, ""), a.next = 15, Fa(l.DWT.EnumInstance.dwt_browser, "");
            case 15:
              return ir(r = a.sent), t = l.WasmEnv.licMode, a.next = 20, l.WasmEnv.getLicenseInfo(r.ar, t, r.cu);
            case 20:
              if ((i = a.sent) && !i.message) {
                a.next = 25;
                break;
              }
              return n.Errors.LicenseEmptyOrInvalid(e), i && i.message && (e._errorString = i.message), a.abrupt("return");
            case 25:
              e.__calic = i, e.__calic.LTS = !0;
            case 27:
            case "end":
              return a.stop();
          }
      }, o);
    }))).apply(this, arguments);
  }
  function Bl() {
    return Nl.apply(this, arguments);
  }
  function Nl() {
    return (Nl = Ln(he.mark(function o() {
      var e, r;
      return he.wrap(function(t) {
        for (; ; )
          switch (t.prev = t.next) {
            case 0:
              return t.next = 2, _l();
            case 2:
              if (e = t.sent, !n.isString(e) || e == "") {
                t.next = 5;
                break;
              }
              return t.abrupt("return", e);
            case 5:
              return t.next = 7, Fa(l.DWT.EnumInstance.dwt_browser, "");
            case 7:
              return (r = t.sent) && r.cu && ir(r), t.abrupt("return", r.cu);
            case 10:
            case "end":
              return t.stop();
          }
      }, o);
    }))).apply(this, arguments);
  }
  function Ka(o) {
    return Vl.apply(this, arguments);
  }
  function Vl() {
    return (Vl = Ln(he.mark(function o(e) {
      var r, t, i, a;
      return he.wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (n.License.isLTS()) {
                u.next = 2;
                break;
              }
              return u.abrupt("return");
            case 2:
              if (u.prev = 2, r = l.DWT.li({ instanceMode: l.DWT.EnumInstance.dwt_desktop }, ""), !l.navInfoSync.bMobile || l.navInfoSync.bAndroid) {
                u.next = 11;
                break;
              }
              if (!e) {
                u.next = 10;
                break;
              }
              return u.next = 8, Bl();
            case 8:
              t = u.sent, n.isString(t) && t != "" && l.DWT.lsmid(t, "");
            case 10:
              return u.abrupt("return");
            case 11:
              if (r) {
                u.next = 28;
                break;
              }
              return u.prev = 12, u.next = 15, oo();
            case 15:
              return i = u.sent, u.next = 18, Ul(i);
            case 18:
              u.next = 28;
              break;
            case 20:
              if (u.prev = 20, u.t0 = u.catch(12), n.log(u.t0), !e) {
                u.next = 28;
                break;
              }
              return u.next = 26, Bl();
            case 26:
              a = u.sent, n.isString(a) && a != "" && l.DWT.lsmid(a, "");
            case 28:
              u.next = 33;
              break;
            case 30:
              u.prev = 30, u.t1 = u.catch(2), n.log(u.t1);
            case 33:
            case "end":
              return u.stop();
          }
      }, o, null, [[2, 30], [12, 20]]);
    }))).apply(this, arguments);
  }
  function Ul(o) {
    return Gl.apply(this, arguments);
  }
  function Gl() {
    return (Gl = Ln(he.mark(function o(e) {
      var r;
      return he.wrap(function(t) {
        for (; ; )
          switch (t.prev = t.next) {
            case 0:
              if (!e) {
                t.next = 7;
                break;
              }
              if (!(n.isArray(e.result) && e.result.length > 3)) {
                t.next = 5;
                break;
              }
              r = e.result[3], t.next = 7;
              break;
            case 5:
              if (!e.description) {
                t.next = 7;
                break;
              }
              return t.abrupt("return", { code: e.exception, message: e.description });
            case 7:
              n.isString(r) && r != "" && (l.DWT.lsmid(r, ""), l.DWT.lsmid2b(r));
            case 8:
            case "end":
              return t.stop();
          }
      }, o);
    }))).apply(this, arguments);
  }
  function hc(o, e, r, t) {
    return jl.apply(this, arguments);
  }
  function jl() {
    return (jl = Ln(he.mark(function o(e, r, t, i) {
      var a, u, c, d, _;
      return he.wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if (fr("getLicenseInfo", e), v.prev = 1, !n.License.isLTS()) {
                v.next = 19;
                break;
              }
              if (u = "", c = "", t != "") {
                v.next = 9;
                break;
              }
              return d = !!i, e && (d = e._bRemoteMode), v.next = 9, Ka(d);
            case 9:
              return v.next = 11, Fa(l.DWT.EnumInstance.dwt_desktop, t);
            case 11:
              return _ = v.sent, c = _.ar, u = _.cu, v.next = 16, r.getLicenseInfo(c, u, i);
            case 16:
              a = v.sent, v.next = 22;
              break;
            case 19:
              return v.next = 21, r.getLicenseInfo(l.DWT.ProductKey, "", i);
            case 21:
              a = v.sent;
            case 22:
              v.next = 27;
              break;
            case 24:
              throw v.prev = 24, v.t0 = v.catch(1), v.t0;
            case 27:
              return v.prev = 27, Yn("getLicenseInfo"), v.finish(27);
            case 30:
              return v.abrupt("return", a);
            case 31:
            case "end":
              return v.stop();
          }
      }, o, null, [[1, 24, 27, 30]]);
    }))).apply(this, arguments);
  }
  n.License = new Uf(), l.DWT.isPublicLicense = function() {
    return l.Lib.product.bPublicLTS;
  };
  var fc, Ta = l.navInfoSync, gc = !0, mc = !1, $s = Ta.bHTML5Edition, pc = 0, _c = mc;
  Ta.bIE && ((pc = Ta.IEVersion) === "" || pc >= 10 ? l.DWT.IfUseActiveXForIE10Plus == 0 ? $s = gc : ($s = mc, _c = gc, Ta.bHTML5Edition = $s) : ($s = mc, pc >= 9 && (_c = gc))), (fc = { name: "Dynamic Web TWAIN", bHTML5Edition: $s, bActiveXEdition: _c, _iImageCaptureDriverType: 3, _iBrokerProcessType: 1, getChromeEditionPath: l.dcp.getDSPath, getPKGPath: function() {
    return l.DWT.ResourcesPath + "/dist/mac/DynamicWebTWAINMacEdition.pkg";
  }, getMSIPath: function() {
    return l.DWT.ResourcesPath + "/dist/win/DynamicWebTWAINPlugIn.msi";
  }, getActiveXCABx86Path: function() {
    return l.DWT.ResourcesPath + "/dist/win/ActiveX/DynamicWebTWAIN.cab";
  }, getActiveXCABx64Path: function() {
    return l.DWT.ResourcesPath + "/dist/win/ActiveX/DynamicWebTWAINx64.cab";
  }, onlineResources: "https://demo.dynamsoft.com/DWT/Resources/", strMIMEType: "Application/DynamicWebTwain-Plugin", strFullClassID: "E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758", scripts: {}, dwtConfigLoaded: !1, dwtConfigLoading: !1, getServerVersionInfo: function(o) {
    var e = l.DWT.ServerVersionInfo;
    return Ta.bWin || (Ta.bMac ? e = l.DWT.ServerMacVersionInfo : (Ta.bLinux || Ta.bAndroid || Ta.bChromeOS || Ta.bHarmonyOS) && (e = l.DWT.ServerLinuxVersionInfo)), o ? e : l.Lib.replaceAll(e, ",", "");
  }, getDWTPrefix: function() {
    return l.DWT.CustomMode === !0 ? "dwtc_" : "dwt_";
  }, loadResourcePath: !1, loadingResourcePath: !1, handshakeCode: void 0, organizationID: void 0, licenseServer: void 0, sessionPassword: "", bPublicLTS: !0, refProductKey: void 0, ltsDebug: !1, bDWTLoading: !1, bAndroidConnected: !1, unloadQueue: [], appendBrowserLicenseWhenServiceMode: dc, CustomizableDisplayInfo: H }).bChromeEdition = fc.bHTML5Edition;
  var Jf = fc, ao = l.navInfoSync, zl = ao.bWin, Xf = ao.bMac, Qf = ao.bLinux, Zf = ao.bSafari, qf = ao.bFirefox, $f = ao.bChrome, eg = location.hostname, sa = location.pathname, vc = 0, Pu = ao.bMobile, Hl = parseFloat(ao.strBrowserVersion);
  if (ao.bWin || ao.bMac || ao.bLinux || ao.bChromeOS) {
    if (l.navInfo) {
      var Au = l.navInfo;
      Pu = Pu || Au.bAndroid || Au.bPad || Au.biPhone || Au.biPad;
    }
  } else
    Pu = !0;
  eg === "" ? zl && sa.lastIndexOf("\\") > 1 ? sa = sa.substring(1, sa.lastIndexOf("\\")).replace(/%20/g, " ") : (vc = 1, sa = sa.substring(1, sa.lastIndexOf("/")).replace(/%20/g, " ")) : (vc = 1, sa = sa.substring(0, sa.lastIndexOf("/")));
  var tg = { bChrome: $f, bFirefox: qf, bSafari: Zf, bIE: ao.bIE, bEdge: ao.bEdge, bWin: zl, bMac: Xf, bLinux: Qf, iPluginLength: 0, bFileSystem: ao.bFileSystem, bMobile: Pu, strIEVersion: ao.IEVersion, strChromeVersion: ao.bChrome ? Hl : "", strFirefoxVersion: ao.bFirefox ? Hl : "", basePath: sa, pathType: vc, isDesktopViewer: function() {
    return l.navInfoSync.bWin || l.navInfoSync.bLinux || l.navInfoSync.bChromeOS || l.navInfoSync.bMac;
  }, isPadViewer: function() {
    return l.navInfoSync.bPad || l.navInfoSync.biPad;
  }, isMobileViewer: function() {
    return l.navInfoSync.bMobile || l.navInfoSync.biPhone || l.navInfoSync.bAndroid || l.navInfoSync.bHarmonyOS;
  }, isWasmUseFastcomp: function() {
    if (l.navInfoSync.bUseUserAgent) {
      var o = parseInt(l.navInfoSync.strBrowserVersion);
      if (l.navInfoSync.bSafari && o >= 13 || l.navInfoSync.bFirefox && o >= 94 || l.navInfoSync.bChrome && o >= 94)
        return !1;
    } else {
      var e = navigator.userAgentData, r = [], t = 0;
      for (("brands" in e) && n.isArray(e.brands) && e.brands.length > 0 ? r = e.brands : ("uaList" in e) && n.isArray(e.uaList) && e.uaList.length > 0 && (r = e.uaList), t = 0; t < r.length; t++) {
        var i = r[t];
        if (i.brand && (i.brand == "Chromium" || i.brand == "Google Chrome") && i.version && parseInt(i.version, 10) >= 94)
          return !1;
      }
    }
    return !0;
  } }, Cs = { getHex: function(o) {
    var e = Number(o).toString(16).toUpperCase();
    return e.length == 1 && (e = ["0", e].join("")), e;
  }, getColor: function(o) {
    var e, r, t;
    return t = o >> 16, r = (65280 & o) >> 8, e = 255 & o, ["#", Cs.getHex(t), Cs.getHex(r), Cs.getHex(e)].join("");
  }, RGB2BGR: function(o) {
    return (255 & o) << 16 | 65280 & o | o >> 16;
  } };
  Cs.BGR2RGB = Cs.RGB2BGR;
  var ng = document.location.protocol, rg = location.hostname, Kl = l.navInfoSync.bSSL;
  n.env = tg, n.product = Jf, n.mix(n, Cs), n.BIO = Q, l.MSG = { Loading: "Processing...", LoadingTiff: "Processing tiff...", LoadingPdf: "Processing pdf...", Encoding: "Processing...", ConvertingToBlob: "Converting to blob...", ConvertingToBase64: "Converting to base64...", SavingPdf: "Saving pdf...", SavingTiff: "Saving tiff...", Downloading: "Downloading...", Uploading: "Uploading...", Wasm_Initializing: "Initializing...", Init_LookingLicense: "Looking for license...", Init_LoadingViewerJs: "Loading the viewer script...", Init_AllJsLoaded: "All scripts loaded.", Init_FireBeforeInitEvt: "OnWebTwainWillInit triggered.", Init_InitActiveX: "Initializing the ActiveX...", Init_InitH5: "Initializing...", Init_InitWasm: "Initializing WebAssembly mode...", Init_DownloadingWasm: "Downloading WebAssembly code...", Init_CompilingWasm: "Compiling WebAssembly code...", Init_InitDynamsoftService: "Initializing the Service mode...", Init_CheckDWT: "Looking for the service module...", Init_CheckDWTVersion: "Checking the service module...", Init_CreatingDWT: "Creating a WebTwain instance...", Init_ConfiguringDWT: "Configuring the WebTwain instance...", Init_SetLicenseForDWT: "Activating the WebTwain instance...", Init_GetLicenseInfoForDWT: "Decoding the license...", Init_CheckingLicense: "Checking the license...", Err_BrowserNotSupportWasm: "It looks like your browser doesn't support the WebAssembly technology which is required to use the library.", Err_ServiceModeNotSupportMobile: "Service Mode does not support your Operating System. Please contact the site administrator." };
  var Ca = { config: { debug: vt, devMode: vt, bDiscardBlankImage: vt, msg: [], msgPrefix: '<span style="color:#cE5E04"><b>', msgSuffix: "</b></span><br />" }, detect: { ssl: Kl, dcpStatus: 0, dcpCallbackType: 0, arySTwains: [], bFirst: Gt, bOK: vt, __dialog: vt, scriptLoaded: vt, wasmScriptLoaded: vt, wasmPdfReaderLoaded: vt, cssLoaded: vt, viewerScriptLoaded: vt, bNoControlEvent: vt, bNeedUpgradeEvent: vt, bPromptJSOrServerOutdated: vt, bNeedWasm: vt, detectType: Kl ? 1 : ng === "http:" || rg === "" ? 0 : -1, tryTimes: 0, ports: [{ port: l.DWT.SSLPort, ssl: Gt }, { port: l.DWT.Port, ssl: vt }], cUrlIndex: 0, urls: [], onNoControl: vt, needUpgrade: vt, OnDetectNext: vt, OnCreatWS: vt, bMaskShow: vt }, page: { bUnload: vt, OnUnload: vt }, tmp: { IfAllowLocalCache: Gt, EmptyFunction: function() {
  } }, appendMessage: function(o) {
    typeof o == "string" ? Ca.config.msg.push(o) : Object.prototype.toString.call(o) === "[object Array]" && l.Lib.each(o, function(e) {
      Ca.appendMessage(e);
    });
  }, appendRichMessage: function(o) {
    Ca.appendMessage([Ca.config.msgPrefix, o, Ca.config.msgSuffix]);
  }, clearMessage: function() {
    return Ca.config.msg.splice(0), Gt;
  }, getRealPath: function(o) {
    return o === void 0 ? "" : Ca.env.pathType == 1 ? Ca.env.basePath + o : Ca.env.basePath + o.replace(new RegExp("/", "g"), "\\\\");
  }, isLocalIP: function(o) {
    return o === void 0 || o && (o === "127.0.0.1" || o === "localhost" || o === "local.dynamsoftwebtwain.com" || o === "local.dynamsoft.com");
  }, IsNeedLoadWasm: function() {
    return !n.product.bActiveXEdition && (n.detect.bNeedWasm || n.product.UseLocalService === !1 || n.product.UseLocalService && n.env.bMobile || l.DWT.UseBarcodeAddonWasm);
  }, getShadowRoot: function(o) {
    var e = o;
    if (n.win.ShadowRoot)
      for (; e; ) {
        if (e instanceof n.win.ShadowRoot)
          return e;
        e = e.parentNode;
      }
    return !1;
  }, isShadowRoot: function(o) {
    return !!(n.win.ShadowRoot && o instanceof n.win.ShadowRoot);
  } };
  n.mix(n, Ca), n.Addon_Events = [], n.Addon_Sendback_Events = [], n.install = { _divDWTNonInstallContainerID: "dwt-NonInstallContainerID", _divDWTemessageContainer: "", _dlgInstall: !1 }, n.install._strNonInstallDIV = ['<div style="text-align:center;" id="', n.install._divDWTNonInstallContainerID, '"></div>'].join("");
  var Oo = l.DWT;
  Oo.CloseDialog = function() {
    var o = n.install._dlgInstall;
    if (o) {
      var e = n.all(".dynamsoft-dialog-close");
      n.each(e, function(r, t) {
        n.removeEventListener(r, "click", Oo.CloseDialog);
      }), o.open && o.close(), document.body.removeChild(o), n.install._dlgInstall = !1;
    }
  }, Oo.ShowDialog = function(o, e, r, t, i) {
    if (r !== !1) {
      var a, u = { width: o, height: e, position: "absolute" };
      t ? (a = ['<div class="dynamsoft-dwt-dialog-body">', r, "</div>"].join(""), u.closeButton = !1) : a = ['<div class="ds-dwt-ui-showdlg">', '<div class="dynamsoft-dwt-dialog-body">', '<div class="dynamsoft-dwt-dlg-header">', i ? "" : '<div class="dynamsoft-dialog-close"></div>', "</div>", r, "</div>", "</div>"].join(""), i && (u.closeButton = !1), Oo.ShowMessage(a, u);
    }
  }, Oo.ShowMessage = function(o, e) {
    var r, t, i, a, u, c = n.install, d = "ds-dwt-ui-dlg", _ = "ds-dwt-ui-dlg-wrap", v = screen.width, T = !0, M = 0, A = !0, S = !0, V = 0, ne = "fixed", z = "Error", ue = n.product.bActiveXEdition, xe = !1, Fe = null;
    if (e && (r = e.width, t = e.height, e.seconds && (M = e.seconds), e.headerStyle && (V = e.headerStyle), e.backgroundStyle == 1 && (xe = !0), e.closeButton === !1 && (A = !1), e.bAutoClose && (i = e.bAutoClose, A = !0), e.bReadyClosed == 0 && (T = !1), e.position && (ne = e.position), e.caption && (z = e.caption), n.isFunction(e.onClose) && (Fe = e.onClose)), r ? r > v - 10 && (r = v - 10) : r = v > 600 ? 600 : v - 10, t || (t = "100%"), V == 1 ? o = ['<div class="dynamsoft-dialog">', '<div class="dynamsoft-dwt-dialog-body">', '<div class="dynamsoft-dwt-dlg-header">', A ? '<div class="dynamsoft-dialog-close"></div>' : "", "</div>", o, "</div></div>"].join("") : V == 2 && (o = ['<div class="dynamsoft-dialog">', '<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:35px;margin-left:15px">', z, "</span>", A ? '<div class="dynamsoft-dialog-close"></div>' : "", "</div>", '<div class="dynamsoft-dwt-ltsdlg-body" style="padding:25px 50px 20px 50px;">', o, "</div></div>"].join("")), n.one("." + d).length == 0) {
      var Qe = document.createElement("div"), Ze = document.createElement("div"), Ct = document.createElement("div");
      if (Qe.className = d, Ze.className = _, Ze.style.margin = "auto", Ze.style.zIndex = "9999", Ze.style.position = "relative", Ze.style.border = "0", i && ((a = document.createElement("div")).className = "dynamsoft-dialog-close", Ze.insertBefore(a, Ze.firstElementChild), (u = document.createElement("div")).className = "dynamsoft-dialog-closeTimer", u.style.width = "100%", u.style.height = "2px", u.style.marginTop = "-2px", u.style.backgroundColor = "#fe8e14", Ze.insertBefore(u, Ze.firstElementChild)), Ze.appendChild(Ct), Ct.innerHTML = o, Qe.appendChild(Ze), document.body.appendChild(Qe), Fe) {
        var it = n.one(".dynamsoft-dialog-close", n.one(Qe));
        it && ((it = it[0]).onClose = function() {
          n.removeEventListener(it, "click", it.onClose), it.onClose = null, Fe();
        }, n.addEventListener(it, "click", it.onClose));
      }
      if (xe ? n.setBackOpacity({ opacity: 0.4, grayHex: 0 }) : n.setBackOpacity({}), c._dlgInstall = Qe, n.dialog.setup(c._dlgInstall, !1), l.navInfoSync.bIE) {
        var Bt = document.createElement("iframe");
        Bt.frameborder = "0", Bt.marginheight = "0", Bt.marginwidth = "0", Bt.style.border = "0", Bt.style.backgroundColor = "transparent", Bt.style.position = "absolute", Bt.style.left = 0, Bt.style.top = 0, Bt.style.width = "100%", Bt.style.height = document.body.clientHeight + "px", Bt.style.margin = "0 auto", Bt.style.zIndex = "9990", Bt.src = ["javas", "cript:", '""'].join("");
        var yt = n.one(".dynamsoft-backdrop");
        yt && yt.length > 0 && (yt[0].innerHTML = "", yt[0].appendChild(Bt));
      }
    } else
      S = !1;
    var en = n.one("." + _);
    if (en && en.getEL() && (en[0].style.width = r + "px", n.isNumber(t) && t > 0 ? en[0].style.height = t + "px" : en[0].style.height = "100%", S || n.each(en[0].childNodes, function(nt) {
      if (nt.tagName == "DIV" && nt.className != "dynamsoft-dialog-close" && nt.className != "dynamsoft-dialog-closeTimer")
        return nt.innerHTML = o, !1;
    })), ue) {
      var Ft = n.one(".dynamsoft-dialog");
      Ft && Ft.getEL() && (Ft.getEL().style.border = "1px solid #999");
    }
    if (c._dlgInstall.open && c._dlgInstall.close(), c._dlgInstall.showModal({ position: ne }), c._dlgInstall.bReadyClosed = T, xe && n.setBackOpacity({}), A) {
      var st = n.all(".dynamsoft-dialog-close");
      n.each(st, function(nt, ft) {
        n.addEventListener(nt, "click", Oo.CloseDialog);
      }), st.length > 0 && i && M > 0 && setTimeout(n._zdgb_xkz_dhk, 100);
    }
  }, Oo.OnWebTwainPreExecute || (Oo.OnWebTwainPreExecute = function(o, e) {
    l.Lib.detect.OnWebTwainPreExecute(l.DWT.IfConfineMaskWithinTheViewer, o, e);
  }), Oo.OnWebTwainPostExecute || (Oo.OnWebTwainPostExecute = function() {
    l.Lib.detect.OnWebTwainPostExecute();
  }), l.OnWebTwainPreExecuteCallback || (l.OnWebTwainPreExecuteCallback = function(o, e) {
    n.isFunction(Oo.OnWebTwainPreExecute) && Oo.OnWebTwainPreExecute(o, e);
  }), l.OnWebTwainPostExecuteCallback || (l.OnWebTwainPostExecuteCallback = function() {
    n.isFunction(Oo.OnWebTwainPostExecute) && Oo.OnWebTwainPostExecute();
  });
  function Yl() {
    var o = H, e = l.DWT && l.DWT.CustomizableDisplayInfo;
    e && n.isString(e.loaderBarSource) && e.loaderBarSource != "" ? n.loaderBarSource = e.loaderBarSource : l.navInfoSync.bIE ? n.loaderBarSourceIE = o.loaderBarSource : n.loaderBarSource = o.loaderBarSource, e && n.isString(e.loaderBarClassName) && e.loaderBarClassName != "" ? n.loaderBarClassName = e.loaderBarClassName : n.loaderBarClassName = o.loaderBarClassName, e && n.isString(e.loaderBarBackgroundColor) ? n.loaderBarBackgroundColor = e.loaderBarBackgroundColor : n.loaderBarBackgroundColor = o.loaderBarBackgroundColor;
  }
  n.win.DCP_DWT_OnClickCloseInstall = function(o, e) {
    var r = l.Lib;
    e || l.DWT.CloseDialog();
    var t = r.get(r.install._divDWTNonInstallContainerID);
    if (t && t.parentNode && t.parentNode.removeChild(t), o && r.isDOM(o) && r.show(o), o && r.isString(o))
      r.show(o);
    else {
      var i, a;
      if (a = l.DWT.Containers)
        for (i = 0; i < a.length; i++)
          a[i].ContainerId && r.show(a[i].ContainerId);
      if (a = l.DWT.DynamicContainers)
        for (i = 0; i < a.length; i++)
          a[i].ContainerId && r.show(a[i].ContainerId);
      a = null;
    }
    r.install._divDWTemessageContainer != "" && r.show(r.install._divDWTemessageContainer);
  }, n.detect.showMask = function(o, e) {
    n.detect.bMaskShow = !0, l.DWT.ScanDirectly || n.isFunction(l.OnWebTwainPreExecuteCallback) && l.OnWebTwainPreExecuteCallback(o, e);
  }, n.detect.OnWebTwainPreExecute = function(o, e, r) {
    var t, i, a = o;
    if (a && (e ? i = e._containerElement : l.DWT.Containers && l.DWT.Containers.length > 0 && l.DWT.Containers[0].ContainerId && (i = l.Lib.get(l.DWT.Containers[0].ContainerId)), i)) {
      t = i.getBoundingClientRect();
      var u = i.firstElementChild;
      if (u) {
        for (u = u.firstElementChild; u; ) {
          if (n.isFunction(u.getBoundingClientRect)) {
            t = u.getBoundingClientRect();
            break;
          }
          u = u.nextSibling;
        }
        i = u;
      }
    }
    (t == null || l.DWT.Containers && l.DWT.Containers.length > 1 || l.DWT.Containers && l.DWT.Containers.length == 1 && (t.width == 0 || t.height == 0)) && (a = !1, i = null);
    var c = r ?? {};
    a && (c = { confined: a, wrapperEl: i }), n.showMask(c);
  }, n.detect.hideMask = function() {
    n.detect.bMaskShow = !1, l.DWT.ScanDirectly || n.isFunction(l.OnWebTwainPostExecuteCallback) && l.OnWebTwainPostExecuteCallback();
  }, n.detect.OnWebTwainPostExecute = n.hideMask, n.domReady(function() {
    var o = document.createElement("style"), e = ["dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-backdrop{position:fixed;background:rgba(128,128,128,0.1);top:0;bottom:0;left:0;right:0;z-index:-99999999;}.dynamsoft-dwt-dialogProgress{width:330px;background:#FFF}.dynamsoft-finalMessage{margin:0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:7px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:280px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{width:290px;height:290px;margin:auto;color:#CCC;border-width:1px;background:#FFF}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.ds-dwt-loaderBar-noserver-parent{height:100%;}.ds-dwt-loaderBar-noserver{margin: 0 auto;padding-top: 50px;text-align: center;}.ds-dwt-loaderBar-noserver img{height: 100px}"].join("");
    o.type = "text/css";
    try {
      o.appendChild(document.createTextNode(e));
    } catch {
      o.styleSheet.cssText = e;
    }
    document.body.appendChild(o);
  }), n._zdgb_xkz_dhk = function() {
    var o = n.install._dlgInstall;
    if (o) {
      var e = n.one(".dynamsoft-dialog-closeTimer", o);
      if (e.getEL()) {
        var r = parseInt(e.getEL().style.width);
        (r -= 1) <= 0 ? l.DWT.CloseDialog() : (e.getEL().style.width = r + "%", setTimeout(n._zdgb_xkz_dhk, 100));
      }
    }
  }, n.ShowLicenseDialog = l.DWT.ShowMessage, n.createLoadingBarContent = function() {
  }, n.openLoadingMsg = function() {
    n.product.bHTML5Edition && (Yl(), n.env.bMobile && fr("openLoadingMsg", null, { width: "280px" }));
  }, n.showLoadingMsg = function() {
  }, n.closeLoadingMsg = function(o) {
    n.product.bHTML5Edition && n.env.bMobile && Yn("closeLoadingMsg:" + o);
  };
  var Jl = !0;
  function Xl() {
    if (Jl) {
      var o = l.DWT.CustomizableDisplayInfo, e = {};
      n.mix(e, H), o && (o.loaderBarClassName && (e.loaderBarClassName = o.loaderBarClassName), o.loaderBarSource && (e.loaderBarSource = o.loaderBarSource), o.loaderBarWidth && (e.loaderBarWidth = o.loaderBarWidth), o.loaderBarHeight && (e.loaderBarHeight = o.loaderBarHeight), o.errorMessages && n.mix(e.errorMessages, o.errorMessages), o.generalMessages && n.mix(e.generalMessages, o.generalMessages), o.customProgressText && n.mix(e.customProgressText, o.customProgressText), o.buttons && (o.buttons.titles && n.mix(e.buttons.titles, o.buttons.titles), o.buttons.bShowAllButtons && n.mix(e.buttons.bShowAllButtons, o.buttons.bShowAllButtons), o.buttons.visibility && n.mix(e.buttons.visibility, o.buttons.visibility)), o.dialogText && n.mix(e.dialogText, o.dialogText)), l.Lib.product.CustomizableDisplayInfo = e, Yl(), Jl = !1;
    }
  }
  n._funsAfterConfigLoaded = [], n._safePromptCustomMsg = function(o) {
    n.product.loadResourcePath ? (Xl(), o && o()) : o && n._funsAfterConfigLoaded.push(o);
  };
  var eu = l.navInfoSync, Es = n.win, Ql = Es.document;
  function Zl() {
    if (n.detect.cssLoaded)
      return n.Promise.resolve();
    var o = l.DWT.ResourcesPath, e = "";
    eu.bFileSystem || (e = n.timestamp);
    var r = [[o, "/src/dynamsoft.webtwain.css", e].join("")];
    return n.product.bHTML5Edition && l.DWT.UseDefaultViewer && r.push([o, "/src/dynamsoft.viewer.css", e].join("")), new n.Promise(function(t) {
      l.navInfoSync.bSafari ? (n.addAllCss(r, !1, function() {
        n.detect.cssLoaded = Gt;
      }), n.detect.cssLoaded = Gt, t()) : n.addAllCss(r, !1, function() {
        n.detect.cssLoaded = Gt, t();
      });
    });
  }
  function us(o) {
    if (function() {
      var c = U;
      if (l.DWT.CertificateConfig) {
        var d = l.DWT.CertificateConfig;
        n.isString(d.URL) || (d.URL = c.URL), (!n.isNumber(d.UpdateDaysBeforeExpired) || d.UpdateDaysBeforeExpired <= 0) && (d.UpdateDaysBeforeExpired = c.UpdateDaysBeforeExpired);
      } else
        l.DWT.CertificateConfig = c;
      n.isString(l.DWT.ProductKey) && (l.DWT.ProductKey = n.trim(l.DWT.ProductKey)), l.navInfoSync.bAndroid && l.DWT.Host == "127.0.0.1" && (l.DWT.Host = "local.dynamsoft.com"), n.isUndefined(l.DWT.UseLocalService) ? n.env.bMobile ? n.product.UseLocalService = !1 : n.product.UseLocalService = !0 : n.env.bMobile && !l.navInfoSync.bAndroid ? n.product.UseLocalService = !1 : n.product.UseLocalService = l.DWT.UseLocalService, l.navInfo && (l.navInfoSync.bMac || l.navInfoSync.bWin) && (l.navInfo.bEmbed = !1, l.navInfo.bArm64 = !1, l.navInfo.bMips64 = !1);
    }(), n.product.loadResourcePath || n.product.loadingResourcePath)
      return n.product.loadResourcePath ? Zl() : n.Promise.resolve();
    n.product.loadingResourcePath = !0, (l.DWT.Port > 0 || l.DWT.SSLPort > 0) && (n.detect.ports = [{ port: l.DWT.Port, ssl: !1 }, { port: l.DWT.SSLPort, ssl: !0 }], n.LS.removeItem("DWT_port"), n.LS.removeItem("DWT_ssl")), Xl(), n._safePromptCustomMsg(), n.each(n._funsAfterConfigLoaded, function(c) {
      try {
        n.isFunction(c) && c();
      } catch {
      }
    }), n.showLoadingMsg(-1, "", l.MSG.Init_LookingLicense);
    var e = n.one(".dynamsoft_waiting").getEL();
    e && e.parentNode && e.parentNode.removeChild(e);
    var r = l.DWT.ResourcesPath, t = "";
    eu.bFileSystem || (t = n.timestamp);
    var i = Gt, a = [];
    eu.bSafari && (i = vt), a.push([r, "/dynamsoft.webtwain.install.js", t].join("")), l.DWT.bNpm && (a = []), n.product.bHTML5Edition && l.DWT.UseDefaultViewer && a.push([r, "/src/dynamsoft.viewer.js", t].join(""));
    var u = !1;
    return l.navInfoSync.bIE && (u = l.navInfoSync.strBrowserVersion <= 7), !u && n.License.isLTS() && a.push([r, "/src/dynamsoft.lts.js", t].join("")), a.length > 0 && n.showLoadingMsg(-1, "", l.MSG.Init_LoadingViewerJs), Zl().then(function() {
      return new n.Promise(function(c, d) {
        n.addScripts(a, i, !1, function(_) {
          if (!_)
            return n.product.loadingResourcePath = !1, n.getLogger().error("load js failed."), void d();
          if (n.showLoadingMsg(-1, "", l.MSG.Init_AllJsLoaded), n.detect.scriptLoaded = !0, n.product.bHTML5Edition && (n.closeAll = n.html5.closeAll), n.isUndefined(l.DWT.UseLocalService) ? n.env.bMobile ? n.product.UseLocalService = !1 : n.product.UseLocalService = !0 : n.env.bMobile && !l.navInfoSync.bAndroid ? n.product.UseLocalService = !1 : n.product.UseLocalService = l.DWT.UseLocalService, n.product._srcUseLocalService = n.product.UseLocalService, !(n.bNode || l.navInfoSync.bJSDom)) {
            if (n.isArray(l.aryAddonReadyFun)) {
              for (var v = 0; v < l.aryAddonReadyFun.length; v++) {
                var T = l.aryAddonReadyFun[v];
                if (n.isFunction(T))
                  try {
                    T(n);
                  } catch (M) {
                    n.log(M.stack || M, "error"), setTimeout(function() {
                      throw M;
                    }, 0);
                  }
              }
              l.aryAddonReadyFun = [];
            }
          }
          n.product.loadResourcePath = !0, n.product.loadingResourcePath = !1, l.DWT.OnWebTwainWillInit && l.DWT.OnWebTwainWillInit(), c();
        });
      });
    });
  }
  var Ru = [];
  function ql() {
    var o, e = Ru.length;
    for (o = 0; o < e; o++)
      Ru[o]();
    Ru.splice(0);
  }
  function $l() {
    if (l.DWT.Containers || l.DWT.ProductKey) {
      if (n.product.dwtConfigLoaded || n.product.dwtConfigLoading)
        return;
      n.product.dwtConfigLoading = !0;
      var o = eu.bFileSystem, e = n.env.basePath, r = l.DWT.ResourcesPath, t = "";
      n.isArray(l.DWT.Containers) || (l.DWT.Containers = []), !o && (r !== void 0 && r != "" || (r = e), r.length > 0 && r.charAt(r.length - 1) == "/" && (r = r.substr(0, r.length - 1)), t = n.timestamp, l.DWT.ResourcesPath = r), n.product.bActiveXEdition ? n.addScript([r, "/src/dynamsoft.webtwain.activex.js", t].join(""), !0, !1, function() {
        n.product.dwtConfigLoaded = !0, n.product.dwtConfigLoading = !1, ql();
      }) : (n.product.dwtConfigLoaded = !0, n.product.dwtConfigLoading = !1, ql());
    } else
      setTimeout($l, 100);
  }
  function Ds() {
    return n.product.dwtConfigLoaded ? n.Promise.resolve() : new n.Promise(function(o) {
      Ru.push(o), n.domReady(function() {
        setTimeout($l, 100);
      });
    });
  }
  n.domReady(function() {
    eu.bIE && Es.addEventListener && Es.addEventListener("unload", l.DWT.Unload, !1), Es && (n.addEventListener(Es, "focus", function() {
      var o = l.DWT.ContainerMap;
      o && n.each(o, function(e, r) {
        e && e._OnPageFocus && e._OnPageFocus();
      });
    }), n.addEventListener(Es, "blur", function() {
      if (l.navInfoSync.bWin) {
        var o = l.DWT.ContainerMap;
        o && n.each(o, function(e, r) {
          e && e._OnPageBlur && e._OnPageBlur();
        });
      }
    }), n.addEventListener(Ql, "visibilitychange", function() {
      if (l.navInfoSync.bWin && Ql.visibilityState == "hidden") {
        var o = l.DWT.ContainerMap;
        o && n.each(o, function(e, r) {
          e && e._OnPageBlur && e._OnPageBlur();
        });
      }
    })), Ds().then(function() {
      return l.DWT.Containers && l.DWT.Containers.length > 0 && l.DWT.AutoLoad;
    }).then(function(o) {
      if (o)
        return n.product.bDWTLoading ? void 0 : (n.product.bDWTLoading = Gt, us().then(function() {
          return n.openLoadingMsg(), Qs().then(l.DWT._innerLoad).then(function() {
            n.product.bDWTLoading = !1, n.closeLoadingMsg();
          }, function() {
            n.product.bDWTLoading = !1, n.closeLoadingMsg();
          });
        }));
    }, function() {
    });
  });
  function ig(o) {
    if (n.isUndefined(o))
      return !1;
    var e, r, t, i = o.toString().toLowerCase(), a = (t = i.toLowerCase().replace(n.product.name.toLowerCase() + " ", ""), (t = n.replaceAll(t, "[.]", ",")).split(","));
    e = n.product.bActiveXEdition ? l.DWT.ActiveXVersion : n.product.getServerVersionInfo(!0), r = (e = n.replaceAll(String(e), "[.]", ",")).split(",");
    for (var u = a.length > r.length ? a.length : r.length, c = 0; c < u; c++) {
      if (a[c] == null && (a[c] = 0), r[c] == null && (r[c] = 0), parseInt(a[c]) < parseInt(r[c]))
        return !1;
      if (parseInt(a[c]) > parseInt(r[c]))
        return !0;
    }
    return !0;
  }
  function ed(o, e) {
    var r = o.split(","), t = e.split(",");
    return r.length > 3 && n.trim(r[0]) == t[0] && (n.trim(r[1]) > t[1] || n.trim(r[1]) == t[1] && n.trim(r[2]) > t[2] || n.trim(r[1]) == t[1] && n.trim(r[2]) == t[2] && parseInt(n.trim(r[3])) >= parseInt(t[3]));
  }
  var og = { 553: function(o) {
    o = function(e) {
      var r, t = Object.prototype, i = t.hasOwnProperty, a = (xe = typeof Symbol == "function" ? Symbol : {}).iterator || "@@iterator", u = xe.asyncIterator || "@@asyncIterator", c = xe.toStringTag || "@@toStringTag";
      function d(st, nt, ft) {
        return Object.defineProperty(st, nt, { value: ft, enumerable: !0, configurable: !0, writable: !0 }), st[nt];
      }
      try {
        d({}, "");
      } catch {
        d = function(nt, ft, Pt) {
          return nt[ft] = Pt;
        };
      }
      function _(st, nt, ft, Pt) {
        var Ot, pn, un, An;
        return nt = nt && nt.prototype instanceof ne ? nt : ne, nt = Object.create(nt.prototype), Pt = new yt(Pt || []), nt._invoke = (Ot = st, pn = ft, un = Pt, An = T, function(Mr, tr) {
          if (An === A)
            throw new Error("Generator is already running");
          if (An === S) {
            if (Mr === "throw")
              throw tr;
            return Ft();
          }
          for (un.method = Mr, un.arg = tr; ; ) {
            var Qn = un.delegate;
            if (Qn && (Qn = function wi(Xr, Mn) {
              var ci = Xr.iterator[Mn.method];
              if (ci === r) {
                if (Mn.delegate = null, Mn.method === "throw") {
                  if (Xr.iterator.return && (Mn.method = "return", Mn.arg = r, wi(Xr, Mn), Mn.method === "throw"))
                    return V;
                  Mn.method = "throw", Mn.arg = new TypeError("The iterator does not provide a 'throw' method");
                }
                return V;
              }
              return (ci = v(ci, Xr.iterator, Mn.arg)).type === "throw" ? (Mn.method = "throw", Mn.arg = ci.arg, Mn.delegate = null, V) : (ci = ci.arg) ? ci.done ? (Mn[Xr.resultName] = ci.value, Mn.next = Xr.nextLoc, Mn.method !== "return" && (Mn.method = "next", Mn.arg = r), Mn.delegate = null, V) : ci : (Mn.method = "throw", Mn.arg = new TypeError("iterator result is not an object"), Mn.delegate = null, V);
            }(Qn, un), Qn)) {
              if (Qn === V)
                continue;
              return Qn;
            }
            if (un.method === "next")
              un.sent = un._sent = un.arg;
            else if (un.method === "throw") {
              if (An === T)
                throw An = S, un.arg;
              un.dispatchException(un.arg);
            } else
              un.method === "return" && un.abrupt("return", un.arg);
            if (An = A, (Qn = v(Ot, pn, un)).type === "normal") {
              if (An = un.done ? S : M, Qn.arg !== V)
                return { value: Qn.arg, done: un.done };
            } else
              Qn.type === "throw" && (An = S, un.method = "throw", un.arg = Qn.arg);
          }
        }), nt;
      }
      function v(st, nt, ft) {
        try {
          return { type: "normal", arg: st.call(nt, ft) };
        } catch (Pt) {
          return { type: "throw", arg: Pt };
        }
      }
      e.wrap = _;
      var T = "suspendedStart", M = "suspendedYield", A = "executing", S = "completed", V = {};
      function ne() {
      }
      function z() {
      }
      function ue() {
      }
      var xe, Fe, Qe = ((Fe = (Fe = (d(xe = {}, a, function() {
        return this;
      }), Object.getPrototypeOf)) && Fe(Fe(en([])))) && Fe !== t && i.call(Fe, a) && (xe = Fe), ue.prototype = ne.prototype = Object.create(xe));
      function Ze(st) {
        ["next", "throw", "return"].forEach(function(nt) {
          d(st, nt, function(ft) {
            return this._invoke(nt, ft);
          });
        });
      }
      function Ct(st, nt) {
        var ft;
        this._invoke = function(Pt, Ot) {
          function pn() {
            return new nt(function(un, An) {
              (function Mr(tr, Qn, wi, Xr) {
                var Mn;
                if ((tr = v(st[tr], st, Qn)).type !== "throw")
                  return (Qn = (Mn = tr.arg).value) && typeof Qn == "object" && i.call(Qn, "__await") ? nt.resolve(Qn.__await).then(function(ci) {
                    Mr("next", ci, wi, Xr);
                  }, function(ci) {
                    Mr("throw", ci, wi, Xr);
                  }) : nt.resolve(Qn).then(function(ci) {
                    Mn.value = ci, wi(Mn);
                  }, function(ci) {
                    return Mr("throw", ci, wi, Xr);
                  });
                Xr(tr.arg);
              })(Pt, Ot, un, An);
            });
          }
          return ft = ft ? ft.then(pn, pn) : pn();
        };
      }
      function it(st) {
        var nt = { tryLoc: st[0] };
        1 in st && (nt.catchLoc = st[1]), 2 in st && (nt.finallyLoc = st[2], nt.afterLoc = st[3]), this.tryEntries.push(nt);
      }
      function Bt(st) {
        var nt = st.completion || {};
        nt.type = "normal", delete nt.arg, st.completion = nt;
      }
      function yt(st) {
        this.tryEntries = [{ tryLoc: "root" }], st.forEach(it, this), this.reset(!0);
      }
      function en(st) {
        if (st) {
          var nt, ft, Pt = st[a];
          if (Pt)
            return Pt.call(st);
          if (typeof st.next == "function")
            return st;
          if (!isNaN(st.length))
            return nt = -1, (ft = function Ot() {
              for (; ++nt < st.length; )
                if (i.call(st, nt))
                  return Ot.value = st[nt], Ot.done = !1, Ot;
              return Ot.value = r, Ot.done = !0, Ot;
            }).next = ft;
        }
        return { next: Ft };
      }
      function Ft() {
        return { value: r, done: !0 };
      }
      return d(Qe, "constructor", z.prototype = ue), d(ue, "constructor", z), z.displayName = d(ue, c, "GeneratorFunction"), e.isGeneratorFunction = function(st) {
        return !!(st = typeof st == "function" && st.constructor) && (st === z || (st.displayName || st.name) === "GeneratorFunction");
      }, e.mark = function(st) {
        return Object.setPrototypeOf ? Object.setPrototypeOf(st, ue) : (st.__proto__ = ue, d(st, c, "GeneratorFunction")), st.prototype = Object.create(Qe), st;
      }, e.awrap = function(st) {
        return { __await: st };
      }, Ze(Ct.prototype), d(Ct.prototype, u, function() {
        return this;
      }), e.AsyncIterator = Ct, e.async = function(st, nt, ft, Pt, Ot) {
        Ot === void 0 && (Ot = Promise);
        var pn = new Ct(_(st, nt, ft, Pt), Ot);
        return e.isGeneratorFunction(nt) ? pn : pn.next().then(function(un) {
          return un.done ? un.value : pn.next();
        });
      }, Ze(Qe), d(Qe, c, "Generator"), d(Qe, a, function() {
        return this;
      }), d(Qe, "toString", function() {
        return "[object Generator]";
      }), e.keys = function(st) {
        var nt, ft = [];
        for (nt in st)
          ft.push(nt);
        return ft.reverse(), function Pt() {
          for (; ft.length; ) {
            var Ot = ft.pop();
            if (Ot in st)
              return Pt.value = Ot, Pt.done = !1, Pt;
          }
          return Pt.done = !0, Pt;
        };
      }, e.values = en, yt.prototype = { constructor: yt, reset: function(st) {
        if (this.prev = 0, this.next = 0, this.sent = this._sent = r, this.done = !1, this.delegate = null, this.method = "next", this.arg = r, this.tryEntries.forEach(Bt), !st)
          for (var nt in this)
            nt.charAt(0) === "t" && i.call(this, nt) && !isNaN(+nt.slice(1)) && (this[nt] = r);
      }, stop: function() {
        this.done = !0;
        var st = this.tryEntries[0].completion;
        if (st.type === "throw")
          throw st.arg;
        return this.rval;
      }, dispatchException: function(st) {
        if (this.done)
          throw st;
        var nt = this;
        function ft(Mr, tr) {
          return pn.type = "throw", pn.arg = st, nt.next = Mr, tr && (nt.method = "next", nt.arg = r), !!tr;
        }
        for (var Pt = this.tryEntries.length - 1; 0 <= Pt; --Pt) {
          var Ot = this.tryEntries[Pt], pn = Ot.completion;
          if (Ot.tryLoc === "root")
            return ft("end");
          if (Ot.tryLoc <= this.prev) {
            var un = i.call(Ot, "catchLoc"), An = i.call(Ot, "finallyLoc");
            if (un && An) {
              if (this.prev < Ot.catchLoc)
                return ft(Ot.catchLoc, !0);
              if (this.prev < Ot.finallyLoc)
                return ft(Ot.finallyLoc);
            } else if (un) {
              if (this.prev < Ot.catchLoc)
                return ft(Ot.catchLoc, !0);
            } else {
              if (!An)
                throw new Error("try statement without catch or finally");
              if (this.prev < Ot.finallyLoc)
                return ft(Ot.finallyLoc);
            }
          }
        }
      }, abrupt: function(st, nt) {
        for (var ft = this.tryEntries.length - 1; 0 <= ft; --ft) {
          var Pt = this.tryEntries[ft];
          if (Pt.tryLoc <= this.prev && i.call(Pt, "finallyLoc") && this.prev < Pt.finallyLoc) {
            var Ot = Pt;
            break;
          }
        }
        var pn = (Ot = Ot && (st === "break" || st === "continue") && Ot.tryLoc <= nt && nt <= Ot.finallyLoc ? null : Ot) ? Ot.completion : {};
        return pn.type = st, pn.arg = nt, Ot ? (this.method = "next", this.next = Ot.finallyLoc, V) : this.complete(pn);
      }, complete: function(st, nt) {
        if (st.type === "throw")
          throw st.arg;
        return st.type === "break" || st.type === "continue" ? this.next = st.arg : st.type === "return" ? (this.rval = this.arg = st.arg, this.method = "return", this.next = "end") : st.type === "normal" && nt && (this.next = nt), V;
      }, finish: function(st) {
        for (var nt = this.tryEntries.length - 1; 0 <= nt; --nt) {
          var ft = this.tryEntries[nt];
          if (ft.finallyLoc === st)
            return this.complete(ft.completion, ft.afterLoc), Bt(ft), V;
        }
      }, catch: function(st) {
        for (var nt = this.tryEntries.length - 1; 0 <= nt; --nt) {
          var ft, Pt, Ot = this.tryEntries[nt];
          if (Ot.tryLoc === st)
            return (ft = Ot.completion).type === "throw" && (Pt = ft.arg, Bt(Ot)), Pt;
        }
        throw new Error("illegal catch attempt");
      }, delegateYield: function(st, nt, ft) {
        return this.delegate = { iterator: en(st), resultName: nt, nextLoc: ft }, this.method === "next" && (this.arg = r), V;
      } }, e;
    }(o.exports);
    try {
      regeneratorRuntime = o;
    } catch {
      typeof Xi == "object" ? Xi.regeneratorRuntime = o : Function("r", "regeneratorRuntime = r")(o);
    }
  }, 757: function(o, e, r) {
    o.exports = r(553);
  } }, td = {};
  function Oa(o) {
    var e = td[o];
    return e !== void 0 || (e = td[o] = { exports: {} }, og[o](e, e.exports, Oa)), e.exports;
  }
  Oa.n = function(o) {
    var e = o && o.__esModule ? function() {
      return o.default;
    } : function() {
      return o;
    };
    return Oa.d(e, { a: e }), e;
  }, Oa.d = function(o, e) {
    for (var r in e)
      Oa.o(e, r) && !Oa.o(o, r) && Object.defineProperty(o, r, { enumerable: !0, get: e[r] });
  }, Oa.o = function(o, e) {
    return Object.prototype.hasOwnProperty.call(o, e);
  }, function() {
    function o(be, Pe) {
      return (o = Object.setPrototypeOf || function(y, s) {
        return y.__proto__ = s, y;
      })(be, Pe);
    }
    function e(be, Pe) {
      be.prototype = Object.create(Pe.prototype), be.prototype.constructor = be, o(be, Pe);
    }
    function r(be) {
      return Array.isArray ? Array.isArray(be) : Object.prototype.toString.call(be) === "[object Array]";
    }
    function t(be) {
      return Object.prototype.toString.call(be) === "[object Object]";
    }
    function i(be) {
      return typeof be == "function";
    }
    function a(be) {
      return typeof be == "string";
    }
    function u(be) {
      return be = String(be), !!/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(be);
    }
    function c(be) {
      return typeof be == "number" && !isNaN(be);
    }
    function d(be) {
      return Object.prototype.toString.call(be) === "[object Boolean]";
    }
    function _(be) {
      var Pe = document.createElement("span");
      return Pe.style.background = be, !!Pe.style.background;
    }
    function v(be) {
      var Pe = document.createElement("span");
      return Pe.style.border = be, !(!Pe.style.border && be !== "");
    }
    function T() {
      return "ontouchstart" in document.documentElement;
    }
    function M(be) {
      return be instanceof HTMLElement || Object.prototype.toString.call(be) === "[object ShadowRoot]";
    }
    function A(be, Pe) {
      for (var y in be)
        Pe[y] !== void 0 && t(be[y]) && t(Pe[y]) ? A(be[y], Pe[y]) : Pe[y] = be[y];
    }
    function S(be, Pe) {
      for (var y in be) {
        var s = be[y], h = Pe[y];
        h === void 0 ? Pe[y] = be[y] : a(s) && t(h) ? h.visibility = s : t(s) && t(h) ? S(be[y], Pe[y]) : Pe[y] = be[y];
      }
    }
    function V(be) {
      var Pe = Math.random().toString(35).substring(2);
      return Pe.length < 11 && (Pe += Math.random().toString(35).substring(2)), be = Math.max(Math.min(Math.round(be), 11), 8), Pe.substring(0, be);
    }
    function ne(be) {
      var Pe, y;
      if (r(be))
        Pe = [];
      else {
        if (!t(be))
          return be;
        Pe = {};
      }
      for (y in be) {
        var s = be[y];
        r(be) || t(be) ? Pe[y] = ne(s) : Pe[y] = s;
      }
      return Pe;
    }
    function z(be) {
      var Pe = window.requestAnimationFrame || window.webkitRequestAnimationFrame, y = !!Pe;
      if (y = !(Pe && !/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(Pe.toString())) && y)
        return Pe(be);
      var s = {}, h = null, w = +/* @__PURE__ */ new Date();
      s[1] = be, h === null && (h = setInterval(function() {
        var P, j = +/* @__PURE__ */ new Date(), ee = s;
        for (P in s = {}, ee)
          Object.prototype.hasOwnProperty.call(ee, P) && (ee[P](j), w = j);
        2500 < j - w && (clearInterval(h), h = null);
      }, 1e3 / 60));
    }
    function ue() {
      var be = window;
      if (be) {
        if (be.devicePixelRatio)
          return be.devicePixelRatio;
        if (be.screen.deviceXDPI && be.screen.logicalXDPI)
          return be.screen.deviceXDPI / be.screen.logicalXDPI;
      }
      return 1;
    }
    function xe(be, Pe, y, s, h) {
      var w = be + y / 2, P = Pe + s / 2, j = Fe(be, Pe, w, P, h), ee = Fe(be + y, Pe, w, P, h);
      return y = Fe(be + y, Pe + s, w, P, h), be = Fe(be, Pe + s, w, P, h), Pe = [ee.x, j.x, be.x, y.x].sort(function(we, De) {
        return we - De;
      }), s = [ee.y, j.y, be.y, y.y].sort(function(we, De) {
        return we - De;
      }), { x: Pe[0], y: s[0], width: Pe[3] - Pe[0], height: s[3] - s[0] };
    }
    function Fe(be, Pe, y, s, h) {
      return h = h / 180 * Math.PI, { x: (be - y) * Math.cos(h) - (Pe - s) * Math.sin(h) + y, y: (be - y) * Math.sin(h) + (Pe - s) * Math.cos(h) + s };
    }
    var Qe = function(be) {
      window.Dynamsoft && window.Dynamsoft.Lib.debug && window.Dynamsoft.Lib.log(be);
    }, Ze = { windowURL: window.URL || window.webkitURL, createURL: function(be) {
      return a(be) ? be : Ze.createURLWithType(be).data;
    }, createURLWithType: function(be) {
      if (a(be) || be === void 0)
        return { type: "string", data: be };
      if (be instanceof Blob)
        return { type: "object", data: Ze.createObjectURL(be) };
      if (be.imageData && be.imageData instanceof Blob)
        return { type: "object", data: Ze.createObjectURL(be.imageData) };
      if (be.imageData) {
        var Pe = Object.prototype.toString.call(be.imageData);
        if (/\[object \w+Array\]/.test(Pe))
          return { type: "object", data: Ze.createObjectURL(new Blob([be.imageData])) };
      } else if (Pe = Object.prototype.toString.call(be), /\[object \w+Array\]/.test(Pe))
        return { type: "object", data: Ze.createObjectURL(new Blob([be])) };
      return /data:image\/\w+;base64/.test(be) ? { type: "string", data: be } : { type: "object", data: be };
    }, createObjectURL: function(be) {
      return be ? (be = Ze.windowURL.createObjectURL(be), Qe("createObjectURL:" + be), be) : "";
    }, revokeObjectURL: function(be) {
      Qe("revokeObjectURL:" + be), a(be) && be.indexOf("blob:http") == 0 && Ze.windowURL.revokeObjectURL(be);
    } }, Ct = function() {
      function be(y) {
        this._evtIds = [], this._oPub = null, this._bDisposePub = !1, y ? this._oPub = y : (this._oPub = new it(), this._bDisposePub = !0);
      }
      var Pe = be.prototype;
      return Pe.getPublishSubscribe = function() {
        return this._oPub;
      }, Pe._on = function(y, s) {
        s = this._oPub.on(y, s), this.push(y, s);
      }, Pe._emit = function(y) {
        for (var s, h = arguments.length, w = new Array(1 < h ? h - 1 : 0), P = 1; P < h; P++)
          w[P - 1] = arguments[P];
        (s = this._oPub) != null && s.emit.apply(s, [y].concat(w));
      }, Pe._off = function(y, s) {
        var h;
        (h = this._oPub) != null && h.off(y, s);
      }, Pe._offById = function(y, s) {
        var h;
        (h = this._oPub) != null && h.offById(y, s);
      }, Pe.push = function(y, s) {
        this._evtIds.push({ name: y, id: s });
      }, Pe.dispose = function() {
        if (this._oPub) {
          for (var y = this._evtIds.length, s = 0; s < y; s++) {
            var h = this._evtIds[s];
            this._oPub.offById(h.name, h.id);
          }
          this._bDisposePub && this._oPub && this._oPub.dispose();
        }
        this._oPub = null;
      }, be;
    }(), it = function() {
      function be() {
        this._events = {};
      }
      var Pe = be.prototype;
      return Pe.on = function(y, s) {
        this._events[y] || (this._events[y] = []);
        var h = V(10);
        return this._events[y].push({ fn: s, evtId: h }), h;
      }, Pe.emit = function(y) {
        var s = this._events[y];
        if (!s || s.length === 0)
          return !1;
        for (var h = s.length, w = arguments.length, P = new Array(1 < w ? w - 1 : 0), j = 1; j < w; j++)
          P[j - 1] = arguments[j];
        for (var ee, we = 0; we < h; we++)
          (ee = s[we]) != null && (ee = ee.fn).call.apply(ee, [null].concat(P));
      }, Pe.emitEx = function(y) {
        var s = this._events[y];
        if (!s || s.length === 0)
          return Promise.resolve(!0);
        for (var h = s.length, w = Promise.resolve(!0), P = arguments.length, j = new Array(1 < P ? P - 1 : 0), ee = 1; ee < P; ee++)
          j[ee - 1] = arguments[ee];
        if (s.length === 1)
          return (y = (y = s[0]) == null ? void 0 : (y = y.fn).call.apply(y, [null].concat(j))) instanceof Promise ? y : w;
        for (var we = function(Ce) {
          var Xe = (Ce = s[Ce]) == null ? void 0 : (Ce = Ce.fn).call.apply(Ce, [null].concat(j));
          Xe instanceof Promise && (w = w.then(function() {
            return Xe;
          }));
        }, De = 0; De < h; De++)
          we(De);
        return w;
      }, Pe.off = function(y, s) {
        var h = this._events[y];
        if (!h)
          return !1;
        if (s)
          for (var w = h.length - 1; 0 <= w; w--) {
            var P = h[w];
            P && P.fn === s && h.splice(w, 1), P = null;
          }
        else
          h && (h.length = 0);
      }, Pe.offById = function(y, s) {
        var h = this._events[y];
        if (!h)
          return !1;
        if (s)
          for (var w = h.length - 1; 0 <= w; w--) {
            var P = h[w];
            if (P && P.evtId === s) {
              h.splice(w, 1);
              break;
            }
            P = null;
          }
        else
          h && (h.length = 0);
      }, Pe.dispose = function() {
        for (var y = Object.keys(this._events), s = 0, h = y.length; s < h; s++) {
          var w = y[s];
          (w = this._events[w]) && w.splice(0), w = null;
        }
        this._events = {};
      }, be;
    }();
    function Bt(be, Pe, y, s, h, w, P) {
      try {
        var j = be[w](P), ee = j.value;
      } catch (we) {
        return void y(we);
      }
      j.done ? Pe(ee) : Promise.resolve(ee).then(s, h);
    }
    function yt(be) {
      return function() {
        var Pe = this, y = arguments;
        return new Promise(function(s, h) {
          var w = be.apply(Pe, y);
          function P(ee) {
            Bt(w, s, h, P, j, "next", ee);
          }
          function j(ee) {
            Bt(w, s, h, P, j, "throw", ee);
          }
          P(void 0);
        });
      };
    }
    var en = Oa(757), Ft = Oa.n(en), st = (en = typeof window < "u") && window, nt = "prev", ft = "next", Pt = "mousedown", Ot = "mousemove", pn = "mouseup", un = "pageAreaSelected", An = "pageAreaUnselected", Mr = "_canvasVisibilityChanged", tr = "_updateErrorMessage", Qn = "_updateLogMessage", wi = "_DirectoryChanged", Xr = "_canvasRightClick", Mn = "_afterRender", ci = "_currentChanged", Da = "_updateThbItem", Mo = "_setScrollerSizeUI", kr = "_changeCanvasCursorUI", qr = "_updateForViewer", hi = "_loadToViewer", go = "_openToViewer", ha = "_loadPage", Yr = "_removeViewerUid", ri = "_changePage", pi = "_reorderPage", Jo = "_removePage", Bi = "_editPage", Po = "_loadToTag", to = "_removePageTag", Ii = "_addPageTag", $a = "_emptyTag", Ri = "_renameTag", Hi = "_tagChanged", xi = "_appendSync", ka = "_updateSync", xa = "_loadToFile", Ma = "_removeFile", Sr = "_renameFile", cn = { code: 0, message: "ok." }, rn = { code: 80001, message: "The parameter type is wrong." }, ii = { code: 80002, message: "The parameter is out of range." }, dr = { code: 80003, message: "The image does not exist." }, es = { code: 80006, message: "The file does not exist." }, ai = { code: 80009, message: "Tag does not exist." }, Tr = { code: 80010, message: "The tag already exists." }, Pr = { code: 80011, message: "Element does not exist." }, ur = { code: 80012, message: "Page does not exist." }, gr = { code: 80013, message: "The parameter is invalid." }, fi = { code: 80016, message: "The color is invalid." }, Yi = { code: 80017, message: "Failed to save image to database." }, gs = { code: 80018, message: "Failed to remove image from database by uid." }, Bo = { code: 80020, message: "Your browser does not support full screen." }, Ws = { code: 80021, message: "The size is invalid." }, Rm = { code: 80022, message: "The operation mode is error." }, Pa = { code: 80023, message: "The border is invalid." }, Lm = { code: 80026, message: "The constructor of view ui is required." }, rf = { code: 80032, message: "The file already exists." }, of = function() {
      function be() {
        this.matrix = [], this.all = [], this.result = [], this._flipNum = 0, this._flipNumX = 0, this._flipNumY = 0, this._tAngle = 0, this._curMode = null;
      }
      var Pe = be.prototype;
      return Pe.calc3x3Matrix = function(y, s) {
        for (var h = [], w = 0; w < 3; w++)
          for (var P = 0; P < 3; P++) {
            var j = y[3 * w + 0] * s[P] + y[3 * w + 1] * s[P + 3] + y[3 * w + 2] * s[P + 6];
            h.push(j);
          }
        return h;
      }, Pe.rotateMatrix = function(y, s, h) {
        y = y / 180 * Math.PI;
        var w = Math.sin(y);
        return [y = Math.cos(y), -w, (1 - y) * s + h * w, w, y, (1 - y) * h - s * w, 0, 0, 1];
      }, Pe.moveMatrix = function(y, s) {
        return [1, 0, y, 0, 1, s, 0, 0, 1];
      }, Pe.scaleMatrix = function(y) {
        return [y, 0, 0, 0, y, 0, 0, 0, 1];
      }, Pe.flipMatrix = function(y, s) {
        return [1 - 2 * Math.pow(y, 2), -2 * y * s, 0, -2 * y * s, 1 - 2 * Math.pow(s, 2), 0, 0, 0, 1];
      }, Pe.toCanvasMatrix = function(y) {
        for (var s = [0, 3, 1, 4, 2, 5], h = 0; h < s.length; h++)
          s[h] = y[s[h]];
        return s;
      }, Pe.getLatestResult = function() {
        return this.result.length !== 0 ? this.result[this.result.length - 1].slice() : null;
      }, Pe.rotatePoint = function(y, s, h, w, P) {
        return P = P / 180 * Math.PI, { x: (y - h) * Math.cos(P) - (s - w) * Math.sin(P) + h, y: (y - h) * Math.sin(P) + (s - w) * Math.cos(P) + w };
      }, Pe.rotateRect = function(y, s, h, w, P) {
        var j = y + h / 2, ee = s + w / 2, we = this.rotatePoint(y, s, j, ee, P), De = this.rotatePoint(y + h, s, j, ee, P);
        return h = this.rotatePoint(y + h, s + w, j, ee, P), y = this.rotatePoint(y, s + w, j, ee, P), s = [De.x, we.x, y.x, h.x].sort(function(Ce, Xe) {
          return Ce - Xe;
        }), w = [De.y, we.y, y.y, h.y].sort(function(Ce, Xe) {
          return Ce - Xe;
        }), { x: s[0], y: w[0], width: s[3] - s[0], height: w[3] - w[0] };
      }, Pe.calcLineEquation = function(y, s) {
        var h = s.y - y.y, w = y.x - s.x, P = (y = s.x * y.y - y.x * s.y, s = h * h + w * w, []);
        return P.push((w * w - h * h) / s, -2 * h * w / s, -2 * h * y / s, -2 * h * w / s, (h * h - w * w) / s, -2 * w * y / s, 0, 0, 1 / s), P;
      }, Pe.setTransform = function(y) {
        var s = this;
        this.matrix.forEach(function(h) {
          h = s.toCanvasMatrix(h), y.transform.apply(y, h);
        });
      }, Pe.setPointTransform = function(y, s) {
        for (var h = 0; h < this.matrix.length; h++) {
          var w = y * (P = this.matrix[h])[0] + s * P[3], P = y * P[1] + s * P[4];
          y = w, s = P;
        }
        return { x: y, y: s };
      }, Pe.crop = function(y, s, h, w) {
        return this._clear(), y = { type: "crop", left: y, top: s, width: h, height: w }, this.all.push(y), y;
      }, Pe.erase = function(y, s, h, w, P) {
        return this._clear(), y = { type: "erase", left: y, top: s, width: h, height: w, color: P }, this.all.push(y), y;
      }, Pe.changePageSize = function(y, s) {
        return this._clear(), y = { type: "changeSize", width: y, height: s }, this.all.push(y), y;
      }, Pe.flip = function(y) {
        this._flipNum += 1;
        var s = this._tAngle / 180 * Math.PI, h = Math.cos(s), w = -Math.sin(s), P = -Math.sin(s);
        if (s = -Math.cos(s), this._flipNumX % 2 && (P = -P, s = -s), this._flipNumY % 2 && (h = -h, w = -w), h = { x: h, y: w }, w = { x: P, y: s }, P = { x: 0, y: 0 }, s = null, y === 0)
          this._flipNumX += 1, s = this.calcLineEquation(h, P);
        else {
          if (y !== 1)
            return;
          this._flipNumY += 1, s = this.calcLineEquation(w, P);
        }
        return h = { type: "flip", matrix: s, direction: y }, this.all.push(h), this.matrix.push(s), w = (w = this.getLatestResult()) ? this.calc3x3Matrix(s, w) : s, this.result.push(w), h;
      }, Pe.calcFlipMatrix = function(y, s) {
        return [1 - 2 * y * y, -2 * y * s, 0, -2 * y * s, 1 - 2 * s * s, 0, 0, 0, 1];
      }, Pe.rotate = function(y, s, h, w) {
        var P = !1, j = (this._curMode !== null && (P = this._curMode === w || (this._clear(), !1)), this._curMode = w, this._flipNum % 2 && (y = -y), this._tAngle += y, y);
        return h = { type: "rotate", matrix: s = this.rotateMatrix(y, s || 0, h || 0), mode: w, angle: y, calcAngle: j = P ? this._tAngle : j }, this.all.push(h), this.matrix.push(s), w = (w = this.getLatestResult()) ? this.calc3x3Matrix(s, w) : s, this.result.push(w), h;
      }, Pe.translate = function(y, s) {
        y = this.moveMatrix(y, s), this.all.push(y), this.matrix.push(y), s = (s = this.getLatestResult()) ? this.calc3x3Matrix(y, s) : y, this.result.push(s);
      }, Pe.calcTranslateDis = function(y, s) {
        var h = this._tAngle / 180 * Math.PI, w = y * Math.cos(h), P = (y = -y * Math.sin(h), s * Math.sin(h));
        return s *= Math.cos(h), this._flipNumX % 2 && (P = -P, s = -s), this._flipNumY % 2 && (w = -w, y = -y), { x: w + P, y: y + s };
      }, Pe.reset = function() {
        this.all = [], this._clear(), this._curMode = null;
      }, Pe.getCurAngle = function() {
        return this._tAngle;
      }, Pe._clear = function() {
        this.result = [], this.matrix = [], this._tAngle = 0, this._flipNumX = 0, this._flipNumY = 0, this._flipNum = 0;
      }, be;
    }(), Fm = function() {
      function be(y, s) {
        this.uid = null, this.minData = null, this.oriData = null, this.customData = {}, this.tags = [], this.active = !1, this.activeMin = !1, this.minTask = null, this.load = !1, this.show = [], this.overlays = [], this.img = null, this.edt = null, this.vws = [], this.oriType = null, this.minType = null, this.tempWidth = 0, this.tempHeight = 0, this.uid = y, this.setTempSize(s.width, s.height), this.edt = new of();
      }
      var Pe = be.prototype;
      return Pe.setTempSize = function(y, s) {
        this.tempWidth = y, this.tempHeight = s;
      }, Pe.addViewer = function(y) {
        this.vws.indexOf(y) === -1 && this.vws.push(y);
      }, Pe.rmViewer = function(y) {
        (y = this.vws.indexOf(y)) !== -1 && this.vws.splice(y, 1);
      }, Pe.setTags = function(y) {
        y.length < 1 || (this.tags = y.slice());
      }, Pe.getTags = function() {
        return this.tags.slice();
      }, be;
    }(), Om = function(be) {
      function Pe(s, h, w) {
        var P = be.call(this, h) || this;
        return P._db = w, P._on(xi, function(j, ee) {
          P.appendSync(j, ee);
        }), P._initEvent(), P;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.dispose = function() {
        be.prototype.dispose.call(this), this._db = null;
      }, y._initEvent = function() {
        var s = this;
        this._on(ka, function(h, w, P) {
          s.updateSync(h, w, P);
        }), this._on(Jo, function(h, w) {
          w.forEach(function(P) {
            var j, ee = s._db.getMid(P);
            ee && (a(ee.oriData) && Ze.revokeObjectURL(ee.oriData), a(ee.minData) && Ze.revokeObjectURL(ee.minData), (j = ee.img) && (j.src = "", j.onload = null, j.onerror = null, ee.img = null)), s._db.removeMid(P), s._db.getDataAsync(P).then(function(we) {
              a(we.oriData) && Ze.revokeObjectURL(we.oriData), a(we.minData) && Ze.revokeObjectURL(we.minData);
            }).catch(function(we) {
            }), s._db.removeDataAsync(P), s._db.removeMetadata(P);
          });
        }), this._on(Ri, function(h, w, P) {
          P.forEach(function(j) {
            var ee, we = s._db.getMid(j);
            we && (ee = we.tags.indexOf(h)) !== -1 && we.tags.splice(ee, 1, w), s._db.getDataAsync(j).then(function(De) {
              var Ce;
              De.tags && (Ce = De.tags.indexOf(h)) !== -1 && (De.tags.splice(Ce, 1, w), s._db.updateDataAsync(j, De).catch(function(Xe) {
              }));
            }).catch(function(De) {
            });
          });
        }), this._on($a, function(h, w, P) {
          w.forEach(function(j) {
            var ee, we = s._db.getMid(j);
            we && (ee = we.tags.indexOf(h)) !== -1 && we.tags.splice(ee, 1), s._db.getDataAsync(j).then(function(De) {
              var Ce;
              De.tags && (Ce = De.tags.indexOf(h)) !== -1 && (De.tags.splice(Ce, 1), s._db.updateDataAsync(j, De).catch(function(Xe) {
              }));
            }).catch(function(De) {
            });
          });
        }), this._on(Ii, function(h, w, P) {
          var j = s._db.getMid(h);
          j && j.tags.indexOf(w) === -1 && j.tags.push(h), s._db.getDataAsync(h).then(function(ee) {
            ee.tags && ee.tags.indexOf(w) === -1 && (ee.tags.push(h), s._db.updateDataAsync(h, ee).catch(function(we) {
            }));
          }).catch(function(ee) {
          });
        }), this._on(to, function(h, w, P) {
          var j, ee = s._db.getMid(h);
          ee && (j = ee.tags.indexOf(w)) !== -1 && ee.tags.splice(j, 1), s._db.getDataAsync(h).then(function(we) {
            var De;
            we.tags && (De = we.tags.indexOf(w)) !== -1 && (we.tags.splice(De, 1), s._db.updateDataAsync(h, we).catch(function(Ce) {
            }));
          }).catch(function(we) {
          });
        });
      }, y.appendSync = function(s, h) {
        return this._ckStr(s) && this._ckArray(h) ? (s = this._load(s, h), this._ok(), s) : [];
      }, y.insertSync = function(s, h, w) {
        return this._ckStr(s) && this._ckArray(h) ? w === void 0 ? this.appendSync(s, h) : (s = this._load(s, h, w), this._ok(), s) : (this._thrEr(rn), []);
      }, y.updateSync = function(s, h, w) {
        w === void 0 && (w = !0), this._emit(Qn, "Invoking DataControl#updateSync.");
        var P = this._db.getMid(s);
        if (!P)
          return !1;
        this._db.updateMetadata(s, h.metadata), h.customData && (P.customData = h.customData), h.tags && P.setTags(h.tags), w && (Ze.revokeObjectURL(P.oriData), Ze.revokeObjectURL(P.minData)), P.minData = null, !P.overlays.length && h.minData && a(h.minData) && (P.minData = h.minData), P.oriData = null, P.img = null, P.active = !1, P.activeMin = !1, P.minTask = null, P.edt.reset(), P.setTempSize(h.metadata.width, h.metadata.height), this._db.updateMid(s, P), h.tags || (h.tags = P.getTags()), h.customData || (h.customData = P.customData), this._db.updateDataAsync(s, h), this._emit(qr, s, h);
      }, y._load = function(s, h, w) {
        for (var P = this, j = [], ee = [], we = h.length, De = function(Xe) {
          var ut = { uid: V(11), data: h[Xe] };
          ee.push(ut), j.push(ut.uid), Xe = Object.assign({}, ut.data.metadata), P._db.addMetadata(ut.uid, Xe), P._db.addDataAsync(ut.uid, ut.data).then(function(Rt) {
            P._emit("_addDataToDBSuccess", ut.uid, Rt);
          }).catch(function(Rt) {
            P._emit("_addDataToDBFailed", ut.uid, Rt);
          }), Xe = new Fm(ut.uid, Xe), ut.data.minData && a(ut.data.minData) && (Xe.minData = ut.data.minData), Xe.customData = ut.data.customData || {}, Xe.setTags(ut.data.tags || []), P._db.addMid(ut.uid, Xe);
        }, Ce = 0; Ce < we; Ce++)
          De(Ce);
        return this._emit(xa, s, ee, w), ee.slice().forEach(function(Xe) {
          P._emit(Po, Xe);
        }), j;
      }, y._convertData = function(s) {
        return new Promise(function(h, w) {
          var P;
          t(s) ? h(s) : ((P = new XMLHttpRequest()).onload = function() {
            var j = Ze.createObjectURL(P.response);
            h(j);
          }, P.open("GET", s, !0), P.responseType = "blob", P.send());
        });
      }, y.addData = function() {
        var s = yt(Ft().mark(function h(w, P) {
          var j = this;
          return Ft().wrap(function(ee) {
            for (; ; )
              switch (ee.prev = ee.next) {
                case 0:
                  if (this._ckStr(w) && t(P)) {
                    ee.next = 3;
                    break;
                  }
                  return this._thrEr(rn), ee.abrupt("return", this._err(rn.message));
                case 3:
                  return ee.next = 5, this._db.addDataAsync(w, P).then(function(we) {
                    return j._ok(), we;
                  }).catch(function(we) {
                    return j._thrEr(Yi), j._err(Yi.message);
                  });
                case 5:
                  return ee.abrupt("return", ee.sent);
                case 6:
                case "end":
                  return ee.stop();
              }
          }, h, this);
        }));
        return function(h, w) {
          return s.apply(this, arguments);
        };
      }(), y.getData = function() {
        var s = yt(Ft().mark(function h(w) {
          var P = this;
          return Ft().wrap(function(j) {
            for (; ; )
              switch (j.prev = j.next) {
                case 0:
                  if (this._ckStr(w)) {
                    j.next = 3;
                    break;
                  }
                  return this._thrEr(rn), j.abrupt("return", this._err(rn.message));
                case 3:
                  return j.next = 5, this._db.getDataAsync(w).then(function(ee) {
                    return P._ok(), Promise.resolve(ee);
                  }).catch(function(ee) {
                    return P._thrEr(dr), P._err(dr.message);
                  });
                case 5:
                  return j.abrupt("return", j.sent);
                case 6:
                case "end":
                  return j.stop();
              }
          }, h, this);
        }));
        return function(h) {
          return s.apply(this, arguments);
        };
      }(), y.removeData = function() {
        var s = yt(Ft().mark(function h(w) {
          var P = this;
          return Ft().wrap(function(j) {
            for (; ; )
              switch (j.prev = j.next) {
                case 0:
                  if (this._ckStr(w)) {
                    j.next = 3;
                    break;
                  }
                  return this._thrEr(rn), j.abrupt("return", this._err(rn.message));
                case 3:
                  return j.next = 5, this._db.removeDataAsync(w).then(function(ee) {
                    return P._ok(), ee;
                  }).catch(function(ee) {
                    return P._thrEr(gs), P._err(gs.message);
                  });
                case 5:
                  return j.abrupt("return", j.sent);
                case 6:
                case "end":
                  return j.stop();
              }
          }, h, this);
        }));
        return function(h) {
          return s.apply(this, arguments);
        };
      }(), y.updateData = function() {
        var s = yt(Ft().mark(function h(w, P) {
          var j = this;
          return Ft().wrap(function(ee) {
            for (; ; )
              switch (ee.prev = ee.next) {
                case 0:
                  if (this._ckStr(w)) {
                    ee.next = 3;
                    break;
                  }
                  return this._thrEr(rn), ee.abrupt("return", this._err(rn.message));
                case 3:
                  return ee.next = 5, this._db.updateDataAsync(w, P).then(function(we) {
                    return j._ok(), we;
                  }).catch(function(we) {
                    return j._thrEr(dr), j._err(dr.message);
                  });
                case 5:
                  return ee.abrupt("return", ee.sent);
                case 6:
                case "end":
                  return ee.stop();
              }
          }, h, this);
        }));
        return function(h, w) {
          return s.apply(this, arguments);
        };
      }(), y._err = function(s) {
        return Promise.reject(new Error(s));
      }, y._ckArray = function(s) {
        return !!r(s) || (this._thrEr(rn), !1);
      }, y._ckStr = function(s) {
        return !!a(s) || (this._thrEr(rn), !1);
      }, y._thrEr = function(s) {
        this._emit(tr, s);
      }, y._ok = function() {
        this._emit(tr, cn);
      }, Pe;
    }(Ct);
    function af() {
      return (af = Object.assign || function(be) {
        for (var Pe = 1; Pe < arguments.length; Pe++) {
          var y, s = arguments[Pe];
          for (y in s)
            Object.prototype.hasOwnProperty.call(s, y) && (be[y] = s[y]);
        }
        return be;
      }).apply(this, arguments);
    }
    function sf(be, Pe) {
      for (var y = 0; y < Pe.length; y++) {
        var s = Pe[y];
        s.enumerable = s.enumerable || !1, s.configurable = !0, "value" in s && (s.writable = !0), Object.defineProperty(be, s.key, s);
      }
    }
    function uf(be, Pe, y) {
      Pe && sf(be.prototype, Pe), y && sf(be, y), Object.defineProperty(be, "prototype", { writable: !1 });
    }
    function cl(be) {
      if (be === void 0)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return be;
    }
    en = function() {
      function be(y) {
        this.cssWidth = 0, this.cssHeight = 0, this.dpr = 1, this.canvas = null, this.ctx = null, this.dpr = y.dpr;
      }
      var Pe = be.prototype;
      return Pe.bind = function(y) {
        this.canvas = y, this.ctx = y.getContext("2d"), this.ctx.imageSmoothingEnabled = !1;
      }, Pe.unbind = function() {
        this.canvas = null, this.ctx = null;
      }, Pe.clear = function(y, s, h, w) {
        var P;
        (P = this.canvas) != null && P.clearRect(y, s, h, w);
      }, Pe.size = function(y, s) {
        this.cssWidth = y, this.cssHeight = s, this.innerWidth = y * this.dpr, this.innerHeight = s * this.dpr;
      }, Pe.dispose = function() {
        this.unbind();
      }, be;
    }();
    var Wm = function(be) {
      function Pe(s) {
        return (s = be.call(this, s) || this).maskColor = "rgba(200,200,200,0.5)", s.isMask = !0, s;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.setMaskColor = function(s) {
        this.maskColor = s;
      }, y.getMaskColor = function() {
        return this.maskColor;
      }, Pe;
    }(en), Bm = function(be) {
      function Pe(y) {
        return be.call(this, y) || this;
      }
      return e(Pe, be), Pe.prototype.setBackGroundColor = function(y) {
        this.canvas.style.background = y;
      }, Pe;
    }(en), Nm = function() {
      function be() {
        this.saveColor = "#ffffff";
        var y = ue();
        this.mainCvs = new Bm({ dpr: y }), this.cropCvs = new Wm({ dpr: y });
      }
      var Pe = be.prototype;
      return Pe.updateDpr = function(y) {
        this.mainCvs.dpr = y, this.cropCvs.dpr = y;
      }, Pe.bind = function(y) {
        var s, h = y.main;
        y = y.cropper, h && (s = this.mainCvs) != null && s.bind(h), y && (h = this.cropCvs) != null && h.bind(y);
      }, Pe.unbind = function(y) {
        y === "main" && this.mainCvs && (this.mainCvs.innerWidth = 1, this.mainCvs.innerHeight = 1, this.mainCvs.unbind()), y === "cropper" && this.cropCvs && (this.cropCvs.innerWidth = 1, this.cropCvs.innerHeight = 1, this.cropCvs.unbind());
      }, Pe.setCanvasSize = function(y, s) {
        var h;
        (h = this.mainCvs) != null && h.size(y, s), (h = this.cropCvs) != null && h.size(y, s);
      }, Pe.dispose = function() {
        var y;
        (y = this.cropCvs) != null && y.dispose(), (this.cropCvs = null) != (y = this.mainCvs) && y.dispose(), this.mainCvs = null;
      }, be;
    }(), Vm = function(be) {
      function Pe(s, h) {
        return (s = be.call(this, s) || this).wrapper = null, s.isVisible = !1, s.isDragging = !1, s.isStart = !1, s.startX = 0, s.startTime = 0, s.hideTimer = null, s.width = 0, s.triggerDist = 10, s.minDistanceThreshold = 60, s.minTimeThreshold = 300, s.pages = null, s.slideEndCallback = null, s.slidingStateChangedCallback = null, s.stateCb = null, s.touchNum = 0, s.curPageUid = null, s.renderPageUid = null, s.loading = !1, s.isNew = !1, s.targetIndexes = [-1, -1, -1], s.allowDrag = !0, s.isDisposed = !1, s._db = h, s.isDisposed = !1, s.pages = [{ width: 0, height: 0, url: "", uid: "", index: -1 }, { width: 0, height: 0, url: "", uid: "", index: -1 }, { width: 0, height: 0, url: "", uid: "", index: -1 }], s._initEvent(), s;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y._initEvent = function() {
        var s = this;
        be.prototype._on.call(this, Mn, function(h) {
          s.renderPageUid = h;
        }), be.prototype._on.call(this, ci, function(h) {
          h || (s.renderPageUid = null), s.curPageUid = h;
        });
      }, y.setSlidePages = function(s) {
        if (this.wrapper) {
          for (var h = 0; h < 3; h++) {
            var w = s[h];
            if (w.index !== this.targetIndexes[h] || -1 < w.index && w.url === "")
              return;
          }
          this.pages = s, this.isNew = !0, this.allowDrag = !1, this.isVisible || this.showPages();
        }
      }, y.showPages = function() {
        var s, h = this;
        this.loading || this.isNew && (this.loading = !0, this.isNew = !1, s = [], this.pages.forEach(function(w, P) {
          var j = new Promise(function(ee, we) {
            var De, Ce = (De = h.wrapper) == null || (De = De.children[P]) == null ? void 0 : De.children[0], Xe = w.index;
            if (Ce)
              if (Ce.style.width = w.width + "px", Ce.style.height = w.height + "px", Ce.src !== w.url) {
                if (w.url === "")
                  return Ce.src = w.url, Ce.onload = null, Ce.onerror = null, ee(-1);
                Ce.onload = function() {
                  Ce.onload = null, Ce.onerror = null, ee(Xe);
                }, Ce.onerror = function() {
                  Ce.onload = null, Ce.onerror = null, ee(Xe);
                }, Ce.src = w.url;
              } else
                ee(Xe);
            else
              we(Xe);
          });
          s.push(j);
        }), Promise.all(s).then(function(w) {
          h.allowDrag = !0;
          for (var P = 0; P < w.length; P++)
            if (w[P] !== h.targetIndexes[P]) {
              h.allowDrag = !1;
              break;
            }
          h.loading = !1, h.showPages();
        }).catch(function(w) {
        }));
      }, y.startHandler = function(s) {
        !this.isDragging && this.allowDrag && (clearTimeout(this.hideTimer), this.startTime = s.timeStamp, s.touches ? (this.touchNum = s.touches.length, this.startX = s.touches[0].pageX) : this.startX = s.pageX, this.isStart = !0);
      }, y.moveHandler = function(s) {
        var h;
        !this.isStart || 2 < this.touchNum || (s = (s.touches ? s.touches[0] : s).pageX - this.startX, Math.abs(s) > this.triggerDist && (this.isDragging = !0, (h = this.stateCb) != null && h.call(this, !0), this._visible(!0), (h = this.width) < s ? s = h : s < -h && (s = -h)), this._translateX(s));
      }, y.endHandler = function(s) {
        var h, w, P, j, ee = this;
        this.isStart && (h = !0, (!s || s.touches && (1 < this.touchNum || s.changedTouches.length !== 1)) && (h = !1), this.isStart = !1, w = (s = s || {}).pageX - this.startX, s = s.timeStamp - this.startTime, P = this._calcDirection(s, w, h), j = this, (a(P) ? this._oPub.emitEx("preSlide", P) : Promise.resolve(!0)).then(function() {
          P && (ee.allowDrag = !1);
          var we = ee._calcSlidingDistance(P);
          j._transition("transform 0.2s linear"), ee._translateX(we), setTimeout(function() {
            var De;
            ee.wrapper && (ee.isDragging = !1, (De = ee.stateCb) != null && De.call(ee, !1));
          }, 200), P && setTimeout(function() {
            var De;
            ee.isDisposed || (De = ee.slideEndCallback) != null && De.call(ee, P);
          }, 205), j._hideSlide();
        }));
      }, y._calcDirection = function(s, h, w) {
        if (w) {
          w = this.pages;
          var P, j = this.minDistanceThreshold, ee = this.minTimeThreshold, we = this.triggerDist;
          if (((P = w[0]) == null ? void 0 : P.index) !== -1 && (j < h || s < ee && we < h))
            return nt;
          if (((P = w[2]) == null ? void 0 : P.index) !== -1 && (h < -j || s < ee && h < -we))
            return ft;
        }
        return null;
      }, y._calcSlidingDistance = function(s) {
        return s === nt ? this.width : s === ft ? -this.width : 0;
      }, y._hideSlide = function() {
        var s = this;
        this.curPageUid !== this.renderPageUid || this.pages[1].uid !== this.curPageUid || this.isDragging ? (clearTimeout(this.hideTimer), this.hideTimer = setTimeout(function() {
          s.isDisposed || s._hideSlide();
        }, 210)) : (this._visible(!1), this.showPages(), this._transition(""), this._translateX(0));
      }, y._translateX = function(s) {
        this.wrapper && (this.wrapper.style.transform = "translateX(".concat(s, "px)"));
      }, y._visible = function(s) {
        this.wrapper && (this.wrapper.style.visibility = s ? "visible" : "hidden"), this.isVisible = s;
      }, y._transition = function(s) {
        this.wrapper && (this.wrapper.style.transition = s);
      }, y.bindSlideEndCallback = function(s) {
        this.slideEndCallback = s;
      }, y.bind = function(s) {
        this.wrapper = s;
      }, y.unbind = function() {
        this.wrapper = null;
      }, y.setSlideSize = function(s) {
        if (!this.wrapper)
          return !1;
        s < 120 && (this.minDistanceThreshold = s / 2), this.width = s, this.wrapper.style.width = 3 * s + "px", this.wrapper.style.left = -s + "px";
        for (var h = 0; h < 3; h++)
          this.wrapper.children[h].style.width = s + "px";
      }, y.dispose = function() {
        be.prototype.dispose.call(this), this._hideSlide(), this.unbind(), this.isDisposed = !0;
      }, Pe;
    }(Ct), Um = function() {
      function be(y, s) {
        this.useWorker = !0, this.workers_archive = [], this.taskUid = null, this.useWorker = y, this.cores = 1, this.workerBlobURL = s;
      }
      var Pe = be.prototype;
      return Pe.resize = function(y, s, h, w, P, j) {
        return this.useWorker ? this.resizeWithWorker(y, s, h, w, P, j) : this.resizeWithoutWorker(y, w, P, j);
      }, Pe.resizeWithoutWorker = function(y, s, h, w) {
        for (var P = y.width, j = y.height, ee = (s = Math.round(s), j / (h = Math.round(h))), we = y.getContext("2d"), De = [], Ce = 2 * Math.ceil(j / this.cores / 2), Xe = [], ut = -1, Rt = 0; Rt < this.cores; Rt++) {
          var tn, nn = ut + 1;
          j <= nn || (ut = nn + Ce - 1, ut = Math.min(ut, j - 1), tn = Math.min(Ce, j - nn), De[Rt] = {}, De[Rt].source = we.getImageData(0, nn, P, Ce), De[Rt].target = !0, De[Rt].start_y = Math.ceil(nn / ee), De[Rt].height = tn, nn = { width_source: P, height_source: De[Rt].height, width: s, height: Math.ceil(De[Rt].height / ee), core: Rt, source: De[Rt].source.data.buffer || De[Rt].source.data }, Xe[Rt] = nn);
        }
        for (var xn = Xe.length, or = [], qn = 0; qn < xn; qn++) {
          for (var Cr = (Mi = Xe[qn]).core, si = Mi.width_source, zr = Mi.height_source, Br = Mi.width, $r = Mi.height, Si = si / Br, mo = zr / $r, Ui = Math.ceil(Si / 2), Ji = Math.ceil(mo / 2), Ti = new Uint8ClampedArray(Mi.source), Mi = (Ti.length, Br * $r * 4), na = new ArrayBuffer(Mi), Ao = new Uint8ClampedArray(na, 0, Mi), po = 0; po < $r; po++)
            for (var To = 0; To < Br; To++) {
              for (var Ba = 4 * (To + po * Br), Xo = 0, Na = 0, ms = 0, uo = 0, fa = 0, Va = 0, Bs = 0, Gu = po * mo, ap = Math.floor(To * Si), hl = Math.ceil((To + 1) * Si), sp = Math.floor(po * mo), fl = Math.ceil((po + 1) * mo), ju = (hl = Math.min(hl, si), fl = Math.min(fl, zr), sp); ju < fl; ju++)
                for (var gf = Math.abs(Gu - ju) / Ji, up = To * Si, cp = gf * gf, zu = ap; zu < hl; zu++) {
                  var No = Math.abs(up - zu) / Ui;
                  1 <= (No = Math.sqrt(cp + No * No)) || (Bs += (Xo = 2 * No * No * No - 3 * No * No + 1) * Ti[3 + (No = 4 * (zu + ju * si))], ms += Xo, uo += (Xo = Ti[3 + No] < 255 ? Xo * Ti[3 + No] / 250 : Xo) * Ti[No], fa += Xo * Ti[1 + No], Va += Xo * Ti[2 + No], Na += Xo);
                }
              Ao[Ba] = uo / Na, Ao[1 + Ba] = fa / Na, Ao[2 + Ba] = Va / Na, Ao[3 + Ba] = Bs / ms;
            }
          or.push({ core: Cr, target: Ao });
        }
        for (var Ua = 0; Ua < xn; Ua++) {
          var mf = or[Ua], lp = Math.ceil(De[Ua].height / ee);
          if (De[Ua].target = we.createImageData(s, lp), De[Ua].target.data.set)
            De[Ua].target.data.set(mf.target);
          else
            for (var dp = De[Ua].target.data.length, Hu = 0; Hu < dp; Hu++)
              De[Ua].target.data[Hu] = mf.target[Hu];
        }
        return Promise.resolve(De);
      }, Pe.resizeWithWorker = function(y, s, h, w, P, j) {
        for (var ee = this, we = Math.floor(s) || 1, De = Math.floor(h) || 1, Ce = (w = Math.floor(w) || 1, De / (P = Math.floor(P) || 1)), Xe = y.getContext("2d"), ut = [], Rt = 2 * Math.ceil(De / this.cores / 2), tn = -1, nn = 0; nn < this.cores; nn++) {
          var xn, or, qn = tn + 1;
          De <= qn || (tn = qn + Rt - 1, tn = Math.min(tn, De - 1), xn = Math.min(Rt, De - qn), ut[nn] = {}, ut[nn].source = Xe.getImageData(0, qn, we, xn), ut[nn].target = !0, or = Math.ceil(qn / Ce), qn = Math.min(Math.ceil((qn + xn) / Ce) - or, P - or), ut[nn].startY = or, ut[nn].height = xn, ut[nn].heightPart = qn);
        }
        y = Xe = null;
        for (var Cr = [], si = function(Br) {
          if (ut[Br] == null)
            return "continue";
          var $r = new Worker(ee.workerBlobURL), Si = new Promise(function(mo, Ui) {
            $r.onmessage = function(Ji) {
              $r.terminate(), $r.onmessage = null, $r.onerror = null, $r = null, Ji.data.taskUid !== ee.taskUid && Ui(!1);
              var Ti = Ji.data.core, Mi = ut[Ti].heightPart;
              if (c(Mi) || (Mi = 1), c(w) || (w = 1), ut[Ti].target = document.createElement("canvas").getContext("2d").createImageData(w, Mi || 1), ut[Ti].target.data.set)
                ut[Ti].target.data.set(Ji.data.target);
              else
                for (var na = ut[Ti].target.data.length, Ao = 0; Ao < na; Ao++)
                  ut[Ti].target.data[Ao] = Ji.data.target[Ao];
              mo(Ti);
            }, $r.onerror = function(Ji) {
              $r.terminate(), $r.onmessage = null, $r.onerror = null, $r = null, Ui(Ji);
            };
          });
          Cr.push(Si), Si = { sourceWidth: we, sourceHeight: ut[Br].height, width: w, height: ut[Br].heightPart, core: Br, source: ut[Br].source.data.buffer || ut[Br].source.data, taskUid: j };
          try {
            $r.postMessage(Si, [Si.source]);
          } catch {
            $r.postMessage(Si);
          }
        }, zr = 0; zr < this.cores; zr++)
          si(zr);
        return Promise.all(Cr).then(function(Br) {
          return Promise.resolve(ut);
        }).catch(function(Br) {
          return Promise.reject(Br);
        });
      }, be;
    }(), Gm = function(be) {
      function Pe(s, h, w, P, j, ee, we, De) {
        var Ce = be.call(this, w) || this;
        return Ce.uid = null, Ce.cvsOffW = 0, Ce.cvsOffH = 0, Ce.cvsCltW = 0, Ce.cvsCltH = 0, Ce.cvsInnerW = 0, Ce.cvsInnerH = 0, Ce.maxW = 0, Ce.maxH = 0, Ce.virW = 0, Ce.virH = 0, Ce.dpr = 1, Ce.fitType = "window", Ce.keepZoom = !0, Ce.clickZoom = !1, Ce.isFreeCrop = !1, Ce.zoom = 1, Ce.zoomInDelta = 1.2, Ce.zoomOutDelta = 1.2, Ce.zoomDelta = 1.2, Ce.scrL = 0, Ce.scrT = 0, Ce.disMode = "single", Ce.opMode = 0, Ce.curTab = null, Ce.curPages = [], Ce.iMargin = 10, Ce.oMargin = 10, Ce.rows = 0, Ce.columns = 0, Ce._mousedown = !1, Ce._pageX = 0, Ce._pageY = 0, Ce.rotateMode = 1, Ce.saveBg = "#ffffff", Ce.aspectRatio = 0, Ce.keepAspectRatio = !1, Ce._startDistance = 0, Ce.useWebWorker = !1, Ce.renderTaskUid = null, Ce.workerTimer = null, Ce.useHermite = !0, Ce.hermite = null, Ce.workerBlobURL = null, Ce.scrBarW = 0, Ce.loadingTimer = null, Ce.allowSlide = !0, Ce.slide = null, Ce.isSliding = !1, Ce.zooming = !0, Ce.scrollX = !0, Ce.scrollY = !0, Ce.animating = !1, Ce.bouncing = !1, Ce.paging = !1, Ce.snapping = !1, Ce.animationDuration = 300, Ce.locking = !1, Ce.minZoom = 0.01, Ce.maxZoom = 8, Ce.speedDelta = 1, Ce._outerWidth = 0, Ce._outerHeight = 0, Ce._innerWidth = 0, Ce._innerHeight = 0, Ce._outerLeft = 0, Ce._outerTop = 0, Ce._snapWidth = 0, Ce._snapHeight = 0, Ce._pullHeight = 0, Ce._pullActive = !1, Ce._maxSrL = 0, Ce._maxSrT = 0, Ce._srL = 0, Ce._srT = 0, Ce._zoom = 1, Ce._futureLeft = 0, Ce._futureTop = 0, Ce._futureZoom = 0, Ce._zoomComplete = null, Ce._isSingleTouch = !0, Ce._isDecelerating = !1, Ce._isProcessing = !1, Ce._isDragging = !1, Ce._isAnimating = !1, Ce._interruptedAnimation = !1, Ce._position = [], Ce._startTouchLeft = 0, Ce._startTouchTop = 0, Ce._startZoom = 1, Ce._lastTouchLeft = 0, Ce._lastTouchTop = 0, Ce._lastScale = 1, Ce._enableScrollX = !0, Ce._enableScrollY = !0, Ce._fps = 60, Ce._running = {}, Ce._counter = 1, Ce.cropLineColor = "rgba(0,0,0,1)", Ce.defaultCursor = null, Ce.isDisposed = !1, Ce.offScreenCanvas = De, Ce.offScreenCanvas && (Ce.offScreenCanvas.saveColor = Ce.saveBg), Ce.uid = P, Ce.dpr = ue(), Ce._db = h, Ce.fitType = s.fitType, Ce.maxZoom = s.maxZoom, Ce.minZoom = s.minZoom, Ce.opMode = s.opMode, Ce.iMargin = s.iMargin, Ce.scrollX = s.scrollX, Ce.scrollY = s.scrollY, Ce.zoomInDelta = s.zoomInDelta, Ce.zoomOutDelta = s.zoomOutDelta, Ce.zoomDelta = s.zoomDelta, Ce.zooming = s.zooming, Ce.useWebWorker = s.useWebWorker, Ce.useHermite = j, Ce.scrBarW = we, Ce.cvsMng = new Nm(), Ce._initAnimation(), Ce._initScroller(), Ce.slide = new Vm(w, h), Ce.slide.stateCb = function(Xe) {
          Ce.isSliding = Xe;
        }, Ce.useHermite && (Ce.workerBlobURL || (Ce.workerBlobURL = ee), Ce.hermite = new Um(Ce.useWebWorker, Ce.workerBlobURL)), Ce;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.setOffScreenCanvas = function(s) {
        this.offScreenCanvas = s, this.offScreenCanvas.saveColor = this.saveBg;
      }, y.updateDpr = function() {
        var s = ue();
        this.dpr = s, this.cvsMng.updateDpr(s), this.tabItem && this.tabItem.chs.forEach(function(h) {
          h.cropMng.updateDpr(s);
        });
      }, y.setAllowSlide = function(s) {
        this.allowSlide = s;
      }, y.setSlidePages = function(s) {
        var h;
        (h = this.slide) != null && h.setSlidePages(s);
      }, y.checkDisplay = function(s, h) {
        return h.disMode !== "single" || !(!(h = h.getCurPage()) || s !== h.uid);
      }, y.initGraphic = function(s) {
        var h = s.uid;
        this.curPages = s.chs, h !== this.curTab && (this.curTab = h, this.tabItem = s, this.virH = s.virH || 0, this.virW = s.virW || 0, this.fitType = s.fitType, this.clickZoom = s.clickZoom, this.isFreeCrop = s.isFreeCrop, this.scrL = s.scrL, this.scrT = s.scrT, this.zoom = s.zoom, this.iMargin = s.iMargin, this.oMargin = s.oMargin, this.direction = s.direction, this.disMode = s.disMode, this.opMode = s.opMode);
      }, y.render = function(s) {
        var h, w, P, j, ee, we, De, Ce, Xe, ut, Rt, tn, nn = this;
        !this.tabItem || (h = this.tabItem.getCurPage()) && h.uid === s && (w = this._db.getMid(s), P = w.img, j = this.cvsMng.mainCvs.ctx, P && j && (ee = Math.round((h.style.left - this.scrL) * this.dpr), we = Math.round((h.style.top - this.scrT) * this.dpr), De = h.style.width * this.dpr || 1, Ce = h.style.height * this.dpr || 1, (Xe = this.offScreenCanvas).render(ut = { viewerUid: "", pageUid: s, isMin: !1, img: P, page: h, midData: w }), Rt = Xe.mainCanvas, j.clearRect(0, 0, this.cvsInnerW, this.cvsInnerH), j.save(), j.imageSmoothingEnabled = !1, j.webkitImageSmoothingEnabled = !1, j.msImageSmoothingEnabled = !1, j.oImageSmoothingEnabled = !1, j.drawImage(Rt, 0, 0, Xe.mainWidth, Xe.mainHeight, ee, we, Math.floor(De), Math.floor(Ce)), this._handleOverlay((w == null ? void 0 : w.overlays) || [], h, j), j.restore(), this.workerTimer && clearTimeout(this.workerTimer), tn = V(11), this.renderTaskUid = tn, this.hermite && (this.hermite.taskUid = this.renderTaskUid), this.useHermite && this.zoom < 1 && this.hermite && (this.workerTimer = setTimeout(function() {
          var xn, or, qn, Cr;
          nn.isDisposed || !nn.offScreenCanvas || Xe.isDisposed || nn.hermite.taskUid === tn && P.naturalWidth && P.naturalHeight && (Xe.render(ut), or = (xn = document.createElement("canvas")).getContext("2d", { willReadFrequently: !0 }), qn = Xe.mainWidth, Cr = Xe.mainHeight, xn.width = qn, xn.height = Cr, or.imageSmoothingEnabled = !1, or.drawImage(Rt, 0, 0), (or = nn.hermite) != null && or.resize(xn, qn, Cr, De, Ce, nn.renderTaskUid).then(function(si) {
            var zr, Br = nn._db.getMid(s);
            Br && nn.tabItem && (zr = nn.tabItem.getCurPage()) && zr.uid === s && (j.save(), j.clearRect(0, 0, nn.cvsInnerW, nn.cvsInnerH), si.forEach(function($r) {
              j.putImageData($r.target, ee, $r.startY + we);
            }), nn._handleOverlay((Br == null ? void 0 : Br.overlays) || [], zr, j), j.restore(), be.prototype._emit.call(nn, Mn, s));
          }).catch(function(si) {
            be.prototype._emit.call(nn, Mn, s);
          }));
        }, 100)), this.disMode === "single" && (this.useHermite && this.zoom < 1 && this.hermite || be.prototype._emit.call(this, Mn, s), be.prototype._emit.call(this, "pageRendered", this.tabItem.cur))));
      }, y._handleOverlay = function(s, h, w) {
        var P, j, ee = this;
        s.length && (w.save(), w.scale(this.dpr, this.dpr), P = Math.round(h.style.left - this.scrL), j = Math.round(h.style.top - this.scrT), s.forEach(function(we) {
          0 < h.style.width - we.width * ee.zoom && 0 < h.style.height - we.height * ee.zoom && (w.globalAlpha = we.opacity, w.fillStyle = we.color, w.fillRect(P + we.left * ee.zoom, j + we.top * ee.zoom, Math.min(h.style.width - we.left * ee.zoom, we.width * ee.zoom), Math.min(h.style.height - we.top * ee.zoom, we.height * ee.zoom)));
        }), w.restore());
      }, y.drawSltBox = function(s) {
        var h = this, w = this.cvsMng.cropCvs.ctx;
        w && (w.imageSmoothingEnabled = !1, w.clearRect(0, 0, this.cvsInnerW, this.cvsInnerH), this.opMode === 1 && (w.save(), w.scale(this.dpr, this.dpr), w.lineJoin = "round", s.cropMng.cropBoxes.forEach(function(P) {
          for (var j = (qn = P.cropBoxStyle).ctrlBorderWidth, ee = qn.ctrlBackground, we = qn.ctrlBorderColor, De = qn.ctrlBorderRadius, Ce = qn.ctrlWidth, Xe = qn.ctrlHeight, ut = qn.borderColor, Rt = qn.borderWidth, tn = qn.invalidBorderColor, nn = qn.invalidCtrlBorderColor, xn = qn.background, or = qn.dashLine, qn = qn.enableConcaveBorderColor, Cr = P.probePoints.slice(0, 8), si = P.midpoints.slice(0, 8), zr = 0; zr < 4; zr++) {
            var Br = h.toCanvasCoordinate(Cr[2 * zr], Cr[2 * zr + 1]), $r = h.toCanvasCoordinate(si[2 * zr], si[2 * zr + 1]);
            Cr[2 * zr] = Br.x, Cr[2 * zr + 1] = Br.y, si[2 * zr] = $r.x, si[2 * zr + 1] = $r.y;
          }
          w.save();
          try {
            w.setLineDash(or);
          } catch {
          }
          w.fillStyle = xn, w.lineWidth = Rt, qn && !P.isConvex ? w.strokeStyle = tn : w.strokeStyle = ut, w.beginPath(), w.moveTo(Cr[0], Cr[1]), w.lineTo(Cr[2], Cr[3]), w.lineTo(Cr[4], Cr[5]), w.lineTo(Cr[6], Cr[7]), w.closePath(), w.stroke(), w.restore(), w.lineWidth = j, w.fillStyle = ee, qn && !P.isConvex ? w.strokeStyle = nn : w.strokeStyle = we;
          for (var Si = Math.min(De, Ce / 2), mo = Math.min(De, Xe / 2), Ui = 0; Ui < 4; Ui++)
            h.drawRoundedRectangle(w, { x: Cr[2 * Ui], y: Cr[2 * Ui + 1], width: Ce, height: Xe, radiusX: Si, radiusY: mo }), w.stroke(), ee !== "" && w.fill(), h.drawRoundedRectangle(w, { x: si[2 * Ui], y: si[2 * Ui + 1], width: Ce, height: Xe, radiusX: Si, radiusY: mo }), w.stroke(), ee !== "" && w.fill();
        }), w.restore()));
      }, y.drawRoundedRectangle = function(s, h) {
        var w = h.width, P = h.height, j = h.radiusX, ee = h.radiusY, we = h.x, De = [{ x: we - w / 2 + j, y: (h = h.y) - P / 2 + ee, start: Math.PI, end: 3 * Math.PI / 2 }, { x: we + w / 2 - j, y: h - P / 2 + ee, start: 3 * Math.PI / 2, end: 2 * Math.PI }, { x: we + w / 2 - j, y: h + P / 2 - ee, start: 0, end: Math.PI / 2 }, { x: we - w / 2 + j, y: h + P / 2 - ee, start: Math.PI / 2, end: Math.PI }];
        if (s.beginPath(), s.ellipse)
          for (var Ce = 0; Ce < 4; Ce++) {
            var Xe = De[Ce];
            s.ellipse(Xe.x, Xe.y, j, ee, 0, Xe.start, Xe.end);
          }
        else
          s.rect(we - w / 2, h - P / 2, w, P);
        s.closePath();
      }, y.clearCanvas = function() {
        var s = ((s = this.cvsMng.mainCvs.ctx) && s.clearRect(0, 0, this.cvsInnerW, this.cvsInnerH), this.cvsMng.cropCvs.canvas), h = this.cvsMng.cropCvs.ctx;
        h && s && h.clearRect(0, 0, s.width, s.height);
      }, y._layoutSingle = function(s, h, w) {
        var P, j, ee, we, De, Ce, Xe, ut, Rt, tn, nn, xn = s.getCurPage();
        xn && (Rt = this._db.getMetadata(xn.uid), Xe = this._db.getMid(xn.uid)), xn && Rt && Xe ? (Xe = Xe.edt.all, P = Rt.width, j = Rt.height, ee = Rt.width, we = Rt.height, Ce = De = null, Xe.forEach(function(or) {
          var qn, Cr;
          or.type === "rotate" ? (or.mode === 0 && (Ce = xe(0, 0, ee, we, or.calcAngle)), De !== null && De !== or.mode && (ee = P, we = j), De = or.mode, Ce && (qn = (Cr = Ce).width, Cr = Cr.height, P = qn, j = Cr)) : or.type !== "crop" && or.type !== "changeSize" || (qn = or.width, Cr = or.height, ee = P = qn, we = j = Cr);
        }), xn != null && xn.setNaturalSize(P, j), Xe = (Rt = this._calcZoom(s, P || 0, j || 0.1)).zoom, tn = Rt.canvasWidth, nn = Rt.canvasHeight, ut = Rt.virW, Rt = Rt.virH, this.setCanvasSize(tn, nn), xn.cropMng.setZoom(Xe = Xe || 1), this.virW = ut, this.virH = Rt, w || be.prototype._emit.call(this, Mo, { width: this.virW, height: this.virH, x: this.scrL, y: this.scrT }), tn = (this.cvsCltW - ut) / 2, nn = (this.cvsCltH - Rt) / 2, tn < 0 && (h && (this._srL = Math.abs(tn)), tn = 0), nn < 0 && (h && (this._srT = Math.abs(nn)), nn = 0), xn.setBorder(s.pageBorderWidth), xn.setSize(ut, Rt), xn.setPosition(tn, nn), s.virW = ut, s.virH = Rt, this._zoomTo(Xe, !1, h), this.setVirtualSize(ut, Rt), this._zoomTo(Xe, !1, h), this.zoom !== Xe && (this.zoom = Xe), w || be.prototype._emit.call(this, Mo, { width: ut, height: Rt, x: this.scrL, y: this.scrT })) : be.prototype._emit.call(this, Mo, { width: 1, height: 1, x: 0, y: 0 });
      }, y._calcZoom = function(s, h, w) {
        return s.fitType === "window" ? this._calFitWindow(h, w) : s.fitType === "width" ? this._calcFitWidth(h, w) : s.fitType === "height" ? this._calcFitHeight(h, w) : this.keepZoom && s.fitType === "none" ? this._calcKeepZoom(h, w) : this._calFitWindow(h, w);
      }, y.calcZoomForSlide = function(s, h) {
        return s = this._calFitWindow(s, h).zoom, Math.min(Math.max(this.minZoom, s), this.maxZoom);
      }, y._calcKeepZoom = function(s, h) {
        var w = this.zoom, P = this.cvsOffW, j = this.cvsOffH;
        return h *= w, P < (s = s * w) && (j -= this.scrBarW), j < h && (P -= this.scrBarW), { zoom: w, canvasWidth: P, canvasHeight: j, virW: s, virH: h };
      }, y._calcFitWidth = function(s, h) {
        var w = 1, P = 0, j = this.cvsOffW, ee = this.cvsOffH;
        return ee < (P = h * (w = s <= this.cvsOffW ? 1 : this.cvsOffW / s)) && (P = h * (w = s <= this.cvsOffW - this.scrBarW ? 1 : (this.cvsOffW - this.scrBarW) / s)) > this.cvsOffH && (j -= this.scrBarW), { zoom: w, canvasWidth: j, canvasHeight: ee, virW: s * w, virH: P };
      }, y._calcFitHeight = function(s, h) {
        var w = 1, P = 0, j = 0, ee = this.cvsOffW;
        return j = this.cvsOffH, ee < (P = s * (w = h <= this.cvsOffH ? 1 : this.cvsOffH / h)) && (P = s * (w = h <= this.cvsOffH - this.scrBarW ? 1 : (this.cvsOffH - this.scrBarW) / h)) > this.cvsOffW && (j -= this.scrBarW), { zoom: w, canvasWidth: ee, canvasHeight: j, virW: P, virH: h * w };
      }, y._calFitWindow = function(s, h) {
        return s <= this.cvsCltW && h <= this.cvsCltH || s > this.cvsCltW && h <= this.cvsCltH || !(s <= this.cvsCltW && h > this.cvsCltH) && s / this.cvsCltW >= h / this.cvsCltH ? this._calcFitWidth(s, h) : this._calcFitHeight(s, h);
      }, y._getPage = function(s) {
        for (var h = this.curPages.length, w = 0; w < h; w++)
          if (this.curPages[w].uid === s)
            return { page: this.curPages[w], index: w };
      }, y.setFitType = function(s) {
        this.fitType = s, this.tabItem && (this.tabItem.fitType = s);
      }, y._setValidArea = function() {
        this.setValidArea(this.cvsCltW, this.cvsCltH, this.virW, this.virH);
      }, y._setScrollerPosition = function() {
        var s = this.cvsMng.mainCvs.canvas;
        if (s) {
          var h = { left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0 };
          try {
            h = s.getBoundingClientRect();
          } catch {
          }
          this.setPosition(h.left + window.pageXOffset + (s == null ? void 0 : s.clientLeft) || 0, h.top + window.pageYOffset + (s == null ? void 0 : s.clientTop) || 0);
        }
      }, y.setCanvasOffsetSize = function(s, h) {
        var w = !1;
        return this.cvsOffW === s && this.cvsOffH === h && (w = !0), this.cvsOffW = s, this.cvsOffH = h, this.cvsCltW = s, this.cvsCltH = h, this.cvsInnerW = s * this.dpr, this.cvsInnerH = h * this.dpr, this.cvsMng.setCanvasSize(s, h), (h = this.slide) != null && h.setSlideSize(s), this._setScrollerPosition(), w;
      }, y.setCanvasSize = function(s, h) {
        this.cvsCltW = s, this.cvsCltH = h, this.cvsInnerW = s * this.dpr, this.cvsInnerH = h * this.dpr, this.cvsMng.setCanvasSize(s, h);
      }, y.setVirtualSize = function(s, h) {
        this.virW = s || 0, this.virH = h || 0, this._setValidArea();
      }, y.setZoom = function(s) {
        return s = Math.max(Math.min(this.maxZoom, s), this.minZoom), this.zoom = s, this.tabItem && this.tabItem.total || (this._zoom = s), this.setFitType("none"), be.prototype._emit.call(this, "_onRender"), this._maxSrL === 0 && this._maxSrT === 0 && be.prototype._emit.call(this, "_getSlidePages"), !0;
      }, y.getZoom = function() {
        return this.zoom;
      }, y.zoomTo = function(s, h, w, P) {
        return this.zoom = s, this._zoomTo(s, h, !1, w, P), this.setFitType("none"), be.prototype._emit.call(this, "_onRender"), this._maxSrL === 0 && this._maxSrT === 0 && be.prototype._emit.call(this, "_getSlidePages"), this._zoom;
      }, y.scrollTo = function(s, h, w, P) {
        this._scrollTo(s, h, !1), be.prototype._emit.call(this, "_onRender");
      }, y.zoomIn = function() {
        var s = this.zoom;
        return s *= this.zoomInDelta, this._zoomTo(s, !1), this.setFitType("none"), be.prototype._emit.call(this, "_onRender"), this._maxSrL === 0 && this._maxSrT === 0 && be.prototype._emit.call(this, "_getSlidePages"), s;
      }, y.zoomOut = function() {
        var s = this.zoom;
        return s /= this.zoomInDelta, this._zoomTo(s, !1), this.setFitType("none"), be.prototype._emit.call(this, "_onRender"), this._maxSrL === 0 && this._maxSrT === 0 && be.prototype._emit.call(this, "_getSlidePages"), s;
      }, y.getMinPageData = function() {
        var s = document.createElement("canvas"), h = s.getContext("2d"), w = this.offScreenCanvas, P = (s.dvsUid = "useToGetMinPageData", w.mainWidth), j = w.mainHeight, ee = P / j, we = (ee = ((800 < P || 800 < j) && (1 <= ee ? j = (P = 800) / ee : P = (j = 800) * ee), s.width = P, s.height = j, P / w.mainWidth), j / w.mainHeight);
        return ee = w.mainCanvas.width * ee, we = w.mainCanvas.height * we, h.drawImage(w.mainCanvas, 0, 0, Math.floor(ee), Math.floor(we)), w = h.getImageData(0, 0, P, j), s.width = 1, s.height = 1, h.fillRect(0, 0, 1, 1), s = null, w;
      }, y.setSaveBackgroundColor = function(s) {
        this.saveBg = s, this.offScreenCanvas.saveColor = s;
      }, y.onCanvasTouchstart = function(s) {
        var h, w, P, j, ee, we;
        s.cancelable && s.preventDefault(), s.touches[0] && s.touches[0].target && s.touches[0].target.tagName.match(/input|textarea|select/i) || this.disMode === "single" && this.disMode === "single" && this.tabItem && this.tabItem.total !== 0 && (this._mousedown = !0, s.target.tagName.match(/input|textarea|select/i) || (h = s.touches[0].pageX, w = s.touches[0].pageY, this.opMode === 0 ? (this._pageX = h, this._pageY = w, this.allowSlide && this._maxSrL === 0 && this._maxSrT === 0 && !this.slide.isDragging && (P = this.slide) != null && P.startHandler(s), this.isSliding || (1 < s.targetTouches.length && (this._startDistance = this._calDistance(s.targetTouches)), this.startHandler(s.targetTouches, s.timeStamp))) : this.opMode === 1 ? this.checkMouseOverPage(s) && (P = this.tabItem.getCurPage()) && (j = this.getMouseCoordinate(s), j = this.toPageCoordinate(j.x, j.y), !(ee = !1) === s.ctrlKey && (ee = !0), we = this.tabItem.cur, P.cropMng.checkSelect(j.x, j.y) !== null || ee || 0 < P.cropMng.cropBoxes.length && be.prototype._emit.call(this, An, we), P.cropMng.onStartHandler(j.x, j.y, ee)) : this.opMode === 2 && this.checkMouseOverPage(s) && (this.setFitType("none"), this._setScrollerPosition(), this._zoomTo(this._zoom * this.zoomInDelta, !1, !1, h - this._outerLeft, w - this._outerTop), be.prototype._emit.call(this, "_onRender"))));
      }, y.onCanvasTouchmove = function(s) {
        if (this.disMode === "single" && this.tabItem) {
          var h = this.tabItem.getCurPage();
          if (h && this._mousedown) {
            if (this.opMode === 0)
              if (this.allowSlide && this._maxSrT === 0 && this._maxSrL === 0 && s.targetTouches.length === 1)
                (h = this.slide) != null && h.moveHandler(s);
              else {
                if (this.isSliding)
                  return;
                h = 1, 1 < s.targetTouches.length && (h = this._calDistance(s.targetTouches) / this._startDistance, this.fitType = "none", this.tabItem.fitType = "none", s.scale && (h = s.scale)), this.moveHandler(s.targetTouches, s.timeStamp, h), be.prototype._emit.call(this, "_onRender"), this._maxSrL === 0 && this._maxSrT === 0 && be.prototype._emit.call(this, "_getSlidePages");
              }
            this._mousedown = !0;
          }
        }
      }, y.onCanvasTouchend = function(s) {
      }, y.onDocumentTouchend = function(s) {
      }, y.onCanvasMousedown = function(s) {
        var h, w, P, j;
        this.disMode === "single" && this.tabItem && this.tabItem.total !== 0 && (this._mousedown = !0, s.cancelable && s.preventDefault(), s.target.tagName.match(/input|textarea|select/i) || (this.opMode === 0 ? (this._pageX = s.pageX, this._pageY = s.pageY, this.allowSlide && this._maxSrL === 0 && this._maxSrT === 0 && !this.slide.isDragging ? (h = this.slide) != null && h.startHandler(s) : this.startHandler([{ pageX: s.pageX, pageY: s.pageY }], s.timeStamp)) : this.opMode === 1 ? this.checkMouseOverPage(s) && (h = this.tabItem.getCurPage()) && (w = this.getMouseCoordinate(s), w = this.toPageCoordinate(w.x, w.y), !(P = !1) === s.ctrlKey && (P = !0), j = this.tabItem.cur, h.cropMng.checkSelect(w.x, w.y) !== null || P || 0 < h.cropMng.cropBoxes.length && be.prototype._emit.call(this, An, j), h.cropMng.onStartHandler(w.x, w.y, P)) : this.opMode === 2 && this.checkMouseOverPage(s) && (this.setFitType("none"), this._setScrollerPosition(), this._zoomTo(this._zoom * this.zoomInDelta, !1, !1, s.pageX - this._outerLeft, s.pageY - this._outerTop), be.prototype._emit.call(this, "_onRender"), this._maxSrL === 0 && this._maxSrT === 0 && be.prototype._emit.call(this, "_getSlidePages"))));
      }, y.onCanvasMousemove = function(s) {
        this._mousedown && (s.cancelable && s.preventDefault(), this.disMode === "single" && this.tabItem && this.tabItem.total);
      }, y.onCanvasMouseup = function(s) {
      }, y.onDocumentMousemove = function(s) {
        var h, w, P;
        this.disMode === "single" && this.tabItem && (h = this.tabItem.getCurPage()) && (w = this.getMouseCoordinate(s), w = this.toPageCoordinate(w.x, w.y), this._mousedown ? (this.opMode === 1 ? this.checkMouseOverPage(s) !== void 0 && (!(P = !1) === s.ctrlKey && (P = !0), h.cropMng.setAspectRatio(this.aspectRatio), s.shiftKey === !0 ? h.cropMng.setKeepAspectRatio(!0) : h.cropMng.setKeepAspectRatio(this.keepAspectRatio), h.cropMng.onMoveHandler(w.x, w.y, P), be.prototype._emit.call(this, "_onRenderBoxes")) : this.opMode !== 0 || s.touches || (this.allowSlide && this._maxSrT === 0 && this._maxSrL === 0 ? (P = this.slide) != null && P.moveHandler(s) : this._maxSrL === 0 && this._maxSrT === 0 || (this.moveHandler([{ pageX: s.pageX, pageY: s.pageY }], s.timeStamp), be.prototype._emit.call(this, "_onRender"))), this._mousedown = !0) : 0 < h.cropMng.cropBoxes.length && ((P = h.cropMng.checkSelectForCursor(w.x, w.y)) !== null ? (s = null, P.position === "move" ? s = "move" : P.position !== "nw" && P.position !== "se" && P.position !== "ne" && P.position !== "sw" && P.position !== "e" && P.position !== "w" && P.position !== "n" && P.position !== "s" || (s = P.position + "-resize"), be.prototype._emit.call(this, kr, s)) : be.prototype._emit.call(this, kr, this.defaultCursor)));
      }, y._calDistance = function(s) {
        return Math.sqrt(Math.pow(s[0].pageX - s[1].pageX, 2) + Math.pow(s[0].pageY - s[1].pageY, 2));
      }, y.onDocumentMouseup = function(s) {
        var h, w;
        this._mousedown && (this.opMode === 1 ? this.tabItem && this.tabItem.disMode === "single" && (w = this.tabItem.getCurPage()) && (w.cropMng.onEndHandler(), h = this.tabItem.cur, 0 < (w = w.cropMng.getRectArr()).length && be.prototype._emit.call(this, un, h, w), be.prototype._emit.call(this, "_onRenderBoxes")) : this.opMode === 0 && (this.clickZoom && this._pageX === s.pageX && this._pageY === s.pageY && (h = this.getPosition(), this._zoomTo(this.zoom * this.zoomInDelta, !1, !1, s.pageX - h.left, s.pageY - h.top), be.prototype._emit.call(this, "_onRender")), this.allowSlide && (w = this.slide) != null && w.endHandler(s), this.endHandler((s == null ? void 0 : s.timeStamp) || 0)), this._mousedown = !1);
      }, y.onCanvasWheel = function(s) {
        this.isSliding || this._onWheelHandler(s);
      }, y.onCanvasScroll = function(s) {
        s && s.target && (this._scrollTo(s.target.scrollLeft, s.target.scrollTop, !1), be.prototype._emit.call(this, "_onRender"), be.prototype._emit.call(this, "_onRenderBoxes"));
      }, y._onWheelHandler = function(s) {
        var h = 0, w = s.wheelDelta || -s.deltaY;
        s.ctrlKey ? (s.cancelable && s.preventDefault(), h = 0 < w ? 1.05 : 0.95, this.fitType = "none", this.tabItem.fitType = "none", this.zoomHandler(w, s.timeStamp, s.pageX, s.pageY), be.prototype._emit.call(this, "_onRender"), be.prototype._emit.call(this, "_onRenderBoxes"), this._maxSrL === 0 && this._maxSrT === 0 && be.prototype._emit.call(this, "_getSlidePages")) : s.shiftKey ? this._maxSrL !== 0 && (s.cancelable && s.preventDefault(), h = w < 0 ? 30 : -30, (this._srL !== 0 && h < 0 || this._srL !== this._maxSrL && 0 < h) && (this._scrollTo(this.scrL + h, this.scrT, !1), be.prototype._emit.call(this, "_onRender"), be.prototype._emit.call(this, "_onRenderBoxes"))) : this._maxSrT !== 0 && (s.cancelable && s.preventDefault(), h = w < 0 ? 30 : -30, (this._srT !== 0 && h < 0 || this._srT !== this._maxSrT && 0 < h) && (this._scrollTo(this.scrL, this.scrT + h, !1), be.prototype._emit.call(this, "_onRender"), be.prototype._emit.call(this, "_onRenderBoxes")));
      }, y.checkMouseOverPage = function(s) {
        if (!this.tabItem)
          return !1;
        var h = this.tabItem.getCurPage();
        if (!h)
          return !1;
        s = this.getMouseCoordinate(s);
        var w = (s = this.toPageCoordinate(s.x, s.y)).x;
        return s = s.y, 0 <= w && w <= h.naturalWidth && 0 <= s && s <= h.naturalHeight;
      }, y.toCanvasCoordinate = function(s, h) {
        var w = this.tabItem.getCurPage();
        return w.style.left, this.scrL, w.style.width, w.style.top, this.scrT, w.style.height, { x: s = s * this.zoom + w.style.left - this.scrL, y: h = h * this.zoom + w.style.top - this.scrT };
      }, y.toPageCoordinate = function(s, h) {
        var w = this.tabItem.getCurPage();
        return { x: s = (s - w.style.left + this.scrL) / this.zoom, y: h = (h - w.style.top + this.scrT) / this.zoom };
      }, y.getMouseCoordinate = function(s) {
        var h = this.cvsMng.mainCvs.canvas.getBoundingClientRect(), w = (s.clientX !== void 0 ? s : s.changedTouches[0]).clientX;
        return s = (s.clientY !== void 0 ? s : s.changedTouches[0]).clientY, { x: w - h.left, y: s - h.top };
      }, y._initAnimation = function() {
        this._time = Date.now || function() {
          return +/* @__PURE__ */ new Date();
        }, this._fps = 60, this._running = {}, this._counter = 1;
      }, y._initScroller = function() {
        this.callback = (function(s, h, w) {
          this.scrL = s, this.scrT = h, this.zoom = w, this.tabItem && (this.tabItem.scrL = s, this.tabItem.scrT = h, this.tabItem.zoom = w);
        }).bind(this), this._setValidArea(), this._setScrollerPosition();
      }, y.setValidArea = function(s, h, w, P) {
        s === +s && (this._outerWidth = s), h === +h && (this._outerHeight = h), w === +w && (this._innerWidth = w), P === +P && (this._innerHeight = P), this.calcMaxScrollValue();
      }, y.calcMaxScrollValue = function(s) {
        var h, w, P, j, ee, we, De, Ce, Xe;
        s === void 0 && (s = this._zoom), this.tabItem && ((Ce = this.tabItem.getCurPage()) && (Xe = this._db.getMetadata(Ce.uid), h = this._db.getMid(Ce.uid)), Ce && Xe && h && (w = Xe.width, P = Xe.height, j = Xe.width, ee = Xe.height, De = we = null, h.edt.all.forEach(function(ut) {
          var Rt, tn;
          ut.type === "rotate" ? (ut.mode === 0 && (De = xe(0, 0, j, ee, ut.calcAngle)), we !== null && we !== ut.mode && (j = w, ee = P), we = ut.mode, De && (Rt = (tn = De).width, tn = tn.height, w = Rt, P = tn)) : ut.type !== "crop" && ut.type !== "changeSize" || (Rt = ut.width, tn = ut.height, j = w = Rt, ee = P = tn);
        }), Ce = w * s, Xe = P * s, this._maxSrL = Math.round(Math.max(Ce - this._outerWidth, 0)), this._maxSrT = Math.round(Math.max(Xe - this._outerHeight, 0))));
      }, y.setPosition = function(s, h) {
        this._outerLeft = s || 0, this._outerTop = h || 0;
      }, y.getPosition = function() {
        return { left: this._outerLeft || 0, top: this._outerTop || 0 };
      }, y.setSnapSize = function(s, h) {
        this._snapWidth = s, this._snapHeight = h;
      }, y.activatePull = function(s, h, w, P) {
        this._pullHeight = s, this._pullStart = P, this._pullActivate = h, this._pullDeactivate = w;
      }, y.emitPull = function() {
        this.publish(this._srL, -this._pullHeight, this._zoom, !0), this._pullStart && this._pullStart();
      }, y.endPull = function() {
        this._pullActive = !1, this._pullDeactivate && this._pullDeactivate(), this._scrollTo(this._srL, this._srT, !0);
      }, y.getCurScrollValues = function() {
        return { scrollLeft: this._srL, scrollTop: this._srT, zoom: this._zoom };
      }, y.getMaxScrollValues = function() {
        return { maxScrollLeft: this._maxSrL, maxScrollTop: this._maxSrT };
      }, y._zoomTo = function(s, h, w, P, j, ee) {
        return w === void 0 && (w = !1), !this.zooming || this.disMode === "continuous" ? !1 : (ee && (this._zoomComplete = ee), this._isDecelerating && (this._stop(this._isDecelerating), this._isDecelerating = !1), P === void 0 && (P = this._outerWidth / 2), j === void 0 && (j = this._outerHeight / 2), ee = this._zoom, s = Math.max(Math.min(s, this.maxZoom), this.minZoom), this.disMode === "single" ? (this.calcMaxScrollValue(s), P = (P + this._srL) * s / ee - P, ee = (j + this._srT) * s / ee - j, P > this._maxSrL ? P = this._maxSrL : P < 0 && (P = 0), ee > this._maxSrT ? ee = this._maxSrT : ee < 0 && (ee = 0), (this._innerWidth < this._outerWidth || w) && (P = this._maxSrL / 2), (this._innerHeight < this._outerHeight || w) && (ee = this._maxSrT / 2), this.publish(P, ee, s, h), !0) : void 0);
      }, y._zoomBy = function(s, h, w, P, j) {
        return this._zoomTo(this._zoom * s, h, !1, w, P, j);
      }, y._scrollTo = function(s, h, w, P) {
        this._isDecelerating && (this._stop(this._isDecelerating), this._isDecelerating = !1), P !== void 0 && P !== this._zoom ? this.zooming && (s *= P, h *= P, this.calcMaxScrollValue(P)) : P = this._zoom, this.scrollX ? this.paging ? s = Math.round(s / this._outerWidth) * this._outerWidth : this.snapping && (s = Math.round(s / this._snapWidth) * this._snapWidth) : s = this._srL, this.scrollY ? this.paging ? h = Math.round(h / this._outerHeight) * this._outerHeight : this.snapping && (h = Math.round(h / this._snapHeight) * this._snapHeight) : h = this._srT, s = Math.max(Math.min(this._maxSrL, s), 0), h = Math.max(Math.min(this._maxSrT, h), 0), s === this._srL && h === this._srT && (w = !1), this._isProcessing || this.publish(s, h, P, w);
      }, y._scrollBy = function(s, h, w) {
        var P = this._isAnimating ? this._futureLeft : this._srL, j = this._isAnimating ? this._futureTop : this._srT;
        this._scrollTo(P + (s || 0), j + (h || 0), w);
      }, y.startHandler = function(s, h) {
        var w;
        s.length !== void 0 && (h instanceof Date && (h = h.valueOf()), this._interruptedAnimation = !0, this._isDecelerating && (this._stop(this._isDecelerating), this._isDecelerating = !1), this._isAnimating && (this._stop(this._animationId), this._isAnimating = !1), this._isSingleTouch = s.length === 1, s = this._isSingleTouch ? (w = s[0].pageX, s[0].pageY) : (w = Math.abs(s[0].pageX + s[1].pageX) / 2, Math.abs(s[0].pageY + s[1].pageY) / 2), this._startTouchLeft = w, this._startTouchTop = s, this._startZoom = this._zoom, this._lastTouchLeft = w, this._lastTouchTop = s, this._lastScale = 1, this._lastTouchMove = h, this._enableScrollX = !this._isSingleTouch && this.scrollX, this._enableScrollY = !this._isSingleTouch && this.scrollY, this._isProcessing = !0, this._isDecComp = !1, this._isDragging = !this._isSingleTouch, this._position = []);
      }, y.moveHandler = function(s, h, w) {
        var P, j, ee, we, De, Ce, Xe, ut, Rt;
        s.length !== void 0 && (h instanceof Date && (h = h.valueOf()), this._isProcessing && (s = s.length === 1 ? (P = s[0].pageX, s[0].pageY) : (P = Math.abs(s[0].pageX + s[1].pageX) / 2, Math.abs(s[0].pageY + s[1].pageY) / 2), j = this._position, this._isDragging ? (Rt = P - this._lastTouchLeft, ee = s - this._lastTouchTop, we = this._srL, De = this._srT, Ce = this._zoom, w !== void 0 && this.zooming && (Ce = (Xe = Ce) / this._lastScale * w, Xe !== (Ce = Math.max(Math.min(Ce, this.maxZoom), this.minZoom)) && (this._setScrollerPosition(), we = ((ut = P - this._outerLeft) + we) * Ce / Xe - ut, De = ((ut = s - this._outerTop) + De) * Ce / Xe - ut, this.calcMaxScrollValue(Ce))), this._enableScrollX && ((we -= Rt * this.speedDelta) > this._maxSrL || we < 0) && (this.bouncing ? we += Rt / 2 * this.speedDelta : we = Math.max(Math.min(this._maxSrL, we), 0)), this._enableScrollY && ((De -= ee * this.speedDelta) > this._maxSrT || De < 0) && (this.bouncing ? (De += ee / 2 * this.speedDelta, this._enableScrollX || this._pullHeight == null || (!this._pullActive && De <= -this._pullHeight ? (this._pullActive = !0, this._pullActivate && this._pullActivate()) : this._pullActive && De > -this._pullHeight && (this._pullActive = !1, this._pullDeactivate && this._pullDeactivate()))) : De = Math.max(Math.min(this._maxSrT, De), 0)), 60 < j.length && j.splice(0, 30), j.push(we, De, h), this.publish(we, De, Ce)) : (Xe = this.locking ? 3 : 0, ut = Math.abs(P - this._startTouchLeft), Rt = Math.abs(s - this._startTouchTop), this._enableScrollX = this.scrollX && Xe <= ut, this._enableScrollY = this.scrollY && Xe <= Rt, j.push(this._srL, this._srT, h), this._isDragging = (this._enableScrollX || this._enableScrollY) && (5 <= ut || 5 <= Rt), this._isDragging && (this._interruptedAnimation = !1)), this._lastTouchLeft = P, this._lastTouchTop = s, this._lastTouchMove = h, this._lastScale = w));
      }, y.endHandler = function(s) {
        if (s instanceof Date && (s = s.valueOf()), this._isProcessing) {
          if (this._isProcessing = !1, this._isDragging)
            if (this._isDragging = !1, this._isSingleTouch && this.animating && s - this._lastTouchMove <= 100) {
              for (var h, w, P = this._position, j = P.length - 1, ee = j, we = j; 0 < we && P[we] > this._lastTouchMove - 100; we -= 3)
                ee = we;
              ee !== j ? (j = P[j] - P[ee], h = this._srL - P[ee - 2], w = this._srT - P[ee - 1], this._decVX = h / j * (1e3 / 60), this._decVY = w / j * (1e3 / 60), 1 < Math.abs(this._decVX) || 1 < Math.abs(this._decVY) ? this._startDeceleration(s) : this._scrollComp && this._scrollComp()) : this._scrollComp && this._scrollComp();
            } else
              100 < s - this._lastTouchMove && this._scrollComp && this._scrollComp();
          this._isDecelerating || (this._pullActive && this._pullStart ? (this.publish(this._srL, this._srT, this._zoom), this._pullStart()) : ((this._interruptedAnimation || this._isDragging) && this._scrollComp && this._scrollComp(), this._scrollTo(this._srL, this._srT, !0, this._zoom), this._pullActive && (this._pullActive = !1, this._pullDeactivate && this._pullDeactivate()))), this._position.length = 0;
        }
      }, y.zoomHandler = function(s, h, w, P) {
        return s = 0 < s ? 1.05 : 0.95, this._setScrollerPosition(), this._zoomTo(this._zoom * s, !1, !1, w - this._outerLeft, P - this._outerTop);
      }, y.publish = function(s, h, w, P) {
        var j, ee, we, De, Ce, Xe, ut = this;
        this._isAnimating && (this._stop(this._isAnimating), this._isAnimating = !1), P && this.animating ? (this._futureLeft = s, this._futureTop = h, this._futureZoom = w, j = this._srL, ee = this._srT, we = this._zoom, De = s - j, Ce = h - ee, Xe = w - we, this._isAnimating = this._start(function(Rt, tn, nn) {
          nn && (ut._srL = j + De * Rt, ut._srT = ee + Ce * Rt, ut._zoom = we + Xe * Rt, ut.callback && ut.callback(s, h, w));
        }, function(Rt) {
          return ut._isAnimating === Rt;
        }, function(Rt, tn, nn) {
          tn === ut._isAnimating && (ut._isAnimating = !1), (ut._isDecComp || nn) && ut._scrollComp && ut._scrollComp(), ut.zooming && (ut.calcMaxScrollValue(), ut._zoomComplete && (ut._zoomComplete(), ut._zoomComplete = null));
        }, this.animationDuration, this._isAnimating ? this._easeOut : this._easeInOut)) : (this._futureLeft = this._srL = s, this._futureTop = this._srT = h, this._futureZoom = this._zoom = w, this.callback && this.callback(s, h, w), this.zooming && (this.calcMaxScrollValue(), this._zoomComplete && (this._zoomComplete(), this._zoomComplete = null)));
      }, y._easeOut = function(s) {
        return Math.pow(s - 1, 3) + 1;
      }, y._easeInOut = function(s) {
        return (s /= 0.5) < 1 ? 0.5 * Math.pow(s, 3) : 0.5 * (Math.pow(s - 2, 3) + 2);
      }, y._startDeceleration = function(s) {
        var h, w, P, j, ee = this, we = (this.paging ? (h = Math.max(Math.min(this._srL, this._maxSrL), 0), w = Math.max(Math.min(this._srT, this._maxSrT), 0), P = this._outerWidth, j = this._outerHeight, this._minDecL = Math.floor(h / P) * P, this._minDecT = Math.floor(w / j) * j, this._maxDecL = Math.ceil(h / P) * P, this._maxDecT = Math.ceil(w / j) * j) : (this._minDecL = 0, this._minDecT = 0, this._maxDecL = this._maxSrL, this._maxDecT = this._maxSrT), function(Ce, Xe, ut) {
          var Rt, tn, nn, xn = ee._srL + ee._decVX, or = ee._srT + ee._decVY;
          ee.bouncing || (Rt = Math.max(Math.min(ee._maxDecL, xn), ee._minDecL), tn = Math.max(Math.min(ee._maxDecT, or), ee._minDecT), Rt !== xn && (xn = Rt, ee._decVX = 0), tn !== or && (or = tn, ee._decVY = 0)), ut ? ee.publish(xn, or, ee._zoom) : (ee._srL = xn, ee._srT = or), ee.paging || (ee._decVX *= 0.95, ee._decVY *= 0.95), ee.bouncing && (tn = Rt = 0, ut = ee.penetrationAcceleration, nn = ee.penetrationDeceleration, xn < ee._minDecL ? Rt = ee._minDecL - xn : xn > ee._maxDecL && (Rt = ee._maxDecL - xn), or < ee._minDecT ? tn = ee._minDecT - or : or > ee._maxDecT && (tn = ee._maxDecT - or), Rt != 0 && (Rt * ee._decVX <= 0 ? ee._decVX += Rt * nn : ee._decVX = Rt * ut), tn != 0 && (tn * ee._decVY <= 0 ? ee._decVY += tn * nn : ee._decVY = tn * ut));
        }), De = this.snapping ? 4 : 1e-3;
        this._isDecelerating = this._start(we, function() {
          return Math.abs(ee._decVX) >= De || Math.abs(ee._decVY) >= De || !(ee._isDecComp = !0);
        }, function(Ce, Xe, ut) {
          ee._isDecelerating = !1, ee._scrollComp && ee._scrollComp(), ee._scrollTo(ee._srL, ee._srT, ee.snapping);
        });
      }, y._stop = function(s) {
        var h = this._running[s] != null;
        return h && (this._running[s] = null), h;
      }, y._isRunning = function(s) {
        return this._running[s] != null;
      }, y._start = function(s, h, w, P, j) {
        var ee = this, we = this._time(), De = we, Ce = 0, Xe = 0, ut = this._counter++;
        if (ut % 16 == 0) {
          var Rt, tn = {};
          for (Rt in this._running)
            tn[Rt] = !0;
          this._running = tn;
        }
        return this._running[ut] = !0, z(function nn(xn) {
          xn = xn !== !0;
          var or = ee._time();
          if (!ee._running[ut] || h && !h(ut))
            return ee._running[ut] = null, void (w && w(ee._fps - Xe / ((or - we) / 1e3), ut, !1));
          if (xn)
            for (var qn = Math.round((or - De) / (1e3 / ee._fps)) - 1, Cr = 0; Cr < Math.min(qn, 4); Cr++)
              nn(!0), Xe++;
          P && 1 < (Ce = (or - we) / P) && (Ce = 1);
          var si = j ? j(Ce) : Ce;
          s(si, or, xn) !== !1 && Ce !== 1 || !xn ? xn && (De = or, z(nn)) : (ee._running[ut] = null, w && w(ee._fps - Xe / ((or - we) / 1e3), ut, Ce === 1 || P == null));
        }), ut;
      }, y.dispose = function() {
        var s;
        be.prototype.dispose.call(this), (this._db = null) != (s = this.cvsMng) && s.dispose(), (this.cvsMng = null) != (s = this.slide) && s.dispose(), this.slide = null, this.hermite = null, this.offScreenCanvas = null, this.isDisposed = !0;
      }, Pe;
    }(Ct), jm = function(be) {
      function Pe(s, h) {
        var w = be.call(this, h) || this;
        return w.uid = null, w._tbPub = null, w._size = null, w._mouseShape = "pointer", w._direction = "vertical", w._sequence = -1, w._location = "horizontal", w._showThb = !0, w._showPNum = !1, w._showRmBtn = !1, w._fullThb = !1, w._dragging = !0, w._resizing = !0, w._keyboard = !1, w._rows = 4, w._columns = 1, w._bg = "rgba(67,66,70,1)", w._border = "1px solid rgba(27,27,29,1)", w._pageBg = "rgba(0,0,0,0)", w._pageBorder = "1px solid rgba(128,128,128,1)", w._sltPBg = "rgba(127,133,251,1)", w._sltPBorder = "1px solid rgba(255,0,0,1)", w._hvPBg = "rgba(196,250,248,1)", w._hvPBorder = "1px solid rgba(255,255,0,1)", w._placeholderBg = "rgba(255,192,203,1)", w._pageMargin = 10, w._autoChangeIdx = !1, w._checkboxConfig = {}, w._pageNumberConfig = {}, w._multiSelectMode = !1, w._optimizeImage = !0, w.uid = V(11), w._tbPub = new Ct(), w.init(s), w._tbPub._on("_changeThumbnailViewProp", function(P) {
          for (var j in P)
            w[j] = P[j];
        }), w;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.updateUiSetting = function(s) {
        this.init(s = s === void 0 ? {} : s);
      }, y.init = function(s, h) {
        var w = this;
        h === void 0 && (h = []), Object.keys(s).forEach(function(P) {
          var j = w[P];
          j !== s[P] && (w[P] = s[P], j === w[P] && h.push(P));
        });
      }, y._err = function(s) {
        this._emit(tr, s);
      }, y._ok = function() {
        this._emit(tr, cn);
      }, y.scrollTo = function(s) {
        this.emit("_scrollToUI", s, !1);
      }, y.setViewMode = function(s, h) {
        return c(s) && c(h) ? s < 0 || h < 0 ? (this._err(ii), !1) : (this._rows = h, this._columns = s, this.emit("_setViewModeUI", s, h), !0) : (this._err(rn), !1);
      }, y.getConfig = function() {
        return { pubsub: this._tbPub.getPublishSubscribe(), uid: this.uid, size: this.size, mouseShape: this.mouseShape, scrollDirection: this.scrollDirection, sequence: this.sequence, location: this.location, showThumbnail: this.showThumbnail, showPageNumber: this.showPageNumber, showRemoveBtn: this.showRemoveBtn, fullThumbnail: this.fullThumbnail, allowPageDragging: this.allowPageDragging, allowResizing: this.allowResizing, allowKeyboardControl: this.allowKeyboardControl, autoChangeIndex: this.autoChangeIndex, rows: this.rows, columns: this.columns, background: this.background, border: this.border, pageBackground: this.pageBackground, pageBorder: this.pageBorder, selectedPageBackground: this.selectedPageBackground, selectedPageBorder: this.selectedPageBorder, hoverPageBackground: this.hoverPageBackground, hoverPageBorder: this.hoverPageBorder, placeholderBackground: this.placeholderBackground, pageMargin: this.pageMargin, checkbox: this.checkbox, pageNumber: this.pageNumber };
      }, y.on = function(s, h) {
        return a(s) && i(h) ? (this._tbPub._on(s, h), !0) : (this._err(rn), !1);
      }, y.emit = function(s) {
        var h;
        if (!a(s))
          return this._err(rn), !1;
        for (var w = arguments.length, P = new Array(1 < w ? w - 1 : 0), j = 1; j < w; j++)
          P[j - 1] = arguments[j];
        return (h = this._tbPub)._emit.apply(h, [s].concat(P)), !0;
      }, y.off = function(s, h) {
        return a(s) ? (this._tbPub._off(s, h), !0) : (this._err(rn), !1);
      }, y._notifyUi = function(s) {
        this.emit("_updateThumbnailPropUI", s);
      }, y.dispose = function() {
        var s;
        be.prototype.dispose.call(this), (s = this._tbPub) != null && s.dispose(), this._tbPub = null;
      }, uf(Pe, [{ key: "optimizeImage", get: function() {
        return this._optimizeImage;
      }, set: function(s) {
        this._optimizeImage = s, this._notifyUi({ optimizeImage: s }), this._ok();
      } }, { key: "multiSelectMode", get: function() {
        return this._multiSelectMode;
      }, set: function(s) {
        d(s) ? (this._multiSelectMode = s, this._notifyUi({ multiSelectMode: s }), this._ok()) : this._err(rn);
      } }, { key: "checkbox", get: function() {
        return this._checkboxConfig;
      }, set: function(s) {
        t(s) ? (Object.assign(this._checkboxConfig, s), this._notifyUi({ checkbox: s }), this._ok()) : this._err(rn);
      } }, { key: "pageNumber", get: function() {
        return this._pageNumberConfig;
      }, set: function(s) {
        t(s) ? (s.visibility !== void 0 && (this._showPNum = s.visibility === "visible"), Object.assign(this._pageNumberConfig, s), this._notifyUi({ pageNumber: s }), this._ok()) : this._err(rn);
      } }, { key: "size", get: function() {
        return this._size;
      }, set: function(s) {
        u(s) ? (this._size = s, this._notifyUi({ size: s }), this._ok()) : this._err(Ws);
      } }, { key: "mouseShape", get: function() {
        return this._mouseShape;
      }, set: function(s) {
        a(s) ? (this._mouseShape = s, this._notifyUi({ mouseShape: s }), this._ok()) : this._err(rn);
      } }, { key: "pubsub", get: function() {
        return this._tbPub.getPublishSubscribe();
      } }, { key: "scrollDirection", get: function() {
        return this._direction;
      }, set: function(s) {
        a(s) ? (this._direction = s, this._notifyUi({ scrollDirection: s }), this._ok()) : this._err(rn);
      } }, { key: "sequence", get: function() {
        return this._sequence;
      }, set: function(s) {
        c(s) ? (this._sequence = s, this._notifyUi({ sequence: s }), this._ok()) : this._err(rn);
      } }, { key: "location", get: function() {
        return this._location;
      }, set: function(s) {
        a(s) ? (this._location = s, this._notifyUi({ location: s }), this._ok()) : this._err(rn);
      } }, { key: "showThumbnail", get: function() {
        return this._showThb;
      }, set: function(s) {
        d(s) ? (this._showThb = s, this._notifyUi({ showThumbnail: s }), this._ok()) : this._err(rn);
      } }, { key: "showPageNumber", get: function() {
        return this._showPNum;
      }, set: function(s) {
        d(s) ? (this._showPNum = s, this._pageNumberConfig || (this._pageNumberConfig = {}), this._pageNumberConfig.visibility = s ? "visible" : "hidden", this._notifyUi({ showPageNumber: s }), this._ok()) : this._err(rn);
      } }, { key: "showRemoveBtn", get: function() {
        return this._showRmBtn;
      }, set: function(s) {
        d(s) ? (this._showRmBtn = s, this._notifyUi({ showRemoveBtn: s }), this._ok()) : this._err(rn);
      } }, { key: "fullThumbnail", get: function() {
        return this._fullThb;
      }, set: function(s) {
        d(s) ? (this._fullThb = s, this._notifyUi({ fullThumbnail: s }), this._ok()) : this._err(rn);
      } }, { key: "rows", get: function() {
        return this._rows;
      }, set: function(s) {
        c(s) ? s <= 0 ? this._err(ii) : (this._rows = s, this._notifyUi({ rows: s }), this._ok()) : this._err(rn);
      } }, { key: "columns", get: function() {
        return this._columns;
      }, set: function(s) {
        c(s) ? s <= 0 ? this._err(ii) : (this._columns = s, this._notifyUi({ columns: s }), this._ok()) : this._err(rn);
      } }, { key: "background", get: function() {
        return this._bg;
      }, set: function(s) {
        _(s) ? (this._bg = s, this._notifyUi({ background: s }), this._ok()) : this._err(fi);
      } }, { key: "border", get: function() {
        return this._border;
      }, set: function(s) {
        v(s) ? (this._border = s, this._notifyUi({ border: s }), this._ok()) : this._err(Pa);
      } }, { key: "pageBackground", get: function() {
        return this._pageBg;
      }, set: function(s) {
        _(s) ? (this._pageBg = s, this._notifyUi({ pageBackground: s }), this._ok()) : this._err(fi);
      } }, { key: "pageBorder", get: function() {
        return this._pageBorder;
      }, set: function(s) {
        v(s) ? (this._pageBorder = s, this._notifyUi({ pageBorder: s }), this._ok()) : this._err(Pa);
      } }, { key: "selectedPageBackground", get: function() {
        return this._sltPBg;
      }, set: function(s) {
        _(s) ? (this._sltPBg = s, this._notifyUi({ selectedPageBackground: s }), this._ok()) : this._err(fi);
      } }, { key: "selectedPageBorder", get: function() {
        return this._sltPBorder;
      }, set: function(s) {
        v(s) ? (this._sltPBorder = s, this._notifyUi({ selectedPageBorder: s }), this._ok()) : this._err(Pa);
      } }, { key: "hoverPageBackground", get: function() {
        return this._hvPBg;
      }, set: function(s) {
        _(s) ? (this._hvPBg = s, this._notifyUi({ hoverPageBackground: s }), this._ok()) : this._err(fi);
      } }, { key: "hoverPageBorder", get: function() {
        return this._hvPBorder;
      }, set: function(s) {
        v(s) ? (this._hvPBorder = s, this._notifyUi({ hoverPageBorder: s }), this._ok()) : this._err(Pa);
      } }, { key: "placeholderBackground", get: function() {
        return this._placeholderBg;
      }, set: function(s) {
        _(s) ? (this._placeholderBg = s, this._notifyUi({ placeholderBackground: s }), this._ok()) : this._err(fi);
      } }, { key: "pageMargin", get: function() {
        return this._pageMargin;
      }, set: function(s) {
        u(s) ? (this._pageMargin = s, this._notifyUi({ pageMargin: s }), this._ok()) : this._err(Ws);
      } }, { key: "allowPageDragging", get: function() {
        return this._dragging;
      }, set: function(s) {
        d(s) ? (this._dragging = s, this._notifyUi({ allowPageDragging: s }), this._ok()) : this._err(rn);
      } }, { key: "allowResizing", get: function() {
        return this._resizing;
      }, set: function(s) {
        d(s) ? (this._resizing = s, this._notifyUi({ allowResizing: s }), this._ok()) : this._err(rn);
      } }, { key: "allowKeyboardControl", get: function() {
        return this._keyboard;
      }, set: function(s) {
        d(s) ? (this._keyboard = s, this._notifyUi({ allowKeyboardControl: s }), this._ok()) : this._err(rn);
      } }, { key: "autoChangeIndex", get: function() {
        return this._autoChangeIdx;
      }, set: function(s) {
        d(s) ? (this._autoChangeIdx = s, this._notifyUi({ autoChangeIndex: s }), this._ok()) : this._err(rn);
      } }]), Pe;
    }(Ct), cf = function() {
      function be(y) {
        var s = this;
        this.uid = null, this.mode = "normal", this.vertexes = [], this.midpoints = [], this.probePoints = [], this.slopeRatio = [], this.isCrop = !1, this.isConvex = !0, this.isPointSelected = !1, this.activeProbePoint = null, this.moveLeft = 0, this.moveTop = 0, this.isMoveBox = !1, this.width = 0, this.height = 0, this.type = "bottomRight", this.keepAspectRatio = !1, this.aspectRatio = 0, this._startX = null, this._startY = null, this._lastX = null, this._lastY = null, this._lastWhr = 1, this.zoom = 1, this.dpr = 1, this.cropBoxStyle = { ctrlWidth: 8, ctrlHeight: 8 }, this.uid = V(11), Object.keys(y).forEach(function(h) {
          s[h] = y[h];
        }), this._initBox();
      }
      var Pe = be.prototype;
      return Pe.getRect = function() {
        if (this.mode === "free")
          return null;
        var y = (w = this._getMaxPoint()).minX, s = w.maxX, h = w.minY, w = w.maxY;
        return { x: Math.floor(y), y: Math.floor(h), width: Math.floor(s - y), height: Math.floor(w - h) };
      }, Pe._initBox = function() {
        this.midpoints = this._calcMidpoint(this.vertexes), this.probePoints = this.vertexes.slice().concat(this.midpoints.slice()), this.slopeRatio = this._calcSlopeRatio(this.vertexes);
      }, Pe._getMaxPoint = function() {
        return { minX: Math.min(this.probePoints[0], this.probePoints[2], this.probePoints[4], this.probePoints[6]), maxX: Math.max(this.probePoints[0], this.probePoints[2], this.probePoints[4], this.probePoints[6]), minY: Math.min(this.probePoints[1], this.probePoints[3], this.probePoints[5], this.probePoints[7]), maxY: Math.max(this.probePoints[1], this.probePoints[3], this.probePoints[5], this.probePoints[7]) };
      }, Pe.checkPointPosition = function(y) {
        var s = (P = this._getMaxPoint()).minX, h = P.maxX, w = P.minY, P = P.maxY, j = this.probePoints[2 * y], ee = this.probePoints[2 * y + 1];
        return y < 4 ? j === h && ee === P ? "se" : j === h && ee === w ? "ne" : j === s && ee === w ? "nw" : j === s && ee === P ? "sw" : null : j === h ? "e" : ee === P ? "s" : j === s ? "w" : ee === w ? "n" : null;
      }, Pe.onStartHandler = function(y, s, h) {
        var w = this.isBoxSelected(y, s);
        (w = h !== void 0 ? h : w) !== null && (this._startX = y, this._startY = s, this._lastX = y, this._lastY = s, w === -1 ? (this.isPointSelected = !1, this.activeProbePoint = null, this.mode === "normal" && (this.isMoveBox = !0)) : (this.isPointSelected = !0, this.activeProbePoint = w, this.isMoveBox = !1), this.mode === "free" && 3 < w && (this.k1 = this.slopeRatio[(1 + (h = w - 4)) % 4], this.b1 = this.probePoints[(2 * h + 3) % 8] - this.k1 * this.probePoints[(2 * h + 2) % 8], this.k2 = this.slopeRatio[(3 + h) % 4], this.b2 = this.probePoints[(2 * h + 1) % 8] - this.k2 * this.probePoints[(2 * h + 0) % 8]));
      }, Pe.onMoveHandler = function(y, s, h) {
        if (this.isPointSelected || this.isMoveBox) {
          var w = this.probePoints.slice();
          if (this.isPointSelected) {
            var P = this.activeProbePoint;
            h = (h !== void 0 && (P = h), this.mode === "normal" ? w = this._movePointNormal(w, P, y, s) : (w = this._movePointFree(w, P, y, s), this.slopeRatio = this._calcSlopeRatio(this.probePoints).slice(0, 4)), this.probePoints = w.slice(), this._checkRectConvexity(this.probePoints)), this.isConvex = !!h;
          } else if (this.isMoveBox) {
            if (P = y - this._lastX, h = s - this._lastY, P == 0 && h == 0)
              return;
            w = this._moveBox(w, P, h), this.probePoints = w.slice();
          }
          P = this._calcMidpoint(this.probePoints), this.probePoints = this.probePoints.slice(0, 8).concat(P), this.midpoints = P, this._lastX = y, this._lastY = s;
        }
      }, Pe.onEndHandler = function() {
        this.isConvex = !0;
        var y, s = this._startX, h = this._startY, w = (this._startX = 0, this._startY = 0, this._lastX), P = this._lastY;
        (this.isPointSelected || this.isMoveBox) && (this.isPointSelected = !1, this.isMoveBox = !1, this.activeProbePoint = null, y = this._checkRectConvexity(this.probePoints), (s !== w || h !== P) && y || (this.probePoints = this.vertexes.slice().concat(this.midpoints)), this.vertexes = this.probePoints.slice(0, 8), this.midpoints = this._calcMidpoint(this.probePoints), this.probePoints = this.probePoints.slice(0, 8).concat(this.midpoints), this.slopeRatio = this._calcSlopeRatio(this.probePoints).slice(0, 4));
      }, Pe._checkEdge = function(y, s) {
        return 0 <= y && y <= this.width && 0 <= s && s < this.height;
      }, Pe._movePointNormal = function(y, s, h, w) {
        h = Math.max(0, Math.min(this.width, h)), w = Math.max(0, Math.min(this.height, w));
        var P = 0, j = 0;
        if (this.keepAspectRatio) {
          var ee = (Ce = this._getMaxPoint()).minX, we = Ce.maxX, De = Ce.minY, Ce = Ce.maxY, Xe = this.checkPointPosition(s);
          if (ee = ((we = (we - ee) / (Ce - De)) === 0 || we === 1 / 0 || we === -1 / 0 || isNaN(we) ? we = this._lastWhr : this._lastWhr = we, j = P = 0, "width"), s < 4) {
            if (P = h - y[2 * s], j = w - y[2 * s + 1], P === 0 || j === 0)
              return y;
            ee = "width";
          } else if (Ce = s - 4, Xe === "e" ? (s = (1 + Ce) % 4, ee = "width") : Xe === "s" ? (s = Ce, ee = "height") : Xe === "w" ? (s = Ce, ee = "width") : Xe === "n" && (s = (1 + Ce) % 4, ee = "height"), P = h - y[2 * Ce], j = w - y[2 * Ce + 1], P === 0 || j === 0)
            return y;
          ee === "height" ? (P = j * we, Xe !== "ne" && Xe !== "sw" && Xe !== "n" && Xe !== "w" || (P = -P)) : (j = P / we, Xe !== "ne" && Xe !== "sw" && Xe !== "n" && Xe !== "w" || (j = -j)), De = y[2 * s] + P, Ce = y[2 * s + 1] + j, De < 0 ? (P = 0 - y[2 * s], j = 0) : De > this.width ? (P = this.width - y[2 * s], j = 0) : Ce < 0 ? (j = 0 - y[2 * s + 1], P = 0) : Ce > this.height && (j = this.height - y[2 * s + 1], P = 0), y[2 * s] += P, y[2 * s + 1] += j, ee = (s + 1) % 4, we = (s + 3) % 4, s % 2 ? (y[2 * ee] += P, y[2 * we + 1] += j) : (y[2 * ee + 1] += j, y[2 * we] += P);
        } else if (s < 4) {
          if (P = h - y[2 * s], j = w - y[2 * s + 1], P === 0 && j === 0)
            return y;
          y[2 * s] = h, y[2 * s + 1] = w, Xe = (s + 1) % 4, De = (s + 3) % 4, s % 2 ? (y[2 * Xe] = h, y[2 * De + 1] = w) : (y[2 * Xe + 1] = w, y[2 * De] = h);
        } else
          Ce = s - 4, (ee = this.slopeRatio[Ce % 4]) === 0 ? (y[(2 * Ce + 3) % 8] = w, y[(2 * Ce + 1) % 8] = w) : ee !== 1 / 0 && ee !== -1 / 0 || (y[(2 * Ce + 2) % 8] = h, y[(2 * Ce + 0) % 8] = h);
        return y;
      }, Pe._movePointFree = function(y, s, h, w) {
        h = Math.max(0, Math.min(this.width, h)), w = Math.max(0, Math.min(this.height, w));
        var P = y.slice();
        if (s < 4) {
          var j = h - y[2 * s], ee = w - y[2 * s + 1];
          if (j == 0 && ee == 0)
            return y;
          y[2 * s] = h, y[2 * s + 1] = w;
        } else {
          j = s - 4;
          var we = -(s = w - (ee = this.slopeRatio[j % 4]) * h) / ee, De = s, Ce = y[(2 * j + 9) % 8] - ee * y[(2 * j + 8) % 8], Xe = -Ce / ee, ut = this.k1, Rt = this.b1, tn = this.k2, nn = this.b2;
          ee === 0 ? (y[(2 * j + 3) % 8] = w, ut !== 1 / 0 && ut !== -1 / 0 && (y[(2 * j + 2) % 8] = (w - Rt) / ut), y[(2 * j + 1) % 8] = w, tn !== 1 / 0 && tn !== -1 / 0 && (y[(2 * j + 0) % 8] = (w - nn) / tn)) : ee === 1 / 0 || ee === -1 / 0 ? (y[(2 * j + 2) % 8] = h, y[(2 * j + 3) % 8] = ut * h + Rt, y[(2 * j + 0) % 8] = h, y[(2 * j + 1) % 8] = tn * h + nn) : (ut === 0 ? y[(2 * j + 2) % 8] += we - Xe : ut === 1 / 0 || ut === -1 / 0 ? y[(2 * j + 3) % 8] += De - Ce : (y[(2 * j + 2) % 8] = (Rt - s) / (ee - ut), y[(2 * j + 3) % 8] = (ee * Rt - ut * s) / (ee - ut)), tn === 0 ? y[(2 * j + 0) % 8] += we - Xe : tn === 1 / 0 || tn === -1 / 0 ? y[(2 * j + 1) % 8] += De - Ce : (y[(2 * j + 0) % 8] = (nn - s) / (ee - tn), y[(2 * j + 1) % 8] = (ee * nn - tn * s) / (ee - tn)));
          for (var xn = 0; xn < 4; xn++) {
            var or = y[2 * xn], qn = y[2 * xn + 1];
            if (or < 0 || or > this.width || qn < 0 || qn > this.height)
              return P;
          }
        }
        return y;
      }, Pe._moveBox = function(y, s, h) {
        if (this.mode === "normal") {
          var w = Math.min(y[0], y[2], y[4], y[6]), P = Math.max(y[0], y[2], y[4], y[6]), j = Math.min(y[1], y[3], y[5], y[7]), ee = Math.max(y[1], y[3], y[5], y[7]);
          P + (s = w + s < 0 ? -w : s) > this.width && (s = this.width - P), ee + (h = j + h < 0 ? -j : h) > this.height && (h = this.height - ee);
          for (var we = 0; we < 4; we++)
            y[2 * we] += s, y[2 * we + 1] += h;
        }
        return y;
      }, Pe._isPointOnBox = function(y, s) {
        var h, w, P, j;
        return this.mode === "normal" && (h = (j = this._getMaxPoint()).minX, w = j.maxX, P = j.minY, j = j.maxY, h <= y && y <= w && P <= s && s <= j);
      }, Pe.isBoxSelected = function(y, s) {
        var h = this._isPointOnBox(y, s);
        return (y = this.isCtrlPointSelected(y, s)) !== null ? y : h ? -1 : null;
      }, Pe.isCtrlPointSelected = function(y, s) {
        for (var h = this.cropBoxStyle.ctrlWidth / this.zoom / 2, w = this.cropBoxStyle.ctrlHeight / this.zoom / 2, P = (we = this._getMaxPoint()).minX, j = we.maxX, ee = we.minY, we = we.maxY, De = (h = Math.min(Math.max(h, 0.1 * (j - P)), 3 * h), w = Math.min(Math.max(w, 0.1 * (we - ee)), 3 * w), 0); De < 8; De++) {
          var Ce = this.probePoints[2 * De], Xe = this.probePoints[2 * De + 1];
          if (y <= Ce + h && Ce - h <= y && s <= Xe + w && Xe - w <= s && 0 <= y && y <= this.width && 0 <= s && s <= this.height)
            return De;
        }
        return null;
      }, Pe._checkRectConvexity = function(y) {
        var s = (y[6] - y[0]) * (y[3] - y[1]) - (y[7] - y[1]) * (y[2] - y[0]), h = (y[0] - y[2]) * (y[5] - y[3]) - (y[1] - y[3]) * (y[4] - y[2]), w = (y[2] - y[4]) * (y[7] - y[5]) - (y[3] - y[5]) * (y[6] - y[4]), P = (y[4] - y[6]) * (y[1] - y[7]) - (y[5] - y[7]) * (y[0] - y[6]);
        if (s * h * w * P < 0)
          return !1;
        var j = y.slice().concat(y.slice(0, 2));
        if (this.slopeRatio.length) {
          for (var ee = 0; ee < 2; ee++)
            if (this.slopeRatio[ee] !== this.slopeRatio[ee + 2] && this._calcIntersection(j.slice(2 * ee, 2 * ee + 2), j.slice(2 * ee + 2, 2 * ee + 4), j.slice(2 * ee + 4, 2 * ee + 6), j.slice(2 * ee + 6, 2 * ee + 8)))
              return !1;
        }
        return 0 < s * h * w * P;
      }, Pe._calcMidpoint = function(y) {
        for (var s = y.slice(0, 8).concat(y[0], y[1]), h = [], w = 0; w < 4; w++) {
          var P = (s[2 * w] + s[2 * w + 2]) / 2, j = (s[2 * w + 1] + s[2 * w + 3]) / 2;
          h.push(P, j);
        }
        return h;
      }, Pe._calcSlopeRatio = function(y) {
        for (var s = [], h = null, w = y.slice(0, 8).concat(y[0], y[1]), P = 0; P < 4; P++)
          h = w[2 * P + 3] - w[2 * P + 1] == 0 && w[2 * P + 2] - w[2 * P] == 0 ? 0 : (w[2 * P + 3] - w[2 * P + 1]) / (w[2 * P + 2] - w[2 * P]), s.push(h);
        return s;
      }, Pe._calcIntersection = function(y, s, h, w) {
        if (this._isRectCross(y, s, h, w) && this._isLineSegmentCross(y, s, h, w)) {
          var P = (w[0] - h[0]) * (y[1] - s[1]) - (s[0] - y[0]) * (h[1] - w[1]), j = (y[1] - h[1]) * (s[0] - y[0]) * (w[0] - h[0]) + h[0] * (w[1] - h[1]) * (s[0] - y[0]) - y[0] * (s[1] - y[1]) * (w[0] - h[0]);
          if (P == 0 || j === 0) {
            var ee = this._getLine(y, s), we = this._getLine(h, w), De = ee[0], Ce = ee[1], Xe = we[0], ut = we[1];
            if (Ce[0] === Xe[0] && Ce[1] === Xe[1])
              return Ce;
            if (De[0] === ut[0] && De[1] === ut[1])
              return De;
            if (this._isOnLine(Ce, we) && this._isOnLine(Xe, ee))
              return [Xe, Ce];
            if (this._isOnLine(De, we) && this._isOnLine(ut, ee))
              return [De, ut];
            if (this._isOnLine(De, we) && this._isOnLine(Ce, we))
              return [De, Ce];
            if (this._isOnLine(Xe, we) && this._isOnLine(ut, we))
              return [Xe, ut];
          }
          return ee = j / P, P = (y[0] - s[0]) * (w[1] - h[1]) - (s[1] - y[1]) * (h[0] - w[0]), [ee, (j = s[1] * (y[0] - s[0]) * (w[1] - h[1]) + (w[0] - s[0]) * (w[1] - h[1]) * (y[1] - s[1]) - w[1] * (h[0] - w[0]) * (s[1] - y[1])) / P];
        }
        return !1;
      }, Pe._getLine = function(y, s) {
        return y[0] === s[0] ? y[1] < s[1] ? [y, s] : [s, y] : y[0] < s[0] ? [y, s] : [s, y];
      }, Pe._isOnLine = function(y, s) {
        return s[0][0] === s[1][0] ? y[1] >= s[0][1] && y[1] <= s[1][1] : y[0] >= s[0][0] && y[0] <= s[1][0];
      }, Pe._isRectCross = function(y, s, h, w) {
        var P = Math.min, j = Math.max;
        return P(y[0], s[0]) <= j(h[0], w[0]) && P(h[0], w[0]) <= j(y[0], s[0]) && P(y[1], s[1]) <= j(h[1], w[1]) && P(h[1], w[1]) <= j(y[1], s[1]);
      }, Pe._isLineSegmentCross = function(y, s, h, w) {
        var P = y[0] * (h[1] - s[1]) + s[0] * (y[1] - h[1]) + h[0] * (s[1] - y[1]), j = y[0] * (w[1] - s[1]) + s[0] * (y[1] - w[1]) + w[0] * (s[1] - y[1]);
        return !(0 <= (P ^ j) && P !== 0 && j !== 0 || 0 <= ((P = h[0] * (y[1] - w[1]) + w[0] * (h[1] - y[1]) + y[0] * (w[1] - h[1])) ^ (j = h[0] * (s[1] - w[1]) + w[0] * (h[1] - s[1]) + s[0] * (w[1] - h[1]))) && P !== 0 && j !== 0);
      }, be;
    }(), zm = function() {
      function be(y, s, h) {
        this._activeBoxId = null, this._startX = null, this._startY = null, this._addNewFlag = null, this._drawingFlag = !1, this.cropBoxes = [], this.width = 0, this.height = 0, this.zoom = 1, this.aspectRatio = 0, this.keepAspectRatio = !1, this.mouseDown = !1, this.unselectedCallback = null, this.selectedCallback = null, this.cropBoxStyle = {}, this.width = y, this.height = s, Object.assign(this.cropBoxStyle, h);
      }
      var Pe = be.prototype;
      return Pe.setCropBoxStyle = function(y) {
        Object.assign(this.cropBoxStyle, y), this.cropBoxes.forEach(function(s) {
          Object.assign(s.cropBoxStyle, y);
        });
      }, Pe.updateDpr = function(y) {
        this.cropBoxes.forEach(function(s) {
          s.dpr = y;
        });
      }, Pe.setKeepAspectRatio = function(y) {
        this.keepAspectRatio = y, this._drawingFlag || this.cropBoxes.forEach(function(s) {
          s.keepAspectRatio = y;
        });
      }, Pe.setAspectRatio = function(y) {
        this.aspectRatio = y;
      }, Pe.setZoom = function(y) {
        this.zoom = y, this.cropBoxes.forEach(function(s) {
          s.zoom = y;
        });
      }, Pe.setPageSize = function(y, s) {
        this.width = y, this.height = s;
      }, Pe.getRectArr = function() {
        var y = [];
        return this.cropBoxes.forEach(function(s, h) {
          h = Object.assign({ index: h }, s.getRect()), y.push(h);
        }), y;
      }, Pe.clear = function() {
        var y;
        0 < this.cropBoxes.length && (y = this.unselectedCallback) != null && y.call(this), this.cropBoxes = [];
      }, Pe.addFreeBox = function(y) {
        var s = ue();
        return y = new cf({ cropBoxStyle: this.cropBoxStyle, vertexes: y.slice(), width: this.width, height: this.height, mode: "free", dpr: s }), this.cropBoxes.push(y), y;
      }, Pe.addBox = function(y, s) {
        var h = ue();
        return y = new cf({ cropBoxStyle: this.cropBoxStyle, vertexes: y.slice(), width: this.width, height: this.height, type: s, mode: "normal", aspectRatio: this.aspectRatio, keepAspectRatio: this.keepAspectRatio, zoom: this.zoom, dpr: h }), this.cropBoxes.push(y), y;
      }, Pe.removeBox = function(y) {
        return y === void 0 && this.clear(), !(y < 0 || y >= this.cropBoxes.length || (this.cropBoxes.splice(y, 1), 0));
      }, Pe.getBoxByUid = function(y) {
        for (var s = this.cropBoxes.length, h = 0; h < s; h++)
          if (this.cropBoxes[h].uid === y)
            return this.cropBoxes[h];
        return null;
      }, Pe.onStartHandler = function(y, s, h) {
        this._startX = y, this._startY = s, this.mouseDown = !0;
        var w = this.checkSelect(y, s);
        if (w === null)
          return h || this.clear(), void (this._activeBoxId = null);
        this._activeBoxId = this.cropBoxes[w].uid, this.getBoxByUid(this._activeBoxId).onStartHandler(y, s);
      }, Pe.onMoveHandler = function(y, s, h) {
        if (this.mouseDown) {
          var w = null, P = y - this._startX, j = s - this._startY, ee = null, we = 2 / this.zoom, De = (!this._activeBoxId && y - this._startX < -we && s - this._startY < -we ? (ee = 0) < this.aspectRatio && (j = P / this.aspectRatio) : !this._activeBoxId && y - this._startX > we && s - this._startY < -we ? (ee = 1, 0 < this.aspectRatio && (j = -P / this.aspectRatio)) : !this._activeBoxId && y - this._startX > we && s - this._startY > we ? (ee = 2, 0 < this.aspectRatio && (j = P / this.aspectRatio)) : !this._activeBoxId && y - this._startX < -we && s - this._startY > we && (ee = 3, 0 < this.aspectRatio && (j = -P / this.aspectRatio)), [y, this._startY + j, this._startX, this._startY + j, this._startX, this._startY, y, this._startY]), Ce = [this._startX, this._startY, this._startX, this._startY + j, y, this._startY + j, y, this._startY];
          if (ee !== null) {
            for (var Xe = [], ut = 0; ut < 4; ut++)
              ee % 2 ? (Xe.push(Ce[2 * (ee + ut) % 8]), Xe.push(Ce[(2 * (ee + ut) + 1) % 8])) : (Xe.push(De[2 * (ee + ut) % 8]), Xe.push(De[(2 * (ee + ut) + 1) % 8]));
            return w = this.addBox(Xe, ["topLeft", "topRight", "bottomRight", "bottomLeft"][ee]), 0 < this.aspectRatio ? w.keepAspectRatio = !0 : w.keepAspectRatio = !1, this._drawingFlag = !0, this._addNewFlag = this.keepAspectRatio, this._activeBoxId = w.uid, w.onStartHandler(this._startX, this._startY, ee), w.onMoveHandler(y, s, ee), void (ee = null);
          }
          (w = this._activeBoxId ? this.getBoxByUid(this._activeBoxId) : w) && w.onMoveHandler(y, s);
        }
      }, Pe.onEndHandler = function() {
        var y;
        this.mouseDown && (this.mouseDown = !1, this._drawingFlag = !1, this._activeBoxId && (y = this.getBoxByUid(this._activeBoxId), this._addNewFlag !== null && (y.keepAspectRatio = this._addNewFlag, this._addNewFlag = null), y.onEndHandler(), 0 < this.cropBoxes.length && (y = this.selectedCallback) != null && y.call(this, this.getRectArr()), this._activeBoxId = null));
      }, Pe.checkSelect = function(y, s) {
        var h = this.cropBoxes.length;
        if (h === 0)
          return null;
        for (var w = h - 1; 0 <= w; w--)
          if (this.cropBoxes[w].isBoxSelected(y, s) !== null)
            return w;
        return null;
      }, Pe.checkSelectForCursor = function(y, s) {
        var h = this.cropBoxes.length;
        if (h === 0)
          return null;
        for (var w = h - 1; 0 <= w; w--) {
          var P, j = this.cropBoxes[w], ee = j.isBoxSelected(y, s);
          if (ee !== null)
            return P = "move", ee !== -1 && (P = j.checkPointPosition(ee)), { part: ee, type: j.type, position: P };
        }
        return null;
      }, Pe.dispose = function() {
        this.unselectedCallback = null, this.selectedCallback = null;
      }, be;
    }(), ll = function() {
      function be(y, s, h) {
        this._db = null, this.visible = !1, this.children = [], this.redoStack = [], this.undoStack = [], this.matrixStack = [], this.style = { left: 0, top: 0, width: 0, height: 0, borderColor: "#ffffff", borderType: "solid", borderWidth: 0 }, this.naturalWidth = 0, this.naturalHeight = 0, this.wrapLeft = 0, this.wrapTop = 0, this.wrapWidth = 0, this.wrapHeight = 0, this.rotateAngle = 0, this.flipCount = 0, this.flipCountX = 0, this.flipCountY = 0, this.selectionBoxes = [], this.cropMng = null, this.editor2d = null, this._db = s, this.uid = y.uid, this.naturalWidth = y.naturalW, this.naturalHeight = y.naturalH, this.cropMng = new zm(this.naturalWidth, this.naturalHeight, h), this.editor2d = new of();
      }
      var Pe = be.prototype;
      return Pe.setBorder = function(y, s, h) {
        this.style.borderWidth = y, s && (this.style.borderType = s), h && (this.style.borderColor = h);
      }, Pe.setSize = function(y, s) {
        this.style.width = y || 1, this.style.height = s || 1;
      }, Pe.setPosition = function(y, s) {
        this.style.left = y, this.style.top = s;
      }, Pe.clearSelectionBoxes = function() {
        this.selectionBoxes = [];
      }, Pe.pushSelectionBox = function(y) {
        this.selectionBoxes.push(y);
      }, Pe.setNaturalSize = function(y, s) {
        var h = this._db.getMid(this.uid);
        h && (h.tempWidth = y, h.tempHeight = s), this.naturalWidth = y, this.naturalHeight = s, this.cropMng.setPageSize(y, s);
      }, Pe.boxCount = function() {
        return this.cropMng.cropBoxes.length;
      }, be;
    }(), lf = (st = function() {
      function be(y) {
        this.uid = y.uid, this.chs = y.chs || [];
      }
      var Pe = be.prototype;
      return Pe.append = function(y) {
        return this._idxOf(y) === -1 && (this.chs.push(y), !0);
      }, Pe.insert = function(y, s) {
        return !(s < 0 || s >= this.chs.length || (this.chs.splice(s, 0, y), 0));
      }, Pe.remove = function(y) {
        return (y = this._idxOf(y)) !== -1 && (this.chs.splice(y, 1), !0);
      }, Pe.clear = function() {
        return this.chs = [], !0;
      }, Pe.move = function(y, s) {
        return y === s || (y = this.chs.splice(y, 1)[0], this.chs.splice(s, 0, y)), !0;
      }, Pe.switch = function(y, s) {
        if (y === s)
          return !0;
        var h = this.chs[y];
        return this.chs[y] = this.chs[s], this.chs[s] = h, !0;
      }, Pe.reorder = function(y) {
        var s = y.length, h = [], w = 0;
        if (this.chs.length !== s || s === 0)
          return !1;
        for (var P = 0; P < s; P++)
          y[P] === P && w++;
        if (w === s)
          return !0;
        for (var j = 0; j < s; j++)
          h[j] = this.chs[y[j]];
        for (var ee = 0; ee < s; ee++)
          this.chs[ee] = h[ee];
        return !0;
      }, Pe._idxOf = function(y) {
        for (var s = a(y), h = 0, w = this.chs.length; h < w; h++)
          if (s && this.chs[h] === y || !s && this.chs[h].uid === y.uid)
            return h;
        return -1;
      }, be;
    }(), function(be) {
      function Pe(s) {
        var h = be.call(this, s) || this;
        return h.cur = -1, h.total = 0, h.slt = [], h.chs = [], h.thbs = [], h.scrL = 0, h.scrT = 0, h.virW = 0, h.virH = 0, h.iMargin = 0, h.oMargin = 0, h.zoom = 1, h.fitType = "window", h.clickZoom = !1, h.isFreeCrop = !1, h.disMode = "single", h.opMode = 0, h.name = s.name, h.type = s.type, h.chs = s.chs, h.zoom = s.zoom, h.fitType = s.fitType, h.disMode = s.disMode, h.opMode = s.opMode, h;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.getCurUid = function() {
        return this.cur === -1 ? null : this.chs[this.cur].uid;
      }, y.getCurPage = function() {
        return this.cur === -1 ? null : this.chs[this.cur];
      }, y.idxPage = function(s) {
        return this.chs[s];
      }, y.uidPage = function(s) {
        if (!s)
          return null;
        for (var h = 0; h < this.total; h++)
          if (this.chs[h].uid === s)
            return this.chs[h];
        return null;
      }, y.uid2Idx = function(s) {
        for (var h = 0; h < this.total; h++)
          if (this.chs[h].uid === s)
            return h;
        return -1;
      }, y.setCur = function(s) {
        return !(s < 0 || s >= this.total || (this.cur = s, 0));
      }, y.append = function(s) {
        return this.chs.push(s), !0;
      }, y.remove = function(s) {
        var h = this.chs.length;
        return h !== 0 && (h === 1 ? this.chs[0].uid === s && (this.cur = -1, this.total = 0, this.slt = [], this.chs = [], !0) : (h = this.uid2Idx(s)) !== -1 && ((h === this.cur && h === this.total - 1 || h < this.cur) && this.cur--, this.chs.splice(h, 1), this.chs[this.cur] ? this.slt = [this.chs[this.cur].uid] : this.slt = [], this.total--, !0));
      }, y.clear = function() {
        return this.chs = [], this.slt = [], this.cur = -1, !(this.total = 0);
      }, y.getSlt = function() {
        return this.slt.slice();
      }, y.setSlt = function(s) {
        var h = s.length;
        return h === 0 ? (this.slt = s, this.cur = -1, !0) : (h = this.uid2Idx(s[h - 1])) !== -1 && (this.slt = s, this.cur = h, !0);
      }, y.move = function(s, h) {
        return be.prototype.move.call(this, s, h), this.setSlt([this.chs[h].uid]);
      }, y.switch = function(s, h) {
        return be.prototype.switch.call(this, s, h), this.cur === s ? this.setSlt([this.chs[h].uid]) : this.cur === h && this.setSlt([this.chs[s].uid]), !0;
      }, y.next = function() {
        return this.total === 0 ? -1 : (1 < this.total - this.cur && this.cur < this.total && this.cur++, this.slt = [this.chs[this.cur].uid], this.cur);
      }, y.prev = function() {
        return this.total === 0 ? -1 : (0 < this.cur && this.cur--, this.cur < 0 ? -1 : (this.slt = [this.chs[this.cur].uid], this.cur));
      }, y.first = function() {
        return this.total === 0 ? -1 : (this.cur = 0, this.slt = [this.chs[0].uid], 0);
      }, y.last = function() {
        return this.total === 0 ? -1 : (this.cur !== this.total - 1 && (this.cur = this.total - 1), this.slt = [this.chs[this.cur].uid], this.cur);
      }, y.goto = function(s) {
        return this.total === 0 ? -1 : (s !== this.cur && (s = s < this.total ? 0 <= s ? s : 0 : this.total - 1, this.cur = s), this.slt = [this.chs[this.cur].uid], this.cur);
      }, Pe;
    }(st)), Hm = function() {
      function be(y) {
        this.tabs = [], this.mode = "single", this.curTab = null, this.dfConfig = null, this._opStack = [], this.tabs = [], this.dfConfig = { zoom: 1, fitType: "window", disMode: "single", opMode: 0 };
      }
      var Pe = be.prototype;
      return Pe.addTab = function(y) {
        var s = this.checkTab(y.uid), h = null;
        return s !== -1 ? h = this.tabs[s] : (s = Object.assign(this.dfConfig, y), h = new lf(s), this.mode === "single" ? this.tabs = [h] : this.tabs.push(h)), h;
      }, Pe.getTab = function(y) {
        return (y = this.checkTab(y)) === -1 ? null : this.tabs[y];
      }, Pe.checkTab = function(y) {
        for (var s = this.tabs.length, h = 0; h < s; h++)
          if (this.tabs[h].uid === y)
            return h;
        return -1;
      }, Pe.getCurTab = function() {
        return this.getTab(this.curTab);
      }, Pe.setCurTab = function(y) {
        if (~this.checkTab(y))
          return this.curTab = y, !0;
      }, Pe._moveToTop = function(y, s) {
        0 <= s && s < y.length && (s = y.splice(s, 1)[0], y.push(s));
      }, Pe.closeTab = function(y) {
        return (y = this.checkTab(y)) !== -1 && (this._opStack.pop(), this.tabs.splice(y, 1), this.tabs.length === 0 ? this.curTab = null : this.curTab = this._opStack[this._opStack.length - 1], !0);
      }, Pe.setMode = function(y) {
        return (y === "single" || y === "multiple") && (this.mode = y, !0);
      }, Pe.removePage = function(y, s) {
        return (y = this.checkTab(y)) != -1 && this.tabs[y].remove(s);
      }, Pe.dispose = function() {
      }, be;
    }(), Km = function(be) {
      function Pe(s, h, w, P, j, ee, we, De, Ce) {
        var Xe = be.call(this, h) || this;
        return Xe.showLatest = !0, Xe.isMainViewVisible = !0, Xe.isThumbnailVisible = !0, Xe.thbViews = [], Xe.tabMode = "single", Xe.autoOpen = !0, Xe.keepZoom = !0, Xe.cors = !0, Xe.minPicWidth = 800, Xe.minPicHeight = 800, Xe.saveType = "image/jpeg", Xe.saveQuality = 1, Xe.useHermite = !0, Xe.rows = 1, Xe.columns = 1, Xe.slideTimer = null, Xe.showTabTimer = null, Xe.isDisposed = !1, Xe.cropBoxStyle = { borderWidth: 1, borderColor: "#000", invalidBorderColor: "#f00", dashLine: [4, 2], background: "", ctrlBorderWidth: 1, ctrlBorderRadius: 0, ctrlBorderColor: "#000", invalidCtrlBorderColor: "#f00", ctrlBackground: "", ctrlWidth: 8, ctrlHeight: 8, enableConcaveBorderColor: !1 }, Object.assign(Xe.cropBoxStyle, s.uiConfig.canvasConfig.cropBoxStyle || {}), Xe.saveCanvas = Ce, Xe.uid = P, Xe._mPub = new Ct(w), Xe._db = we, Xe._tabMng = new Hm(s), document.documentMode === void 0 && !T() || (Xe.useHermite = !1), Xe._gpc = new Gm(s, Xe._db, Xe._oPub, P, Xe.useHermite, j, ee, De), Xe._initEvent(), Xe._gpc.slide.bindSlideEndCallback(function(ut) {
          ut === nt ? Xe.prevPage() : ut === ft && Xe.nextPage(), be.prototype._emit.call(cl(Xe), "slideFinished", ut), Xe.setFitType("window");
        }), Xe;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.setUseHermite = function(s) {
        this.useHermite = s, this._gpc.useHermite = s;
      }, y.drawSltBox = function() {
        var s;
        this._gpc.disMode === "single" && (s = this._tabMng.getCurTab()) && (s = s.getCurPage()) && this._gpc.drawSltBox(s);
      }, y.render = function(s, h) {
        s = s || !1, h = h || !1;
        var w = this._tabMng.getCurTab();
        return !!w && (this._gpc._layoutSingle(w, s, h), (s = w.getCurPage()) ? (this._checkDisplay(w), this._showPage(s.uid, w.uid), this._ok(), !0) : (this._gpc.clearCanvas(), this._err(ur), !1));
      }, y.tabHandler = function(s, h, w) {
        var P, j = this, ee = (h === void 0 && (h = null), []), we = this.getTab(s.uid);
        if ((h = this.getCurTab()) && !we && this.tabMode === "single" && w && this._emitM(Yr, h.uid, this.uid), !h || !we && w)
          P = we = this._tabMng.addTab({ uid: s.uid, name: s.name, type: s.type, chs: [] });
        else {
          if (!we)
            return void this._emitM(Yr, s.uid, this.uid);
          h.uid !== we.uid && !w || (P = we);
        }
        s.chs.forEach(function(Xe) {
          we.uidPage(Xe) || ee.push(Xe);
        });
        var De = ee.map(function(Xe) {
          var ut = j._db.getMetadata(Xe);
          return new ll({ uid: Xe, naturalW: ut.width, naturalH: ut.height }, j._db, j.cropBoxStyle);
        }), Ce = [];
        return s.chs.forEach(function(Xe) {
          var ut = ee.indexOf(Xe);
          -1 < ut ? Ce.push(De[ut]) : (ut = we.uidPage(Xe)) && Ce.push(ut);
        }), we.chs = Ce, we.total = s.chs.length, this.showLatest ? (this.clearBox(), h = s.chs.indexOf(ee[ee.length - 1]), (w = we.idxPage(h)) && (we.cur = h, we.setSlt([w.uid]))) : 0 < we.total && we.cur === -1 && (we.cur = 0), P;
      }, y.showTab = function(s, h, w) {
        var P = this, j = (h === void 0 && (h = "add"), this.showTabTimer !== null && clearTimeout(this.showTabTimer), s.uid);
        this._tabMng.setCurTab(j), this._showAllThb(s), (!s.total || s.cur < 0) && this._gpc.clearCanvas(), this._gpc.initGraphic(s), this._gpc._layoutSingle(s, !0), h == "remove" && !s.total || (this.showTabTimer = setTimeout(function() {
          P.isDisposed || (P._checkDisplay(s), s.chs.length || P._gpc.offScreenCanvas.reset(), s.chs.forEach(function(ee) {
            P._showPage(ee.uid, j);
          }));
        }, 20), this.getSlidePages()), this.__slt([s.cur]), this.__buffer(s, h, "", w), this.__pager();
      }, y.onTabChanged = function() {
        this._tabMng.curTab, this._tabMng.tabs;
      }, y.updateSync = function(s, h, w) {
        var P = this, j = null;
        if (!(j = h ? this.getTab(h) : this.getCurTab()))
          return this._err(dr), !1;
        for (var ee = j.chs, we = new ll({ uid: s, naturalW: w.metadata.width || 0, naturalH: w.metadata.height || 0 }, this._db, this.cropBoxStyle), De = null, Ce = 0; Ce < ee.length; Ce++)
          if (ee[Ce].uid === s) {
            De = ee[Ce], ee[Ce] = we;
            break;
          }
        if (this._tabMng.curTab === j.uid) {
          if (j.getCurUid() === s && this._gpc.offScreenCanvas.reset(), !De)
            return !1;
          h = !0, De && De.naturalHeight === we.naturalHeight && De.naturalWidth === we.naturalWidth && (h = !1), this._gpc._layoutSingle(j, h), this._gpc.initGraphic(j), this._checkDisplay(j), ee.forEach(function(Xe) {
            P._showPage(Xe.uid, j.uid, !0);
          }), this.getSlidePages(), this.__buffer(j, "modify", s);
        }
      }, y.setTabMode = function(s) {
        ["single", "multiple"].indexOf(s) !== -1 && (this.tabMode = s);
      }, y.getSlidePages = function() {
        var s, h, w, P = this, j = this._tabMng.getCurTab();
        j && j.disMode !== "continuous" && (this.slideTimer !== null && clearTimeout(this.slideTimer), s = j.cur, j = j.total, h = [], w = [-1, -1, -1], j !== 0 && (0 <= s - 1 ? (h.push(s - 1), w[0] = s - 1) : w[0] = -1, h.push(s), (w[1] = s) + 1 < j ? (h.push(s + 1), w[2] = s + 1) : w[2] = -1), this._gpc && this._gpc.slide && (this._gpc.slide.targetIndexes = w), this.slideTimer = setTimeout(function() {
          P.isDisposed || h.forEach(function(ee) {
            ee = P.idxUid(ee), P._emitM(ha, ee);
          });
        }, 200));
      }, y._setSlidePages = function(s) {
        var h, w, P, j = this, ee = this.getCurTab();
        !this.isDisposed && ee && ee.disMode === "single" && (h = ee.cur, w = [-1, -1, -1], (P = ee.total) !== 0 && (0 <= h - 1 && (w[0] = h - 1), (w[1] = h) + 1 < P && (w[2] = h + 1)), w.indexOf(s) < 0 || (P = w.map(function(we) {
          return j._calcSlidePage(we, h, ee);
        }), this._gpc.setSlidePages(P)));
      }, y._calcSlidePage = function(s, h, w) {
        var P = { width: 0, height: 0, index: -1, uid: null, url: "" };
        if (s === -1)
          return P;
        var j = this.idxUid(s), ee = this._db.getMid(j);
        if (w = w.idxPage(s), !ee || !w)
          return P;
        P = w.style.width;
        var we = w.style.height;
        return s !== h && (h = this._gpc.calcZoomForSlide(w.naturalWidth || 1, w.naturalHeight || 1), P = (w.naturalWidth || 0) * h, we = (w.naturalHeight || 0) * h), { width: P, height: we, index: s, uid: j, url: ee.minData || "" };
      }, y._showAllThb = function(s, h) {
        var w = this, P = s.chs || [], j = (h = s.uidPage(h), []);
        (P = h ? [h] : P).forEach(function(ee) {
          var we;
          !ee || (we = w._db.getMid(ee.uid)) && (ee = { uid: ee.uid, data: we.minData, tags: we.getTags() }, j.push(ee));
        }), be.prototype._emit.call(this, "_thumbnailChangedUI", j);
      }, y.showThbItem = function(s) {
        var h, w, P = this.getCurTab();
        P && (h = P.uidPage(s), w = this._db.getMid(s), h && w && (h = { uid: s, data: w.minData, tags: w.getTags() }, be.prototype._emit.call(this, Da, h), w = P.uid2Idx(s), this._setSlidePages(w)));
      }, y.needRender = function(s) {
        return !!this._db && !(!(s = this._db.getMid(s)) || s.show.indexOf(this.uid) < 0);
      }, y.renderMainPage = function(s) {
        this.needRender(s) && this._db.getMid(s).img && this._gpc.render(s);
      }, y._showPage = function(s, h, w) {
        var P, j = this;
        h === this._tabMng.curTab && this.needRender(s) && (P = this._db.getMid(s), !w && P.img ? this != null && this._gpc.render(s) : !w && P.active || (P.active = !0, this._db.getDataAsync(s).then(function(ee) {
          var we;
          j.needRender(s) ? (ee = Ze.createURLWithType(ee.oriData), P.oriData = ee.data, P.oriType = ee.type, we = new Image(), j.cors && (we.crossOrigin = "anonymous"), we.onload = function() {
            if (we.onload = null, we.onerror = null, j.isDisposed || !j.needRender(s))
              P.active = !1;
            else {
              if (w) {
                if (!j._gpc)
                  return;
                j._gpc.offScreenCanvas.reset();
              }
              P.img = we, j._emitM("dvsRenderMainPage", P.show.slice(), s);
            }
          }, we.onerror = function() {
            we.onload = null, we.onerror = null;
          }, we.src = P.oriData) : P.active = !1;
        }).catch(function(ee) {
          P.active = !1;
        })));
      }, y._checkDisplay = function(s) {
        var h, w = this;
        s.disMode === "single" && (h = s.chs, s.getCurPage() && h.forEach(function(P, j) {
          var ee, we, De = w._db.getMid(P.uid);
          De && (P = w._gpc.checkDisplay(P.uid, s), we = (ee = De.show).indexOf(w.uid), P ? we < 0 && ee.push(w.uid) : (-1 < we && ee.splice(we, 1), ee.length === 0 && (a(De.oriData) && De.oriData != "" && Ze.revokeObjectURL(De.oriData), De.active = !1, De.load = !1, De.img = null, De.oriData = null)));
        }));
      }, y.getTabManager = function() {
        return this._tabMng;
      }, y.closeTab = function(s) {
        var h;
        return !!this._tabMng.closeTab(s) && (this._tabMng.curTab ? this.showTab(this._tabMng.getCurTab(), "add") : (h = new lf({ uid: "", name: "empty", type: "", chs: [] }), this.showTab(h, "remove")), be.prototype._emit.call(this, "_onCloseTab", s), !0);
      }, y.closeCurTab = function() {
      }, y.emptyTab = function(s) {
      }, y.getCurrentTabId = function() {
        return this._tabMng.curTab;
      }, y.getTab = function(s) {
        return this._tabMng.getTab(s);
      }, y.getCurTab = function() {
        return this._tabMng ? this._tabMng.getCurTab() : null;
      }, y.setCurTab = function(s) {
        return !!this._tabMng && this._tabMng.setCurTab(s);
      }, y.getCurPageUids = function() {
        var s = this.getCurTab();
        return s ? s.chs.map(function(h) {
          return h.uid;
        }) : [];
      }, y.getCurPageCount = function() {
        var s = this.getCurTab();
        return s ? s.total : 0;
      }, y.createThumbnailView = function(s) {
        return s = new jm(s = s === void 0 ? {} : s, this._mPub.getPublishSubscribe()), this.thbViews.push(s), s;
      }, y.removeThumbnailView = function(s) {
        if (!s)
          return this.thbViews = [], !0;
        for (var h = 0; h < this.thbViews.length; h++)
          if (this.thbViews[h].uid === s)
            return this.thbViews.splice(h, 1), !0;
        return !1;
      }, y.getThumbnailViewById = function(s) {
        if (!this._chStr(s))
          return null;
        for (var h = 0; h < this.thbViews.length; h++)
          if (this.thbViews[h].uid === s)
            return this._ok(), this.thbViews[h];
        return null;
      }, y.remove = function(s, h, w) {
        if (h === void 0 && (h = !0), !r(s))
          return this._err(rn), !1;
        var P = this._tabMng.tabs, j = (s.forEach(function(ee) {
          P.forEach(function(we) {
            we.remove(ee);
          });
        }), this.getCurTab());
        return j ? (h && this._emitM(Jo, this.uid, j, s), w && w !== j.uid || (this.showTab(j, "remove", s), j.chs.length === 0 && (this._gpc.slide.targetIndexes = [-1, -1, -1], this._setSlidePages(-1), this._gpc.clearCanvas(), be.prototype._emit.call(this, Mo, { width: 1, height: 1, x: 1, y: 1 }))), this._ok(), !0) : void 0;
      }, y.rmAll = function(s) {
        s === void 0 && (s = !0);
        var h = [], w = this.getCurTab();
        return w ? (w.chs.forEach(function(P) {
          h.push(P.uid);
        }), this.remove(h, s, w.uid)) : (this._ok(), !0);
      }, y.setBox = function(s, h) {
        var w = this.getCurTab();
        if (!w)
          return !1;
        var P = w.getCurPage();
        if (P === void 0)
          return !1;
        for (var j = null, ee = (r(s) ? j = s : t(s) && (j = [s]), h || 0 < P.boxCount() && (P.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, w.cur)), j.length), we = 0; we < ee; we++) {
          var De = j[we];
          if (!this._chBox(De, P.naturalWidth, P.naturalHeight))
            return !1;
          P.cropMng.addBox([De.left, De.top, De.left + De.width, De.top, De.left + De.width, De.top + De.height, De.left, De.top + De.height], "bottomRight");
        }
        return this.drawSltBox(), 0 < (s = P.cropMng.getRectArr()).length && be.prototype._emit.call(this, un, w.cur, s), this._ok(), !0;
      }, y._chBox = function(s, h, w) {
        return c(s.left) && c(s.top) && c(s.width) && c(s.height) ? !(s.left < 0 || s.top < 0 || s.width < 0 || s.height < 0) && !(s.left > h || s.top > w || s.left + s.width > h || s.top + s.height > w) || (this._err(ii), !1) : (this._err(gr), !1);
      }, y.clearBox = function(s) {
        var h = this.getCurTab();
        if (!h)
          return this._err(dr), !1;
        var w = h.getCurPage();
        return w ? (0 < w.boxCount() && be.prototype._emit.call(this, An, h.cur), w.cropMng.removeBox(s), this.drawSltBox(), this._ok(), !0) : (this._err(ur), !1);
      }, y._clearBox = function() {
        var s = this.getCurTab();
        if (!s)
          return !1;
        var h = s.getCurPage();
        return h ? (0 < h.boxCount() && be.prototype._emit.call(this, An, s.cur), h.cropMng.removeBox(), be.prototype._emit.call(this, "_clearSltBox", s.cur), !0) : (this._err(ur), !1);
      }, y.setFreeBox = function(s) {
        var h = this.getCurTab();
        if (!h)
          return !1;
        var w = h.getCurPage();
        return w !== void 0 && (w.cropMng.addFreeBox(s), this.drawSltBox(), 0 < (s = w.cropMng.getRectArr()).length && be.prototype._emit.call(this, un, h.cur, s), this._ok(), !0);
      }, y.nextPage = function(s) {
        s === void 0 && (s = !0);
        var h = this.getCurTab();
        if (!h)
          return this._err(dr), -1;
        var w = h.cur, P = h.slt.length, j = h.next();
        return j === -1 ? (this._err(dr), -1) : ((w !== h.total - 1 || 1 < P) && ((P = h.idxPage(w)) && 0 < P.boxCount() && (P.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, h.cur)), this.__pager(), this.render(!0), this.getSlidePages(), s && this._emitM(ri, this.uid, ft), this.__buffer(h, "shift")), this.__slt(), this._ok(), j);
      }, y.prevPage = function(s) {
        s === void 0 && (s = !0);
        var h = this.getCurTab();
        if (!h)
          return this._err(dr), -1;
        var w = h.cur, P = h.slt.length, j = h.prev();
        return j === -1 ? (this._err(dr), -1) : ((w !== 0 || 1 < P) && ((P = h.idxPage(w)) && 0 < P.boxCount() && (P.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, h.cur)), this.__pager(), this.render(!0), this.getSlidePages(), s && this._emitM(ri, this.uid, nt), this.__buffer(h, "shift")), this.__slt(), this._ok(), j);
      }, y.firstPage = function(s) {
        s === void 0 && (s = !0);
        var h = this.getCurTab();
        if (!h)
          return this._err(dr), -1;
        var w = h.cur, P = h.slt.length, j = h.first();
        return j === -1 ? (this._err(dr), -1) : ((w !== 0 || 1 < P) && ((P = h.idxPage(w)) && 0 < P.boxCount() && (P.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, h.cur)), this.__pager(), this.render(!0), this.getSlidePages(), s && this._emitM(ri, this.uid, "first"), this.__buffer(h, "shift")), this.__slt(), this._ok(), j);
      }, y.lastPage = function(s) {
        s === void 0 && (s = !0);
        var h = this.getCurTab();
        if (!h)
          return this._err(dr), -1;
        var w = h.cur, P = h.slt.length, j = h.last();
        return j === -1 ? (this._err(dr), -1) : ((w !== h.total - 1 || 1 < P) && ((P = h.idxPage(w)) && 0 < P.boxCount() && (P.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, h.cur)), this.__pager(), this.render(!0), this.getSlidePages(), s && this._emitM(ri, this.uid, "last"), this.__buffer(h, "shift")), this.__slt(), this._ok(), j);
      }, y.gotoPage = function(s, h) {
        if (h === void 0 && (h = !0), !this._checkIndex(s))
          return -1;
        var w = this.getCurTab();
        if (!w)
          return this._err(dr), -1;
        var P = w.cur, j = w.slt.length, ee = w.goto(s);
        return ee === -1 ? (this._err(dr), -1) : ((P !== s || 1 < j) && ((j = w.idxPage(P)) && 0 < j.boxCount() && (j.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, w.cur)), this.render(!0), this.getSlidePages(), h && this._emitM(ri, this.uid, "goto", s), this.__buffer(w, "shift")), this.__pager(), this.__slt(), this._ok(), ee);
      }, y.__slt = function(s) {
        s = s || this.getSltIndexes(), be.prototype._emit.call(this, "_imageSelectedUI", s), be.prototype._emit.call(this, "imageSelected", s);
      }, y.updateSltIndex = function() {
        this.__slt(), this.__pager(), this.render();
      }, y.__pager = function() {
        var s = this.getCurTab(), h = { cur: -1, total: 0 };
        s && (h = { cur: s.cur, total: s.total }), be.prototype._emit.call(this, "_pagerChangedUI", h);
      }, y.changeTag = function(s) {
        be.prototype._emit.call(this, Hi, s);
      }, y.changeDir = function(s) {
        be.prototype._emit.call(this, Hi, s);
      }, y.rmPageTag = function(s, h) {
        return !!(h = this._tabMng.getTab(h)) && (h.remove(s), h.uid === this._tabMng.curTab ? (this.showTab(h, "remove"), h.chs.length === 0 && this._gpc.clearCanvas(), !0) : void 0);
      }, y.addPageTag = function(s, h) {
        if (!(h = this._tabMng.getTab(h)))
          return !1;
        var w = this._db.getMetadata(s);
        if (!w)
          return !1;
        s = new ll({ uid: s, naturalW: w.width, naturalH: w.height }, this._db, this.cropBoxStyle), h.append(s), h.total = h.chs.length, this.showLatest && (h.cur = h.total - 1), h.uid === this._tabMng.curTab && this.showTab(h, "add");
      }, y.emptyTag = function(s) {
        if (!this._tabMng.getTab(s))
          return !1;
      }, y.renameTag = function(s, h, w) {
        if (!(w = this._tabMng.getTab(w)))
          return !1;
        w.name = h;
      }, y.renameFile = function(s, h, w) {
        if (!(w = this._tabMng.getTab(w)))
          return !1;
        w.name = h;
      }, y.switchPage = function(s, h, w, P) {
        w === void 0 && (w = !0);
        var j = null;
        return (j = P ? this.getTab(P) : this.getCurTab()) ? !(!this._checkIndex(s) || !this._checkIndex(h) || (j.switch(s, h), this._tabMng.curTab === j.uid && (this._showAllThb(j), this.__slt(), this.__pager(), this.getSlidePages(), this.__buffer(j, "shift")), w && this._emitM(pi, this.uid, j, "switch", s, h), this._ok(), 0)) : (this._err(dr), !1);
      }, y.movePage = function(s, h, w, P) {
        w === void 0 && (w = !0);
        var j = null;
        return (j = P ? this.getTab(P) : this.getCurTab()) ? !(!this._checkIndex(s) || !this._checkIndex(h) || (j.move(s, h), this._tabMng.curTab === j.uid && (this._showAllThb(j), this.__slt(), this.__pager(), this.getSlidePages(), this.__buffer(j, "shift")), w && this._emitM(pi, this.uid, j, "move", s, h), this._ok(), 0)) : (this._err(dr), !1);
      }, y.reorderPage = function(s, h, w, P) {
        w === void 0 && (w = !0);
        var j = null;
        if (!(j = P ? this.getTab(P) : this.getCurTab()))
          return this._err(dr), !1;
        var ee;
        P = j.getCurPage(), j.reorder(s), this._tabMng.curTab === j.uid && (this._showAllThb(j), this.setSltPages(h, !1), ee = j.getCurPage(), P && ee && P.uid !== ee.uid && 0 < P.boxCount() && (P.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, j.cur))), w && this._emitM(pi, this.uid, j, "reorder", s, h);
      }, y.uidIdx = function(s) {
        var h = this.getCurTab();
        if (!h)
          return this._err(dr), null;
        if (!this._chStr(s))
          return null;
        for (var w = h.chs.length, P = 0; P < w; P++)
          if (h.chs[P].uid === s)
            return this._ok(), P;
        return this._err(gr), null;
      }, y.idxUid = function(s) {
        if (!this._checkIndex(s))
          return null;
        var h = this.getCurTab();
        return h ? (this._ok(), h.chs[s].uid) : (this._err(dr), null);
      }, y.getRealTimeMetadataByIndex = function(s) {
        if (s !== void 0 && !this._checkIndex(s))
          return null;
        var h = this.getCurTab();
        if (!h)
          return this._err(dr), null;
        var w = h.getCurPage();
        return (w = s !== void 0 ? h.idxPage(s) : w) ? (s = this._db.getMetadata(w.uid)) ? (h = this._db.getMid(w.uid), (s = Object.assign({}, s)).width = h.tempWidth, s.height = h.tempHeight, this._ok(), s) : null : (this._err(dr), null);
      }, y.getMetadata = function(s) {
        return this._checkIndex(s) && (s = this.idxUid(s)) ? (this._ok(), (s = this._db.getMetadata(s)) ? Object.assign({}, s) : null) : null;
      }, y.setMetadata = function(s, h) {
        return !!this._checkIndex(s) && (t(h) ? !!(s = this.idxUid(s)) && (this._ok(), this._db.updateMetadata(s, h)) : (this._err(rn), !1));
      }, y.getCurIndex = function() {
        var s = this._tabMng.getCurTab();
        return s ? (this._ok(), s.cur) : (this._err(dr), -1);
      }, y.getNextPageIndex = function() {
        var s = this._tabMng.getCurTab();
        if (!s)
          return this._err(dr), -1;
        if (this._ok(), s.total === 0)
          return -1;
        var h = s.cur + 1;
        return h >= s.total ? -1 : h;
      }, y.getPrePageIndex = function() {
        var s = this._tabMng.getCurTab();
        return s ? (this._ok(), s.total === 0 || (s = s.cur - 1) < 0 ? -1 : s) : (this._err(dr), -1);
      }, y.setCurIndex = function(s, h) {
        if (h === void 0 && (h = !0), !this._checkIndex(s))
          return !1;
        var w = this._tabMng.getCurTab();
        if (!w)
          return this._err(dr), !1;
        var P = w.getCurUid(), j = this.idxUid(s);
        if (j !== P) {
          if ((P = w.getCurPage()) && 0 < P.boxCount() && (P.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, w.cur)), w.setSlt([j]), !w.setCur(s))
            return !1;
          this.__pager(), this.render(!0), this.getSlidePages(), h && this._emitM(ri, this.uid, "cur", s), this.__buffer(w, "shift");
        }
        return this.__slt(), this._ok(), !0;
      }, y.setSltPages = function(s, h) {
        var w = this;
        if (h === void 0 && (h = !0), !r(s))
          return this._err(rn), !1;
        var P = s.length;
        P === 0 && this._err(gr);
        for (var j = 0; j < P; j++) {
          var ee = s[j];
          if (!this._checkIndex(ee))
            return !1;
        }
        var we = this.getCurTab();
        if (!we)
          return this._err(dr), !1;
        var De = !1, Ce = we.getCurUid(), Xe = we.slt.slice(), ut = (Xe.length !== P && (De = !0), []), Rt = (s.forEach(function(tn, nn) {
          tn = w.idxUid(tn), ut.push(tn), Xe[nn] !== tn && (De = !0);
        }), !1);
        return Ce && Ce !== ut[P - 1] && (De = !0, (Ce = we.getCurPage()) && 0 < Ce.boxCount() && (Ce.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, we.cur)), Rt = !0), we.setSlt(ut), this.__slt(s), this.__pager(), this.render(Rt), this.getSlidePages(), h && this._emitM(ri, this.uid, "slt", s), !De && Xe.length === ut.length || this.__buffer(we, "shift"), this._ok(), !0;
      }, y.getCustomDataByIndex = function(s) {
        return this._checkIndex(s) ? (s = this.idxUid(s)) ? this.getCustomDataByUid(s) : (this._err(dr), null) : null;
      }, y.getCustomDataByUid = function(s) {
        return (s = this._db.getMid(s)) ? (this._ok(), s.customData) : (this._err(dr), null);
      }, y.getSltIndexes = function() {
        var s = this;
        if (!(h = this.getCurTab()))
          return this._err(dr), null;
        var h = h.getSlt(), w = [];
        return h.forEach(function(P) {
          P = s.uidIdx(P), w.push(P);
        }), this._ok(), w;
      }, y.selectAll = function() {
        var s = this.getCurTab();
        if (!s)
          return this._err(dr), !1;
        for (var h = [], w = s.chs.length, P = 0; P < w; P++)
          h.push(P);
        return this.setSltPages(h);
      }, y.zoomIn = function() {
        return this.tabMode === "single" && (this._tabMng.dfConfig.fitType = "none"), this._gpc.zoomIn();
      }, y.zoomOut = function() {
        return this.tabMode === "single" && (this._tabMng.dfConfig.fitType = "none"), this._gpc.zoomOut();
      }, y.zoomTo = function(s, h, w) {
        return !c(s) || h !== void 0 && !c(h) || w !== void 0 && !c(w) ? (this._err(rn), -1) : (this.tabMode === "single" && (this._tabMng.dfConfig.zoom = s, this._tabMng.dfConfig.fitType = "none"), this._ok(), this._gpc.zoomTo(s, !1, h, w));
      }, y.flip = function(s) {
        var h = this.getCurTab();
        if (!h)
          return this._err(dr), !1;
        if (!(h = h.getCurPage()))
          return this._err(dr), !1;
        this._clearBox();
        var w = this._db.getMid(h.uid);
        return w && (this._releaseMin(w), s = w.edt.flip(s), this._emitM(Bi, "flip", { uid: h.uid, flipObj: s, page: h, interlayerData: w })), this.getSlidePages(), !0;
      }, y.reset = function() {
        var s = this, h = this.getCurTab();
        return h && h.getCurPage() ? (this._clearBox(), h.chs.forEach(function(w) {
          s._resetByPage(w, !0);
        }), this.getSlidePages(), this._ok(), !0) : (this._err(dr), !1);
      }, y._resetByPage = function(s, h) {
        var w, P = this._db.getMid(s.uid);
        P && 0 < P.edt.all.length && (w = this._db.getMetadata(s.uid), h && this._releaseMin(P), w && s.setNaturalSize(w.width, w.height), P.edt.reset(), this._emitM(Bi, "reset", { uid: s.uid }));
      }, y.resetByIndex = function(s, h) {
        var w = this.getCurTab();
        w ? !c(s) || s < 0 || s >= w.chs.length ? this._err(rn) : (s = w.chs[s], this._resetByPage(s, h)) : this._err(dr);
      }, y.getRotateAngle = function(s) {
        var h = this.getCurTab();
        return h ? !c(s) || s < 0 || s >= h.chs.length ? (this._err(rn), 0) : (s = h.chs[s], (h = this._db.getMid(s.uid)) ? (this._releaseMin(h), h.edt.getCurAngle()) : 0) : (this._err(dr), 0);
      }, y.rotate = function(s, h) {
        var w = this, P = this.getCurTab();
        if (!P)
          return this._err(dr), !1;
        if (!c(s))
          return this._err(rn), !1;
        if (h !== void 0) {
          if (!c(h) && !r(h))
            return this._err(rn), !1;
          if (r(h)) {
            for (var j = h.length, ee = 0; ee < j; ee++)
              if (!this._checkIndex(h[ee]))
                return !1;
          }
        }
        var we, De, Ce = [], Xe = (P.getCurPage(), h === void 0 ? -1 < (De = P.cur) && (Ce = [De]) : Ce = c(h) ? [h] : h.slice(), this._clearBox(), this._gpc.rotateMode);
        return Ce.forEach(function(ut) {
          var Rt;
          we = P.chs[ut], (ut = w._db.getMid(we.uid)) && (w._releaseMin(ut), Rt = ut.edt.rotate(s, 0, 0, Xe), w._emitM(Bi, "rotate", { uid: we.uid, rotateObj: Rt, page: we, interlayerData: ut }));
        }), this.getSlidePages(), this._ok(), !0;
      }, y.crop = function(s, h, w, P) {
        var j = this.getCurTab();
        if (!j)
          return this._err(dr), !1;
        if (!(j = j.getCurPage()))
          return this._err(dr), !1;
        if (!(c(s) && c(h) && c(w) && c(P)))
          return this._err(rn), !1;
        var ee = j.naturalWidth, we = j.naturalHeight;
        return s < 0 || ee < s || h < 0 || we < h || w < 0 || P < 0 || ee < s + w || we < h + P ? (this._err(ii), !1) : (this._clearBox(), (ee = this._db.getMid(j.uid)) && (this._releaseMin(ee), we = ee.edt.crop(s, h, w, P), this._emitM(Bi, "crop", { uid: j.uid, cropObj: we, page: j })), this.getSlidePages(), this._ok(), !0);
      }, y.erase = function(s, h, w, P, j) {
        var ee = this.getCurTab();
        if (!ee)
          return this._err(dr), !1;
        if (!(ee = ee.getCurPage()))
          return this._err(dr), !1;
        if (!(c(s) && c(h) && c(w) && c(P)))
          return this._err(rn), !1;
        var we = ee.naturalWidth, De = ee.naturalHeight;
        return s < 0 || we < s || h < 0 || De < h || w < 0 || P < 0 || we < s + w || De < h + P ? (this._err(ii), !1) : (this._clearBox(), (we = this._db.getMid(ee.uid)) && (this._releaseMin(we), De = we.edt.erase(s, h, w, P, j), this._emitM(Bi, "erase", { uid: ee.uid, eraseObj: De, page: ee })), this.getSlidePages(), this._ok(), !0);
      }, y.overlay = function(s, h, w, P, j, ee, we) {
        if (!this._checkIndex(s))
          return !1;
        if (!(De = this.getCurTab()))
          return this._err(dr), !1;
        if (!(s = De.idxPage(s)))
          return this._err(dr), !1;
        if (!(c(h) && c(w) && c(P) && c(j)))
          return this._err(rn), !1;
        var De = s.naturalWidth, Ce = s.naturalHeight;
        return h < 0 || De < h || w < 0 || Ce < w || P < 0 || j < 0 || De < h + P || Ce < w + j ? (this._err(ii), !1) : ((De = this._db.getMid(s.uid)).overlays.push({ type: "overlay", left: h, top: w, width: P, height: j, color: ee, opacity: we }), De && (this._releaseMin(De), this._emitM(Bi, "overlay", { uid: s.uid })), this.getSlidePages(), this._clearBox(), this._ok(), !0);
      }, y.changePageSize = function(s, h) {
        if (s <= 0 || h <= 0)
          return this._err(gr), !1;
        var w = this.getCurTab();
        if (!w)
          return this._err(dr), !1;
        if (!(w = w.getCurPage()))
          return this._err(dr), !1;
        if (!c(s) || !c(h))
          return this._err(rn), !1;
        this._clearBox();
        var P = this._db.getMid(w.uid);
        return P && (this._releaseMin(P), s = P.edt.changePageSize(s, h), this._emitM(Bi, "changePageSize", { uid: w.uid, changeSizeObj: s, page: w })), this.getSlidePages(), this._ok(), !0;
      }, y._releaseMin = function(s) {
        a(s.minData) && s.minData != "" && Ze.revokeObjectURL(s.minData), s.minData = null, s.minType = null, s.activeMin = !1;
      }, y.setSaveType = function(s) {
        return ["image/png", "image/jpeg"].indexOf(s) < 0 ? (this._err(gr), !1) : (this.saveType = s, this._gpc.offScreenCanvas.saveType = s, this._ok(), !0);
      }, y.getSaveType = function() {
        return this.saveType;
      }, y.setSaveQuality = function(s) {
        return s < 0 || 1 < s ? (this._err(ii), !1) : (this.saveQuality = s, this._ok(), !0);
      }, y.getSaveQuality = function() {
        return this.saveQuality;
      }, y.setRotateMode = function(s) {
        return c(s) || this._err(rn), [0, 1, 2].indexOf(s) === -1 ? (this._err(gr), !1) : (this._gpc.rotateMode = s, this._ok(), !0);
      }, y.getRotateMode = function() {
        return this._gpc.rotateMode;
      }, y.setSaveBackgroundColor = function(s) {
        return this._ok(), this._gpc.setSaveBackgroundColor(s);
      }, y.getSaveBackgroundColor = function() {
        return this._gpc.saveBg;
      }, y.saveTransformation = function() {
        var s = this, h = this.getCurTab();
        if (!h)
          return Promise.reject(dr);
        for (var w = h.getCurUid(), P = h.chs, j = [], ee = function(De) {
          var Ce = P[De];
          (De = s._db.getMid(Ce.uid)) && 0 < De.edt.all.length && (De = new Promise(function(Xe, ut) {
            var Rt = !0, tn = (w === Ce.uid && (Rt = !1), s._db.getMid(Ce.uid));
            tn.img ? s._saveToBlob(Ce.uid, tn.img, Ce, Rt).then(function(nn) {
              Xe(nn);
            }) : tn.oriData ? s._getImage(Ce.uid, tn.oriData, Ce, Rt).then(function(nn) {
              Xe(nn);
            }) : s._db.getDataAsync(Ce.uid).then(function(nn) {
              nn = Ze.createURL(nn.oriData), s._getImage(Ce.uid, nn, Ce, Rt).then(function(xn) {
                Xe(xn);
              });
            }).catch(function(nn) {
            });
          }), j.push(De));
        }, we = 0; we < P.length; we++)
          ee(we);
        return Promise.all(j);
      }, y.__buffer = function(s, h, w, P) {
        P === void 0 && (P = []), h = { action: h, uids: ((h = s.data) == null || (h = h.chs) == null ? void 0 : h.slice()) || [], currentUid: s.getCurUid(), selectedUids: s.getSlt(), pageUid: w, removedPageUids: P }, be.prototype._emit.call(this, ci, s.getCurUid()), be.prototype._emit.call(this, "bufferChanged", h);
      }, y._getImage = function(s, h, w, P) {
        var j = this;
        return new Promise(function(ee, we) {
          var De = new Image();
          j.cors && (De.crossOrigin = "anonymous"), De.src = h, De.onload = function() {
            De.onload = null, De.onerror = null, j._saveToBlob(s, De, w, P).then(function(Ce) {
              ee(Ce);
            }), h.type === "object" && Ze.revokeObjectURL(h), De.src = "";
          };
        });
      }, y._saveToBlob = function(s, h, w, P) {
        var j = this, ee = this._gpc.offScreenCanvas, we = this._db.getMid(s), De = (ee.render({ viewerUid: "", pageUid: s, isMin: !1, img: h, page: w, midData: we }), this._db.getMetadata(s)), Ce = we.customData, Xe = we.tags, ut = (w = (De.width = w.naturalWidth, De.height = w.naturalHeight, we.setTempSize(w.naturalWidth, w.naturalHeight), ee.mainCanvas), ee.mainWidth), Rt = (ee = ee.mainHeight, this.saveCanvas);
        return h = Rt.getContext("2d", { willReadFrequently: !(h = null) }), Rt.width !== ut && (Rt.width = ut), Rt.height !== ee && (Rt.height = ee), h.drawImage(w, 0, 0), new Promise(function(tn, nn) {
          Rt.toBlob(function(xn) {
            we.edt.reset(), j._emitM(ka, s, { oriData: xn, minData: null, metadata: De, customData: Ce, tags: Xe }, !0), j._db && j._db.getDataAsync(s).then(function(or) {
              tn(xn);
            });
          }, j.saveType, j.saveQuality);
        });
      }, y.getMinPageData = function() {
        var s = this.getCurTab();
        return s && (s = s.getCurPage()) && this._db.getMid(s.uid) ? this._gpc.getMinPageData() : (this._err(dr), null);
      }, y.setCropBoxStyle = function(s) {
        Object.assign(this.cropBoxStyle, s), this._tabMng.tabs.forEach(function(h) {
          h.chs.forEach(function(w) {
            w.cropMng.setCropBoxStyle(s);
          });
        }), this.drawSltBox();
      }, y.setKeepZoom = function(s) {
        this._gpc.keepZoom = s;
      }, y.getFitType = function() {
        return this._gpc.fitType;
      }, y.setFitType = function(s) {
        if (!this._chStr(s))
          return !1;
        if (["window", "width", "height"].indexOf(s) === -1)
          return this._err(gr), !1;
        this._gpc.fitType = s;
        var h = this.getCurTab();
        return h && (h.fitType = s), this.tabMode === "single" && (this._tabMng.dfConfig.fitType = s), this.render(!0), this.getSlidePages(), this._ok(), !0;
      }, y.setZoom = function(s) {
        this.tabMode === "single" && (this._tabMng.dfConfig.zoom = s, this._tabMng.dfConfig.fitType = "none");
        var h = this.getCurTab();
        return h && (h.zoom = s), this._gpc.setZoom(s);
      }, y.getZoom = function() {
        return this._gpc.getZoom();
      }, y.setMinZoom = function(s) {
        return this._gpc.minZoom = s, !0;
      }, y.getMinZoom = function() {
        return this._gpc.minZoom;
      }, y.setMaxZoom = function(s) {
        return this._gpc.maxZoom = s, !0;
      }, y.getMaxZoom = function() {
        return this._gpc.maxZoom;
      }, y.setOperationMode = function(s) {
        var h, w = this.getCurTab();
        w && (w.opMode = s, (h = w.getCurPage()) && 0 < h.boxCount() && (h.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, w.cur))), this._gpc.opMode = s, this.tabMode === "single" && (this._tabMng.dfConfig.opMode = s);
      }, y.getOperationMode = function() {
        return this._gpc.opMode;
      }, y.setDisplayMode = function(s) {
        var h, w = this.getCurTab();
        w && (w.disMode = s, (h = w.getCurPage()) && 0 < h.boxCount() && (h.cropMng.clear(), this.drawSltBox(), be.prototype._emit.call(this, An, w.cur))), this._tabMng.dfConfig.disMode = s, this._gpc.disMode = s, this.render(!0), this.getSlidePages();
      }, y.setAspectRatio = function(s) {
        this._gpc.aspectRatio = s;
        var h = this.getCurTab();
        h && h.chs.forEach(function(w) {
          w.cropMng.setAspectRatio(s);
        });
      }, y.getAspectRatio = function() {
        return this._gpc.aspectRatio;
      }, y.setKeepAspectRatio = function(s) {
        this._gpc.keepAspectRatio = s;
        var h = this.getCurTab();
        h && h.chs.forEach(function(w) {
          w.cropMng.setKeepAspectRatio(s);
        });
      }, y.getKeepAspectRatio = function() {
        return this._gpc.keepAspectRatio;
      }, y.setPageMargin = function(s) {
        return this._gpc.iMargin = s, !0;
      }, y.getPageMargin = function() {
        return this._gpc.iMargin;
      }, y.setZoomDelta = function() {
      }, y.getZoomDelta = function() {
      }, y.setAllowSlide = function(s) {
        this._gpc.setAllowSlide(s);
      }, y.getAllowSlide = function() {
        return this._gpc.allowSlide;
      }, y._getOutEvent = function(s) {
        var h = null, w = -1, P = -1, j = -1, ee = s == null ? void 0 : s.clientX, we = s == null ? void 0 : s.clientY, De = this.getCurTab();
        return (h = De ? De.getCurPage() : h) && (w = this.uidIdx(h.uid)), this._gpc.checkMouseOverPage(s) && (De = this._gpc.getMouseCoordinate(s), h = this._gpc.toPageCoordinate(De.x, De.y), P = Math.floor(h.x), j = Math.floor(h.y)), { index: w, imageX: P, imageY: j, pageX: ee, pageY: we };
      }, y._initEvent = function() {
        var s = this;
        be.prototype._on.call(this, xi, function(h, w) {
          s._emitM(xi, h, w);
        }), be.prototype._on.call(this, Mr, this._onSetCanvasVisibility.bind(this)), be.prototype._on.call(this, "_bindSlideComponent", function(h) {
          var w;
          (w = s._gpc.slide) != null && w.bind(h);
        }), be.prototype._on.call(this, "_unbindSlideComponent", function() {
          var h;
          (h = s._gpc.slide) != null && h.unbind();
        }), be.prototype._on.call(this, "_bindCanvas", function(h) {
          s._gpc.cvsMng.bind(h);
        }), be.prototype._on.call(this, "_unbindCanvas", function(h) {
          s._gpc.cvsMng.unbind(h);
        }), be.prototype._on.call(this, "_setCanvasSize", function(h) {
          var w = h.width, P = h.height;
          h.isChange, s._gpc.updateDpr(), h = s._gpc.setCanvasOffsetSize(w, P), (w = s.getCurTab()) && w.total !== 0 || be.prototype._emit.call(s, Mo, { width: 0, height: 0, x: 0, y: 0 }), s._gpc.disMode !== "single" || h || (s.render(!1, !1), s.drawSltBox(), s.getSlidePages());
        }), be.prototype._on.call(this, "_displayedImageChanged", function(h) {
          h.forEach(function(w) {
            var P = s._db.getMid(w);
            P && (P.minData ? (P = { uid: w, data: P.minData, tags: P.getTags() }, be.prototype._emit.call(s, Da, P)) : s._emitM(ha, w));
          });
        }), be.prototype._on.call(this, "_canvasMousedown", function(h, w) {
          var P = s.getCurTab();
          P && P.getCurPage() && s._gpc.onCanvasMousedown(h), w = w || s._getOutEvent(h), be.prototype._emit.call(s, Pt, w, h);
        }), be.prototype._on.call(this, "_canvasMousemove", function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, Ot, w, h);
        }), be.prototype._on.call(this, "_canvasMouseup", function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, pn, w, h);
        }), be.prototype._on.call(this, "_canvasMouseOver", function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, "mouseover", w, h);
        }), be.prototype._on.call(this, "_canvasMouseOut", function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, "mouseout", w, h);
        }), be.prototype._on.call(this, "_canvasTouchstart", function(h, w) {
          var P = s.getCurTab();
          P && P.getCurPage() && s._gpc.onCanvasTouchstart(h), w = w || s._getOutEvent(h), be.prototype._emit.call(s, Pt, w, h);
        }), be.prototype._on.call(this, "_canvasTouchmove", function(h, w) {
          var P = s.getCurTab();
          P && P.getCurPage() && s._gpc.onCanvasTouchmove(h), w = w || s._getOutEvent(h), be.prototype._emit.call(s, Ot, w, h);
        }), be.prototype._on.call(this, "_canvasTouchend", function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, pn, w, h);
        }), be.prototype._on.call(this, "_canvasScroll", function(h, w) {
          var P = s.getCurTab();
          P && P.getCurPage() && s._gpc.onCanvasScroll(h);
        }), be.prototype._on.call(this, "_canvasWheel", function(h, w) {
          var P = s.getCurTab();
          P && P.getCurPage() && (s._gpc.onCanvasWheel(h), be.prototype._emit.call(s, "wheel", h));
        }), be.prototype._on.call(this, "_canvasClick", function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, "click", w, h);
        }), be.prototype._on.call(this, "_canvasDoubleClick", function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, "dblclick", w, h);
        }), be.prototype._on.call(this, Xr, function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, "rightclick", w, h);
        }), be.prototype._on.call(this, Xr, function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, "contextmenu", w, h);
        }), be.prototype._on.call(this, "_canvasKeyDown", function(h) {
          be.prototype._emit.call(s, "keydown", h);
        }), be.prototype._on.call(this, "_canvasKeyUp", function(h) {
          be.prototype._emit.call(s, "keyup", h);
        }), be.prototype._on.call(this, "_canvasResize", function(h, w) {
          be.prototype._emit.call(s, "resize", h, w);
        }), be.prototype._on.call(this, "_canvasDragStart", function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, "dragstart", w, h);
        }), be.prototype._on.call(this, "_canvasDragMove", function(h, w) {
          w = w || s._getOutEvent(h), be.prototype._emit.call(s, "dragmove", w, h);
        }), be.prototype._on.call(this, "_canvasDragDone", function(h) {
          be.prototype._emit.call(s, "dragdone", h);
        }), be.prototype._on.call(this, "_documentMove", function(h) {
          var w = s.getCurTab();
          w && w.getCurPage() && s._gpc.onDocumentMousemove(h);
        }), be.prototype._on.call(this, "_documentUp", function(h) {
          var w = s.getCurTab();
          w && w.getCurPage() && s._gpc.onDocumentMouseup(h);
        }), be.prototype._on.call(this, "_SetSelectedIndexes", function(h) {
          s.setSltPages(h, !1), s._emitM(ri, s.uid, "slt", h);
        }), be.prototype._on.call(this, "_onReOrderThumbnail", function(h, w) {
          s.getCurTab() && s.reorderPage(h, w, !0);
        }), be.prototype._on.call(this, "_canvasDefaultCursor", function(h) {
          s._gpc.defaultCursor = h = h === void 0 ? "default" : h;
        }), be.prototype._on.call(this, "_onRender", function() {
          s.render();
        }), be.prototype._on.call(this, "_onRenderBoxes", function() {
          s.drawSltBox();
        }), be.prototype._on.call(this, "_getSlidePages", function() {
          s.getSlidePages();
        });
      }, y._onSetCanvasVisibility = function(s) {
      }, y.setScrBarW = function(s) {
        this._gpc.scrBarW = s;
      }, y._onM = function(s, h) {
        this._mPub._on(s, h);
      }, y._emitM = function(s) {
        for (var h, w = arguments.length, P = new Array(1 < w ? w - 1 : 0), j = 1; j < w; j++)
          P[j - 1] = arguments[j];
        this._mPub && (h = this._mPub)._emit.apply(h, [s].concat(P));
      }, y._offM = function(s, h) {
        this._mPub._off(s, h);
      }, y._err = function(s) {
        this._emitM(tr, s);
      }, y._ok = function() {
        this._emitM(tr, cn);
      }, y._chStr = function(s) {
        return !!a(s) || (this._err(rn), !1);
      }, y._checkIndex = function(s) {
        return c(s) ? !(s < 0 || s >= this.getCurPageCount()) || (this._err(ii), !1) : (this._err(rn), !1);
      }, y.dispose = function() {
        var s;
        this.isDisposed || (be.prototype.dispose.call(this), (s = this._mPub) != null && s.dispose(), this._mPub = null, (this._db = null) != (s = this._tabMng) && s.dispose(), (this._tabMng = null) != (s = this._gpc) && s.dispose(), this._gpc = null, this.saveCanvas = null, this.isDisposed = !0);
      }, Pe;
    }(Ct), Ym = function(be) {
      function Pe(s) {
        var h = s.config, w = s.viewUi, P = s.workerBlobURL, j = s.scrollbarWidth, ee = s.groupUid, we = s.defaultConfig, De = s.mPub, Ce = s.focus, Xe = s.db, ut = s.offScreenCanvas;
        return s = s.saveCanvas, (De = be.call(this, De) || this).ViewUi = null, De.group = null, De._uiConfig = { canvasConfig: {} }, De._config = {}, De._dfConfig = null, De._focus = { viewerId: void 0, thumbnailId: void 0 }, De._multiSelectMode = !1, De.workerBlobURL = null, De.uid = V(6), De.postfix = "-" + De.uid, De._iPub = new Ct(), De._db = Xe, De.ViewUi = w, De.group = ee, De._dfConfig = we, De._focus = Ce, De.workerBlobURL = P, De.vm = new Km(h, De._iPub.getPublishSubscribe(), De._oPub, De.uid, P, j, Xe, ut, s), w = De.initConfig(h), De.bindView(De.container), De._bindEvents(), w.length ? (ee = w[0], we = "Failed to create the viewer because the parameter ".concat(ee, " is incorrect."), De._e({ code: 80024, message: we })) : De._e(cn), De;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y._bindEvents = function() {
        var s = this;
        this.on("_updateFocus", function(h) {
          var w = h.viewerId;
          h = h.thumbnailId, s._focus.viewerId = w, s._focus.thumbnailId = h;
        }), this.on("_documentKeyDownUI", function(h) {
          var w = (P = s._focus).thumbnailId, P = P.viewerId;
          s.uid === P && (P = s.ui) != null && P.documentKeyDown(h, w);
        }), this.on("_documentKeyUpUI", function(h) {
          var w = (P = s._focus).thumbnailId, P = P.viewerId;
          s.uid === P && (P = s.ui) != null && P.documentKeyUp(h, w);
        }), this.on("_gotoPage", function(h) {
          s.gotoPage(h);
        });
      }, y.initConfig = function(s) {
        var h, w = [], P = af({}, s, s.uiConfig.canvasConfig, s.uiConfig);
        for (h in P)
          h === "uiConfig" || t(P[h]) || this._checkInitProp(P, h) || w.push(h);
        return this._config = s, this._uiConfig = s.uiConfig, w;
      }, y._e = function(s) {
        be.prototype._emit.call(this, tr, s);
      }, y._checkInitProp = function(s, h) {
        var w = this[h], P = s[h];
        return this[h] = s[h], w === P || w !== this[h];
      }, y.closeTab = function(s) {
        if (!a(s))
          return this._e(rn), !1;
        this.vm.closeTab(s);
      }, y.closeCurrentTab = function() {
        return this.vm.closeCurTab();
      }, y.emptyTab = function(s) {
      }, y.getCurrentTabId = function() {
        return this.vm.getCurrentTabId();
      }, y.getTab = function(s) {
        return a(s) ? this.vm.getTab(s) : (this._e(rn), null);
      }, y.setCurrentTab = function(s) {
        return this.vm.setCurTab(s);
      }, y.getCurrentTab = function() {
        return this.vm.getCurTab();
      }, y.getCurrentPageUids = function() {
        return this.vm.getCurPageUids();
      }, y.getCurrentIndex = function() {
        return this.vm.getCurIndex();
      }, y.getNextPageIndex = function() {
        return this.vm.getNextPageIndex();
      }, y.getPrePageIndex = function() {
        return this.vm.getPrePageIndex();
      }, y.setCurrentIndex = function(s) {
        return this.vm.setCurIndex(s);
      }, y.setSelectedIndexes = function(s) {
        return this.vm.setSltPages(s);
      }, y.getSelectedIndexes = function() {
        return this.vm.getSltIndexes();
      }, y.selectAll = function() {
        return this.vm.selectAll();
      }, y.removeSync = function(s) {
        if (!r(s = c(s) ? [s] : s))
          return this._e(rn), !1;
        if (s.length === 0)
          return this._e(gr), !1;
        for (var h = [], w = 0; w < s.length; w++) {
          var P = this.getUidByIndex(s[w]);
          if (!P)
            return !1;
          h.push(P);
        }
        return this.vm.remove(h);
      }, y.removeAllSync = function() {
        return this.vm.rmAll();
      }, y.switchPage = function(s, h) {
        return this.vm.switchPage(s, h, !0);
      }, y.movePage = function(s, h) {
        return this.vm.movePage(s, h, !0);
      }, y.getViewerElement = function() {
        var s;
        return this._e(cn), ((s = this.ui) == null ? void 0 : s.getViewerElement()) || null;
      }, y.bindView = function(s, h, w) {
        var P = this;
        return h === void 0 && (h = {}), w === void 0 && (w = !0), this.ViewUi ? s && M(s = a(s) ? document.getElementById(s) : s) ? (this.unbindView(), w ? S(h, this._uiConfig) : this._uiConfig = h, this.ui = new this.ViewUi(s, this._uiConfig, this.postfix, this._iPub.getPublishSubscribe(), this._db, this.workerBlobURL), (w = this.ui) != null && w.createInnerThumbnail(), (h = this.ui) != null && h.setDisplayMode(this.displayMode), (s = this.ui) != null && s.setOperationMode(this.operationMode), this.vm.thbViews.forEach(function(j) {
          var ee;
          (ee = P.ui) != null && ee.createThumbnail(j.getConfig());
        }), (w = this.vm.getCurTab()) && (this.vm._showAllThb(w), this.vm.getSlidePages(), this.vm.updateSltIndex(), this.vm.onTabChanged(), this._e(cn)), !0) : (this._e(gr), !1) : (this._e(Lm), !1);
      }, y.unbindView = function() {
        var s;
        return (s = this.ui) != null && s.unbindView(), this.ui = null, this._e(cn), !0;
      }, y.dispose = function() {
        var s;
        be.prototype.dispose.call(this), (s = this._iPub) != null && s.dispose(), this._iPub = null, this._db = null, this.ViewUi = null, (this.ui = null) != (s = this.vm) && s.dispose(), this.vm = null;
      }, y.updateUISetting = function(s) {
        var h;
        return t(s) ? (S(s, s = ne(this._dfConfig.uiConfig)), (h = (h = this.ui) == null ? void 0 : h.containerBox) && this.bindView(h, s, !1), this._e(cn), !0) : (this._e(rn), !1);
      }, y.bindContent = function(s) {
        var h;
        return M(s = a(s) ? document.getElementById(s) : s) ? (h = this.ui) != null && h.bindContent(s) ? (this._e(cn), !0) : (this._e(Pr), !1) : (this._e(gr), !1);
      }, y.unbindContent = function() {
        var s;
        return (s = this.ui) != null && s.unbindContent() ? (this._e(cn), !0) : (this._e(Pr), !1);
      }, y.fullScreen = function() {
        var s;
        return (s = this.ui) != null && s.fullScreen() ? (this._e(cn), !0) : (this.ui ? this._e(Bo) : this._e(Pr), !1);
      }, y.cancelFullScreen = function() {
        var s;
        return this._e(cn), (s = this.ui) == null ? void 0 : s.cancelFullScreen();
      }, y.fullWebPage = function() {
        var s;
        return (s = this.ui) != null && s.fullPage() ? (this._e(cn), !0) : (this._e(Pr), !1);
      }, y.cancelFullWebPage = function() {
        var s;
        return (s = this.ui) != null && s.cancelFullPage() ? (this._e(cn), !0) : (this._e(Pr), !1);
      }, y.setButtonClass = function(s, h) {
        if (!a(s) || !a(h))
          return this._e(rn), !1;
        var w = this._uiConfig.buttons[s];
        return w ? (w.setClass = h, (w = this.ui) != null && w.setButtonClass(s) ? (this._e(cn), !0) : (this._e(Pr), !1)) : (this._e(Pr), !1);
      }, y.setViewMode = function(s, h) {
        return c(s) && c(h) ? 0 < s && 0 < h ? (this._uiConfig.canvasConfig.rows = h, this._uiConfig.canvasConfig.columns = s, this.ui ? (this._e(cn), this.vm.rows = h, this.vm.columns = s, (w = this.ui) == null ? void 0 : w.setViewMode(s, h)) : (this._e(Pr), !1)) : (this._e(ii), !1) : (this._e(rn), !1);
        var w;
      }, y.createCustomElement = function(s, h, w) {
        h === void 0 && (h = 0), w === void 0 && (w = !1);
        var P = s;
        return M(P = a(s) ? document.getElementById(s) : P) ? (this._e(cn), (s = this.ui) == null ? void 0 : s.createCustomElement(P, h, w)) : (this._e(rn), !1);
      }, y.updateVideoContainer = function(s) {
        return this.ui ? (a(s) || this._e(rn), this.ui.updateVideoContainer(s), this._e(cn), !0) : (this._e(Pr), !1);
      }, y.setLoadingImage = function(s) {
        var h;
        this.uiConfig.canvasConfig.loadingImageUrl = s, (h = this.ui) != null && h.setLoadingImage(s);
      }, y.nextPage = function() {
        return this.vm.nextPage();
      }, y.prevPage = function() {
        return this.vm.prevPage();
      }, y.firstPage = function() {
        return this.vm.firstPage();
      }, y.lastPage = function() {
        return this.vm.lastPage();
      }, y.gotoPage = function(s) {
        return this.vm.gotoPage(s);
      }, y.createThumbnailView = function(s) {
        if (s === void 0 && (s = {}), be.prototype._emit.call(this, Qn, "Invoking viewer#createThumbnailView."), !t(s))
          return this._e(rn), null;
        var h, w = [], P = this.vm.createThumbnailView(this._uiConfig.thumbnail);
        return (h = this.ui) != null && h.createThumbnail(P.getConfig()), P.init(s, w), w.length ? (h = "Failed to create the thumbnail viewer because the parameter ".concat(w[0], " is incorrect."), this._e({ code: 80024, message: h })) : this._e(cn), P;
      }, y.removeThumbnailView = function(s) {
        be.prototype._emit.call(this, Qn, "Invoking viewer#removeThumbnailView.");
        var h = s;
        return a(s) || (h = s.uid), this.vm.removeThumbnailView(h) ? ((s = this.ui) != null && s.removeThumbnail(h), this._e(cn), !0) : (this._e(gr), !1);
      }, y.getThumbnailViewById = function(s) {
        return this.vm.getThumbnailViewById(s);
      }, y.getThumbnailViewsList = function() {
        return this.vm.thbViews;
      }, y.getIndexByUid = function(s) {
        return this.vm.uidIdx(s);
      }, y.getUidByIndex = function(s) {
        return this.vm.idxUid(s);
      }, y.getRealTimeMetadataByIndex = function(s) {
        return this.vm.getRealTimeMetadataByIndex(s);
      }, y.getMetadataByIndex = function(s) {
        return this.vm.getMetadata(s);
      }, y.setMetadataByIndex = function(s, h) {
        return this.vm.setMetadata(s, h);
      }, y.getCustomDataByIndex = function(s) {
        return this.vm.getCustomDataByIndex(s);
      }, y.getCustomDataByUid = function(s) {
        return this.vm.getCustomDataByUid(s);
      }, y.zoomIn = function() {
        return this.vm.zoomIn();
      }, y.zoomOut = function() {
        return this.vm.zoomOut();
      }, y.zoomTo = function(s, h, w) {
        return this.vm.zoomTo(s, h, w);
      }, y.reset = function() {
        return this.vm.reset();
      }, y.resetByIndex = function(s, h) {
        return this.vm.resetByIndex(s, h);
      }, y.mirror = function() {
        return this.vm.flip(1);
      }, y.flip = function() {
        return this.vm.flip(0);
      }, y.rotate = function(s, h) {
        return this.vm.rotate(s, h);
      }, y.getRotateAngle = function(s) {
        return this.vm.getRotateAngle(s);
      }, y.crop = function(s, h, w, P) {
        return this.vm.crop(s, h, w, P);
      }, y.erase = function(s, h, w, P, j) {
        return this.vm.erase(s, h, w, P, j);
      }, y.overlayRectangle = function(s, h, w, P, j, ee, we) {
        return this.vm.overlay(s, h, w, P, j, ee, we);
      }, y.changePageSize = function(s, h) {
        return this.vm.changePageSize(s, h);
      }, y.saveTransformation = function() {
        return this.vm.saveTransformation();
      }, y.getMinPageData = function() {
        return this.displayMode === "single" ? this.vm.getMinPageData() : this.displayMode === "continuous" ? null : void 0;
      }, y.setFreeSelectedBox = function(s) {
        return this.vm.setFreeBox(s);
      }, y.setSelectedBoxes = function(s, h) {
        if (this.operationMode !== 1)
          return this._e(Rm), !1;
        if (s === void 0)
          return this._e(rn), !1;
        if (h !== void 0 && !d(h))
          return this._e(rn), !1;
        var w = this.getCurrentTab();
        if (!w)
          return this._e(dr), !1;
        if ((w = w.getCurPage()) === void 0)
          return this._e(dr), !1;
        var P = null;
        if (r(s)) {
          if ((P = s).length === 0)
            return this._e(gr), !1;
        } else {
          if (!t(s))
            return this._e(rn), !1;
          P = [s];
        }
        for (var j = P.length, ee = w.naturalWidth, we = w.naturalHeight, De = 0; De < j; De++) {
          var Ce = P[De];
          if (!(c(Ce.left) && c(Ce.top) && c(Ce.width) && c(Ce.height)))
            return this._e(rn), !1;
          Ce.left < 0 && (Ce.left = 0), Ce.top < 0 && (Ce.top = 0), Ce.width <= 0 && (Ce.width = 1), Ce.height <= 0 && (Ce.height = 1), Ce.width + Ce.left > ee && (Ce.width = ee - Ce.left), Ce.height + Ce.top > we && (Ce.height = we - Ce.top);
        }
        return this.displayMode === "single" ? this.vm.setBox(s, h) : (w = this.ui) != null && w.setSelectedBoxes(s, h), this._e(cn), !0;
      }, y.clearSelectedBoxes = function(s) {
        var h;
        return this.vm.clearBox(s), (h = this.ui) != null && h.clearSelectedBoxes(s), this._e(cn), !0;
      }, y.render = function() {
        return this.vm.render();
      }, y.on = function(s, h) {
        a(s) && i(h) ? (this._iPub._on(s, h), this._e(cn)) : this._e(rn);
      }, y.emit = function(s) {
        var h;
        if (a(s)) {
          for (var w = arguments.length, P = new Array(1 < w ? w - 1 : 0), j = 1; j < w; j++)
            P[j - 1] = arguments[j];
          (h = this._iPub)._emit.apply(h, [s].concat(P)), this._e(cn);
        } else
          this._e(rn);
      }, y.off = function(s, h) {
        !a(s) || h !== void 0 && !i(h) ? this._e(rn) : (this._iPub._off(s, h), this._e(cn));
      }, y.offById = function(s, h) {
        a(s) && a(h) ? (this._iPub._offById(s, h), this._e(cn)) : this._e(rn);
      }, uf(Pe, [{ key: "zoom", get: function() {
        return this.vm.getZoom();
      }, set: function(s) {
        c(s) ? s <= 0 ? this._e(ii) : (this.vm.setZoom(s), this._e(cn)) : this._e(rn);
      } }, { key: "minZoom", get: function() {
        return this._config.minZoom;
      }, set: function(s) {
        c(s) ? s <= 0 ? this._e(ii) : (this._config.minZoom = s, this.vm.setMinZoom(s), this._e(cn)) : this._e(rn);
      } }, { key: "maxZoom", get: function() {
        return this._config.maxZoom;
      }, set: function(s) {
        c(s) ? s <= 0 ? this._e(ii) : (this._config.maxZoom = s, this.vm.setMaxZoom(s), this._e(cn)) : this._e(rn);
      } }, { key: "showViewer", get: function() {
        return this._uiConfig.showViewer;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.showViewer = s, (h = this.ui) != null && h.setShowViewer(s), s && this.render(), this._e(cn)) : this._e(rn);
      } }, { key: "showHeader", get: function() {
        return this._uiConfig.toolbars.header;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.toolbars.header = s, (h = this.ui) != null && h.setShowHeader(s), this._e(cn)) : this._e(rn);
      } }, { key: "headerColor", get: function() {
        return this._uiConfig.headerColor;
      }, set: function(s) {
        var h;
        _(s) ? (this._uiConfig.headerColor = s, (h = this.ui) != null && h.setHeaderColor(s), this._e(cn)) : this._e(fi);
      } }, { key: "showTopMenu", get: function() {
        return this._uiConfig.toolbars.topMenu;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.toolbars.topMenu = s, (h = this.ui) != null && h.setShowTopMenu(s), this._e(cn)) : this._e(rn);
      } }, { key: "topMenuColor", get: function() {
        return this._uiConfig.topMenuColor;
      }, set: function(s) {
        var h;
        _(s) ? (this._uiConfig.topMenuColor = s, (h = this.ui) != null && h.setTopMenuColor(s), this._e(cn)) : this._e(fi);
      } }, { key: "topMenuBorder", get: function() {
        return this._uiConfig.topMenuBorder;
      }, set: function(s) {
        var h;
        v(s) ? (this._uiConfig.topMenuBorder = s, (h = this.ui) != null && h.setTopMenuBorder(s), this._e(cn)) : this._e(Pa);
      } }, { key: "showSidebar", get: function() {
        return this._uiConfig.showSidebar;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.showSidebar = s, (h = this.ui) != null && h.setShowSidebar(s), this._e(cn)) : this._e(rn);
      } }, { key: "showAside", get: function() {
        return this._uiConfig.toolbars.asideMenu;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.toolbars.asideMenu = s, (h = this.ui) != null && h.setShowAside(s), this._e(cn)) : this._e(rn);
      } }, { key: "showMain", get: function() {
        return this._uiConfig.showMain;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.showMain = s, (h = this.ui) != null && h.setShowMain(s), this.emit(Mr, s), this._e(cn)) : this._e(rn);
      } }, { key: "showFooter", get: function() {
        return this._uiConfig.toolbars.bottomMenu;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.toolbars.bottomMenu = s, (h = this.ui) != null && h.setShowFooter(s), this._e(cn)) : this._e(rn);
      } }, { key: "showTab", get: function() {
        return this._uiConfig.showTab;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.showTab = s, (h = this.ui) != null && h.setShowTab(s), this._e(cn)) : this._e(rn);
      } }, { key: "footerColor", get: function() {
        return this._uiConfig.footerColor;
      }, set: function(s) {
        var h;
        _(s) ? (this._uiConfig.footerColor = s, (h = this.ui) != null && h.setFooterColor(s), this._e(cn)) : this._e(fi);
      } }, { key: "showVideoContainer", get: function() {
        return this._uiConfig.showVideoContainer;
      }, set: function(s) {
        var h;
        d(s) || this._e(rn), this._uiConfig.showVideoContainer = s, (h = this.ui) != null && h.setShowVideoContainer(s), this._e(cn);
      } }, { key: "fitType", get: function() {
        return this.vm.getFitType();
      }, set: function(s) {
        this.vm.setFitType(s) && (this._config.fitType = s);
      } }, { key: "canvasMouseShape", get: function() {
        return this._uiConfig.canvasConfig.canvasMouseShape;
      }, set: function(s) {
        var h;
        a(s) ? (this._uiConfig.canvasConfig.canvasMouseShape = s, (h = this.ui) != null && h.setCanvasMouseShape(s), this._e(cn)) : this._e(rn);
      } }, { key: "canvasBackground", get: function() {
        return this._uiConfig.canvasConfig.canvasBackground;
      }, set: function(s) {
        var h;
        _(s) ? (this._uiConfig.canvasConfig.canvasBackground = s, (h = this.ui) != null && h.setInnerTbProp("canvasBackground", s), this._e(cn)) : this._e(fi);
      } }, { key: "cropBoxStyle", get: function() {
        return this.vm.cropBoxStyle;
      }, set: function(s) {
        t(s) ? (s.borderColor !== void 0 && (this._uiConfig.canvasConfig.selectedBoxLineColor = s.borderColor), this._uiConfig.canvasConfig.cropBoxStyle || (this._uiConfig.canvasConfig.cropBoxStyle = {}), Object.assign(this._uiConfig.canvasConfig.cropBoxStyle, s), this.vm.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle), (s = this.ui) != null && s.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle), this._e(cn)) : this._e(rn);
      } }, { key: "selectedBoxLineColor", get: function() {
        return this.vm.cropBoxStyle.borderColor;
      }, set: function(s) {
        _(s) ? (this._uiConfig.canvasConfig.selectedBoxLineColor = s, this._uiConfig.canvasConfig.cropBoxStyle || (this._uiConfig.canvasConfig.cropBoxStyle = {}), this._uiConfig.canvasConfig.cropBoxStyle.borderColor = s, this._uiConfig.canvasConfig.cropBoxStyle.ctrlBorderColor = s, this.vm.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle), (s = this.ui) != null && s.setCropBoxStyle(this._uiConfig.canvasConfig.cropBoxStyle), this._e(cn)) : this._e(fi);
      } }, { key: "saveBackgroundColor", get: function() {
        return this.vm.getSaveBackgroundColor();
      }, set: function(s) {
        this.vm.setSaveBackgroundColor(s);
      } }, { key: "saveQuality", get: function() {
        return this.vm.getSaveQuality();
      }, set: function(s) {
        this.vm.setSaveQuality(s);
      } }, { key: "saveType", get: function() {
        return this.vm.getSaveType();
      }, set: function(s) {
        this.vm.setSaveType(s);
      } }, { key: "rotateMode", get: function() {
        return this.vm.getRotateMode();
      }, set: function(s) {
        this.vm.setRotateMode(s);
      } }, { key: "canvasBorder", get: function() {
        return this._uiConfig.canvasConfig.canvasBorder;
      }, set: function(s) {
        var h;
        v(s) ? (this._uiConfig.canvasConfig.canvasBorder = s, (h = this.ui) != null && h.setCanvasBorder(s), this._e(cn)) : this._e(Pa);
      } }, { key: "pageBackground", get: function() {
        return this._uiConfig.canvasConfig.pageBackground;
      }, set: function(s) {
        var h;
        _(s) ? (this._uiConfig.canvasConfig.pageBackground = s, (h = this.ui) != null && h.setInnerTbProp("pageBackground", s), this._e(cn)) : this._e(fi);
      } }, { key: "pageBorder", get: function() {
        return this._uiConfig.canvasConfig.pageBorder;
      }, set: function(s) {
        var h;
        v(s) ? (this._uiConfig.canvasConfig.pageBorder = s, (h = this.ui) != null && h.setInnerTbProp("pageBorder", s), this._e(cn)) : this._e(Pa);
      } }, { key: "selectedPageBackground", get: function() {
        return this._uiConfig.canvasConfig.selectedPageBackground;
      }, set: function(s) {
        var h;
        _(s) ? (this._uiConfig.canvasConfig.selectedPageBackground = s, (h = this.ui) != null && h.setInnerTbProp("selectedPageBackground", s), this._e(cn)) : this._e(fi);
      } }, { key: "selectedPageBorder", get: function() {
        return this._uiConfig.canvasConfig.selectedPageBorder;
      }, set: function(s) {
        var h;
        v(s) ? (this._uiConfig.canvasConfig.selectedPageBorder = s, (h = this.ui) != null && h.setInnerTbProp("selectedPageBorder", s), this._e(cn)) : this._e(Pa);
      } }, { key: "hoverPageBorder", get: function() {
        return this._uiConfig.canvasConfig.hoverPageBorder;
      }, set: function(s) {
        var h;
        v(s) ? (this._uiConfig.canvasConfig.hoverPageBorder = s, (h = this.ui) != null && h.setInnerTbProp("hoverPageBorder", s), this._e(cn)) : this._e(Pa);
      } }, { key: "hoverPageBackground", get: function() {
        return this._uiConfig.canvasConfig.hoverPageBackground;
      }, set: function(s) {
        var h;
        _(s) ? (this._uiConfig.canvasConfig.hoverPageBackground = s, (h = this.ui) != null && h.setInnerTbProp("hoverPageBackground", s), this._e(cn)) : this._e(fi);
      } }, { key: "placeholderBackground", get: function() {
        return this._uiConfig.canvasConfig.placeholderBackground;
      }, set: function(s) {
        var h;
        _(s) ? (this._uiConfig.canvasConfig.placeholderBackground = s, (h = this.ui) != null && h.setInnerTbProp("placeholderBackground", s), this._e(cn)) : this._e(fi);
      } }, { key: "showPageNumber", get: function() {
        return this._uiConfig.canvasConfig.showPageNumber;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.canvasConfig.showPageNumber = s, this._uiConfig.canvasConfig.pageNumber || (this._uiConfig.canvasConfig.pageNumber = {}), this._uiConfig.canvasConfig.pageNumber.visibility = s ? "visible" : "hidden", (h = this.ui) != null && h.setInnerTbProp("showPageNumber", s), this._e(cn)) : this._e(rn);
      } }, { key: "pageNumber", get: function() {
        var s;
        return (s = this._uiConfig.canvasConfig) == null ? void 0 : s.pageNumber;
      }, set: function(s) {
        var h;
        t(s) ? (s.visibility !== void 0 && (this._uiConfig.canvasConfig.showPageNumber = s.visibility === "visible"), this._uiConfig.canvasConfig.pageNumber || (this._uiConfig.canvasConfig.pageNumber = {}), Object.assign(this._uiConfig.canvasConfig.pageNumber, s), (h = this.ui) != null && h.setInnerTbProp("pageNumber", s), this._e(cn)) : this._e(rn);
      } }, { key: "checkbox", get: function() {
        return this._uiConfig.canvasConfig.checkbox || {};
      }, set: function(s) {
        var h;
        t(s) ? (this._uiConfig.canvasConfig.checkbox || (this._uiConfig.canvasConfig.checkbox = {}), Object.assign(this._uiConfig.canvasConfig.checkbox, s), (h = this.ui) != null && h.setInnerTbProp("checkbox", s), this._e(cn)) : this._e(rn);
      } }, { key: "multiSelectMode", get: function() {
        return this._multiSelectMode;
      }, set: function(s) {
        var h;
        d(s) ? (this._multiSelectMode = s, (h = this.ui) != null && h.setInnerTbProp("multiSelectMode", s), this._e(cn)) : this._e(rn);
      } }, { key: "allowPageDragging", get: function() {
        return this._uiConfig.canvasConfig.allowPageDragging;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.canvasConfig.allowPageDragging = s, (h = this.ui) != null && h.setInnerTbProp("allowPageDragging", s), this._e(cn)) : this._e(rn);
      } }, { key: "allowKeyboardControl", get: function() {
        return this._uiConfig.canvasConfig.allowKeyboardControl;
      }, set: function(s) {
        var h;
        d(s) ? (this._uiConfig.canvasConfig.allowKeyboardControl = s, (h = this.ui) != null && h.setInnerTbProp("allowKeyboardControl", s), this._e(cn)) : this._e(rn);
      } }, { key: "pageMargin", get: function() {
        return this._uiConfig.canvasConfig.pageMargin;
      }, set: function(s) {
        var h;
        u(s) ? (this._uiConfig.canvasConfig.pageMargin = s, this.vm.setPageMargin(s), (h = this.ui) != null && h.setInnerTbProp("pageMargin", s), this._e(cn)) : this._e(Ws);
      } }, { key: "scrollDirection", get: function() {
        return this._uiConfig.canvasConfig.scrollDirection;
      }, set: function(s) {
        var h;
        a(s) ? (this._uiConfig.canvasConfig.scrollDirection = s, (h = this.ui) != null && h.setInnerTbProp("scrollDirection", s), this._e(cn)) : this._e(rn);
      } }, { key: "autoChangeIndex", get: function() {
        return this._uiConfig.canvasConfig.autoChangeIndex;
      }, set: function(s) {
        var h;
        d(s) ? (this.uiConfig.canvasConfig.autoChangeIndex = s, (h = this.ui) != null && h.setInnerTbProp("autoChangeIndex", s)) : this._e(rn);
      } }, { key: "outerBorder", get: function() {
        return this._uiConfig.outerBorder;
      }, set: function(s) {
        var h;
        v(s) ? (this._uiConfig.outerBorder = s, (h = this.ui) != null && h.setOuterBorder(s), this._e(cn)) : this._e(Pa);
      } }, { key: "sidebarWidth", get: function() {
        return this._uiConfig.sidebarWidth;
      }, set: function(s) {
        var h;
        u(s) ? (this._uiConfig.sidebarWidth = s, (h = this.ui) != null && h.setSidebarWidth(s), this._e(cn)) : this._e(Ws);
      } }, { key: "width", get: function() {
        var s;
        return ((s = this.ui) == null ? void 0 : s.getViewerWidth()) || this._uiConfig.width;
      }, set: function(s) {
        var h;
        u(s) ? (this._uiConfig.width = s, (h = this.ui) != null && h.setViewerWidth(s), this._e(cn)) : this._e(Ws);
      } }, { key: "height", get: function() {
        var s;
        return ((s = this.ui) == null ? void 0 : s.getViewerHeight()) || this._uiConfig.height;
      }, set: function(s) {
        var h;
        u(s) ? (this._uiConfig.height = s, (h = this.ui) != null && h.setViewerHeight(s), this._e(cn)) : this._e(Ws);
      } }, { key: "uiConfig", get: function() {
        return this._uiConfig;
      } }, { key: "operationMode", get: function() {
        return this._config.operationMode;
      }, set: function(s) {
        var h;
        c(s) ? [0, 1, 2].indexOf(s) === -1 ? this._e(gr) : (this._config.operationMode = s, this.vm.setOperationMode(s), (h = this.ui) != null && h.setOperationMode(s), this._e(cn)) : this._e(rn);
      } }, { key: "allowSlide", get: function() {
        return this.vm.getAllowSlide();
      }, set: function(s) {
        d(s) ? (this.vm.setAllowSlide(s), this._e(cn)) : this._e(rn);
      } }, { key: "tabMode", get: function() {
        return this._config.tabMode;
      }, set: function(s) {
        s === "single" || s === "multiple" ? (this._config.tabMode = s, this.vm.setTabMode(s), this._e(cn)) : this._e(gr);
      } }, { key: "selectionBoxAspectRatio", get: function() {
        return this.vm.getAspectRatio();
      }, set: function(s) {
        var h;
        c(s) ? (this.vm.setAspectRatio(s), (h = this.ui) != null && h.setAspectRatio(s), this._e(cn)) : this._e(rn);
      } }, { key: "keepAspectRatio", get: function() {
        return this.vm.getKeepAspectRatio();
      }, set: function(s) {
        d(s) ? this.vm.setKeepAspectRatio(s) : this._e(rn);
      } }, { key: "displayMode", get: function() {
        return this._config.displayMode;
      }, set: function(s) {
        var h;
        a(s) ? ["single", "continuous"].indexOf(String(s)) !== -1 ? (this._config.displayMode = s, (h = this.ui) != null && h.setDisplayMode(s), this.vm.setDisplayMode(s), this._e(cn)) : this._e(ii) : this._e(rn);
      } }, { key: "zooming", get: function() {
        return this._config.zooming;
      }, set: function(s) {
        this._config.zooming = s, this._e(cn);
      } }, { key: "scrollX", get: function() {
        return this._config.scrollX;
      }, set: function(s) {
        this._config.scrollX = s, this._e(cn);
      } }, { key: "scrollY", get: function() {
        return this._config.scrollY;
      }, set: function(s) {
        this._config.scrollY = s, this._e(cn);
      } }, { key: "keepZoom", get: function() {
        return this._config.keepZoom;
      }, set: function(s) {
        d(s) ? (this._config.keepZoom = s, this.vm.setKeepZoom(s), this._e(cn)) : this._e(rn);
      } }, { key: "ifAllowSlide", get: function() {
        return this._config.ifAllowSlide;
      }, set: function(s) {
        d(s) ? (this._config.ifAllowSlide = s, this._e(cn)) : this._e(rn);
      } }, { key: "zoomInDelta", get: function() {
        return this._config.zoomInDelta;
      }, set: function(s) {
        c(s) ? s <= 0 ? this._e(ii) : (this._config.zoomInDelta = s, this._e(cn)) : this._e(rn);
      } }, { key: "zoomOutDelta", get: function() {
        return this._config.zoomOutDelta;
      }, set: function(s) {
        c(s) ? s <= 0 ? this._e(ii) : (this._config.zoomOutDelta = s, this._e(cn)) : this._e(rn);
      } }, { key: "zoomDelta", get: function() {
        return this._config.zoomDelta;
      }, set: function(s) {
        c(s) ? s <= 0 ? this._e(ii) : (this._config.zoomDelta = s, this._e(cn)) : this._e(rn);
      } }, { key: "currentPageCount", get: function() {
        return this.vm.getCurPageCount();
      } }, { key: "showLatestPage", get: function() {
        return this._config.showLatestPage;
      }, set: function(s) {
        d(s) ? (this._config.showLatestPage = s, this.vm.showLatest = s, this._e(cn)) : this._e(rn);
      } }, { key: "container", get: function() {
        return this._config.container;
      }, set: function(s) {
        s === "" || M(s) || M(s) ? this._config.container = s : this._e(rn);
      } }, { key: "optimizeImage", get: function() {
        return this.vm.useHermite;
      }, set: function(s) {
        this.vm.setUseHermite(s);
      } }]), Pe;
    }(Ct), Jm = function(be) {
      function Pe(s) {
        var h = be.call(this, s) || this;
        return h.vws = [], h.name = s.name, h.type = s.type, h.chs = s.chs || [], h;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.getCounts = function() {
        return this.chs.length;
      }, y.addViewer = function(s) {
        return this.vws.indexOf(s) == -1 && (this.vws.push(s), !0);
      }, y.removeViewer = function(s) {
        return (s = this.vws.indexOf(s)) != -1 && (this.vws.splice(s, 1), !0);
      }, Pe;
    }(st), Xm = function() {
      function be(y) {
        this.tabs = [], this.mode = "single", this.tabs = [];
      }
      var Pe = be.prototype;
      return Pe.addTab = function(y, s) {
        var h = this.checkTab(y.uid), w = null;
        return h !== -1 ? w = this.tabs[h] : (w = new Jm(y), this.tabs.push(w)), s && w.addViewer(s), w;
      }, Pe.getTab = function(y) {
        return (y = this.checkTab(y)) === -1 ? null : this.tabs[y];
      }, Pe.removeTab = function(y) {
        -1 < (y = this.checkTab(y)) && this.tabs.splice(y, 1);
      }, Pe.checkTab = function(y) {
        for (var s = this.tabs.length, h = 0; h < s; h++)
          if (this.tabs[h].uid === y)
            return h;
        return -1;
      }, Pe.setMode = function(y) {
        return (y === "single" || y === "multiple") && (this.mode = y, !0);
      }, Pe.removePage = function(y, s) {
        return (y = this.checkTab(y)) != -1 && this.tabs[y].remove(s);
      }, Pe.dispose = function() {
      }, be;
    }(), df = function() {
      function be(y, s, h) {
        this.baseSize = 0, this.mainWidth = 0, this.mainHeight = 0, this.minorWidth = 0, this.minorHeight = 0, this._curOpType = null, this.saveColor = null, this.saveType = "image/jpg", this.scale = 1, this.isKeepCanvasSize = !1, this.isDisposed = !1, this.uid = y, this.baseSize = s = s || 3840, y = document.createElement("canvas");
        var w = document.createElement("canvas");
        y.id = "dvs_used_as_offscreenCanvas_main_".concat(this.uid), w.id = "dvs_used_as_offscreenCanvas_minor_".concat(this.uid), this.mainCanvas = y, this.minorCanvas = w, this.mainCtx = y.getContext("2d", { willReadFrequently: !0 }), this.minorCtx = w.getContext("2d", { willReadFrequently: !0 }), this.mainCtx.imageSmoothingEnabled = !1, this.minorCtx.imageSmoothingEnabled = !1, this._setCanvasSize(s, s), h !== void 0 ? this.isKeepCanvasSize = h : T() && (this.isKeepCanvasSize = !0);
      }
      var Pe = be.prototype;
      return Pe.dispose = function() {
        this.isDisposed || (this._setCanvasSize(1, 1), this._clearRect(this.mainCtx), this._clearRect(this.minorCtx), this.mainCanvas = null, this.minorCanvas = null, this.mainCtx = null, this.minorCtx = null, this.isDisposed = !0);
      }, Pe.reset = function() {
        this.scale = 1, this.pageUid = null, this._curOpType = null;
      }, Pe.render = function(y) {
        var s = this, h = y.viewerUid, w = y.pageUid, P = y.isMin, j = y.img, ee = y.page, we = y.midData;
        w !== this.pageUid && (this.ownerViewer = h, this.isMin = P, this.pageUid = w, y = 1, h = j.naturalWidth, P = j.naturalHeight, w = Math.max(h, P), this.isKeepCanvasSize ? this.mainCanvas.width < w && (y = this.baseSize / w, this.scale = y) : this.mainCanvas.width === h && this.mainCanvas.height === P || this._setCanvasSize(h, P), h *= y, P *= y, h = Math.floor(h), P = Math.floor(P), this._setMainSize(h, P), this._setMinorSize(h, P), this._clearRect(this.mainCtx), this._clearRect(this.minorCtx), this.mainCtx.drawImage(j, 0, 0, h, P), this.minorCtx.drawImage(j, 0, 0, h, P), w = we.edt.all.slice(), we.edt.reset(), w.forEach(function(De) {
          De.type === "rotate" ? (we.edt.rotate(De.angle, 0, 0, De.mode), s.rotate(De, ee, we)) : De.type === "flip" ? (we.edt.flip(De.direction), s.flip(De, ee, we)) : De.type === "crop" ? (we.edt.crop(De.left, De.top, De.width, De.height), s.crop(De, ee)) : De.type === "erase" ? (we.edt.erase(De.left, De.top, De.width, De.height, De.color), s.erase(De, ee)) : De.type === "changeSize" && (we.edt.changePageSize(De.width, De.height), s.changePageSize(De, ee));
        }));
      }, Pe.rotate = function(y, s, h) {
        var w = this.mainCanvas, P = this.minorCanvas, j = this.mainCtx, ee = this.minorCtx, we = null, De = this.mainWidth, Ce = this.mainHeight, Xe = 1, ut = 0, Rt = !1, tn = (y.mode === 0 && (De = (we = xe(0, 0, this.minorWidth, this.minorHeight, y.calcAngle)).width, Ce = we.height, ut = Math.pow(Math.pow(De, 2) + Math.pow(Ce, 2), 0.5), Rt = !this.isKeepCanvasSize && (this.mainCanvas.width !== De || this.mainCanvas.height !== Ce), this.isKeepCanvasSize && (tn = Math.max(De, Ce), this.mainCanvas.width < tn && (Xe = this.baseSize / tn)), De *= Xe, Ce *= Xe), this._curOpType !== null && this._curOpType !== y.mode && (we && Rt && this._setMinorCanvasSize(ut, ut), this._setMinorSize(this.mainWidth, this.mainHeight), this._clearRect(ee), ee.save(), ee.beginPath(), ee.rect(0, 0, this.minorWidth, this.minorHeight), ee.clip(), ee.closePath(), ee.drawImage(w, 0, 0), ee.restore()), this._curOpType = y.mode, we && (Rt && this._setMainCanvasSize(ut, ut), this._setMainSize(De, Ce)), this._clearRect(j), j.save(), j.beginPath(), j.rect(0, 0, this.mainWidth, this.mainHeight), j.clip(), j.closePath(), this._fillRect(j, this.mainWidth, this.mainHeight), j.translate(this.mainWidth / 2, this.mainHeight / 2), h.edt.setTransform(j), this.minorWidth * Xe / this.minorWidth);
        w = P.width * tn, ee = P.height * tn, j.drawImage(P, Math.floor(-this.minorWidth * Xe / 2), Math.floor(-this.minorHeight * Xe / 2), Math.floor(w), Math.floor(ee)), j.restore();
      }, Pe.flip = function(y, s, h) {
        var w = this.minorCanvas, P = this.mainCtx;
        this._clearRect(P), P.save(), P.beginPath(), P.rect(0, 0, this.mainWidth, this.mainHeight), P.clip(), P.closePath(), this._fillRect(P, this.mainWidth, this.mainHeight), P.translate(this.mainWidth / 2, this.mainHeight / 2), h.edt.setTransform(P), P.drawImage(w, Math.floor(-this.minorWidth / 2), Math.floor(-this.minorHeight / 2)), P.restore();
      }, Pe.crop = function(y, s) {
        var h = this.mainCanvas, w = this.minorCanvas, P = this.mainCtx, j = this.minorCtx, ee = this.scale, we = y.left, De = y.top, Ce = y.width;
        y = y.height, we *= ee, De *= ee, this._setMinorSize(Ce *= ee, y *= ee), this._clearRect(j), j.save(), j.beginPath(), j.rect(0, 0, Ce, y), j.clip(), j.closePath(), j.translate(-we, -De), j.drawImage(h, 0, 0), j.restore(), this._setMainSize(Ce, y), this._clearRect(P), P.save(), P.beginPath(), P.rect(0, 0, this.mainWidth, this.mainHeight), P.clip(), P.closePath(), P.drawImage(w, 0, 0), P.restore();
      }, Pe.erase = function(y, s) {
        var h = this.mainCanvas, w = this.mainCtx, P = this.minorCtx, j = this.scale, ee = y.left, we = y.top, De = y.width, Ce = y.height;
        ee *= j, we *= j, De *= j, Ce *= j, j = y.color || "#ffffff", this._clearRect(P), P.save(), P.beginPath(), P.rect(0, 0, this.minorWidth, this.minorHeight), P.clip(), P.closePath(), P.drawImage(h, 0, 0), P.fillStyle = j, P.fillRect(ee, we, De, Ce), P.restore(), w.save(), w.fillStyle = j, w.fillRect(ee, we, De, Ce), w.restore();
      }, Pe.changePageSize = function(y, s) {
        var h = this.mainCanvas, w = this.minorCanvas, P = this.mainCtx, j = this.minorCtx, ee = y.width, we = (y = y.height, this.scale), De = Math.pow(Math.pow(ee, 2) + Math.pow(y, 2), 0.5), Ce = (this.isKeepCanvasSize ? (Ce = Math.max(ee, y), this.mainCanvas.width < Ce && (we = this.baseSize / Ce, this.scale = we)) : this.mainCanvas.width < De && this._setMinorCanvasSize(De, De), this._setMinorSize(ee *= we, y *= we), this._clearRect(j), j.save(), j.beginPath(), j.rect(0, 0, this.minorWidth, this.minorHeight), j.clip(), j.closePath(), ee / this.mainWidth);
        we = y / this.mainHeight, Ce = h.width * Ce, we = h.height * we, j.drawImage(h, 0, 0, Math.floor(Ce), Math.floor(we)), j.restore(), this.isKeepCanvasSize || this.mainCanvas.width < De && this._setMainCanvasSize(De, De), this._setMainSize(ee, y), this._clearRect(P), P.save(), P.beginPath(), P.rect(0, 0, this.mainWidth, this.mainHeight), P.clip(), P.closePath(), P.drawImage(w, 0, 0), P.restore();
      }, Pe._clearRect = function(y) {
        y.clearRect(0, 0, y.canvas.width, y.canvas.height);
      }, Pe._fillRect = function(y, s, h) {
        return y.save(), y.fillStyle = this.saveColor, y.fillRect(0, 0, s, h), y.restore(), !0;
      }, Pe._setMainSize = function(y, s) {
        this.mainWidth = y, this.mainHeight = s;
      }, Pe._setMinorSize = function(y, s) {
        this.minorWidth = y, this.minorHeight = s;
      }, Pe._setCanvasSize = function(y, s) {
        this.mainCanvas.width = y, this.mainCanvas.height = s, this.minorCanvas.width = y, this.minorCanvas.height = s;
      }, Pe._setMainCanvasSize = function(y, s) {
        this.mainCanvas.width = y, this.mainCanvas.height = s;
      }, Pe._setMinorCanvasSize = function(y, s) {
        this.minorCanvas.width = y, this.minorCanvas.height = s;
      }, be;
    }(), Qm = function(be) {
      function Pe(s, h, w, P) {
        return (h = be.call(this, h) || this)._defaultConfig = { container: "", ifAllowSlide: !0, useWebWorker: !0, zoomInDelta: 1.2, zoomOutDelta: 1.2, zoomDelta: 0.05, fitType: "window", tabMode: "single", displayMode: "single", operationMode: "0", zooming: !0, scrollX: !0, scrollY: !0, minZoom: 0.01, maxZoom: 8, keepZoom: !0, showLatestPage: !0, pageMargin: 10, uiConfig: { toolbars: { header: !0, topMenu: !0, asideMenu: !1, bottomMenu: !0 }, groups: { topMenuRight: { visibility: !0, location: "topMenu", sequence: 1 } }, buttons: {}, buttonResize: { ifResize: !1, minSize: 24, maxSize: 26 }, tipsConfig: {}, thumbnail: { size: 180, mouseShape: "pointer", scrollDirection: "vertical", sequence: -1, location: "horizontal", showThumbnail: !0, showPageNumber: !1, showRemoveBtn: !1, fullThumbnail: !1, allowDragDrop: !0, allowResizing: !1, allowKeyboardControl: !1, rows: 4, columns: 1, background: "rgba(67,66,70,1)", border: "1px solid rgba(27,27,29,1)", pageBackground: "rgba(0,0,0,0)", pageBorder: "1px solid rgba(128,128,128,1)", selectedPageBackground: "rgba(127,133,251,1)", selectedPageBorder: "1px solid rgba(255,0,0,1)", hoverPageBackground: "rgba(196,250,248,1)", hoverPageBorder: "1px solid rgba(255,255,0,1)", placeholderBackground: "rgba(255,192,203,1)", pageMargin: 10, checkbox: { visibility: "hidden", width: 24, height: 24, background: "#fff", borderWidth: 2, borderRadius: 0, borderColor: "#000", opacity: 0.5, left: "", top: "", right: "", bottom: "", checkMarkLineWidth: 2, checkMarkColor: "#000" }, pageNumber: { visibility: "hidden", width: 24, height: 24, background: "#fff", borderWidth: 2, borderRadius: 0, borderColor: "#000", opacity: 0.5, color: "#000", fontSize: 12, fontFamily: "sans-serif", left: "", top: "", right: 0, bottom: 0 } }, canvasConfig: { canvasMouseShape: "default", canvasBackground: "#434246", canvasBorder: "1px solid #1b1b1d", pageBorder: "1px solid rgba(128,128,128,1)", pageMargin: "10", pageBackground: "rgba(0,0,0,0)", selectedPageBorder: "1px solid rgba(255,0,0,1)", selectedPageBackground: "rgba(127,133,251,1)", hoverPageBorder: "1px solid rgba(255,0,0,1)", hoverPageBackground: "rgb(196,250,248)", placeholderBackground: "pink", allowPageDragging: !0, allowKeyboardControl: !1, showPageNumber: !1, selectedBoxLineColor: "rgba(0,0,0,1)", autoChangeIndex: !1, scrollDirection: "vertical", checkbox: { visibility: "hidden", width: 24, height: 24, background: "#fff", borderWidth: 2, borderRadius: 0, borderColor: "#000", opacity: 0.5, left: 0, top: 0 }, pageNumber: { visibility: "hidden", width: 24, height: 24, background: "#fff", borderWidth: 1, borderRadius: 0, borderColor: "#000", opacity: 0.5, color: "#000", fontSize: 12, fontFamily: "sans-serif", textAlign: "center", textBaseline: "middle", left: "", top: "", right: 0, bottom: 0 }, cropBoxStyle: { borderWidth: 1, borderColor: "rgba(0,0,0,1)", invalidBorderColor: "#f00", dashLine: [4, 2], background: "", ctrlBorderWidth: 1, ctrlBorderRadius: 0, ctrlBorderColor: "rgba(0,0,0,1)", invalidCtrlBorderColor: "#f00", ctrlBackground: "", ctrlWidth: 8, ctrlHeight: 8, enableConcaveBorderColor: !1 } }, tree: { visibility: !0, iconClass: "ds-dvs-ui-tree", selectedColor: "#0000ff" }, tag: { visibility: !0, iconClass: "ds-dvs-ui-tags", selectedColor: "#0000ff", displayMode: "" }, headerColor: "#2a292b", topMenuColor: "#3a393b", topMenuBorder: "1px solid #1b1b1d", showSidebar: !1, showMain: !0, footerColor: "#434246", showViewer: !0, showVideoContainer: !1, outerBorder: "1px solid #1b1b1d", sidebarWidth: "180", width: "100%", height: "100%" } }, h._ViewUi = null, h._scrBarW = 0, h._q = [], h.loader = [!1, !1, !1, !1], h._cors = !0, h._outW = 4096, h._outH = 4096, h._minW = 800, h._minH = 800, h._group = {}, h._resizeCb = null, h._focus = { viewerId: void 0, thumbnailId: void 0 }, h.isCanvasInit = !1, h.width = 0, h.height = 0, h.tempWidth = 0, h.tempHeight = 0, h.offScreenCanvas = null, h.isDisposed = !1, h.autoCreateOffCanvas = !0, h.vws = [], h._db = w, h._tabMng = new Xm(), h._mPub = new Ct(), h.options = s, h.dvsUid = P, s.autoCreateOffScreenCanvas === !1 && (h.autoCreateOffCanvas = !1), h.autoCreateOffCanvas && (h.offScreenCanvas = new df(P, s.baseCanvasSize, s.isKeepCanvasSize)), (w = document.createElement("canvas")).id = "dvs_generate_min_cvs_".concat(P), h.canvas = w, (w = document.createElement("canvas")).id = "dvs_saveTransformation_cvs_".concat(P), h.saveCanvas = w, h._initTopEvent(), h._initViewerEvent(), A(s, h._defaultConfig), h.initWorkerUlr(), h._getScrBarW(), h.createViewer(), h;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y._initTopEvent = function() {
        var s = this;
        this.on(hi, function(h, w, P, j) {
          s._load(h, w, P, j);
        }), this.on(go, function(h, w, P) {
          s._open(h, w, P);
        }), this.on(Ri, function(h, w, P, j) {
          var ee = s._tabMng.getTab(j);
          ee && ee.vws.forEach(function(we) {
            (we = s.uidViewer(we)) && we.vm.renameTag(h, w, j);
          });
        }), this.on($a, function(h, w, P) {
          var j = s._tabMng.getTab(P);
          j && j.vws.forEach(function(ee) {
            (ee = s.uidViewer(ee)) && ee.vm.emptyTag(P);
          });
        }), this.on(Ii, function(h, w, P) {
          var j = s._tabMng.getTab(P);
          j && j.vws.forEach(function(ee) {
            (ee = s.uidViewer(ee)) && ee.vm.addPageTag(h, P);
          });
        }), this.on(to, function(h, w, P) {
          var j = s._tabMng.getTab(P);
          j && j.vws.forEach(function(ee) {
            (ee = s.uidViewer(ee)) && ee.vm.rmPageTag(h, P);
          });
        }), this.on(Sr, function(h, w, P, j) {
          var ee = s._tabMng.getTab(j);
          ee && ee.vws.forEach(function(we) {
            (we = s.uidViewer(we)) && we.vm.renameFile(h, w, j);
          });
        }), this.on(Ma, function(h) {
          s.emit(Jo, {}, h.chs.slice());
          var w = s._tabMng.getTab(h.uid);
          w && (w.vws.forEach(function(P) {
            (P = s.uidViewer(P)) && P.closeTab(h.uid);
          }), s._tabMng.removeTab(h.uid));
        }), this.on(Hi, function(h) {
          s.vws.forEach(function(w) {
            w.vm.changeTag(h);
          });
        }), this.on(wi, function(h) {
          s.vws.forEach(function(w) {
            w.vm.changeDir(h);
          });
        }), this.on(qr, function(h, w) {
          var P = s._db.getMid(h);
          P && (h === s.offScreenCanvas.pageUid && s.offScreenCanvas.reset(), s._tabMng.tabs.forEach(function(j) {
            j.chs.indexOf(h) !== -1 && j.vws.forEach(function(ee) {
              (ee = s.uidViewer(ee)) && (ee.vm.updateSync(h, j.uid, w), ee.vm.showThbItem(h));
            });
          }), P.minData || s._loadMinPic(h));
        });
      }, y._initViewerEvent = function() {
        var s = this;
        this.onM("dvsRenderMainPage", function(h, w) {
          h.forEach(function(P) {
            (P = s.uidViewer(P)) && P.vm.renderMainPage(w);
          });
        }), this.onM(xi, function(h, w) {
          s.emit(xi, h, w);
        }), this.onM(ka, function(h, w, P) {
          s.emit(ka, h, w, P);
        }), this.onM(tr, function(h) {
          s._err(h);
        }), this.onM(ha, function(h) {
          s._loadMinPic(h);
        }), this.onM(ri, function(h, w, P) {
          s._getGroup(h).forEach(function(j) {
            if (j.uid !== h)
              switch (w) {
                case "first":
                  j.vm.firstPage(!1);
                  break;
                case "last":
                  j.vm.lastPage(!1);
                  break;
                case "next":
                  j.vm.nextPage(!1);
                  break;
                case "prev":
                  j.vm.prevPage(!1);
                  break;
                case "goto":
                  j.vm.gotoPage(P, !1);
                  break;
                case "cur":
                  j.vm.setCurIndex(P, !1);
                  break;
                case "slt":
                  j.vm.setSltPages(P, !1);
              }
          });
        }), this.onM(pi, function(h, w, P, j, ee) {
          var we, De = s._tabMng.getTab(w.uid);
          De && (we = De.uid, De.vws.forEach(function(Ce) {
            if (h !== Ce) {
              var Xe = s.uidViewer(Ce);
              if (Xe)
                switch (P) {
                  case "switch":
                    Xe.vm.switchPage(j, ee, !1, we);
                    break;
                  case "move":
                    Xe.vm.movePage(j, ee, !1, we);
                    break;
                  case "reorder":
                    Xe.vm.reorderPage(j, ee, !1, we);
                }
            }
          }), De[P](j, ee), s.emit(pi, w, P, j, ee));
        }), this.onM(Jo, function(h, w, P) {
          s.emit(Jo, w, P), P.forEach(function(j) {
            s._tabMng.tabs.forEach(function(ee) {
              ee.remove(j);
            });
          }), s.vws.forEach(function(j) {
            j.uid !== h && j.vm.remove(P, !1, w.uid);
          });
        }), this.onM(Bi, function(h, w) {
          var P = w.uid, j = s._db.getMid(P);
          if (j) {
            if (s._loadMinPic(P), j.vws.length) {
              var ee = s.offScreenCanvas;
              if (ee.pageUid === P)
                switch (h) {
                  case "rotate":
                    ee.rotate(w.rotateObj, w.page, w.interlayerData);
                    break;
                  case "flip":
                    ee.flip(w.flipObj, w.page, w.interlayerData);
                    break;
                  case "crop":
                    ee.crop(w.cropObj, w.page);
                    break;
                  case "erase":
                    ee.erase(w.eraseObj, w.page);
                    break;
                  case "changePageSize":
                    ee.changePageSize(w.changeSizeObj, w.page);
                    break;
                  case "reset":
                    ee.reset();
                }
            }
            j.vws.forEach(function(we) {
              (we = s.uidViewer(we)) && we.vm.uidIdx(P) === we.vm.getCurIndex() && we.vm.render();
            });
          }
        }), this.onM(Yr, function(h, w) {
          (h = s._tabMng.getTab(h)) && h.removeViewer(w);
        });
      }, y._getGroup = function(s) {
        var h = this, w = [];
        return (s = this.uidViewer(s)) && this._group[s.group].forEach(function(P) {
          (P = h.uidViewer(P)) && w.push(P);
        }), w;
      }, y._loadMinPic = function(s) {
        for (var h = this._q, w = -1, P = 0; P < this.loader.length; P++)
          if (!this.loader[P]) {
            w = P;
            break;
          }
        w === -1 ? h.indexOf(s) === -1 && h.push(s) : (this.loader[w] = !0, this.runLoader(s, w));
      }, y._convertData = function(s) {
        return new Promise(function(h, w) {
          var P;
          t(s) ? h(s) : ((P = new XMLHttpRequest()).onload = function() {
            var j = Ze.createURL(P.response);
            h(j);
          }, P.open("GET", s, !0), P.responseType = "blob", P.send());
        });
      }, y.runLoader = function(s, h) {
        var w, P, j, ee, we, De = this, Ce = this._db.getMid(s);
        Ce && Ce.minData && Ce.vws.forEach(function(Xe) {
          var ut = -1;
          De.vws.some(function(Rt, tn) {
            if (Rt.uid === Xe)
              return ut = tn, !0;
          }), ut !== -1 && De.vws[ut].vm.showThbItem(s);
        }), !Ce || Ce.activeMin || Ce.minData ? (w = this._q.shift()) ? this.runLoader(w, h) : this.loader[h] = !1 : (P = !1, j = V(11), Ce.activeMin = !0, Ce.minTask = j, ee = new Promise(function(Xe, ut) {
          Ce.oriData ? (P = !0, Xe(Ce.oriData)) : De._db.getDataAsync(s).then(function(Rt) {
            a(Rt.oriData) && (P = !0), document.documentMode === 10 ? De._convertData(Rt.oriData).then(function(tn) {
              Xe(tn);
            }) : (Rt = Ze.createURL(Rt.oriData), Xe(Rt));
          }).catch(function(Rt) {
            ut(Rt);
          });
        }), we = new Promise(function(Xe, ut) {
          ee.then(function(Rt) {
            var tn = new Image();
            De._cors && (tn.crossOrigin = "anonymous"), tn.src = Rt, tn.onload = function() {
              var nn = De._db.getMid(s);
              if (!nn || nn.minTask !== j)
                return (nn == null ? void 0 : nn.oriData) !== Rt && Ze.revokeObjectURL(Rt), ut("task cancel or page does not exist");
              tn.onload = null, tn.onerror = null, Xe(tn);
            }, tn.onerror = function(nn) {
              return tn.onload = null, tn.onerror = null, ut(nn);
            };
          }).catch(function(Rt) {
            ut(Rt);
          });
        }), new Promise(function(Xe, ut) {
          we.then(function(Rt) {
            var tn = De._db.getMid(s);
            if (!tn || tn.minTask !== j)
              return (tn == null ? void 0 : tn.oriData) !== Rt.src && Ze.revokeObjectURL(Rt.src), ut("task cancel or page does not exist");
            De.offScreenCanvas || ut("OffScreenCanvas is disposed");
            var nn = De.offScreenCanvas;
            if (nn.isDisposed)
              return ut("The offScreenCanvas is disposed.");
            nn.render({ viewerUid: "", pageUid: s, isMin: !0, img: Rt, page: null, midData: tn });
            var xn = Rt.naturalWidth / Rt.naturalHeight, or = 1, qn = (xn = (1 <= xn && nn.mainWidth > De._minW ? or = De._minW / nn.mainWidth : xn < 1 && nn.mainHeight > De._minH && (or = De._minH / nn.mainHeight), nn.mainWidth * or), nn.mainHeight * or), Cr = De.canvas, si = Cr.getContext("2d", { willReadFrequently: !0 });
            Cr.width !== xn && (Cr.width = xn), Cr.height !== qn && (Cr.height = qn), qn = xn / nn.mainWidth, xn = nn.mainCanvas.width * qn, qn = nn.mainCanvas.height * qn, si.drawImage(nn.mainCanvas, 0, 0, Math.floor(xn), Math.floor(qn)), (tn.overlays || []).forEach(function(zr) {
              si.save(), si.globalAlpha = zr.opacity, si.fillStyle = zr.color, si.fillRect(zr.left * or, zr.top * or, zr.width * or, zr.height * or), si.restore();
            }), !P && Rt.src && (Ze.revokeObjectURL(Rt.src), Rt.src = ""), Cr.toBlob(function(zr) {
              var Br = De._db.getMid(s);
              Br && Br.minTask === j || ut("task cancel or page does not exist"), Xe(zr);
            }, "image/png");
          }).catch(function(Rt) {
            ut(Rt);
          });
        }).then(function(Xe) {
          Xe = Ze.createURLWithType(Xe);
          var ut = De._db.getMid(s);
          ut && ut.minTask === j && (ut.activeMin = !1, a(ut == null ? void 0 : ut.minData) && (ut == null ? void 0 : ut.minData) != "" && Ze.revokeObjectURL(ut.minData), ut.minData = Xe.data, ut.vws.forEach(function(Rt) {
            var tn = -1;
            De.vws.some(function(nn, xn) {
              if (nn.uid === Rt)
                return tn = xn, !0;
            }), tn !== -1 && De.vws[tn].vm.showThbItem(s);
          })), Xe = De._q.shift(), Xe ? De.runLoader(Xe, h) : De.loader[h] = !1;
        }).catch(function(Xe) {
          var ut;
          (ut = ((ut = De._db.getMid(s)) && ut.minTask === j && (ut.activeMin = !1), De._q.shift())) ? De.runLoader(ut, h) : De.loader[h] = !1;
        }));
      }, y._open = function(s, h, w) {
        var P = this, j = s.uid, ee = s.chs.slice(), we = this._tabMng.getTab(j);
        if ((we = we || this._tabMng.addTab({ uid: j, name: s.name, type: h, chs: [] }, w)).chs = ee, this.vws, j = null, w) {
          if ((j = this._getGroup(w).map(function(De) {
            return De.uid;
          })).length === 0)
            return void this._err(gr);
        } else
          j = we.vws;
        j.map(function(De) {
          return P.uidViewer(De);
        }).forEach(function(De) {
          var Ce;
          De && (we.addViewer(De.uid), we.chs.forEach(function(Xe) {
            (Xe = P._db.getMid(Xe)) && Xe.addViewer(De.uid);
          }), (Ce = (Ce = De.vm) == null ? void 0 : Ce.tabHandler(we, null, !0)) && De.vm.showTab(Ce, "filter"));
        });
      }, y._load = function(s, h, w, P) {
        var j = this, ee = s.uid, we = s.chs.slice(), De = (De = this._tabMng.getTab(ee)) || this._tabMng.addTab({ uid: ee, name: s.name, type: h, chs: [] });
        this.vws.forEach(function(Ce) {
          De.addViewer(Ce.uid);
        }), De.chs = we, De.vws.forEach(function(Ce) {
          var Xe, ut = j.uidViewer(Ce);
          ut && (De.chs.forEach(function(Rt) {
            (Rt = j._db.getMid(Rt)) && Rt.addViewer(ut.uid);
          }), Ce = null, De.type.toLowerCase() !== "all" && (Ce = w), (Ce = (Xe = ut.vm) == null ? void 0 : Xe.tabHandler(De, Ce, !1)) && ut.vm.showTab(Ce));
        });
      }, y.bindViewUi = function(s) {
        var h = this;
        if (!i(s))
          return this.emit(tr, rn), !1;
        this.autoCreateOffCanvas || (this.offScreenCanvas = new df(this.dvsUid, this.options.baseCanvasSize, this.options.isKeepCanvasSize)), this._ViewUi = s, this.vws.forEach(function(w) {
          w.ViewUi = s, h.autoCreateOffCanvas || w.vm._gpc.setOffScreenCanvas(h.offScreenCanvas);
        });
      }, y.createViewer = function(s, h) {
        var w = this, P = (s === void 0 && (s = {}), null), j = [], ee = null;
        if (h) {
          if (!(ee = this.uidViewer(h)))
            return this._err(gr), null;
          P = ee.group, j = this._group[P];
        } else
          P = V(11), this._group[P] = j;
        A(s, h = ne(this._defaultConfig)), s = { config: h, viewUi: this._ViewUi, workerBlobURL: this._hermiteWorkerUrl, scrollbarWidth: this._scrBarW, groupUid: P, defaultConfig: this._defaultConfig, mPub: this._mPub.getPublishSubscribe(), focus: this._focus, db: this._db, offScreenCanvas: this.offScreenCanvas, saveCanvas: this.saveCanvas };
        var we = (h = new Ym(s)).uid;
        return this.vws.push(h), j.push(we), ee && (P = ee.vm.getCurTab()) && (P.chs.forEach(function(De) {
          (De = w._db.getMid(De.uid)) && De.addViewer(we);
        }), (s = this._tabMng.getTab(P.uid)).vws.push(we), (j = h.vm.tabHandler(s, null, !0)) && (j.setCur(P.cur), j.setSlt(P.slt.slice()), h.vm.showTab(j, "filter"))), this.emit(Qn, "Invoking ViewControl#createViewer."), h;
      }, y.removeViewer = function(s) {
        var h = this;
        if (!s)
          return !1;
        var w = s, P = null, j = null;
        t(s) && (w = s.uid, P = s);
        for (var ee = 0; ee < this.vws.length; ee++)
          if (this.vws[ee].uid === w) {
            P = this.vws[ee], j = ee;
            break;
          }
        if (j === null)
          return !1;
        var we, De;
        s = this._group[P.group];
        for (De in s && (we = s.indexOf(w), s.splice(we, 1), s.length === 0 && delete this._group[P.group]), (we = this._tabMng) == null || (s = we.tabs) != null && s.forEach(function(Ce) {
          Ce.removeViewer(P.uid) && Ce.chs.forEach(function(Xe) {
            (Xe = h._db.getMid(Xe)) && Xe.rmViewer(P.uid);
          });
        }), P.unbindView(), P.dispose(), P)
          P[De] = null, delete P[De];
        return this.vws.splice(j, 1), this.emit(Qn, "Invoking ViewControl#removeViewer."), !0;
      }, y.uidViewer = function(s) {
        if (!s)
          return this.vws[0] || null;
        for (var h = 0, w = this.vws.length; h < w; h++) {
          var P = this.vws[h];
          if (P.uid === s)
            return P;
        }
        return null;
      }, y.idxViewer = function(s) {
        return s >= this.vws.length || s < 0 ? null : this.vws[s];
      }, y.dispose = function() {
        var s, h = this;
        this.isDisposed || (be.prototype.dispose.call(this), (s = this.vws) != null && s.forEach(function(w) {
          h.removeViewer(w);
        }), (this.vws = null) != (s = this.offScreenCanvas) && s.dispose(), this.offScreenCanvas = null, this.canvas.width = 1, this.canvas.height = 1, this.canvas.getContext("2d", { willReadFrequently: !0 }).clearRect(0, 0, 1, 1), this.canvas = null, this.saveCanvas.width = 1, this.saveCanvas.height = 1, this.saveCanvas.getContext("2d", { willReadFrequently: !0 }).clearRect(0, 0, 1, 1), (this.saveCanvas = null) != (s = this._mPub) && s.dispose(), (this._mPub = null) != (s = this._tabMng) && s.dispose(), this._tabMng = null, this._hermiteWorkerUrl && (Ze.revokeObjectURL(this._hermiteWorkerUrl), this._hermiteWorkerUrl = null), this.isDisposed = !0);
      }, y._getScrBarW = function() {
        var s = document.createElement("div"), h = document.createElement("div"), w = (s.appendChild(h), s.setAttribute("style", "width:180px;height:180px;position:absolute;overflow:auto;"), h.setAttribute("style", "width:200px;height:200px;"), document.body.appendChild(s), s.offsetWidth - s.clientWidth);
        document.body.removeChild(s), this._scrBarW = w, this.vws.forEach(function(P) {
          P.vm.setScrBarW(w);
        });
      }, y.initWorkerUlr = function() {
        this._hermiteWorkerUrl = Ze.createURL(new Blob(["(" + (function() {
          onmessage = function(s) {
            var h = s.data.core, w = s.data.sourceWidth, P = s.data.sourceHeight, j = s.data.width, ee = s.data.height, we = null;
            try {
              we = new Uint8ClampedArray(s.data.source);
            } catch {
              we = new Uint8Array(s.data.source);
            }
            var De = j * ee * 4, Ce = new ArrayBuffer(De), Xe = null;
            try {
              Xe = new Uint8ClampedArray(Ce, 0, De);
            } catch {
              Xe = new Uint8Array(Ce, 0, De);
            }
            for (var ut = 0; ut < ee; ut++)
              for (var Rt, tn = ut * P / ee, nn = 1 - (tn - (Rt = Math.floor(tn))), xn = Rt, or = (ut + 1) * P / ee, qn = or - (Rt = Math.floor(or - 1e-5)), Cr = Rt, si = ut * j * 4, zr = 0; zr < j; zr++) {
                var Br = 1 - ((Va = zr * w / j) - (fa = Math.floor(Va))), $r = fa, Si = (fa = (zr + 1) * w / j) - (uo = Math.floor(fa - 1e-5)), mo = uo, Ui = 0, Ji = 0, Ti = 0, Mi = 0, na = 255, Ao = (xn + 1) * w * 4 + 4 * $r, po = void 0, To = void 0;
                for (po = xn + 1; po < Cr; ++po)
                  Ui += we[Ao + 2] * Br * 255, Ji += we[Ao + 1] * Br * 255, Ti += we[Ao] * Br * 255, Mi += na * Br, Ao += 4 * w;
                var Ba = (xn + 1) * w * 4 + 4 * mo;
                for (po = xn + 1; po < Cr; ++po)
                  Ui += we[Ba + 2] * Si * 255, Ji += we[Ba + 1] * Si * 255, Ti += we[Ba] * Si * 255, Mi += na * Si, Ba += 4 * w;
                var Xo = xn * w * 4 + 4 * ($r + 1);
                for (To = $r + 1; To < mo; ++To)
                  Ui += we[Xo + 2] * nn * 255, Ji += we[Xo + 1] * nn * 255, Ti += we[Xo] * nn * 255, Mi += na * nn, Xo += 4;
                var Na = Cr * w * 4 + 4 * ($r + 1);
                for (To = $r + 1; To < mo; ++To)
                  Ui += we[Na + 2] * qn * 255, Ji += we[Na + 1] * qn * 255, Ti += we[Na] * qn * 255, Mi += na * qn, Na += 4;
                for (po = xn + 1; po < Cr; ++po) {
                  var ms = po * w * 4 + 4 * ($r + 1);
                  for (To = $r + 1; To < mo; ++To)
                    Ui += 255 * we[ms + 2], Ji += 255 * we[ms + 1], Ti += 255 * we[ms], Mi += 255, ms += 4;
                }
                Ui += we[2 + (uo = xn * w * 4 + 4 * $r)] * (nn * Br) * 255, Ji += we[1 + uo] * (nn * Br) * 255, Ti += we[uo] * (nn * Br) * 255, Mi += nn * Br * na, Ui += we[2 + (uo = xn * w * 4 + 4 * mo)] * (nn * Si) * 255, Ji += we[1 + uo] * (nn * Si) * 255, Ti += we[uo] * (nn * Si) * 255, Mi += nn * Si * na, Ui += we[2 + (uo = Cr * w * 4 + 4 * $r)] * (qn * Br) * 255, Ji += we[1 + uo] * (qn * Br) * 255, Ti += we[uo] * (qn * Br) * 255, Mi += qn * Br * na, Ui += we[2 + (uo = Cr * w * 4 + 4 * mo)] * (qn * Si) * 255, Ji += we[1 + uo] * (qn * Si) * 255, Ti += we[uo] * (qn * Si) * 255;
                var uo = (Mi += qn * Si * na) / ((fa - Va) * (or - tn)), fa = 0, Va = 0, Bs = 0;
                uo != 0 && (fa = Ui / Mi, Va = Ji / Mi, Bs = Ti / Mi), fa += 0.5, Va += 0.5, Bs += 0.5, Xe[si] = Math.floor(Bs), Xe[++si] = Math.floor(Va), Xe[++si] = Math.floor(fa), Xe[++si] = 255, si++;
              }
            Ce = { core: h, target: Xe, taskUid: s.data.taskUid };
            try {
              postMessage(Ce, [Xe.buffer]);
            } catch {
              postMessage(Ce, null);
            }
          };
        }).toString() + ")()"], { type: "application/javascript" }));
      }, y.on = function(s, h) {
        be.prototype._on.call(this, s, h);
      }, y.emit = function(s) {
        for (var h, w = arguments.length, P = new Array(1 < w ? w - 1 : 0), j = 1; j < w; j++)
          P[j - 1] = arguments[j];
        (h = be.prototype._emit).call.apply(h, [this, s].concat(P));
      }, y.onM = function(s, h) {
        this._mPub._on(s, h);
      }, y.emitM = function(s) {
        for (var h, w = arguments.length, P = new Array(1 < w ? w - 1 : 0), j = 1; j < w; j++)
          P[j - 1] = arguments[j];
        (h = this._mPub)._emit.apply(h, [s].concat(P));
      }, y._err = function(s) {
        this.emit(tr, s);
      }, y._ok = function() {
        this.emit(tr, cn);
      }, Pe;
    }(Ct), Zm = function(be) {
      function Pe(s, h, w, P) {
        var j = be.call(this, h) || this;
        return j._vwMng = null, j._vwMng = new Qm(s, h, w, P), j;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.createViewer = function(s, h) {
        return this._vwMng.createViewer(s = s === void 0 ? {} : s, h);
      }, y.getViewerByUid = function(s) {
        return this._vwMng.uidViewer(s);
      }, y.getViewerByIndex = function(s) {
        return this._vwMng.idxViewer(s);
      }, y.removeViewer = function(s) {
        return this._vwMng.removeViewer(s);
      }, y.getViewerList = function() {
        return this._vwMng.vws.slice();
      }, y.bindViewUiConstructor = function(s) {
        return this._vwMng.bindViewUi(s);
      }, y.dispose = function() {
        var s;
        be.prototype.dispose.call(this), (s = this._vwMng) != null && s.dispose(), this._vwMng = null;
      }, Pe;
    }(Ct), dl = function(be) {
      function Pe(s) {
        var h = be.call(this, s) || this;
        return h.name = s.name, h.type = s.type, h.parent = s.parent || null, h;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.removeChildren = function(s, h) {
        var w = this.chs.length;
        if (w) {
          for (var P = 0; P < w; P++) {
            var j = this.chs[P];
            if (j.name === s && j.type === h)
              return this.chs.splice(P, 1)[0];
          }
          return !1;
        }
        return !1;
      }, y.setName = function(s) {
        this.name = s;
      }, y.reorder = function(s) {
        return (this.type === "file" || this.type === "all") && be.prototype.reorder.call(this, s);
      }, Pe;
    }(st), qm = function(be) {
      function Pe(s) {
        return (s = be.call(this, s) || this).all = null, s.open = !0, s.dfNode = null, s.root = new dl({ uid: V(11), name: "root", type: "root", parent: null, chs: [] }), s.dfNode = s.root, s.all = new dl({ uid: V(11), name: "All", type: "file" }), s.curNode = s.root, s.selectedNodeId = null, s._initEvent(), s;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.dispose = function() {
        be.prototype.dispose.call(this);
      }, y._initEvent = function() {
        var s = this;
        be.prototype._on.call(this, xa, function(h, w, P) {
          var j = P, ee = s.findChild(s.dfNode, h);
          ee || (ee = s.createFile(h), be.prototype._emit.call(s, wi, s.dfNode)), w.forEach(function(we) {
            P !== void 0 ? ee.insert(we.uid, j++) : ee.append(we.uid), s.all.append(we.uid);
          }), be.prototype._emit.call(s, hi, ee, "file", P, s.open), be.prototype._emit.call(s, hi, s.all, "all", P, !1);
        }), be.prototype._on.call(this, pi, function(h, w, P, j) {
          var ee = null;
          if (h.type === "file") {
            if (!(ee = s._find(h.uid, s.root)))
              return;
          } else {
            if (h.type !== "all")
              return;
            ee = s.all;
          }
          ee[{ switch: "switch", move: "move", reorder: "reorder" }[w]](P, j);
        }), be.prototype._on.call(this, Jo, function(h, w) {
          w.forEach(function(P) {
            s.all.remove(P), s._rmPage(P, s.root);
          });
        });
      }, y._rmPage = function(s, h) {
        var w = this;
        if (!(h.chs.length < 1))
          return h.chs[0].uid ? void h.chs.forEach(function(P) {
            w._rmPage(s, P);
          }) : h.remove(s);
      }, y.createFile = function(s) {
        var h = (h = this.dfNode) || this.root, w = this.findChild(h, s);
        return w && w.type === "file" ? be.prototype._emit.call(this, tr, rf) : (w = new dl({ uid: V(11), name: s, type: "file", parent: h, chs: [] }), this.curNode.chs.push(w), be.prototype._emit.call(this, tr, cn)), w;
      }, y.openAll = function(s) {
        return be.prototype._emit.call(this, go, this.all, "all", s), this.all.chs.slice();
      }, y.openFile = function(s, h) {
        return (s = this.findChild(this.dfNode, s)) && s.type === "file" ? (be.prototype._emit.call(this, go, s, "file", h), be.prototype._emit.call(this, tr, cn), s.chs.slice()) : (be.prototype._emit.call(this, tr, es), !1);
      }, y.removeFile = function(s) {
        for (var h = this.dfNode.chs, w = h.length - 1; 0 <= w; w--)
          if (h[w].name === s)
            return be.prototype._emit.call(this, Ma, h[w]), h.splice(w, 1), be.prototype._emit.call(this, tr, cn), !0;
        return be.prototype._emit.call(this, tr, es), !1;
      }, y.renameFile = function(s, h) {
        var w = this.findChild(this.dfNode, s), P = this.findChild(this.dfNode, h);
        return w ? P ? (this._err(rf), !1) : (w.name = h, P = w.chs.slice(), be.prototype._emit.call(this, Sr, s, h, P, w.uid), this._ok(), !0) : (this._err(es), !1);
      }, y.getCurrentFileList = function() {
        return this.dfNode.chs.slice();
      }, y._getSpiltIndex = function(s) {
        for (var h = s.length, w = 0; w < h; w++)
          if (s[w].type !== "folder")
            return w;
        return h;
      }, y.findChild = function(s, h) {
        return 0 <= s.chs.length && (s = s.chs.filter(function(w) {
          return w.name === h;
        })).length ? s[0] : null;
      }, y._find = function(s, h) {
        for (var w = h.chs, P = w.length, j = 0; j < P; j++) {
          if (w[j].uid === s)
            return w[j];
          if (w[j].children) {
            var ee = this._find(s, w[j]);
            if (ee)
              return ee;
          }
        }
      }, y._err = function(s) {
        be.prototype._emit.call(this, tr, s);
      }, y._ok = function() {
        be.prototype._emit.call(this, tr, cn);
      }, Pe;
    }(Ct), $m = function() {
      function be(y) {
        this.autoOpen = !0, this._tree = new qm(y.pubsub);
      }
      var Pe = be.prototype;
      return Pe.dispose = function() {
        var y;
        (y = this._tree) != null && y.dispose(), this._tree = null;
      }, Pe.setDefaultFolder = function(y) {
        this._tree.dfNode = y;
      }, Pe.openAll = function() {
        return this._tree.openAll();
      }, Pe.getAllContents = function() {
        return this._tree.all.chs.slice();
      }, Pe.openFile = function(y, s) {
        return this._tree.openFile(y, s);
      }, Pe.createFile = function(y) {
        return this._tree.createFile(y);
      }, Pe.removeFile = function(y) {
        return this._tree.removeFile(y);
      }, Pe.getCurrentFileList = function() {
        return this._tree.getCurrentFileList();
      }, Pe.renameFile = function(y, s) {
        return this._tree.renameFile(y, s);
      }, be;
    }(), hf = function(be) {
      function Pe(y) {
        var s = be.call(this, y) || this;
        return s.name = y.name, s.chs = y.chs || [], s.uid = y.uid || V(11), s;
      }
      return e(Pe, be), Pe;
    }(st), ep = function(be) {
      function Pe(s) {
        return (s = be.call(this, s) || this).tags = [], s.dfName = null, s.dfUid = null, s.sltUid = null, s.emptyItem = new hf({ name: "defaultTag", chs: [] }), s._initEvent(), s;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.dispose = function() {
        be.prototype.dispose.call(this), this.tags = [];
      }, y._initEvent = function() {
        var s = this;
        be.prototype._on.call(this, Po, function(h) {
          var w = !1, P = h.data;
          P.tags || (P.tags = []), s.dfName && P.tags.indexOf(s.dfName) === -1 && P.tags.push(s.dfName), P.tags.forEach(function(j) {
            s.addTag(j) && (w = !0), (j = s.getTag(j)).append(h.uid), be.prototype._emit.call(s, hi, j, "tag", null, null, !1);
          }), w && be.prototype._emit.call(s, Hi, s.getTagList());
        }), be.prototype._on.call(this, pi, function(h, w, P, j) {
          h.type === "tag" && (h = s.uidTag(h.uid)) && h[{ switch: "switch", move: "move", reorder: "reorder" }[w]](P, j);
        }), be.prototype._on.call(this, Jo, function(h, w) {
          s.getTagList().forEach(function(P) {
            w.forEach(function(j) {
              P.remove(j);
            });
          });
        });
      }, y.openTag = function(s, h) {
        var w = this.getTag(s);
        return w || (this._err(ai), w = this.emptyItem), this.setDefaultTag(s), this.sltUid = w.uid, be.prototype._emit.call(this, go, w, "tag", h), this._ok(), w.chs.slice();
      }, y.getCurTag = function() {
        return this.uidTag(this.sltUid);
      }, y.addTag = function(s, h) {
        return this.checkTag(s) === -1 && (s = new hf({ name: s, chs: h || [] }), this.tags.push(s), !0);
      }, y.removeTag = function(s) {
        var h = this.checkTag(s);
        return h !== -1 && (s === this.dfName && (this.dfName = null, this.sltUid = null), this.tags.splice(h, 1), !0);
      }, y.emptyTag = function(s) {
        return !!(s = this.getTag(s)) && (s.clear(), !0);
      }, y.clear = function() {
        return this.tags = [], !0;
      }, y.getTagContents = function(s) {
        return (s = this.getTag(s)) ? s.chs.slice() : null;
      }, y.getDefaultTag = function() {
        return this.dfName;
      }, y.setDefaultTag = function(s) {
        if (!s)
          return this.dfName = null, !(this.dfUid = null);
        var h = this.checkTag(s);
        return h !== -1 && (h = this.tags[h], this.dfName = s, this.dfUid = h.uid, !0);
      }, y.renameTag = function(s, h) {
        if (!a(s) || !a(h))
          return this._err(rn), !1;
        var w = this.getTag(h), P = this.getTag(s);
        return P ? w ? (this._err(Tr), !1) : (P.name = h, w = P.chs.slice(), be.prototype._emit.call(this, Ri, s, h, w, P.uid), this._ok(), !0) : (this._err(ai), !1);
      }, y.checkTag = function(s) {
        for (var h = this.tags.length, w = 0; w < h; w++)
          if (this.tags[w].name === s)
            return w;
        return -1;
      }, y.getTagList = function() {
        return this.tags;
      }, y.getTag = function(s) {
        return (s = this.checkTag(s)) === -1 ? null : this.tags[s];
      }, y.uidTag = function(s) {
        for (var h = this.tags.length, w = 0; w < h; w++)
          if (this.tags[w].uid === s)
            return this.tags[w];
        return null;
      }, y._err = function(s) {
        be.prototype._emit.call(this, tr, s);
      }, y._ok = function() {
        be.prototype._emit.call(this, tr, cn);
      }, Pe;
    }(Ct), tp = function() {
      function be(y) {
        this._mng = new ep(y.pubsub);
      }
      var Pe = be.prototype;
      return Pe.dispose = function() {
        var y;
        (y = this._mng) != null && y.dispose(), this._mng = null;
      }, Pe.getTagList = function() {
        var y = [];
        return this._mng.tags.forEach(function(s) {
          s = { name: s.name, uids: s.chs.slice() }, y.push(s);
        }), y;
      }, Pe.addTag = function(y) {
        return a(y) ? !!this._mng.addTag(y) || (this._err(Tr), !1) : (this._err(rn), !1);
      }, Pe.removeTag = function(y) {
        var s = this, h = this._mng.getTag(y);
        return h ? (h.chs.slice().forEach(function(w) {
          s.removePageTag(w, y);
        }), this._ok(), this._mng.removeTag(y)) : (this._err(ai), !1);
      }, Pe.emptyTag = function(y) {
        if (!a(y))
          return this._err(rn), !1;
        var s = this._mng.uidTag(y);
        if (!y)
          return this._err(ai), !1;
        var h = s.chs.slice();
        return this._emit($a, y, h, s.uid), this._ok(), this._mng.emptyTag(y);
      }, Pe.openTag = function(y, s) {
        return this._mng.openTag(y, s);
      }, Pe.getCurrentTag = function() {
        return this._mng.getCurTag();
      }, Pe.getTagContents = function(y) {
        return this._mng.getTagContents(y);
      }, Pe.getDefaultTag = function() {
        return this._mng.getDefaultTag();
      }, Pe.setDefaultTag = function(y) {
        return this._mng.setDefaultTag(y);
      }, Pe.addPageTag = function(y, s) {
        a(y) && a(s) || this._err(rn);
        var h = this._mng.getTag(s);
        return h ? h.append(y) ? (this._emit(Ii, y, s, h.uid), this._emit(Hi, this._mng.tags), this._ok(), !0) : (this._err(Tr), !1) : (this._err(ai), !1);
      }, Pe.removePageTag = function(y, s) {
        var h = this;
        if (a(y) || this._err(rn), s === void 0)
          this._mng.getTagList().forEach(function(P) {
            P.remove(y), h._emit(to, y, P.name, P.uid);
          });
        else {
          a(s) || this._err(rn);
          var w = this._mng.getTag(s);
          if (!w)
            return this._err(ai), !1;
          if (!w.remove(y))
            return this._err(ur), !1;
          this._emit(to, y, s, w.uid);
        }
        return s = this._mng.getTagList(), this._emit(Hi, s), !0;
      }, Pe.renameTag = function(y, s) {
        return this._mng.renameTag(y, s);
      }, Pe._emit = function(y) {
        for (var s, h = arguments.length, w = new Array(1 < h ? h - 1 : 0), P = 1; P < h; P++)
          w[P - 1] = arguments[P];
        (s = this._mng)._emit.apply(s, [y].concat(w));
      }, Pe._err = function(y) {
        this._emit(tr, y);
      }, Pe._ok = function() {
        this._emit(tr, cn);
      }, be;
    }(), ff = function() {
      function be() {
        this._d = {};
      }
      var Pe = be.prototype;
      return Pe.addDataSync = function(y, s) {
        return !this._check(y) && (this._d[y] = s, !0);
      }, Pe.getDataSync = function(y) {
        return this._d[y];
      }, Pe.removeDataSync = function(y) {
        return !!this._check(y) && (delete this._d[y], !0);
      }, Pe.updateDataSync = function(y, s) {
        return !!this._check(y) && (this._d[y] = s, !0);
      }, Pe._check = function(y) {
        return this._d[y] !== void 0;
      }, be;
    }(), np = function() {
      function be(y, s) {
        this._d = {}, this.createDatabase(y, s);
      }
      var Pe = be.prototype;
      return Pe.createDatabase = function(y, s) {
        this._d[y] = {}, this._d[y][s] = {};
      }, Pe.addDataAsync = function(y, s, h, w) {
        var P = this;
        return new Promise(function(j, ee) {
          return P._checkDB(h) ? P._checkTable(h, w) ? P._checkId(h, w, y) ? ee("The ".concat(y, " already exists.")) : (P._d[h][w][y] = s, void j("Save ".concat(y, " to database successful."))) : ee(P._erMsg(1, w)) : ee(P._erMsg(0, h));
        });
      }, Pe.getDataAsync = function(y, s, h) {
        var w = this;
        return new Promise(function(P, j) {
          return w._checkDB(s) ? w._checkTable(s, h) ? w._checkId(s, h, y) ? void P(w._d[s][h][y]) : j(w._erMsg(2, y)) : j(w._erMsg(1, h)) : j(w._erMsg(0, s));
        });
      }, Pe.removeDataAsync = function(y, s, h) {
        var w = this;
        return new Promise(function(P, j) {
          return w._checkDB(s) ? w._checkTable(s, h) ? (delete w._d[s][h][y], void P("Remove ".concat(y, " successful."))) : j(w._erMsg(1, h)) : j(w._erMsg(0, s));
        });
      }, Pe.updateDataAsync = function(y, s, h, w) {
        var P = this;
        return new Promise(function(j, ee) {
          return P._checkDB(h) ? P._checkTable(h, w) ? P._checkId(h, w, y) ? (P._d[h][w][y] = s, void j("Update ".concat(y, " successful."))) : ee(P._erMsg(2, y)) : ee(P._erMsg(1, w)) : ee(P._erMsg(0, h));
        });
      }, Pe._checkDB = function(y) {
        return this._d[y] !== void 0;
      }, Pe._checkTable = function(y, s) {
        return this._d[y][s] !== void 0;
      }, Pe._checkId = function(y, s, h) {
        return this._d[y][s][h] !== void 0;
      }, Pe._erMsg = function(y, s) {
        return "The ".concat(["database", "table", "item"][y], " ").concat(s, " does not exist.");
      }, be;
    }(), rp = function() {
      function be() {
        this.databaseName = "dvsDb", this.documentTableName = "dvsDoc", this.imageTableName = "dvsImage", this.annotationTableName = "dvsAnno", this.middle = new ff(), this.metadataMng = new ff(), this.DBMng = new np(this.databaseName, this.documentTableName);
      }
      var Pe = be.prototype;
      return Pe.addDataAsync = function(y, s, h, w) {
        return this.DBMng.addDataAsync(y, s, h || this.databaseName, w || this.documentTableName);
      }, Pe.getDataAsync = function(y, s, h) {
        return this.DBMng.getDataAsync(y, s || this.databaseName, h || this.documentTableName);
      }, Pe.removeDataAsync = function(y, s, h) {
        return this.DBMng.removeDataAsync(y, s || this.databaseName, h || this.documentTableName);
      }, Pe.updateDataAsync = function(y, s, h, w) {
        return this.DBMng.updateDataAsync(y, s, h || this.databaseName, w || this.documentTableName);
      }, Pe.addMid = function(y, s) {
        return this.middle.addDataSync(y, s);
      }, Pe.getMid = function(y) {
        return this.middle.getDataSync(y);
      }, Pe.removeMid = function(y) {
        return this.middle.removeDataSync(y);
      }, Pe.updateMid = function(y, s) {
        return this.middle.updateDataSync(y, s);
      }, Pe.addMetadata = function(y, s) {
        return this.metadataMng.addDataSync(y, s);
      }, Pe.getMetadata = function(y) {
        return this.metadataMng.getDataSync(y);
      }, Pe.removeMetadata = function(y) {
        return this.metadataMng.removeDataSync(y);
      }, Pe.updateMetadata = function(y, s) {
        return this.metadataMng.updateDataSync(y, s);
      }, be;
    }(), ip = function(be) {
      function Pe(y) {
        return (y = be.call(this, y) || this).errorMessage = "ok", y.errorCode = 0, y._on(tr, y.updateErrorMessage.bind(cl(y))), y;
      }
      return e(Pe, be), Pe.prototype.updateErrorMessage = function(y) {
        y.code !== 80003 && (this.errorMessage = y.message, this.errorCode = y.code);
      }, Pe;
    }(Ct), op = function(be) {
      function Pe(s) {
        return (s = be.call(this, s) || this).logs = [], s.allowLog = !0, s.logs.push(s._formatLog("Initialize DVS object.")), s.logs.push(s._formatLog("Initialize DVS object.")), s._on(Qn, s.updateLogMessage.bind(cl(s))), s.logs.push(s._formatLog("Complete Log object initialization.")), s;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.updateLogMessage = function(s) {
        var h;
        this.allowLog && this != null && (h = this.logs) != null && h.push(this == null ? void 0 : this._formatLog(s));
      }, y._formatLog = function(s) {
        return function(h) {
          var w, P = /* @__PURE__ */ new Date(), j = { "M+": P.getMonth() + 1, "d+": P.getDate(), "h+": P.getHours(), "m+": P.getMinutes(), "s+": P.getSeconds(), "q+": Math.floor((P.getMonth() + 3) / 3), S: P.getMilliseconds() };
          for (w in /(y+)/.test(h) && (h = h.replace(RegExp.$1, (P.getFullYear() + "").substr(4 - RegExp.$1.length))), j)
            new RegExp("(" + w + ")").test(h) && (h = h.replace(RegExp.$1, RegExp.$1.length == 1 ? j[w] : ("00" + j[w]).substr(("" + j[w]).length)));
          return h;
        }("yyyy-MM-dd hh:mm:ss") + " DVS: " + s;
      }, y.clear = function() {
        this.logs = [];
      }, y.dispose = function() {
        be.prototype.dispose.call(this), this.logs = null;
      }, Pe;
    }(Ct);
    en = function(be) {
      function Pe(s) {
        var h, w, P, j, ee, we = be.call(this, new it()) || this;
        return we.DataControl = null, we.ViewControl = null, we.File = null, we.Tag = null, we.Annotation = null, we.Error = null, we.Log = null, we.uid = V(11), Array.from || (Array.from = (h = Object.prototype.toString, w = function(De) {
          return typeof De == "function" || h.call(De) === "[object Function]";
        }, P = function(De) {
          return De = Number(De), isNaN(De) ? 0 : De !== 0 && isFinite(De) ? (0 < De ? 1 : -1) * Math.floor(Math.abs(De)) : De;
        }, j = Math.pow(2, 53) - 1, ee = function(De) {
          return De = P(De), Math.min(Math.max(De, 0), j);
        }, function(De) {
          var Ce = Object(De);
          if (De == null)
            throw new TypeError("Array.from requires an array-like object - not null or undefined");
          var Xe, ut = 1 < arguments.length ? arguments[1] : void 0;
          if (ut !== void 0) {
            if (!w(ut))
              throw new TypeError("Array.from: when provided, the second argument must be a function");
            2 < arguments.length && (Xe = arguments[2]);
          }
          for (var Rt, tn = ee(Ce.length), nn = w(this) ? Object(new this(tn)) : new Array(tn), xn = 0; xn < tn; )
            Rt = Ce[xn], nn[xn] = ut ? Xe === void 0 ? ut(Rt, xn) : ut.call(Xe, Rt, xn) : Rt, xn += 1;
          return nn.length = tn, nn;
        })), typeof Object.assign != "function" && Object.defineProperty(Object, "assign", { value: function(De, Ce) {
          if (De == null)
            throw new TypeError("Cannot convert undefined or null to object");
          for (var Xe = Object(De), ut = 1; ut < arguments.length; ut++) {
            var Rt = arguments[ut];
            if (Rt != null)
              for (var tn in Rt)
                Object.prototype.hasOwnProperty.call(Rt, tn) && (Xe[tn] = Rt[tn]);
          }
          return Xe;
        }, writable: !0, configurable: !0 }), HTMLCanvasElement.prototype.toBlob || Object.defineProperty(HTMLCanvasElement.prototype, "toBlob", { value: function(De, Ce, Xe) {
          for (var ut = atob(this.toDataURL(Ce, Xe).split(",")[1]), Rt = ut.length, tn = new Uint8Array(Rt), nn = 0; nn < Rt; nn++)
            tn[nn] = ut.charCodeAt(nn);
          De(new Blob([tn], { type: Ce || "image/png" }));
        } }), we.Log = new op(we._oPub), we._log("DVS"), we._log("db"), we._db = new rp(), we._log("db", !1), we._log("Error"), we.Error = new ip(we._oPub), we._log("Error", !1), we._log("Tag"), we.Tag = new tp({ pubsub: we._oPub }), we._log("Tag", !1), we._log("File"), we.File = new $m({ pubsub: we._oPub }), we._log("File", !1), we._log("ViewControl"), we.ViewControl = new Zm(s, we._oPub, we._db, we.uid), we._log("ViewControl", !1), we._log("DataControl"), we.DataControl = new Om(s, we._oPub, we._db), we._log("DataControl", !1), we._log("DVS", !1), we;
      }
      e(Pe, be);
      var y = Pe.prototype;
      return y.on = function(s, h) {
        be.prototype._on.call(this, s, h);
      }, y.off = function(s, h) {
        be.prototype._off.call(this, s, h);
      }, y.emit = function(s) {
        for (var h, w = arguments.length, P = new Array(1 < w ? w - 1 : 0), j = 1; j < w; j++)
          P[j - 1] = arguments[j];
        (h = be.prototype._emit).call.apply(h, [this, s].concat(P));
      }, y._log = function(s, h) {
        (h = h === void 0 || h) ? this._oPub.emit(Qn, "Initialize ".concat(s, " object.")) : this._oPub.emit(Qn, "Complete ".concat(s, " object initialization."));
      }, y.dispose = function() {
        var s;
        be.prototype.dispose.call(this), (s = this.Tag) != null && s.dispose(), (s = this.File) != null && s.dispose(), (s = this.ViewControl) != null && (s = s.getViewerByIndex(0)) != null && s.removeAllSync(), (s = this.ViewControl) != null && s.dispose(), (s = this.Error) != null && s.dispose(), (s = this.Log) != null && s.dispose(), this._db = null, this.Log = null, this.Error = null, this.Tag = null, this.File = null, this.DataControl = null;
      }, Pe;
    }(Ct), window.Dynamsoft = window.Dynamsoft || {}, window.Dynamsoft.ViewModel = en;
  }();
  var ua = { changeImageUISize: function(o, e, r) {
    var t, i, a, u, c = e, d = r, _ = vt;
    t = n.one(o._containerElement), n.isString(e) && e.indexOf("%") >= 0 ? ((a = n.css(t, "width")) == 0 && (t[0].style.width = "100%"), a = n.css(t, "width") * parseInt(e) / 100, _ = Gt) : c = [(a = parseInt(e)) + 2, "px"].join(""), n.isString(r) && r.indexOf("%") >= 0 ? ((u = n.css(t, "height")) == 0 && (t[0].style.height = "100%"), u = n.css(t, "height") * parseInt(r) / 100, _ = Gt) : d = [(u = parseInt(r)) + 2, "px"].join(""), t && (i = n.one(".dynamsoft-dwt-container-box", t)) && i.getEL() && (i.style("width", c), i.style("height", d)), _ ? (o.__funResize || (o.__funResize = function() {
      if (o._ImgManager && o._containerElement) {
        var T = ua.__innerGetUIViewRealSize(o._containerElement, o._width, o._height);
        return o._ImgManager.ChangeSize(T.width, T.height);
      }
      return Gt;
    }), n.removeEventListener(window, "resize", o.__funResize), n.addEventListener(window, "resize", o.__funResize)) : o.__funResize && (n.removeEventListener(window, "resize", o.__funResize), o.__funResize = vt);
    var v = ua.__innerGetUIViewRealSize(o._containerElement, a, u);
    return o._ImgManager ? o._ImgManager.ChangeSize(v.width, v.height) : Gt;
  }, __innerGetUIViewRealSize: function(o, e, r) {
    var t, i = -1, a = -1;
    return t = n.one(o), n.isString(e) && e.indexOf("%") >= 0 && (i = n.css(t, "width") * parseInt(e) / 100), i < 0 && e && (i = parseInt(e)), n.isString(r) && r.indexOf("%") >= 0 && (a = n.css(t, "height") * parseInt(r) / 100), a < 0 && r && (a = parseInt(r)), { width: i, height: a };
  }, bindUIViewEvents: function(o, e) {
    var r = o;
    e.onSelected = function(t) {
      if (!r._isNoViewer()) {
        var i, a = t.length;
        a > 0 && (r._ImgManager.SetSelectedImageCount(a), i = t[a - 1], n.isFunction(r.__OnRefreshUI) && r.__OnRefreshUI(i));
      }
    }, e.onRefreshUI = function(t) {
      r._isNoViewer() || ua.__innerRefreshFromUIView(r, t);
    }, e.onResetCurrentIndex = function(t) {
      if (!r._isNoViewer()) {
        var i = r._ImgManager.getCurrentImageIndex();
        t >= 0 && t < r._ImgManager.count() && i != t && n.isFunction(r.__OnIndexChangeDuringDragDrop) && r.__OnIndexChangeDuringDragDrop(i, t);
      }
    }, e.onMouseMove = function(t) {
      if (!r._isNoViewer()) {
        var i = t.index;
        if (t) {
          var a = t.x, u = t.y;
          r.__MouseX = a, r.__MouseY = u;
        }
        n.isFunction(r.__OnMouseMove) && r.__OnMouseMove(i);
      }
    }, e.onMouseClick = function(t) {
      if (!r._isNoViewer()) {
        var i = t.index;
        if (t) {
          var a = t.x, u = t.y;
          r.__MouseX = a, r.__MouseY = u;
        }
        n.isFunction(r.__OnMouseClick) && r.__OnMouseClick(i);
      }
    }, e.onMouseDoubleClick = function(t) {
      if (!r._isNoViewer()) {
        var i = t.index;
        n.isFunction(r.__OnMouseDoubleClick) && r.__OnMouseDoubleClick(i);
      }
    }, e.onMouseRightClick = function(t) {
      if (!r._isNoViewer()) {
        var i = t.index;
        if (t) {
          var a = t.x, u = t.y;
          r.__MouseX = a, r.__MouseY = u;
        }
        return n.isFunction(r.__OnMouseRightClick) ? r.__OnMouseRightClick(i) : Gt;
      }
    }, e.onImageAreaSelected = function(t) {
      r._isNoViewer() || n.isFunction(r.__OnImageAreaSelected) && r.__OnImageAreaSelected(t.index, t.left, t.top, t.right, t.bottom, t.areaIndex);
    }, e.onImageAreaDeSelected = function(t) {
      r._isNoViewer() || n.isFunction(r.__OnImageAreaDeSelected) && r.__OnImageAreaDeSelected(t);
    }, e.onBufferChanged = function(t) {
      n.isFunction(r.__OnBufferChanged) && r.__OnBufferChanged(t);
    };
  }, __innerRefreshFromUIView: function(o, e) {
    var r = o;
    n.isFunction(r.__OnRefreshUI) && r.__OnRefreshUI(e);
  } }, nd = l.navInfoSync, ca = { getImageUrl: function(o, e, r, t, i) {
    var a, u = [o];
    if (n.isNumber(e) && e < 0)
      return "";
    if (e != null && (u.push("&index="), u.push(e)), u.push("&width="), u.push(r), u.push("&height="), u.push(t), u.push("&ticks="), i ? u.push(i) : u.push(Date.now()), a = u.join(""), l.navInfoSync.bFileSystem && a.indexOf("dwt://") < 0) {
      var c = new Image();
      c.crossOrigin = "anonymous", c.src = a, c = null;
    }
    return a;
  }, getUrlByAct: function(o, e, r) {
    var t = [o];
    return e != null && (t.push("&index="), t.push(e)), r && (t.push("&act="), t.push(r)), t.push("&ticks="), t.push(Date.now()), t.join("");
  }, output: function(o, e) {
    l.DWT.Debug && n.log(e);
  }, print: function(o) {
    var e, r = 850, t = 1120, i = 0, a = 0, u = 0, c = "";
    for (n.product.bHTML5Edition && (nd.bIE && (t = 1160), nd.bFirefox && (t = 1150)), i = 0; i < o.length; i++) {
      var d = t, _ = o[i], v = _.Width, T = _.Height, M = _.Url;
      v <= 0 && (v = r), T <= 0 && (T = d);
      var A = r / v, S = d / T;
      A < S ? d = Math.floor(T * A) : A > S && (r = Math.floor(v * S)), a += v, u += T, c = c + '<div style="width:' + r + "px;height:" + d + 'px"><img id="D_img' + i + '" src="' + M + '" style="position:relative;left:0px;top:0px;width: ' + r + "px;height: " + d + 'px" referrerpolicy="strict-origin-when-cross-origin" /></div>';
    }
    var V, ne = ["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=", a, ",height=", u].join(""), z = window.open("about:blank", "_blank", ne);
    e = '<html><body id="D_img">' + c + "</body></html>", z && (z.document.write(e), z.document.close(), z.focus(), (V = z.document.getElementById("D_img")) ? V.onload = function() {
      z && z.print(), n.log("print image...ok");
    } : n.log("cannot find image"));
  } };
  n.html5.Funs2 = ca;
  var rd = zn(function o(e, r, t) {
    Gn(this, o), this.Url = e, this.Width = r, this.Height = t;
  }), yc = function() {
    function o() {
      Gn(this, o), ar(this, "bIsDirty", !1), ar(this, "imageWidth", 0), ar(this, "imageHeight", 0), ar(this, "iImageControlWidth", 0), ar(this, "iImageControlHeight", 0), ar(this, "imageUrl", ""), ar(this, "minImageUrl", ""), ar(this, "uuid", -1), ar(this, "serverId", -1), ar(this, "aryOverlayRectangleData", []), ar(this, "ticks", Date.now());
    }
    return zn(o, [{ key: "Clear", value: function() {
      this.imageUrl = "", this.minImageUrl = "", this.serverId = -1, this.aryOverlayRectangleData = [];
    } }]), o;
  }(), id = function() {
    function o(e, r, t, i) {
      Gn(this, o);
      var a = this, u = 1;
      a._webViewer = e, a.myViewer = a._webViewer.myViewer, a.element = r, n.isUndefined(t) || (u = t == "left" ? -1 : 1), n.isUndefined(i) && (i = !1), a.myCustomElemet = a.myViewer.createCustomElement(r, u, i), a.myCustomElemet && (a.hide(), a.bDispose = !1);
    }
    return zn(o, [{ key: "show", value: function() {
      var e = this;
      return e.myCustomElemet ? (e.myCustomElemet.show(), !0) : (e.bDispose ? n.Errors.CustomElementDispose(e._webViewer._stwain) : n.Errors.CustomElementNotExist(e._webViewer._stwain), !1);
    } }, { key: "hide", value: function() {
      var e = this;
      return e.myCustomElemet ? (e.myCustomElemet.hide(), !0) : (e.bDispose ? n.Errors.CustomElementDispose(e._webViewer._stwain) : n.Errors.CustomElementNotExist(e._webViewer._stwain), !1);
    } }, { key: "dispose", value: function() {
      var e = this, r = !1;
      return !!e.bDispose || (e.myCustomElemet ? (r = e.myCustomElemet.dispose()) && (e.bDispose = !0, e._webViewer._customElement = void 0, e.myCustomElemet = void 0, e.myViewer = null, e.element = null) : (e.bDispose = !0, r = !0), r);
    } }]), o;
  }();
  function Tn(o, e, r) {
    e in o || Object.defineProperty(o, e, r);
  }
  function ag(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  n.UI.CustomElement = id;
  var od = /* @__PURE__ */ new WeakSet(), bc = function() {
    function o(e, r) {
      Gn(this, o), ag(this, od);
      var t = this;
      t._ImgManager = r, t._stwain = r._stwain, t._webViewer = e, t._elements = [], function(i, a, u) {
        return a.has(i), u;
      }(this, od, sg).call(this);
    }
    return zn(o, [{ key: "dispose", value: function() {
      var e = this;
      e._stwain = null, e._ImgManager = null, e._webViewer && (e._webViewer = null), e._elements = [];
    } }, { key: "next", value: function() {
      return this._webViewer.next();
    } }, { key: "previous", value: function() {
      return this._webViewer.previous();
    } }, { key: "first", value: function() {
      return this._webViewer.first();
    } }, { key: "last", value: function() {
      return this._webViewer.last();
    } }, { key: "gotoPage", value: function(e) {
      return this._webViewer.go(e);
    } }, { key: "render", value: function() {
      return this._webViewer.render();
    } }, { key: "createDocumentEditor", value: function(e) {
      return this._stwain._isMobileMode() ? (Mu(this._stwain) || dc(this._stwain).catch(function() {
      }), this._webViewer.createDocumentEditor(e)) : (n.Errors.ServiceNotSupport(this._stwain, "createDocumentEditor"), null);
    } }, { key: "createImageEditor", value: function(e) {
      return this._webViewer.createImageEditor(e);
    } }, { key: "createThumbnailViewer", value: function(e) {
      return this._webViewer.createThumbnailViewer(e);
    } }, { key: "getUISettings", value: function() {
      return this._webViewer.getUISettings();
    } }, { key: "resetUISettings", value: function() {
      return this._webViewer.resetUISettings();
    } }, { key: "updateUISettings", value: function(e) {
      return this._webViewer.updateUISettings(e);
    } }, { key: "updateCheckboxStyle", value: function(e) {
      return this._webViewer.UpdateCheckboxStyle(e);
    } }, { key: "updatePageNumberStyle", value: function(e) {
      return this._webViewer.UpdatePageNumberStyle(e);
    } }, { key: "clearSelectedAreas", value: function() {
      return this._webViewer.clearSelectedAreas();
    } }, { key: "setSelectedAreas", value: function(e) {
      return this._webViewer.setSelectedAreas(e);
    } }, { key: "createCustomElement", value: function(e, r, t) {
      return this._webViewer.createCustomElement(e, r, t);
    } }, { key: "fitWindow", value: function(e) {
      return this._webViewer.SetFitType(e);
    } }, { key: "setButtonClass", value: function(e, r) {
      return this._webViewer.setButtonClass(e, r);
    } }, { key: "setViewMode", value: function(e, r) {
      return this._webViewer.SetViewMode(e, r);
    } }, { key: "bind", value: function(e, r) {
      var t = e;
      if (n.isShadowRoot(t)) {
        var i = document.createElement("div");
        t.appendChild(i), this._elements.push(i), t = i;
      }
      if (n.isDOM(t)) {
        var a = n.getShadowRoot(t);
        if (a) {
          var u = l.Lib.timestamp, c = document.createElement("style");
          c.innerHTML = ['@import url("', l.DWT.ResourcesPath, "/src/dynamsoft.viewer.css", u, '")'].join(""), a.appendChild(c), this._elements.push(c);
        } else
          a = !1;
        t.id && t.id != "" || (t.id = ["dwt_", n.getRandom()].join(""));
      }
      return r ? this._webViewer.BindTemplate(t, r) : this._webViewer.BindView(t);
    } }, { key: "createTemplate", value: function(e, r) {
      return this._stwain._isMobileMode() ? this._webViewer.CreateTemplate(e, r) : (n.Errors.ServiceNotSupport(this._stwain, "createTemplate"), null);
    } }, { key: "show", value: function() {
      return this._webViewer.show();
    } }, { key: "hide", value: function() {
      return this._webViewer.hide();
    } }, { key: "unbind", value: function() {
      return this._webViewer._stwain.Template && this._stwain.Template._documentTemplate.UnbindView(), n.each(this._elements, function(e) {
        e.parentNode && e.parentNode.removeChild(e);
      }), this._webViewer.UnbindView();
    } }, { key: "on", value: function(e, r) {
      this._webViewer.on(e, r);
    } }, { key: "off", value: function(e, r) {
      this._webViewer.off(e, r);
    } }]), o;
  }();
  function sg() {
    var o = this;
    Tn(o, "width", { get: function() {
      return o._webViewer.GetWidth();
    }, set: function(e) {
      return o._webViewer.SetWidth(e);
    } }), Tn(o, "height", { get: function() {
      return o._webViewer.GetHeight();
    }, set: function(e) {
      return o._webViewer.SetHeight(e);
    } }), Tn(o, "idPostfix", { get: function() {
      return o._webViewer.GetIdPostfix();
    } }), Tn(o, "background", { get: function() {
      return o._webViewer.GetBackground();
    }, set: function(e) {
      return o._webViewer.SetBackground(e);
    } }), Tn(o, "border", { get: function() {
      return o._webViewer.GetBorder();
    }, set: function(e) {
      return o._webViewer.SetBorder(e);
    } }), Tn(o, "innerBorder", { get: function() {
      return o._webViewer.GetInnerBorder();
    }, set: function(e) {
      return o._webViewer.SetInnerBorder(e);
    } }), Tn(o, "selectedPageBorder", { get: function() {
      return o._webViewer.GetSelectedPageBorder();
    }, set: function(e) {
      return o._webViewer.SetSelectedPageBorder(e);
    } }), Tn(o, "selectedPageBackground", { get: function() {
      return o._webViewer.GetSelectedPageBackground();
    }, set: function(e) {
      return o._webViewer.SetSelectedPageBackground(e);
    } }), Tn(o, "showPageNumber", { get: function() {
      return o._webViewer.GetShowPageNumber();
    }, set: function(e) {
      return o._webViewer.SetShowPageNumber(e);
    } }), Tn(o, "selectedAreaBorderColor", { get: function() {
      return o._webViewer.GetSelectedAreaBorderColor();
    }, set: function(e) {
      return o._webViewer.SetSelectedAreaBorderColor(e);
    } }), Tn(o, "selectionRectAspectRatio", { get: function() {
      return o._webViewer.GetSelectionRectAspectRatio();
    }, set: function(e) {
      return o._webViewer.SetSelectionRectAspectRatio(e);
    } }), Tn(o, "cursor", { get: function() {
      return o._webViewer.GetCursor();
    }, set: function(e) {
      return o._webViewer.SetCursor(e);
    } }), Tn(o, "ifAutoScroll", { get: function() {
      return o._webViewer.GetIfAutoScroll();
    }, set: function(e) {
      return o._webViewer.SetIfAutoScroll(e);
    } }), Tn(o, "pageMargin", { get: function() {
      return o._webViewer.GetPageMargin();
    }, set: function(e) {
      return o._webViewer.SetPageMargin(e);
    } }), Tn(o, "zoom", { get: function() {
      return o._webViewer.GetZoom();
    }, set: function(e) {
      return o._webViewer.SetZoom(e);
    } }), Tn(o, "singlePageMode", { get: function() {
      return o._webViewer.GetIfSinglePageMode();
    }, set: function(e) {
      return o._webViewer.SetIfSinglePageMode(e);
    } }), Tn(o, "acceptDrop", { get: function() {
      return o._webViewer.GetAcceptDrop();
    }, set: function(e) {
      return o._webViewer.SetAcceptDrop(e);
    } }), Tn(o, "allowSlide", { get: function() {
      return o._webViewer.GetAllowSlide();
    }, set: function(e) {
      return o._webViewer.SetAllowSlide(e);
    } }), Tn(o, "autoChangeIndex", { get: function() {
      return o._webViewer.GetAutoChangeIndex();
    }, set: function(e) {
      return o._webViewer.SetAutoChangeIndex(e);
    } }), Tn(o, "showCheckbox", { get: function() {
      return o._webViewer.GetShowCheckbox();
    }, set: function(e) {
      return o._webViewer.SetShowCheckbox(e);
    } }), Tn(o, "selectionMode", { get: function() {
      return o._webViewer.GetMultiSelectMode();
    }, set: function(e) {
      return o._webViewer.SetMultiSelectMode(e);
    } }), Tn(o, "allowPageDragging", { get: function() {
      return o._webViewer.GetAllowPageDragging();
    }, set: function(e) {
      return o._webViewer.SetAllowPageDragging(e);
    } });
  }
  n.UI.DWTViewer = bc;
  var Ni = "dynamsoft-default-document", ks = "rgb(255, 255, 255)", cs = "transparent", wc = "1px solid rgb(238, 238, 238)", Ic = "rgb(239, 246, 253)", Sc = "1px solid rgb(238, 238, 238)", Tc = "rgb(251, 236, 136)", ad = "1px solid rgb(125,162,206)", sd = "rgb(199, 222, 252)", la = { visibility: "hidden", width: "24px", height: "24px", background: "#ffffff", borderWidth: "2px", borderColor: "#000000", checkMarkColor: "#000000", checkMarkLineWidth: "2px", borderRadius: 0, opacity: 0.5, left: 0, top: 0, right: "", bottom: "", translateX: "", translateY: "" }, Wo = { visibility: "hidden", width: "24px", height: "24px", background: "#ffffff", borderWidth: "1px", borderColor: "#a79898", borderRadius: "50%", opacity: 0.5, color: "#000000", fontFamily: "sans-serif", fontSize: 12, left: "", top: "", right: 0, bottom: 0, translateX: "", translateY: "" }, Cc = "url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjQuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMDAgMzAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMDAgMzAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0NDQ0NDQzt9Cgkuc3Qxe2ZpbGw6I0YwRUZGNDt9Cjwvc3R5bGU+CjxnIGlkPSJHcm91cF8xMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOS42NjggLTE3OC41ODkpIj4KCTxnIGlkPSJSZWN0YW5nbGVfMTciPgoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01OTgsMzQ3LjloLTQuMnYtMmgyLjJ2LTEuOGgyVjM0Ny45eiBNNTg3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTU3NS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01NjMuOSwzNDcuOQoJCQloLTZ2LTJoNlYzNDcuOXogTTU1MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01MzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNTI3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTUxNS45LDM0Ny45aC02di0yaDYKCQkJVjM0Ny45eiBNNTAzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQ5MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00NzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDY3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXoKCQkJIE00NTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDQzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQzMS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00MTkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDA3LjksMzQ3LjkKCQkJaC02di0yaDZWMzQ3Ljl6IE0zOTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNMzgzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTM3OC42LDM0MS4xaC0ydi02aDJWMzQxLjF6IE01OTgsMzM4LjFoLTJ2LTZoMlYzMzguMXoKCQkJIE0zNzguNiwzMjkuMWgtMnYtNmgyVjMyOS4xeiBNNTk4LDMyNi4xaC0ydi02aDJWMzI2LjF6IE0zNzguNiwzMTcuMWgtMnYtNmgyVjMxNy4xeiBNNTk4LDMxNC4xaC0ydi02aDJWMzE0LjF6IE0zNzguNiwzMDUuMWgtMgoJCQl2LTZoMlYzMDUuMXogTTU5OCwzMDIuMWgtMnYtNmgyVjMwMi4xeiBNMzc4LjYsMjkzLjFoLTJ2LTZoMlYyOTMuMXogTTU5OCwyOTAuMWgtMnYtNmgyVjI5MC4xeiBNMzc4LjYsMjgxLjFoLTJ2LTZoMlYyODEuMXoKCQkJIE01OTgsMjc4LjFoLTJ2LTZoMlYyNzguMXogTTM3OC42LDI2OS4xaC0ydi02aDJWMjY5LjF6IE01OTgsMjY2LjFoLTJ2LTZoMlYyNjYuMXogTTM3OC42LDI1Ny4xaC0ydi02aDJWMjU3LjF6IE01OTgsMjU0LjFoLTJ2LTYKCQkJaDJWMjU0LjF6IE0zNzguNiwyNDUuMWgtMnYtNmgyVjI0NS4xeiBNNTk4LDI0Mi4xaC0ydi02aDJWMjQyLjF6IE0zNzguNiwyMzMuMWgtMnYtNmgyVjIzMy4xeiBNNTk4LDIzMC4xaC0ydi02aDJWMjMwLjF6CgkJCSBNMzc4LjYsMjIxLjFoLTJ2LTYuN2g3djJoLTVWMjIxLjF6IE01OTgsMjE4LjFoLTJ2LTEuNmgtMi40di0yaDQuNFYyMTguMXogTTU4Ny42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NzUuNiwyMTYuNWgtNnYtMmg2CgkJCVYyMTYuNXogTTU2My42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNTM5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUyNy42LDIxNi41aC02di0yaDZWMjE2LjV6CgkJCSBNNTE1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUwMy42LDIxNi41aC02di0yaDZWMjE2LjV6IE00OTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDc5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ2Ny42LDIxNi41CgkJCWgtNnYtMmg2VjIxNi41eiBNNDU1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ0My42LDIxNi41aC02di0yaDZWMjE2LjV6IE00MzEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDE5LjYsMjE2LjVoLTZ2LTJoNgoJCQlWMjE2LjV6IE00MDcuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNMzk1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXoiLz4KCTwvZz4KCTxnIGlkPSJGaWxlcy1Gb2xkZXJzX0NvbW1vbi1GaWxlc19jb21tb24tZmlsZS10ZXh0LWFkZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4zNjIgMi4xMzkpIj4KCQk8ZyBpZD0iR3JvdXBfNDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Ny44MDYgMjAxLjk1KSI+CgkJCTxnIGlkPSJjb21tb24tZmlsZS10ZXh0LWFkZCI+CgkJCQk8ZyBpZD0iT3ZhbF8xOCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwNy4yLDExOC40TDEwNy4yLDExOC40TDEwNy4yLDExOC40Yy0xMi4zLDAtMjIuMy0xMC0yMi4zLTIyLjNjMC0xMi4zLDEwLTIyLjMsMjIuMy0yMi4zYzAsMCwwLDAsMCwwCgkJCQkJCWMxMi4zLDAsMjIuMywxMCwyMi4zLDIyLjNjMCw1LjktMi4zLDExLjUtNi41LDE1LjdDMTE4LjgsMTE2LjEsMTEzLjIsMTE4LjQsMTA3LjIsMTE4LjR6IE0xMDcuMiw3NS45CgkJCQkJCUMxMDcuMiw3NS45LDEwNy4yLDc1LjksMTA3LjIsNzUuOUM5Ni4xLDc1LjksODcsODUsODcsOTYuMmMwLDExLjIsOS4xLDIwLjMsMjAuMywyMC4zbDAsMXYtMWM1LjQsMCwxMC41LTIuMSwxNC4zLTUuOQoJCQkJCQljMy44LTMuOCw1LjktOC45LDUuOS0xNC4zQzEyNy41LDg1LDExOC40LDc1LjksMTA3LjIsNzUuOXoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzMiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDcuMiwxMDcuOGMtMC42LDAtMS0wLjQtMS0xVjg1LjVjMC0wLjYsMC40LTEsMS0xczEsMC40LDEsMXYyMS4zQzEwOC4yLDEwNy4zLDEwNy44LDEwNy44LDEwNy4yLDEwNy44egoJCQkJCQkiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzQiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMTcuOSw5Ny4ySDk2LjZjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTMTE4LjQsOTcuMiwxMTcuOSw5Ny4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzNSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTk0LjgsNjUuM0g2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDMzLjdjMC42LDAsMSwwLjQsMSwxUzk1LjQsNjUuMyw5NC44LDY1LjN6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCw3NS45SDYxLjFjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTODMsNzUuOSw4Mi40LDc1Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM3Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODYsNTQuNkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xSDg2YzAuNiwwLDEsMC40LDEsMVM4Ni41LDU0LjYsODYsNTQuNnoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzgiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03NS4zLDg2LjVINjEuMWMtMC42LDAtMS0wLjQtMS0xczAuNC0xLDEtMWgxNC4yYzAuNiwwLDEsMC40LDEsMVM3NS45LDg2LjUsNzUuMyw4Ni41eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzOSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTc1LjMsOTcuMkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDE0LjJjMC42LDAsMSwwLjQsMSwxUzc1LjksOTcuMiw3NS4zLDk3LjJ6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTQwIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCwxMTguNEg1MC41Yy0yLjUsMC00LjUtMi00LjUtNC41VjM5LjRjMC0yLjUsMi00LjUsNC41LTQuNWg0Ny4xYzEuMiwwLDIuNCwwLjUsMy4yLDEuM0wxMTQsNDkuNAoJCQkJCQljMC45LDAuOSwxLjMsMiwxLjMsMy4ydjExLjdjMCwwLjYtMC40LDEtMSwxcy0xLTAuNC0xLTFWNTIuNmMwLTAuNy0wLjMtMS4zLTAuNy0xLjhMOTkuNCwzNy42Yy0wLjUtMC41LTEuMS0wLjctMS44LTAuN0g1MC41CgkJCQkJCWMtMS40LDAtMi41LDEuMS0yLjUsMi41djc0LjRjMCwxLjQsMS4xLDIuNSwyLjUsMi41aDMxLjljMC42LDAsMSwwLjQsMSwxUzgzLDExOC40LDgyLjQsMTE4LjR6Ii8+CgkJCQk8L2c+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+Cgk8ZyBpZD0iQXJyb3dzLURpYWdyYW1zX0RpYWdyYW1zX2RpYWdyYW0tZGFzaC1kb3duLWZhc3QiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yIDQpIj4KCQk8ZyBpZD0iR3JvdXBfMTY1Ij4KCQkJPGcgaWQ9IkxpZ2h0XzE2NSI+CgkJCQk8ZyBpZD0iU2hhcGVfNTM5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjEsNDQzbC00LjItNC4ybDEuNC0xLjRsNC4yLDQuMkw0ODQuMSw0NDN6IE00ODkuNyw0NDIuN2wtMS40LTEuNGw0LjItNC4ybDEuNCwxLjRMNDg5LjcsNDQyLjd6CgkJCQkJCSBNNDc1LjYsNDM0LjVsLTQuMi00LjJsMS40LTEuNGw0LjIsNC4yTDQ3NS42LDQzNC41eiBNNDk4LjIsNDM0LjJsLTEuNC0xLjRsMy45LTMuOWwxLjQsMS40TDQ5OC4yLDQzNC4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQwMi43LDM0Ny42djQuMiIvPgoJCQkJCTxyZWN0IHg9IjQwMS43IiB5PSIzNDcuNiIgY2xhc3M9InN0MCIgd2lkdGg9IjIiIGhlaWdodD0iNC4yIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQxIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAyLjcsMzYwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDAxLjciIHk9IjM2MC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQyIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAzLjMsMzc3LjRjMC44LDIuOCwyLjIsNS4zLDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDA1LjEsMzgzLjNjLTEuMy0xLjctMi4yLTMuNi0yLjgtNS43bDEuOS0wLjVjMC41LDEuOCwxLjMsMy41LDIuNSw1TDQwNS4xLDM4My4zeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQxNC44LDM4OWMyLjgsMC42LDUuNywwLjksOC41LDAuNyIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MjAuNywzOTAuN2MtMi4xLDAtNC4xLTAuMy02LjItMC43bDAuNC0xLjljMS45LDAuNCwzLjgsMC43LDUuNywwLjdMNDIwLjcsMzkwLjd6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ0Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDMxLjgsMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDMxLjgiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ1Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDQ4LjksMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDQ4LjkiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDY2LDM4OS42YzIuOS0wLjIsNS43LDAsOC41LDAuNiIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NzEuOCwzOTAuOGMtMS45LTAuMy0zLjgtMC4zLTUuOC0wLjJsLTAuMS0yYzIuMS0wLjEsNC4yLTAuMSw2LjIsMC4yTDQ3MS44LDM5MC44eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0NyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQ4MS43LDM5NC41YzIsMiwzLjUsNC41LDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjIsMzk5LjljLTAuOC0xLjctMS45LTMuMy0zLjItNC42bDEuNC0xLjRjMS41LDEuNSwyLjcsMy4zLDMuNiw1LjJMNDg0LjIsMzk5Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ4Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDEwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQxMC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDI3LjR2NC4yIi8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQyNy40IiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI0LjIiLz4KCQkJCTwvZz4KCQkJPC9nPgoJCTwvZz4KCTwvZz4KPC9nPgo8L3N2Zz4K) center /auto no-repeat,#F0EFF4", ud = ["click", "onExitFunc", "onMultiSelectionFunc", "onAddDocumentFunc", "onMultiSelectionCencelFunc", "onAllSelectionFunc", "onCancelAllSelectionFunc", "onSaveFunc", "onUploadFunc", "bufferChanged", "onRemoveSelectedFunc"], ug = { toolbars: { topMenu: !0, bottomMenu: !0 }, groups: { viewMenu: !1, global: !1, viewChange: !1, viewerCorner: !1, pager: !1, myMainTopGroup: { visibility: !0, location: "topMenu", sequence: 1 }, myMainBottomGroup: { visibility: !0, location: "bottomMenu", sequence: 1 }, myMultiSelectionTopGroup: { visibility: !0, location: "topMenu", sequence: 2 }, myMultiSelectionBottomGroup: { visibility: !0, location: "bottomMenu", sequence: 2 }, myGroup3: { visibility: !0, location: "header", sequence: 1 } }, cropStyle: { cropMask: !1, cropBar: !1 }, buttonResize: { ifResize: !0, maxSize: 18, minSize: 12 }, buttons: { exit: { visibility: !0, location: "myMainTopGroup", iconClass: "ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left", sequence: 1, onButtonClick: "onExitFunc" }, fileName: { visibility: !0, location: "myMainTopGroup", iconClass: "ds-dvs-ui-pagePre1 ds-dwt-ui-icon-color", sequence: 2, text: "" }, addDocument: { visibility: !0, location: "myMainBottomGroup", iconClass: "ds-dwt-ui-icon-addImageFromCamera  ds-dwt-ui-icon-color", sequence: 1, onButtonClick: "onAddDocumentFunc" }, multiSelection: { visibility: !0, location: "myMainTopGroup", iconClass: "ds-dwt-ui-icon-selectAll ds-dwt-ui-icon-color ds-dwt-ui-icon-right", sequence: 3, onButtonClick: "onMultiSelectionFunc" }, cancel: { visibility: !0, location: "myMultiSelectionTopGroup", iconClass: "ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left", sequence: 1, onButtonClick: "onMultiSelectionCencelFunc" }, selectCount: { visibility: !0, location: "myMultiSelectionTopGroup", iconClass: "ds-dvs-ui-pagePre2 ds-dwt-ui-icon-color", sequence: 2, text: "selected count: " }, selectAll: { visibility: !0, location: "myMultiSelectionTopGroup", iconClass: "ds-dwt-ui-mobile-icon-unselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right", sequence: 2, onButtonClick: "onAllSelectionFunc" }, cancelAllSelect: { visibility: !0, location: "myMultiSelectionTopGroup", iconClass: "ds-dwt-ui-mobile-icon-a-allselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right", sequence: 3, onButtonClick: "onCancelAllSelectionFunc" }, save: { visibility: !0, location: "myMultiSelectionBottomGroup", iconClass: "ds-dwt-ui-icon-saveImage ds-dwt-ui-icon-color", sequence: 2, onButtonClick: "onSaveFunc" }, upload: { visibility: !0, location: "myMultiSelectionBottomGroup", iconClass: "ds-dwt-ui-mobile-icon-a-uploadfromserver ds-dwt-ui-icon-color", sequence: 2, onButtonClick: "onUploadFunc" }, removeSelected: { visibility: !0, location: "myMultiSelectionBottomGroup", iconClass: "ds-dwt-ui-mobile-icon-delete ds-dwt-ui-icon-color", sequence: 2, onButtonClick: "onRemoveSelectedFunc" } }, content: { besides: { visibility: !1, sequence: 4 }, thumbnail: { backgroundColor: "#fff" } }, canvasConfig: { columns: 2, rows: 2, background: ks, pageBackground: "rgb(255,255,255)", allowPageDragging: !0, checkbox: { visibility: la.visibility, width: "30px", height: "30px", background: la.background, borderWidth: "3px", borderColor: "#FE8E14", checkMarkColor: "#FE8E14", checkMarkLineWidth: "3px", borderRadius: la.borderRadius, opacity: 1, left: la.left, top: la.top, right: la.right, bottom: la.bottom, translateX: la.translateX, translateY: la.translateY }, pageNumber: { visibility: "visible", width: "36px", height: "36px", background: Wo.background, borderWidth: Wo.borderWidth, borderColor: Wo.borderColor, borderRadius: Wo.borderRadius, opacity: 1, color: Wo.color, fontFamily: Wo.fontFamily, fontSize: 18, left: Wo.left, top: Wo.top, right: Wo.right, bottom: Wo.bottom, translateX: Wo.translateX, translateY: Wo.translateY } }, thumbnail: { showThumbnailControl: !1, selectedBorderColor: "#7DA2CE", selectedBackgroundColor: "rgb(199, 222, 252)", imageBackgroundColor: "transparent", imageBorderColor: "rgb(238, 238, 238)", hoverBackgroundColor: "rgb(239, 246, 253)", hoverBorderColor: "rgb(238, 238, 238)", placeholderBackgroundColor: "rgb(251, 236, 136)" } }, cd = function() {
    function o(e, r, t, i) {
      Gn(this, o);
      var a = this;
      a._ImgManager = r, a._stwain = r._stwain, a._webViewer = e, a._template = t, a._documentConfiguration = i;
    }
    return zn(o, [{ key: "BindView", value: function(e) {
      var r, t = this;
      r = e && e.nodeName == "DIV" ? e : document.getElementById(e), n.isUndefined(r) || n.isNull(r) ? (t.newContainer = document.createElement("div"), document.body.appendChild(t.newContainer), document.body.insertBefore(t.newContainer, document.body.firstElementChild), t.newContainer.style.width = "100%", t.newContainer.style.height = "100%", t.newContainer.style.position = "fixed", t.newContainer.style.left = "0px", t.newContainer.style.top = "0px", t.bFullScreen = !0) : (t.newContainer = r, t.bFullScreen = !1), t._webViewer.BindView(t.newContainer), t._webViewer.updateUISettings(ug);
    } }, { key: "initView", value: function() {
      var e = this, r = document.createElement("div");
      r.id = "btnCapture" + e._webViewer.myViewer.postfix, r.className = "ds-dwt-ui-icon-addImageFromCamera dynamsoft-dwt-btnCapture", r.onclick = function() {
        e._webViewer.myViewer.emit("onAddDocumentFunc");
      }, e._webViewer.GetHowManyImagesInBuffer() == 0 && e._webViewer.SetBackground(Cc);
      var t = document.getElementById("WebViewer" + e._webViewer.myViewer.postfix);
      t && t.appendChild(r), e.setMultiSelectMode(!1), e.__bindButtonEvents(), e._webViewer.SetCursor("pointer"), e.DWTCustomWrapper = document.createElement("div");
      var i = l.Lib.env.isMobileViewer(), a = l.Lib.env.isPadViewer();
      i || a ? e.customElement = e._webViewer.createCustomElement(e.DWTCustomWrapper, "right", !0) : (e.DWTCustomWrapper.style.height = "100%", e.DWTCustomWrapper.style.width = "20%", e.customElement = e._webViewer.createCustomElement(e.DWTCustomWrapper, "right", !1));
      var u = document.getElementById("fileName" + e._webViewer.myViewer.postfix);
      u && (u.style.width = "80%", u.style.whiteSpace = "nowrap");
      var c = document.getElementById("selectCount" + e._webViewer.myViewer.postfix);
      c && (c.style.width = "200px", c.style.whiteSpace = "nowrap");
      var d = document.getElementById("bottomMenu" + e._webViewer.myViewer.postfix);
      d && (d.style.border = "0", d.style.display = "none");
    } }, { key: "UnbindView", value: function() {
      var e = this;
      e._unbindButtonEvents(), e._documentEditor && e._documentEditor.dispose();
      var r = document.getElementById("btnCapture" + e._webViewer.myViewer.postfix);
      return r && (r.onclick = function() {
      }), e.newContainer && e.bFullScreen == 1 && e.newContainer.parentNode && e.newContainer.childNodes.length > 0 && e.newContainer.parentNode.removeChild(e.newContainer), e.newContainer = "", e.DWTCustomWrapper = "", !0;
    } }, { key: "setMultiSelectMode", value: function(e) {
      var r = this, t = document.getElementById("myMainTopGroup" + r._webViewer.GetIdPostfix()), i = document.getElementById("myMainBottomGroup" + r._webViewer.GetIdPostfix()), a = document.getElementById("myMultiSelectionTopGroup" + r._webViewer.GetIdPostfix()), u = document.getElementById("myMultiSelectionBottomGroup" + r._webViewer.GetIdPostfix());
      e ? (t.style.display = "none", i.style.display = "none", a.style.display = "", u.style.display = "") : (t.style.display = "", i.style.display = "", a.style.display = "none", u.style.display = "none");
    } }, { key: "__bindButtonEvents", value: function() {
      var e = this;
      l.Lib.each(ud, function(r) {
        e._webViewer.on(r, function(t, i) {
          e[r](t, i);
        });
      });
    } }, { key: "_unbindButtonEvents", value: function() {
      var e = this;
      n.each(ud, function(r) {
        e._webViewer.off(r);
      });
    } }, { key: "bufferChanged", value: function(e) {
      var r = this;
      if (e.action == "shift" || e.action == "remove" || e.action == "add") {
        var t = document.getElementById("selectCount" + r._webViewer.GetIdPostfix());
        e.selectedIds && t && (t.innerText = "selected count: " + e.selectedIds.length), e.selectedIds && e.selectedIds.length == r._stwain.HowManyImagesInBuffer && r._stwain.HowManyImagesInBuffer != 0 ? r.setSelectAllButtonEnable(!1) : r.setSelectAllButtonEnable(!0);
      }
      e.selectedIds && e.selectedIds.length == 0 ? (r._webViewer.setButtonClass("save", "ds-dwt-ui-icon-color-grey"), r._webViewer.setButtonClass("upload", "ds-dwt-ui-icon-color-grey"), r._webViewer.setButtonClass("removeSelected", "ds-dwt-ui-icon-color-grey")) : (r._webViewer.setButtonClass("save", "ds-dwt-ui-icon-color"), r._webViewer.setButtonClass("upload", "ds-dwt-ui-icon-color"), r._webViewer.setButtonClass("removeSelected", "ds-dwt-ui-icon-color"));
      var i = document.getElementById("btnCapture" + r._webViewer.myViewer.postfix);
      i && i.style.display == "" && (n.isUndefined(e.imageIds) || e.imageIds && e.imageIds.length == 0) ? r._webViewer.SetBackground(Cc) : r._webViewer.SetBackground(ks);
    } }, { key: "Dynamsoft_DocumentTemplate_OnVideoClosed", value: function() {
      this._webViewer.OpenFile(this._webViewer.currentFileName);
    } }, { key: "click", value: function(e) {
      var r = this;
      if (e.index != -1 && r._webViewer.GetMultiSelectMode() == Fn && r._stwain.HowManyImagesInBuffer > 0) {
        var t = r._webViewer.createDocumentEditor(r._documentConfiguration);
        t && t.show();
      }
    } }, { key: "onExitFunc", value: function() {
      this._template.onExitFunc();
    } }, { key: "ifShowDocumentTemplate", value: function(e) {
      var r = this;
      r.newContainer && (r.newContainer.style.display = e ? "" : "none");
    } }, { key: "setTemplateTitle", value: function(e) {
      var r = l.Lib.env.isMobileViewer(), t = document.getElementById("fileName" + this._webViewer.myViewer.postfix);
      t && (r && e.length > 26 ? t.innerText = e.substring(0, 10) + "..." + e.substring(e.length - 13, e.length) : !r && e.length > 100 ? t.innerText = e.substring(0, 80) + "..." + e.substring(e.length - 17, e.length) : t.innerText = e);
    } }, { key: "onMultiSelectionFunc", value: function() {
      this._MultiSelectionInner([]);
    } }, { key: "_MultiSelectionInner", value: function(e) {
      var r = this, t = document.getElementById("bottomMenu" + r._webViewer.myViewer.postfix);
      if (t && (t.style.display = ""), r._stwain.SelectImages(e), r.setMultiSelectMode(!0), !r._webViewer.GetShowCheckbox()) {
        document.getElementById("selectCount" + r._webViewer.GetIdPostfix()).innerText = "selected count: " + r._stwain.SelectedImagesIndices.length, r._webViewer.SetShowCheckbox(!0), r._stwain.SelectedImagesIndices.length == r._stwain.HowManyImagesInBuffer && r._stwain.HowManyImagesInBuffer != 0 ? r.setSelectAllButtonEnable(!1) : r.setSelectAllButtonEnable(!0);
        var i = document.getElementById("btnCapture" + r._webViewer.myViewer.postfix);
        if (i && (i.style.display = "none", r._webViewer.SetBackground(ks)), r._template && !l.Lib.isFunction(r._template.onSaveFunc)) {
          var a = document.getElementById("save" + r._webViewer.myViewer.postfix);
          a && (a.style.display = "none");
        }
        if (r._template && !l.Lib.isFunction(r._template.onUploadFunc)) {
          var u = document.getElementById("upload" + r._webViewer.myViewer.postfix);
          u && (u.style.display = "none");
        }
      }
    } }, { key: "onAddDocumentFunc", value: function() {
      this._template.onAddDocumentFunc();
    } }, { key: "onMultiSelectionCencelFunc", value: function() {
      var e = this;
      e.setMultiSelectMode(!1), e._webViewer.SetShowCheckbox(!1), e._stwain.SelectImages([]);
      var r = document.getElementById("bottomMenu" + e._webViewer.myViewer.postfix);
      r && (r.style.border = "0", r.style.display = "none");
      var t = document.getElementById("btnCapture" + e._webViewer.myViewer.postfix);
      t && (t.style.display = "", e._webViewer.GetHowManyImagesInBuffer() == 0 ? e._webViewer.SetBackground(Cc) : e._webViewer.SetBackground(ks)), e._webViewer.SetViewMode(2, 2);
    } }, { key: "onAllSelectionFunc", value: function() {
      this._stwain.SelectAllImages(), this.setSelectAllButtonEnable(!1);
    } }, { key: "onCancelAllSelectionFunc", value: function() {
      this._stwain.SelectImages([]), this.setSelectAllButtonEnable(!0);
    } }, { key: "setSelectAllButtonEnable", value: function(e) {
      var r = document.getElementById("cancelAllSelect" + this._webViewer.GetIdPostfix()), t = document.getElementById("selectAll" + this._webViewer.GetIdPostfix());
      t && r && (e ? (t.style.display = "", r.style.display = "none") : (t.style.display = "none", r.style.display = ""));
    } }, { key: "onSaveFunc", value: function() {
      var e = this;
      e._stwain.SelectedImagesIndices.length > 0 && l.Lib.isFunction(e._template.onSaveFunc) && e._template.onSaveFunc();
    } }, { key: "onUploadFunc", value: function() {
      var e = this;
      e._stwain.SelectedImagesIndices.length > 0 && l.Lib.isFunction(e._template.onUploadFunc) && e._template.onUploadFunc();
    } }, { key: "onRemoveSelectedFunc", value: function() {
      this._stwain.SelectedImagesIndices.length > 0 && this._template.onRemoveSelectedFunc();
    } }, { key: "getCustomElement", value: function() {
      return this.customElement;
    } }]), o;
  }();
  n.UI.DocumentTemplate = cd;
  var ld = function() {
    function o(e, r, t) {
      Gn(this, o);
      var i = this;
      i._webViewer = e, i._ImgManager = r, i._documentTemplate = new cd(e, r, i, t);
    }
    return zn(o, [{ key: "getCustomElement", value: function() {
      return this._documentTemplate.getCustomElement();
    } }, { key: "onExitFunc", value: function() {
      this._webViewer.hide();
    } }, { key: "onAddDocumentFunc", value: function() {
      var e = this;
      e._documentTemplate._documentConfiguration ? e._webViewer.showVideoInner(e._documentTemplate._documentConfiguration) : e._webViewer._documentScanConfiguration == "" ? e._documentTemplate.bFullScreen == 0 ? (e._documentTemplate.newContainer.style.width = e._webViewer.GetWidth() + "px", e._documentTemplate.newContainer.style.height = e._webViewer.GetHeight() + "px", e._webViewer.showVideoInner({ element: e._documentTemplate.newContainer })) : e._webViewer.showVideoInner() : e._webViewer.showVideoInner(e._webViewer._documentScanConfiguration);
    } }, { key: "onRemoveSelectedFunc", value: function() {
      this._ImgManager._stwain.SelectedImagesIndices.length > 0 && this._ImgManager._stwain.RemoveAllSelectedImages();
    } }]), o;
  }();
  function dd(o) {
    if (o != null) {
      var e = o;
      if (n.isString(e) && (e = e.toLowerCase()), o === "hidden" || o === !1)
        return !1;
    }
    return !0;
  }
  n.UI.Template = ld;
  var hd = function() {
    function o(e, r, t) {
      Gn(this, o), ar(this, "bShowDocumentEdit", !1);
      var i = this;
      i._webViewer = e, i._stwain = e._stwain, i._webViewer.mydocEditManager || i._webViewer.createDocumentEditManager(), i._mydocEditManager = e.mydocEditManager, i._webViewer.notBindCameraForDocumentEditManager() && i._webViewer.bindCameraForDocumentEditManager();
      var a = i._webViewer.GetCurrentFileName();
      a.length == 0 && (i._webViewer.CreateFile(Ni), i._webViewer.OpenFile(Ni), a = Ni), t.fileName = a, t.viewerUid = i._webViewer.myViewer.uid, i.myDocumentEditor = i._mydocEditManager.createEditPage(r, t), i.bShowDocumentEdit = dd(t.visibility) && dd(t.documentEditorSettings.visibility), i.myDocumentEditor || n.Errors.WebviewerError(i._webViewer._stwain, i._webViewer.mydocEditManager.Error.errorMessage, i._webViewer.mydocEditManager.Error.errorCode), i.bDispose = !1;
    }
    return zn(o, [{ key: "dispose", value: function() {
      var e = this, r = !1;
      return e.bShowDocumentEdit = !1, e.myDocumentEditor && e.myDocumentEditor.hide(), e._mydocEditManager ? e.myDocumentEditor.isDestroyed ? (n.Errors.DocumentEditorDispose(e._webViewer._stwain), e.myDocumentEditor = void 0, e._webViewer._documentEditor = void 0, e._webViewer._documentEditorInner = void 0, e._mydocEditManager = null, e._stwain = null, e.bDispose = !0, !1) : ((r = e._mydocEditManager.removeEditPage(e.myDocumentEditor)) && (e.myDocumentEditor = void 0, e._webViewer._documentEditor = void 0, e._webViewer._documentEditorInner = void 0, e._mydocEditManager = null, e._stwain = null, e.bDispose = !0), r) : (e.bDispose ? n.Errors.DocumentEditorDispose(e._webViewer._stwain) : n.Errors.DocumentEditorNotExist(e._webViewer._stwain), !1);
    } }, { key: "show", value: function() {
      var e = this;
      return e.myDocumentEditor ? e.myDocumentEditor.isDestroyed ? (n.Errors.DocumentEditorDispose(e._webViewer._stwain), !1) : (e.bShowDocumentEdit || e.myDocumentEditor.show(), e.bShowDocumentEdit = !0, !0) : (e.bDispose ? n.Errors.DocumentEditorDispose(e._webViewer._stwain) : n.Errors.DocumentEditorNotExist(e._webViewer._stwain), !1);
    } }, { key: "hide", value: function() {
      var e = this;
      return e.bShowDocumentEdit = !1, e.myDocumentEditor ? e.myDocumentEditor.isDestroyed ? (n.Errors.DocumentEditorDispose(e._webViewer._stwain), !1) : (e.myDocumentEditor.hide(), !0) : (e.bDispose ? n.Errors.DocumentEditorDispose(e._webViewer._stwain) : n.Errors.DocumentEditorNotExist(e._webViewer._stwain), !1);
    } }, { key: "syncFile", value: function(e) {
      this._mydocEditManager.syncFile(e);
    } }]), o;
  }();
  n.UI.DocumentEditorInner = hd;
  var fd = function() {
    function o(e, r, t) {
      Gn(this, o), this._documentEditorInner = new hd(e, r, t), this.myDocumentEditor = this._documentEditorInner.myDocumentEditor;
    }
    return zn(o, [{ key: "show", value: function() {
      return this._documentEditorInner.show();
    } }, { key: "hide", value: function() {
      return this._documentEditorInner.hide();
    } }, { key: "dispose", value: function() {
      return this._documentEditorInner.dispose();
    } }, { key: "syncFile", value: function(e) {
      return this._documentEditorInner.syncFile(e);
    } }]), o;
  }();
  n.UI.DocumentEditor = fd;
  var Lu = document, Fu = n.win;
  l.DWT;
  var gd, md, qt = l.Lib.product.CustomizableDisplayInfo.buttons, wo = l.Lib.product.CustomizableDisplayInfo.dialogText, Ec = ca, jr = { isFunction: function(o) {
    return o && typeof o == "function";
  }, addClass: function(o, e) {
    var r = n.one(o);
    r && r.length > 0 && r.addClass(e);
  }, removeClass: function(o, e) {
    var r = n.one(o);
    r && r.length > 0 && r.removeClass(e);
  }, output: function(o, e) {
    l.DWT.Debug && n.log(e);
  }, getTop: function(o) {
    var e = o.offsetTop;
    return o.offsetParent != null && (e += jr.getTop(o.offsetParent)), e;
  }, getLeft: function(o) {
    var e = o.offsetLeft;
    return o.offsetParent != null && (e += jr.getLeft(o.offsetParent)), e;
  } };
  n._safePromptCustomMsg(function() {
    qt = l.Lib.product.CustomizableDisplayInfo.buttons, wo = l.Lib.product.CustomizableDisplayInfo.dialogText, gd = { toolbars: { bottomMenu: !1, header: !1, topMenu: !0, asideMenu: !1 }, groups: { viewMenu: { visibility: !1 }, myGroup: { visibility: !0, location: "topMenu", sequence: 1 } }, buttonResize: { ifResize: !0, maxSize: 22, minSize: 16 }, buttons: { loadImage: { visibility: !1 }, readDirection: { visibility: !1 }, panelChange: { visibility: !1 }, previousImage: { visibility: !0, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-preImage", sequence: 1, onButtonClick: "OnPreviousImage" }, nextImage: { visibility: !0, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-nextImage", sequence: 2, onButtonClick: "OnNextImage" }, blank1: { visibility: !0, location: "myGroup", sequence: 3 }, acquire: { visibility: qt.visibility.scan == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-acquire", sequence: 4, onButtonClick: "OnAcquire" }, loadImages: { visibility: qt.visibility.load == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-load", sequence: 5, onButtonClick: "OnLoadImage" }, print: { visibility: qt.visibility.print == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-printImage", sequence: 6, onButtonClick: "OnPrint" }, blank2: { visibility: !!(qt.visibility.scan || qt.visibility.load || qt.visibility.print), location: "myGroup", sequence: 7 }, removeAll: { visibility: qt.visibility.removeall == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-removeall", sequence: 8, onButtonClick: "OnRemoveAll" }, remove: { visibility: qt.visibility.removeselected == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-removeImage", sequence: 9, onButtonClick: "OnRemove" }, blank3: { visibility: !(!qt.visibility.removeall && !qt.visibility.removeselected), location: "myGroup", sequence: 10 }, rotateLeft: { visibility: qt.visibility.rotateleft == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-rotateLeftImage", sequence: 11, onButtonClick: "OnRotateLeft" }, rotate: { visibility: qt.visibility.rotate == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-rotate", sequence: 12, onButtonClick: "OnRotate" }, rotateRight: { visibility: qt.visibility.rotateright == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-rotateRightImage", sequence: 13, onButtonClick: "OnRotateRight" }, deskew: { visibility: qt.visibility.deskew == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-deskew", sequence: 14, onButtonClick: "OnDeskew" }, blank4: { visibility: !!(qt.visibility.rotateleft || qt.visibility.rotate || qt.visibility.rotateright || qt.visibility.deskew), location: "myGroup", sequence: 15 }, crop: { visibility: qt.visibility.crop == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-cropImage-grey", sequence: 16, onButtonClick: "OnCrop" }, cut: { visibility: qt.visibility.cut == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-erase-grey", sequence: 17, onButtonClick: "OnErase" }, changeImageSize: { visibility: qt.visibility.changeimagesize == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-changeImageSize", sequence: 18, onButtonClick: "OnChangeImageSize" }, flip: { visibility: qt.visibility.flip == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-flipImage", sequence: 19, onButtonClick: "OnFlip" }, mirror: { visibility: qt.visibility.mirror == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-mirrorImage", sequence: 20, onButtonClick: "OnMirror" }, blank5: { visibility: !!(qt.visibility.crop || qt.visibility.cut || qt.visibility.changeimagesize || qt.visibility.flip || qt.visibility.mirror), location: "myGroup", sequence: 21 }, zoomin: { visibility: qt.visibility.zoomin == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-zoomin", sequence: 22, onButtonClick: "OnZoomin" }, originalsize: { visibility: qt.visibility.originalsize == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-originalsize", sequence: 23, onButtonClick: "OnOriginalsize" }, zoomout: { visibility: qt.visibility.zoomout == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-zoomout", sequence: 24, onButtonClick: "OnZoomout" }, blank6: { visibility: !!(qt.visibility.zoomin || qt.visibility.originalsize || qt.visibility.zoomout || qt.visibility.stretch), location: "myGroup", sequence: 26 }, fitPage: { visibility: qt.visibility.fit == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-fullWebType", sequence: 27, onButtonClick: "OnFitPage" }, fitWidth: { visibility: qt.visibility.fitw == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-fitWidthType", sequence: 28, onButtonClick: "OnFitWidth" }, fitHeight: { visibility: qt.visibility.fith == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-fitHeightType", sequence: 29, onButtonClick: "OnFitHeight" }, blank7: { visibility: !!(qt.visibility.fit || qt.visibility.fitw || qt.visibility.fith), location: "myGroup", sequence: 30 }, hand: { visibility: qt.visibility.hand == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-hand", sequence: 31, onButtonClick: "OnHand" }, select: { visibility: qt.visibility.rectselect == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-select", sequence: 32, onButtonClick: "OnSelect" }, clicktozoomin: { visibility: qt.visibility.zoom == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-clicktozoomin", sequence: 33, onButtonClick: "OnClicktozoomin" }, blank8: { visibility: !!(qt.visibility.hand || qt.visibility.rectselect || qt.visibility.zoom), location: "myGroup", sequence: 34 }, restore: { visibility: qt.visibility.restore == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-restore", sequence: 35, onButtonClick: "OnRestore" }, save: { visibility: qt.visibility.save == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-saveImage", sequence: 36, onButtonClick: "OnSave" }, close: { visibility: qt.visibility.close == 1, location: "topMenuRight", iconClass: "d-icon-font ds-dwt-ui-icon-close", sequence: 1, onButtonClick: "OnClose" } }, thumbnail: { visibility: !1, showThumbnailControl: !1, hoverBackgroundColor: "rgb(239, 246, 253)", hoverBorderColor: "rgb(238, 238, 238)", imageBackgroundColor: "transparent", imageBorderColor: "rgb(238, 238, 238)", placeholderBackgroundColor: "rgb(251, 236, 136)", selectedBorderColor: "rgb(125,162,206)" }, tipsConfig: { previousImage: qt.titles.previous, nextImage: qt.titles.next, acquire: qt.titles.scan, loadImages: qt.titles.load, print: qt.titles.print, removeAll: qt.titles.removeall, remove: qt.titles.removeselected, rotateLeft: qt.titles.rotateleft, rotate: qt.titles.rotate, rotateRight: qt.titles.rotateright, deskew: qt.titles.deskew, crop: qt.titles.crop, cut: qt.titles.cut, changeImageSize: qt.titles.changeimagesize, flip: qt.titles.flip, mirror: qt.titles.mirror, zoomin: qt.titles.zoomin, originalsize: qt.titles.originalsize, zoomout: qt.titles.zoomout, stretch: qt.titles.stretch, fitPage: qt.titles.fit, fitWidth: qt.titles.fitw, fitHeight: qt.titles.fith, hand: qt.titles.hand, select: qt.titles.rectselect, clicktozoomin: qt.titles.zoom, restore: qt.titles.restore, save: qt.titles.save, close: qt.titles.close }, canvasConfig: { selectedPageBackground: cs, selectedPageBorder: "", hoverPageBackground: cs, canvasBorder: "", canvasBackground: "#434246" }, outerBorder: "", topMenuBorder: "" }, md = { toolbars: { header: !0, bottomMenu: !0, topMenu: !0, asideMenu: !1 }, groups: { viewMenu: { visibility: !1 }, global: { visibility: !1 }, viewChange: { visibility: !1 }, viewerCorner: { visibility: !1 }, pager: { visibility: !1 }, myGroup: { visibility: !0, location: "topMenu", sequence: 1 }, myGroup2: { visibility: !0, location: "bottomMenu", sequence: 1 }, myGroup3: { visibility: !0, location: "header", sequence: 1 }, myGroup4: { visibility: !0, location: "bottomMenu", sequence: 2 } }, buttonResize: { ifResize: !0, maxSize: 32, minSize: 26 }, buttons: { loadImage: { visibility: !1 }, readDirection: { visibility: !1 }, panelChange: { visibility: !1 }, print: { visibility: !1 }, loadImages: { visibility: qt.visibility.load == 1, location: "myGroup3", iconClass: "d-icon-font ds-dwt-ui-icon-load", sequence: 1, onButtonClick: "OnLoadImage" }, close: { visibility: qt.visibility.close == 1, location: "myGroup3", iconClass: "d-icon-font ds-dwt-ui-icon-close ds-dwt-ui-icon-close-right", sequence: 2, onButtonClick: "OnClose" }, rotateLeft: { visibility: qt.visibility.rotateleft == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-rotateLeftImage", sequence: 1, onButtonClick: "OnRotateLeft" }, rotateRight: { visibility: qt.visibility.rotateright == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-rotateRightImage", sequence: 2, onButtonClick: "OnRotateRight" }, flip: { visibility: qt.visibility.flip == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-flipImage", sequence: 3, onButtonClick: "OnFlip" }, mirror: { visibility: qt.visibility.mirror == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-mirrorImage", sequence: 4, onButtonClick: "OnMirror" }, crop: { visibility: qt.visibility.crop == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-cropImage-grey", sequence: 5, onButtonClick: "OnCrop" }, cut: { visibility: qt.visibility.cut == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-erase-grey", sequence: 6, onButtonClick: "OnErase" }, hand: { visibility: qt.visibility.hand == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-hand", sequence: 7, onButtonClick: "OnHand" }, select: { visibility: qt.visibility.rectselect == 1, location: "myGroup", iconClass: "d-icon-font ds-dwt-ui-icon-select", sequence: 8, onButtonClick: "OnSelect" }, firstPage: { visibility: !0, location: "myGroup2", iconClass: "ds-dvs-ui-pageStart", sequence: 1, onButtonClick: "OnFirstImage" }, previousPage: { visibility: !0, location: "myGroup2", iconClass: "ds-dvs-ui-pagePre", sequence: 2, onButtonClick: "OnPreviousImage" }, pagination: { visibility: !0, location: "myGroup2", sequence: 3 }, nextPage: { visibility: !0, location: "myGroup2", iconClass: "ds-dvs-ui-pageNext", sequence: 4, onButtonClick: "OnNextImage" }, lastPage: { visibility: !0, location: "myGroup2", iconClass: "ds-dvs-ui-pageEnd", sequence: 5, onButtonClick: "OnLastImage" }, removeAll: { visibility: qt.visibility.removeall == 1, location: "myGroup4", iconClass: "d-icon-font ds-dwt-ui-icon-removeall", sequence: 7, onButtonClick: "OnRemoveAll" }, remove: { visibility: qt.visibility.removeselected == 1, location: "myGroup4", iconClass: "d-icon-font ds-dwt-ui-icon-removeImage", sequence: 8, onButtonClick: "OnRemove" }, restore: { visibility: qt.visibility.restore == 1, location: "myGroup4", iconClass: "d-icon-font ds-dwt-ui-icon-restore", sequence: 10, onButtonClick: "OnRestore" }, save: { visibility: qt.visibility.save == 1, location: "myGroup4", iconClass: "d-icon-font ds-dwt-ui-icon-saveImage", sequence: 11, onButtonClick: "OnSave" } }, thumbnail: { visibility: !1, showThumbnailControl: !1, hoverBackgroundColor: "rgb(239, 246, 253)", hoverBorderColor: "rgb(238, 238, 238)", imageBackgroundColor: "transparent", imageBorderColor: "rgb(238, 238, 238)", placeholderBackgroundColor: "rgb(251, 236, 136)", selectedBorderColor: "rgb(125,162,206)", pageBorderColor: "rgb(204, 204, 204)" }, tipsConfig: { previousImage: qt.titles.previous, nextImage: qt.titles.next, acquire: qt.titles.scan, loadImages: qt.titles.load, print: qt.titles.print, removeAll: qt.titles.removeall, remove: qt.titles.removeselected, rotateLeft: qt.titles.rotateleft, rotate: qt.titles.rotate, rotateRight: qt.titles.rotateright, deskew: qt.titles.deskew, crop: qt.titles.crop, cut: qt.titles.cut, changeImageSize: qt.titles.changeimagesize, flip: qt.titles.flip, mirror: qt.titles.mirror, zoomin: qt.titles.zoomin, originalsize: qt.titles.originalsize, zoomout: qt.titles.zoomout, stretch: qt.titles.stretch, fitPage: qt.titles.fit, fitWidth: qt.titles.fitw, fitHeight: qt.titles.fith, hand: qt.titles.hand, select: qt.titles.rectselect, clicktozoomin: qt.titles.zoom, restore: qt.titles.restore, save: qt.titles.save, close: qt.titles.close }, canvasConfig: { selectedPageBackground: cs, selectedPageBorder: "", hoverPageBackground: cs, canvasBorder: "", canvasBackground: "#434246" }, outerBorder: "", topMenuBorder: "" };
  });
  var pd = function() {
    function o(e, r) {
      Gn(this, o);
      var t = this;
      t._webViewer = e, t.mydvs = e.mydvs, t._stwain = e._stwain, t.bShowImageEditForFullScreen = !1, t.bCouldBeTimeConsuming = !1, t.bShowImageEdit = !1, t.promptToSaveChange = !0;
      var i = gd;
      t.bMobile = !1;
      var a = !1;
      t._stwain._isPC() || (t.bPadViewer || (i = md, a = !0), t.bMobile = !0), i = t.updateWebviewerConfig(i, r, a), t.myImageEditor = t.mydvs.ViewControl.createViewer({ container: "", displayMode: "single", uiConfig: i, scrollerConfig: {} }, t._webViewer.myViewer.uid), t.myImageEditor.maxZoom = 50, t._webViewer.mydvs.Error.errorCode != 0 && n.Errors.WebviewerError(t._webViewer._stwain, t._webViewer.mydvs.Error.errorMessage, t._webViewer.mydvs.Error.errorCode), t.bDispose = !1, t._BindImageEditorEvents(), t._bindView(), t._currentIndex = t._webViewer.GetCurrentIndex();
    }
    return zn(o, [{ key: "updateWebviewerConfig", value: function(e, r, t) {
      var i = e;
      return r && (this.editorSettings = r, n.isUndefined(r.buttons) || (n.isUndefined(r.buttons.titles) || (n.isUndefined(r.buttons.titles.previous) || (i.tipsConfig.previousImage = r.buttons.titles.previous), n.isUndefined(r.buttons.titles.next) || (i.tipsConfig.nextImage = r.buttons.titles.next), n.isUndefined(r.buttons.titles.print) || (i.tipsConfig.print = r.buttons.titles.print), n.isUndefined(r.buttons.titles.scan) || (i.tipsConfig.acquire = r.buttons.titles.scan), n.isUndefined(r.buttons.titles.load) || (i.tipsConfig.loadImages = r.buttons.titles.load), n.isUndefined(r.buttons.titles.rotateleft) || (i.tipsConfig.rotateLeft = r.buttons.titles.rotateleft), n.isUndefined(r.buttons.titles.rotate) || (i.tipsConfig.rotate = r.buttons.titles.rotate), n.isUndefined(r.buttons.titles.rotateright) || (i.tipsConfig.rotateRight = r.buttons.titles.rotateright), n.isUndefined(r.buttons.titles.deskew) || (i.tipsConfig.deskew = r.buttons.titles.deskew), n.isUndefined(r.buttons.titles.crop) || (i.tipsConfig.crop = r.buttons.titles.crop), n.isUndefined(r.buttons.titles.cut) || (i.tipsConfig.cut = r.buttons.titles.cut), n.isUndefined(r.buttons.titles.changeimagesize) || (i.tipsConfig.changeImageSize = r.buttons.titles.changeimagesize), n.isUndefined(r.buttons.titles.flip) || (i.tipsConfig.flip = r.buttons.titles.flip), n.isUndefined(r.buttons.titles.mirror) || (i.tipsConfig.mirror = r.buttons.titles.mirror), n.isUndefined(r.buttons.titles.zoomin) || (i.tipsConfig.zoomin = r.buttons.titles.zoomin), n.isUndefined(r.buttons.titles.originalsize) || (i.tipsConfig.originalsize = r.buttons.titles.originalsize), n.isUndefined(r.buttons.titles.zoomout) || (i.tipsConfig.zoomout = r.buttons.titles.zoomout), n.isUndefined(r.buttons.titles.stretch) || (i.tipsConfig.stretch = r.buttons.titles.stretch), n.isUndefined(r.buttons.titles.fit) || (i.tipsConfig.fitPage = r.buttons.titles.fit), n.isUndefined(r.buttons.titles.fitw) || (i.tipsConfig.fitWidth = r.buttons.titles.fitw), n.isUndefined(r.buttons.titles.fith) || (i.tipsConfig.fitHeight = r.buttons.titles.fith), n.isUndefined(r.buttons.titles.hand) || (i.tipsConfig.hand = r.buttons.titles.hand), n.isUndefined(r.buttons.titles.rectselect) || (i.tipsConfig.select = r.buttons.titles.rectselect), n.isUndefined(r.buttons.titles.zoom) || (i.tipsConfig.clicktozoomin = r.buttons.titles.zoom), n.isUndefined(r.buttons.titles.restore) || (i.tipsConfig.restore = r.buttons.titles.restore), n.isUndefined(r.buttons.titles.save) || (i.tipsConfig.save = r.buttons.titles.save), n.isUndefined(r.buttons.titles.close) || (i.tipsConfig.close = r.buttons.titles.close), n.isUndefined(r.buttons.titles.removeall) || (i.tipsConfig.removeAll = r.buttons.titles.removeall), n.isUndefined(r.buttons.titles.removeselected) || (i.tipsConfig.remove = r.buttons.titles.removeselected)), n.isUndefined(r.buttons.visibility) || (t ? (n.isUndefined(r.buttons.visibility.load) ? i.buttons.loadImages.visibility = !0 : i.buttons.loadImages.visibility = r.buttons.visibility.load == 1, n.isUndefined(r.buttons.visibility.close) ? i.buttons.close.visibility = !0 : i.buttons.close.visibility = r.buttons.visibility.close == 1, n.isUndefined(r.buttons.visibility.rotateleft) ? i.buttons.rotateLeft.visibility = !0 : i.buttons.rotateLeft.visibility = r.buttons.visibility.rotateleft == 1, n.isUndefined(r.buttons.visibility.rotateright) ? i.buttons.rotateRight.visibility = !0 : i.buttons.rotateRight.visibility = r.buttons.visibility.rotateright == 1, n.isUndefined(r.buttons.visibility.flip) ? i.buttons.flip.visibility = !0 : i.buttons.flip.visibility = r.buttons.visibility.flip == 1, n.isUndefined(r.buttons.visibility.mirror) ? i.buttons.mirror.visibility = !0 : i.buttons.mirror.visibility = r.buttons.visibility.mirror == 1, n.isUndefined(r.buttons.visibility.crop) ? i.buttons.crop.visibility = !0 : i.buttons.crop.visibility = r.buttons.visibility.crop == 1, n.isUndefined(r.buttons.visibility.cut) ? i.buttons.cut.visibility = !0 : i.buttons.cut.visibility = r.buttons.visibility.cut == 1, n.isUndefined(r.buttons.visibility.hand) ? i.buttons.hand.visibility = !0 : i.buttons.hand.visibility = r.buttons.visibility.hand == 1, n.isUndefined(r.buttons.visibility.rectselect) ? i.buttons.select.visibility = !0 : i.buttons.select.visibility = r.buttons.visibility.rectselect == 1, n.isUndefined(r.buttons.visibility.removeall) ? i.buttons.removeAll.visibility = !0 : i.buttons.removeAll.visibility = r.buttons.visibility.removeall == 1, n.isUndefined(r.buttons.visibility.removeselected) ? i.buttons.remove.visibility = !0 : i.buttons.remove.visibility = r.buttons.visibility.removeselected == 1, n.isUndefined(r.buttons.visibility.restore) ? i.buttons.restore.visibility = !0 : i.buttons.restore.visibility = r.buttons.visibility.restore == 1, n.isUndefined(r.buttons.visibility.save) ? i.buttons.save.visibility = !0 : i.buttons.save.visibility = r.buttons.visibility.save == 1) : (n.isUndefined(r.buttons.visibility.scan) ? i.buttons.acquire.visibility = !0 : i.buttons.acquire.visibility = r.buttons.visibility.scan == 1, n.isUndefined(r.buttons.visibility.load) ? i.buttons.loadImages.visibility = !0 : i.buttons.loadImages.visibility = r.buttons.visibility.load == 1, n.isUndefined(r.buttons.visibility.print) ? i.buttons.print.visibility = !0 : i.buttons.print.visibility = r.buttons.visibility.print == 1, i.buttons.blank2.visibility = !!(i.buttons.acquire.visibility || i.buttons.loadImages.visibility || i.buttons.print.visibility), n.isUndefined(r.buttons.visibility.removeall) ? i.buttons.removeAll.visibility = !0 : i.buttons.removeAll.visibility = r.buttons.visibility.removeall == 1, n.isUndefined(r.buttons.visibility.removeselected) ? i.buttons.remove.visibility = !0 : i.buttons.remove.visibility = r.buttons.visibility.removeselected == 1, i.buttons.blank3.visibility = !(!i.buttons.removeAll.visibility && !i.buttons.remove.visibility), n.isUndefined(r.buttons.visibility.rotateleft) ? i.buttons.rotateLeft.visibility = !0 : i.buttons.rotateLeft.visibility = r.buttons.visibility.rotateleft == 1, n.isUndefined(r.buttons.visibility.rotate) ? i.buttons.rotate.visibility = !0 : i.buttons.rotate.visibility = r.buttons.visibility.rotate == 1, n.isUndefined(r.buttons.visibility.rotateright) ? i.buttons.rotateRight.visibility = !0 : i.buttons.rotateRight.visibility = r.buttons.visibility.rotateright == 1, n.isUndefined(r.buttons.visibility.deskew) ? i.buttons.deskew.visibility = !0 : i.buttons.deskew.visibility = r.buttons.visibility.deskew == 1, i.buttons.blank4.visibility = !!(i.buttons.rotateLeft.visibility || i.buttons.rotate.visibility || i.buttons.rotateRight.visibility || i.buttons.deskew.visibility), n.isUndefined(r.buttons.visibility.crop) ? i.buttons.crop.visibility = !0 : i.buttons.crop.visibility = r.buttons.visibility.crop == 1, n.isUndefined(r.buttons.visibility.cut) ? i.buttons.cut.visibility = !0 : i.buttons.cut.visibility = r.buttons.visibility.cut == 1, n.isUndefined(r.buttons.visibility.changeimagesize) ? i.buttons.changeImageSize.visibility = !0 : i.buttons.changeImageSize.visibility = r.buttons.visibility.changeimagesize == 1, n.isUndefined(r.buttons.visibility.flip) ? i.buttons.flip.visibility = !0 : i.buttons.flip.visibility = r.buttons.visibility.flip == 1, n.isUndefined(r.buttons.visibility.mirror) ? i.buttons.mirror.visibility = !0 : i.buttons.mirror.visibility = r.buttons.visibility.mirror == 1, i.buttons.blank5.visibility = !!(i.buttons.crop.visibility || i.buttons.cut.visibility || i.buttons.changeImageSize.visibility || i.buttons.flip.visibility || i.buttons.mirror.visibility), n.isUndefined(r.buttons.visibility.zoomin) ? i.buttons.zoomin.visibility = !0 : i.buttons.zoomin.visibility = r.buttons.visibility.zoomin == 1, n.isUndefined(r.buttons.visibility.originalsize) ? i.buttons.originalsize.visibility = !0 : i.buttons.originalsize.visibility = r.buttons.visibility.originalsize == 1, n.isUndefined(r.buttons.visibility.zoomout) ? i.buttons.zoomout.visibility = !0 : i.buttons.zoomout.visibility = r.buttons.visibility.zoomout == 1, i.buttons.blank6.visibility = !!(i.buttons.zoomin.visibility || i.buttons.originalsize.visibility || i.buttons.zoomout.visibility), n.isUndefined(r.buttons.visibility.fit) ? i.buttons.fitPage.visibility = !0 : i.buttons.fitPage.visibility = r.buttons.visibility.fit == 1, n.isUndefined(r.buttons.visibility.fitw) ? i.buttons.fitWidth.visibility = !0 : i.buttons.fitWidth.visibility = r.buttons.visibility.fitw == 1, n.isUndefined(r.buttons.visibility.fith) ? i.buttons.fitHeight.visibility = !0 : i.buttons.fitHeight.visibility = r.buttons.visibility.fith == 1, i.buttons.blank7.visibility = !!(i.buttons.fitPage.visibility || i.buttons.fitWidth.visibility || i.buttons.fitHeight.visibility), n.isUndefined(r.buttons.visibility.hand) ? i.buttons.hand.visibility = !0 : i.buttons.hand.visibility = r.buttons.visibility.hand == 1, n.isUndefined(r.buttons.visibility.rectselect) ? i.buttons.select.visibility = !0 : i.buttons.select.visibility = r.buttons.visibility.rectselect == 1, n.isUndefined(r.buttons.visibility.zoom) ? i.buttons.clicktozoomin.visibility = !0 : i.buttons.clicktozoomin.visibility = r.buttons.visibility.zoom == 1, i.buttons.blank7.visibility = !!(i.buttons.hand.visibility || i.buttons.select.visibility || i.buttons.clicktozoomin.visibility), n.isUndefined(r.buttons.visibility.restore) ? i.buttons.restore.visibility = !0 : i.buttons.restore.visibility = r.buttons.visibility.restore == 1, n.isUndefined(r.buttons.visibility.save) ? i.buttons.save.visibility = !0 : i.buttons.save.visibility = r.buttons.visibility.save == 1, n.isUndefined(r.buttons.visibility.close) ? i.buttons.close.visibility = !0 : i.buttons.close.visibility = r.buttons.visibility.close == 1))), n.isUndefined(r.dialogText) || (wo = r.dialogText, l.Lib.product.CustomizableDisplayInfo.dialogText = wo), n.isUndefined(r.promptToSaveChange) || (this.promptToSaveChange = r.promptToSaveChange), n.isUndefined(r.border) || (i.outerBorder = r.border), n.isUndefined(r.topMenuBorder) || (i.topMenuBorder = r.topMenuBorder), n.isUndefined(r.innerBorder) || (i.canvasConfig.canvasBorder = r.innerBorder), n.isUndefined(r.background) || (i.canvasConfig.canvasBackground = r.background)), i;
    } }, { key: "_bindView", value: function() {
      var e = this;
      if (e.bShowImageEdit)
        return !0;
      if (!e.myImageEditor)
        return e.bDispose ? n.Errors.ImageEditorDispose(e._stwain) : n.Errors.ImageEditorNotExist(e._stwain), !1;
      var r = n.one(".dynamsoft-cvs-container");
      if (r && r.getEL() ? (e.cvsContainer = r, e.cvsParentId = r.parent()[0].id, e._stwain && e._stwain.Addon && e._stwain.Addon.Camera && (e.cvsStatus = e._stwain.Addon.Camera.getStatus())) : (e.cvsContainer = "", e.cvsParentId = "", e.cvsStatus = ""), e.bShowImageEdit = !0, e.editorSettings && e.editorSettings.element && e.editorSettings.width && e.editorSettings.height) {
        if (e.UIEditor = e.editorSettings.element, e.bFullScreen = !1, e.myImageEditor.width = e.editorSettings.width, e.myImageEditor.height = e.editorSettings.height, e.SetWidthInner(e.editorSettings.width, !0), e.SetHeightInner(e.editorSettings.height, !0), e.myImageEditor.bindView(e.UIEditor), e.hide(), e.cvsParentId) {
          var t = document.getElementById(e.cvsParentId);
          t && t.appendChild(e.cvsContainer[0]);
        }
      } else {
        var i = Lu.createElement("div");
        Lu.body.appendChild(i), document.body.insertBefore(i, document.body.firstElementChild), e.UIEditor = i, e.bFullScreen = !0, e.UIEditor.className = "D_ImageUIEditor", e.UIEditor.style.width = "100%", e.UIEditor.style.height = "100%", e.UIEditor.style.position = "fixed", e.UIEditor.style.left = "0px", e.UIEditor.style.top = "0px", e.UIEditor.style.zIndex = "9999", e.UIEditor.style.display = "none", e.SetWidthInner("100%", !0), e.SetHeightInner("100%", !0), e.myImageEditor.bindView(e.UIEditor), e.hide(), e.bShowImageEditForFullScreen = !0;
      }
      if (e.updateMode(), e.editorSettings && e.editorSettings.selectionRectAspectRatio ? e.SetSelectionRectAspectRatio(e.editorSettings.selectionRectAspectRatio) : e.SetSelectionRectAspectRatio(0), e.HideEditorButtonForPad(), e.actualSelectedCanvasAreas = [{ left: 0, top: 0, right: 0, bottom: 0 }], e._stwain._isMobileMode()) {
        var a, u = n.one(".ds-dwt-ui-icon-acquire");
        if (u && u.getEL() && (u[0].style.display = "none"), e.dwtMobileFileId = "dwtmobilefile", e.UIEditor && e.UIEditor.nodeName == "DIV")
          a = document.createElement("div"), e.bMobile ? a.innerHTML = "<input multiple accept='image/jpeg,image/png,image/tiff' id ='" + e.dwtMobileFileId + "' type='file' style='display:none' />" : a.innerHTML = "<input multiple accept='image/*,.pdf' id ='" + e.dwtMobileFileId + "' type='file' style='display:none' />", e.UIEditor.appendChild(a);
        else {
          var c = document.getElementById(e.UIEditor);
          a = document.createElement("div"), e.bMobile ? a.innerHTML = "<input id ='" + e.dwtMobileFileId + "' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />" : a.innerHTML = "<input id ='" + e.dwtMobileFileId + "' type='file' accept='image/*,.pdf' style='display:none' />", c.appendChild(a);
        }
        n.get(e.dwtMobileFileId).onchange = function() {
          for (var d = 0; d < this.files.length; d++)
            e._stwain.LoadImageFromBinary(this.files[d]);
          document.getElementById(e.dwtMobileFileId).value = "";
        };
      }
      return e.myImageEditor.off("slideSwitch"), e.myImageEditor.on("slideSwitch", function(d) {
        d == "left" ? e._webViewer.myViewer.previous() : d == "right" && e._webViewer.myViewer.next();
      }), !0;
    } }, { key: "disposeInner", value: function() {
      var e, r = this;
      return (e = r.mydvs.ViewControl.removeViewer(r.myImageEditor)) && (r.UIEditor && r.UIEditor.lastChild && r.UIEditor.removeChild(r.UIEditor.lastChild), r.myImageEditor = void 0, r._webViewer._imageEditor = void 0, r._webViewer._imageEditorInner = void 0, r.mydvs = null, r._stwain = null, r.bDispose = !0), e;
    } }, { key: "dispose", value: function() {
      var e = this;
      if (!e.myImageEditor)
        return e.bDispose ? n.Errors.ImageEditorDispose(e._webViewer._stwain) : n.Errors.ImageEditorNotExist(e._webViewer._stwain), !1;
      e.OnCloseInner(!0);
    } }, { key: "show", value: function() {
      var e = this;
      return e.myImageEditor ? (e.bFullScreen && (e.UIEditor.style.display = "", document.documentElement.scrollLeft = 0, document.documentElement.scrollTop = 0, document.body.style.overflow = "hidden"), e.myImageEditor.showViewer = !0, !0) : (e.bDispose ? n.Errors.ImageEditorDispose(e._webViewer._stwain) : n.Errors.ImageEditorNotExist(e._webViewer._stwain), !1);
    } }, { key: "hide", value: function() {
      var e = this;
      return e.myImageEditor ? (e.myImageEditor.showViewer = !1, e.bFullScreen && (e.UIEditor.style.display = "none"), !0) : (e.bDispose ? n.Errors.ImageEditorDispose(e._webViewer._stwain) : n.Errors.ImageEditorNotExist(e._webViewer._stwain), !1);
    } }, { key: "_BindImageEditorEvents", value: function() {
      var e = this;
      n.each(["OnPreviousImage", "OnNextImage", "OnAcquire", "OnLoadImage", "OnPrint", "OnRemoveAll", "OnRemove", "OnRotateLeft", "OnRotate", "OnRotateRight", "OnDeskew", "OnCrop", "OnErase", "OnChangeImageSize", "OnFlip", "OnMirror", "OnZoomin", "OnOriginalsize", "OnZoomout", "OnFitPage", "OnFitWidth", "OnFitHeight", "OnHand", "OnSelect", "OnClicktozoomin", "OnRestore", "OnSave", "OnClose", "click", "imageClick", "pageAreaSelected", "pageAreaUnselected", "onDrop", "OnFirstImage", "OnLastImage", "pageChange", "bufferChanged", "pageRendered", "wheel"], function(r) {
        e.myImageEditor.on(r, function(t, i) {
          e[r](t, i);
        });
      });
    } }, { key: "HideEditorButtonForPad", value: function() {
      var e = this.myImageEditor, r = this.bPadViewer, t = document.getElementById("rotateBtn" + e.postfix);
      t && (t.style.display = r ? "none" : "");
      var i = document.getElementById("deskewBtn" + e.postfix);
      i && (i.style.display = r ? "none" : "");
      var a = document.getElementById("changeImageSizeBtn" + e.postfix);
      a && (a.style.display = r ? "none" : "");
    } }, { key: "BackImageData", value: function() {
      var e = this;
      if (e._stwain._isMobileMode() && e.bShowImageEdit) {
        var r = e._webViewer.GetCurrentIndex();
        r >= 0 && e._webViewer.GetImageData(e._webViewer.GetUidByIndex(r)).then(function(t) {
          e.BackImageBuffer = t.oriData;
          var i = e._webViewer.GetMetaDataByIndex(r);
          i && (e.BackModelImageControl = {}, e.BackModelImageControl.width = i.width, e.BackModelImageControl.height = i.height, e.BackModelImageControl.bitDepth = i.bitDepth, e.BackModelImageControl.resolutionX = i.resolutionX, e.BackModelImageControl.resolutionY = i.resolutionY);
        });
      }
    } }, { key: "CloseShowImageEditor", value: function() {
      var e = this;
      if (!e.myImageEditor)
        return e.bDispose ? n.Errors.ImageEditorDispose(e._stwain) : n.Errors.ImageEditorNotExist(e._stwain), !1;
      if (e.cvsContainer && e.cvsContainer != "" && e.cvsParentId && e.cvsParentId != "") {
        var r = document.getElementById(e.cvsParentId);
        r && r.appendChild(e.cvsContainer[0]), e.cvsStatus == "playing" && e._stwain && e._stwain.Addon && e._stwain.Addon.Camera && e._stwain.Addon.Camera.resume();
      }
      return !0;
    } }, { key: "UpdateInfo", value: function() {
      l.Lib.hideMask();
    } }, { key: "clearSelectedAreas", value: function() {
      var e, r = this;
      return r._webViewer.GetHowManyImagesInBuffer() <= 0 || r._webViewer.GetCurrentIndex() < 0 || ((e = r.myImageEditor.clearSelectedBoxes()) || n.Errors.WebviewerError(r._stwain, r.mydvs.Error.errorMessage, r.mydvs.Error.errorCode), e);
    } }, { key: "SetSelectionRectAspectRatio", value: function(e) {
      return this.myImageEditor.selectionBoxAspectRatio = e, !0;
    } }, { key: "ZoomIn", value: function() {
      var e, r = this;
      return (e = r.myImageEditor.zoomIn()) || n.Errors.WebviewerError(r._stwain, r.mydvs.Error.errorMessage, r.mydvs.Error.errorCode), e;
    } }, { key: "ZoomOut", value: function() {
      var e, r = this;
      return (e = r.myImageEditor.zoomOut()) || n.Errors.WebviewerError(r._stwain, r.mydvs.Error.errorMessage, r.mydvs.Error.errorCode), e;
    } }, { key: "SetZoom", value: function(e, r, t) {
      var i = this, a = !1;
      return (a = r & t ? i.myImageEditor.zoomTo(e, r, t) : i.myImageEditor.zoomTo(e)) || n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), a;
    } }, { key: "GetZoom", value: function() {
      return this.myImageEditor.zoom;
    } }, { key: "SetFitType", value: function(e) {
      var r = "window";
      return n.isUndefined(e) || e != "width" && e != "height" || (r = e), this.myImageEditor.fitType = r, !0;
    } }, { key: "SetMouseShape", value: function(e) {
      var r;
      switch (e) {
        case fe:
          r = "default";
          break;
        case Me:
          r = "pointer";
          break;
        case Z:
          r = "crosshair";
          break;
        case Ue:
          r = "zoom-in";
          break;
        default:
          r = "crosshair";
      }
      return this.SetCursor(r), !0;
    } }, { key: "SetCursor", value: function(e) {
      var r = this;
      if (!r._webViewer._NouiNotSupport("cursor"))
        return !1;
      var t = "default";
      switch (e) {
        case "default":
          t = "default", r.SetOperationMode(1);
          break;
        case "pointer":
          t = "pointer", r.SetOperationMode(0);
          break;
        case "crosshair":
          t = "crosshair", r.SetOperationMode(1);
          break;
        case "zoom-in":
          t = "zoom-in", r.SetOperationMode(2);
          break;
        default:
          t = "crosshair";
      }
      return r.myImageEditor.canvasMouseShape = t, !0;
    } }, { key: "SetSelectionImageBorderColor", value: function(e) {
      return this.myImageEditor.selectedPageBorderColor = e, !0;
    } }, { key: "SetBackgroundColor", value: function(e) {
      return this.myImageEditor.imageBackgroundColor = e, !0;
    } }, { key: "SetWidth", value: function(e) {
      return this.myImageEditor.width = e, !0;
    } }, { key: "SetWidthInner", value: function(e, r) {
      var t = this;
      if (r)
        t.myImageEditor.width = e;
      else if (n.isString(e) && e.indexOf("%") >= 0) {
        var i = t._stwain._containerElement;
        t.myImageEditor.width = Math.floor(n.css(i, "width") * Math.floor(e) / 100);
      } else
        t.myImageEditor.width = e;
      return !0;
    } }, { key: "SetHeight", value: function(e) {
      return this.myImageEditor.height = e, !0;
    } }, { key: "SetHeightInner", value: function(e, r) {
      var t = this;
      if (r)
        t.myImageEditor.height = e;
      else if (n.isString(e) && e.indexOf("%") >= 0) {
        var i = t._stwain._containerElement;
        t.myImageEditor.height = L(n.css(i, "height") * L(e) / 100);
      } else
        t.myImageEditor.height = e;
      return !0;
    } }, { key: "SetIfAutoScroll", value: function(e) {
      return this.myImageEditor.showLatestPage = e, !0;
    } }, { key: "ChangeButtonClass", value: function(e, r) {
      var t;
      return this.myImageEditor && (t = this.myImageEditor.setButtonClass(e, r)), t;
    } }, { key: "SetOperationMode", value: function(e) {
      this.myImageEditor.operationMode = e;
    } }, { key: "UnbindContent", value: function(e) {
      this.myImageEditor.unbindContent();
    } }, { key: "SetSelectedPageBackground", value: function(e) {
      this.myImageEditor.selectedPageBackground = e;
    } }, { key: "GetRealTimeMetadataByIndex", value: function(e) {
      var r = this;
      if (!(e < 0 || e >= r._webViewer.GetHowManyImagesInBuffer()))
        return r.myImageEditor.getRealTimeMetadataByIndex(e);
      n.Errors.IndexOutOfRange(r._stwain);
    } }, { key: "DVSRotate", value: function(e) {
      var r, t = this;
      return t.myImageEditor.rotateMode = 0, (r = t.myImageEditor.rotate(e)) || n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode), r;
    } }, { key: "DVSFlip", value: function() {
      var e, r = this;
      return (e = r.myImageEditor.flip()) || n.Errors.WebviewerError(r._stwain, r.mydvs.Error.errorMessage, r.mydvs.Error.errorCode), e;
    } }, { key: "DVSMirror", value: function() {
      var e, r = this;
      return (e = r.myImageEditor.mirror()) || n.Errors.WebviewerError(r._stwain, r.mydvs.Error.errorMessage, r.mydvs.Error.errorCode), e;
    } }, { key: "DVSCrop", value: function(e, r, t, i) {
      var a, u = this;
      return (a = u.myImageEditor.crop(e, r, t - e, i - r)) || n.Errors.WebviewerError(u._stwain, u.mydvs.Error.errorMessage, u.mydvs.Error.errorCode), a;
    } }, { key: "DVSErase", value: function(e, r, t, i) {
      var a, u = this;
      return (a = u.myImageEditor.erase(e, r, t - e, i - r, u._webViewer._UIView.BackgroundFillColor)) || n.Errors.WebviewerError(u._stwain, u.mydvs.Error.errorMessage, u.mydvs.Error.errorCode), a;
    } }, { key: "DVSSaveTransformResult", value: function(e) {
      var r = this;
      return r.myImageEditor.saveTransformation().then(function() {
        e(null, -1, null);
      }, function(t) {
        n.Errors.WebviewerError(r._stwain, r.mydvs.Error.errorMessage, r.mydvs.Error.errorCode);
      }), !0;
    } }, { key: "DVSRotateEx", value: function(e, r, t) {
      var i, a = this;
      return a.myImageEditor.rotateMode = r ? 1 : 0, (i = a.myImageEditor.rotate(e)) || n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), i;
    } }, { key: "DVSChangeImageSize", value: function(e, r, t) {
      var i, a = this;
      return (i = a.myImageEditor.changePageSize(L(e), L(r), t)) || n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), i;
    } }, { key: "DVSSkewAngle", value: function() {
      var e = this;
      return e._stwain._asyncGetSkewAngleOnly(e._webViewer.GetCurrentIndex(), function(r) {
        e.DVSRotateEx(r, !0), e.UpdateInfo(), e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e.updateButtons();
      }), !0;
    } }, { key: "updateButtons", value: function() {
      var e = this;
      e._IfChangedWithinTheEditor == 1 ? (e.ChangeButtonClass("save", "ds-dwt-ui-icon-saveImage"), e.ChangeButtonClass("restore", "ds-dwt-ui-icon-restore")) : (e.ChangeButtonClass("save", "ds-dwt-ui-icon-saveImage-grey"), e.ChangeButtonClass("restore", "ds-dwt-ui-icon-restore-grey"));
    } }, { key: "updateMode", value: function(e) {
      var r, t = this;
      if (t.bShowImageEdit) {
        if ((r = t._webViewer.GetHowManyImagesInBuffer()) > 1 ? (t._webViewer.GetCurrentIndex() == r - 1 || t._webViewer.GetHowManyImagesInBuffer() <= 1 ? t.ChangeButtonClass("nextImage", "ds-dwt-ui-icon-nextImage-grey") : t.ChangeButtonClass("nextImage", "ds-dwt-ui-icon-nextImage"), t._webViewer.GetCurrentIndex() <= 0 || t._webViewer.GetHowManyImagesInBuffer() <= 1 ? t.ChangeButtonClass("previousImage", "ds-dwt-ui-icon-preImage-grey") : t.ChangeButtonClass("previousImage", "ds-dwt-ui-icon-preImage")) : (t.ChangeButtonClass("nextImage", "ds-dwt-ui-icon-nextImage-grey"), t.ChangeButtonClass("previousImage", "ds-dwt-ui-icon-preImage-grey")), t.updateButtons(), t.__SetCropButtonGrey(!0), t.__SetEraseButtonGrey(!0), t.bMobile)
          switch (t.cursorStatus) {
            case "rectselect":
              t.OnSelect();
              break;
            case "zoom":
              t.OnClicktozoomin();
              break;
            default:
              t.OnHand();
          }
        else
          switch (t.cursorStatus) {
            case "hand":
              t.OnHand();
              break;
            case "zoom":
              t.OnClicktozoomin();
              break;
            default:
              t.OnSelect();
          }
        if (e) {
          var i = t._webViewer.GetCurrentIndex();
          t._IfChangedWithinTheEditor == 1 && i != t.iChangedIndex && t.ShowDialogForSaveImage(t._webViewer.GetCurrentIndex(), !1);
        }
      }
    } }, { key: "__SaveImageInner", value: function(e, r) {
      var t = this;
      if (t.iChangedIndex == -1 && t._IfSaveChangesOutSideOfTheEditor == 0)
        return t._IfChangedWithinTheEditor = !1, r && r(), !1;
      if (t._IfChangedWithinTheEditor != 1 && t._IfSaveChangesOutSideOfTheEditor == 0)
        return alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.imageNotChanged), t._IfChangedWithinTheEditor = !1, r && r(), !1;
      t._IfSaveChangesOutSideOfTheEditor && (t.iChangedIndex = t._webViewer.GetCurrentIndex());
      var i = !0;
      if (t._IfChangedWithinTheEditor == 1 || t._IfSaveChangesOutSideOfTheEditor == 1) {
        var a = t.getImageManager().convertClientIndexToServerId(t.iChangedIndex);
        if (a == -1)
          return r && r(), !1;
        t.OnGetImageFromServerForEdit(t._webViewer._UIView.mapModelImageControl[a], t.iChangedIndex, 2, function(u, c, d) {
          if (u) {
            if (e == 1 && (n.log("__SaveImageInner: " + [u.guid].join(",")), t._webViewer.GetCurrentIndex() == c && (t._stwain._isMobileMode() ? t._webViewer.MobileUpdateImage(u, d) : t._webViewer.UpdateImage(u, d))), t._IfChangedWithinTheEditor = !1, t.iChangedIndex = -1, u.serverId == -1)
              return r && r(), !1;
          } else
            t._IfChangedWithinTheEditor = !1, t.iChangedIndex = -1;
          return t.updateButtons(), r && r(), !0;
        }), i = !1;
      }
      return t._IfSaveChangesOutSideOfTheEditor = !1, i && (t._IfChangedWithinTheEditor = !1, r && r()), !0;
    } }, { key: "ShowDialogForSaveImage", value: function(e, r, t, i) {
      var a = this, u = function() {
        a.__SaveImageInner(!0, function() {
          var v = a._stwain._containerID;
          Fu.DCP_DWT_OnClickCloseInstall(v), n.bChangeImage = 1, e == -1 ? r && a.OnClose() : a._webViewer.__goInner(e), r && (document.body.style.overflow = ""), jr.isFunction(t) && t();
        });
      };
      if (a.promptToSaveChange) {
        var c = ['<div class="dynamsoft-dwt-dlg-tips">', "<div>", wo.saveChangedImage[0], "</div>", '<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">', '<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="', wo.saveChangedImage[1], '" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="', wo.saveChangedImage[2], '" /></div>', "</div>"];
        a.bMobile ? l.DWT.ShowMessage(c.join(""), { width: 300, headerStyle: 1 }) : l.DWT.ShowMessage(c.join(""), { width: 420, headerStyle: 1 });
        var d = n.one(".dynamsoft_btnSave").getEL();
        d && (d.onclick = function() {
          u();
        });
        var _ = n.one(".dynamsoft_btnCancel").getEL();
        _ && (_.onclick = function() {
          a.__RestoreImageInner(e, function() {
            var v = a._stwain._containerElement;
            Fu.DCP_DWT_OnClickCloseInstall(v), n.bChangeImage = 0, e == -1 ? r && a.OnClose() : a._webViewer.__goInner(e), r && (document.body.style.overflow = ""), jr.isFunction(i) && i();
          });
        });
      } else
        u();
    } }, { key: "__SetCropButtonGrey", value: function(e) {
      this.ChangeButtonClass("crop", "ds-dwt-ui-icon-cropImage-grey"), e && this.clearSelectedAreas();
    } }, { key: "__SetEraseButtonGrey", value: function(e) {
      this.ChangeButtonClass("cut", "ds-dwt-ui-icon-erase-grey"), e && this.clearSelectedAreas();
    } }, { key: "__SetZoomInButtonEnable", value: function(e) {
      e == 1 ? this.ChangeButtonClass("zoomin", "ds-dwt-ui-icon-zoomin") : this.ChangeButtonClass("zoomin", "ds-dwt-ui-icon-zoomin-grey");
    } }, { key: "__SetZoomOutButtonEnable", value: function(e) {
      e == 1 ? this.ChangeButtonClass("zoomout", "ds-dwt-ui-icon-zoomout") : this.ChangeButtonClass("zoomout", "ds-dwt-ui-icon-zoomout-grey");
    } }, { key: "pageChange", value: function(e) {
      var r, t = this, i = t._webViewer.GetHowManyImagesInBuffer();
      n.log("OnPagination"), i <= 0 ? jr.output(t, "No image in Buffer") : i != 1 && (!/^\d+$/.test(e) || e <= 0 ? alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.invalidIndex) : ((r = L(e) - 1) < 0 ? r = 0 : r >= i && (r = i - 1), r != t._webViewer.GetCurrentIndex() && t.go(r)));
    } }, { key: "bufferChanged", value: function(e) {
      var r = this;
      if (r._currentIndex != r._webViewer.GetCurrentIndex())
        return r._currentIndex = r._webViewer.GetCurrentIndex(), r.updateMode(), e.action != "shift" || r._IfChangedWithinTheEditor != 1 || (r.ShowDialogForSaveImage(r._currentIndex, !1), !1);
    } }, { key: "pageRendered", value: function(e) {
    } }, { key: "OnFirstImage", value: function() {
      n.Errors.ClearErrorInfo(this._stwain), this._webViewer.first();
    } }, { key: "OnLastImage", value: function() {
      n.Errors.ClearErrorInfo(this._stwain), this._webViewer.last();
    } }, { key: "OnPreviousImage", value: function() {
      var e = this, r = n.one(".ds-dwt-ui-icon-preImage-grey");
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), r && r.getEL() || e._webViewer.previous();
    } }, { key: "OnNextImage", value: function() {
      var e = this, r = n.one(".ds-dwt-ui-icon-nextImage-grey");
      e.hideImgEditorDilag(), n.Errors.ClearErrorInfo(e._stwain), r && r.getEL() || e._webViewer.next();
    } }, { key: "go", value: function(e) {
      var r = this;
      if (r._webViewer.GetHowManyImagesInBuffer() <= 0 || r._webViewer.GetCurrentIndex() < 0)
        return jr.output(r, "No image in Buffer"), !1;
      if (r._IfChangedWithinTheEditor == 1)
        return r.ShowDialogForSaveImage(e, !1), !1;
      if (r.bShowImageEdit && e !== void 0) {
        if (e == -1)
          return !1;
        r.bCouldBeTimeConsuming = !0, r.myImageEditor.gotoPage(e), r.updateMode();
      }
      return !0;
    } }, { key: "OnAcquire", value: function() {
      var e = this, r = function() {
        e._stwain.SelectSource(function() {
          e._stwain.CloseSource(), e._stwain.OpenSource(), e._stwain.IfShowUI = !0, l.DWT.IfConfineMaskWithinTheViewer == 1 ? (l.DWT.IfConfineMaskWithinTheViewer = !1, e._stwain.AcquireImage({}, function() {
            l.DWT.IfConfineMaskWithinTheViewer = !0, window.onresize == null && (window.onresize = function() {
              e._stwain.ShowImageEditorEx(-1, -1, -1, -1);
            });
          }, function() {
            window.onresize == null && (window.onresize = function() {
              e._stwain.ShowImageEditorEx(-1, -1, -1, -1);
            });
          })) : e._stwain.AcquireImage();
        }, function() {
          n.log("User did not select a source");
        });
      };
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._IfChangedWithinTheEditor ? e.ShowDialogForSaveImage(e._webViewer.GetCurrentIndex(), !1, r, r) : r();
    } }, { key: "OnLoadImage", value: function() {
      var e = this, r = null, t = function() {
        if (e._stwain._isMobileMode()) {
          var i = document.getElementById(e.dwtMobileFileId);
          return i.value = "", void i.click();
        }
        if (e._stwain.IfShowFileDialog = !0, e._stwain.Addon && e._stwain.Addon.PDF) {
          var a, u = !1;
          n.License.checkProductKey(e._stwain, { PDFRasterizer: !0 }, !0) && (r = e._stwain.Addon.PDF.GetConvertMode(), a = e._stwain._innerFun("GetAddOnVersion", zt("pdf")), (n.env.bMac && a == l.DWT.PdfMacVersion || n.env.bLinux && a == l.DWT.PdfLinuxVersion || a == l.DWT.PdfVersion) && (u = !0), u && e._stwain.Addon.PDF.SetConvertMode(3));
        }
        e._stwain.LoadImageEx("", 5, function() {
          n.log("Loaded an image successfully."), r != null && e._stwain.Addon.PDF.SetConvertMode(r);
        }, function(c, d) {
          n.log("Loading failed with the error: " + d), r != null && e._stwain.Addon.PDF.SetConvertMode(r);
        });
      };
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._IfChangedWithinTheEditor ? e.ShowDialogForSaveImage(e._webViewer.GetCurrentIndex(), !1, t, t) : t();
    } }, { key: "OnPrint", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : e._webViewer._UIView.Print();
    } }, { key: "OnRemoveAll", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : e._stwain.RemoveAllImages();
    } }, { key: "OnRemove", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : e._stwain.RemoveAllSelectedImages();
    } }, { key: "OnRotateLeft", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (e._webViewer._ImgManager.bImageChangedInViewer == 1 ? (e._IfSaveChangesOutSideOfTheEditor = !0, e._webViewer._ImgManager.bImageChangedInViewer = !1, e.__SaveImageInner(!1, function() {
        e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._stwain._isMobileMode() ? (e.DVSRotate(270), e.UpdateInfo()) : e._stwain.RotateLeft(e._webViewer.GetCurrentIndex()), e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e.updateButtons();
      })) : (e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._IfSaveChangesOutSideOfTheEditor = !1, e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e._stwain._isMobileMode() ? (e.DVSRotate(270), e.UpdateInfo()) : e._stwain.RotateLeft(e._webViewer.GetCurrentIndex())), e.updateMode());
    } }, { key: "RotateEx", value: function(e, r, t) {
      var i = this;
      i._webViewer.GetHowManyImagesInBuffer() <= 0 || i._webViewer.GetCurrentIndex() < 0 ? jr.output(i, "No image in Buffer") : (e === void 0 || r === void 0 || t === void 0 ? alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.insufficientParas) : i._webViewer._ImgManager.bImageChangedInViewer == 1 ? (i._IfSaveChangesOutSideOfTheEditor = !0, i._webViewer._ImgManager.bImageChangedInViewer = !1, i.__SaveImageInner(!1, function() {
        i.bCouldBeTimeConsuming = !0, fr("", i._stwain), i._webViewer._ImgManager.bImageJustChangedInEditor = !0, i._stwain._isMobileMode() ? (i.DVSRotateEx(e, r, t), i.UpdateInfo()) : i._stwain.RotateEx(i._webViewer.GetCurrentIndex(), e, r, t), i._IfChangedWithinTheEditor = !0, i.iChangedIndex = i._webViewer.GetCurrentIndex(), i.updateButtons();
      })) : (i.bCouldBeTimeConsuming = !0, fr("", i._stwain), i._IfSaveChangesOutSideOfTheEditor = !1, i._webViewer._ImgManager.bImageJustChangedInEditor = !0, i._IfChangedWithinTheEditor = !0, i.iChangedIndex = i._webViewer.GetCurrentIndex(), i._stwain._isMobileMode() ? (i.DVSRotateEx(e, r, t), i.UpdateInfo()) : i._stwain.RotateEx(i._webViewer.GetCurrentIndex(), e, r, t)), i.updateMode());
    } }, { key: "OnRotate", value: function(e) {
      var r = this;
      if (n.Errors.ClearErrorInfo(r._stwain), r._webViewer.GetHowManyImagesInBuffer() <= 0 || r._webViewer.GetCurrentIndex() < 0)
        jr.output(r, "No image in Buffer");
      else {
        if (n.hide("dynamsoft_ImgSizeEditor"), !n.get("dynamsoft_RotateAnyAngle")) {
          var t = ['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">', "<ul>", '<li><label for="dynamsoft_Angle"><b>', wo.dlgRotateAnyAngle[0], '</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>', '<li><label for="dynamsoft_Angle_InterpolationMethod"><b>', wo.dlgRotateAnyAngle[1], '</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>', '<li><label for="dynamsoft_KeepSize"><b></b>', '<input type="checkbox" id="dynamsoft_KeepSize"/>', wo.dlgRotateAnyAngle[2], "</label></li></ul>", "<div>", '<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="', wo.dlgRotateAnyAngle[3], '"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="', wo.dlgRotateAnyAngle[4], '" /></span></div>', "</div>"];
          n.one("body").append(t.join(""));
        }
        var i = n.get("dynamsoft_Angle_InterpolationMethod");
        i.options.length = 0, i.options.add(new Option("NearestNeighbor", "1")), i.options.add(new Option("Bilinear", "2")), i.options.add(new Option("Bicubic", "3")), i = null, n.get("dynamsoft_btnRotateAnyAngleOK").onclick = function() {
          var v = n.get("dynamsoft_Angle").value;
          if (n.get("dynamsoft_Angle").className = "", !/^\d+$/.test(v) || v <= 0)
            return n.get("dynamsoft_Angle").className += " invalid", n.get("dynamsoft_Angle").focus(), void alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.invalidAngle);
          var T = n.get("dynamsoft_KeepSize").checked;
          r.bCouldBeTimeConsuming = !0, fr("", r._stwain);
          var M = L(v);
          r.RotateEx(M, T, n.get("dynamsoft_Angle_InterpolationMethod").selectedIndex + 1), r._stwain._errorCode != 0 || n.hide("dynamsoft_RotateAnyAngle");
        }, n.get("dynamsoft_btnCancelRotateAnyAngle").onclick = function() {
          n.hide("dynamsoft_RotateAnyAngle");
        };
        var a = n.get("dynamsoft_RotateAnyAngle");
        n.toggle("dynamsoft_RotateAnyAngle");
        var u = e.srcElement || e.target, c = u.y;
        c || (c = u.offsetTop + 1);
        var d = u.x;
        if (d || (d = u.offsetLeft + 1), r.UIEditor && r.UIEditor.nodeName == "DIV")
          a.style.top = e.clientY + document.documentElement.scrollTop + "px", a.style.left = e.clientX + document.documentElement.scrollLeft + "px";
        else {
          var _ = Lu.getElementById(r.UIEditor);
          a.style.top = c + u.offsetHeight + jr.getTop(_) + "px", a.style.left = d + jr.getLeft(_) + "px";
        }
        n.get("dynamsoft_Angle").value = "45";
      }
    } }, { key: "OnRotateRight", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (e._webViewer._ImgManager.bImageChangedInViewer == 1 ? (e._IfSaveChangesOutSideOfTheEditor = !0, e._webViewer._ImgManager.bImageChangedInViewer = !1, e.__SaveImageInner(!1, function() {
        e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._stwain._isMobileMode() ? (e.DVSRotate(90), e.UpdateInfo()) : e._stwain.RotateRight(e._webViewer.GetCurrentIndex()), e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e.updateButtons();
      })) : (e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._IfSaveChangesOutSideOfTheEditor = !1, e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e._stwain._isMobileMode() ? (e.DVSRotate(90), e.UpdateInfo()) : e._stwain.RotateRight(e._webViewer.GetCurrentIndex())), e.updateMode());
    } }, { key: "OnDeskew", value: function() {
      var e = this;
      if (n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0)
        jr.output(e, "No image in Buffer");
      else if (e._webViewer._ImgManager.bImageChangedInViewer == 1)
        e._IfSaveChangesOutSideOfTheEditor = !0, e._webViewer._ImgManager.bImageChangedInViewer = !1, e.__SaveImageInner(!1, function() {
          if (e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._stwain._isMobileMode())
            e.DVSSkewAngle();
          else {
            var t = e._webViewer.GetCurrentIndex();
            t >= 0 && e._stwain.GetSkewAngleAsync(t).then(function(i) {
              e.RotateEx(i, !0, 1);
            }), e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e.updateButtons();
          }
        });
      else if (e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._IfSaveChangesOutSideOfTheEditor = !1, e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e._stwain._isMobileMode())
        e.DVSSkewAngle();
      else {
        var r = e._webViewer.GetCurrentIndex();
        r >= 0 && e._stwain.GetSkewAngleAsync(r).then(function(t) {
          e.RotateEx(t, !0, 1);
        });
      }
    } }, { key: "OnCrop", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag();
      var r = n.one(".ds-dwt-ui-icon-cropImage");
      r && r.getEL() && e.Crop();
    } }, { key: "Crop", value: function() {
      var e = this;
      if (e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0)
        jr.output(e, "No image in Buffer");
      else {
        var r = e.actualSelectedCanvasAreas;
        if (r.length == 2) {
          var t = r[1], i = t.left, a = t.top, u = t.right, c = t.bottom;
          L(i) - L(u) != 0 && L(a) - L(c) != 0 && (e._webViewer._ImgManager.bImageChangedInViewer == 1 ? (e._IfSaveChangesOutSideOfTheEditor = !0, e._webViewer._ImgManager.bImageChangedInViewer = !1, e.__SaveImageInner(!1, function() {
            e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._stwain._isMobileMode() ? (e.DVSCrop(L(i), L(a), L(u), L(c)), e.UpdateInfo()) : e._stwain.Crop(e._webViewer.GetCurrentIndex(), L(i), L(a), L(u), L(c)), e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e.__SetCropButtonGrey(!0), e.__SetEraseButtonGrey(!0), e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e.updateButtons();
          })) : (e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._IfSaveChangesOutSideOfTheEditor = !1, e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e._stwain._isMobileMode() ? (e.DVSCrop(L(i), L(a), L(u), L(c)), e.UpdateInfo()) : e._stwain.Crop(e._webViewer.GetCurrentIndex(), L(i), L(a), L(u), L(c)), e.__SetCropButtonGrey(!0), e.__SetEraseButtonGrey(!0)), e.updateMode());
        } else
          jr.output(e, "No area selected for cropping");
      }
    } }, { key: "OnErase", value: function() {
      var e = this, r = n.one(".ds-dwt-ui-icon-erase");
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), r && r.getEL() && e.Erase();
    } }, { key: "Erase", value: function() {
      var e = this, r = !1;
      if (e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0)
        jr.output(e, "No image in Buffer");
      else {
        var t = e.actualSelectedCanvasAreas;
        if (t.length != 1) {
          if (e._webViewer._ImgManager.bImageChangedInViewer == 1)
            e._IfSaveChangesOutSideOfTheEditor = !0, e._webViewer._ImgManager.bImageChangedInViewer = !1, e.__SaveImageInner(!1, function() {
              for (var v = 1; v < t.length; v++) {
                var T = t[v], M = T.left, A = T.top, S = T.right, V = T.bottom;
                L(M) - L(S) != 0 && L(A) - L(V) != 0 && (e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._stwain._isMobileMode() ? (e.DVSErase(L(M), L(A), L(S), L(V)), e.UpdateInfo()) : e._stwain.CutFrameToClipboard(e._webViewer.GetCurrentIndex(), L(M), L(A), L(S), L(V)), e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e.updateButtons(), r = !0);
              }
              e.__SetEraseButtonGrey(r), e.__SetCropButtonGrey(r);
            });
          else {
            e._IfSaveChangesOutSideOfTheEditor = !1, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex();
            for (var i = 1; i < t.length; i++) {
              var a = t[i], u = a.left, c = a.top, d = a.right, _ = a.bottom;
              L(u) - L(d) != 0 && L(c) - L(_) != 0 && (e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._stwain._isMobileMode() ? (e.DVSErase(L(u), L(c), L(d), L(_)), e.UpdateInfo()) : e._stwain.CutFrameToClipboard(e._webViewer.GetCurrentIndex(), L(u), L(c), L(d), L(_)), e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), r = !0);
            }
            e.__SetEraseButtonGrey(r), e.__SetCropButtonGrey(r);
          }
          e.updateMode();
        } else
          jr.output(e, "No area selected for erasing");
      }
    } }, { key: "ChangeImageSize", value: function(e, r, t) {
      var i = this;
      i._webViewer.GetHowManyImagesInBuffer() <= 0 || i._webViewer.GetCurrentIndex() < 0 ? jr.output(i, "No image in Buffer") : (i._webViewer._ImgManager.bImageChangedInViewer == 1 ? (i._IfSaveChangesOutSideOfTheEditor = !0, i._webViewer._ImgManager.bImageChangedInViewer = !1, i.__SaveImageInner(!1, function() {
        i.bCouldBeTimeConsuming = !0, fr("", i._stwain), i._webViewer._ImgManager.bImageJustChangedInEditor = !0, i._stwain._isMobileMode() ? (i.DVSChangeImageSize(e, r, t), i.UpdateInfo()) : i._stwain.ChangeImageSize(i._webViewer.GetCurrentIndex(), e, r, t), i._IfChangedWithinTheEditor = !0, i.iChangedIndex = i._webViewer.GetCurrentIndex(), i.updateButtons();
      })) : (i.bCouldBeTimeConsuming = !0, fr("", i._stwain), i._IfSaveChangesOutSideOfTheEditor = !1, i._webViewer._ImgManager.bImageJustChangedInEditor = !0, i._IfChangedWithinTheEditor = !0, i.iChangedIndex = i._webViewer.GetCurrentIndex(), i._stwain._isMobileMode() ? (i.DVSChangeImageSize(e, r, t), i.UpdateInfo()) : i._stwain.ChangeImageSize(i._webViewer.GetCurrentIndex(), e, r, t)), i.updateMode());
    } }, { key: "OnChangeImageSize", value: function(e) {
      var r = this;
      if (n.Errors.ClearErrorInfo(r._stwain), r.hideImgEditorDilag(), !(r._webViewer.GetHowManyImagesInBuffer() <= 0 || r._webViewer.GetCurrentIndex() < 0)) {
        if (n.hide("dynamsoft_RotateAnyAngle"), !n.get("dynamsoft_ImgSizeEditor")) {
          var t = ['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">', "<ul>", '<li><label for="dynamsoft_img_height"><b>', wo.dlgChangeImageSize[0], '</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>', '<li><label for="dynamsoft_img_width"><b>', wo.dlgChangeImageSize[1], '</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>', "<li>", wo.dlgChangeImageSize[2], '<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>', "</ul>", "<div>", '<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="', wo.dlgChangeImageSize[3], '"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="', wo.dlgChangeImageSize[4], '"/></span></div>', "</div>"];
          n.one("body").append(t.join(""));
        }
        var i = n.get("dynamsoft_InterpolationMethod");
        i.options.length = 0, i.options.add(new Option("NearestNeighbor", "1")), i.options.add(new Option("Bilinear", "2")), i.options.add(new Option("Bicubic", "3")), i = null, n.get("dynamsoft_btnChangeImageSizeOK").onclick = function() {
          var V = n.get("dynamsoft_img_width").value, ne = n.get("dynamsoft_img_height").value;
          n.get("dynamsoft_img_width").className = "", n.get("dynamsoft_img_height").className = "";
          var z = /^\d+$/;
          return !z.test(ne) || ne <= 0 ? (n.get("dynamsoft_img_height").className += " invalid", n.get("dynamsoft_img_height").focus(), void alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)) : !z.test(V) || V <= 0 ? (n.get("dynamsoft_img_width").className += " invalid", n.get("dynamsoft_img_width").focus(), void alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)) : (r.ChangeImageSize(V, ne, n.get("dynamsoft_InterpolationMethod").selectedIndex + 1), void (r._stwain._errorCode != 0 || n.hide("dynamsoft_ImgSizeEditor")));
        }, n.get("dynamsoft_btnCancelChange").onclick = function() {
          n.hide("dynamsoft_ImgSizeEditor");
        };
        var a = n.get("dynamsoft_ImgSizeEditor");
        n.toggle("dynamsoft_ImgSizeEditor");
        var u = e.srcElement || e.target, c = u.y;
        c || (c = u.offsetTop + 1);
        var d = u.x;
        if (d || (d = u.offsetLeft + 1), r.UIEditor && r.UIEditor.nodeName == "DIV")
          a.style.top = e.clientY + document.documentElement.scrollTop + "px", a.style.left = e.clientX + document.documentElement.scrollLeft + "px";
        else {
          var _ = Lu.getElementById(r.UIEditor);
          a.style.top = c + u.offsetHeight + jr.getTop(_) + "px", a.style.left = d + jr.getLeft(_) + "px";
        }
        var v = r._webViewer.GetCurrentIndex(), T = r.getImageManager().convertClientIndexToServerId(v);
        if (T == -1)
          return !1;
        if (r._webViewer._UIView.mapModelImageControl[T]) {
          if (r._stwain._isMobileMode()) {
            var M, A = 0, S = 0;
            (M = r.GetRealTimeMetadataByIndex()) && M.width && (A = M.width), M && M.height && (S = M.height), n.get("dynamsoft_img_width").value = L(A), n.get("dynamsoft_img_height").value = L(S);
          } else
            n.get("dynamsoft_img_width").value = L(r.getImageManager().GetImageWidth(v)), n.get("dynamsoft_img_height").value = L(r.getImageManager().GetImageHeight(v));
          return !0;
        }
        return !1;
      }
      jr.output(r, "No image in Buffer");
    } }, { key: "OnFlip", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (e._webViewer._ImgManager.bImageChangedInViewer == 1 ? (e._IfSaveChangesOutSideOfTheEditor = !0, e._webViewer._ImgManager.bImageChangedInViewer = !1, e.__SaveImageInner(!1, function() {
        e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._stwain._isMobileMode() ? (e.DVSFlip(), e.UpdateInfo()) : e._stwain.Flip(e._webViewer.GetCurrentIndex()), e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e.updateButtons();
      })) : (e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._IfSaveChangesOutSideOfTheEditor = !1, e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e._stwain._isMobileMode() ? (e.DVSFlip(), e.UpdateInfo()) : e._stwain.Flip(e._webViewer.GetCurrentIndex())), e.updateMode());
    } }, { key: "OnMirror", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (e._webViewer._ImgManager.bImageChangedInViewer == 1 ? (e._IfSaveChangesOutSideOfTheEditor = !0, e._webViewer._ImgManager.bImageChangedInViewer = !1, e.__SaveImageInner(!1, function() {
        e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._stwain._isMobileMode() ? (e.DVSMirror(), e.UpdateInfo()) : e._stwain.Mirror(e._webViewer.GetCurrentIndex()), e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e.updateButtons();
      })) : (e.bCouldBeTimeConsuming = !0, fr("", e._stwain), e._IfSaveChangesOutSideOfTheEditor = !1, e._webViewer._ImgManager.bImageJustChangedInEditor = !0, e._IfChangedWithinTheEditor = !0, e.iChangedIndex = e._webViewer.GetCurrentIndex(), e._stwain._isMobileMode() ? (e.DVSMirror(), e.UpdateInfo()) : e._stwain.Mirror(e._webViewer.GetCurrentIndex())), e.updateMode());
    } }, { key: "wheel", value: function(e) {
      var r = this;
      this.myImageEditor.zoom, this.myImageEditor.maxZoom, this.myImageEditor.zoom < this.myImageEditor.maxZoom ? r.__SetZoomInButtonEnable(!0) : r.__SetZoomInButtonEnable(!1), this.myImageEditor.zoom > this.myImageEditor.minZoom ? r.__SetZoomOutButtonEnable(!0) : r.__SetZoomOutButtonEnable(!1);
    } }, { key: "OnZoomin", value: function() {
      var e = this;
      e.hideImgEditorDilag();
      var r = n.one(".ds-dwt-ui-icon-zoomin-grey");
      r && r.getEL() || (n.Errors.ClearErrorInfo(e._stwain), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (this.myImageEditor.zoom < this.myImageEditor.maxZoom ? (e.ZoomIn(), e.__SetZoomInButtonEnable(!0)) : e.__SetZoomInButtonEnable(!1), e.__SetZoomOutButtonEnable(!0), e.__SetCropButtonGrey(!0), e.__SetEraseButtonGrey(!0)));
    } }, { key: "OnOriginalsize", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (e.SetZoom(1), e.__SetZoomInButtonEnable(!0), e.__SetZoomOutButtonEnable(!0), e.__SetCropButtonGrey(!0), e.__SetEraseButtonGrey(!0));
    } }, { key: "OnZoomout", value: function() {
      var e = this;
      e.hideImgEditorDilag();
      var r = n.one(".ds-dwt-ui-icon-zoomout-grey");
      r && r.getEL() || (n.Errors.ClearErrorInfo(e._stwain), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (this.myImageEditor.zoom > this.myImageEditor.minZoom ? (e.ZoomOut(), e.__SetZoomOutButtonEnable(!0)) : e.__SetZoomOutButtonEnable(!1), e.__SetZoomInButtonEnable(!0), e.__SetCropButtonGrey(!0), e.__SetEraseButtonGrey(!0)));
    } }, { key: "OnFitPage", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (e.SetFitType(), e.__SetZoomInButtonEnable(!0), e.__SetZoomOutButtonEnable(!0), e.__SetCropButtonGrey(!0), e.__SetEraseButtonGrey(!0));
    } }, { key: "OnFitWidth", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (e.SetFitType("width"), e.__SetZoomInButtonEnable(!0), e.__SetZoomOutButtonEnable(!0), e.__SetCropButtonGrey(!0), e.__SetEraseButtonGrey(!0));
    } }, { key: "OnFitHeight", value: function() {
      var e = this;
      n.Errors.ClearErrorInfo(e._stwain), e.hideImgEditorDilag(), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (e.SetFitType("height"), e.__SetZoomInButtonEnable(!0), e.__SetZoomOutButtonEnable(!0), e.__SetCropButtonGrey(!0), e.__SetEraseButtonGrey(!0));
    } }, { key: "OnHand", value: function() {
      var e = this, r = Me;
      e.hideImgEditorDilag(), e.clearSelectedAreas(), e.SetMouseSelectInner(r);
    } }, { key: "OnSelect", value: function() {
      var e = Z;
      this.hideImgEditorDilag(), this.SetMouseSelectInner(e);
    } }, { key: "OnClicktozoomin", value: function() {
      var e = this, r = Ue;
      e.hideImgEditorDilag(), e.clearSelectedAreas(), e.SetMouseSelectInner(r);
    } }, { key: "SetMouseSelectInner", value: function(e) {
      var r = this;
      if (n.Errors.ClearErrorInfo(r._stwain), r._webViewer.GetHowManyImagesInBuffer() <= 0 || r._webViewer.GetCurrentIndex() < 0)
        jr.output(r, "No image in Buffer");
      else if (r.SetMouseShape(e), r.__EnableMouseShapButtons(e), r.bMobile)
        switch (e) {
          case Z:
            r.cursorStatus = "rectselect";
            break;
          case Ue:
            r.cursorStatus = "zoom";
            break;
          default:
            r.cursorStatus = "hand";
        }
      else
        switch (e) {
          case Me:
            r.cursorStatus = "hand";
            break;
          case Ue:
            r.cursorStatus = "zoom";
            break;
          default:
            r.cursorStatus = "rectselect";
        }
    } }, { key: "OnRestore", value: function() {
      var e = this;
      e.hideImgEditorDilag();
      var r = n.one(".ds-dwt-ui-icon-saveImage-grey");
      r && r.getEL() || (n.Errors.ClearErrorInfo(e._stwain), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : (e.__RestoreImageInner(-1), e.clearSelectedAreas()));
    } }, { key: "__RestoreImageInner", value: function(e, r) {
      var t = this;
      if (t.iChangedIndex == -1)
        return t._IfChangedWithinTheEditor = !1, void (r && r());
      if (t._stwain._isMobileMode())
        t.Reset(), t._IfChangedWithinTheEditor = !1, t.iChangedIndex = -1, t.updateButtons(), r && r();
      else {
        var i = !0;
        if (t._IfChangedWithinTheEditor == 1) {
          var a = t.getImageManager().convertClientIndexToServerId(t.iChangedIndex);
          a != -1 && t.OnGetImageFromServerForEdit(t._webViewer._UIView.mapModelImageControl[a], t.iChangedIndex, 1, function(u, c, d) {
            u && (n.log("__RestoreImageInner: " + [u.guid].join(",")), t._stwain._isMobileMode() ? t._webViewer.MobileUpdateImage(u, d) : t._webViewer.UpdateImage(u, d)), t._IfChangedWithinTheEditor = !1, t.iChangedIndex = -1;
            var _ = u && u.serverId;
            return _ == -1 ? (t.updateButtons(), r && r(), !1) : (t.updateButtons(), e == -1 && (_ = t.getImageManager().convertClientIndexToServerId(t._webViewer.GetCurrentIndex())) == -1 ? (n.Errors.IndexOutOfRange(t._stwain), r && r(), !1) : void (r && r()));
          }), i = !1;
        }
        i && (t._IfChangedWithinTheEditor = !1, r && r());
      }
    } }, { key: "OnGetImageFromServerForEdit", value: function(e, r, t, i) {
      var a, u = this;
      if (i && u._webViewer._UIView.BaseUrl) {
        var c = u.getImageManager().convertClientIndexToServerId(r);
        if (c == -1)
          return !1;
        if (u._stwain._isMobileMode())
          if (t == 1) {
            var d = u._webViewer.GetMetaDataByIndex(r);
            d && (d.width = u.BackModelImageControl.width, d.height = u.BackModelImageControl.height, d.bitDepth = u.BackModelImageControl.bitDepth, d.resolutionX = u.BackModelImageControl.resolutionX, d.resolutionY = u.BackModelImageControl.resolutionY), e.ticks = Date.now(), e.imageUrl = u.BackImageBuffer, i(e, r, { metaData: d });
          } else
            u.DVSSaveTransformResult(i);
        else
          l.DWT.ConnectWithSocket ? i() : (a = Ec.getUrlByAct(u._webViewer._UIView.BaseUrl, c, t), n.ajax({ method: "GET", xhrFields: { withCredentials: !0 }, url: a, onSuccess: function(_) {
            e.ticks = Date.now(), e.imageUrl = Ec.getImageUrl(u._webViewer._UIView.BaseUrl, c, -1, -1, e.ticks), e.minImageUrl = Ec.getImageUrl(u._webViewer._UIView.BaseUrl, c, L(e.iImageControlWidth), L(e.iImageControlHeight), e.ticks);
            var v = u._webViewer.GetMetaDataByIndex(r);
            if (v) {
              var T = u._webViewer._UIView.GetDataImageControl(c);
              T && T.width ? v.width = T.width : v.width = u._stwain.GetImageWidth(r), T && T.height ? v.height = T.height : v.height = u._stwain.GetImageHeight(r);
            }
            i(e, r, v);
          }, onError: function() {
          } }));
      }
      return !0;
    } }, { key: "OnSave", value: function() {
      var e = this;
      e.hideImgEditorDilag();
      var r = n.one(".ds-dwt-ui-icon-saveImage-grey");
      r && r.getEL() || (n.Errors.ClearErrorInfo(e._stwain), e._webViewer.GetHowManyImagesInBuffer() <= 0 || e._webViewer.GetCurrentIndex() < 0 ? jr.output(e, "No image in Buffer") : e.__SaveImageInner(!0, function() {
        if (e.getImageManager().convertClientIndexToServerId(e._webViewer.GetCurrentIndex()) == -1)
          return n.Errors.IndexOutOfRange(e._stwain), !1;
      }));
    } }, { key: "OnClose", value: function() {
      var e = this;
      return n.Errors.ClearErrorInfo(e._stwain), e._IfChangedWithinTheEditor == 1 ? (e.ShowDialogForSaveImage(-1, !0), !1) : e.OnCloseInner();
    } }, { key: "OnCloseInstall", value: function() {
      if (this._IfChangedWithinTheEditor == 0) {
        var e = this._stwain._containerElement;
        Fu.DCP_DWT_OnClickCloseInstall(e);
      }
    } }, { key: "Reset", value: function(e) {
      return this.myImageEditor.reset();
    } }, { key: "OnCloseInner", value: function(e) {
      var r, t = this;
      if (n.Errors.ClearErrorInfo(t._stwain), t._IfChangedWithinTheEditor == 1) {
        if (!e)
          return t.ShowDialogForSaveImage(-1, !0), !1;
        var i = t._stwain._containerElement;
        Fu.DCP_DWT_OnClickCloseInstall(i), n.bChangeImage = 0, t.__RestoreImageInner(-1);
      }
      return t.UIEditor && t.bFullScreen == 1 ? t.UIEditor && t.UIEditor.parentNode && t.UIEditor.childNodes.length > 0 && t.UIEditor.parentNode.removeChild(t.UIEditor) : t.myImageEditor && t.myImageEditor.unbindView(t.UIEditor), t.bShowImageEdit = !1, t._webViewer.bShowImageEdit = !1, t.bShowImageEditForFullScreen = !1, t.CloseShowImageEditor(), t.hideImgEditorDilag(), (r = n.get("dynamsoft_ImgSizeEditor")) && r.parentNode.removeChild(r), (r = n.get("dynamsoft_RotateAnyAngle")) && r.parentNode.removeChild(r), l.Lib.dialog.selectsourcedlg && l.Lib.dialog.selectsourcedlg.close(), window.onresize = null, document.body.style.overflow = "", n.isFunction(t._stwain.__CloseImageEditorUI) && t._stwain.__CloseImageEditorUI(), t.disposeInner();
    } }, { key: "__EnableMouseShapButtons", value: function(e) {
      var r = this;
      r.ChangeButtonClass("hand", "ds-dwt-ui-icon-hand"), r.ChangeButtonClass("select", "ds-dwt-ui-icon-select"), r.ChangeButtonClass("clicktozoomin", "ds-dwt-ui-icon-clicktozoomin"), e == Me ? r.ChangeButtonClass("hand", "dynamsoft-dwt-EditorButton-selected") : e == Z ? r.ChangeButtonClass("select", "dynamsoft-dwt-EditorButton-selected") : e == Ue && r.ChangeButtonClass("clicktozoomin", "dynamsoft-dwt-EditorButton-selected");
    } }, { key: "click", value: function(e) {
      var r = this;
      r.hideImgEditorDilag(), this.myImageEditor.zoom < this.myImageEditor.maxZoom ? r.__SetZoomInButtonEnable(!0) : r.__SetZoomInButtonEnable(!1), r.__SetZoomOutButtonEnable(!0);
    } }, { key: "hideImgEditorDilag", value: function() {
      n.hide("dynamsoft_ImgSizeEditor"), n.hide("dynamsoft_RotateAnyAngle");
    } }, { key: "imageClick", value: function(e, r) {
      this.UpdateInfo();
    } }, { key: "pageAreaSelected", value: function(e, r) {
      var t = this, i = 1;
      if (r && r.length > 0) {
        var a = r[r.length - 1];
        a.index && (i = L(a.index) + 1), i > 0 && i < t.actualSelectedCanvasAreas.length ? t.actualSelectedCanvasAreas[i] = { left: a.x, top: a.y, right: a.x + a.width, bottom: a.y + a.height } : i == t.actualSelectedCanvasAreas.length && t.actualSelectedCanvasAreas.push({ left: a.x, top: a.y, right: a.x + a.width, bottom: a.y + a.height }), t.actualSelectedCanvasAreas.length == 2 && a.width > 0 && a.height > 0 ? (t.ChangeButtonClass("crop", "ds-dwt-ui-icon-cropImage"), t.ChangeButtonClass("cut", "ds-dwt-ui-icon-erase")) : (t.__SetCropButtonGrey(!1), t.__SetEraseButtonGrey(!1));
      }
    } }, { key: "pageAreaUnselected", value: function(e) {
      var r = this;
      r.actualSelectedCanvasAreas = [{ left: 0, top: 0, right: 0, bottom: 0 }], r.ChangeButtonClass("crop", "ds-dwt-ui-icon-cropImage-grey"), r.ChangeButtonClass("cut", "ds-dwt-ui-icon-erase-grey");
    } }, { key: "onDrop", value: function(e) {
      this._webViewer.dropEvent(e);
    } }, { key: "getImageManager", value: function() {
      return this._webViewer._ImgManager;
    } }]), o;
  }();
  n.UI.ImageEditorInner = pd;
  var _d = function() {
    function o(e, r) {
      Gn(this, o), this._imageEditorInner = new pd(e, r), this.myImageEditor = this._imageEditorInner.myImageEditor;
    }
    return zn(o, [{ key: "show", value: function() {
      return this._imageEditorInner.show();
    } }, { key: "hide", value: function() {
      return this._imageEditorInner.hide();
    } }, { key: "dispose", value: function() {
      return this._imageEditorInner.dispose();
    } }]), o;
  }();
  function cg(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  n.UI.ImageEditor = _d;
  var so = { showThumbnail: !1, location: "horizontal", sequence: -1, size: "30%", columns: 1, rows: 3, scrollDirection: "vertical", pageMargin: 10, border: "", allowKeyboardControl: !0, allowPageDragging: !0, allowResizing: !1, pageBackground: cs, pageBorder: wc, hoverPageBackground: Ic, hoverPageBorder: Sc, placeholderBackground: Tc, autoChangeIndex: !1 }, vd = /* @__PURE__ */ new WeakSet(), yd = function() {
    function o(e, r) {
      Gn(this, o), cg(this, vd);
      var t = this;
      if (t._webViewer = e, r) {
        if (r.location)
          switch (r.location) {
            case "left":
            default:
              r.location = "horizontal", r.sequence = -1;
              break;
            case "right":
              r.location = "horizontal", r.sequence = 1;
              break;
            case "top":
              r.location = "vertical", r.sequence = -1;
              break;
            case "bottom":
              r.location = "vertical", r.sequence = 1;
          }
        else
          r.location = "horizontal", r.sequence = -1;
        n.isUndefined(r.size) && (r.size = so.size), n.isUndefined(r.columns) && (r.columns = so.columns), n.isUndefined(r.rows) && (r.rows = so.rows), (n.isUndefined(r.scrollDirection) || r.scrollDirection != "horizontal") && (r.scrollDirection = so.scrollDirection), n.isUndefined(r.pageMargin) && (r.pageMargin = so.pageMargin), n.isUndefined(r.allowKeyboardControl) && (r.allowKeyboardControl = so.allowKeyboardControl), n.isUndefined(r.allowPageDragging) && (r.allowPageDragging = so.allowPageDragging), n.isUndefined(r.allowResizing) && (r.allowResizing = so.allowResizing), n.isUndefined(r.border) && (r.border = so.border), n.isUndefined(r.pageBackground) && (r.pageBackground = so.pageBackground), n.isUndefined(r.pageBorder) && (r.pageBorder = so.pageBorder), n.isUndefined(r.hoverPageBackground) && (r.hoverPageBackground = so.hoverPageBackground), n.isUndefined(r.hoverPageBorder) && (r.hoverPageBorder = so.hoverPageBorder), n.isUndefined(r.placeholderBackground) && (r.placeholderBackground = so.placeholderBackground), n.isUndefined(r.autoChangeIndex) && (r.autoChangeIndex = so.autoChangeIndex);
      } else
        r = l.Lib.clone(so);
      if (n.isUndefined(r.background) && (r.background = t._webViewer.GetBackground()), n.isUndefined(r.pageNumber) && (r.pageNumber = t._webViewer.GetPageNumberStyle()), n.isUndefined(r.checkbox) && (r.checkbox = t._webViewer.GetCheckboxStyle()), n.isUndefined(r.multiSelectMode) && (r.multiSelectMode = t._webViewer.GetMultiSelectMode() == wn), n.isUndefined(r.selectedPageBorder)) {
        var i = t._webViewer.GetSelectedPageBorder();
        n.isUndef(i) ? r.selectedPageBorder = so.selectedPageBorder : r.selectedPageBorder = i;
      }
      if (n.isUndefined(r.selectedPageBackground)) {
        var a = t._webViewer.GetSelectedPageBackground();
        n.isUndef(a) ? r.selectedPageBackground = so.selectedPageBackground : r.selectedPageBackground = a;
      }
      r.showThumbnail = !1, t.myThumbnailViewer = t._webViewer.myViewer.createThumbnailView(r), t._webViewer.mydvs.Error.errorCode != 0 && n.Errors.WebviewerError(t._webViewer._stwain, t._webViewer.mydvs.Error.errorMessage, t._webViewer.mydvs.Error.errorCode), function(u, c, d) {
        return c.has(u), d;
      }(this, vd, lg).call(this), t.bDispose = !1, t._webViewer.bThumbnailDispose = !1;
    }
    return zn(o, [{ key: "show", value: function() {
      var e = this;
      return !!e._webViewer._NouiNotSupport("show") && (e.myThumbnailViewer ? (e._webViewer.myViewer.setViewMode(1, 1), e._webViewer.SetIfSinglePageMode(!0), e.myThumbnailViewer.showThumbnail = !0, !0) : (e.bDispose ? n.Errors.ThumbnailViewerDispose(e._webViewer._stwain) : n.Errors.ThumbnailViewerNotExist(e._webViewer._stwain), !1));
    } }, { key: "hide", value: function() {
      var e = this;
      return !!e._webViewer._NouiNotSupport("hide") && (e.myThumbnailViewer ? (e.myThumbnailViewer.showThumbnail = !1, !0) : (e.bDispose ? n.Errors.ThumbnailViewerDispose(e._webViewer._stwain) : n.Errors.ThumbnailViewerNotExist(e._webViewer._stwain), !1));
    } }, { key: "dispose", value: function() {
      var e, r = this;
      return !!r.bDispose || ((e = r._webViewer.myViewer.removeThumbnailView(r.myThumbnailViewer)) && (r.bDispose = !0, r._webViewer._thumbnailViewer = void 0, r._webViewer.myThumbnailViewer = void 0, r.myThumbnailViewer = void 0, r._webViewer.bThumbnailDispose = !0), e);
    } }, { key: "updateViewMode", value: function(e) {
      var r = this;
      if (!r.myThumbnailViewer)
        return r.bDispose ? n.Errors.ThumbnailViewerDispose(r._webViewer._stwain) : n.Errors.ThumbnailViewerNotExist(r._webViewer._stwain), !1;
      if (e && e.columns && e.rows) {
        if (e.columns < 0 || e.rows < 0)
          return n.Errors.InvalidPropertyValue(r._webViewer._stwain), !1;
        r.myThumbnailViewer.showThumbnail = !1, r.myThumbnailViewer.setViewMode(e.columns, e.rows), !e.scrollDirection || e.scrollDirection != "horizontal" && e.scrollDirection != "vertical" || (r.myThumbnailViewer.scrollDirection = e.scrollDirection), r.myThumbnailViewer.showThumbnail = !0;
      }
      return !0;
    } }, { key: "updateCheckboxStyle", value: function(e) {
      var r = this;
      return r.myThumbnailViewer ? (r.myThumbnailViewer.checkbox = e, !0) : (r.bDispose ? n.Errors.ThumbnailViewerDispose(r._webViewer._stwain) : n.Errors.ThumbnailViewerNotExist(r._webViewer._stwain), !1);
    } }, { key: "updatePageNumberStyle", value: function(e) {
      var r = this;
      return r.myThumbnailViewer ? (r.myThumbnailViewer.pageNumber = e, !0) : (r.bDispose ? n.Errors.ThumbnailViewerDispose(r._webViewer._stwain) : n.Errors.ThumbnailViewerNotExist(r._webViewer._stwain), !1);
    } }, { key: "on", value: function(e, r) {
      if (e) {
        if (!n.isFunction(r))
          return void n.Errors.CallbackNotAFunction(this._webViewer._stwain);
        this.myThumbnailViewer.on(e, r);
      }
    } }, { key: "off", value: function(e, r) {
      var t = this;
      if (e)
        if (n.isUndefined(r))
          t.myThumbnailViewer.off(e), e == "click" && t.myThumbnailViewer.on("click", function(i, a) {
            t._webViewer.UpdateInfo(!0, !1, !0);
          });
        else {
          if (!n.isFunction(r))
            return void n.Errors.CallbackNotAFunction(t._webViewer._stwain);
          t.myThumbnailViewer.off(e, r);
        }
    } }]), o;
  }();
  function lg() {
    var o = this;
    Tn(o, "location", { get: function() {
      return o._webViewer.GetThumLocation();
    }, set: function(e) {
      return o._webViewer.SetThumLocation(e);
    } }), Tn(o, "size", { get: function() {
      return o._webViewer.GetThumSize();
    }, set: function(e) {
      return o._webViewer.SetThumSize(e);
    } }), Tn(o, "scrollDirection", { get: function() {
      return o._webViewer.GetThumScrollDirection();
    }, set: function(e) {
      return o._webViewer.SetThumScrollDirection(e);
    } }), Tn(o, "showPageNumber", { get: function() {
      return o._webViewer.GetThumShowPageNumber();
    }, set: function(e) {
      return o._webViewer.SetThumShowPageNumber(e);
    } }), Tn(o, "showCheckbox", { get: function() {
      return o._webViewer.GetThumShowCheckbox();
    }, set: function(e) {
      return o._webViewer.SetThumShowCheckbox(e);
    } }), Tn(o, "pageMargin", { get: function() {
      return o._webViewer.GetThumMargin();
    }, set: function(e) {
      return o._webViewer.SetThumMargin(e);
    } }), Tn(o, "border", { get: function() {
      return o._webViewer.GetThumBorder();
    }, set: function(e) {
      return o._webViewer.SetThumBorder(e);
    } }), Tn(o, "background", { get: function() {
      return o._webViewer.GetThumBackground();
    }, set: function(e) {
      return o._webViewer.SetThumBackground(e);
    } }), Tn(o, "pageBackground", { get: function() {
      return o._webViewer.GetThumPageBackground();
    }, set: function(e) {
      return o._webViewer.SetThumPageBackground(e);
    } }), Tn(o, "pageBorder", { get: function() {
      return o._webViewer.GetThumPageBorder();
    }, set: function(e) {
      return o._webViewer.SetThumPageBorder(e);
    } }), Tn(o, "hoverPageBackground", { get: function() {
      return o._webViewer.GetThumHoverBackground();
    }, set: function(e) {
      return o._webViewer.SetThumHoverBackground(e);
    } }), Tn(o, "hoverPageBorder", { get: function() {
      return o._webViewer.GetThumHoverBorder();
    }, set: function(e) {
      return o._webViewer.SetThumHoverBorder(e);
    } }), Tn(o, "placeholderBackground", { get: function() {
      return o._webViewer.GetThumPlaceholderBackground();
    }, set: function(e) {
      return o._webViewer.SetThumPlaceholderBackground(e);
    } }), Tn(o, "selectedPageBorder", { get: function() {
      return o._webViewer.GetThumSelectedPageBorder();
    }, set: function(e) {
      return o._webViewer.SetThumSelectedPageBorder(e);
    } }), Tn(o, "selectedPageBackground", { get: function() {
      return o._webViewer.GetThumSelectedPageBackground();
    }, set: function(e) {
      return o._webViewer.SetThumSelectedPageBackground(e);
    } }), Tn(o, "allowKeyboardControl", { get: function() {
      return o._webViewer.GetThumAllowKeyboardControl();
    }, set: function(e) {
      return o._webViewer.SetThumAllowKeyboardControl(e);
    } }), Tn(o, "allowPageDragging", { get: function() {
      return o._webViewer.GetThumAllowDrag();
    }, set: function(e) {
      return o._webViewer.SetThumAllowDrag(e);
    } }), Tn(o, "allowResizing", { get: function() {
      return o._webViewer.GetThumAllowResize();
    }, set: function(e) {
      return o._webViewer.SetThumAllowResize(e);
    } }), Tn(o, "autoChangeIndex", { get: function() {
      return o._webViewer.GetThumAutoChangeIndex();
    }, set: function(e) {
      return o._webViewer.SetThumAutoChangeIndex(e);
    } });
  }
  n.UI.ThumbnailViewer = yd;
  var tu = "dvsDb", Dc = "dvsDoc", dg = function() {
    function o(e, r) {
      if (Gn(this, o), this._db = e.DataControl._db, r)
        this.syncDb = {};
      else {
        var t = this._db.DBMng._d;
        t[tu] || (t[tu] = {}), t[tu][Dc] || (t[tu][Dc] = {}), this.syncDb = t[tu][Dc];
      }
    }
    return zn(o, [{ key: "setCustomDataSync", value: function(e, r) {
      return this.syncDb[e].customData = r, !0;
    } }, { key: "getCustomDataSync", value: function(e) {
      return this.syncDb[e] || (this.syncDb[e] = {}), this.syncDb[e].customData || (this.syncDb[e].customData = {}), this.syncDb[e].customData;
    } }, { key: "getOriDataSync", value: function(e) {
      return this.syncDb[e] || (this.syncDb[e] = {}), this.syncDb[e].oriData;
    } }, { key: "getMetaDataSync", value: function(e) {
      return this._db.getMetadata(e);
    } }, { key: "dispose", value: function() {
      this._db = null, this.syncDb = null;
    } }]), o;
  }(), hg = function() {
    function o(e) {
      Gn(this, o), this._fileTree = e._tree;
    }
    return zn(o, [{ key: "createFile", value: function(e) {
      return this._fileTree.createFile(e);
    } }, { key: "openFile", value: function(e) {
      var r = this._fileTree.findChild(this._fileTree.dfNode, e);
      return r && r.type === "file" ? r.chs.slice() : [];
    } }, { key: "findFile", value: function(e) {
      if (this._fileTree.dfNode) {
        var r = this._fileTree.findChild(this._fileTree.dfNode, e);
        if (r && r.type === "file")
          return r;
      }
      return null;
    } }, { key: "replaceFileContent", value: function(e, r) {
      var t = this.findFile(e);
      t && (t.chs.splice(0), t.chs = r);
    } }, { key: "getFileCount", value: function(e) {
      var r = this.findFile(e);
      return r ? r.chs.length : 0;
    } }, { key: "getIndexByUidInFile", value: function(e, r) {
      var t = this.findFile(e);
      if (t) {
        for (var i = t.chs.length, a = 0; a < i; a++)
          if (t.chs[a] == r)
            return a;
      }
      return -1;
    } }, { key: "removeByIndexInFile", value: function(e, r) {
      var t = this.findFile(e);
      if (t) {
        var i = t.chs.length;
        if (r >= 0 && r < i)
          return t.chs.splice(r, 1), !0;
      }
      return !1;
    } }, { key: "dispose", value: function() {
      this._fileTree = null;
    } }]), o;
  }(), xs = function() {
    return new l.ImageProc();
  }, nu = l.navInfoSync.bMac || l.navInfoSync.biPhone || l.navInfoSync.biPad;
  function fg(o, e, r, t, i) {
    var a;
    return a = xs(), n.log("[Wasm]camera callback: area detect"), a.initImage(o.imageData, o.rgba, o.imageWidth, o.imageHeight, o.bgra).then(function(u) {
      return n.log("[Wasm]camera callback: image is ready"), a.src = u.srcBuffer, a.detectDocument(i, e, r, t);
    }).then(function(u) {
      return n.log("[Wasm]camera callback: area detect successfully"), u.src = a.src, a.terminate(), a.src = null, u;
    }, function(u) {
      n.closeLoadingMsg(), n.log("[Wasm]camera callback: area detect failed"), a.terminate();
      var c = {};
      throw u && u.code && u.message ? (c._errorString = u.message, c._errorCode = u.code) : (c._errorString = u, n.Errors.DetectCallbackErr(c)), { code: c._errorCode, message: c._errorString };
    });
  }
  function gg(o, e) {
    var r = xs();
    if (n.log("[Wasm]camera callback: perspective"), !n.isArray(e) || e.length != 8) {
      var t = {};
      return n.Errors.InvalidParameterInCallback(t), n.Promise.reject({ code: t._errorCode, message: t._errorString });
    }
    return r.initImage(o.imageData, o.rgba, o.imageWidth, o.imageHeight, o.bgra).then(function(i) {
      return n.log("[Wasm]camera callback: image is ready"), r.src = i.srcBuffer, r.perspective(e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7]);
    }).then(function() {
      n.log("[Wasm]camera callback: perspective successfully");
      var i = void 0, a = o.imageXResolution, u = o.imageYResolution, c = l.Enum_ImageType.IT_JPG;
      o.imageBitDepth <= 8 && (i = o.imageBitDepth, c = l.Enum_ImageType.IT_PNG);
      var d = nu;
      return r.getImage(85, !0, !1, i, a, u, !0, c, d);
    }).then(function(i) {
      n.log("[Wasm]camera callback: filter process successfully");
      var a = r.src;
      return r.terminate(), r.src = null, { src: a, result: i };
    }, function(i) {
      n.log("[Wasm]camera callback: filter process failed"), n.closeLoadingMsg(), r.terminate();
      var a = {};
      throw i && i.code && i.message ? (a._errorString = i.message, a._errorCode = i.code) : (a._errorString = i, n.Errors.PerspectiveCallback(a)), { code: a._errorCode, message: a._errorString };
    });
  }
  function mg(o, e) {
    var r = xs();
    return n.log("[Wasm]camera callback: convert to gray scale filter"), r.initImage(o.imageData, o.rgba, o.imageWidth, o.imageHeight, o.bgra).then(function(t) {
      var i;
      return n.log("[Wasm]camera callback: image is ready"), r.src = t.srcBuffer, e && (i = e.level), r.toGrayscale(i);
    }).then(function() {
      n.log("[Wasm]camera callback: gray scale successfully");
      var t = void 0, i = o.imageXResolution, a = o.imageYResolution, u = l.Enum_ImageType.IT_JPG;
      o.imageBitDepth <= 8 && (t = o.imageBitDepth, u = l.Enum_ImageType.IT_PNG);
      var c = nu;
      return r.getImage(85, !0, !1, t, i, a, !0, u, c);
    }).then(function(t) {
      n.log("[Wasm]camera callback: filter process successfully");
      var i = r.src;
      return r.terminate(), r.src = null, { src: i, result: t };
    }, function(t) {
      n.log("[Wasm]camera callback: filter process failed"), n.closeLoadingMsg(), r.terminate();
      var i = {};
      throw n.Errors.ConvertToGrayScaleFilterCallbackErr(i, t), { code: i._errorCode, message: i._errorString };
    });
  }
  function pg(o, e) {
    return bd(o, e, !0);
  }
  function bd(o, e, r) {
    var t = xs();
    return r ? n.log("[Wasm]camera callback: save toner filter") : n.log("[Wasm]camera callback: convert to BW scale filter"), t.initImage(o.imageData, o.rgba, o.imageWidth, o.imageHeight, o.bgra).then(function(i) {
      n.log("[Wasm]camera callback: image is ready"), t.src = i.srcBuffer;
      var a, u = !!r;
      return e && (a = e.level), t.toBinary(u, a);
    }).then(function() {
      var i = o.imageXResolution, a = o.imageYResolution, u = nu;
      return t.getImage(85, !0, !1, 1, i, a, !0, l.Enum_ImageType.IT_PNG, u);
    }).then(function(i) {
      n.log("[Wasm]camera callback: filter process successfully");
      var a = t.src;
      return t.terminate(), t.src = null, { src: a, result: i };
    }, function(i) {
      n.log("[Wasm]camera callback: filter process failed"), n.closeLoadingMsg(), t.terminate();
      var a = {};
      throw r ? n.Errors.SaveTonerCallbackErr(a, i) : n.Errors.ConvertToBWScaleFilterCallbackErr(a, i), { code: a._errorCode, message: a._errorString };
    });
  }
  function _g(o, e) {
    var r = xs();
    return n.log("[Wasm]camera callback: remove shadow filter"), r.initImage(o.imageData, o.rgba, o.imageWidth, o.imageHeight, o.bgra).then(function(t) {
      var i, a;
      return n.log("[Wasm]camera callback: image is ready"), e && (i = e.level, a = e.alpha), r.src = t.srcBuffer, r.removeShadow(i, a);
    }).then(function() {
      var t = void 0, i = o.imageXResolution, a = o.imageYResolution, u = l.Enum_ImageType.IT_JPG;
      o.imageBitDepth <= 8 && (t = o.imageBitDepth, u = l.Enum_ImageType.IT_PNG);
      var c = nu;
      return r.getImage(85, !0, !1, t, i, a, !0, u, c);
    }).then(function(t) {
      n.log("[Wasm]camera callback: remove shadow successfully");
      var i = r.src;
      return r.terminate(), r.src = null, { src: i, result: t };
    }, function(t) {
      n.log("[Wasm]camera callback: remove shadow failed"), n.closeLoadingMsg(), r.terminate();
      var i = {};
      throw n.Errors.RemoveShadowFilterCallbackErr(i, t), { code: i._errorCode, message: i._errorString };
    });
  }
  function vg(o, e) {
    var r = xs();
    return n.log("[Wasm]camera callback: brighten filter"), r.initImage(o.imageData, o.rgba, o.imageWidth, o.imageHeight, o.bgra).then(function(t) {
      var i;
      return n.log("[Wasm]camera callback: image is ready"), r.src = t.srcBuffer, e && (i = e.level), r.brighten(i);
    }).then(function() {
      var t = void 0, i = o.imageXResolution, a = o.imageYResolution, u = l.Enum_ImageType.IT_JPG;
      o.imageBitDepth <= 8 && (t = o.imageBitDepth, u = l.Enum_ImageType.IT_PNG);
      var c = nu;
      return r.getImage(85, !0, !1, t, i, a, !0, u, c);
    }).then(function(t) {
      n.log("[Wasm]camera callback: brighten successfully");
      var i = r.src;
      return r.terminate(), r.src = null, { src: i, result: t };
    }, function(t) {
      n.log("[Wasm]camera callback: brighten failed"), n.closeLoadingMsg(), r.terminate();
      var i = {};
      throw n.Errors.BrightenFilterCallbackErr(i, t), { code: i._errorCode, message: i._errorString };
    });
  }
  function yg() {
  }
  var bg = document;
  l.DWT;
  var ru = ["topPageChanged", "click", "rightclick", "dblclick", "mousemove", "pageAreaSelected", "pageAreaUnselected", "dragdone", "onDrop", "bufferChanged", "pageChange"], wd = { toolbars: { header: !1, topMenu: !1, asideMenu: !1, bottomMenu: !1 }, groups: {}, buttons: {}, thumbnail: { showThumbnailControl: !1, size: "30%", columns: 1, rows: 3, scrollDirection: "vertical", pageMargin: 10, allowKeyboardControl: !0, allowPageDragging: !0, allowResizing: !1, border: "", background: ks, pageBackground: cs, pageBorder: wc, hoverPageBackground: Ic, hoverPageBorder: Sc, placeholderBackground: Tc, selectedPageBorder: ad, selectedPageBackground: sd, autoChangeIndex: !1, checkbox: la, pageNumber: Wo }, canvasConfig: { canvasMouseShape: "crosshair", canvasBackground: ks, canvasBorder: "", selectedPageBorder: ad, pageBorder: wc, pageMargin: 10, pageBackground: cs, selectedPageBackground: sd, hoverPageBorder: Sc, hoverPageBackground: Ic, placeholderBackground: Tc, autoChangeIndex: !1, allowPageDragging: !0, columns: 1, rows: 1, scrollDirection: "vertical", checkbox: la, pageNumber: Wo }, showSidebar: !1, showMain: !0, showViewer: !0, sidebarWidth: "180", outerBorder: "1px solid rgb(204, 204, 204)", topMenuBorder: "", selectedAreaBorderColor: "rgb(42, 29, 43)", selectionRectAspectRatio: 0, ifAutoScroll: !0, useOuterDrop: !0, allowSlide: !0 }, eo = { background: "#434246", topMenuBorder: "", innerBorder: "", promptToSaveChange: !0, buttons: l.Lib.product.CustomizableDisplayInfo.buttons, dialogText: l.Lib.product.CustomizableDisplayInfo.dialogText };
  l.Lib.product.CustomizableDisplayInfo.buttons, l.Lib.product.CustomizableDisplayInfo.dialogText;
  var $o = { scannerViewer: { headerStyle: { background: "#000000", color: "#ffffff", selectedColor: "#fe8e14" }, bodyStyle: { background: "#ffffff ", loaderBarSource: "" }, footerStyle: { background: "#000000", color: "#ffffff", selectedColor: "#fe8e14" }, fullScreen: !1, enableBorderDetection: !0, polygonStyle: { stroke: "#fe8e14", strokeWidth: "2px", dash: "solid " }, scanButtonStyle: { background: "#fe8e14", color: "#ffffff" }, resolution: { visibility: "visible", valueList: [{ label: "720P", value: { width: 1280, height: 720 } }, { label: "1080P", value: { width: 1920, height: 1080 } }, { label: "2K", value: { width: 2560, height: 1440 } }, { label: "4K", value: { width: 3840, height: 2160 } }], defaultValue: { width: 1280, height: 720 } }, autoScan: { visibility: "visible", enableAutoScan: !1 }, autoDetect: { visibility: "visible", enableAutoDetect: !1, acceptedPolygonConfidence: 80, fpsLimit: 3, acceptedBlurryScore: 0, autoCaptureDelay: 1e3 }, continuousScan: !0, switchCamera: { visibility: "visible" }, loadLocalFile: { visibility: "visible" }, funcConfirmExit: l.funcConfirmExit }, documentEditorSettings: { visibility: "visible", defaultViewerName: "CropViewer", headerStyle: { background: "#000000", color: "#ffffff", selectedColor: "#fe8e14", disabledColor: "#808080" }, bodyStyle: { background: "#ffffff ", loaderBarSource: "" }, footerStyle: { background: "#000000", color: "#ffffff", selectedColor: "#fe8e14" }, insert: { visibility: "visible", position: "before" }, remove: { visibility: "visible", funcConfirmRemove: l.funcConfirmRemove }, rotateLeft: { visibility: "visible" }, filter: { visibility: "visible", valueList: [{ label: "Original", value: "original", option: { level: 1 } }, { label: "B&W", value: "blackAndWhite", option: { level: 1 } }, { label: "Grayscale", value: "grayscale", option: { level: 1 } }, { label: "Clean", value: "clean", option: { level: 1 } }, { label: "Brightening", value: "brightening", option: { level: 1 } }, { label: "Save Toner", value: "saveToner", option: { level: 1 } }], defaultValue: "original", applyToAll: { visibility: "visible", enableApplyToAll: !1, label: "Apply to all" } }, crop: { visibility: "visible" }, cropViewer: { visibility: "visible", polygonStyle: { stroke: "#fe8e14", strokeWidth: "2px", dash: "solid " }, rotateLeft: { visibility: "visible" }, rotateRight: { visibility: "visible" }, autoDetectBorder: { visibility: "visible" }, funcConfirmExit: l.funcConfirmCropViewerExit }, funcConfirmExit: l.funcConfirmMainViewerExit, funcConfirmExitAfterSave: l.funcConfirmExitAfterSave } }, Ya = { isFunction: function(o) {
    return o && typeof o == "function";
  }, addClass: function(o, e) {
    var r = n.one(o);
    r && r.length > 0 && r.addClass(e);
  }, removeClass: function(o, e) {
    var r = n.one(o);
    r && r.length > 0 && r.removeClass(e);
  }, output: function(o, e) {
    l.DWT.Debug && n.log(e);
  }, getTop: function(o) {
    var e = o.offsetTop;
    return o.offsetParent != null && (e += Ya.getTop(o.offsetParent)), e;
  }, getLeft: function(o) {
    var e = o.offsetLeft;
    return o.offsetParent != null && (e += Ya.getLeft(o.offsetParent)), e;
  } };
  n._safePromptCustomMsg(function() {
    eo.buttons = l.Lib.product.CustomizableDisplayInfo.buttons, eo.dialogText = l.Lib.product.CustomizableDisplayInfo.dialogText;
  });
  var Id = function() {
    function o(r, t, i) {
      Gn(this, o), ar(this, "_bFireSync", !0);
      var a = this;
      a._ImgManager = r, a._stwain = r._stwain, a._UIView = i, a._currentTag = "", a.bShowImageEdit = !1, a.acceptDrop = !0, a.currentFileName = Ni, a._documentScanConfiguration = "", a.ifWebviewerInit = !1, a._Init(t), l.funcConfirmExit && l.Lib.isFunction(l.funcConfirmExit) && ($o.scannerViewer.funcConfirmExit = l.funcConfirmExit), l.funcConfirmRemove && l.Lib.isFunction(l.funcConfirmRemove) && ($o.documentEditorSettings.remove.funcConfirmRemove = l.funcConfirmRemove), l.funcConfirmMainViewerExit && l.Lib.isFunction(l.funcConfirmMainViewerExit) && ($o.documentEditorSettings.funcConfirmExit = l.funcConfirmMainViewerExit), l.funcConfirmExitAfterSave && l.Lib.isFunction(l.funcConfirmExitAfterSave) && ($o.documentEditorSettings.funcConfirmExitAfterSave = l.funcConfirmExitAfterSave), l.funcConfirmCropViewerExit && l.Lib.isFunction(l.funcConfirmCropViewerExit) && ($o.documentEditorSettings.cropViewer.funcConfirmExit = l.funcConfirmCropViewerExit), a._globalScanConfiguration_ScannViewer = l.Lib.clone($o), a._globalScanConfiguration = l.Lib.clone($o), a._globalScanConfiguration.documentEditorSettings.defaultViewerName = "mainViewer", bc && l.DWT.UseDefaultViewer && (a._stwain._viewer = new bc(a, r));
    }
    var e;
    return zn(o, [{ key: "dispose", value: function() {
      var r = this;
      r.containerElement = null, r.myViewer && (r.myViewer.off("bufferChanged"), r.mydvs.ViewControl.removeViewer(r.myViewer), r.myViewer = null), r.mydvs && (r.mydvs.dispose(), r.mydvs = null), r._dvsWrapper && (r._dvsWrapper.dispose(), r._dvsWrapper = null), r._fileWrapper && (r._fileWrapper.dispose(), r._fileWrapper = null), r.myccvs && (r.myccvs.dispose(), r.myccvs = null), r.mydocEditManager && (r.mydocEditManager.dispose(), r.mydocEditManager = null), r._UIView = null, r._ImgManager = null, r._stwain._viewer && (r._stwain._viewer.dispose(), r._stwain._viewer = null), r._stwain = null;
    } }, { key: "_Init", value: function(r) {
      var t, i = this;
      if (r.Container && (n.isNodeList(r.Container) || n.isArray(r.Container) && r.Container.length > 0)) {
        var a = r.Container[0];
        a ? ((t = document.createElement("div")).style.width = "100%", t.style.height = "100%", a.appendChild(t), i.containerElement = a) : i.containerElement = "";
      } else
        i.containerElement = "";
      if (i.mydvs)
        i.containerElement != "" && (i.BindView(i.containerElement), i.show());
      else {
        i.initWidth = r.Width, i.initHeight = r.Height;
        var u = wd;
        u.width = i.initWidth, u.height = i.initHeight, i._stwain._isPC() || (u.canvasConfig.canvasMouseShape = "pointer");
        var c = !0;
        i._stwain._bRemoteMode && (c = !1), i.mydvs = new l.ViewModel({ uiConfig: u, displayMode: "continuous", fitType: "window", scrollerConfig: {}, autoCreateOffScreenCanvas: c }), i._dvsWrapper = new dg(i.mydvs), i._fileWrapper = new hg(i.mydvs.File), i._bindViewUi = !1, i.myViewer = i.mydvs.ViewControl.getViewerByUid(), l.DWT.UseDefaultViewer && i.containerElement && i.mydvs.ViewControl && (i.mydvs.ViewControl.bindViewUiConstructor(l.ViewUi), i.myViewer.bindView(t), i._bindViewUi = !0), i.myViewer && (i._stwain._isPC() ? i.SetOperationMode(1) : i.SetOperationMode(0)), i.containerElement && i._InitDVS(), i._bindEvent = !1, i._bindViewUi ? (i._BindViewerEvents(), i._bindEvent = !0) : i.myViewer.on("bufferChanged", function(d, _) {
          i.bufferChanged(d, _);
        }), i._bRegistedLoad = !1;
      }
    } }, { key: "BindView", value: function(r) {
      var t, i, a, u, c = this;
      return c.OnCloseImageEditor(), u = (i = r && r.nodeName == "DIV" ? r : bg.getElementById(r)).id, n.isString(u) || (i.id = n.getRandom(), u = i.id), n.isUndefined(i) || n.isNull(i) ? a = i : ((a = document.createElement("div")).style.width = "100%", a.style.height = "100%", i.appendChild(a)), c._bindViewUi == 0 && c.mydvs.ViewControl && (c.mydvs.ViewControl.bindViewUiConstructor(l.ViewUi), n.html5.ui.initProgress(c._stwain), c._bindViewUi = !0), n.isUndefined(c.myViewer.width) && (i.style.width != "" ? c.initWidth = i.style.width : i.clientWidth > 0 ? c.initWidth = i.clientWidth : i.offsetWidth > 0 ? c.initWidth = i.offsetWidth : i.scrollWidth > 0 ? c.initWidth = i.scrollWidth : c.initWidth = 100), n.isUndefined(c.myViewer.height) && (i.style.height != "" ? c.initHeight = i.style.height : i.clientHeight > 0 ? c.initHeight = i.clientHeight : i.offsetHeight > 0 ? c.initHeight = i.offsetHeight : i.scrollHeight > 0 ? c.initHeight = i.scrollHeight : c.initHeight = 100), (t = c.myViewer.bindView(a)) ? (c.myViewer.showViewer = !1, c.containerElement = i, c._stwain._containerElement = i, c._stwain._containerID = u, c._stwain._bBindViewer = !0, c._InitDVS(), c.SetAcceptDrop(!0), c.SetAllowSlide(!0), c.myViewer.off("bufferChanged"), c.resetUISettingsInner(!1, c.GetWidth(), c.GetHeight()), c._bindEvent || c._BindViewerEvents(), c.hide(), t) : (n.Errors.WebviewerError(c._stwain, c.mydvs.Error.errorMessage, c.mydvs.Error.errorCode), !1);
    } }, { key: "CreateTemplate", value: function(r, t) {
      var i = this;
      return i._stwain.Template = new ld(i, i._ImgManager, t), i._stwain.Template;
    } }, { key: "BindTemplate", value: function(r, t) {
      var i = !1;
      return t && t._documentTemplate && (i = t._documentTemplate.BindView(r)), i;
    } }, { key: "show", value: function() {
      var r = this;
      if (!r._NouiNotSupport("show"))
        return !1;
      if (r._stwain.Template && r._stwain.Template._documentTemplate) {
        r._stwain.Template._documentTemplate.ifShowDocumentTemplate(!0);
        var t = document.getElementById("btnCapture" + r.myViewer.postfix);
        t && (t.style.display = "");
      }
      return r.myViewer.showViewer = !0, !0;
    } }, { key: "hide", value: function() {
      var r = this;
      if (!r._NouiNotSupport("hide"))
        return !1;
      if (r._stwain.Template && r._stwain.Template._documentTemplate) {
        r._stwain.Template._documentTemplate.ifShowDocumentTemplate(!1);
        var t = document.getElementById("btnCapture" + r.myViewer.postfix);
        t && (t.style.display = "none");
      }
      return r.myViewer.showViewer = !1, !0;
    } }, { key: "UnbindView", value: function() {
      var r, t = this;
      if (t._stwain && t._stwain.Addon && t._stwain.Addon.Camera && t._stwain.Addon.Camera._viewer && t._stwain.Addon.Camera.getStatus() != "" && t._stwain.Addon.Camera.closeSource(), r = t.myViewer.unbindView()) {
        if (t._bindViewUi = !1, t._UnbindViewerEvents(), t._bindEvent = !1, t._imageEditor && t._imageEditor.dispose(), t._documentEditor && t._documentEditor.dispose(), t._thumbnailViewer && t._thumbnailViewer.dispose(), t._customElement && t._customElement.dispose(), t.closeVideo(), t.containerElement && t.containerElement.childNodes && t.containerElement.childNodes.length > 0)
          if (t.containerElement.childNodes.length == 1)
            t.containerElement && t.containerElement.childNodes[0].childNodes.length == 0 && t.containerElement.removeChild(t.containerElement.childNodes[0]);
          else
            for (var i = t.containerElement.childNodes.length - 1; i >= 0; i--)
              t.containerElement && t.containerElement.removeChild(t.containerElement.childNodes[i]);
        t.containerElement = "";
      } else
        n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode);
      return t._stwain._bBindViewer = !1, r;
    } }, { key: "SetUIView", value: function(r) {
      this._UIView = r;
    } }, { key: "_BindViewerEvents", value: function() {
      var r = this;
      r.myViewer && (r.myViewer.off("bufferChanged"), n.each(ru, function(t) {
        r.myViewer.on(t, function(i, a) {
          r[t](i, a);
        });
      }));
    } }, { key: "_UnbindViewerEvents", value: function() {
      var r = this;
      n.each(ru, function(t) {
        t != "bufferChanged" && r.myViewer.off(t);
      });
    } }, { key: "_InitDVS", value: function() {
      var r = this;
      r.ifWebviewerInit = !0, r.myViewer.showHeader = !1, r.myViewer.showTopMenu = !1, r.myViewer.showFooter = !1, r.myViewer.showMain = !0, r.myViewer.bOnlyShowThumbnailsView = !1, r.myViewer.showThumbnailControl = !1, r.myViewer.showLatestPage = !0, r.myViewer.minZoom = r._UIView.MIN_ZOOM, r.myViewer.maxZoom = r._UIView.MAX_ZOOM;
    } }, { key: "ShowImageEditor", value: function(r, t, i, a) {
      var u = this;
      return r && i && a ? (eo.element = r, eo.width = i, eo.height = a) : (eo.element = void 0, eo.width = void 0, eo.height = void 0), eo.border = u.GetBorder(), eo.selectionRectAspectRatio = u.GetSelectionRectAspectRatio(), u.createImageEditor(eo), u._stwain._errorCode != 0 && (u._imageEditor.dispose(), u.createImageEditor(eo)), u._imageEditor.show(), !0;
    } }, { key: "OnCloseImageEditor", value: function() {
      var r = this;
      return !!r.bShowImageEdit && (r._imageEditor && r._imageEditor.dispose(), r.bShowImageEdit = !1, r._imageEditor = void 0, r._imageEditorInner = void 0, !0);
    } }, { key: "GetUidByIndex", value: function(r) {
      var t = this;
      return r < 0 || r >= t.GetHowManyImagesInBuffer() ? (n.Errors.IndexOutOfRange(t._stwain), -1) : t.myViewer.getUidByIndex(r);
    } }, { key: "GetIndexByUid", value: function(r) {
      return r && r != "" && r != -1 ? this.myViewer.getIndexByUid(r) : (n.Errors.IndexOutOfRange(this._stwain), -1);
    } }, { key: "SetMetaDataByIndex", value: function(r, t) {
      var i = this;
      if (!(r < 0 || r >= i.GetHowManyImagesInBuffer()))
        return i.myViewer.setMetadataByIndex(r, t);
      n.Errors.IndexOutOfRange(i._stwain);
    } }, { key: "GetMetaDataByIndex", value: function(r) {
      var t = this;
      if (!(r < 0 || r >= t.GetHowManyImagesInBuffer()))
        return t.myViewer.getMetadataByIndex(r);
      n.Errors.IndexOutOfRange(t._stwain);
    } }, { key: "GetCustomDataByIndex", value: function(r) {
      var t, i = this;
      if (!(r < 0 || r >= i.GetHowManyImagesInBuffer()))
        return t = n.isArray(r) ? r[0] : r, i.myViewer.getCustomDataByIndex(t);
      n.Errors.IndexOutOfRange(i._stwain);
    } }, { key: "GetHowManyImagesInBuffer", value: function() {
      return n.isUndefined(this.myViewer.currentPageCount) ? 0 : this.myViewer.currentPageCount;
    } }, { key: "UpdateInfo", value: function(r, t, i) {
      var a = this;
      t && l.Lib.hideMask(), r && a.bShowImageEdit && a._imageEditorInner && a._imageEditorInner.updateMode(i);
    } }, { key: "AppendImage", value: function(r, t) {
      var i, a, u = this, c = r.imageUrl, d = r.minImageUrl, _ = r.serverId, v = r.bAppendImage, T = r.index, M = {}, A = u.currentFileName;
      if (t && (n.isUndef(t.currentFileName) || (A = t.currentFileName, n.log("metaDataObj.currentFileName:" + t.currentFileName)), n.isUndef(t.width) || (M.width = t.width), n.isUndef(t.height) || (M.height = t.height), n.isUndef(t.bitDepth) || (M.bitDepth = t.bitDepth), n.isUndef(t.resolutionX) || (M.resolutionX = t.resolutionX), n.isUndef(t.resolutionY) || (M.resolutionY = t.resolutionY), n.isUndef(t.oriBlobData) || (a = t.oriBlobData)), u.ifFileNameExist(A) == 0)
        return !1;
      if (n.log("AppendImage_oriData:" + c), v || v == 0 && u.GetHowManyImagesInBuffer() == 0) {
        if (a) {
          var S, V = { imageId: _ };
          for (S in a)
            a.hasOwnProperty(S) && (V[S] = a[S]);
          i = u.mydvs.DataControl.appendSync(A, [{ oriData: c, minData: d, metadata: M, customData: V }]);
        } else
          i = u.mydvs.DataControl.appendSync(A, [{ oriData: c, minData: d, metadata: M, customData: { imageId: _ } }]);
        return r.uuid = i[0], u.UpdateInfo(!0), i[0];
      }
      return i = u.mydvs.DataControl.insertSync(A, [{ oriData: c, minData: d, metadata: M, customData: { imageId: _ } }], T), r.uuid = i[0], u.UpdateInfo(!0), i[0];
    } }, { key: "MobileAppendImage", value: function(r, t) {
      var i, a = this, u = r.bAppendImage, c = r.index, d = {}, _ = a.currentFileName;
      return t.imageId = r.serverId, t && t.currentFileName && (_ = t.currentFileName), a.ifFileNameExist(_) != 0 && (t && t.metadata && (n.isUndef(t.metadata.width) || (d.width = t.metadata.width), n.isUndef(t.metadata.imageWidth) || (d.width = t.metadata.imageWidth), n.isUndef(t.metadata.height) || (d.height = t.metadata.height), n.isUndef(t.metadata.imageHeight) || (d.height = t.metadata.imageHeight), n.isUndef(t.metadata.bitDepth) || (d.bitDepth = t.metadata.bitDepth), n.isUndef(t.metadata.imageBitDepth) || (d.bitDepth = t.metadata.imageBitDepth), n.isUndef(t.metadata.resolutionX) || (d.resolutionX = t.metadata.resolutionX), n.isUndef(t.metadata.imageXResolution) || (d.resolutionX = t.metadata.imageXResolution), n.isUndef(t.metadata.resolutionY) || (d.resolutionY = t.metadata.resolutionY), n.isUndef(t.metadata.imageYResolution) || (d.resolutionY = t.metadata.imageYResolution), n.isUndef(t.metadata.oriBlobData) || (d.oriBlobData = t.metadata.oriBlobData), delete t.metadata), t.dataType != "url" && "srcId" in t ? u == 0 && a.GetHowManyImagesInBuffer() == 0 ? (i = a.mydvs.DataControl.appendSync(_, [{ oriData: null, minData: null, metadata: d, customData: t }]), r.uuid = i[0], a.UpdateInfo(!0), i[0]) : (i = a.mydvs.DataControl.insertSync(_, [{ oriData: null, minData: null, metadata: d, customData: t }], c), r.uuid = i[0], a.UpdateInfo(!0), i[0]) : ("src" in t && (r.imageUrl = t.src, delete t.src), "imageUrl" in t && (r.imageUrl = t.imageUrl, delete t.imageUrl), d.currentFileName = _, a.AppendImage(r, d)));
    } }, { key: "UpdateImage", value: function(r, t) {
      var i = this, a = r.imageUrl, u = r.minImageUrl, c = r.serverId, d = r.uuid, _ = {};
      return t && (n.isUndef(t.width) || (_.width = t.width), n.isUndef(t.height) || (_.height = t.height), n.isUndef(t.bitDepth) || (_.bitDepth = t.bitDepth), n.isUndef(t.resolutionX) || (_.resolutionX = t.resolutionX), n.isUndef(t.resolutionY) || (_.resolutionY = t.resolutionY)), d && d != "" && d != -1 ? (i._UpdateImageInner(d, { oriData: a, minData: u, customData: { imageId: c }, metadata: _ }), i.UpdateInfo(!1, !0), d) : (n.Errors.IndexOutOfRange(i._stwain), !1);
    } }, { key: "MobileUpdateImage", value: function(r, t) {
      var i = this, a = r.index, u = r.uuid, c = {}, d = {};
      if (!u || u == "" || u == -1)
        return n.Errors.IndexOutOfRange(i._stwain), !1;
      if ((c = i.GetMetaDataByIndex(a)) && "metadata" in t && t.metadata && (n.isUndef(t.metadata.width) || (c.width = t.metadata.width), n.isUndef(t.metadata.imageWidth) || (c.width = t.metadata.imageWidth), n.isUndef(t.metadata.height) || (c.height = t.metadata.height), n.isUndef(t.metadata.imageHeight) || (c.height = t.metadata.imageHeight), n.isUndef(t.metadata.bitDepth) || (c.bitDepth = t.metadata.bitDepth), n.isUndef(t.metadata.imageBitDepth) || (c.bitDepth = t.metadata.imageBitDepth), n.isUndef(t.metadata.resolutionX) || (c.resolutionX = t.metadata.resolutionX), n.isUndef(t.metadata.imageXResolution) || (c.resolutionX = t.metadata.imageXResolution), n.isUndef(t.metadata.resolutionY) || (c.resolutionY = t.metadata.resolutionY), n.isUndef(t.metadata.imageYResolution) || (c.resolutionY = t.metadata.imageYResolution)), t.dataType == "url" || !("srcId" in t))
        return "src" in t && (r.imageUrl = t.src), "imageUrl" in t && (r.imageUrl = t.imageUrl), i.UpdateImage(r, c);
      if (t && t.src && t.srcId) {
        if (d = i.myViewer.getCustomDataByIndex(a)) {
          d.src = t.src, d.srcId = t.srcId, n.isUndef(t.imgType) || (d.imgType = t.imgType);
          var _ = {};
          d && (_.customData = d, _.metadata = c, i._UpdateImageInner(u, _));
        }
        i.UpdateInfo(!1, !0);
      }
      return u;
    } }, { key: "_UpdateImageInner", value: function(r, t) {
      this.mydvs.DataControl.updateSync(r, t);
    } }, { key: "RemoveByIndex", value: function(r) {
      var t, i = this;
      if (r < 0 || r >= i.GetHowManyImagesInBuffer())
        return n.Errors.IndexOutOfRange(i._stwain), !1;
      i.bShowImageEdit && i._imageEditorInner && i._imageEditorInner._IfChangedWithinTheEditor == 1 && (i._imageEditorInner.iChangedIndex != r ? i._imageEditorInner.iChangedIndex > r && i._imageEditorInner.iChangedIndex-- : (i._imageEditorInner._IfChangedWithinTheEditor = !1, i._imageEditorInner.iChangedIndex = -1, i._imageEditorInner.OnCloseInstall())), r == this.GetCurrentIndex() && i.clearSelectedAreas();
      var a = [];
      return a.push(r), (t = i.myViewer.removeSync(a)) ? i.UpdateInfo(!0) : n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), t;
    } }, { key: "RemoveAllImages", value: function() {
      var r, t = this;
      return t.bShowImageEdit && t._imageEditorInner && t._imageEditorInner._IfChangedWithinTheEditor == 1 && (t._imageEditorInner._IfChangedWithinTheEditor = !1, t._imageEditorInner.iChangedIndex = -1, t._imageEditorInner.OnCloseInstall()), t._bBindViewer && t.clearSelectedAreas(), (r = t.myViewer.removeAllSync()) ? (t.UpdateInfo(), t.bShowImageEdit && t._imageEditorInner && t._imageEditorInner.updateMode()) : n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode), r;
    } }, { key: "SetCurrentIndex", value: function(r) {
      var t, i = this;
      return r < 0 || r >= i.GetHowManyImagesInBuffer() ? (n.Errors.IndexOutOfRange(i._stwain), l.Lib.hideMask(), !1) : !/^(\d+)$/.test(r) || r < 0 ? (n.Errors.MobileServer_InvalidIndex(i._stwain), l.Lib.hideMask(), !1) : ((t = i.myViewer.setCurrentIndex(r)) || n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), i.UpdateInfo(!0, !0), t);
    } }, { key: "OnlySetCurrentIndex", value: function(r) {
      var t, i = this;
      return r < 0 || r >= i.GetHowManyImagesInBuffer() ? (n.Errors.IndexOutOfRange(i._stwain), !1) : ((t = i.myViewer.setCurrentIndex(r)) || n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), t);
    } }, { key: "GetCurrentIndex", value: function() {
      var r = this, t = -1;
      return r.GetHowManyImagesInBuffer() > 0 && (t = r.myViewer.getCurrentIndex(), (n.isUndef(t) || t < 0) && n.Errors.WebviewerError(r._stwain, r.mydvs.Error.errorMessage, r.mydvs.Error.errorCode)), t;
    } }, { key: "SetSelectedindexes", value: function(r) {
      var t, i = this;
      return (t = i.myViewer.setSelectedIndexes(r)) || n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), t;
    } }, { key: "GetSelectedindexes", value: function() {
      return this.myViewer.getSelectedIndexes();
    } }, { key: "GoToPage", value: function(r) {
      var t, i = this;
      return r < 0 || r >= i.GetHowManyImagesInBuffer() ? (n.Errors.IndexOutOfRange(i._stwain), l.Lib.hideMask(), -1) : !/^(\d+)$/.test(r) || r < 0 ? (n.Errors.MobileServer_InvalidIndex(i._stwain), l.Lib.hideMask(), -1) : ((t = i.myViewer.gotoPage(r)) < 0 && n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), i.UpdateInfo(!0, !0), t);
    } }, { key: "SetSelectedImageArea", value: function(r, t, i, a) {
      var u, c = this, d = [];
      if (!c._NouiNotSupport("setSelectedAreas"))
        return !1;
      var _ = {};
      return _.left = r, _.top = t, _.width = i - r, _.height = a - t, d.push(_), (u = c.myViewer.setSelectedBoxes(d, !1)) || n.Errors.WebviewerError(c._stwain, c.mydvs.Error.errorMessage, c.mydvs.Error.errorCode), u;
    } }, { key: "SetSelectionRectAspectRatio", value: function(r) {
      return !!this._NouiNotSupport("selectionRectAspectRatio") && (this.myViewer.selectionBoxAspectRatio = r, !0);
    } }, { key: "GetSelectionRectAspectRatio", value: function() {
      return this._NouiNotSupport("selectionRectAspectRatio") ? this.myViewer.selectionBoxAspectRatio : "";
    } }, { key: "ZoomIn", value: function() {
      var r, t = this;
      return (r = t.myViewer.zoomIn()) || n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode), r;
    } }, { key: "ZoomOut", value: function() {
      var r, t = this;
      return (r = t.myViewer.zoomOut()) || n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode), r;
    } }, { key: "SetZoom", value: function(r, t, i) {
      var a = this, u = !1;
      return !!a._NouiNotSupport("zoom") && ((u = t & i ? a.myViewer.zoomTo(r, t, i) : a.myViewer.zoom = r) || n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), u);
    } }, { key: "GetZoom", value: function() {
      return this._NouiNotSupport("zoom") ? this.myViewer.zoom : "";
    } }, { key: "SetFitType", value: function(r) {
      var t = this, i = "window";
      if (!t._NouiNotSupport("fitType"))
        return !1;
      if (!n.isUndefined(r)) {
        if (r != "width" && r != "height" && r != "window")
          return n.Errors.InvalidValue(t._stwain), !1;
        i = r;
      }
      return t.myViewer.fitType = i, !0;
    } }, { key: "GetMouseShape", value: function() {
      var r;
      switch (this.GetCursor()) {
        case "default":
          r = fe;
          break;
        case "pointer":
          r = Me;
          break;
        case "crosshair":
        default:
          r = Z;
          break;
        case "zoom-in":
          r = Ue;
      }
      return r;
    } }, { key: "SetMouseShape", value: function(r) {
      var t;
      switch (r) {
        case fe:
          t = "default";
          break;
        case Me:
          t = "pointer";
          break;
        case Z:
          t = "crosshair";
          break;
        case Ue:
          t = "zoom-in";
          break;
        default:
          t = "crosshair";
      }
      return this.SetCursor(t), !0;
    } }, { key: "SetImageMargin", value: function(r) {
      return this.SetPageMargin(r);
    } }, { key: "GetImageMargin", value: function() {
      return this.GetPageMargin();
    } }, { key: "SetSelectionImageBorderColor", value: function(r) {
      var t = r;
      return l.Lib.isNumber(t) && (t = l.Lib.getColor(t)), t.indexOf("1px solid") == -1 && (t = "1px solid " + t), this.SetSelectedPageBorder(t);
    } }, { key: "GetSelectedPageBorder", value: function() {
      return this._NouiNotSupport("selectedPageBorder") ? this.myViewer.selectedPageBorder : "";
    } }, { key: "SetSelectedPageBorder", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("selectedPageBorder") && (t.myViewer.selectedPageBorder = r, t._thumbnailViewer && t.SetThumSelectedPageBorder(r), !0);
    } }, { key: "GetSelectedPageBackground", value: function() {
      return this._NouiNotSupport("selectedPageBackground") ? this.myViewer.selectedPageBackground : "";
    } }, { key: "SetSelectedPageBackgroundInner", value: function(r) {
      return this.myViewer.selectedPageBackground = r, !0;
    } }, { key: "SetSelectedPageBackground", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("selectedPageBackground") && (t.SetSelectedPageBackgroundInner(r), t._thumbnailViewer && t.SetThumSelectedPageBackground(r), !0);
    } }, { key: "GetShowPageNumber", value: function() {
      return this._NouiNotSupport("showPageNumber") ? this.myViewer.pageNumber.visibility == "visible" : "";
    } }, { key: "SetShowPageNumberInner", value: function(r) {
      var t = { visibility: "hidden" };
      return r && (t.visibility = "visible"), this.UpdatePageNumberStyle(t), !0;
    } }, { key: "SetShowPageNumber", value: function(r) {
      var t = this;
      if (!t._NouiNotSupport("showPageNumber"))
        return !1;
      if (!n.isBoolean(r))
        return n.Errors.InvalidValue(t._stwain), !1;
      var i = { visibility: "hidden" };
      return r && (i.visibility = "visible"), t.UpdatePageNumberStyle(i), t._thumbnailViewer && t.UpdateThumPageNumberStyle(i), !0;
    } }, { key: "UpdatePageNumberStyle", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("updatePageNumberStyle") && (t.myViewer.pageNumber = r, t._thumbnailViewer && t.UpdateThumPageNumberStyle(r), !0);
    } }, { key: "GetPageNumberStyle", value: function() {
      return !!this._NouiNotSupport("getPageNumberStyle") && this.myViewer.pageNumber;
    } }, { key: "GetAutoChangeIndex", value: function() {
      return this._NouiNotSupport("autoChangeIndex") ? this.myViewer.autoChangeIndex : "";
    } }, { key: "SetAutoChangeIndex", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("autoChangeIndex") && (n.isBoolean(r) ? (t.myViewer.autoChangeIndex = r, !0) : (n.Errors.InvalidValue(t._stwain), !1));
    } }, { key: "GetShowCheckbox", value: function() {
      return this._NouiNotSupport("checkbox") ? this.myViewer.checkbox.visibility == "visible" : 0;
    } }, { key: "SetShowCheckbox", value: function(r) {
      var t = this;
      if (!t._NouiNotSupport("checkbox"))
        return !1;
      var i = { visibility: "hidden" };
      return r && (i.visibility = "visible"), t.myViewer.checkbox = i, i.visibility == "visible" ? t.SetMultiSelectMode(wn) : t.SetMultiSelectMode(Fn), t._thumbnailViewer && (t.UpdateThumCheckboxStyle(i), i.visibility == "visible" ? t.SetThumMultiSelectMode(wn) : t.SetThumMultiSelectMode(Fn)), !0;
    } }, { key: "GetCheckboxStyle", value: function() {
      return !!this._NouiNotSupport("getCheckboxStyle") && this.myViewer.checkbox;
    } }, { key: "UpdateCheckboxStyle", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("updateCheckboxStyle") && (t.myViewer.checkbox = r, t._thumbnailViewer && t.UpdateThumCheckboxStyle(r), !0);
    } }, { key: "GetMultiSelectMode", value: function() {
      return this._NouiNotSupport("multiSelectMode") ? this.myViewer.multiSelectMode ? wn : Fn : 0;
    } }, { key: "SetMultiSelectMode", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("multiSelectMode") && (n.isNumber(r) ? (t.myViewer.multiSelectMode = r == wn, t._thumbnailViewer && t.SetThumMultiSelectMode(r), !0) : (n.Errors.InvalidValue(t._stwain), !1));
    } }, { key: "SetHoverPageBackground", value: function(r) {
      return this.myViewer.hoverPageBackground = r, !0;
    } }, { key: "SetBackground", value: function(r) {
      var t = this, i = r;
      return !!t._NouiNotSupport("background") && (l.Lib.isNumber(i) && (i = l.Lib.getColor(i)), t.myViewer.canvasBackground = i, t._thumbnailViewer && t.SetThumBackground(i), !0);
    } }, { key: "GetBackground", value: function() {
      return this._NouiNotSupport("background") ? this.myViewer.canvasBackground : "";
    } }, { key: "SetViewerBorder", value: function(r) {
      var t = "1px solid" + r;
      return this.SetBorder(t);
    } }, { key: "SetWidth", value: function(r) {
      var t = this;
      return t._NouiNotSupport("width") ? !/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(r) || r <= 0 ? (n.Errors.MobileServer_InvalidWidth(t._stwain), !1) : (t.myViewer.width = r, !0) : !1;
    } }, { key: "GetWidthInner", value: function() {
      return this.myViewer.width;
    } }, { key: "GetWidth", value: function() {
      return this._NouiNotSupport("width") ? this.GetWidthInner() : "";
    } }, { key: "SetWidthInner", value: function(r, t) {
      var i = this;
      if (t)
        i.myViewer.width = r;
      else if (n.isString(r) && r.indexOf("%") >= 0) {
        var a = i._stwain._containerElement;
        i.myViewer.width = Math.floor(n.css(a, "width") * parseInt(r) / 100);
      } else
        i.myViewer.width = r;
      return !0;
    } }, { key: "GetHeightInner", value: function() {
      return this.myViewer.height;
    } }, { key: "GetHeight", value: function() {
      return this._NouiNotSupport("height") ? this.GetHeightInner() : "";
    } }, { key: "SetHeight", value: function(r) {
      var t = this;
      return t._NouiNotSupport("height") ? !/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(r) || r <= 0 ? (n.Errors.MobileServer_InvalidHeight(t._stwain), !1) : (t.myViewer.height = r, !0) : !1;
    } }, { key: "GetIdPostfix", value: function() {
      return this._NouiNotSupport("idPostfix") ? this.myViewer.postfix : "";
    } }, { key: "SetHeightInner", value: function(r, t) {
      var i = this;
      if (t)
        i.myViewer.height = r;
      else if (n.isString(r) && r.indexOf("%") >= 0) {
        var a = i._stwain._containerElement;
        i.myViewer.height = Math.floor(n.css(a, "height") * parseInt(r) / 100);
      } else
        i.myViewer.height = r;
      return !0;
    } }, { key: "SwitchImage", value: function(r, t) {
      var i, a = this;
      return r < 0 || r >= a.GetHowManyImagesInBuffer() || t < 0 || t >= a.GetHowManyImagesInBuffer() ? (n.Errors.IndexOutOfRange(a._stwain), !1) : ((i = a.myViewer.switchPage(r, t)) || n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), i);
    } }, { key: "MoveImage", value: function(r, t) {
      var i, a = this;
      return r < 0 || r >= a.GetHowManyImagesInBuffer() || t < 0 || t >= a.GetHowManyImagesInBuffer() ? (n.Errors.IndexOutOfRange(a._stwain), !1) : ((i = a.myViewer.movePage(r, t)) || n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), i);
    } }, { key: "SetIfSinglePageMode", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("singlePageMode") && (t.myViewer.displayMode = r ? "single" : "continuous", !0);
    } }, { key: "GetIfSinglePageMode", value: function() {
      return !!this._NouiNotSupport("singlePageMode") && this.myViewer.displayMode != "continuous";
    } }, { key: "SetAcceptDrop", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("acceptDrop") && (n.isBoolean(r) ? (t.acceptDrop = r, !0) : (n.Errors.InvalidValue(t._stwain), !1));
    } }, { key: "GetAcceptDrop", value: function() {
      return this._NouiNotSupport("acceptDrop") ? this.acceptDrop : "";
    } }, { key: "SetAllowSlide", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("allowSlide") && (n.isBoolean(r) ? (t.myViewer.allowSlide = r, !0) : (n.Errors.InvalidValue(t._stwain), !1));
    } }, { key: "GetAllowSlide", value: function() {
      return this._NouiNotSupport("allowSlide") ? this.myViewer.allowSlide : "";
    } }, { key: "SetViewMode", value: function(r, t) {
      var i = this, a = !1, u = "vertical";
      return !!i._NouiNotSupport("setViewMode") && (n.isNumber(r) && n.isNumber(t) ? (i._thumbnailViewer && i._thumbnailViewer.hide(), i.clearSelectedAreas(), r == -1 && t == -1 ? (i.SetIfSinglePageMode(!0), t = 0 - t, r = 0 - r, a = !0) : (t < 0 && (u = "horizontal", t = 0 - t), r < 0 && (r = 0 - r), i.myViewer.scrollDirection = u, (a = i.myViewer.setViewMode(r, t)) || n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), i.SetIfSinglePageMode(!1), i.GetCursor() == "zoom-in" && i.SetCursor("crosshair")), a) : (n.Errors.InvalidValue(i._stwain), !1));
    } }, { key: "RemoveImageTag", value: function(r) {
      var t, i = this, a = !1;
      return r < 0 || r >= i.GetHowManyImagesInBuffer() ? (n.Errors.IndexOutOfRange(i._stwain), !1) : (t = i.GetUidByIndex(r)) && t != "" && t != -1 ? ((a = i.mydvs.Tag.removePageTag(t)) || n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), a) : (n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), !1);
    } }, { key: "FilterImagesByTag", value: function(r, t, i) {
      var a = this;
      if (n.isUndefined(r) || r == null || r.length == 0) {
        a._currentTag = "";
        var u = a.GetCurrentFileName();
        u.length == 0 && (u = Ni), a.mydvs.File.openFile(u, a.myViewer.uid) ? (a.mydvs.Tag.setDefaultTag(""), n.isFunction(t) && t()) : (n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), n.isFunction(i) && i(a.mydvs.Error.errorCode, a.mydvs.Error.errorMessage));
      } else
        a._currentTag = r, a.mydvs.Tag.openTag(r, a.myViewer.uid) ? n.isFunction(t) && t() : (n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), n.isFunction(i) && i(a.mydvs.Error.errorCode, a.mydvs.Error.errorMessage));
      return !0;
    } }, { key: "ClearFilter", value: function() {
      var r = this, t = !1;
      r._currentTag = "";
      var i = r.GetCurrentFileName();
      return i.length == 0 && (i = Ni), (t = r.mydvs.File.openFile(i, r.myViewer.uid)) ? t = !0 : n.Errors.WebviewerError(r._stwain, r.mydvs.Error.errorMessage, r.mydvs.Error.errorCode), t;
    } }, { key: "GetServerIdList", value: function() {
      var r, t, i, a = this, u = [];
      if (r = a.myViewer.getCurrentPageUids())
        for (var c = 0; c < r.length; c++)
          (t = r[c]) && (i = a.myViewer.getCustomDataByUid(t)) && u.push(i.imageId);
      else
        n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode);
      return u;
    } }, { key: "GetTagContents", value: function(r) {
      var t = this, i = !1;
      return (i = r && r.length > 0 ? t.mydvs.Tag.getTagContents(r) : t.myViewer.getCurrentPageUids()) || n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode), i;
    } }, { key: "SetDefaultTag", value: function(r) {
      var t, i = this;
      return i._currentTag = r, i.mydvs.Tag.addTag(r), (t = i.mydvs.Tag.setDefaultTag(r)) || n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), t;
    } }, { key: "AddImageTag", value: function(r, t) {
      var i, a, u = this;
      u.mydvs.Tag.addTag(t);
      for (var c = 0; c < r.length; c++)
        (i = r[c]) >= 0 && (a = u.GetUidByIndex(i)) && a != "" && a != -1 && u.mydvs.Tag.addPageTag(a, t);
      return !0;
    } }, { key: "GetCurrentTag", value: function() {
      return this._currentTag;
    } }, { key: "RenameTag", value: function(r, t) {
      var i, a = this;
      return a._currentTag = t, (i = a.mydvs.Tag.renameTag(r, t)) ? a.mydvs.Tag.setDefaultTag(t) : n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), i;
    } }, { key: "RemoveTag", value: function(r, t) {
      var i, a = this, u = !1, c = !1;
      if ((i = a.mydvs.Tag.getCurrentTag()) && (c = i.name == r), n.isUndefined(t))
        u = a.mydvs.Tag.removeTag(r), c && a.ClearFilter();
      else {
        if (!n.isArray(t))
          return n.Errors.IndicesNotArray(a), !1;
        if (!a._stwain._checkIndices(t))
          return !1;
        var d = [];
        n.each(t, function(_) {
          var v = a.GetUidByIndex(_);
          v != -1 && d.push(v);
        }), n.each(d, function(_) {
          if (!(u = a.mydvs.Tag.removePageTag(_, r)))
            return !1;
        });
      }
      return u || n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), u;
    } }, { key: "GetTagList", value: function() {
      var r, t, i, a = this, u = [];
      return (r = a.mydvs.Tag.getTagList()) ? n.each(r, function(c) {
        if (t = [], i = {}, c.uids)
          for (var d = 0; d < c.uids.length; d++) {
            var _ = c.uids[d];
            _ && (i = a.myViewer.getCustomDataByUid(_)) && t.push(a._stwain._objImageIndexManager.convertServerIdToGuid(i.imageId));
          }
        c.imageIds = t, delete c.uids, u.push(c);
      }) : u = [], u;
    } }, { key: "GetTagListByIndex", value: function(r) {
      var t = [], i = [], a = this.GetUidByIndex(r);
      return a && ((t = this.mydvs.Tag.getTagList()) ? n.each(t, function(u) {
        if (u.uids)
          for (var c = 0; c < u.uids.length; c++) {
            var d = u.uids[c];
            d && d == a && i.push(u.name);
          }
      }) : i = []), i;
    } }, { key: "CreateFile", value: function(r) {
      var t = this, i = !1;
      return r && (t.mydvs.File.createFile(r) ? t.mydvs.Error.errorCode == 80032 ? n.Errors.FileExist(t._stwain) : i = !0 : n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode)), i;
    } }, { key: "OpenFile", value: function(r) {
      var t = this, i = !1;
      return t.mydvs.File.openFile(r, t.myViewer.uid) ? (i = !0, t.currentFileName = r, n.log("OpenFile.currentFileName:" + t.currentFileName), t._stwain.Template && t._stwain.Template._documentTemplate && t._stwain.Template._documentTemplate.setTemplateTitle(t.currentFileName)) : t.mydvs.Error.errorCode == 80006 ? n.Errors.FileNotExist(t._stwain) : n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode), i;
    } }, { key: "GetCurrentFileName", value: function() {
      var r, t = this, i = "";
      return (r = t.mydvs.File.getCurrentFileList()) && n.each(r, function(a) {
        a.name == t.currentFileName && (i = t.currentFileName);
      }), n.log("GetCurrentFileName.currentFileName:" + i), i;
    } }, { key: "GetDefaultFileName", value: function() {
      return Ni;
    } }, { key: "RemoveFile", value: function(r) {
      var t, i = this;
      return (t = i.mydvs.File.removeFile(r)) ? i.currentFileName == r && (i.currentFileName = Ni, i.OpenFile(i.currentFileName)) : i.mydvs.Error.errorCode == 80006 ? n.Errors.FileNotExist(i._stwain) : n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), t;
    } }, { key: "RenameFile", value: function(r, t) {
      var i, a = this;
      return (i = a.mydvs.File.renameFile(r, t)) ? a.currentFileName == r && (a.currentFileName = t, n.log("RenameFile.currentFileName:" + a.currentFileName), a._stwain.Template && a._stwain.Template._documentTemplate && a._stwain.Template._documentTemplate.setTemplateTitle("")) : a.mydvs.Error.errorCode == 80006 ? n.Errors.FileNotExist(a._stwain) : a.mydvs.Error.errorCode == 80032 ? n.Errors.FileExist(a._stwain) : n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), i;
    } }, { key: "GetFileInfoList", value: function() {
      var r, t, i, a, u = this, c = [];
      return (r = u.mydvs.File.getCurrentFileList()) ? n.each(r, function(d) {
        if (!u.IsInternalFile(d.name)) {
          if (t = [], i = {}, a = {}, d.chs)
            for (var _ = 0; _ < d.chs.length; _++) {
              var v = d.chs[_];
              v && (i = u.myViewer.getCustomDataByUid(v)) && t.push(u._stwain._objImageIndexManager.convertServerIdToGuid(i.imageId));
            }
          a.imageIds = t, a.name = d.name, c.push(a);
        }
      }) : c = [], c;
    } }, { key: "GetImageIdsByFileName", value: function(r) {
      var t, i, a = this, u = [];
      return (t = a.mydvs.File.getCurrentFileList()) ? n.each(t, function(c) {
        if (r == c.name) {
          if (i = {}, c.chs)
            for (var d = 0; d < c.chs.length; d++) {
              var _ = c.chs[d];
              _ && (i = a.myViewer.getCustomDataByUid(_)) && u.push(i.imageId);
            }
          return !1;
        }
      }) : u = [], u;
    } }, { key: "ifFileNameExist", value: function(r) {
      var t, i = !1;
      return (t = this.mydvs.File.getCurrentFileList()) && (t.length == 0 ? r == Ni && (i = !0) : (n.each(t, function(a) {
        if (a.name == r)
          return i = !0, !0;
      }), i == 0 && r == Ni && (i = !0))), i;
    } }, { key: "OverlayRectangle", value: function(r, t, i, a, u, c, d) {
      var _, v = this, T = c;
      return r < 0 || r >= v.GetHowManyImagesInBuffer() ? (n.Errors.IndexOutOfRange(v._stwain), !1) : (n.isNumber(T) && (T = n.getColor(T)), (_ = v.myViewer.overlayRectangle(r, t, i, a - t, u - i, T, d)) || n.Errors.WebviewerError(v._stwain, v.mydvs.Error.errorMessage, v.mydvs.Error.errorCode), _);
    } }, { key: "SetOperationMode", value: function(r) {
      this.myViewer.operationMode = r;
    } }, { key: "GetIfShowVideoContainer", value: function() {
      return this.myViewer.showVideoContainer;
    } }, { key: "ShowVideoContainer", value: function(r) {
      var t = this;
      return t.myViewer.showVideoContainer == r || (t._thumbnailViewer && (r ? (t.OldShowThumbnail = t.myThumbnailViewer.showThumbnail, t.myThumbnailViewer.showThumbnail = !1) : t.myThumbnailViewer.showThumbnail = t.OldShowThumbnail), t.myViewer.showVideoContainer = r), !0;
    } }, { key: "UpdateVideoContainer", value: function(r) {
      var t, i = this;
      return (t = i.myViewer.updateVideoContainer(r)) || n.Errors.WebviewerError(i._stwain, i.mydvs.Error.errorMessage, i.mydvs.Error.errorCode), t;
    } }, { key: "GetImageData", value: function(r) {
      return this.mydvs.DataControl.getData(r);
    } }, { key: "UpdateImageData", value: function(r, t) {
      return this.mydvs.DataControl.updateData(r, t);
    } }, { key: "GetMinPageData", value: function(r) {
      return this._imageEditorInner ? this._imageEditorInner.myImageEditor.getMinPageData() : NaN;
    } }, { key: "SetLogLevel", value: function(r) {
      this.mydvs.Log.setLogLevel(r);
    } }, { key: "SetLogFunc", value: function(r) {
      this.mydvs.Log.setLogFunc(r);
    } }, { key: "SetThumLocation", value: function(r) {
      var t = this;
      if (!t._NouiNotSupport("ThumbnailViewer.location"))
        return !1;
      if (t.myThumbnailViewer) {
        switch (r) {
          case "left":
          default:
            t.myThumbnailViewer.location = "horizontal", t.myThumbnailViewer.sequence = -1;
            break;
          case "right":
            t.myThumbnailViewer.location = "horizontal", t.myThumbnailViewer.sequence = 1;
            break;
          case "top":
            t.myThumbnailViewer.location = "vertical", t.myThumbnailViewer.sequence = -1;
            break;
          case "bottom":
            t.myThumbnailViewer.location = "vertical", t.myThumbnailViewer.sequence = 1;
        }
        return !0;
      }
      return t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1;
    } }, { key: "GetThumLocation", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.location") && (r.myThumbnailViewer ? r.myThumbnailViewer.location == "vertical" ? r.myThumbnailViewer.sequence > 0 ? "bottom" : "top" : r.myThumbnailViewer.sequence > 0 ? "right" : "left" : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumSize", value: function(r) {
      var t = this;
      return t._NouiNotSupport("ThumbnailViewer.size") ? !/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(r) || r < 0 ? (n.Errors.InvalidValue(t._stwain), !1) : t.myThumbnailViewer ? (t.myThumbnailViewer.size = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1) : !1;
    } }, { key: "GetThumSize", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.size") && (r.myThumbnailViewer ? r.myThumbnailViewer.size : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), 0));
    } }, { key: "SetThumScrollDirection", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.scrollDirection") && (r != "horizontal" && (r = "vertical"), t.myThumbnailViewer ? (t.myThumbnailViewer.scrollDirection = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumScrollDirection", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.scrollDirection") && (r.myThumbnailViewer ? r.myThumbnailViewer.scrollDirection : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumShowPageNumber", value: function(r) {
      var t = this;
      if (!t._NouiNotSupport("ThumbnailViewer.showPageNumber"))
        return !1;
      if (!n.isBoolean(r))
        return n.Errors.InvalidValue(t._stwain), !1;
      var i = { visibility: "hidden" };
      return r && (i.visibility = "visible"), t.myThumbnailViewer ? (t.UpdateThumPageNumberStyle(i), !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1);
    } }, { key: "GetThumShowPageNumber", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.showPageNumber") && (r.myThumbnailViewer ? r.myThumbnailViewer.pageNumber.visibility == "visible" : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), -1));
    } }, { key: "UpdateThumPageNumberStyle", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.pageNumber") && (t.myThumbnailViewer ? (t.myThumbnailViewer.pageNumber = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "SetThumShowCheckbox", value: function(r) {
      var t = this;
      if (!t._NouiNotSupport("ThumbnailViewer.showCheckbox"))
        return !1;
      if (!n.isBoolean(r))
        return n.Errors.InvalidValue(t._stwain), !1;
      if (t.myThumbnailViewer) {
        var i = { visibility: "hidden" };
        return r && (i.visibility = "visible"), t.UpdateThumCheckboxStyle(i), i.visibility == "visible" ? t.SetThumMultiSelectMode(wn) : t.SetThumMultiSelectMode(Fn), !0;
      }
      return t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1;
    } }, { key: "UpdateThumCheckboxStyle", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.checkbox") && (t.myThumbnailViewer ? (t.myThumbnailViewer.checkbox = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumShowCheckbox", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.showCheckbox") && (r.myThumbnailViewer ? r.myThumbnailViewer.checkbox.visibility == "visible" : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), -1));
    } }, { key: "GetThumMultiSelectMode", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.multiSelectMode") && (r.myThumbnailViewer ? r.myThumbnailViewer.multiSelectMode ? wn : Fn : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), -1));
    } }, { key: "SetThumMultiSelectMode", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.multiSelectMode") && (n.isNumber(r) ? t.myThumbnailViewer ? (t.myThumbnailViewer.multiSelectMode = r == wn, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1) : (n.Errors.InvalidValue(t._stwain), !1));
    } }, { key: "SetThumMargin", value: function(r) {
      var t = this;
      return t._NouiNotSupport("ThumbnailViewer.margin") ? !/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(r) || r < 0 ? (n.Errors.InvalidValue(t._stwain), !1) : t.myThumbnailViewer ? (t.myThumbnailViewer.pageMargin = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1) : !1;
    } }, { key: "GetThumMargin", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.margin") && (r.myThumbnailViewer ? r.myThumbnailViewer.columns == r.myThumbnailViewer.rows && r.myThumbnailViewer.rows == 1 ? 0 : r.myThumbnailViewer.pageMargin : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), 0));
    } }, { key: "SetThumBorder", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.border") && (t.myThumbnailViewer ? (t.myThumbnailViewer.border = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumBorder", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.border") && (r.myThumbnailViewer ? r.myThumbnailViewer.border : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumBackground", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.background") && (t.myThumbnailViewer ? (t.myThumbnailViewer.background = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumBackground", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.background") && (r.myThumbnailViewer ? r.myThumbnailViewer.background : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumPageBackground", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.pageBackground") && (t.myThumbnailViewer ? (t.myThumbnailViewer.pageBackground = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumPageBackground", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.pageBackground") && (r.myThumbnailViewer ? r.myThumbnailViewer.pageBackground : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumPageBorder", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.pageBorder") && (t.myThumbnailViewer ? (t.myThumbnailViewer.pageBorder = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumPageBorder", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.pageBorder") && (r.myThumbnailViewer ? r.myThumbnailViewer.pageBorder : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumHoverBackground", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.hoverPageBackground") && (t.myThumbnailViewer ? (t.myThumbnailViewer.hoverPageBackground = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), ""));
    } }, { key: "GetThumHoverBackground", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.hoverPageBackground") && (r.myThumbnailViewer ? r.myThumbnailViewer.hoverPageBackground : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumHoverBorder", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.hoverPageBorder") && (t.myThumbnailViewer ? (t.myThumbnailViewer.hoverPageBorder = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumHoverBorder", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.hoverPageBorder") && (r.myThumbnailViewer ? r.myThumbnailViewer.hoverPageBorder : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumPlaceholderBackground", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.placeholderBackground") && (t.myThumbnailViewer ? (t.myThumbnailViewer.placeholderBackground = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumPlaceholderBackground", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.placeholderBackground") && (r.myThumbnailViewer ? r.myThumbnailViewer.placeholderBackground : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumSelectedPageBorder", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.selectedPageBorder") && (t.myThumbnailViewer ? (t.myThumbnailViewer.selectedPageBorder = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumSelectedPageBorder", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.selectedPageBorder") && (r.myThumbnailViewer ? r.myThumbnailViewer.selectedPageBorder : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumSelectedPageBackground", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.selectedPageBackground") && (t.myThumbnailViewer ? (t.myThumbnailViewer.selectedPageBackground = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumSelectedPageBackground", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.selectedPageBackground") && (r.myThumbnailViewer ? r.myThumbnailViewer.selectedPageBackground : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "SetThumAllowKeyboardControl", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.allowKeyboardControl") && (n.isBoolean(r) ? t.myThumbnailViewer ? (t.myThumbnailViewer.allowKeyboardControl = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1) : (n.Errors.InvalidValue(t._stwain), !1));
    } }, { key: "GetThumAllowKeyboardControl", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.allowKeyboardControl") && (r.myThumbnailViewer ? r.myThumbnailViewer.allowKeyboardControl : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), !1));
    } }, { key: "SetThumAllowDrag", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.allowDrag") && (n.isBoolean(r) ? t.myThumbnailViewer ? (t.myThumbnailViewer.allowPageDragging = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1) : (n.Errors.InvalidValue(t._stwain), !1));
    } }, { key: "GetThumAllowDrag", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.allowPageDragging") && (r.myThumbnailViewer ? r.myThumbnailViewer.allowPageDragging : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), !1));
    } }, { key: "SetThumAllowResize", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.allowResizing") && (n.isBoolean(r) ? t.myThumbnailViewer ? (t.myThumbnailViewer.allowResizing = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1) : (n.Errors.InvalidValue(t._stwain), !1));
    } }, { key: "GetThumAllowResize", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.allowResizing") && (r.myThumbnailViewer ? r.myThumbnailViewer.allowResizing : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), !1));
    } }, { key: "SetThumAutoChangeIndex", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ThumbnailViewer.autoChangeIndex") && (t.myThumbnailViewer ? (t.myThumbnailViewer.autoChangeIndex = r, !0) : (t.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(t._stwain) : n.Errors.ThumbnailViewerNotExist(t._stwain), !1));
    } }, { key: "GetThumAutoChangeIndex", value: function() {
      var r = this;
      return !!r._NouiNotSupport("ThumbnailViewer.autoChangeIndex") && (r.myThumbnailViewer ? r.myThumbnailViewer.autoChangeIndex : (r.bThumbnailDispose ? n.Errors.ThumbnailViewerDispose(r._stwain) : n.Errors.ThumbnailViewerNotExist(r._stwain), ""));
    } }, { key: "render", value: function() {
      return !!this._NouiNotSupport("render") && this.myViewer.render();
    } }, { key: "getUISettings", value: function() {
      if (!this._NouiNotSupport("getUISettings"))
        return !1;
      var r = l.Lib.clone(this.myViewer.uiConfig);
      return delete r.tag, delete r.tree, delete r.cropStyle, delete r.thumbnail, r;
    } }, { key: "resetUISettings", value: function() {
      var r = {};
      return this.resetUISettingsInner(!0) && (r = this.getUISettings()), r;
    } }, { key: "resetUISettingsInner", value: function(r, t, i) {
      var a, u = this;
      if (!u._NouiNotSupport("resetUISetting"))
        return !1;
      var c = wd;
      r ? (c.width = u.initWidth, c.height = u.initHeight) : (n.isUndefined(t) ? c.width = u.initWidth : c.width = t, n.isUndefined(i) ? c.height = u.initHeight : c.height = i);
      var d = u.myViewer.showViewer;
      return (a = u.myViewer.updateUISetting(c)) ? (d || u.hide(), u.SetFitType("window"), u.SetIfSinglePageMode(!1), u._stwain._isPC() ? u.SetOperationMode(1) : u.SetOperationMode(0), u.OnlySetCurrentIndex(u.GetCurrentIndex())) : n.Errors.WebviewerError(u._stwain, u.mydvs.Error.errorMessage, u.mydvs.Error.errorCode), a;
    } }, { key: "updateUISettings", value: function(r) {
      var t = this, i = {};
      if (!t._NouiNotSupport("updateUISettings"))
        return !1;
      var a = t.myViewer.showViewer;
      return t.myViewer.updateUISetting(r) ? (a || t.hide(), (i = t.getUISettings()).canvasConfig.canvasMouseShape == "crosshair" ? t.SetOperationMode(1) : t.SetOperationMode(0), t._stwain.Template && t._stwain.Template._documentTemplate && (t._stwain.Template._documentTemplate.initView(), t.GetFileInfoList().length > 0 && t._stwain.Template._documentTemplate.setTemplateTitle(t.currentFileName))) : n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode), i;
    } }, { key: "createDocumentCameraManager", value: function() {
      var r = this;
      if (!l.CameraModel)
        return n.Errors.CameraRequired(r._stwain), !1;
      if (!r.myccvs) {
        r.myccvs = new l.CameraModel();
        try {
          r.myccvs && this.bindCallback(r, r.myccvs);
        } catch {
        }
      }
    } }, { key: "createDocumentEditManager", value: function() {
      var r = this;
      if (!l.DocumentEditManager)
        return n.Errors.CameraRequired(r._stwain), !1;
      if (!r.mydocEditManager) {
        r.mydocEditManager = new l.DocumentEditManager();
        try {
          r.mydocEditManager && this.bindCallback(r, r.mydocEditManager);
        } catch {
        }
      }
    } }, { key: "notBindCameraForCameraManager", value: function() {
      return !this.myccvs || this.myccvs.notBindCamera();
    } }, { key: "bindCameraForCameraManager", value: function() {
      var r = this, t = !0;
      return l.CameraModel ? (r.myccvs || r.createDocumentCameraManager(), r.myccvs.notBindCamera() && (t = r.myccvs.bindCamera(l.ViewUi, r.mydvs)), t || void n.Errors.WebviewerError(r._stwain, r.myccvs.Error.errorMessage, r.myccvs.Error.errorCode)) : (n.Errors.CameraRequired(r._stwain), !1);
    } }, { key: "notBindCameraForDocumentEditManager", value: function() {
      return !this.mydocEditManager || this.mydocEditManager.notBindCamera();
    } }, { key: "bindCameraForDocumentEditManager", value: function() {
      var r = this, t = !0;
      return l.DocumentEditManager ? (r.mydocEditManager || r.createDocumentEditManager(), r.mydocEditManager.notBindCamera() && (t = r.mydocEditManager.bindCamera(l.ViewUi, r.mydvs)), t || void n.Errors.WebviewerError(r._stwain, r.mydocEditManager.Error.errorMessage, r.mydocEditManager.Error.errorCode)) : (n.Errors.CameraRequired(r._stwain), !1);
    } }, { key: "bindCallback", value: function(r, t) {
      t && (t.bindLicenseCallback && t.bindLicenseCallback(function() {
        return r._stwain._checkWebcamWasmLicense();
      }), t.bindSavePhotoCallback && t.bindSavePhotoCallback(function(i) {
        return r._stwain._saveImageCallback(i);
      }), t.bindInsertPhotoCallback && t.bindInsertPhotoCallback(function(i, a, u) {
        return r._stwain._insertImageCallback(i, a, u);
      }), t.bindRemovePhotoCallback && t.bindRemovePhotoCallback(function(i, a) {
        r._stwain._innerRemoveImage(i, a);
      }), t.bindAreaDetectFunction && t.bindAreaDetectFunction(fg), t.bindPerspectiveFunction && t.bindPerspectiveFunction(gg), t.bindFilterHandleList && t.bindFilterHandleList([{ label: "grayscale", handler: mg }, { label: "blackAndWhite", handler: bd }, { label: "saveToner", handler: pg }, { label: "clean", handler: _g }, { label: "brightening", handler: vg }]), t.bindFreeHandle && t.bindFreeHandle(yg));
    } }, { key: "showVideo", value: function(r, t, i, a) {
      var u = this;
      if (!u._NouiNotSupport("showVideo"))
        return !1;
      var c = { scannerViewer: { devicedId: r, fullScreen: a, enableBorderDetection: !0, resolution: { visibility: "hidden" }, autoScan: { visibility: "hidden" }, autoDetect: { visibility: "visible", enableAutoDetect: !1 }, continuousScan: !1, switchCamera: { visibility: "hidden" }, loadLocalFile: { visibility: "hidden" } }, documentEditorSettings: { defaultViewerName: "CropViewer", insert: { visibility: "hidden" }, remove: { visibility: "hidden" }, rotateLeft: { visibility: "hidden" }, filter: { visibility: "hidden", valueList: [] }, crop: { visibility: "hidden" }, cropViewer: { visibility: "visible", rotateLeft: { visibility: "hidden" }, rotateRight: { visibility: "hidden" }, autoDetectBorder: { visibility: "hidden" } } } };
      return t && (c.scannerViewer.resolution.valueList = [], c.scannerViewer.resolution.valueList.push({ label: "resolution", value: t }), c.scannerViewer.resolution.defaultValue = t), i && i == "document" ? c.scannerViewer.enableBorderDetection = !0 : (c.scannerViewer.enableBorderDetection = !1, c.scannerViewer.autoDetect.visibility = "hidden", c.documentEditorSettings.cropViewer.visibility = "hidden"), u.myccvs || u.createDocumentCameraManager(), u.notBindCameraForCameraManager() && u.bindCameraForCameraManager(), u.showVideoEx(c);
    } }, { key: "setElementForDocumentConfiguration", value: function(r) {
      var t, i, a = this, u = l.Lib.clone(r);
      if (r && r.scannerViewer && r.scannerViewer.element) {
        if (!(t = r.scannerViewer.element && r.scannerViewer.element.nodeName == "DIV" ? r.scannerViewer.element : document.getElementById(r.scannerViewer.element)).childNodes[t.childNodes.length - 1] || t.childNodes[t.childNodes.length - 1].nodeName != "DIV") {
          var c = document.createElement("div");
          t.appendChild(c);
        }
        (i = t.childNodes[t.childNodes.length - 1]).nodeName != "DIV" && (i = t), i && t && t.style.width == "" ? t.clientWidth > 0 ? i.style.width = t.clientWidth + "px" : t.offsetWidth > 0 ? i.style.width = t.offsetWidth + "px" : t.scrollWidth > 0 ? i.style.width = t.scrollWidth + "px" : i.style.width = a.myViewer.width + "px" : i.style.width = "100%", i && t && t.style.height == "" ? t.clientHeight > 0 ? i.style.height = t.clientHeight + "px" : t.offsetHeight > 0 ? i.style.height = t.offsetHeight + "px" : t.scrollHeight > 0 ? i.style.height = t.scrollHeight + "px" : i.style.height = a.myViewer.height + "px" : i.style.height = "100%", u.scannerViewer.element = i;
      }
      if (r && r.documentEditorSettings && r.documentEditorSettings.element) {
        if (!(t = r.documentEditorSettings.element && r.documentEditorSettings.element.nodeName == "DIV" ? r.documentEditorSettings.element : document.getElementById(r.documentEditorSettings.element)).childNodes[t.childNodes.length - 1] || t.childNodes[t.childNodes.length - 1].nodeName != "DIV") {
          var d = document.createElement("div");
          t.appendChild(d);
        }
        (i = t.childNodes[t.childNodes.length - 1]).nodeName != "DIV" && (i = t), i && t && t.style.width == "" ? t.clientWidth > 0 ? i.style.width = t.clientWidth + "px" : t.offsetWidth > 0 ? i.style.width = t.offsetWidth + "px" : t.scrollWidth > 0 ? i.style.width = t.scrollWidth + "px" : i.style.width = a.myViewer.width + "px" : i.style.width = "100%", i && t && t.style.height == "" ? t.clientHeight > 0 ? i.style.height = t.clientHeight + "px" : t.offsetHeight > 0 ? i.style.height = t.offsetHeight + "px" : t.scrollHeight > 0 ? i.style.height = t.scrollHeight + "px" : i.style.height = a.myViewer.height + "px" : i.style.height = "100%", u.documentEditorSettings.element = i;
      }
      return u;
    } }, { key: "showVideoEx", value: function(r) {
      var t = this.setElementForDocumentConfiguration(r);
      return this.showVideoInner(t);
    } }, { key: "showVideoInner", value: (e = Ln(he.mark(function r(t) {
      var i, a, u;
      return he.wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              if ((i = this)._NouiNotSupport("scanDocument")) {
                c.next = 3;
                break;
              }
              return c.abrupt("return", !1);
            case 3:
              if (i._stwain._isMobileMode()) {
                c.next = 5;
                break;
              }
              return c.abrupt("return", i._stwain._serviceNotSupportAsync("scanDocument"));
            case 5:
              if (i._stwain.Template && i._stwain.Template._documentTemplate && i._stwain.Template._documentTemplate.setTemplateTitle(i.currentFileName), t = i.getDefaultDocumentConfigurationValue(i._globalScanConfiguration_ScannViewer, t, !1), i._globalScanConfiguration_ScannViewer = t, i._documentScanConfiguration = t, i.notBindCameraForCameraManager() && i.bindCameraForCameraManager(), (u = i.GetCurrentFileName()).length == 0 && (i.CreateFile(Ni), i.OpenFile(Ni), u = Ni), Mu(i._stwain)) {
                c.next = 15;
                break;
              }
              return c.next = 15, dc(i._stwain);
            case 15:
              return c.next = 17, i.myccvs.showVideo(t, u);
            case 17:
              return (a = c.sent) || n.Errors.WebviewerError(i._stwain, i.myccvs.Error.errorMessage, i.myccvs.Error.errorCode), c.abrupt("return", a);
            case 20:
            case "end":
              return c.stop();
          }
      }, r, this);
    })), function(r) {
      return e.apply(this, arguments);
    }) }, { key: "getDefaultDocumentConfigurationValue", value: function(r, t, i) {
      var a, u = this;
      if ((a = l.Lib.clone(t)) && (a.scannerViewer && t.scannerViewer && t.scannerViewer.element && (a.scannerViewer.element = t.scannerViewer.element), a.documentEditorSettings && t.documentEditorSettings && t.documentEditorSettings.element && (a.documentEditorSettings.element = t.documentEditorSettings.element)), n.isUndefined(a) ? a = r : (a.scannerViewer = u.getDefaultScannerViewerValue(a.scannerViewer, !0), a.documentEditorSettings = u.getDefaultDocumentEditorValue(a.documentEditorSettings, !0, i)), n.isFunction(a.documentEditorSettings.funcConfirmExitAfterSave)) {
        var c = a.documentEditorSettings.funcConfirmExitAfterSave;
        a.documentEditorSettings.funcConfirmExitAfterSave = function(v) {
          var T = u.GetCurrentFileName();
          T.length == 0 && (T = Ni), u.OpenFile(T), c(v);
        };
      } else
        a.documentEditorSettings.funcConfirmExitAfterSave = function(v) {
          var T = u.GetCurrentFileName();
          T.length == 0 && (T = Ni), u.OpenFile(T);
        };
      if (i)
        if (a.documentEditorSettings.defaultViewerName.toLowerCase() == "cropviewer")
          if (n.isFunction(a.documentEditorSettings.cropViewer.funcConfirmExit)) {
            var d = a.documentEditorSettings.cropViewer.funcConfirmExit;
            a.documentEditorSettings.cropViewer.funcConfirmExit = function(v, T) {
              var M = u.GetCurrentFileName();
              return M.length == 0 && (M = Ni), u.OpenFile(M), d(v, T);
            };
          } else
            a.documentEditorSettings.cropViewer.funcConfirmExit = function(v, T) {
              var M = u.GetCurrentFileName();
              return M.length == 0 && (M = Ni), u.OpenFile(M), T == "documentScanPage" && v ? Promise.resolve(l.DWT.EnumDWT_ConfirmExitType.SaveAndExit) : Promise.resolve(l.DWT.EnumDWT_ConfirmExitType.Exit);
            };
        else if (n.isFunction(a.documentEditorSettings.funcConfirmExit)) {
          var _ = a.documentEditorSettings.funcConfirmExit;
          a.documentEditorSettings.funcConfirmExit = function(v, T) {
            var M = u.GetCurrentFileName();
            return M.length == 0 && (M = Ni), u.OpenFile(M), _(v, T);
          };
        } else
          a.documentEditorSettings.funcConfirmExit = function(v, T) {
            var M = u.GetCurrentFileName();
            return M.length == 0 && (M = Ni), u.OpenFile(M), T == "cropViewer" && v ? Promise.resolve(l.DWT.EnumDWT_ConfirmExitType.SaveAndExit) : Promise.resolve(l.DWT.EnumDWT_ConfirmExitType.Exit);
          };
      return n.isUndefined(a.scannerViewer.maxDocuments) && (a.scannerViewer.maxDocuments = u._stwain.MaxImagesInBuffer - u.GetHowManyImagesInBuffer()), a.scannerViewer.continuousScan == 1 ? a.scannerViewer.continuousScan = { visibility: "hidden", enableContinuousScan: !0 } : a.scannerViewer.continuousScan == 0 ? a.scannerViewer.continuousScan = { visibility: "hidden", enableContinuousScan: !1 } : n.isUndefined(a.scannerViewer.continuousScan) ? a.scannerViewer.continuousScan = { visibility: "hidden", enableContinuousScan: !0 } : (a.scannerViewer.continuousScan.visibility = "hidden", n.isUndefined(a.scannerViewer.continuousScan.enableContinuousScan) && (a.scannerViewer.continuousScan.enableContinuousScan = !0)), a;
    } }, { key: "getDefaultScannerViewerValue", value: function(r, t) {
      var i, a;
      if (a = $o.scannerViewer, n.isUndefined(r))
        i = a, t && delete i.funcConfirmExit;
      else {
        if (i = r, n.isUndefined(i.headerStyle) ? i.headerStyle = a.headerStyle : (n.isUndefined(i.headerStyle.background) && (i.headerStyle.background = a.headerStyle.background), n.isUndefined(i.headerStyle.color) && (i.headerStyle.color = a.headerStyle.color), n.isUndefined(i.headerStyle.selectedColor) && (i.headerStyle.selectedColor = a.headerStyle.selectedColor)), n.isUndefined(i.bodyStyle) ? i.bodyStyle = a.bodyStyle : (n.isUndefined(i.bodyStyle.background) && (i.bodyStyle.background = a.bodyStyle.background), n.isUndefined(i.bodyStyle.loaderBarSource) && (i.bodyStyle.loaderBarSource = a.bodyStyle.loaderBarSource)), n.isUndefined(i.footerStyle) ? i.footerStyle = a.footerStyle : (n.isUndefined(i.footerStyle.background) && (i.footerStyle.background = a.footerStyle.background), n.isUndefined(i.footerStyle.color) && (i.footerStyle.color = a.footerStyle.color), n.isUndefined(i.footerStyle.selectedColor) && (i.footerStyle.selectedColor = a.footerStyle.selectedColor)), n.isUndefined(i.fullScreen) && (i.fullScreen = a.fullScreen), n.isUndefined(i.enableBorderDetection) && (i.enableBorderDetection = a.enableBorderDetection), n.isUndefined(i.polygonStyle) ? i.polygonStyle = a.polygonStyle : (n.isUndefined(i.polygonStyle.stroke) && (i.polygonStyle.stroke = a.polygonStyle.stroke), n.isUndefined(i.polygonStyle.strokeWidth) && (i.polygonStyle.strokeWidth = a.polygonStyle.strokeWidth), n.isUndefined(i.polygonStyle.dash) && (i.polygonStyle.dash = a.polygonStyle.dash)), i.scanButtonStyle ? (n.isUndefined(i.scanButtonStyle.background) && (i.scanButtonStyle.background = a.scanButtonStyle.background), n.isUndefined(i.scanButtonStyle.color) && (i.scanButtonStyle.color = a.scanButtonStyle.color)) : i.scanButtonStyle = a.scanButtonStyle, n.isUndefined(i.resolution))
          i.resolution = a.resolution;
        else {
          var u = i.resolution;
          n.isBoolean(u.visibility) && !u.visibility ? u.visibility = "hidden" : n.isString(u.visibility) || (u.visibility = a.resolution.visibility), n.isUndefined(u.valueList) && (u.valueList = a.resolution.valueList), n.isUndefined(u.defaultValue) && u.valueList && u.valueList.length > 0 && (u.defaultValue = u.valueList[0].value);
        }
        if (n.isUndefined(i.autoScan))
          i.autoScan = a.autoScan;
        else {
          var c = i.autoScan;
          n.isBoolean(c.visibility) && !c.visibility ? c.visibility = "hidden" : n.isString(c.visibility) || (c.visibility = a.autoScan.visibility), n.isUndefined(c.enableAutoScan) && (c.enableAutoScan = a.autoScan.enableAutoScan);
        }
        if (n.isUndefined(i.autoDetect))
          i.autoDetect = a.autoDetect;
        else {
          var d = i.autoDetect;
          if (n.isBoolean(d.visibility) && !d.visibility ? d.visibility = "hidden" : n.isString(d.visibility) || (d.visibility = a.autoDetect.visibility), n.isUndefined(d.enableAutoDetect) && (d.enableAutoDetect = a.autoDetect.enableAutoDetect), n.isUndefined(d.fpsLimit) && (d.fpsLimit = a.autoDetect.fpsLimit), n.isUndefined(d.acceptedPolygonConfidence))
            d.acceptedPolygonConfidence = a.autoDetect.acceptedPolygonConfidence;
          else {
            var _ = parseInt(d.acceptedPolygonConfidence);
            d.acceptedPolygonConfidence = _ >= 0 ? _ : a.autoDetect.acceptedPolygonConfidence;
          }
          if (n.isUndefined(d.acceptedBlurryScore))
            d.acceptedBlurryScore = a.autoDetect.acceptedBlurryScore;
          else {
            var v = parseInt(d.acceptedBlurryScore);
            d.acceptedBlurryScore = v >= 0 ? v : a.autoDetect.acceptedBlurryScore;
          }
          if (n.isUndefined(d.autoCaptureDelay))
            d.autoCaptureDelay = a.autoDetect.autoCaptureDelay;
          else {
            var T = parseInt(d.autoCaptureDelay);
            d.autoCaptureDelay = T >= 0 ? T : a.autoDetect.autoCaptureDelay;
          }
        }
        if (n.isUndefined(i.switchCamera))
          i.switchCamera = a.switchCamera;
        else {
          var M = i.switchCamera;
          n.isBoolean(M.visibility) && !M.visibility ? M.visibility = "hidden" : n.isString(M.visibility) || (M.visibility = a.switchCamera.visibility);
        }
        if (n.isUndefined(i.loadLocalFile))
          i.loadLocalFile = a.loadLocalFile;
        else {
          var A = i.loadLocalFile;
          n.isBoolean(A.visibility) && !A.visibility ? A.visibility = "hidden" : n.isString(A.visibility) || (A.visibility = a.loadLocalFile.visibility);
        }
      }
      return i;
    } }, { key: "getDefaultDocumentEditorValue", value: function(r, t, i) {
      var a, u;
      if ((u = l.Lib.clone($o.documentEditorSettings)) && $o.documentEditorSettings && $o.documentEditorSettings.element && (u.element = $o.documentEditorSettings.element), i && (u.defaultViewerName = "mainViewer"), n.isUndefined(r))
        a = u, t && (delete a.remove.funcConfirmRemove, delete a.funcConfirmExit, delete a.funcConfirmExitAfterSave, delete a.cropViewer.funcConfirmExit);
      else {
        if (a = r, n.isBoolean(a.visibility) && !a.visibility ? a.visibility = "hidden" : n.isString(a.visibility) || (a.visibility = u.visibility), (n.isUndefined(a.defaultViewerName) || a.defaultViewerName == "" || a.defaultViewerName.toLowerCase() != "cropviewer" && a.defaultViewerName.toLowerCase() != "mainviewer") && (a.defaultViewerName = u.defaultViewerName), n.isUndefined(a.headerStyle) ? a.headerStyle = u.headerStyle : (n.isUndefined(a.headerStyle.background) && (a.headerStyle.background = u.headerStyle.background), n.isUndefined(a.headerStyle.color) && (a.headerStyle.color = u.headerStyle.color), n.isUndefined(a.headerStyle.selectedColor) && (a.headerStyle.selectedColor = u.headerStyle.selectedColor), n.isUndefined(a.headerStyle.disabledColor) && (a.headerStyle.disabledColor = u.headerStyle.disabledColor)), n.isUndefined(a.bodyStyle) ? a.bodyStyle = u.bodyStyle : (n.isUndefined(a.bodyStyle.background) && (a.bodyStyle.background = u.bodyStyle.background), n.isUndefined(a.bodyStyle.loaderBarSource) && (a.bodyStyle.loaderBarSource = u.bodyStyle.loaderBarSource)), n.isUndefined(a.footerStyle) ? a.footerStyle = u.footerStyle : (n.isUndefined(a.footerStyle.background) && (a.footerStyle.background = u.footerStyle.background), n.isUndefined(a.footerStyle.color) && (a.footerStyle.color = u.footerStyle.color), n.isUndefined(a.footerStyle.selectedColor) && (a.footerStyle.selectedColor = u.footerStyle.selectedColor)), n.isUndefined(a.insert) ? a.insert = u.insert : (n.isBoolean(a.insert.visibility) && !a.insert.visibility ? a.insert.visibility = "hidden" : n.isString(a.insert.visibility) || (a.insert.visibility = u.insert.visibility), n.isUndefined(a.insert.position) && (a.insert.position = u.insert.position)), n.isUndefined(a.remove) ? (a.remove = u.remove, t && delete a.remove.funcConfirmRemove) : n.isBoolean(a.remove.visibility) && !a.remove.visibility ? a.remove.visibility = "hidden" : n.isString(a.remove.visibility) || (a.remove.visibility = u.remove.visibility), n.isUndefined(a.rotateLeft) ? a.rotateLeft = u.rotateLeft : n.isBoolean(a.rotateLeft.visibility) && !a.rotateLeft.visibility ? a.rotateLeft.visibility = "hidden" : n.isString(a.rotateLeft.visibility) || (a.rotateLeft.visibility = u.rotateLeft.visibility), n.isUndefined(a.filter))
          a.filter = u.filter;
        else {
          if (n.isBoolean(a.filter.visibility) && !a.filter.visibility ? a.filter.visibility = "hidden" : n.isString(a.filter.visibility) || (a.filter.visibility = u.filter.visibility), n.isUndefined(a.filter.valueList))
            a.filter.valueList = u.filter.valueList;
          else {
            for (var c = [], d = 0; d < a.filter.valueList.length; d++) {
              for (var _ = !1, v = a.filter.valueList[d].value, T = 0; T < u.filter.valueList.length; T++)
                if (v == u.filter.valueList[T].value) {
                  _ = !0;
                  break;
                }
              _ && (n.isUndefined(a.filter.valueList[d].option) && (a.filter.valueList[d].option = u.filter.valueList[0].option), c.push(a.filter.valueList[d]));
            }
            a.filter.valueList = c;
          }
          if (n.isUndefined(a.filter.defaultValue))
            a.filter.defaultValue = u.filter.defaultValue;
          else {
            for (var M = !1, A = a.filter.defaultValue, S = 0; S < a.filter.valueList.length; S++)
              if (A == a.filter.valueList[S].value) {
                M = !0;
                break;
              }
            M == 0 && (a.filter.defaultValue = u.filter.defaultValue);
          }
          if (n.isUndefined(a.filter.applyToAll))
            a.filter.applyToAll = u.filter.applyToAll;
          else {
            var V = a.filter.applyToAll;
            n.isBoolean(V.visibility) && !V.visibility ? V.visibility = "hidden" : n.isString(V.visibility) || (V.visibility = u.filter.applyToAll.visibility), n.isUndefined(V.enableApplyToAll) && (V.enableApplyToAll = u.filter.applyToAll.enableApplyToAll), n.isUndefined(V.label) && (V.label = u.filter.applyToAll.label);
          }
        }
        if (n.isUndefined(a.crop) ? a.crop = u.crop : n.isBoolean(a.crop.visibility) && !a.crop.visibility ? a.crop.visibility = "hidden" : n.isString(a.crop.visibility) || (a.crop.visibility = u.crop.visibility), n.isUndefined(a.cropViewer))
          a.cropViewer = u.cropViewer, t && delete a.cropViewer.funcConfirmExit;
        else {
          if (n.isBoolean(a.cropViewer.visibility) && !a.cropViewer.visibility ? a.cropViewer.visibility = "hidden" : n.isString(a.cropViewer.visibility) || (a.cropViewer.visibility = u.cropViewer.visibility), n.isUndefined(a.cropViewer.polygonStyle) ? a.cropViewer.polygonStyle = u.cropViewer.polygonStyle : (n.isUndefined(a.cropViewer.polygonStyle.stroke) && (a.cropViewer.polygonStyle.stroke = u.cropViewer.polygonStyle.stroke), n.isUndefined(a.cropViewer.polygonStyle.strokeWidth) && (a.cropViewer.polygonStyle.strokeWidth = u.cropViewer.polygonStyle.strokeWidth), n.isUndefined(a.cropViewer.polygonStyle.dash) && (a.cropViewer.polygonStyle.dash = u.cropViewer.polygonStyle.dash)), n.isUndefined(a.cropViewer.rotateLeft))
            a.cropViewer.rotateLeft = u.cropViewer.rotateLeft;
          else {
            var ne = a.cropViewer.rotateLeft;
            n.isBoolean(ne.visibility) && !ne.visibility ? ne.visibility = "hidden" : n.isString(ne.visibility) || (ne.visibility = u.cropViewer.rotateLeft.visibility);
          }
          if (n.isUndefined(a.cropViewer.rotateRight))
            a.cropViewer.rotateRight = u.cropViewer.rotateRight;
          else {
            var z = a.cropViewer.rotateRight;
            n.isBoolean(z.visibility) && !z.visibility ? z.visibility = "hidden" : n.isString(z.visibility) || (z.visibility = u.cropViewer.rotateRight.visibility);
          }
          if (n.isUndefined(a.cropViewer.autoDetectBorder))
            a.cropViewer.autoDetectBorder = u.cropViewer.autoDetectBorder;
          else {
            var ue = a.cropViewer.autoDetectBorder;
            n.isBoolean(ue.visibility) && !ue.visibility ? ue.visibility = "hidden" : n.isString(ue.visibility) || (ue.visibility = u.cropViewer.autoDetectBorder.visibility);
          }
        }
      }
      return a;
    } }, { key: "closeVideo", value: function() {
      var r, t = this;
      return !!t._NouiNotSupport("closeVideo") && (!t.myccvs || ((r = t.myccvs.closeVideo()) || n.Errors.WebviewerError(t._stwain, t.myccvs.Error.errorMessage, t.myccvs.Error.errorCode), r));
    } }, { key: "camera_on", value: function(r, t) {
      var i = this;
      if (i.myccvs || i.bindCameraForCameraManager(), i.mydocEditManager || i.bindCameraForDocumentEditManager(), r) {
        if (!n.isFunction(t))
          return void n.Errors.CallbackNotAFunction(i._stwain);
        i.myccvs.on(r, t), i.mydocEditManager.on(r, t);
      }
    } }, { key: "camera_off", value: function(r, t) {
      var i = this;
      if (i.myccvs && r)
        if (n.isUndefined(t))
          i.myccvs.off(r), ru.indexOf(r) >= 0 && i.myccvs.on(r, function(a, u) {
            n.isFunction(i[r]) && i[r](a, u);
          });
        else {
          if (!n.isFunction(t))
            return void n.Errors.CallbackNotAFunction(i._stwain);
          i.myccvs.off(r, t);
        }
      if (i.mydocEditManager && r)
        if (n.isUndefined(t))
          i.mydocEditManager.off(r), ru.indexOf(r) >= 0 && i.mydocEditManager.on(r, function(a, u) {
            n.isFunction(i[r]) && i[r](a, u);
          });
        else {
          if (!n.isFunction(t))
            return void n.Errors.CallbackNotAFunction(i._stwain);
          i.mydocEditManager.off(r, t);
        }
    } }, { key: "createEditPage", value: function(r, t) {
      var i, a = this, u = t || {};
      if (!a._NouiNotSupport("createEditPage"))
        return !1;
      a.mydocEditManager || a.createDocumentEditManager(), a.notBindCameraForDocumentEditManager() && a.bindCameraForDocumentEditManager();
      var c = a.GetCurrentFileName();
      return c.length == 0 && (a.CreateFile(Ni), a.OpenFile(Ni), c = Ni), u.fileName = c, (i = a.mydocEditManager.createEditPage(r, u)) || n.Errors.WebviewerError(a._stwain, a.mydocEditManager.Error.errorMessage, a.mydocEditManager.Error.errorCode), i;
    } }, { key: "removeEditPage", value: function(r) {
      var t = !1;
      return this.mydocEditManager && (t = this.mydocEditManager.removeEditPage(r)), t;
    } }, { key: "GetBorder", value: function() {
      return this._NouiNotSupport("border") ? this.myViewer.outerBorder : "";
    } }, { key: "SetBorder", value: function(r) {
      return !!this._NouiNotSupport("border") && (this.myViewer.outerBorder = r, !0);
    } }, { key: "GetInnerBorder", value: function() {
      return this._NouiNotSupport("innerBorder") ? this.myViewer.canvasBorder : "";
    } }, { key: "SetInnerBorder", value: function(r) {
      return !!this._NouiNotSupport("innerBorder") && (this.myViewer.canvasBorder = r, !0);
    } }, { key: "GetAllowPageDragging", value: function() {
      return this._NouiNotSupport("allowPageDragging") ? this.myViewer.allowPageDragging : "";
    } }, { key: "SetAllowPageDragging", value: function(r) {
      return !!this._NouiNotSupport("allowPageDragging") && (this.myViewer.allowPageDragging = r, !0);
    } }, { key: "GetSelectedAreaBorderColor", value: function() {
      return this._NouiNotSupport("selectedAreaBorderColor") ? this.myViewer.selectedBoxLineColor : "";
    } }, { key: "SetSelectedAreaBorderColor", value: function(r) {
      return !!this._NouiNotSupport("selectedAreaBorderColor") && (this.myViewer.selectedBoxLineColor = r, !0);
    } }, { key: "GetCursor", value: function() {
      return this._NouiNotSupport("cursor") ? this.myViewer.canvasMouseShape : "";
    } }, { key: "SetCursor", value: function(r) {
      var t = this;
      if (!t._NouiNotSupport("cursor"))
        return !1;
      if (r == "zoom-in" && !t.GetIfSinglePageMode())
        return n.Errors.CursorInvalidMode(t._stwain), !1;
      var i = "default";
      switch (r) {
        case "default":
          i = "default", t.SetOperationMode(0);
          break;
        case "pointer":
          i = "pointer", t.SetOperationMode(0);
          break;
        case "crosshair":
        default:
          i = "crosshair", t.SetOperationMode(1);
          break;
        case "zoom-in":
          i = "zoom-in", t.SetOperationMode(2);
      }
      return t.myViewer.canvasMouseShape = i, !0;
    } }, { key: "GetIfAutoScroll", value: function() {
      return this._NouiNotSupport("ifAutoScroll") ? this.myViewer.showLatestPage : "";
    } }, { key: "SetIfAutoScroll", value: function(r) {
      var t = this;
      return !!t._NouiNotSupport("ifAutoScroll") && (n.isBoolean(r) ? (t.myViewer.showLatestPage = r, t._imageEditorInner && t._imageEditorInner.SetIfAutoScroll(), !0) : (n.Errors.InvalidValue(t._stwain), !1));
    } }, { key: "GetPageMargin", value: function() {
      return this._NouiNotSupport("pageMargin") ? this.myViewer.pageMargin : 0;
    } }, { key: "SetPageMargin", value: function(r) {
      var t = this;
      return t._NouiNotSupport("pageMargin") ? !/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(r) || r < 0 ? (n.Errors.InvalidValue(t._stwain), !1) : (t.myViewer.pageMargin = r, !0) : !1;
    } }, { key: "setButtonClass", value: function(r, t) {
      var i, a = this;
      return !!a._NouiNotSupport("setButtonClass") && ((i = a.myViewer.setButtonClass(r, t)) || n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), i);
    } }, { key: "clearSelectedAreas", value: function() {
      var r, t = this;
      return !!t._NouiNotSupport("clearSelectedAreas") && (t.GetHowManyImagesInBuffer() <= 0 || ((r = t.myViewer.clearSelectedBoxes()) || n.Errors.WebviewerError(t._stwain, t.mydvs.Error.errorMessage, t.mydvs.Error.errorCode), r));
    } }, { key: "setSelectedAreas", value: function(r) {
      var t, i, a = this, u = [];
      if (a.GetCurrentIndex() < 0)
        return n.Errors.NoImage(a._stwain), !1;
      if (!a._NouiNotSupport("setSelectedAreas"))
        return !1;
      if (n.isUndefined(r) || r.length == 0)
        return n.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(a._stwain), !1;
      if (r.length && r.length > 0) {
        for (var c = 0; c < r.length; c++)
          if (i = {}, !(n.isUndefined(r[c]) || n.isUndefined(r[c].left) || n.isUndefined(r[c].top) || n.isUndefined(r[c].right) || n.isUndefined(r[c].bottom))) {
            if (r[c].left < 0 || r[c].top < 0 || r[c].right < 0 || r[c].bottom < 0 || (i.left = r[c].left, i.top = r[c].top, r[c].right - r[c].left < 0 || r[c].bottom - r[c].top < 0))
              continue;
            i.width = r[c].right - r[c].left, i.height = r[c].bottom - r[c].top, u.push(i);
          }
      } else if (i = {}, !(n.isUndefined(r) || n.isUndefined(r.left) || n.isUndefined(r.top) || n.isUndefined(r.right) || n.isUndefined(r.bottom))) {
        if (r.left < 0 || r.top < 0 || r.right < 0 || r.bottom < 0 || (i.left = r.left, i.top = r.top, r.right - r.left < 0 || r.bottom - r.top < 0))
          return n.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(a._stwain), !1;
        i.width = r.right - r.left, i.height = r.bottom - r.top, u.push(i);
      }
      return u.length == 0 ? (n.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(a._stwain), !1) : ((t = a.myViewer.setSelectedBoxes(u, !0)) || n.Errors.WebviewerError(a._stwain, a.mydvs.Error.errorMessage, a.mydvs.Error.errorCode), t);
    } }, { key: "_NouiNotSupport", value: function(r) {
      var t = this;
      return t._stwain._resetErr(), !!t._stwain._isValid() && (!t._stwain._isNoViewer() || (t._stwain._nouiNotSupport(r), !1));
    } }, { key: "pageChange", value: function(r) {
      var t, i = this, a = i.GetHowManyImagesInBuffer();
      if (n.log("OnPagination"), a <= 0)
        return n.Errors.NoImage(i._stwain), void Ya.output(i, "No image in Buffer");
      a != 1 && (!/^\d+$/.test(r) || r <= 0 ? alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.invalidIndex) : ((t = parseInt(r) - 1) < 0 ? t = 0 : t >= a && (t = a - 1), t != i.GetCurrentIndex() && i.go(t)));
    } }, { key: "first", value: function() {
      var r = this, t = r.GetHowManyImagesInBuffer();
      return r._NouiNotSupport("first") ? t <= 0 ? (n.Errors.NoImage(r._stwain), Ya.output(r, "No image in Buffer"), -1) : (t == 1 || r.go(0), 0) : -1;
    } }, { key: "last", value: function() {
      var r, t = this, i = t.GetHowManyImagesInBuffer();
      return t._NouiNotSupport("last") ? i <= 0 ? (n.Errors.NoImage(t._stwain), Ya.output(t, "No image in Buffer"), -1) : i == 1 ? 0 : (r = i - 1, t.go(r), r) : -1;
    } }, { key: "previous", value: function() {
      var r, t = this, i = t.GetHowManyImagesInBuffer();
      return t._NouiNotSupport("previous") ? i <= 0 ? (n.Errors.NoImage(t._stwain), Ya.output(t, "No image in Buffer"), -1) : i == 1 ? 0 : ((r = t.GetCurrentIndex() - 1) < 0 && (r = 0), t.go(r), r) : -1;
    } }, { key: "next", value: function() {
      var r, t = this, i = t.GetHowManyImagesInBuffer();
      return t._NouiNotSupport("next") ? i <= 0 ? (n.Errors.NoImage(t._stwain), Ya.output(t, "No image in Buffer"), -1) : i == 1 ? 0 : ((r = t.GetCurrentIndex() + 1) >= i && (r = i - 1), t.go(r), r) : -1;
    } }, { key: "go", value: function(r) {
      var t = this, i = r;
      return t._NouiNotSupport("go") ? t.GetHowManyImagesInBuffer() <= 0 ? (n.Errors.NoImage(t._stwain), Ya.output(t, "No image in Buffer"), -1) : (t._imageEditorInner ? t._imageEditorInner.go(r) : i = t.__goInner(r), i) : -1;
    } }, { key: "__goInner", value: function(r) {
      var t, i = this;
      if (r !== void 0) {
        if (r == -1)
          return n.Errors.IndexOutOfRange(i._stwain), -1;
        fr("", i._stwain), t = i.GoToPage(r);
      }
      return t;
    } }, { key: "topPageChanged", value: function(r, t) {
      this._UIView.__fireEvent("onTopImageInTheViewChanged", { index: r, bByScrollBar: t });
    } }, { key: "bufferChanged", value: function(r, t) {
      for (var i, a = this, u = [], c = -1, d = [], _ = 0; _ < a.GetHowManyImagesInBuffer(); _++)
        (i = a.GetCustomDataByIndex(_)) && i.imageId && u.push(a._stwain._objImageIndexManager.convertServerIdToGuid(i.imageId));
      if (u.length > 0 && (r.imageIds = u), r.currentUid) {
        var v = a.GetIndexByUid(r.currentUid);
        if (v >= 0 && (i = a.GetCustomDataByIndex(v)) && i.imageId) {
          c = a._stwain._objImageIndexManager.convertServerIdToGuid(i.imageId);
          var T = a._stwain._ImgManager._UIView.GetDataImageControl(i.imageId);
          T && T.uuid == -1 && (T.uuid = r.currentUid);
        }
      }
      if (r.currentId = c, r.selectedUids) {
        for (var M = 0; M < r.selectedUids.length; M++)
          if (r.selectedUids[M]) {
            var A = a.GetIndexByUid(r.selectedUids[M]);
            if (A >= 0 && (i = a.GetCustomDataByIndex(A)) && i.imageId) {
              d.push(a._stwain._objImageIndexManager.convertServerIdToGuid(i.imageId));
              var S = a._stwain._ImgManager._UIView.GetDataImageControl(i.imageId);
              S && S.uuid == -1 && (S.uuid = r.currentUid);
            }
          }
      }
      r.selectedIds = d;
      var V = n.mix(r, {});
      delete r.uids, delete r.currentUid, delete r.selectedUids, a._UIView.__fireEvent("onBufferChanged", r), a._documentEditor && a._bFireSync && (V.file || (V.file = a.GetCurrentFileName()), V.fromViewerBufferChanged === void 0 && (V.fromViewerBufferChanged = !0), a._documentEditor.syncFile(V));
    } }, { key: "click", value: function(r) {
      var t = this;
      t.UpdateInfo(!0, !1, !0), t._UIView.__fireEvent("onMouseClick", { e: r, x: r.imageX, y: r.imageY, index: t.GetCurrentIndex() });
    } }, { key: "rightclick", value: function(r) {
      this._UIView.__fireEvent("onMouseRightClick", { e: r, x: r.imageX, y: r.imageY, index: this.GetCurrentIndex() });
    } }, { key: "dblclick", value: function(r) {
      this._UIView.__fireEvent("onMouseDoubleClick", { e: r, x: r.imageX, y: r.imageY, index: this.GetCurrentIndex() });
    } }, { key: "mousemove", value: function(r) {
      this._UIView.__fireEvent("onMouseMove", { e: r, x: r.imageX, y: r.imageY, index: this.GetCurrentIndex() });
    } }, { key: "pageAreaSelected", value: function(r, t) {
      var i = 1;
      if (t && t.length > 0) {
        var a = t[t.length - 1];
        a.index && (i = parseInt(a.index) + 1), this._UIView.__fireEvent("onImageAreaSelected", { index: r, left: parseInt(a.x), top: parseInt(a.y), right: parseInt(a.x + a.width), bottom: parseInt(a.y + a.height), areaIndex: i });
      }
    } }, { key: "pageAreaUnselected", value: function(r) {
      this._UIView.__fireEvent("onImageAreaDeSelected", r);
    } }, { key: "dragdone", value: function(r) {
      n.isFunction(this._stwain.__OnIndexChangeDragDropDone) && this._stwain.__OnIndexChangeDragDropDone(r);
    } }, { key: "RegistLoadCallback", value: function(r) {
      return this._bRegistedLoad || (this._bRegistedLoad = !0), !0;
    } }, { key: "onDrop", value: function(r) {
      this.acceptDrop && this.dropEvent(r);
    } }, { key: "dropEvent", value: function(r) {
      var t, i, a = this, u = null, c = function(V) {
        V && ca.output(null, V + " was loaded successfully!"), u != null && a._stwain.Addon.PDF.SetConvertMode(u);
      }, d = function(V, ne, z) {
        z && ca.output(null, z + " failed to load. Error code: " + V + "Error String: " + ne), u != null && a._stwain.Addon.PDF.SetConvertMode(u);
      };
      try {
        for (var _ = r.dataTransfer.files, v = 0; v < _.length; v++) {
          if ((t = _[v]).type.length == 0) {
            var T = void 0, M = t.name.indexOf(".");
            switch (M > 0 && (T = t.name.substring(M + 1)), T) {
              case "bmp":
                i = l.DWT.EnumDWT_ImageType.IT_BMP;
                break;
              case "jpg":
              case "jpeg":
                i = l.DWT.EnumDWT_ImageType.IT_JPG;
                break;
              case "tif":
              case "tiff":
                i = l.DWT.EnumDWT_ImageType.IT_TIF;
                break;
              case "png":
                i = l.DWT.EnumDWT_ImageType.IT_PNG;
                break;
              case "pdf":
                i = l.DWT.EnumDWT_ImageType.IT_PDF;
                break;
              case "jp2":
              case "j2k":
              case "j2c":
                i = l.DWT.EnumDWT_ImageType.IT_J2K;
                break;
              default:
                ca.output(null, t.name + " failed to load because the file type is not supported!"), i = -1, n.Errors.UnrecognizedExt(a._stwain);
            }
          } else
            switch (t.type) {
              case "image/bmp":
                i = l.DWT.EnumDWT_ImageType.IT_BMP;
                break;
              case "image/jpg":
              case "image/jpeg":
                i = l.DWT.EnumDWT_ImageType.IT_JPG;
                break;
              case "image/tif":
              case "image/tiff":
                i = l.DWT.EnumDWT_ImageType.IT_TIF;
                break;
              case "image/png":
                i = l.DWT.EnumDWT_ImageType.IT_PNG;
                break;
              case "application/pdf":
                i = l.DWT.EnumDWT_ImageType.IT_PDF;
                break;
              case "image/jp2":
                i = l.DWT.EnumDWT_ImageType.IT_J2K;
                break;
              default:
                ca.output(null, t.name + " failed to load because the file type is not supported!"), i = -1, n.Errors.UnrecognizedExt(a._stwain);
            }
          if (i != -1) {
            if (n.showProgress(a._stwain, "DropLoading", !0), a._stwain._OnPercentDone([0, -1, l.MSG.Loading]), a._stwain.Addon && a._stwain.Addon.PDF) {
              var A = !1, S = void 0;
              n.License.checkProductKey(a._stwain, { PDFRasterizer: !0 }, !0) && (a._stwain._isMobileMode() ? A = !0 : (u = a._stwain.Addon.PDF.GetConvertMode(), S = a._stwain._innerFun("GetAddOnVersion", zt("pdf")), (n.env.bMac && S == l.DWT.PdfMacVersion || n.env.bLinux && S == l.DWT.PdfLinuxVersion || S == l.DWT.PdfVersion) && (A = !0)), A && a._stwain.Addon.PDF.SetConvertMode(3));
            }
            a._stwain._isMobileMode() ? a._stwain.LoadImageFromBinary(t, function() {
              l.Lib.closeProgress(a._stwain);
            }, function() {
              l.Lib.closeProgress(a._stwain);
            }) : function(V) {
              var ne = new FileReader();
              ne.readAsDataURL(V), ne.onload = function() {
                var z = a._stwain.__GetLoadEventsNum();
                a._stwain.__LoadImageFromBytesV2(V, i, "", !0, 0, V.size, !1, z, c, d);
              }, ne.onerror = function(z) {
                l.Lib.closeProgress(a._stwain), l.Lib.Errors.InvalidFile(a._stwain), a._stwain._errorString = this.error, d(a._stwain._errorCode, a._stwain._getErrorString());
              };
            }(_[v]);
          }
        }
      } catch (V) {
        n.error(V.stack || V, "error"), setTimeout(function() {
          throw V;
        }, 0);
      }
    } }, { key: "getImageManager", value: function() {
      return this._ImgManager;
    } }, { key: "on", value: function(r, t) {
      if (r) {
        if (!n.isFunction(t))
          return void n.Errors.CallbackNotAFunction(this._stwain);
        this.myViewer.on(r, t);
      }
    } }, { key: "off", value: function(r, t) {
      var i = this;
      if (r)
        if (n.isUndefined(t))
          i.myViewer.off(r), ru.indexOf(r) >= 0 && i.myViewer.on(r, function(a, u) {
            n.isFunction(i[r]) && i[r](a, u);
          });
        else {
          if (!n.isFunction(t))
            return void n.Errors.CallbackNotAFunction(i._stwain);
          i.myViewer.off(r, t);
        }
    } }, { key: "initDialogText", value: function(r, t) {
      var i = r;
      return n.isUndefined(i) ? i = t : (n.isUndefined(i.dlgChangeImageSize) ? i.dlgChangeImageSize = t.dlgChangeImageSize : (i.dlgChangeImageSize[0].length == 0 && (i.dlgChangeImageSize[0] = t.dlgChangeImageSize[0]), i.dlgChangeImageSize[1].length == 0 && (i.dlgChangeImageSize[1] = t.dlgChangeImageSize[1]), i.dlgChangeImageSize[2].length == 0 && (i.dlgChangeImageSize[2] = t.dlgChangeImageSize[2]), i.dlgChangeImageSize[3].length == 0 && (i.dlgChangeImageSize[3] = t.dlgChangeImageSize[3]), i.dlgChangeImageSize[4].length == 0 && (i.dlgChangeImageSize[4] = t.dlgChangeImageSize[4])), n.isUndefined(i.dlgRotateAnyAngle) ? i.dlgRotateAnyAngle = t.dlgRotateAnyAngle : (i.dlgRotateAnyAngle[0].length == 0 && (i.dlgRotateAnyAngle[0] = t.dlgRotateAnyAngle[0]), i.dlgRotateAnyAngle[1].length == 0 && (i.dlgRotateAnyAngle[1] = t.dlgRotateAnyAngle[1]), i.dlgRotateAnyAngle[2].length == 0 && (i.dlgRotateAnyAngle[2] = t.dlgRotateAnyAngle[2]), i.dlgRotateAnyAngle[3].length == 0 && (i.dlgRotateAnyAngle[3] = t.dlgRotateAnyAngle[3]), i.dlgRotateAnyAngle[4].length == 0 && (i.dlgRotateAnyAngle[4] = t.dlgRotateAnyAngle[4])), n.isUndefined(i.saveChangedImage) ? i.saveChangedImage = t.saveChangedImage : (i.saveChangedImage[0].length == 0 && (i.saveChangedImage[0] = t.saveChangedImage[0]), i.saveChangedImage[1].length == 0 && (i.saveChangedImage[1] = t.saveChangedImage[1]), i.saveChangedImage[2].length == 0 && (i.saveChangedImage[2] = t.saveChangedImage[2])), n.isUndefined(i.selectSource) ? i.selectSource = t.selectSource : (i.selectSource[0].length == 0 && (i.selectSource[0] = t.selectSource[0]), i.selectSource[1].length == 0 && (i.selectSource[1] = t.selectSource[1]), i.selectSource[2].length == 0 && (i.selectSource[2] = t.selectSource[2]), i.selectSource[3].length == 0 && (i.selectSource[3] = t.selectSource[3]))), i;
    } }, { key: "createDocumentEditor", value: function(r) {
      var t = this;
      if (!t._NouiNotSupport("createImageEditor"))
        return NaN;
      if (!t._documentEditor || t._documentEditor.myDocumentEditor.isDestroyed) {
        var i = t.setElementForDocumentConfiguration(r), a = t.getDefaultDocumentConfigurationValue(t._globalScanConfiguration, i, !0);
        t._globalScanConfiguration = a, t._documentEditor = new fd(t, t.GetCurrentIndex(), a);
      } else
        n.Errors.DocumentEditorExist(t._stwain);
      return t._documentEditorInner = t._documentEditor._documentEditorInner, t.bShowDocumentEdit = t._documentEditorInner.bShowDocumentEdit, t._documentEditor;
    } }, { key: "createImageEditor", value: function(r) {
      var t = this;
      return t._NouiNotSupport("createImageEditor") ? (t._imageEditor ? n.Errors.ImageEditorExist(t._stwain) : (r ? (n.isUndefined(r.border) && (r.border = t.GetBorder()), n.isUndefined(r.selectionRectAspectRatio) && (r.selectionRectAspectRatio = t.GetSelectionRectAspectRatio()), n.isUndefined(r.background) && (r.background = eo.background), n.isUndefined(r.topMenuBorder) && (r.topMenuBorder = eo.topMenuBorder), n.isUndefined(r.innerBorder) && (r.innerBorder = eo.innerBorder), n.isUndefined(r.promptToSaveChange) && (r.promptToSaveChange = eo.promptToSaveChange), n.isUndefined(r.buttons) && (r.buttons = eo.buttons), r.dialogText = t.initDialogText(r.dialogText, eo.dialogText)) : ((r = eo).border = t.GetBorder(), r.selectionRectAspectRatio = t.GetSelectionRectAspectRatio()), t._imageEditor = new _d(t, r)), t._imageEditorInner = t._imageEditor._imageEditorInner, t.bShowImageEdit = t._imageEditorInner.bShowImageEdit, t._imageEditor) : NaN;
    } }, { key: "createThumbnailViewer", value: function(r) {
      var t = this;
      return t._NouiNotSupport("createThumbnailViewer") ? (r && !n.isUndefined(r.showCheckbox) && (n.isUndefined(r.checkbox) && (r.checkbox = {}), r.checkbox.visibility = r.showCheckbox ? "visible" : "hidden"), t._thumbnailViewer ? n.Errors.ThumbnailViewerExist(t._stwain) : t._thumbnailViewer = new yd(t, r), t.myThumbnailViewer = t._thumbnailViewer.myThumbnailViewer, t.myThumbnailViewer.on("click", function(i, a) {
        t.UpdateInfo(!0, !1, !0);
      }), t._thumbnailViewer) : NaN;
    } }, { key: "createCustomElement", value: function(r, t, i) {
      var a = this, u = "right", c = !1;
      return a._NouiNotSupport("createCustomElement") ? n.isUndefined(r) ? (n.Errors.ElementRequired(a._stwain), NaN) : r ? (n.isUndefined(t) || (u = t), !n.isUndefined(i) && n.isBoolean(i) && (c = i), a._customElement ? n.Errors.CustomElementExist(a._stwain) : (a._customElement = new id(a, r, u, c), a._customElement.myCustomElemet || (a._customElement = void 0)), a._customElement) : (n.Errors.ElementNotExist(a._stwain), NaN) : NaN;
    } }, { key: "ConvertClientIndexToServerIdInFile", value: function(r, t) {
      var i = this._fileWrapper.openFile(r);
      if (t >= 0 && t < i.length) {
        var a = i[t];
        if (a)
          return this._dvsWrapper.getCustomDataSync(a).imageId;
      }
      return null;
    } }, { key: "ConvertServerIdToIndexInFile", value: function(r, t) {
      for (var i, a = -1, u = this._fileWrapper.openFile(r), c = 0; c < u.length; c++) {
        var d = u[c];
        if (d && (i = this._dvsWrapper.getCustomDataSync(d)) && i.imageId == t) {
          a = c;
          break;
        }
      }
      return a;
    } }, { key: "FireBufferChanged", value: function(r, t, i) {
      var a = this, u = a._fileWrapper.openFile(r), c = null;
      if (a.currentFileName == r) {
        var d = a.GetCurrentIndex(), _ = a.myViewer.getCurrentPageUids();
        _ && d >= 0 && d < _.length && (c = _[d]);
      }
      var v = { action: t, actionData: i, uids: u, currentUid: c, selectedUids: [], fromViewerBufferChanged: !1, file: r };
      this.IsInternalFile(r) || t == "add" ? a._documentEditor && a._documentEditor.syncFile(v) : a.bufferChanged(v);
    } }, { key: "RemoveByServerId", value: function(r, t) {
      var i, a = this, u = a.ConvertServerIdToIndexInFile(r, t);
      u >= 0 && ((i = a._fileWrapper) === null || i === void 0 || i.removeByIndexInFile(r, u), a.FireBufferChanged(r, "remove"));
    } }, { key: "IsInternalFile", value: function(r) {
      var t = !1;
      return r.indexOf("__dynamsoft_camera_files") != 0 && r.indexOf("__dynamsoft_crop_files") != 0 && r.indexOf("__dynamsoft_edit_files") != 0 || (t = !0), t;
    } }, { key: "InsertImage", value: function(r, t, i) {
      var a, u, c = this;
      c._bFireSync = !1, a = i >= 0 ? c.mydvs.DataControl.insertSync(r, [t], i) : c.mydvs.DataControl.appendSync(r, [t]), c._bFireSync = !0, a && a.length >= 1 && (u = a[0]), c.FireBufferChanged(r, "add", u);
    } }]), o;
  }();
  n.UI.WebViewer = Id;
  var Ja = ca;
  l.DWT;
  var Sd = function() {
    function o(e, r) {
      Gn(this, o);
      var t = this;
      t._ImgManager = e, t._stwain = e._stwain, t.zoomInStep = 1.2, t.zoomOutStep = 0.8, t.MIN_ZOOM = 0.02, t.MAX_ZOOM = 65, t.BaseUrl = !1, t.MAX_ROWS = 128, t.MAX_COLUMNS = 128, t.AllowMultiSelect = !0, t.__MousewheelValue = 0, this._Init(r);
    }
    return zn(o, [{ key: "_Init", value: function(e) {
      var r = this;
      r.borderWidth = n.isUndefined(e.borderWidth) ? 1 : e.borderWidth, e.BackgroundColor ? r.BackgroundColorByDefault = e.BackgroundColor : r.BackgroundColorByDefault = "#FFFFFF", e.BackgroundColor = r.BackgroundColorByDefault, r.BackgroundFillColor = r.BackgroundColorByDefault, r._webViewer ? r._webViewer._Init(e) : r._webViewer = new Id(r._ImgManager, e, r), r.mapModelImageControl = e.mapModelImageControl, r.__InitEvents(e);
    } }, { key: "dispose", value: function() {
      var e = this;
      e._webViewer && (e._webViewer.dispose(), e._webViewer = null);
    } }, { key: "__InitEvents", value: function(e) {
      var r = this;
      n.isFunction(e.onTopImageInTheViewChanged) && (r.onTopImageInTheViewChanged = e.onTopImageInTheViewChanged), n.isFunction(e.onGetImageInfo) && (r.onGetImageInfo = e.onGetImageInfo), n.isFunction(e.onZoomChanged) && (r.onZoomChanged = e.onZoomChanged), n.isFunction(e.onMouseMove) && (r.onMouseMove = e.onMouseMove), n.isFunction(e.onMouseClick) && (r.onMouseClick = e.onMouseClick), n.isFunction(e.onMouseRightClick) && (r.onMouseRightClick = e.onMouseRightClick), n.isFunction(e.onMouseDoubleClick) && (r.onMouseDoubleClick = e.onMouseDoubleClick), n.isFunction(e.onImageAreaDeSelected) && (r.onImageAreaDeSelected = e.onImageAreaDeSelected), n.isFunction(e.onImageAreaSelected) && (r.onImageAreaSelected = e.onImageAreaSelected), n.isFunction(e.onBufferChanged) && (r.onBufferChanged = e.onBufferChanged), n.isFunction(e.onSelected) && (r.onSelected = e.onSelected), n.isFunction(e.onRefreshUI) && (r.onRefreshUI = e.onRefreshUI), n.isFunction(e.onResetCurrentIndex) && (r.onResetCurrentIndex = e.onResetCurrentIndex);
    } }, { key: "SetMetaDataByIndex", value: function(e, r) {
      return this.GetWebViewer().SetMetaDataByIndex(e, r);
    } }, { key: "GetMetaDataByIndex", value: function(e) {
      return this.GetWebViewer().GetMetaDataByIndex(e);
    } }, { key: "GetDataImageControl", value: function(e) {
      return this.mapModelImageControl[e];
    } }, { key: "SetDataImageControl", value: function(e, r, t) {
      var i, a = this;
      return r != -1 && ((i = a.mapModelImageControl[r]) || ((i = new yc()).serverId = r, a.mapModelImageControl[r] = i), i != null && (i.bIsDirty = !0), a.__GetImageAndAttach(i, r, !0, !1, !1, e, t), !0);
    } }, { key: "AttachImagesForControl", value: function(e, r) {
      var t = this.GetWebViewer();
      return e.bAddImage ? t.AppendImage(e, r) : t.UpdateImage(e, r), t._ImageEditorInner && t._ImageEditorInner.bCouldBeTimeConsuming && (t._ImageEditorInner.bCouldBeTimeConsuming = !1, l.Lib.hideMask()), !0;
    } }, { key: "MobileAttachImagesForControl", value: function(e, r) {
      var t = this.GetWebViewer();
      return e.bAddImage ? t.MobileAppendImage(e, r) : t.MobileUpdateImage(e, r), t._ImageEditorInner && t._ImageEditorInner.bCouldBeTimeConsuming && (t._ImageEditorInner.bCouldBeTimeConsuming = !1, l.Lib.hideMask()), !0;
    } }, { key: "GetWebViewer", value: function() {
      return this._webViewer;
    } }, { key: "__GetWebViewerUuid", value: function(e) {
      return this.mapModelImageControl[e].uuid;
    } }, { key: "SetSelectedImageArea", value: function(e, r, t, i) {
      var a = this.GetWebViewer();
      return a != null && a.SetSelectedImageArea(e, r, t, i);
    } }, { key: "OverlayRectangle", value: function(e, r, t, i, a, u, c) {
      var d = this.GetWebViewer();
      return d != null && d.OverlayRectangle(e, r, t, i, a, u, c);
    } }, { key: "ChangeImageViewSize", value: function(e, r) {
      var t = this.GetWebViewer();
      return e >= 0 && (t.GetWidth(), t.SetWidth(e)), r >= 0 && (t.GetHeight(), this.GetWebViewer().SetHeight(r)), !0;
    } }, { key: "GetWidth", value: function() {
      return this.GetWebViewer().GetWidth();
    } }, { key: "SetWidth", value: function(e) {
      var r = e;
      return this.GetWebViewer().SetWidth(r), !0;
    } }, { key: "GetHeight", value: function() {
      return this.GetWebViewer().GetHeight();
    } }, { key: "SetHeight", value: function(e) {
      var r = e;
      return this.GetWebViewer().SetHeight(r), !0;
    } }, { key: "RefreshAllImages", value: function(e, r) {
      var t, i, a, u = this, c = u.GetWebViewer();
      if (!u._stwain._isMobileMode() && u.mapModelImageControl)
        for (var d = 0; d < c.GetHowManyImagesInBuffer(); d++) {
          t = u.getImageManager().convertClientIndexToServerId(d);
          var _ = u.mapModelImageControl[t];
          _ && (i = Ja.getImageUrl(u.BaseUrl, t, e, r, Date.now()), _.minImageUrl = i, a = c.GetMetaDataByIndex(d), c.UpdateImage(_, a));
        }
    } }, { key: "SetViewMode", value: function(e, r) {
      return this.GetWebViewer().SetViewMode(e, r);
    } }, { key: "RemoveAllImages", value: function() {
      var e, r, t, i, a = this;
      for (t = a._ImgManager.count(), i = Object.keys(a.mapModelImageControl).length, e = 0; e < t; e++)
        (r = a.getImageManager().convertClientIndexToServerId(e)) != -1 && a.mapModelImageControl[r] && (a.mapModelImageControl[r].Clear(), delete a.mapModelImageControl[r]);
      return t == i && (a.mapModelImageControl = {}), a.GetWebViewer().RemoveAllImages(), !0;
    } }, { key: "__GetImageAndAttach", value: function(e, r, t, i, a, u, c) {
      var d = this, _ = d.GetWebViewer().GetWidthInner(), v = d.GetWebViewer().GetHeightInner(), T = !1;
      T = !!t || e.bIsDirty == 1;
      var M = d.__GetWebViewerUuid(r);
      M && e.iImageControlWidth == _ && e.iImageControlHeight == v && e.bIsDirty == 0 || d.__SetArrayControlLoadImage(M, r, e, _, v, d.AttachImagesForControl, T, i, a, u, c);
    } }, { key: "__SetArrayControlLoadImage", value: function(e, r, t, i, a, u, c, d, _, v, T) {
      var M = this;
      M._stwain._isMobileMode() ? M.OnGetImageFromMobileServer(r, t, i, a, d, _, v, T) : c ? M.OnGetImageFromServer(r, t, i, a, d, _, v, T) : M.OnGetImageByURL(r, t, i, a, d, _, v, T);
    } }, { key: "OnGetImageByURL", value: function(e, r, t, i, a, u, c, d) {
      var _ = this;
      return r.imageUrl && r.imageUrl != "" ? (r.iImageControlWidth = t, r.iImageControlHeight = i, r.bAddImage = a, r.bAppendImage = u, r.index = c, _._stwain._isMobileMode() ? _.MobileAttachImagesForControl(r, d) : _.AttachImagesForControl(r, d), !0) : _.OnGetImageFromServer(e, r, t, i, a, u, c, d);
    } }, { key: "OnGetImageFromMobileServer", value: function(e, r, t, i, a, u, c, d) {
      r.iImageControlWidth = t, r.iImageControlHeight = i, r.bAddImage = a, r.bAppendImage = u, r.index = c, this.MobileAttachImagesForControl(r, d);
    } }, { key: "OnGetImageFromServer", value: function(e, r, t, i, a, u, c, d) {
      var _, v, T = this, M = T.BaseUrl;
      if (M) {
        if (e == -1)
          return !1;
        r.bIsDirty && (r.ticks = Date.now()), n.isUndefined(t) && (t = -1), n.isUndefined(i) && (i = -1), r.iImageControlWidth = t, r.iImageControlHeight = i, r.bAddImage = a, r.bAppendImage = u, r.index = c, l.DWT.ConnectWithSocket && T._stwain._bBindViewer ? T._stwain.__innerConvertToBlob(l.DWT.EnumDWT_ImageType.IT_PNG, [e], !1, !0, 4, function(A) {
          r.imageUrl = URL.createObjectURL(A), r.minImageUrl = URL.createObjectURL(A), T.AttachImagesForControl(r, d);
        }, function(A) {
        }) : (_ = Ja.getImageUrl(M, e, -1, -1, r.ticks), v = Ja.getImageUrl(M, e, t, i, r.ticks), r.imageUrl = _, r.minImageUrl = v, T.AttachImagesForControl(r, d));
      }
      return !0;
    } }, { key: "SetIfFitWindowAndType", value: function(e) {
      var r, t = this.GetWebViewer();
      if (t != null) {
        switch (e) {
          case 1:
            r = "height";
            break;
          case 2:
            r = "width";
            break;
          default:
            r = "window";
        }
        t.SetFitType(r);
      }
      return !0;
    } }, { key: "GetAllowMultiSelect", value: function() {
      return this.AllowMultiSelect;
    } }, { key: "SetAllowMultiSelect", value: function(e) {
      return this.AllowMultiSelect = e, !0;
    } }, { key: "GetFitWindowType", value: function() {
      return 0;
    } }, { key: "SetSelectionRectAspectRatio", value: function(e) {
      return this.GetWebViewer().SetSelectionRectAspectRatio(e), !0;
    } }, { key: "GetSelectionRectAspectRatio", value: function(e) {
      return this.GetWebViewer().GetSelectionRectAspectRatio();
    } }, { key: "SetFitWindowType", value: function(e) {
      return this.SetIfFitWindowAndType(e), !0;
    } }, { key: "GetIfFitWindow", value: function() {
      return !0;
    } }, { key: "SetIfFitWindow", value: function(e) {
      return e ? this.GetWebViewer().SetFitType() : this.GetWebViewer().SetZoom(1), !0;
    } }, { key: "GetImageMargin", value: function() {
      return this.GetWebViewer().GetImageMargin();
    } }, { key: "SetImageMargin", value: function(e) {
      return this.GetWebViewer().SetImageMargin(e), !0;
    } }, { key: "GetSelectionImageBorderColor", value: function() {
      return this.GetWebViewer().GetSelectedPageBorder();
    } }, { key: "SetSelectionImageBorderColor", value: function(e) {
      var r = e;
      return this.GetWebViewer().SetSelectionImageBorderColor(r), !0;
    } }, { key: "GetZoom", value: function() {
      return this.GetWebViewer().GetZoom();
    } }, { key: "SetZoom", value: function(e, r, t) {
      var i = this;
      e < i.MIN_ZOOM && (e = i.MIN_ZOOM), e > i.MAX_ZOOM && (e = i.MAX_ZOOM);
      var a = i.GetWebViewer();
      return a != null && a.SetZoom(e), !0;
    } }, { key: "ZoomIn", value: function(e, r) {
      var t = this, i = t.mapModelImageControl[t.getImageManager().convertClientIndexToServerId(t._webViewer.GetCurrentIndex())], a = t.GetWebViewer().GetZoom(), u = Math.floor(100 * a * t.zoomInStep) + 1;
      return 1 < u && u < 2501 ? L(i.imageWidth * a) > 15e3 || L(i.imageHeight * a) > 15e3 ? (Ja.output(t, l.Lib.product.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn), alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn), !1) : (t.SetZoom(u / 100, e, r), !0) : (Ja.output(t, l.Lib.product.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn), alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn), !1);
    } }, { key: "ZoomOut", value: function() {
      var e = this, r = e.GetWebViewer().GetZoom(), t = Math.floor(100 * r * e.zoomOutStep) - 1;
      return 1 < t && t < 6501 ? (e.SetZoom(t / 100), !0) : (Ja.output(e, l.Lib.product.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut), alert(l.Lib.product.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut), !1);
    } }, { key: "GetMouseShape", value: function() {
      return this.GetWebViewer().GetMouseShape();
    } }, { key: "SetMouseShape", value: function(e) {
      return this.GetWebViewer().SetMouseShape(e), !0;
    } }, { key: "GetShowPageNumber", value: function() {
      return this.GetWebViewer().GetShowPageNumber();
    } }, { key: "SetShowPageNumber", value: function(e) {
      return this.GetWebViewer().SetShowPageNumber(e), !0;
    } }, { key: "SetBackgroundFillColor", value: function(e) {
      var r = e;
      return this.BackgroundFillColor = r, !0;
    } }, { key: "GetBackgroundColor", value: function() {
      return this.GetWebViewer().GetBackground();
    } }, { key: "SetBackgroundColor", value: function(e) {
      var r = e;
      return this.GetWebViewer().SetBackground(r), !0;
    } }, { key: "Go", value: function(e) {
      return this.GetWebViewer().go(e);
    } }, { key: "SetSelectedindexes", value: function(e) {
      return this.GetWebViewer().SetSelectedindexes(e);
    } }, { key: "GetSelectedindexes", value: function(e) {
      return this.GetWebViewer().GetSelectedindexes();
    } }, { key: "__Previous", value: function() {
      return this.Go(this.GetWebViewer().GetCurrentIndex() - 1), !0;
    } }, { key: "__Next", value: function() {
      return this.Go(this.GetWebViewer().GetCurrentIndex() + 1), !0;
    } }, { key: "__fireEvent", value: function(e, r) {
      return !n.isFunction(this[e]) || this[e](r);
    } }, { key: "AddImage", value: function(e, r, t, i) {
      var a, u = 1 * e;
      return r != -1 && ((a = new yc()).bIsDirty = !0, a.serverId = r, this.mapModelImageControl[r] = a, r >= 0 && this.__GetImageAndAttach(a, r, !1, !0, i, u, t), !0);
    } }, { key: "RemoveImage", value: function(e, r) {
      var t = this, i = L(e);
      return isNaN(i) ? (n.Errors.InvalidIndex(t), !1) : i < 0 || i >= t._ImgManager.count() ? (n.Errors.IndexOutOfRange(t), !1) : (t._ImgManager.count(), r != -1 && t.mapModelImageControl[r] && (t.mapModelImageControl[r].Clear(), delete t.mapModelImageControl[r]), t.GetWebViewer().RemoveByIndex(i));
    } }, { key: "MoveImage", value: function(e, r, t) {
      return this.GetWebViewer().MoveImage(e, r);
    } }, { key: "SwitchImage", value: function(e, r) {
      return this.GetWebViewer().SwitchImage(e, r);
    } }, { key: "GetIfAutoScroll", value: function() {
      return this._webViewer.GetIfAutoScroll();
    } }, { key: "SetIfAutoScroll", value: function(e) {
      return this._webViewer.SetIfAutoScroll(e), !0;
    } }, { key: "Print", value: function() {
      var e, r = this;
      if (!((e = r.GetWebViewer().GetCurrentIndex()) < 0)) {
        var t, i;
        if ((i = r.getImageManager().convertClientIndexToServerId(e)) == -1)
          return n.Errors.IndexOutOfRange(r), !1;
        if (!r._stwain._isMobileMode())
          return t = Ja.getImageUrl(r.BaseUrl, i, -1, -1), r.__PrintInner(t, i, e);
        var a = r.GetWebViewer().GetUidByIndex(e);
        return r.GetWebViewer().GetImageData(a).then(function(u) {
          return u.oriData instanceof ArrayBuffer ? r.__PrintInner(URL.createObjectURL(new Blob([u.oriData])), i, e) : u.oriData instanceof Blob ? r.__PrintInner(URL.createObjectURL(u.oriData), i, e) : r.__PrintInner(u.oriData, i, e);
        }), !0;
      }
    } }, { key: "__PrintInner", value: function(e, r, t) {
      var i = this, a = i.mapModelImageControl[r], u = [];
      if (!a)
        return !1;
      var c = a.width;
      (n.isUndefined(a.width) || a.width <= 0) && (a.width = i.getImageManager().GetImageWidth(t));
      var d = a.height;
      (n.isUndefined(a.height) || a.height <= 0) && (a.height = i.getImageManager().GetImageHeight(t));
      var _ = new rd(e, a.width, a.height);
      return u.push(_), a.width = c, a.height = d, Ja.print(u), !0;
    } }, { key: "GetHowManyImagesInBuffer", value: function() {
      return this.GetWebViewer().GetHowManyImagesInBuffer();
    } }, { key: "RemoveImageTag", value: function(e) {
      return this.GetWebViewer().RemoveImageTag(e);
    } }, { key: "FilterImagesByTag", value: function(e, r, t) {
      return this.GetWebViewer().FilterImagesByTag(e, r, t);
    } }, { key: "ClearFilter", value: function() {
      return this.GetWebViewer().ClearFilter();
    } }, { key: "GetServerIdList", value: function() {
      return this.GetWebViewer().GetServerIdList();
    } }, { key: "GetServerIdListByTag", value: function(e) {
      var r, t, i, a, u = this, c = [];
      if (e && e.length == 0)
        for (t = 0; t < u.GetHowManyImagesInBuffer(); t++)
          (a = u.GetWebViewer().GetCustomDataByIndex(t)) && c.push(a.imageId);
      else if (r = u.GetWebViewer().GetTagContents(e))
        for (t = 0; t < r.length; t++)
          (i = u.GetWebViewer().GetIndexByUid(r[t])) >= 0 && (a = u.GetWebViewer().GetCustomDataByIndex(i)) && c.push(a.imageId);
      return c;
    } }, { key: "SetDefaultTag", value: function(e) {
      return this.GetWebViewer().SetDefaultTag(e);
    } }, { key: "AddImageTag", value: function(e, r) {
      return this.GetWebViewer().AddImageTag(e, r);
    } }, { key: "GetCurrentTag", value: function() {
      var e;
      return (e = this.GetWebViewer().GetCurrentTag()) == 0 ? "" : e;
    } }, { key: "RenameTag", value: function(e, r) {
      return this.GetWebViewer().RenameTag(e, r);
    } }, { key: "RemoveTag", value: function(e, r) {
      return this.GetWebViewer().RemoveTag(e, r);
    } }, { key: "GetTagList", value: function() {
      return this.GetWebViewer().GetTagList();
    } }, { key: "GetTagListByIndex", value: function(e) {
      return this.GetWebViewer().GetTagListByIndex(e);
    } }, { key: "CreateFile", value: function(e) {
      return this.GetWebViewer().CreateFile(e);
    } }, { key: "OpenFile", value: function(e) {
      return this.GetWebViewer().OpenFile(e);
    } }, { key: "GetCurrentFileName", value: function() {
      return this.GetWebViewer().GetCurrentFileName();
    } }, { key: "RemoveFile", value: function(e) {
      return this.GetWebViewer().RemoveFile(e);
    } }, { key: "RenameFile", value: function(e, r) {
      return this.GetWebViewer().RenameFile(e, r);
    } }, { key: "GetFileInfoList", value: function() {
      return this.GetWebViewer().GetFileInfoList();
    } }, { key: "GetImageIdsByFileName", value: function(e) {
      return this.GetWebViewer().GetImageIdsByFileName(e);
    } }, { key: "BindView", value: function(e) {
      var r, t = this.GetWebViewer();
      return (r = t.BindView(e)) && t.show(), r;
    } }, { key: "UnbindView", value: function() {
      return this.GetWebViewer().UnbindView();
    } }, { key: "GetIfShowVideoContainer", value: function() {
      return this.GetWebViewer().GetIfShowVideoContainer();
    } }, { key: "ShowVideoContainer", value: function(e) {
      return this.GetWebViewer().ShowVideoContainer(e);
    } }, { key: "UpdateVideoContainer", value: function(e) {
      return this.GetWebViewer().UpdateVideoContainer(e);
    } }, { key: "__AttachImages", value: function() {
      var e, r, t, i = this;
      r = i.GetWebViewer().GetHowManyImagesInBuffer();
      for (var a = 0; a < r; a++)
        (e = i._ImgManager.convertClientIndexToServerId(a)) >= 0 && (t = i.mapModelImageControl[e], i.__GetImageAndAttach(t, e, !0, !1, !1, 0));
    } }, { key: "exists", value: function(e) {
      return !n.isUndefined(this.mapModelImageControl[e]);
    } }, { key: "getImageManager", value: function() {
      return this._ImgManager;
    } }, { key: "GetImageData", value: function(e) {
      this.GetWebViewer().GetImageData(e);
    } }, { key: "RegistLoadCallback", value: function(e) {
      return this.GetWebViewer().RegistLoadCallback(e);
    } }, { key: "UpdateData", value: function(e, r) {
      var t = this.GetWebViewer(), i = this.GetDataImageControl(e);
      return i && t.UpdateImage(i, r), !0;
    } }, { key: "RemoveByServerId", value: function(e, r) {
      return this.GetWebViewer().RemoveByServerId(e, r);
    } }, { key: "innerInsertModel", value: function(e, r) {
      var t = new yc();
      t.serverId = e, t.uuid = r, this.mapModelImageControl[e] = t;
    } }]), o;
  }();
  n.UI.ImageUIView = Sd;
  var wg = function(o) {
    return [o._httpUrl, "dwt/", n.product.getDWTPrefix(), n.product.getServerVersionInfo(), "/img?id=", o._clientId].join("");
  }, kc = function(o) {
    l.DWT.Debug && n.log(o);
  }, Td = function() {
    function o(e, r) {
      Gn(this, o);
      var t = this;
      t._stwain = e, t.__backgroundFillColor = 16777215, t.bImageJustChangedInEditor = !1, t.bImageChangedInViewer = !1, t._Init(e, r);
    }
    return zn(o, [{ key: "_Init", value: function(e, r) {
      var t = this;
      e._ifBindViewer ? r.mapModelImageControl = t.getView().mapModelImageControl : r.mapModelImageControl = {}, r.onTopImageInTheViewChanged = function(i) {
        l.Lib.isFunction(e.__OnTopImageInTheViewChanged) && e.__OnTopImageInTheViewChanged(i.index, i.bByScrollBar);
      }, r.onGetImageInfo = function(i) {
        return { width: t.GetImageWidth(i), height: -1 };
      }, t._UIView ? t._UIView._Init(r) : t._UIView = new Sd(t, r);
    } }, { key: "getUidByIndex", value: function(e) {
      return this.getWebViewer().GetUidByIndex(e);
    } }, { key: "getIndexByUid", value: function(e) {
      return this.getWebViewer().GetIndexByUid(e);
    } }, { key: "getCurrentImageIndex", value: function() {
      return this.getWebViewer().GetCurrentIndex();
    } }, { key: "convertServerIdToClientIndex", value: function(e) {
      var r, t, i = -1;
      return (t = this._UIView.GetDataImageControl(e)) && (r = t.uuid), r && (i = this.getWebViewer().GetIndexByUid(r)), n.isNumber(i) || (i = -1), i;
    } }, { key: "convertClientIndexToServerId", value: function(e) {
      var r = this.getWebViewer().GetCustomDataByIndex(e);
      return r ? r.imageId : -1;
    } }, { key: "convertClientIndexToServerIdInFile", value: function(e, r) {
      return this.getWebViewer().ConvertClientIndexToServerIdInFile(e, r);
    } }, { key: "getWebViewer", value: function() {
      return this.getView()._webViewer;
    } }, { key: "getTwain", value: function() {
      return this._stwain;
    } }, { key: "getView", value: function() {
      return this._UIView;
    } }, { key: "OnReady", value: function() {
      return this.getView().BaseUrl = wg(this._stwain), !0;
    } }, { key: "count", value: function() {
      return this.getView().GetWebViewer().GetHowManyImagesInBuffer();
    } }, { key: "clear", value: function() {
      return this.getView().RemoveAllImages(), !0;
    } }, { key: "dispose", value: function() {
      var e = this;
      return e._UIView && (e._UIView.dispose(), e._UIView = null), !0;
    } }, { key: "unshift", value: function(e, r, t) {
      return this.getView(), this._updateUIAfterAdd(0, r, t);
    } }, { key: "append", value: function(e, r, t) {
      var i, a, u, c, d = this, _ = d.getView();
      a = _.GetWebViewer().GetHowManyImagesInBuffer(), u = _.GetWebViewer().GetCurrentIndex();
      for (var v = a - 1; v >= e; v--)
        c = d.convertClientIndexToServerId(v), _.RemoveImage(v, c);
      return a < e ? (i = a, d._updateUIAfterAdd(i, r, t, !0)) : (i = u >= a - 1 ? 0 : u + 1, c = d.convertClientIndexToServerId(i), _.RemoveImage(i, c), i == e - 1 ? d._updateUIAfterAdd(i, r, t, !0) : d._updateUIAfterAdd(i, r, t, !1));
    } }, { key: "exists", value: function(e) {
      return this.getView().exists(e);
    } }, { key: "insertBefore", value: function(e, r, t, i) {
      var a, u = 1 * e;
      return (u < 0 || u > r) && (u = -1), u >= (a = this.getView().GetWebViewer().GetHowManyImagesInBuffer()) && (u = a), this._updateUIAfterAdd(u, t, i, !1);
    } }, { key: "insert", value: function(e, r, t, i) {
      var a, u = 1 * e;
      return (u < 0 || u > r) && (u = -1), u >= (a = this.getView().GetWebViewer().GetHowManyImagesInBuffer()) && (u = a), this._updateUIAfterAdd(u, t, i, !1);
    } }, { key: "_updateUIAfterAdd", value: function(e, r, t, i) {
      var a = this.getView();
      return !(r < 0) && a.AddImage(e, r, t, i);
    } }, { key: "removeByServerId", value: function(e, r) {
      var t = this, i = e, a = t.GetCurrentFileName();
      if (!i || i == a) {
        var u = t.convertServerIdToClientIndex(r);
        if (u < 0 && (u = t.getWebViewer().ConvertServerIdToIndexInFile(i, r)) >= 0) {
          var c = t.getUidByIndex(u);
          t.getView().innerInsertModel(r, c);
        }
        if (u >= 0)
          return t.remove(r);
      }
      return t.getView().RemoveByServerId(e, r);
    } }, { key: "remove", value: function(e) {
      var r = this.getView(), t = this.convertServerIdToClientIndex(e);
      return r.RemoveImage(t, e);
    } }, { key: "MoveImage", value: function(e, r) {
      return this.getView().MoveImage(e, r);
    } }, { key: "SwitchImage", value: function(e, r) {
      return this.getView().SwitchImage(e, r);
    } }, { key: "GetImageHeight", value: function(e) {
      var r, t, i, a, u = this, c = 1 * e;
      if (t = u.getView(), r = u.count(), c < 0 || c > r)
        return 0;
      if (u._stwain._isMobileMode()) {
        var d = t._webViewer.GetMetaDataByIndex(c);
        return d && d.height ? d.height : 0;
      }
      return a = u.convertClientIndexToServerId(c), (i = t.GetDataImageControl(a)) && i.imageHeight ? i.imageHeight : u._stwain.GetImageHeight(c);
    } }, { key: "GetImageWidth", value: function(e) {
      var r, t, i, a, u = this, c = 1 * e;
      if (t = u.getView(), r = u.count(), c < 0 || c > r)
        return 0;
      if (u._stwain._isMobileMode()) {
        var d = t._webViewer.GetMetaDataByIndex(c);
        return d && d.width ? d.width : 0;
      }
      return a = u.convertClientIndexToServerId(c), (i = t.GetDataImageControl(a)) && i.imageWidth ? i.imageWidth : u._stwain.GetImageWidth(c);
    } }, { key: "get", value: function(e) {
      var r, t, i, a = this, u = parseInt(e);
      return t = a.getView(), r = a.count(), !(u < 0 || u > r) && (i = a.convertClientIndexToServerId(u), t.GetDataImageControl(i));
    } }, { key: "refresh", value: function(e, r, t, i) {
      var a, u = this, c = 1 * e;
      if (t) {
        var d, _;
        if (_ = u.getView(), d = u.count(), c < 0 || c > d)
          return !1;
        a = u.convertClientIndexToServerId(c), _.SetDataImageControl(c, a, i);
      }
      return !0;
    } }, { key: "Go", value: function(e) {
      return this.getView().Go(e);
    } }, { key: "__Next", value: function() {
      return this.getView().__Next();
    } }, { key: "__Previous", value: function() {
      return this.getView().__Previous();
    } }, { key: "SetSelectedClientIndexArray", value: function(e) {
      return this.getView().SetSelectedindexes(e);
    } }, { key: "getSelectedClientIndexArray", value: function() {
      return this.getView().GetSelectedindexes();
    } }, { key: "GetZoom", value: function() {
      return this.getView().GetZoom();
    } }, { key: "SetZoom", value: function(e) {
      return this.getView().SetZoom(e);
    } }, { key: "__GetPrintUrl", value: function(e, r, t) {
      var i, a, u = this, c = 0, d = 0;
      return (i = u.getView().GetDataImageControl(r)) && (!i.width || i.width <= 0 ? i.width = u.GetImageWidth(t) : c = i.width, !i.height || i.height <= 0 ? i.height = u.GetImageHeight(t) : d = i.height, a = new rd(e, i.width, i.height), i.width = c, i.height = d), a;
    } }, { key: "__GetPrintUrlforHttp", value: function(e, r) {
      var t = this, i = t.getView();
      n.each(e, function(a) {
        var u = t.convertClientIndexToServerId(a);
        if (u != -1) {
          var c = ca.getImageUrl(i.BaseUrl, u, -1, -1), d = t.__GetPrintUrl(c, u, a);
          r.push(d);
        }
      }), ca.print(r);
    } }, { key: "__GetPrintUrlforSocket", value: function(e, r) {
      var t, i = this, a = n.Promise.resolve(0), u = 0;
      return n.each(e, function(c) {
        a = a.then(function() {
          var d = i.convertClientIndexToServerId(c);
          if (d != -1) {
            var _ = i.getWebViewer().GetUidByIndex(c);
            i.getWebViewer().GetImageData(_).then(function(v) {
              u++, t = v.oriData instanceof ArrayBuffer ? URL.createObjectURL(new Blob([v.oriData])) : v.oriData instanceof Blob ? URL.createObjectURL(v.oriData) : v.oriData;
              var T = i.__GetPrintUrl(t, d, c);
              r.push(T), e.length == u && ca.print(r);
            });
          }
        });
      }), !0;
    } }, { key: "__GetPrintUrlforMobileEx", value: function(e, r) {
      var t, i = this, a = n.Promise.resolve(0), u = 0;
      return n.each(e, function(c) {
        a = a.then(function() {
          var d = i.convertClientIndexToServerId(c);
          if (d != -1) {
            var _ = i.getWebViewer().GetUidByIndex(c);
            i.getWebViewer().GetImageData(_).then(function(v) {
              u++, t = v.oriData instanceof ArrayBuffer ? URL.createObjectURL(new Blob([v.oriData])) : v.oriData instanceof Blob ? URL.createObjectURL(v.oriData) : v.oriData;
              var T = i.__GetPrintUrl(t, d, c);
              r.push(T), e.length == u && ca.print(r);
            });
          }
        });
      }), !0;
    } }, { key: "PrintEx", value: function(e) {
      var r = this;
      if (!(r.count() <= 0)) {
        var t = [];
        return r._stwain._isMobileMode() ? r.__GetPrintUrlforMobileEx(e, t) : l.DWT.ConnectWithSocket ? r.__GetPrintUrlforSocket(e, t) : r.__GetPrintUrlforHttp(e, t), !0;
      }
    } }, { key: "Print", value: function() {
      var e = this;
      if (e.count() <= 0)
        return !1;
      var r, t = [];
      for (r = 0; r < e.count(); r++)
        t.push(r);
      return e.PrintEx(t);
    } }, { key: "_isNoViewer", value: function() {
      return !this._stwain._bBindViewer;
    } }, { key: "ChangeSize", value: function(e, r) {
      return this.getView().ChangeImageViewSize(e, r);
    } }, { key: "GetWidth", value: function() {
      return this.getView().GetWidth();
    } }, { key: "SetWidth", value: function(e, r) {
      return !!this._isNoViewer() || this.getView().SetWidth(e);
    } }, { key: "GetHeight", value: function() {
      return this.getView().GetHeight();
    } }, { key: "SetHeight", value: function(e, r) {
      return !!this._isNoViewer() || this.getView().SetHeight(e);
    } }, { key: "SetViewMode", value: function(e, r) {
      var t = this;
      return t._isNoViewer() ? t._stwain._nouiNotSupport("SetViewMode") : t.getView().SetViewMode(e, r);
    } }, { key: "ShowImageEditorEx", value: function(e, r, t, i, a, u, c, d) {
      var _ = this;
      if (_._isNoViewer())
        return _._stwain._nouiNotSupport("ShowImageEditorEx");
      switch (a) {
        case 0:
        case 1:
        case 2:
          break;
        case 3:
          if (_.getWebViewer().OnCloseImageEditor())
            return !0;
      }
      var v, T, M = document;
      T = _.getView(), _.getTwain()._containerElement == c && (u = !1, kc("warning: cannot use the same DIV for the main viewer and the editor viewer."));
      for (var A = 0; A < l.DWT.DynamicContainers.length; A++)
        if (l.DWT.DynamicContainers[A].ContainerId == c) {
          u = !1, kc("warning: cannot use an DIV which is already consumed by the method CreateDWTObject.");
          break;
        }
      if (u && c && (n.isDOM(c) ? v = c : n.isShadowRoot(c) ? (v = document.createElement("div"), c.appendChild(v)) : (v = M.getElementById(c)) && v.nodeName != "DIV" && (kc("warning: cannot create the editor viewer in a non-DIV element."), u = !1)), u && c && n.isDOM(c)) {
        var S = n.getShadowRoot(c);
        if (S) {
          var V, ne, z = l.Lib.timestamp;
          return (V = M.createElement("link")).href = [l.DWT.ResourcesPath, "/src/dynamsoft.viewer.css", z].join(""), V.rel = "stylesheet", V.async = !0, (ne = M.createElement("link")).href = [l.DWT.ResourcesPath, "/src/dynamsoft.webtwain.css", z].join(""), ne.rel = "stylesheet", ne.async = !0, n.scriptOnload(V, function() {
            n.scriptOnload(ne, function() {
              return T.GetWebViewer().ShowImageEditor(v, u, t, i);
            }), S.appendChild(ne);
          }), S.appendChild(V), !0;
        }
      }
      return T.GetWebViewer().ShowImageEditor(v, u, t, i);
    } }, { key: "SetSelectionRectAspectRatio", value: function(e) {
      return this.getView().SetSelectionRectAspectRatio(e);
    } }, { key: "GetSelectionRectAspectRatio", value: function() {
      return this.getView().GetSelectionRectAspectRatio();
    } }, { key: "GetSelectionImageBorderColor", value: function() {
      return this.getView().GetSelectionImageBorderColor();
    } }, { key: "SetSelectionImageBorderColor", value: function(e) {
      var r = e;
      return this.getView().SetSelectionImageBorderColor(r);
    } }, { key: "GetBackgroundColor", value: function() {
      return this.getView().GetBackgroundColor();
    } }, { key: "SetBackgroundColor", value: function(e, r) {
      var t;
      return !!this._isNoViewer() || (t = this.getView(), r ? t.SetBackgroundColor(e, !0) : t.SetBackgroundColor(e));
    } }, { key: "GetAllowMultiSelect", value: function() {
      var e = this.getView();
      return !this._isNoViewer() && e.GetAllowMultiSelect();
    } }, { key: "SetAllowMultiSelect", value: function(e) {
      var r = this.getView();
      return !!this._isNoViewer() || r.SetAllowMultiSelect(e);
    } }, { key: "GetFitWindowType", value: function() {
      var e = this.getView();
      return this._isNoViewer() ? 0 : e.GetFitWindowType();
    } }, { key: "SetFitWindowType", value: function(e) {
      var r = this.getView();
      return !!this._isNoViewer() || r.SetFitWindowType(e);
    } }, { key: "GetIfFitWindow", value: function() {
      var e = this.getView();
      return !!this._isNoViewer() || e.GetIfFitWindow();
    } }, { key: "SetIfFitWindow", value: function(e) {
      var r = this.getView();
      return !!this._isNoViewer() || r.SetIfFitWindow(e);
    } }, { key: "GetImageMargin", value: function() {
      var e = this.getView();
      return this._isNoViewer() ? 0 : e.GetImageMargin();
    } }, { key: "SetImageMargin", value: function(e) {
      var r = this.getView();
      return !!this._isNoViewer() || r.SetImageMargin(e);
    } }, { key: "GetMouseShape", value: function() {
      var e = this.getView();
      return this._isNoViewer() ? 0 : e.GetMouseShape();
    } }, { key: "SetMouseShape", value: function(e) {
      var r = this.getView();
      return !!this._isNoViewer() || r.SetMouseShape(e);
    } }, { key: "GetShowPageNumber", value: function() {
      var e = this.getView();
      return !this._isNoViewer() && e.GetShowPageNumber();
    } }, { key: "SetShowPageNumber", value: function(e) {
      var r = this.getView();
      return !!this._isNoViewer() || r.SetShowPageNumber(e);
    } }, { key: "GetIfAutoScroll", value: function() {
      return this.getView().GetIfAutoScroll();
    } }, { key: "SetIfAutoScroll", value: function(e) {
      return this.getView().SetIfAutoScroll(e);
    } }, { key: "OverlayRectangle", value: function(e, r, t, i, a, u, c) {
      return !!this._isNoViewer() || this.getView().OverlayRectangle(e, r, t, i, a, u, c);
    } }, { key: "SetSelectedImageArea", value: function(e, r, t, i, a) {
      var u = this.getView();
      return e == u.GetWebViewer().GetCurrentIndex() && (!!this._isNoViewer() || u.SetSelectedImageArea(r, t, i, a));
    } }, { key: "ShowImagesByFilter", value: function(e, r, t) {
      return this.getView().FilterImagesByTag(e, r, t);
    } }, { key: "ClearFilter", value: function() {
      return this.getView().ClearFilter();
    } }, { key: "GetServerIdListByTag", value: function(e) {
      return this.getView().GetServerIdListByTag(e);
    } }, { key: "GetAllServerIdList", value: function() {
      return this.getView().GetServerIdList();
    } }, { key: "RemoveImageTag", value: function(e) {
      return this.getView().RemoveImageTag(e);
    } }, { key: "SetDefaultTag", value: function(e) {
      return this.getView().SetDefaultTag(e);
    } }, { key: "AddImageTag", value: function(e, r) {
      return this.getView().AddImageTag(e, r);
    } }, { key: "GetCurrentTag", value: function() {
      return this.getView().GetCurrentTag();
    } }, { key: "RenameTag", value: function(e, r) {
      return this.getView().RenameTag(e, r);
    } }, { key: "RemoveTag", value: function(e, r) {
      return this.getView().RemoveTag(e, r);
    } }, { key: "GetTagList", value: function() {
      return this.getView().GetTagList();
    } }, { key: "GetTagListByIndex", value: function(e) {
      return this.getView().GetTagListByIndex(e);
    } }, { key: "OpenFile", value: function(e) {
      return this.getView().OpenFile(e);
    } }, { key: "CreateFile", value: function(e) {
      return this.getView().CreateFile(e);
    } }, { key: "GetCurrentFileName", value: function() {
      return this.getView().GetCurrentFileName();
    } }, { key: "RemoveFile", value: function(e) {
      return this.getView().RemoveFile(e);
    } }, { key: "RenameFile", value: function(e, r) {
      return this.getView().RenameFile(e, r);
    } }, { key: "GetFileInfoList", value: function() {
      return this.getView().GetFileInfoList();
    } }, { key: "GetImageIdsByFileName", value: function(e) {
      return this.getView().GetImageIdsByFileName(e);
    } }, { key: "BindView", value: function(e) {
      var r = this.getView(), t = e;
      return n.isString(e) ? t = n.get(e) : n.isDOM(t) && (t.id && t.id != "" || (t.id = ["dwt_", n.getRandom()].join(""))), r.BindView(t);
    } }, { key: "UnbindView", value: function() {
      return this.getView().UnbindView();
    } }, { key: "GetIfShowVideoContainer", value: function() {
      return this.getView().GetIfShowVideoContainer();
    } }, { key: "ShowVideoContainer", value: function(e) {
      return this.getView().ShowVideoContainer(e);
    } }, { key: "UpdateVideoContainer", value: function(e) {
      return this.getView().UpdateVideoContainer(e);
    } }, { key: "GetImageData", value: function(e) {
      var r = this, t = r.getView(), i = r.convertServerIdToClientIndex(e);
      return i >= 0 ? t.GetImageData(r.getUidByIndex(i)) : NaN;
    } }, { key: "RegistLoadCallback", value: function(e) {
      return this.getView().RegistLoadCallback(e);
    } }, { key: "insertImage", value: function(e, r, t) {
      this.getWebViewer().InsertImage(e, r, t);
    } }]), o;
  }();
  n.UI.ImageManager = Td;
  var Ig = function() {
    function o(e) {
      Gn(this, o);
      var r = this;
      r._parent = e, Tn(r, "width", { get: function() {
        return this._parent._width;
      }, set: function(t) {
        this.SetSize(t, !1);
      } }), Tn(r, "height", { get: function() {
        return this._parent._height;
      }, set: function(t) {
        this.SetSize(!1, t);
      } });
    }
    return zn(o, [{ key: "SetSize", value: function(e, r) {
      var t, i = this._parent, a = !1, u = !1;
      return !!i._isBindViewer() && (n.isString(e) && e.length > 0 && e.charAt(e.length - 1) === "%" && (a = e), !a && e && (t = parseInt(e)) && (a = t + "px"), n.isString(r) && r.length > 0 && r.charAt(r.length - 1) === "%" && (u = r), !u && r && (t = parseInt(r)) && (u = t + "px"), a && (i._width = a), u && (i._height = u), ua.changeImageUISize(i, a, u));
    } }]), o;
  }(), Cd = function(o) {
    n.dlgProgress || n.initProgress();
    var e = n.one(".dynamsoft-btnCancel");
    e && e.getEL() && n.addEventListener(e[0], "mousedown", function() {
      var r = n.cancelFrom;
      n.closeProgress(o, 0), r == ei || r == Qi ? n.bio && (n.bio.abort(), n.bio = vt) : r == Zi || r == _i ? o.SetCancel() : r == Gi && n.isFunction(o.__OnCancel) && o.__OnCancel();
    });
  };
  n.html5.ui = { init: function(o, e) {
    var r, t, i, a;
    Cd(o), o._isBindViewer() ? (e.container ? o._containerElement = e.container : e.containerId && (o._containerElement = n.get(e.containerId)), o._width = e.width, o._height = e.height, r = n.one(o._containerElement)) : o._containerElement = null, o._ifBindViewer = e.ifBindViewer, function(u, c) {
      var d = { Stwain: u }, _ = vt;
      if (u._isBindViewer()) {
        var v, T = u._width, M = u._height;
        v = n.one(u._containerElement), n.isString(T) && T.indexOf("%") >= 0 ? (T = n.css(v, "width") * parseInt(T) / 100, _ = Gt) : T = parseInt(T), n.isString(M) && M.indexOf("%") >= 0 ? (M = n.css(v, "height") * parseInt(M) / 100, _ = Gt) : M = parseInt(M), d = { Stwain: u, Container: c, Width: T, Height: M };
      }
      ua.bindUIViewEvents(u, d), u._ImgManager ? (u._ImgManager && u._ImgManager._UIView && u._ImgManager._UIView.BackgroundColor && (d.BackgroundColor = u._ImgManager._UIView.BackgroundColor), u._ImgManager._Init(u, d)) : u._ImgManager = new Td(u, d), _ && ua.changeImageUISize(u, u._width, u._height);
    }(o, r), o._ifBindViewer || (t = o, i = o._config, a = i || {}, t.__OnImageAreaDeSelected = a.onImageAreaDeSelected || "", t.__OnImageAreaSelected = a.onImageAreaSelected || "", t.__OnMouseClick = a.onMouseClick || "", t.__OnMouseDoubleClick = a.onMouseDoubleClick || "", t.__OnMouseMove = a.onMouseMove || "", t.__OnMouseRightClick = a.onMouseRightClick || "", t.__OnTopImageInTheViewChanged = a.onTopImageInTheViewChanged || "", t.__OnBufferChanged = a.onBufferChanged || "", o.__OnMouseClick = e.onMouseClick || "", o.__OnThumbnailMouseClick = "", o.__OnKeyDown = e.onKeyDown || "", o.__OnMouseWheel = e.onMouseWheel || "", o.__OnMouseDoubleClick = e.onMouseDoubleClick || "", o.__OnMouseRightClick = e.onMouseRightClick || "", o.__OnMouseMove = e.onMouseMove || "", o.__OnImageAreaSelected = e.onImageAreaSelected || "", o.__OnImageAreaDeSelected = e.onImageAreaDeSelected || "", o.__OnRefreshUI = e.onRefreshUI || "", o.__OnBufferChanged = e.onBufferChanged || "", o.__MouseX = 0, o.__MouseY = 0, o.__style = new Ig(o), o.__fSelectionRectAspectRatio = 0);
  }, unLoad: function(o) {
    var e = o._containerElement;
    e && (e.innerHTML = "");
  }, initProgress: function(o) {
    Cd(o);
  }, addMethods: function(o) {
    o._bRemoteMode || n.mix(o, { OverlayRectangle: function(e, r, t, i, a, u, c) {
      var d, _ = this;
      return _._resetErr(), !!_._isValid() && (_._isNoViewer() ? _._nouiNotSupport("OverlayRectangle") : r > i || t > a || r == i && t == a ? (n.Errors.Overlay_InvalidLeftOrTopOrRightOrBottom(_), !1) : (d = n.isNumber(u) ? n.getColor(u) : u, _._ImgManager.OverlayRectangle(e, r, t, i, a, d, c)));
    }, SetViewMode: function(e, r) {
      var t = this;
      if (t._resetErr(), !t._isValid())
        return !1;
      if (t._isNoViewer())
        return t._nouiNotSupport("SetViewMode");
      if (n.isString(e) || n.isString(r) || e < -1 && r < -1)
        return n.Errors.InvalidValue(t), vt;
      var i = Math.floor(e), a = Math.floor(r);
      return t._ImgManager.SetViewMode(i, a), !0;
    }, Print: function(e) {
      var r = this;
      return r._resetErr(), r._isValid() ? r._isNoViewer() ? r._nouiNotSupport("Print") : !r._isMobileMode() && e ? (r._innerSend("PrintEx", zt(!0), !0, function() {
      }, function() {
      }), !0) : (r._ImgManager.Print(), !0) : !1;
    }, PrintEx: function(e) {
      var r = this;
      return r._resetErr(), !!r._isValid() && (n.isArray(e) ? r._isNoViewer() ? r._nouiNotSupport("Print") : !!r._checkIndices(e) && (r._ImgManager.PrintEx(e), !0) : (n.Errors.IndicesNotArray(r), !1));
    }, ShowImageEditor: function(e, r, t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      if (a._isNoViewer())
        return a._nouiNotSupport("ShowImageEditor");
      if (!a._isMobileMode()) {
        if (on.isServerInvalid(a))
          return vt;
      }
      return a._ImgManager.getWebViewer().bShowImageEdit ? a.ShowImageEditorEx(-1, -1, -1, -1, 3) : e && r && t ? a.ShowImageEditorEx(-1, -1, r, t, 0, !0, e, i) : a.ShowImageEditorEx(-1, -1, -1, -1, 0, !1);
    }, ShowImageEditorEx: function(e, r, t, i, a, u, c, d) {
      var _ = this;
      return _._resetErr(), !!_._isValid() && (_._isNoViewer() ? _._nouiNotSupport("ShowImageEditorEx") : _._ImgManager.ShowImageEditorEx(e, r, t, i, a, u, c, d));
    }, SetSelectedImageArea: function(e, r, t, i, a) {
      var u = this;
      if (u._resetErr(), !u._isValid())
        return !1;
      if (u._isNoViewer())
        return u._nouiNotSupport("SetSelectedImageArea");
      var c = parseInt(e);
      return isNaN(c) || c < 0 || c >= u._ImgManager.count() ? (n.Errors.IndexOutOfRange(u), !1) : !(!u._isMobileMode() && on.isServerInvalid(u)) && u._ImgManager.SetSelectedImageArea(c, r, t, i, a);
    }, first: function() {
      var e = this, r = e._ImgManager.count();
      return e._resetErr(), !!e._isValid() && (e._isNoViewer() ? e._nouiNotSupport("first") : (r > 0 && (e._ImgManager.Go(0), ua.__innerRefreshFromUIView(e, e._ImgManager.getCurrentImageIndex())), Gt));
    }, previous: function() {
      var e = this, r = e._ImgManager.count();
      return e._resetErr(), !!e._isValid() && (e._isNoViewer() ? e._nouiNotSupport("previous") : (r > 0 && (e._ImgManager.__Previous(), ua.__innerRefreshFromUIView(e, e._ImgManager.getCurrentImageIndex())), Gt));
    }, next: function() {
      var e = this, r = e._ImgManager.count();
      return e._resetErr(), !!e._isValid() && (e._isNoViewer() ? e._nouiNotSupport("next") : (r > 0 && (e._ImgManager.__Next(), ua.__innerRefreshFromUIView(e, e._ImgManager.getCurrentImageIndex())), Gt));
    }, last: function() {
      var e = this, r = e._ImgManager.count();
      return e._resetErr(), !!e._isValid() && (e._isNoViewer() ? e._nouiNotSupport("last") : (r > 0 && (e._ImgManager.Go(r - 1), ua.__innerRefreshFromUIView(e, e._ImgManager.getCurrentImageIndex())), Gt));
    } });
  } }, n.attachPropertyUI = function(o) {
    o._bRemoteMode || (Tn(o, "Width", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? (o._nouiNotSupport("Width"), "") : o._ImgManager.GetWidth() : "";
    }, set: function(e) {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("Width") : o._ImgManager.SetWidth(e));
    } }), Tn(o, "Height", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? (o._nouiNotSupport("Height"), "") : o._ImgManager.GetHeight() : "";
    }, set: function(e) {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("Height") : o._ImgManager.SetHeight(e));
    } }), Tn(o, "AllowMultiSelect", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? o._nouiNotSupport("AllowMultiSelect") : o._ImgManager.GetAllowMultiSelect() : "";
    }, set: function(e) {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("AllowMultiSelect") : void o._ImgManager.SetAllowMultiSelect(e));
    } }), Tn(o, "BackgroundColor", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? (o._nouiNotSupport("BackgroundColor"), "") : o._ImgManager.GetBackgroundColor() : "";
    }, set: function(e) {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("BackgroundColor") : o._ImgManager.SetBackgroundColor(e));
    } }), Tn(o, "BackgroundFillColor", { get: function() {
      if (o._resetErr(), !o._isValid())
        return "";
      if (o._isNoViewer())
        return o._nouiNotSupport("BackgroundFillColor"), "";
      if (o._isMobileMode()) {
        var e = o.__backgroundFillColor;
        if (n.isUndefined(e) && (e = o._ImgManager._UIView.BackgroundFillColor), n.isNumber(e))
          return n.getColor(e);
        var r = parseInt(e.slice(1), 16);
        return e = r;
      }
      var t = o._innerFun("BackgroundFillColor");
      return n.BGR2RGB(t);
    }, set: function(e) {
      if (o._resetErr(), !o._isValid())
        return !1;
      if (o._isNoViewer())
        return o._nouiNotSupport("BackgroundFillColor");
      var r, t = 1 * e;
      return !n.isNumber(t) || isNaN(t) ? (n.Errors.InvalidValue(o), vt) : o._isMobileMode() ? (o._ImgManager._UIView.SetBackgroundFillColor(n.getColor(t)), o.__backgroundFillColor = n.getColor(t), !0) : (r = n.RGB2BGR(t), o._innerFun("BackgroundFillColor", zt(r)));
    } }), Tn(o, "FitWindowType", { get: function() {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? (o._nouiNotSupport("FitWindowType"), 0) : o._ImgManager.GetFitWindowType());
    }, set: function(e) {
      if (o._resetErr(), !o._isValid())
        return !1;
      if (o._isNoViewer())
        return o._nouiNotSupport("FitWindowType");
      var r = 1 * e;
      return o._ImgManager.SetFitWindowType(r);
    } }), Tn(o, "IfFitWindow", { get: function() {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("IfFitWindow") : o._ImgManager.GetIfFitWindow());
    }, set: function(e) {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("IfFitWindow") : e ? o._ImgManager.SetIfFitWindow(!0) : o._ImgManager.SetIfFitWindow(!1));
    } }), Tn(o, "ImageMargin", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? (o._nouiNotSupport("ImageMargin"), 0) : o._ImgManager.GetImageMargin() : 0;
    }, set: function(e) {
      if (o._resetErr(), !o._isValid())
        return !1;
      if (o._isNoViewer())
        return o._nouiNotSupport("ImageMargin");
      var r = parseInt(e);
      return !isNaN(r) && o._ImgManager.SetImageMargin(r);
    } }), Tn(o, "MouseX", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? (o._nouiNotSupport("MouseX"), 0) : o.__MouseX : 0;
    } }), Tn(o, "MouseY", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? (o._nouiNotSupport("MouseY"), 0) : o.__MouseY : 0;
    } }), Tn(o, "SelectionImageBorderColor", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? (o._nouiNotSupport("SelectionImageBorderColor"), "") : o._ImgManager.GetSelectionImageBorderColor() : "";
    }, set: function(e) {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("SelectionImageBorderColor") : o._ImgManager.SetSelectionImageBorderColor(e));
    } }), Tn(o, "Zoom", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? (o._nouiNotSupport("Zoom"), 0) : o._ImgManager.GetZoom() : 0;
    }, set: function(e) {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("Zoom") : o._ImgManager.SetZoom(e));
    } }), Tn(o, "MouseShape", { get: function() {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("MouseShape") : o._ImgManager.GetMouseShape() == Me);
    }, set: function(e) {
      if (o._resetErr(), !o._isValid())
        return !1;
      if (o._isNoViewer())
        return o._nouiNotSupport("MouseShape");
      var r = Z;
      return e && (r = Me), o._ImgManager.SetMouseShape(r);
    } }), Tn(o, "SelectionRectAspectRatio", { get: function() {
      return o._resetErr(), o._isValid() ? o._isNoViewer() ? (o._nouiNotSupport("SelectionRectAspectRatio"), 0) : o._ImgManager.GetSelectionRectAspectRatio() : 0;
    }, set: function(e) {
      if (o._resetErr(), !o._isValid())
        return !1;
      if (o._isNoViewer())
        return o._nouiNotSupport("SelectionRectAspectRatio");
      var r = parseFloat(e);
      return r >= 0 && (o._ImgManager.SetSelectionRectAspectRatio(r), !0);
    } }), Tn(o, "ShowPageNumber", { get: function() {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("ShowPageNumber") : o._ImgManager.GetShowPageNumber());
    }, set: function(e) {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("ShowPageNumber") : o._ImgManager.SetShowPageNumber(e));
    } }), Tn(o, "IfAutoScroll", { get: function() {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("IfAutoScroll") : o._ImgManager.GetIfAutoScroll());
    }, set: function(e) {
      return o._resetErr(), !!o._isValid() && (o._isNoViewer() ? o._nouiNotSupport("IfAutoScroll") : o._ImgManager.SetIfAutoScroll(e));
    } }));
  }, n.detect.viewerScriptLoaded = Gt;
  function Ed(o, e, r) {
    var t = { get: function() {
      return o._mobileNotSupport(e);
    } };
    (r === 1 || n.isUndef(r)) && (t.set = t.get), e in o || Object.defineProperty(o, e, t);
  }
  function Xa(o, e, r) {
    n.isArray(e) ? n.each(e, function(t) {
      Ed(o, t, r);
    }) : Ed(o, e, r);
  }
  function ls(o, e, r, t) {
    var i;
    r !== 0 && r !== 1 ? i = r : (i = {}, r && (i.set = t == 1 ? function(a) {
      var u = 1 * a;
      return !n.isNumber(u) || isNaN(u) ? (n.Errors.InvalidValue(o), vt) : (o._resetErr(), !!o._isValid() && o._innerFun(e, zt(u)));
    } : t == 2 ? function(a) {
      return n.isBoolean(a) ? (o._resetErr(), !!o._isValid() && o._innerFun(e, zt(a))) : (n.Errors.InvalidValue(o), vt);
    } : function(a) {
      return n.isString(a) ? (o._resetErr(), !!o._isValid() && o._innerFun(e, zt(a))) : (n.Errors.InvalidValue(o), vt);
    })), i.get || (i.get = function() {
      return o._resetErr(), !!o._isValid() && o._innerFun(e);
    }), e in o || Object.defineProperty(o, e, i);
  }
  function Dd(o, e) {
    var r = typeof Symbol < "u" && o[Symbol.iterator] || o["@@iterator"];
    if (!r) {
      if (Array.isArray(o) || (r = function(d, _) {
        if (d) {
          if (typeof d == "string")
            return kd(d, _);
          var v = Object.prototype.toString.call(d).slice(8, -1);
          if (v === "Object" && d.constructor && (v = d.constructor.name), v === "Map" || v === "Set")
            return Array.from(d);
          if (v === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))
            return kd(d, _);
        }
      }(o)) || e && o && typeof o.length == "number") {
        r && (o = r);
        var t = 0, i = function() {
        };
        return { s: i, n: function() {
          return t >= o.length ? { done: !0 } : { done: !1, value: o[t++] };
        }, e: function(d) {
          throw d;
        }, f: i };
      }
      throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
    }
    var a, u = !0, c = !1;
    return { s: function() {
      r = r.call(o);
    }, n: function() {
      var d = r.next();
      return u = d.done, d;
    }, e: function(d) {
      c = !0, a = d;
    }, f: function() {
      try {
        u || r.return == null || r.return();
      } finally {
        if (c)
          throw a;
      }
    } };
  }
  function kd(o, e) {
    (e == null || e > o.length) && (e = o.length);
    for (var r = 0, t = new Array(e); r < e; r++)
      t[r] = o[r];
    return t;
  }
  function xd(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function xc(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function Ms(o, e, r) {
    return e.has(o), r;
  }
  function iu(o) {
    var e = _r;
    return o == Xt ? e = Fr : o == dn ? e = Or : Su(o) && (e = vr), e;
  }
  function Md(o, e) {
    var r = new ki();
    return r.server = o, r.attrs = e, r;
  }
  var Mc = function() {
    function o(t, i, a, u) {
      Gn(this, o), ar(this, "serverUrl", void 0), this.serverUrl = t, this.bLocal = n.isLocalIP(t), this.clientId = a ?? n.guid(), this.bGlobal = i, this.serverName = u, this.bLicenseOK = !1;
    }
    var e, r;
    return zn(o, [{ key: "checkSource", value: function(t) {
      if (!t)
        throw { code: -1003, message: "Source Manager unable to find the specified Source" };
    } }, { key: "parseResultDefault", value: function(t) {
      var i;
      if (n.isObject(t) && t.exception && t.exception != 0)
        throw { code: t.exception, message: (i = t.description) !== null && i !== void 0 ? i : "general error" };
      if (t && n.isArray(t.result) && t.result.length > 0) {
        var a = t.result[t.result.length - 1];
        try {
          return JSON.parse(a);
        } catch {
          return a;
        }
      }
      throw t;
    } }, { key: "_requestAsync", value: (r = Ln(he.mark(function t(i, a, u) {
      var c, d, _, v, T;
      return he.wrap(function(M) {
        for (; ; )
          switch (M.prev = M.next) {
            case 0:
              return c = [qi(), "/", i.method].join(""), a && (d = a), _ = (v = this).serverUrl ? oi.getDDMUrl(v.serverUrl, v.bGlobal, [Ar, i.method].join("")) : oi.getModuleUrl(c), M.prev = 4, M.next = 7, l.Lib.fetch(_, { method: "post", dataType: "json", body: l.Lib.stringify(i), fetchRaw: u != null && u, timeout: d });
            case 7:
              T = M.sent, M.next = 13;
              break;
            case 10:
              throw M.prev = 10, M.t0 = M.catch(4), M.t0;
            case 13:
              return M.abrupt("return", T);
            case 14:
            case "end":
              return M.stop();
          }
      }, t, this, [[4, 10]]);
    })), function(t, i, a) {
      return r.apply(this, arguments);
    }) }, { key: "_resetLicense", value: (e = Ln(he.mark(function t(i, a, u) {
      return he.wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
            case "end":
              return c.stop();
          }
      }, t);
    })), function(t, i, a) {
      return e.apply(this, arguments);
    }) }]), o;
  }();
  ar(Mc, "logLevel", -1);
  var Pc, ou, Ac = 0;
  function Sg() {
    return Ac = 0, n.asyncQueue.pushToDo(null, l.Lib.product._setAndroidConnected), new n.Promise(function(o, e) {
      Pc = o, ou = e, l.Lib.product._doCheckAndroidConnected();
    });
  }
  l.Lib.product._setAndroidConnected = function() {
    l.Lib.product.bAndroidConnected = !0;
  }, l.Lib.product._doCheckAndroidConnected = function() {
    if (Ac++, l.DWT.bConnectCanceled && ou) {
      n.asyncQueue.stop();
      var o = {};
      return n.Errors.UserCanceled(o), void ou({ code: o._errorCode, message: o._errorString });
    }
    if (Ac > 1e4 && ou) {
      var e = {};
      return n.Errors.DynamsoftServiceStopped(e), void ou({ code: e._errorCode, message: e._errorString });
    }
    l.Lib.product.bAndroidConnected && Pc ? Pc() : setTimeout(l.Lib.product._doCheckAndroidConnected, 1e3);
  };
  var Ou = /* @__PURE__ */ new WeakSet(), Tg = function(o) {
    Hr(r, o);
    var e = xd(r);
    function r() {
      var t;
      Gn(this, r);
      for (var i = arguments.length, a = new Array(i), u = 0; u < i; u++)
        a[u] = arguments[u];
      return xc(ln(t = e.call.apply(e, [this].concat(a))), Ou), t;
    }
    return zn(r, [{ key: "getLicenseInfoSync", value: function(t, i) {
      Ld();
      var a = i ?? "", u = { id: this.clientId, cmdId: n.guid(), method: "GetLicenseInfo", parameter: [t, Wa.logLevel, a], version: Qr }, c = Ms(this, Ou, Rc).call(this, u, 3e3);
      return this.parseResultDefault(c);
    } }, { key: "getCapabilities", value: function(t) {
      this.checkSource(t), (t.deviceType & Xt) == Xt || t.deviceType;
      var i = iu(t.deviceType), a = { id: this.clientId, cmdId: n.guid(), method: "SendRequestToScanner", parameter: ["getCapabilities", JSON.stringify({ UUID: t.serviceInfo.attrs.UUID, service_type: i, ty: t.name })], version: Qr }, u = Ms(this, Ou, Rc).call(this, a, 0);
      return this.parseResultDefault(u);
    } }, { key: "selectSource", value: function(t) {
      var i = this.getCapabilities(t);
      return !(!i && i != "");
    } }, { key: "dispose", value: function() {
      var t = { id: this.clientId, cmdId: n.guid(), method: "dispose", version: Qr };
      Ms(this, Ou, Rc).call(this, t, 500);
    } }, { key: "disposeAsync", value: function() {
      var t = { id: this.clientId, cmdId: n.guid(), method: "dispose", version: Qr };
      this._requestAsync(t, 500);
    } }]), r;
  }(Mc);
  function Rc(o, e, r) {
    var t, i, a = [qi(), "/", o.method].join("");
    e && (t = e), i = this.serverUrl ? oi.getDDMUrl(this.serverUrl, this.bGlobal, [Ar, o.method].join("")) : oi.getModuleUrl(a);
    var u = "", c = { method: "POST", url: i, data: l.Lib.stringify(o), async: !1, timeout: t, headers: { "X-Requested-With": !1 }, onSuccess: function(d, _, v) {
      try {
        u = n.isString(d) && v.getResponseHeader("content-type") === "text/json" ? n.parse(d) : d;
      } catch {
      }
    }, onError: function() {
      var d = {};
      if (n.Errors.NetworkError(d), !n.page.bUnload)
        throw d;
    } };
    return l.navInfoSync.bFileSystem && (c.crossDomain = !1), n.ajax(c), u;
  }
  var Lc = /* @__PURE__ */ new WeakSet(), Pd = /* @__PURE__ */ new WeakSet(), Wa = function(o) {
    Hr(T, o);
    var e, r, t, i, a, u, c, d, _, v = xd(T);
    function T() {
      var M;
      Gn(this, T);
      for (var A = arguments.length, S = new Array(A), V = 0; V < A; V++)
        S[V] = arguments[V];
      return xc(ln(M = v.call.apply(v, [this].concat(S))), Pd), xc(ln(M), Lc), ar(ln(M), "_bInited", !1), ar(ln(M), "_currentDevice", void 0), M;
    }
    return zn(T, [{ key: "getDynamsoftService", value: (_ = Ln(he.mark(function M(A, S) {
      var V, ne, z, ue, xe, Fe, Qe, Ze, Ct, it, Bt;
      return he.wrap(function(yt) {
        for (; ; )
          switch (yt.prev = yt.next) {
            case 0:
              return A = (V = A) !== null && V !== void 0 && V, S = (ne = S) !== null && ne !== void 0 ? ne : 30, z = { id: this.clientId, cmdId: n.guid(), method: "SearchScanner", parameter: [1, "_privet._tcp.local.", !1, !0, A, S], version: Qr }, yt.prev = 5, yt.next = 8, this._requestAsync(z, 3e4, !1);
            case 8:
              ue = yt.sent, this._bInited = !0, yt.next = 19;
              break;
            case 12:
              if (yt.prev = 12, yt.t0 = yt.catch(5), !this.bLocal) {
                yt.next = 18;
                break;
              }
              throw xe = {}, n.Errors.DynamsoftServiceStopped(xe), { code: xe._errorCode, message: xe._errorString };
            case 18:
              throw n.Errors.ThrowFailedConnectToProxyServer();
            case 19:
              Fe = [], Qe = this.parseResultDefault(ue), Ze = Dd(Qe), yt.prev = 22, Ze.s();
            case 24:
              if ((Ct = Ze.n()).done) {
                yt.next = 40;
                break;
              }
              if (!((it = Ct.value).service_type && it.service_type == _r || it.type && it.type != "dynamsoft_private_cloud_scan" && it.type != "twaindirect")) {
                yt.next = 30;
                break;
              }
              return yt.abrupt("continue", 38);
            case 30:
              if (!it.service_type) {
                yt.next = 38;
                break;
              }
              yt.t1 = it.service_type, yt.next = yt.t1 === vr ? 34 : 38;
              break;
            case 34:
              return it.bGlobalFind = !0, Bt = Md(this.serverUrl, it), Fe.push(Bt), yt.abrupt("break", 38);
            case 38:
              yt.next = 24;
              break;
            case 40:
              yt.next = 45;
              break;
            case 42:
              yt.prev = 42, yt.t2 = yt.catch(22), Ze.e(yt.t2);
            case 45:
              return yt.prev = 45, Ze.f(), yt.finish(45);
            case 48:
              return yt.abrupt("return", Fe);
            case 49:
            case "end":
              return yt.stop();
          }
      }, M, this, [[5, 12], [22, 42, 45, 48]]);
    })), function(M, A) {
      return _.apply(this, arguments);
    }) }, { key: "getSources", value: (d = Ln(he.mark(function M(A, S, V) {
      var ne, z, ue, xe, Fe, Qe, Ze, Ct, it, Bt, yt, en, Ft, st;
      return he.wrap(function(nt) {
        for (; ; )
          switch (nt.prev = nt.next) {
            case 0:
              if (ue = "", xe = !1, Fe = [], Qe = !1, ((Ze = A ?? xr) & Xt) == Xt && (ue = "_uscan._tcp.local."), (Ze & dn) == dn && (xe = !0), ue.length != 0 || xe) {
                nt.next = 9;
                break;
              }
              return nt.abrupt("return", []);
            case 9:
              return S = (ne = S) !== null && ne !== void 0 && ne, V = (z = V) !== null && z !== void 0 ? z : 30, Ct = { id: this.clientId, cmdId: n.guid(), method: "SearchScanner", parameter: [1, ue, xe, Qe, S, V], version: Qr }, nt.next = 14, this._requestAsync(Ct, 3e4, !1);
            case 14:
              if (it = nt.sent, this._bInited = !0, Bt = this.parseResultDefault(it), n.isArray(Bt)) {
                nt.next = 19;
                break;
              }
              throw n.Errors.ThrowDevicesNotArray();
            case 19:
              yt = Dd(Bt), nt.prev = 20, yt.s();
            case 22:
              if ((en = yt.n()).done) {
                nt.next = 47;
                break;
              }
              if (!((Ft = en.value).service_type && Ft.service_type == _r || Ft.type && Ft.type != "dynamsoft_private_cloud_scan" && Ft.type != "twaindirect")) {
                nt.next = 28;
                break;
              }
              return nt.abrupt("continue", 45);
            case 28:
              if (!Ft.service_type) {
                nt.next = 45;
                break;
              }
              nt.t0 = Ft.service_type, nt.next = nt.t0 === vr ? 32 : nt.t0 === Fr || nt.t0 === Or ? 33 : 45;
              break;
            case 32:
              return nt.abrupt("break", 45);
            case 33:
              return (st = new oa()).name = "", st.displayName = "", st.deviceType = 0, Ft.service_type == Fr ? st.deviceType = Xt : Ft.service_type == Or && (st.deviceType = dn), st.name = Ft.ty, Ft.hostname && Ft.hostname.length > Ft.ty.length && (st.name = Ft.hostname), st.displayName = (Ft.service_type == Fr ? "eSCL-" : "") + st.name, this.bGlobal || (Ft.url = this.serverUrl, this.serverName && (st.displayName = st.displayName + " on [" + this.serverName + "]")), st.serviceInfo = Md(this.serverUrl, Ft), Fe.push(st), nt.abrupt("break", 45);
            case 45:
              nt.next = 22;
              break;
            case 47:
              nt.next = 52;
              break;
            case 49:
              nt.prev = 49, nt.t1 = nt.catch(20), yt.e(nt.t1);
            case 52:
              return nt.prev = 52, yt.f(), nt.finish(52);
            case 55:
              return nt.abrupt("return", Fe);
            case 56:
            case "end":
              return nt.stop();
          }
      }, M, this, [[20, 49, 52, 55]]);
    })), function(M, A, S) {
      return d.apply(this, arguments);
    }) }, { key: "getCapabilitiesAsync", value: (c = Ln(he.mark(function M(A) {
      var S, V, ne;
      return he.wrap(function(z) {
        for (; ; )
          switch (z.prev = z.next) {
            case 0:
              return this.checkSource(A), (A.deviceType & Xt) != Xt && (A.deviceType & dn) != dn || (this._currentDevice = A), S = iu(A.deviceType), V = { id: this.clientId, cmdId: n.guid(), method: "SendRequestToScanner", parameter: ["getCapabilities", JSON.stringify({ UUID: A.serviceInfo.attrs.UUID, service_type: S, ty: A.name })], version: Qr }, z.next = 6, this._requestAsync(V, 0);
            case 6:
              return ne = z.sent, z.abrupt("return", this.parseResultDefault(ne));
            case 8:
            case "end":
              return z.stop();
          }
      }, M, this);
    })), function(M) {
      return c.apply(this, arguments);
    }) }, { key: "selectSourceAsync", value: (u = Ln(he.mark(function M(A) {
      var S;
      return he.wrap(function(V) {
        for (; ; )
          switch (V.prev = V.next) {
            case 0:
              return V.next = 2, this.getCapabilitiesAsync(A);
            case 2:
              if (!(S = V.sent) && S != "") {
                V.next = 5;
                break;
              }
              return V.abrupt("return", !0);
            case 5:
            case "end":
              return V.stop();
          }
      }, M, this);
    })), function(M) {
      return u.apply(this, arguments);
    }) }, { key: "versionInfo", value: (a = Ln(he.mark(function M() {
      var A, S;
      return he.wrap(function(V) {
        for (; ; )
          switch (V.prev = V.next) {
            case 0:
              return A = { id: this.clientId, cmdId: n.guid(), method: "VersionInfo", parameter: [], version: Qr }, V.next = 3, this._requestAsync(A, 5e3);
            case 3:
              return S = V.sent, this._bInited = !0, V.abrupt("return", S);
            case 6:
            case "end":
              return V.stop();
          }
      }, M, this);
    })), function() {
      return a.apply(this, arguments);
    }) }, { key: "getLicenseInfo", value: function(M, A, S) {
      return this._resetLicense(M, A, S);
    } }, { key: "getImageAsArrayBuffer", value: (i = Ln(he.mark(function M(A, S) {
      return he.wrap(function(V) {
        for (; ; )
          switch (V.prev = V.next) {
            case 0:
              return V.abrupt("return", Ms(this, Lc, Ad).call(this, A, S));
            case 1:
            case "end":
              return V.stop();
          }
      }, M, this);
    })), function(M, A) {
      return i.apply(this, arguments);
    }) }, { key: "getImageToDWT", value: (t = Ln(he.mark(function M(A, S, V) {
      return he.wrap(function(ne) {
        for (; ; )
          switch (ne.prev = ne.next) {
            case 0:
              return ne.abrupt("return", Ms(this, Lc, Ad).call(this, A, S, V));
            case 1:
            case "end":
              return ne.stop();
          }
      }, M, this);
    })), function(M, A, S) {
      return t.apply(this, arguments);
    }) }, { key: "acquireImage", value: (r = Ln(he.mark(function M(A, S, V) {
      var ne, z, ue, xe, Fe, Qe, Ze, Ct;
      return he.wrap(function(it) {
        for (; ; )
          switch (it.prev = it.next) {
            case 0:
              A = (ne = A) !== null && ne !== void 0 ? ne : this._currentDevice, this.checkSource(A), this._currentDevice = A, z = iu(A.deviceType), ue = ["scan", JSON.stringify({ UUID: A.serviceInfo.attrs.UUID, service_type: z })], xe = Ms(this, Pd, Cg).call(this, S), ue[2] = JSON.stringify(xe), Fe = { id: this.clientId, cmdId: n.guid(), method: "SendRequestToScanner", parameter: ue, version: Qr }, Qe = 0;
            case 10:
              if (!(Qe < 5)) {
                it.next = 33;
                break;
              }
              return it.prev = 11, it.next = 14, this._requestAsync(Fe, 0);
            case 14:
              return Ct = it.sent, Ze = this.parseResultDefault(Ct), n.isObject(Ze) && (Ze.device = A, Ze.scanOptions = xe), it.abrupt("break", 33);
            case 20:
              if (it.prev = 20, it.t0 = it.catch(11), it.t0.code != -1004 && it.t0.code != -1001) {
                it.next = 29;
                break;
              }
              if (!(Qe >= 4)) {
                it.next = 25;
                break;
              }
              throw it.t0;
            case 25:
              return it.next = 27, new Promise(function(Bt, yt) {
                setTimeout(Bt, 2e3);
              });
            case 27:
              it.next = 30;
              break;
            case 29:
              throw it.t0;
            case 30:
              Qe++, it.next = 10;
              break;
            case 33:
              return it.abrupt("return", Ze);
            case 34:
            case "end":
              return it.stop();
          }
      }, M, this, [[11, 20]]);
    })), function(M, A, S) {
      return r.apply(this, arguments);
    }) }, { key: "dispose", value: function() {
      var M = { id: this.clientId, cmdId: n.guid(), method: "dispose", version: Qr };
      this._requestAsync(M, 500);
    } }, { key: "_resetLicense", value: (e = Ln(he.mark(function M(A, S, V) {
      var ne, z, ue, xe;
      return he.wrap(function(Fe) {
        for (; ; )
          switch (Fe.prev = Fe.next) {
            case 0:
              return this.longKeyOrShortkey = A, this.cu = S, Ld(), ne = S ?? "", z = { id: this.clientId, cmdId: n.guid(), method: "GetLicenseInfo", parameter: [A, T.logLevel, ne, V], version: Qr }, Fe.prev = 5, Fe.next = 8, this._requestAsync(z, 1e4);
            case 8:
              return ue = Fe.sent, this._bInited = !0, Fe.abrupt("return", this.parseResultDefault(ue));
            case 13:
              if (Fe.prev = 13, Fe.t0 = Fe.catch(5), !this.bLocal) {
                Fe.next = 19;
                break;
              }
              throw xe = {}, n.Errors.DynamsoftServiceStopped(xe), { code: xe._errorCode, message: xe._errorString };
            case 19:
              throw n.Errors.ThrowFailedConnectToProxyServer();
            case 20:
            case "end":
              return Fe.stop();
          }
      }, M, this, [[5, 13]]);
    })), function(M, A, S) {
      return e.apply(this, arguments);
    }) }]), T;
  }(Mc);
  function Ad(o, e, r) {
    return Rd.apply(this, arguments);
  }
  function Rd() {
    return (Rd = Ln(he.mark(function o(e, r, t) {
      var i, a, u, c, d, _;
      return he.wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if (e != null && e.device) {
                v.next = 2;
                break;
              }
              throw { code: -1011, message: "Operation out of expected sequence" };
            case 2:
              return t = (i = t) !== null && i !== void 0 ? i : { ver: "", clientId: "" }, (a = ["getImage", JSON.stringify({ UUID: e.device.serviceInfo.attrs.UUID, service_type: r })])[2] = JSON.stringify(e.scanOptions), a[3] = e.scanJobs, a[4] = e.scanId, a[5] = t._clientId, a[6] = t._ver, u = { id: this.clientId, cmdId: n.guid(), method: "SendRequestToScanner", parameter: a, version: Qr }, v.next = 12, this._requestAsync(u, 0, !0);
            case 12:
              if (c = v.sent, !(c.headers.get("content-type").indexOf("image/") >= 0)) {
                v.next = 20;
                break;
              }
              return v.next = 17, c.arrayBuffer();
            case 17:
              return v.abrupt("return", v.sent);
            case 20:
              return v.next = 22, c.json();
            case 22:
              if (d = v.sent, typeof (_ = this.parseResultDefault(d)) != "boolean") {
                v.next = 28;
                break;
              }
              return v.abrupt("return", null);
            case 28:
              return v.abrupt("return", _);
            case 29:
            case "end":
              return v.stop();
          }
      }, o, this);
    }))).apply(this, arguments);
  }
  function Cg(o) {
    var e = [];
    if (o) {
      n.isNumber(o.PixelType) && (e.push({ capability: l.DWT.EnumDWT_Cap.ICAP_PIXELTYPE, curValue: o.PixelType }), l.DWT.EnumDWT_PixelType.TWPT_BW == o.PixelType && (e.push({ capability: 32771, curValue: "application/octet-stream" }), e.push({ capability: 32772, curValue: "application/octet-stream" })));
      var r = o.Resolution;
      r || (r = 300), e.push({ capability: l.DWT.EnumDWT_Cap.ICAP_XRESOLUTION, curValue: r }), e.push({ capability: l.DWT.EnumDWT_Cap.ICAP_YRESOLUTION, curValue: r }), o.Brightness !== void 0 && e.push({ capability: l.DWT.EnumDWT_Cap.ICAP_BRIGHTNESS, curValue: o.Brightness }), o.XferCount !== void 0 && e.push({ capability: l.DWT.EnumDWT_Cap.CAP_XFERCOUNT, curValue: o.XferCount }), o.Contrast !== void 0 && e.push({ capability: l.DWT.EnumDWT_Cap.ICAP_CONTRAST, curValue: o.Contrast }), o.TransferMode !== void 0 && e.push({ capability: l.DWT.EnumDWT_Cap.ICAP_XFERMECH, curValue: o.TransferMode }), o.IfFeederEnabled !== void 0 && e.push({ capability: l.DWT.EnumDWT_Cap.CAP_FEEDERENABLED, curValue: o.IfFeederEnabled ? 1 : 0 }), o.IfDuplexEnabled !== void 0 && e.push({ capability: l.DWT.EnumDWT_Cap.CAP_DUPLEXENABLED, curValue: o.IfDuplexEnabled ? 1 : 0 });
    }
    return e;
  }
  function Ld() {
    var o = Wa.logLevel;
    n.isNumber(o) || (Wa.logLevel = -1);
  }
  var Fc = l.navInfoSync;
  n.removeNonPrintableChar;
  var Fd = function(o, e, r) {
    r == 2 && n.each(e, function(t, i) {
      Tn(o, t, { get: function() {
        return o._resetErr(), o._isValid() ? Gt : vt;
      }, set: function(a) {
        return o._resetErr(), o._isValid() ? Gt : vt;
      } });
    });
  }, Od = function(o, e) {
    n.each(e, function(r, t) {
      ls(o, r, 1, 2);
    });
  }, Wd = function(o, e) {
    n.each(e, function(r, t) {
      ls(o, r, 1, 1);
    });
  }, Bd = function(o, e) {
    n.each(e, function(r, t) {
      ls(o, r, 0);
    });
  }, Nd = function(o, e) {
    n.each(e, function(r, t) {
      ls(o, r, 1);
    });
  };
  function gn(o, e) {
    var r, t = this, i = 0;
    r = n.isString(o) ? document.getElementById(o) : o, t.isLoaded = !1, t.displayType = 0, t.progress = 0, t.progressPosition = 0, t.borderWidth = { left: 0, right: 0, top: 0, bottom: 0 }, t.orientation = e.orientation || gn.Orientation.Horizontal, t.direction = e.direction || gn.Direction.LeftToRight, t.creationType = e.creationType || gn.CreationType.Replace, t.value = 0, t.initialValue = e.value || 0, t.minValue = e.minValue || 0, t.maxValue = e.maxValue || 100, t.showLabel = typeof e.showLabel > "u" || e.showLabel, t.labelText = e.labelText || "", t.width = e.width || 280, t.height = e.height || 20, t.borderRadius = e.borderRadius || 10, t.orientation == gn.Orientation.Horizontal && t.borderRadius > t.height / 2 && (t.borderRadius = Math.round(t.height / 2)), t.orientation == gn.Orientation.Vertical && t.borderRadius > t.width / 2 && (t.borderRadius = Math.round(t.width / 2)), t.backColor = e.backColor || "", t.color = e.color || "#50a8e1", t.animationStyle = 0, t.animationInterval = e.animationInterval || 100;
    var a = ["parent", "background", "wrapper", "left", "middle", "right", "horizontalText", "verticalText", "marker"];
    for (t.extraClassName = {}, i = 0; i < a.length; i++)
      e.extraClassName ? typeof e.extraClassName == "string" ? t.extraClassName[a[i]] = e.extraClassName : t.extraClassName[a[i]] = e.extraClassName[a[i]] || "" : t.extraClassName[a[i]] = "";
    t.onLoad = e.onLoad || null, t.onValueChanged = e.onValueChanged || null, t.onAnimate = e.onAnimate || null, t.creationType == gn.CreationType.Replace ? t.parentElement = r : (t.parentElement = document.createElement("DIV"), r.appendChild(t.parentElement)), t.finishLoading();
  }
  n.DynamicLoadAddonFuns = [], n.attachAddon = function(o) {
    n.each(n.DynamicLoadAddonFuns, function(e) {
      n.isFunction(e) && e(o);
    });
  }, n.attachProperty = function(o) {
    var e = o;
    if (!e._bRemoteMode) {
      Tn(e, "ProductKey", { get: function() {
        return l.DWT.ProductKey;
      }, set: function(c) {
        return n.isString(c) ? (e._resetErr(), !!e._isValid() && e._setProductKey(c, !1)) : (n.Errors.InvalidValue(e), vt);
      } }), Tn(e, "ProductName", { get: function() {
        return e.__strProductName;
      }, set: function(c) {
        return e._resetErr(), n.isString(c) ? (e.__strProductName = c, Gt) : (n.Errors.InvalidValue(e), vt);
      } }), Tn(e, "VersionInfo", { get: function() {
        return e.__versionInfo;
      } }), e._isMobileMode() ? Xa(e, "DefaultSourceName", 0) : Tn(e, "DefaultSourceName", { get: function() {
        var c = e._getDefaultDevice();
        return c ? c.displayName : "";
      } }), e._isMobileMode() ? Xa(e, ["ImageCaptureDriverType", "IfShowCancelDialogWhenImageTransfer"]) : (Tn(e, "IfShowCancelDialogWhenImageTransfer", { get: function() {
        return e._resetErr(), !!e._isValid() && e.__IfShowCancelDialogWhenImageTransfer;
      }, set: function(c) {
        return n.isBoolean(c) ? (e._resetErr(), !!e._isValid() && (e.__IfShowCancelDialogWhenImageTransfer = c)) : (n.Errors.InvalidValue(e), vt);
      } }), Tn(e, "ImageCaptureDriverType", { get: function() {
        return e._resetErr(), e._isValid() ? e._driverType : 0;
      }, set: function(c) {
        var d = !1, _ = !1, v = !1;
        if (e._bRemoteMode ? e.__serverPlatform == Le ? v = !0 : e.__serverPlatform == Te ? _ = !0 : e.__serverPlatform == Oe && (d = !0) : (d = Fc.bMac, _ = Fc.bLinux, v = Fc.bWin), e._resetErr(), !e._isValid())
          return !1;
        if (c !== "") {
          var T = 1 * c, M = !1;
          if (T < Ge || T > bn)
            return n.Errors.ImageCaptureDriverTypeError(e), vt;
          if (v) {
            if (T === Lt)
              e._b64bit && (e._driverType = T);
            else if (T != Ge && T != bn)
              return n.Errors.ImageCaptureDriverTypeError(e), vt;
            e._b64bit || (T = Ge), e._driverType = T, M = !0;
          } else if (_)
            T = ot, e._driverType = T, M = !0;
          else if (d) {
            if (T !== Kt) {
              if (T != lt && T != Ge && T != bn)
                return n.Errors.ImageCaptureDriverTypeError(e), vt;
            }
            e._driverType = T, M = !0;
          }
          return M && (e._curDevice = null, e.__devices = null), !0;
        }
        return n.Errors.ImageCaptureDriverTypeError(e), vt;
      } })), Tn(e, "HTTPPostResponseString", { get: function() {
        return e._resetErr(), e._isValid() && e.__HTTPPostResponseString ? e.__HTTPPostResponseString : "";
      } }), Tn(e, "IfAppendImage", { get: function() {
        return e._resetErr(), !!e._isValid() && e.__IfAppendImage;
      }, set: function(c) {
        return e._resetErr(), !!e._isValid() && (n.isBoolean(c) ? e.__IfAppendImage = c : (n.Errors.InvalidValue(e), vt));
      } }), e._isMobileMode() ? Xa(e, ["FTPPort", "IfAppendImage"]) : Tn(e, "FTPPort", { get: function() {
        return e._resetErr(), e._isValid() ? e._innerFun("FTPPort") : 0;
      }, set: function(c) {
        if (e._resetErr(), !e._isValid())
          return !1;
        if (c !== "") {
          var d = 1 * c;
          return e._innerFun("FTPPort", zt(d));
        }
      } }), e._isMobileMode() ? Tn(e, "JPEGQuality", { get: function() {
        return e._resetErr(), !!e._isValid() && e._jpgQuality;
      }, set: function(c) {
        var d = 1 * c;
        return d >= 100 ? d = 100 : d < 0 && (d = 0), e._resetErr(), !!e._isValid() && (e._jpgQuality = d, !0);
      } }) : Tn(e, "JPEGQuality", { get: function() {
        return e._resetErr(), e._isValid() ? e._innerFun("JPEGQuality") : 0;
      }, set: function(c) {
        var d = 1 * c;
        return d >= 100 ? d = 100 : d < 0 && (d = 0), e._resetErr(), !!e._isValid() && e._innerFun("JPEGQuality", zt(d));
      } }), e._isMobileMode() ? Tn(e, "TIFFCompressionType", { get: function() {
        return e._resetErr(), e._isValid() ? e._tiffCompressionType : 0;
      }, set: function(c) {
        return e._resetErr(), !!e._isValid() && (e._tiffCompressionType = c, !0);
      } }) : ls(e, "TIFFCompressionType", 1, 1), e._isMobileMode() ? Tn(e, "BufferMemoryLimit", { get: function() {
        return e._resetErr(), e._isValid(), 0;
      }, set: function(c) {
        return e._resetErr(), e._isValid(), !1;
      } }) : ls(e, "BufferMemoryLimit", 1, 1), Tn(e, "LogLevel", { get: function() {
        return e._resetErr(), e._isValid() ? e._logLevel : 0;
      }, set: function(c) {
        if (e._resetErr(), !e._isValid())
          return !1;
        var d = 1 * c;
        return d >= 14 ? d = 14 : d < 0 && (d = 0), e._logLevel = d, Wa.logLevel = e._logLevel, e._isMobileMode() ? (l.WasmEnv && l.WasmEnv.setLoglevel(e._logLevel), !0) : e._innerFun("LogLevel", zt(d));
      } }), Tn(e, "HttpContentTypeFieldValue", { get: function() {
        return e._resetErr(), e._isValid() ? e.__strHttpContentTypeFieldValue : "";
      }, set: function(c) {
        return e._resetErr(), !!e._isValid() && (e.__strHttpContentTypeFieldValue = c, c);
      } }), Tn(e, "BrokerProcessType", { get: function() {
        return e._resetErr(), e._isValid() ? 1 : 0;
      }, set: function(c) {
        return e._resetErr(), !!e._isValid();
      } }), Tn(e, "BorderStyle", { get: function() {
        return e._resetErr(), !!e._isValid() && 0;
      }, set: function(c) {
        return e._resetErr(), e._isValid(), !1;
      } }), Tn(e, "HTTPRequestswithCredentials", { get: function() {
        return e._resetErr(), !!e._isValid() && e.__withCredentials;
      }, set: function(c) {
        return e._resetErr(), !!e._isValid() && (e.__withCredentials = c);
      } }), Tn(e, "ScaleDownThreshold", { get: function() {
        return e._resetErr(), e._isValid() ? e._scaleDownThreshold : 0;
      }, set: function(c) {
        var d = 1 * c;
        return !n.isNumber(d) || isNaN(d) ? (n.Errors.InvalidValue(self), vt) : (e._resetErr(), !!e._isValid() && (e._scaleDownThreshold = c));
      } }), Tn(e, "CurrentImageIndexInBuffer", { get: function() {
        return e._isValid() ? e._ImgManager.getCurrentImageIndex() : 0;
      }, set: function(c) {
        var d = 1 * c;
        return e._resetErr(), !!e._isValid() && (d >= 0 && d < e._ImgManager.count() && (e._ImgManager.Go(d), e._isBindViewer() && ua.__innerRefreshFromUIView(e, e._ImgManager.getCurrentImageIndex())), !0);
      } }), Tn(e, "SelectedImagesIndices", { get: function() {
        return e._resetErr(), e._isValid() ? e._ImgManager.count() <= 0 ? [] : e._ImgManager.getSelectedClientIndexArray() : [];
      } }), Tn(e, "MaxImagesInBuffer", { get: function() {
        return e._resetErr(), e._isValid() ? e.__maxImagesInBuffer : 0;
      }, set: function(c) {
        var d = 1 * c;
        return e._resetErr(), !!e._isValid() && (d > 0 && d < 32768 ? e.__maxImagesInBuffer = d : n.Errors.OutOfRange(e), e.__maxImagesInBuffer);
      } }), Tn(e, "IfSSL", { get: function() {
        return e._bSSL;
      }, set: function(c) {
        return e._bSSL = c, e._isMobileMode() || e._innerFun("IfSSL", zt(c)), !0;
      } }), e._isMobileMode() ? Tn(e, "IfAllowLocalCache", { get: function() {
        return !1;
      }, set: function(c) {
        return !1;
      } }) : ls(e, "IfAllowLocalCache", 1, 2), Tn(e, "UseLocalService", { get: function() {
        return e._isTwainServiceType() || e._isDMServiceType();
      } }), Tn(e, "PDFCompressionType", { get: function() {
        return e._resetErr(), !!e._isValid() && (e._isMobileMode() ? e._mobileNotSupport("PDFCompressionType") : e._innerFun("PDFCompressionType"));
      }, set: function(c) {
        var d = 1 * c;
        return d == l.DWT.EnumDWT_PDFCompressionType.PDF_FAX3 && (d = l.DWT.EnumDWT_PDFCompressionType.PDF_FAX4), e._resetErr(), !!e._isValid() && (e._isMobileMode() ? e._mobileNotSupport("PDFCompressionType") : e._innerFun("PDFCompressionType", zt(d)));
      } }), e._setProductKey = function(c, d, _, v) {
        var T = !0, M = c, A = function(V) {
          V || (e.__licenseInfo = void 0);
          var ne = !0;
          return v || (ne = n.License.checkProductKey(e, { Core: !0 })), n.isFunction(_) && _(), ne;
        };
        if (e._resetErr(), !e._isValid())
          return !1;
        if (M = n.isString(M) ? n.trim(M) : "", l.DWT.ProductKey = M, M == "")
          T = !1, A();
        else {
          l.Lib.License.reparseProductKey();
          var S = l.DWT.licenseException;
          if (S.code != 0)
            return e.__licenseInfo = void 0, e._errorCode = S.code, e._errorString = S.message, n.isFunction(_) && _(), !1;
          if (e._isMobileMode())
            return n.showProgressMsg(-1, "", l.MSG.Init_GetLicenseInfoForDWT), e.__licenseInfo = void 0, e.GetLicenseInfo(function(V) {
              l.WasmEnv && l.WasmEnv.setLoglevel(e._logLevel), e._setConvertMode(e._pdfConvertMode), e._resetErr(), A(!0);
            }, A), !0;
          e._innerFunRaw("ProductKey", zt(M), d, !1, !1, function(V) {
            var ne = !1;
            ne = n.isArray(V) ? V[0] : V, n.isArray(V) && V.length >= 3 && V[1] === "1" && n.isFunction(l.DWT.ShowMessage) && l.DWT.ShowMessage(V[2], { width: 510, height: 272, headerStyle: 1, seconds: 10 }), d || (T = ne), n.showProgressMsg(-1, "", l.MSG.Init_GetLicenseInfoForDWT), e.__licenseInfo = void 0, e.GetLicenseInfo(function() {
              e._setConvertMode(e._pdfConvertMode), A(!0);
            }, A);
          }, function() {
            d || (T = !1), A();
          });
        }
        return T;
      }, Nd(e, ["ProxyServer"]);
      var r = ["CapValueString", "CapDescription", "FTPPassword", "FTPUserName", "Manufacturer", "ProductFamily", "PDFAuthor", "PDFCreationDate", "PDFCreator", "PDFKeywords", "PDFModifiedDate", "PDFProducer", "PDFSubject", "PDFTitle", "PDFVersion"];
      e._isMobileMode() ? Xa(e, r) : Nd(e, r), Bd(e, ["ImageBitsPerPixel", "ImageLength", "ImageWidth", "ImageXResolution", "ImageYResolution"]);
      var t = ["BlankImageCurrentStdDev", "CapDefaultIndex", "CapDefaultValue", "DataSourceStatus", "Duplex", "PendingXfers", "ImageLayoutDocumentNumber", "ImageLayoutFrameBottom", "ImageLayoutFrameLeft", "ImageLayoutFrameNumber", "ImageLayoutFrameRight", "ImageLayoutFrameTop", "ImageLayoutPageNumber", "ImagePixelType", "MagData", "MagType", "IfFeederLoaded", "IfPaperDetectable", "IfUIControllable"];
      e._isMobileMode() ? Xa(e, t, 0) : Bd(e, t), Od(e, ["AllowPluginAuthentication", "IfModalUI", "IfScanInNewThread", "_AutoCropMethod"]);
      var i = ["IfDisableSourceAfterAcquire", "IfDuplexEnabled", "IfFeederEnabled", "IfPASVMode", "IfAutoBright", "IfAutoDiscardBlankpages", "IfAutoFeed", "IfAutomaticBorderDetection", "IfAutomaticDeskew", "IfAutoScan", "IfShowIndicator", "IfUseTwainDSM", "IfTiffMultiPage"];
      e._isMobileMode() ? Xa(e, i) : Od(e, i), Wd(e, ["MaxInternetTransferThreads"]);
      var a = ["BlankImageMaxStdDev", "BlankImageThreshold", "BitDepth", "Brightness", "PageSize", "PixelType", "Resolution", "Capability", "CapCurrentIndex", "CapCurrentValue", "CapMaxValue", "CapMinValue", "CapNumItems", "CapStepSize", "CapType", "CapValue", "CapValueType", "Contrast", "PixelFlavor", "TransferMode", "Unit", "XferCount"];
      e._isMobileMode() ? Xa(e, a) : Wd(e, a), Fd(e, ["AsyncMode", "EnableInteractiveZoom", "IfThrowException", "ImageEditorIfEnableEnumerator", "ImageEditorIfReadonly", "ImageEditorIfModal", "ImageEditorWindowTitle", "IfShowPrintUI", "VScrollBar"], 2);
      var u = ["IfOpenImageWithGDIPlus"];
      e._isMobileMode() ? Xa(e, u) : Fd(e, u);
    }
  }, n.attachPropertyUI || (n.attachPropertyUI = function() {
  }), gn.Orientation = { Horizontal: 0, Vertical: 1 }, gn.Direction = { LeftToRight: 0, RightToLeft: 1, TopToBottom: 0, BottomToTop: 1 }, gn.CreationType = { Replace: 0, AppendChild: 1 }, gn.AnimationStyle = { None: 0, Static: 1, StaticFull: 2, Custom: 3, CustomFull: 4, Flickering1: 10, Flickering2: 11, Flickering3: 12, LeftToRight1: 20, LeftToRight2: 21, RightToLeft1: 22, RightToLeft2: 23, TwoWay: 24 }, gn.prototype.finishLoading = function() {
    var o, e = this;
    e.wrapperElement = null, e.backgroundElement = null, e.valueElement = null, e.leftElement = null, e.middleElement = null, e.rightElement = null, e.backgroundElement = document.createElement("DIV"), e.backgroundElement.className = "progressbar_background" + (e.extraClassName.background ? " " : "") + e.extraClassName.background, e.backgroundElement.style.cssText = e.backgroundElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius), e.parentElement.appendChild(e.backgroundElement);
    var r = ["border-radius", "border-bottom-right-radius", "-moz-border-radius-bottomright", "-webkit-border-bottom-right-radius", "-khtml-border-radius-bottomright", "-khtml-border-bottom-right-radius"], t = 0, i = "";
    for (t = 0; t < r.length && !(i = gn._elementCurrentStyle(e.backgroundElement, r[t])) && typeof i != "string"; t++)
      ;
    i != "" && gn._parseInt(i) != e.borderRadius && (e.borderRadius = gn._parseInt(i)), e.orientation == gn.Orientation.Horizontal || e.orientation == gn.Orientation.Vertical ? e.displayType = 0 : e.displayType = 1, e.parentElement.className = (e.parentElement.className != "" ? " " : "") + "progressbar_parent dynamsoft-progressBar" + (e.extraClassName.parent ? " " : "") + e.extraClassName.parent, e.displayType == 0 ? ((o = e.wrapperElement = document.createElement("DIV")).style.border = "1px solid #A0A0A0", o.style.cssFloat = "left", o.style.display = "inline-block", o.style.width = e.width + "px", o.style.height = e.height + "px", o.style.left = "0px", o.style.top = -e.height + "px", o.style.backgroundColor = e.backColor, o.style.backgroundRepeat = "no-repeat", o.style.position = "relative", o.style.cssText = o.style.cssText + gn._createBorderRadiusCss(e.borderRadius), e.parentElement.appendChild(o), e.borderWidth = { left: gn._parseInt(gn._elementCurrentStyle(o, "border-left-width")), right: gn._parseInt(gn._elementCurrentStyle(o, "border-right-width")), top: gn._parseInt(gn._elementCurrentStyle(o, "border-top-width")), bottom: gn._parseInt(gn._elementCurrentStyle(o, "border-bottom-width")) }) : e.displayType == 1 && (e.orientation == gn.Orientation.Horizontal ? e.borderRadius > e.width / 2 && (e.borderRadius = e.width) : e.orientation == gn.Orientation.Vertical && e.borderRadius > e.height / 2 && (e.borderRadius = e.height), e.valueElement = document.createElement("DIV"), e.valueElement.className = "", e.leftElement = document.createElement("DIV"), e.middleElement = document.createElement("DIV"), e.rightElement = document.createElement("DIV"), e.leftElement.style.border = "1px solid #A0A0A0", e.leftElement.style.cssFloat = "left", e.leftElement.style.display = "inline-block", e.leftElement.style.backgroundColor = e.backColor, e.leftElement.style.backgroundRepeat = "no-repeat", e.leftElement.style.position = "relative", e.rightElement.style.border = "1px solid #A0A0A0", e.rightElement.style.cssFloat = "left", e.rightElement.style.display = "inline-block", e.rightElement.style.backgroundColor = e.backColor, e.rightElement.style.backgroundRepeat = "no-repeat", e.rightElement.style.position = "relative", e.middleElement.style.border = "1px solid #A0A0A0", e.middleElement.style.cssFloat = "left", e.middleElement.style.display = "inline-block", e.middleElement.style.overflow = "hidden", e.middleElement.style.position = "relative", e.valueElement.style.backgroundColor = e.backColor, e.valueElement.style.position = "relative", e.orientation == gn.Orientation.Horizontal ? (e.leftElement.style.width = e.borderRadius + "px", e.leftElement.style.height = e.height + "px", e.leftElement.style.top = -e.height + "px", e.leftElement.style.left = "0px", e.leftElement.style.borderRight = "none", e.leftElement.style.cssText = e.leftElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius, 0, 0, e.borderRadius), e.rightElement.style.width = e.borderRadius + "px", e.rightElement.style.height = e.height + "px", e.rightElement.style.top = -e.height + "px", e.rightElement.style.borderLeft = "none", e.rightElement.style.cssText = e.rightElement.style.cssText + gn._createBorderRadiusCss(0, e.borderRadius, e.borderRadius, 0), e.middleElement.style.width = e.width - 2 * e.borderRadius + "px", e.middleElement.style.height = e.height + "px", e.middleElement.style.top = -e.height + "px", e.middleElement.style.borderLeft = "none", e.middleElement.style.borderRight = "none", e.valueElement.style.width = "0px", e.valueElement.style.height = e.height + "px") : e.orientation == gn.Orientation.Vertical && (e.leftElement.style.width = e.width + "px", e.leftElement.style.height = e.borderRadius + "px", e.leftElement.style.top = -e.height + "px", e.leftElement.style.left = "0px", e.leftElement.style.borderBottom = "none", e.leftElement.style.cssText = e.leftElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius, e.borderRadius, 0, 0), e.rightElement.style.width = e.width + "px", e.rightElement.style.height = e.borderRadius + "px", e.rightElement.style.top = -e.height + "px", e.rightElement.style.left = "0px", e.rightElement.style.borderTop = "none", e.rightElement.style.cssText = e.rightElement.style.cssText + gn._createBorderRadiusCss(0, 0, e.borderRadius, e.borderRadius), e.middleElement.style.width = e.width + "px", e.middleElement.style.height = e.height - 2 * e.borderRadius + "px", e.middleElement.style.top = -e.height + "px", e.middleElement.style.left = "0px", e.middleElement.style.borderTop = "none", e.middleElement.style.borderBottom = "none", e.valueElement.style.width = e.width + "px", e.valueElement.style.height = "0px"), e.middleElement.appendChild(e.valueElement), e.parentElement.appendChild(e.leftElement), e.parentElement.appendChild(e.middleElement), e.parentElement.appendChild(e.rightElement), e.orientation == gn.Orientation.Horizontal ? e.borderWidth = { left: gn._parseInt(gn._elementCurrentStyle(e.leftElement, "border-left-width")), right: gn._parseInt(gn._elementCurrentStyle(e.rightElement, "border-right-width")), top: gn._parseInt(gn._elementCurrentStyle(e.middleElement, "border-top-width")), bottom: gn._parseInt(gn._elementCurrentStyle(e.middleElement, "border-bottom-width")) } : e.orientation == gn.Orientation.Vertical && (e.borderWidth = { left: gn._parseInt(gn._elementCurrentStyle(e.middleElement, "border-left-width")), right: gn._parseInt(gn._elementCurrentStyle(e.middleElement, "border-right-width")), top: gn._parseInt(gn._elementCurrentStyle(e.leftElement, "border-top-width")), bottom: gn._parseInt(gn._elementCurrentStyle(e.rightElement, "border-bottom-width")) })), e.parentElement.style.width = e.width + e.borderWidth.left + e.borderWidth.right + "px", e.parentElement.style.height = e.height + e.borderWidth.top + e.borderWidth.bottom + "px", e.backgroundElement.style.cssFloat = "left", e.backgroundElement.style.display = "inline-block", e.backgroundElement.style.width = e.width + e.borderWidth.left + e.borderWidth.right + "px", e.backgroundElement.style.height = e.height + "px", e.backgroundElement.style.backgroundColor = "#FFFFFF", e.backgroundElement.style.position = "relative", e.displayType == 0 && (e.backgroundElement.style.width = e.width + e.borderWidth.left + e.borderWidth.right + "px"), e.backgroundElement.style.top = e.borderWidth.top + "px", e.markerElement = document.createElement("DIV"), e.markerElement.style.display = "inline-block", e.markerElement.style.zoom = "1.0", e.markerElement.style.width = e.width + "px", e.markerElement.style.height = e.height + "px", e.markerElement.style.top = 2 * -e.height - e.borderWidth.top + "px", e.markerElement.style.left = e.borderWidth.left + "px", e.markerElement.style.backgroundColor = e.color, e.markerElement.style.lineHeight = e.height + "px", e.markerElement.style.position = "relative", e.parentElement.appendChild(e.markerElement), e.isLoaded = !0, e.setValue(e.initialValue), e.onLoad != null && e.onLoad();
  }, gn.prototype.setValue = function(o) {
    var e = this;
    if (o !== null && o < e.minValue && (o = e.minValue), o !== null && o > e.maxValue && (o = e.maxValue), o === null || (e.value = o), e.isLoaded) {
      var r, t = 0;
      if (e.orientation == gn.Orientation.Horizontal) {
        t = e.value / e.maxValue * e.width, e.progressPosition = t, e.displayType == 0 ? (e.direction, gn.Direction.LeftToRight) : e.displayType == 1 && (e.direction == gn.Direction.LeftToRight ? t <= e.borderRadius ? e.valueElement.style.width = "0px" : t >= e.width - e.borderRadius ? e.valueElement.style.width = e.middleElement.style.width : e.valueElement.style.width = t - e.borderRadius + "px" : t <= e.borderRadius ? e.valueElement.style.width = "0px" : t >= e.width - e.borderRadius ? (e.valueElement.style.left = "0px", e.valueElement.style.width = e.middleElement.style.width) : (e.valueElement.style.left = e.width - t - e.borderRadius + "px", e.valueElement.style.width = t - e.borderRadius + "px")), t > 0 ? (e.animationStyle != gn.AnimationStyle.StaticFull && e.animationStyle != gn.AnimationStyle.CustomFull ? e.markerElement.style.width = t + "px" : e.markerElement.style.width = e.width + "px", e.markerElement.style.visibility = "visible") : (e.markerElement.style.width = e.width + "px", e.animationStyle != gn.AnimationStyle.StaticFull && e.animationStyle != gn.AnimationStyle.CustomFull && (e.markerElement.style.visibility = "hidden")), e.animationStyle != gn.AnimationStyle.StaticFull && e.animationStyle != gn.AnimationStyle.CustomFull ? e.direction == gn.Direction.LeftToRight ? e.markerElement.style.left = e.borderWidth.left + "px" : e.markerElement.style.left = e.width - t + e.borderWidth.left + "px" : e.markerElement.style.left = e.borderWidth.left + "px", e.height, e.height, e.borderWidth.top;
        var i = 2 * -e.height - e.borderWidth.top;
        if (t == 0 || e.width == t)
          e.markerElement.style.top = i + "px", e.markerElement.style.height = e.height + "px", e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius);
        else if (t < e.borderRadius) {
          var a = e.height - 2.25 * (e.borderRadius - Math.sqrt(Math.pow(e.borderRadius, 2) - Math.pow(e.borderRadius - t, 2))), u = i + e.height / 2 - a / 2;
          e.markerElement.style.top = u + "px", e.markerElement.style.height = a + "px", e.direction == gn.Direction.LeftToRight ? e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius, 0, 0, e.borderRadius) : e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(0, e.borderRadius, e.borderRadius, 0);
        } else
          e.width - t < e.borderRadius ? (r = (2 * (e.borderRadius - (e.width - t)) + (e.borderRadius - Math.sqrt(Math.pow(e.borderRadius, 2) - Math.pow(e.borderRadius - (e.width - t), 2)))) / 3, e.direction == gn.Direction.LeftToRight ? e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius, r, r, e.borderRadius) : e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(r, e.borderRadius, e.borderRadius, r)) : (e.markerElement.style.top = i + "px", e.markerElement.style.height = e.height + "px", e.direction == gn.Direction.LeftToRight ? e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius, 0, 0, e.borderRadius) : e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(0, e.borderRadius, e.borderRadius, 0));
      } else if (e.orientation == gn.Orientation.Vertical) {
        t = e.value / e.maxValue * e.height, e.progressPosition = t, e.displayType == 0 ? (e.direction, gn.Direction.TopToBottom) : e.displayType == 1 && (e.direction == gn.Direction.TopToBottom ? t <= e.borderRadius ? e.valueElement.style.height = "0px" : t >= e.height - e.borderRadius ? e.valueElement.style.height = e.middleElement.style.height : e.valueElement.style.height = t - e.borderRadius + "px" : t <= e.borderRadius ? e.valueElement.style.height = "0px" : t >= e.height - e.borderRadius ? (e.valueElement.style.top = "0px", e.valueElement.style.height = e.middleElement.style.height) : (e.valueElement.style.top = e.height - t - e.borderRadius + "px", e.valueElement.style.height = t + 2 * e.borderRadius + "px")), t > 0 ? (e.animationStyle != gn.AnimationStyle.StaticFull && e.animationStyle != gn.AnimationStyle.CustomFull ? e.markerElement.style.height = t + "px" : (e.markerElement.style.height = e.height + "px", e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius)), e.markerElement.style.visibility = "visible") : (e.markerElement.style.height = "0px", e.animationStyle != gn.AnimationStyle.StaticFull && e.animationStyle != gn.AnimationStyle.CustomFull && (e.markerElement.style.visibility = "hidden")), e.borderWidth.left;
        var c = e.borderWidth.left;
        if (t == 0 || e.height == t)
          e.markerElement.style.left = c + "px", e.markerElement.style.width = e.width + "px", e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius);
        else if (t < e.borderRadius) {
          var d = 2.5 * t;
          d > e.width && (d = e.width);
          var _ = c + e.width / 2 - d / 2;
          e.markerElement.style.left = _ + "px", e.markerElement.style.width = d + "px", e.direction == gn.Direction.BottomToTop ? e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(0, 0, e.borderRadius, e.borderRadius) : e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius, e.borderRadius, 0, 0);
        } else
          e.height - t < e.borderRadius ? (r = (2 * (e.borderRadius - (e.height - t)) + (e.borderRadius - Math.sqrt(Math.pow(e.borderRadius, 2) - Math.pow(e.borderRadius - (e.height - t), 2)))) / 3, e.direction == gn.Direction.BottomToTop ? e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(r, r, e.borderRadius, e.borderRadius) : e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius, e.borderRadius, r, r)) : (e.markerElement.style.left = c + "px", e.markerElement.style.width = e.width + "px", e.direction == gn.Direction.BottomToTop ? e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(0, 0, e.borderRadius, e.borderRadius) : e.markerElement.style.cssText = e.markerElement.style.cssText + gn._createBorderRadiusCss(e.borderRadius, e.borderRadius, 0, 0));
        e.animationStyle != gn.AnimationStyle.StaticFull && e.animationStyle != gn.AnimationStyle.CustomFull ? e.direction == gn.Direction.TopToBottom ? e.markerElement.style.top = 2 * -e.height - e.borderWidth.top + "px" : e.markerElement.style.top = -e.height - t - e.borderWidth.top + "px" : e.markerElement.style.top = 2 * -e.height - e.borderWidth.top + "px";
      }
      e.progress = e.value / e.maxValue;
    }
    e.onValueChanged != null && e.onValueChanged();
  }, gn._elementCurrentStyle = function(o, e) {
    if (o.currentStyle) {
      var r = 0, t = "", i = !1;
      for (r = 0; r < e.length; r++)
        e[r].toString() != "-" ? (t += i ? e[r].toString().toUpperCase() : e[r].toString(), i = !1) : i = !0;
      return e = t, o.currentStyle[e];
    }
    return getComputedStyle(o, null).getPropertyValue(e);
  }, gn._parseInt = function(o) {
    var e = parseInt(o);
    return isNaN(e) && (e = 0), e;
  }, gn._createBorderRadiusCss = function(o, e, r, t) {
    return o != null && e == null && r == null && t == null ? "; -moz-border-radius: " + o + "px; -ms-border-radius: " + o + "px; -o-border-radius: " + o + "px; -webkit-border-radius: " + o + "px; -khtml-border-radius: " + o + "px; border-radius: " + o + "px;" : "; -moz-border-radius: " + (o = o || 0) + "px " + (e = e || 0) + "px " + (r = r || 0) + "px " + (t = t || 0) + "px; -ms-border-radius: " + o + "px " + e + "px " + r + "px " + t + "px; -o-border-radius: " + o + "px " + e + "px " + r + "px " + t + "px; -webkit-border-radius: " + o + "px " + e + "px " + r + "px " + t + "px; -khtml-border-radius: " + o + "px " + e + "px " + r + "px " + t + "px; border-radius: " + o + "px " + e + "px " + r + "px " + t + "px;";
  };
  var Vd = 239514e3, Eg = function() {
    function o() {
      Gn(this, o);
    }
    return zn(o, [{ key: "convertServerIdToGuid", value: function(e) {
      return 1 * e + Vd;
    } }, { key: "convertGuidToServerId", value: function(e) {
      return 1 * e - Vd;
    } }]), o;
  }();
  function Wu(o, e) {
    o.__licenseInfo = e, function(r) {
      if (!r.__calic) {
        if (!Mu(r))
          return !1;
        r.__calic = r.__licenseInfo, !r._isMobileMode() || kn();
      }
    }(o);
  }
  var Ud = 0, Dg = 1, kg = 2, xg = 3, Mg = 4, Pg = 5;
  function Ps() {
    return new l.Imagecore();
  }
  function Io() {
    return new l.ImageProc();
  }
  function Gd() {
    return new l.PdfReader();
  }
  var ea = 0;
  function Ag() {
    return ++ea;
  }
  function jd(o, e) {
    var r, t, i, a, u = e[0], c = e[1], d = !1, _ = 0, v = !1, T = l.DWT.EnumDWT_ImageType, M = !1, A = !0;
    if (e.length > 3 && (r = e[3]), e.length > 4 && (v = e[4]), e.length > 5 && (M = e[5]), e.length > 6 && (A = e[6]), r || (r = o._innerGetCurrentDocumentName()) == "" && o._ImgManager && (r = o._ImgManager.getWebViewer().GetDefaultFileName()), u instanceof FileList ? t = u[0] : u instanceof Blob ? t = u : u instanceof ArrayBuffer || u instanceof Uint8Array ? (t = new Blob([u]), a = ja(u)) : t = u, n.isUndefined(t))
      return n.Errors.InvalidSourceFile(o), n.Promise.reject({ code: o._errorCode, message: o._getErrorString() });
    if (n.isUndefined(a))
      if (t.type) {
        if ((a = t.type == "application/pdf" ? T.IT_PDF : t.type == "image/png" ? T.IT_PNG : t.type == "image/jpeg" || t.type == "image/jpg" ? T.IT_JPG : t.type == "image/bmp" ? T.IT_BMP : t.type == "image/tiff" || t.type == "image/tif" ? T.IT_TIF : t.type == "image/jp2" ? T.IT_J2K : on.getImageType(t.name)) == -1 && t.type == "application/octet-stream")
          return new n.Promise(function(z, ue) {
            var xe = new FileReader();
            xe.onload = function(Fe) {
              var Qe, Ze = Fe == null || (Qe = Fe.target) === null || Qe === void 0 ? void 0 : Qe.result;
              e[0] = Ze, z(e);
            }, xe.readAsArrayBuffer(t);
          }).then(function(z) {
            return jd(o, z);
          });
      } else
        a = on.getImageType(t.name);
    if (i = t.name, a == T.IT_JPG || a == T.IT_PNG || a == T.IT_BMP || a == T.IT_J2K) {
      v || fr("", o);
      var S = o._jpgQuality;
      d = Ps();
      var V = l.navInfoSync.bMac || l.navInfoSync.biPhone || l.navInfoSync.biPad;
      return d.readImage(t, T.IT_JPG, S, !1, V).then(function(z) {
        if (l.navInfoSync.bMobile || l.navInfoSync.bPad) {
          var ue = o._jpgQuality, xe = 3840;
          if (z && (z.imageWidth > xe || z.imageHeight > xe))
            return l.ImageProcWrapper.resizeImageWithMeta(t, z, 5, ue, xe);
        }
        return z;
      }).then(function(z) {
        var ue = 0;
        c ? (ue = c, M && (z.imageBitDepth = 1)) : z.originalFormat == 1 ? ue = T.IT_BMP : z.originalFormat == 2 ? ue = T.IT_JPG : z.originalFormat == 3 ? ue = T.IT_PNG : z.originalFormat == 14 && (ue = T.IT_J2K);
        var xe = { src: z.imageData, imgType: z.imageType, verify: ue, dataType: "url" };
        t instanceof File || z.originalFormat == 2 && t instanceof Blob && (xe.src = t), ea++;
        var Fe = e[2], Qe = {};
        Qe.id = ea, Qe.type = z.imageType, Qe.width = z.imageWidth, Qe.height = z.imageHeight, Qe.bitDepth = z.imageBitDepth, Qe.resolutionX = z.imageXResolution, Qe.resolutionY = z.imageYResolution, Fe && (Qe.oriBlobData = Fe), xe.metadata = Qe;
        var Ze = !1, Ct = { ids: ea, metaData: [Qe] };
        try {
          xe.imageId = ea, o._OnBitmapChanged(["10", "" + ea, 1, o._ImgManager.getCurrentImageIndex(), o._ImgManager.count(), xe], null, r);
        } catch (it) {
          Ze = !0, n.Errors.SystemExceptionError(o, it.message);
        }
        if (v || Yn(""), !Ze && A && n.isFunction(o.__OnPostLoad))
          try {
            o.__OnPostLoad("", i, a);
          } catch (it) {
            Ze = !0, n.Errors.SystemExceptionError(o, it.message);
          }
        if (d && d.terminate(), l.DWT.lavrf_(1, l.DWT.EnumInstance.dwt_browser, ""), Ze)
          throw { code: o._errorCode, message: o._getErrorString() };
        return Ct;
      }, function(z) {
        throw n.Errors.LoadImageFailed(o, z), v || Yn(""), d && d.terminate(), { code: o._errorCode, message: o._getErrorString() };
      });
    }
    if (a == T.IT_PDF) {
      var ne = Gd();
      return ne.context = {}, n.showProgress(o), o._OnPercentDone([0, -1, l.MSG.LoadingPdf, ""]), ne.open(t, o._pdfPassword).then(function(z) {
        var ue, xe = z.PdfCount;
        if (z.isTextBased && o._pdfRealConvertMode == 2)
          return l.Lib.closeProgress(o), o._pdfConvertMode == 2 ? l.Lib.Errors.LoadTextPDFButSetImageOnly(o) : l.Lib.Errors.LoadTextPDFButNoPdfrLicenseErr(o), ne.close(), ne.terminate(), n.Promise.reject({ code: o._errorCode, message: o._getErrorString() });
        for (o._OnPercentDone([0, 0, "0/" + xe, ""]), ue = n.Promise.resolve(0), ne.context.cIndex = 0, ne.context.pdfCount = xe, _ = 0; _ < xe; _++)
          ue = ue.then(function() {
            var Fe, Qe, Ze, Ct = ne.context.cIndex, it = l.navInfoSync.bMac || l.navInfoSync.biPhone || l.navInfoSync.biPad;
            return (l.navInfoSync.bMobile || l.navInfoSync.bPad) && (Fe = 5, Qe = 85, Ze = 3840), ne.readPage(Ct, o._pdfResolution, o._pdfRealConvertMode, l.DWT.EnumDWT_ImageType.IT_JPG, !1, !1, it, Fe, Qe, Ze);
          }), ue = ue.then(function(Fe) {
            var Qe = ne.context.cIndex, Ze = ne.context.pdfCount, Ct = Qe + 1, it = 100 * Ct / (1 * Ze), Bt = {}, yt = 4;
            if (c ? yt = c : Fe.realReadMode == 1 && (yt = 5001), o._OnPercentDone([0, it, Ct + "/" + Ze, ""]), l.Lib.isArray(Fe.imageInfos) && Fe.imageInfos.length > 0) {
              var en = Fe.imageInfos[0];
              Bt.width = en.imageWidth, Bt.height = en.imageHeight, Bt.bitDepth = en.imageBitDepth, Bt.resolutionX = en.imageXResolution, Bt.resolutionY = en.imageYResolution;
            }
            ea++;
            var Ft = { src: Fe.imageData, dataType: "url", imgType: l.DWT.EnumDWT_ImageType.IT_PDF, verify: yt, index: Fe.pageIndex, metadata: Bt, imageId: ea };
            try {
              o._OnBitmapChanged(["10", "" + ea, 1, o._ImgManager.getCurrentImageIndex(), o._ImgManager.count(), Ft], null, r);
            } catch (st) {
              throw l.Lib.Errors.SystemExceptionError(o, st.message), 0;
            }
            ne.context.cIndex = Qe + 1;
          });
        return ue.then(function(Fe) {
          return l.Lib.closeProgress(o), ne.close(), ne.terminate(), l.DWT.lavrf_(1, l.DWT.EnumInstance.dwt_browser, ""), A && l.Lib.isFunction(o.__OnPostLoad) && o.__OnPostLoad("", i, a), Fe;
        }, function(Fe) {
          throw l.Lib.closeProgress(o), ne.close(), ne.terminate(), Fe && l.Lib.Errors.LoadImageFailed(o, Fe), { code: o._errorCode, message: o._getErrorString() };
        });
      }, function(z) {
        throw l.Lib.closeProgress(o), ne.close(), ne.terminate(), z && l.Lib.Errors.LoadImageFailed(o, z), { code: o._errorCode, message: o._getErrorString() };
      });
    }
    return a == T.IT_TIF ? (d = Ps(), n.showProgress(o), o._OnPercentDone([0, -1, l.MSG.LoadingTiff, ""]), d.openTiff(t).then(function(z) {
      var ue = z.pageCount, xe = z.imageInfos, Fe = n.Promise.resolve(0);
      o._OnPercentDone([0, 0, "0/" + ue, ""]);
      for (var Qe = 0; Qe < ue; Qe++)
        Fe = Fe.then(function(Ze) {
          var Ct, it, Bt, yt = l.navInfoSync.bMac || l.navInfoSync.biPhone || l.navInfoSync.biPad;
          return (l.navInfoSync.bMobile || l.navInfoSync.bPad) && (Ct = 5, it = 85, Bt = 3840), d.readTiff(Ze, l.DWT.EnumDWT_ImageType.IT_JPG, !1, yt, Ct, it, Bt).then(function(en) {
            var Ft = Ze + 1, st = 100 * Ft / (1 * ue);
            o._OnPercentDone([0, st, Ft + "/" + ue, ""]), ea++;
            var nt = 2;
            c && (nt = c);
            var ft = { src: en.imageData, dataType: "url", imgType: l.DWT.EnumDWT_ImageType.IT_TIF, verify: nt, index: Ze, metadata: xe[Ze], imageId: ea };
            try {
              o._OnBitmapChanged(["10", "" + ea, 1, o._ImgManager.getCurrentImageIndex(), o._ImgManager.count(), ft], null, r);
            } catch (Pt) {
              throw l.Lib.Errors.SystemExceptionError(o, Pt.message), 0;
            }
            return Ze + 1;
          });
        });
      return Fe.then(function(Ze) {
        return l.Lib.closeProgress(o), d.closeTiff(), d.terminate(), l.DWT.lavrf_(1, l.DWT.EnumInstance.dwt_browser, ""), A && l.Lib.isFunction(o.__OnPostLoad) && o.__OnPostLoad("", i, a), Ze;
      }, function(Ze) {
        throw l.Lib.closeProgress(o), d.closeTiff(), d.terminate(), Ze && l.Lib.Errors.LoadImageFailed(o, Ze), { code: o._errorCode, message: o._getErrorString() };
      });
    }, function(z) {
      throw l.Lib.closeProgress(o), d.closeTiff(), d.terminate(), l.Lib.Errors.LoadImageFailed(o, z), { code: o._errorCode, message: o._getErrorString() };
    })) : (n.Errors.LoadImageFailed(o, "invalid image type."), n.Promise.reject({ code: o._errorCode, message: o._getErrorString() }));
  }
  function zd(o, e, r) {
    var t = Io(), i = o._ImgManager.convertClientIndexToServerId(e);
    return t.context = {}, fr("", o), o._ImgManager.getWebViewer().GetImageData(o._ImgManager.getUidByIndex(e)).then(function(a) {
      return t.context.metadata = a && a.metadata ? a.metadata : {}, t.initImage(a.oriData);
    }).then(function() {
      return t.flip(r);
    }).then(function() {
      return t.getImage();
    }).then(function(a) {
      var u = { src: a.imageData, imgType: n.MobileFuns.convertOutputType(a.imageType), dataType: "url" };
      try {
        o._OnBitmapChanged(["10", "" + i, 4, o._ImgManager.getCurrentImageIndex(), o._ImgManager.count(), u]);
      } catch (c) {
        throw n.Errors.SystemExceptionError(o, c.message), 0;
      }
    }).then(function() {
      Yn(""), t.terminate();
    }, function(a) {
      throw Yn(""), a && (r == -1 ? n.Errors.MirrorFailed(o, a) : n.Errors.FlipFailed(o, a)), t.terminate(), { code: o._errorCode, message: o._getErrorString() };
    });
  }
  function Hd(o, e) {
    var r = e[0], t = e[1], i = e[2], a = e[3], u = e[4], c = !1, d = !1, _ = l.DWT.EnumDWT_ImageType;
    if (n.isUndefined(r))
      return n.Errors.MobileServer_InvalidImage(o), n.Promise.reject({ code: o._errorCode, message: o._getErrorString() });
    if (!n.isArray(t))
      return n.Errors.MobileServer_InvalidIndex(o), n.Promise.reject({ code: o._errorCode, message: o._getErrorString() });
    if (n.isUndefined(i) && (i = "jpg"), n.isString(r) && r != "" || (r = "img." + i), i == "png" || i == "jpg" || i == "bmp") {
      var v, T = t[0], M = o._jpgQuality;
      n.log("[Wasm]Save Image: save " + i), a == 1 && fr("", o), v = i == "png" ? _.IT_PNG : i == "bmp" ? _.IT_BMP : _.IT_JPG;
      var A = o._ImgManager.getWebViewer().GetImageData(o._ImgManager.getUidByIndex(T));
      return (d = Ps()).context = {}, d.context.bSaveAsBinary = u, (A = o._scaleDownThreshold <= 0 ? A.then(function(Fe) {
        n.log("[Wasm]Save Image: get original image data successfully.");
        var Qe = d.context.bSaveAsBinary ? l.Enum_ReturnType.RT_BINARY : l.Enum_ReturnType.RT_BASE64, Ze = Fe.metadata.bitDepth == 1;
        return d.saveImage(Fe.oriData, v, M, Qe, Ze);
      }) : (A = A.then(function(Fe) {
        n.log("[Wasm]Save Image: save to new type successfully.");
        var Qe = Fe && Fe.metadata ? Fe.metadata : {}, Ze = Qe.bitDepth == 1;
        return d.context.bOneBit = Ze, l.ImageProcWrapper.resize(Fe.oriData, Qe.width, Qe.height, o._scaleDownThreshold, 5, d.context.bOneBit);
      })).then(function(Fe) {
        n.log("[Wasm]Save Image: image scale successfully.");
        var Qe = d.context.bSaveAsBinary ? l.Enum_ReturnType.RT_BINARY : l.Enum_ReturnType.RT_BASE64;
        return d.saveImage(Fe.imageData, v, M, Qe, d.context.bOneBit);
      })).then(function(Fe) {
        return a == 1 && Yn(""), d && d.terminate(), c && c.terminate(), n.log("[Wasm]Save Image: save image terminate."), { blobData: Fe.imageData, type: i, MD5: Fe.MD5 };
      }, function(Fe) {
        throw a == 1 && Yn(""), n.Errors.SaveImageFailed(o, Fe), n.log("[Wasm]Save Image: save image failed."), d && d.terminate(), c && c.terminate(), { code: o._errorCode, message: o._getErrorString() };
      });
    }
    if (i != "pdf") {
      if (i == "tiff") {
        var S, V = t.length;
        n.log("[Wasm]Save Image: save tiff"), (d = Ps()).context = {}, d.context.bSaveAsBinary = u, o._scaleDownThreshold > 0 && ((c = Io()).context = {}), a && (d.context.bShowPercentProgress = !0, n.showProgress(o), a == 2 ? o._OnPercentDone([0, -1, l.MSG.ConvertingToBlob, ""]) : a == 3 ? o._OnPercentDone([0, -1, l.MSG.ConvertingToBase64, ""]) : a == 4 ? o._OnPercentDone([0, -1, l.MSG.Encoding, ""]) : o._OnPercentDone([0, -1, l.MSG.SavingTiff, ""]));
        var ne, z = d.createTiff(), ue = l.DWT.EnumDWT_TIFFCompressionType;
        for (d.context.cIndex = 0, S = Ud, o._tiffCompressionType == ue.TIFF_AUTO ? S = Ud : o._tiffCompressionType == ue.TIFF_FAX3 || o._tiffCompressionType == ue.TIFF_T4 ? S = Dg : o._tiffCompressionType == ue.TIFF_FAX4 || o._tiffCompressionType == ue.TIFF_T6 ? S = kg : o._tiffCompressionType == ue.TIFF_LZW ? S = xg : o._tiffCompressionType == ue.TIFF_JPEG ? S = Pg : o._tiffCompressionType == ue.TIFF_PACKBITS && (S = Mg), d.context.tiffFormat = S, d.context.aryIndex = t, ne = 0; ne < V; ne++)
          z = n.MobileFuns.appendTiffPage(o, z, d, c);
        return (z = z.then(function() {
          n.log("[Wasm]Save Image: generate tiff data.");
          var Fe = d.context.bSaveAsBinary ? l.Enum_ReturnType.RT_BINARY : l.Enum_ReturnType.RT_AUTO;
          return d.getTiff(Fe);
        })).then(function(Fe) {
          return n.log("[Wasm]Save Image: save tiff successfully."), d.context.bShowPercentProgress && n.closeProgress(o), d.closeTiff(), d.terminate(), c && c.terminate(), { blobData: Fe.imageData, type: "tiff", MD5: Fe.MD5 };
        }, function(Fe) {
          throw d.context.bShowPercentProgress && n.closeProgress(o), n.Errors.SaveImageFailed(o, Fe), n.log("[Wasm]Save Image: save tiff failed."), d.closeTiff(), d.terminate(), c && c.terminate(), { code: o._errorCode, message: o._getErrorString() };
        });
      }
      return n.Errors.InvalidImageType(o), n.Promise.reject({ code: o._errorCode, message: o._getErrorString() });
    }
    var xe = function() {
      var Fe, Qe = new l.PdfWriter(), Ze = t.length;
      Qe.context = {}, n.log("[Wasm]Save Image: save pdf"), a && (n.showProgress(o), a == 2 ? o._OnPercentDone([0, -1, l.MSG.ConvertingToBlob, ""]) : a == 3 ? o._OnPercentDone([0, -1, l.MSG.ConvertingToBase64, ""]) : a == 4 ? o._OnPercentDone([0, -1, l.MSG.Encoding, ""]) : o._OnPercentDone([0, -1, l.MSG.SavingPdf, ""]));
      var Ct = Qe.initPdfSetting(o._pdfWriteSetting);
      for (o._scaleDownThreshold > 0 && ((c = Io()).context = {}), Qe.context.cIndex = 0, Qe.context.aryIndex = t, Qe.context.bSaveAsBinary = u, Fe = 0; Fe < Ze; Fe++)
        Ct = Ct.then(function() {
          var it = Qe.context.cIndex, Bt = Qe.context.aryIndex;
          return n.log("[Wasm]Save Image: page " + Qe.context.cIndex + " start process."), o._ImgManager.getWebViewer().GetImageData(o._ImgManager.getUidByIndex(Bt[it]));
        }), Ct = (Ct = o._scaleDownThreshold <= 0 ? Ct.then(function(it) {
          n.log("[Wasm]Save Image: page " + Qe.context.cIndex + " get image data successfully. (no scale)");
          var Bt = it.metadata.bitDepth == 1;
          return Qe.appendPage(it.oriData, Bt);
        }) : (Ct = Ct.then(function(it) {
          n.log("[Wasm]Save Image: page " + Qe.context.cIndex + " get image data successfully.");
          var Bt = it && it.metadata ? it.metadata : {}, yt = Bt.bitDepth == 1;
          return Qe.context.bOneBit = yt, l.ImageProcWrapper.resize(it.oriData, Bt.width, Bt.height, o._scaleDownThreshold, 5, yt);
        })).then(function(it) {
          return n.log("[Wasm]Save Image: page " + Qe.context.cIndex + " scale successfully."), Qe.appendPage(it.imageData, Qe.context.bOneBit);
        })).then(function() {
          var it = Qe.context.cIndex, Bt = Qe.context.aryIndex.length;
          if (a) {
            var yt = it + 1, en = 100 * yt / (1 * Bt);
            o._OnPercentDone([0, en, yt + "/" + Bt, ""]);
          }
          n.log("[Wasm]Save Image: page " + Qe.context.cIndex + " processed."), Qe.context.cIndex = it + 1;
        });
      return { v: Ct.then(function() {
        var it = Qe.context.bSaveAsBinary ? l.Enum_ReturnType.RT_BINARY : l.Enum_ReturnType.RT_AUTO;
        return Qe.writePdf(it);
      }).then(function(it) {
        return n.log("[Wasm]Save Image: save pdf successfully."), a && n.closeProgress(o), Qe.terminate(), c && c.terminate(), { blobData: it.pdfData, type: "pdf", MD5: it.MD5 };
      }, function(it) {
        throw a && n.closeProgress(o), n.Errors.SaveImageFailed(o, it), n.log("[Wasm]Save Image: save pdf failed."), Qe.terminate(), c && c.terminate(), { code: o._errorCode, message: o._getErrorString() };
      }) };
    }();
    return gi(xe) === "object" ? xe.v : void 0;
  }
  function Kd(o, e) {
    var r, t, i, a;
    return e.length > 0 ? r = e[0] : (a = l.Lib.product.refProductKey, n.License.isLTS() && l.WasmEnv && (a = l.WasmEnv.productKey), r = a), l.WasmEnv ? o._isMobileMode() ? (t = l.WasmEnv.licMode, i = l.WasmEnv.uuid, o.__productKey = r, l.WasmEnv.getLicenseInfo(r, t, i).then(function(u) {
      if (u && u.Detail)
        return u;
      throw n.Errors.LicenseEmptyOrInvalid(o), o.__productKey = "", { code: o._errorCode, message: o._getErrorString() };
    }, function(u) {
      throw n.Errors.GetLicenseInfoFailed(o, u), o.__productKey = "", { code: o._errorCode, message: o._getErrorString() };
    })) : o._serviceNotSupportAsync("GetLicenseInfo") : (n.Errors.GetLicenseInfoFailed(o, "wasm not load."), n.Promise.reject({ code: o._errorCode, message: o._getErrorString() }));
  }
  function jo(o) {
    var e = o.__httpHeaderMap;
    return o.__httpHeaderMap = {}, e || (e = o.__httpHeaderMap), e;
  }
  function Rg(o, e) {
    var r, t, i, a, u;
    return e.length > 0 && (r = e[0]), e.length > 1 && (t = e[1]), e.length > 2 && (i = e[2]), n.isUndefined(r) ? (n.Errors.InvalidParameter(o), n.isFunction(i) && i(o._errorCode, o._getErrorString()), !1) : (u = !!n.isFunction(t) && function() {
      t(o.__HTTPPostResponseString, r, e);
    }, a = { bOnlyUploadForm: Gt, _this: o, url: r, asyncSuccessFunc: u, asyncFailureFunc: function() {
      n.isFunction(i) && So(i, o, o.__HTTPPostResponseString, r, e);
    } }, n._asyncUploadCmd(a), !0);
  }
  function Lg(o, e) {
    var r, t, i, a, u, c, d, _, v;
    if (e.length > 0 && (a = e[0]), e.length > 1 && (u = e[1]), e.length > 2 && (c = e[2]), e.length > 3 && (d = e[3]), n.isUndefined(a))
      return n.Errors.InvalidParameter(o), n.isFunction(v) && v(o._errorCode, o._getErrorString()), !1;
    var T, M = [];
    if (e.length > 4 && (n.isFunction(e[4]) ? (T = "RemoteFile", _ = e[4], e.length > 5 && (v = e[5])) : (e.length > 5 && (_ = e[5]), e.length > 6 && (v = e[6]), T = n.isString(e[4]) ? e[4] : "RemoteFile")), t = !!n.isFunction(_) && function(A, S) {
      Vi(_, o.__HTTPPostResponseString, S, e);
    }, i = function(A) {
      n.isFunction(v) && So(v, o, o.__HTTPPostResponseString, A, e);
    }, !o._checkIndices(u))
      return i(u), !1;
    if (n.isArray(u) && n.each(u, function(A) {
      var S = o._ImgManager.convertClientIndexToServerId(A);
      S != -1 && M.push(S);
    }), M.length == 0)
      return n.Errors.InvalidIndex(o), i(u), !1;
    if (n.isUndefined(c))
      return n.Errors.InvalidImageType(o), i(u), !1;
    if (c == l.DWT.EnumDWT_ImageType.IT_BMP || c == l.DWT.EnumDWT_ImageType.IT_JPG || c == l.DWT.EnumDWT_ImageType.IT_PNG) {
      if (M.length > 1)
        return n.Errors.UploadIndexMoreThanOne(o), i(u), !1;
    } else if (c != l.DWT.EnumDWT_ImageType.IT_TIF && c != l.DWT.EnumDWT_ImageType.IT_PDF)
      return n.Errors.InvalidImageType(o), i(u), !1;
    return n.isUndefined(d) || d != l.DWT.EnumDWT_UploadDataFormat.Binary && d != l.DWT.EnumDWT_UploadDataFormat.Base64 ? (n.Errors.InvalidDataFormat(o), i(u), !1) : (r = { bOnlyUploadForm: vt, method: "HTTPUpload", _this: o, url: a, serverIds: M, enumImageType: c, saveSetup: !1, dataFormat: d, fileName: T, retry: 0, bOnlyEmptyIsOK: !0, objUploadFileStatus: !1, asyncSuccessFunc: t, asyncFailureFunc: i }, n._asyncUploadCmd(r), !0);
  }
  function Vi(o, e, r, t, i) {
    try {
      o(e, r, t, i);
    } catch {
    }
    e = r = t = i = null;
  }
  function Zr(o, e, r) {
    try {
      o(e._errorCode, e._getErrorString(), r);
    } catch {
    }
    e = r = null;
  }
  function So(o, e, r, t, i, a) {
    try {
      o(e._errorCode, e._getErrorString(), r, t, i, a);
    } catch {
    }
    e = r = t = i = a = null;
  }
  function da(o, e) {
    (n.cancelFrom == Li && o.__IfShowProgressBar == Gt || n.cancelFrom != Li && o.__IfShowCancelDialogWhenImageTransfer == Gt) && n.setBtnCancelVisibleForProgress(e);
  }
  function Yd(o, e, r, t, i, a, u, c, d, _, v, T, M, A) {
    var S, V, ne, z = t.size;
    return (S = z - u) > 0 ? (S >= c ? (S -= c, V = c) : (V = S, S = 0), (ne = u == 0 && V == z ? t : t.slice(u, u + V)) ? n.dlgRef > 0 || o.__IfShowCancelDialogWhenImageTransfer == 0 ? (ne.name = i, da(o, !0), a["Content-Range"] = ["bytes ", u, "-", u + ne.size - 1, "/", z].join(""), d({ total: z, loaded: u }), on.httpPostUpload(o, e, ne, !0, 0, a, !1, _, v, T, function(ue) {
      S == 0 ? (n.needShowTwiceShowDialog = !1, d({ total: z, loaded: z }), n.isFunction(M) && Vi(M, ue)) : (u += V, setTimeout(function() {
        n.cancelFrom = ei, Yd(o, e, r, t, i, a, u, c, d, _, v, T, M, A);
      }, 100));
    }, A), !0) : (n.Errors.UploadError(o, !0), A()) : (n.Errors.UploadFileCannotEmpty(o), A())) : (n.needShowTwiceShowDialog = !1, n.closeProgress(o, "HttpUpload"), n.isFunction(M) && M(""), !0);
  }
  function Jd(o, e, r, t, i, a, u, c, d, _, v) {
    var T, M, A = t.getLength();
    if ((T = A - u) > 0) {
      T >= c ? (T -= c, M = c) : (M = T, T = 0);
      var S = t.getData(u, c);
      return S && S != "" ? n.dlgRef > 0 || o.__IfShowCancelDialogWhenImageTransfer == 0 ? (da(o, !0), a["Content-Range"] = ["bytes ", u, "-", u + M - 1, "/", A].join(""), d({ total: A, loaded: u }), on.httpPostUploadString(o, e, S, i, 0, a, !1, 0, !0, function(V) {
        T == 0 ? (n.needShowTwiceShowDialog = !1, d({ total: A, loaded: A }), n.isFunction(_) && Vi(_, V)) : (u += M, setTimeout(function() {
          n.cancelFrom = ei, Jd(o, e, r, t, i, a, u, c, d, _, v);
        }, 100));
      }, v), !0) : (n.Errors.UploadError(o, !0), v()) : (n.Errors.UploadFileCannotEmpty(o), v());
    }
    return n.needShowTwiceShowDialog = !1, n.closeProgress(o, "HttpUpload"), n.isFunction(_) && _(""), !0;
  }
  function Fg(o, e, r, t, i, a, u, c, d, _, v, T) {
    var M, A = parseInt(t), S = parseInt(i), V = a, ne = "HTTPUpload", z = e, ue = !1, xe = o._moduleSize, Fe = o._segementUploadThreshold;
    if (o.__HTTPPostResponseString = "", n.isUndefined(t))
      return n.Errors.InvalidImageType(o), n.isFunction(T) && T(), !1;
    n.cancelFrom = ei;
    var Qe, Ze = function() {
      return n.needShowTwiceShowDialog = !1, n.closeProgress(o, ne), n.isFunction(T) && T(), !1;
    };
    if (M = function(it) {
      var Bt = it.total === 0 ? 100 : Math.round(100 * it.loaded / it.total);
      [it.loaded, " / ", it.total].join(""), o._OnPercentDone([0, Bt, "", "http", V]);
    }, V = on.addImageFileExt(V, A), n.needShowTwiceShowDialog = !0, n.showProgress(o, ne, !1), S == l.DWT.EnumDWT_UploadDataFormat.Binary) {
      if (_ && _.bCancel)
        return _.st = 2, Ze();
      o._OnPercentDone([0, -1, l.MSG.Encoding, "http"]), ue = o.__innerConvertToBlob(A, r, u, !0, 4, function(it, Bt, yt) {
        if (Qe = function() {
          return n.needShowTwiceShowDialog = !1, n.closeProgress(o, ne), n.isFunction(v) && Vi(v, it), !0;
        }, _ && _.bCancel)
          return _.st = 2, Ze();
        if (!it || it.size <= 0)
          return n.Errors.UploadFileCannotEmpty(o), Ze();
        var en = o.__maxUploadImageSize;
        if (it.size > en && en != -1)
          return n.Errors.UploadExceededMaxSize(o), Ze();
        if (o._errorCode != 0)
          return Ze();
        if (Fe > 0 && it.size > Fe) {
          var Ft = jo(o);
          l.DWT.IfAddMD5InUploadHeader && Bt && Bt != "" && (Ft["dwt-md5"] = Bt), o._OnPercentDone([0, -1, l.MSG.Uploading, "http", V]), ue = Yd(o, z, A, it, V, Ft, 0, xe, M, c, d, _, Qe, Ze);
        } else
          ue = o.__innnerHTTPUploadBinaryFull(z, Bt, it, A, V, c, d, _, Qe, Ze);
      }, Ze);
    } else if (S == l.DWT.EnumDWT_UploadDataFormat.Base64) {
      var Ct;
      ue = o._convertToBase64ByServerIds(r, A, u, 4, function(it) {
        if (!it || it.getLength() <= 0)
          return n.Errors.UploadFileCannotEmpty(o), Ze();
        if (Qe = function() {
          return n.needShowTwiceShowDialog = !1, n.closeProgress(o, ne), n.isFunction(v) && Vi(v, it), !0;
        }, Fe > 0 && it.getLength() > Fe) {
          var Bt = jo(o);
          Ct = it.getMD5(), l.DWT.IfAddMD5InUploadHeader && (Bt["dwt-md5"] = Ct), o._OnPercentDone([0, -1, l.MSG.Uploading, "http"]), Jd(o, z, A, it, V, Bt, 0, xe, M, Qe, Ze);
        } else {
          var yt;
          if (Ct = it.getMD5(), !(yt = it.getData(0, it.getLength())) || yt == "")
            return n.Errors.UploadFileCannotEmpty(o), Ze();
          (function(en, Ft, st, nt, ft, Pt, Ot, pn, un, An) {
            var Mr = jo(en), tr = Pt, Qn = Ft;
            n.dlgRef > 0 || en.__IfShowCancelDialogWhenImageTransfer == 0 ? (l.DWT.IfAddMD5InUploadHeader && Mr && st && st != "" && (Mr["dwt-md5"] = st), da(en, !0), on.httpPostUploadString(en, Qn, nt, tr, 0, Mr, !0, Ot, pn, function(wi) {
              n.isFunction(un) && Vi(un, wi);
            }, An)) : (n.Errors.UploadError(en, !0), An());
          })(o, z, Ct, yt, 0, V, c, d, Qe, Ze);
        }
      }, Ze);
    }
    return ue;
  }
  function Og(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  n.MobileFuns = { makeParams: function() {
    return arguments;
  }, _innerSaveLocal: function(o, e, r) {
    var t = n.win, i = l.navInfoSync, a = t.requestFileSystem || t.webkitRequestFileSystem || t.mozRequestFileSystem;
    if ((i.biPad || i.biPhone) && !a && (i.bSafari && parseFloat(i.strBrowserVersion) < 13 || !i.bSafari)) {
      var u = t.open(o, "", "", !1);
      return setTimeout(function() {
        u && (u.document.title = e);
      }, 100), !0;
    }
    var c = document.createElementNS("http://www.w3.org/1999/xhtml", "a");
    if (c.href = o, c.download = e, c.target = "_blank", document.body.appendChild(c), i.bEdge)
      c.click();
    else {
      var d = document.createEvent("MouseEvents");
      d.initMouseEvent("click", !0, !1), c.dispatchEvent(d);
    }
    return document.body.removeChild(c), !0;
  }, saveLocal: function(o, e, r) {
    n.isString(o) && o.indexOf("blob:http://") > -1 ? n.MobileFuns._innerSaveLocal(o, e, r) : o instanceof Blob ? n.MobileFuns._innerSaveLocal(URL.createObjectURL(o), e, r) : o instanceof ArrayBuffer ? n.MobileFuns._innerSaveLocal(URL.createObjectURL(new Blob([o])), e, r) : n.MobileFuns._innerSaveLocal(o, e, r);
  }, dataURLtoBlob: function(o) {
    var e, r, t, i = o.split(","), a = i[0].match(/:(.*?);/)[1];
    try {
      e = atob(i[1]);
    } catch {
      return e = "", !1;
    }
    for (r = e.length, t = new Uint8Array(r); r--; )
      t[r] = e.charCodeAt(r);
    return new Blob([t], { type: a });
  }, appendTiffPage: function(o, e, r, t) {
    var i = o, a = e, u = r.context.bShowPercentProgress, c = i._aryTiffTag.length;
    if (c > 0) {
      c > 32 && (c = 32);
      for (var d = 0; d < c; d++)
        a = (a = a.then(function(_) {
          r.context.tagIndex = 0;
          var v = r.context.tagIndex, T = i._aryTiffTag[v];
          return n.log("[Wasm]Save Image: page " + r.context.cIndex + " add tiff tag " + T.tag), r.addTag(T.tag, T.content, T.UseBase64Encoding);
        })).then(function() {
          var _ = r.context.tagIndex;
          r.context.tagIndex = _ + 1;
        });
    }
    return a = a.then(function() {
      n.log("[Wasm]Save Image: page " + r.context.cIndex + " add tiff tag successfully");
      var _ = r.context.aryIndex, v = r.context.cIndex;
      return i._ImgManager.getWebViewer().GetImageData(i._ImgManager.getUidByIndex(_[v]));
    }), i._scaleDownThreshold <= 0 || (a = (a = a.then(function(_) {
      var v = _ && _.metadata ? _.metadata : {};
      n.log("[Wasm]Save Image: scale"), r.context.metaData = v;
      var T = v.bitDepth == 1;
      return l.ImageProcWrapper.resize(_.oriData, v.width, v.height, i._scaleDownThreshold, 5, T);
    })).then(function(_) {
      return n.log("[Wasm]Save Image: scaled"), { oriData: _.imageData, metadata: r.context.metaData };
    })), a = a.then(function(_) {
      var v = l.DWT.EnumDWT_ImageType.IT_ALL, T = r.context.tiffFormat;
      n.log("[Wasm]Save Image: page " + r.context.cIndex + " append to tiff");
      var M = _.metadata.bitDepth == 1;
      return r.appendImage(_.oriData, v, T, i._jpgQuality, M);
    }), u && (a = a.then(function() {
      var _ = r.context.aryIndex.length, v = r.context.cIndex + 1, T = 100 * v / (1 * _);
      i._OnPercentDone([0, T, v + "/" + _, ""]);
    })), a = a.then(function() {
      var _ = r.context.cIndex;
      return r.context.cIndex = _ + 1, _ + 1;
    });
  }, unloadWasm: function() {
    return n.detect.wasmScriptLoaded && l.WasmEnv, n.Promise.resolve();
  }, convertOutputType: function(o) {
    return o;
  }, isBlobUrl: function(o) {
    return n.isString(o) && o.indexOf("blob:http://") > -1;
  }, revoke: function(o) {
    return !n.MobileFuns.isBlobUrl(o) || (window.URL || window.webkitURL).revokeObjectURL(o);
  } }, n._asyncUploadCmd = function(o) {
    var e = o._this, r = o.bOnlyUploadForm, t = o.url, i = o.asyncSuccessFunc, a = o.asyncFailureFunc;
    if (!r) {
      var u = o.serverIds, c = o.enumImageType, d = o.dataFormat, _ = o.fileName, v = o.saveSetup, T = o.retry, M = o.bOnlyEmptyIsOK, A = o.objUploadFileStatus, S = function() {
        if (n.isFunction(a)) {
          var V = [];
          n.isArray(u) && n.each(u, function(ne) {
            var z = e._ImgManager.convertServerIdToClientIndex(ne);
            z > -1 && V.push(z);
          });
          try {
            a(V);
          } catch {
          }
        }
        return !1;
      };
      return n.isNumber(T) && T > 0 || (T = 0), e._errorCode != 0 ? S() : Fg(e, t, u, c, d, _, v, T, M, A, function(V) {
        if (n.isFunction(i)) {
          var ne = [];
          n.isArray(u) && n.each(u, function(z) {
            var ue = e._ImgManager.convertServerIdToClientIndex(z);
            ue > -1 && ne.push(ue);
          });
          try {
            Vi(i, V, ne);
          } catch {
          }
        }
        return !0;
      }, S);
    }
    e._innerFormFieldHTTPUpload(t, function() {
      if (n.isFunction(i))
        try {
          i();
        } catch {
        }
    }, function() {
      if (n.isFunction(a))
        try {
          a();
        } catch {
        }
    });
  };
  var Wg = function(o) {
    Hr(r, o);
    var e = Og(r);
    function r() {
      return Gn(this, r), e.apply(this, arguments);
    }
    return zn(r, [{ key: "_getErrorString", value: function() {
      var t = this;
      return t._errorCode == -2207 && t.__bMustUpgradeService && n.Errors.MustUpgradeService(t), t._errorCode != 0 ? t._errorString : "Successful.";
    } }, { key: "_getHowManyImagesInBuffer", value: function() {
      return this._isValid() ? this._ImgManager.count() : 0;
    } }, { key: "_getWebTwainId", value: function() {
      return this._id;
    } }, { key: "_isMobileMode", value: function() {
      return this._iServiceType == hr || this._iServiceType == Zn;
    } }, { key: "_isWasmWithScan", value: function() {
      return this._iServiceType == Zn;
    } }, { key: "_isTwainServiceType", value: function() {
      return this._iServiceType == Vr;
    } }, { key: "_isDMServiceType", value: function() {
      var t, i;
      return this._iServiceType == Vr && ((t = this._dmService) === null || t === void 0 || (i = t.attrs) === null || i === void 0 ? void 0 : i.UUID) != "";
    } }, { key: "_isPC", value: function() {
      var t = l.navInfoSync;
      return t.bWin || t.bMac || t.bLinux;
    } }, { key: "_resetErr", value: function() {
      this._errorCode = 0, this._errorString = "";
      var t = l.DWT.licenseException;
      t.code = 0, t.message = "";
    } }, { key: "_isValid", value: function() {
      return !this._destroy || (n.Errors.Destroyed(this), !1);
    } }, { key: "_isBindViewer", value: function() {
      return this._bBindViewer;
    } }, { key: "_isNoViewer", value: function() {
      return !this._bBindViewer;
    } }, { key: "_mobileNotSupport", value: function(t, i) {
      var a = this;
      return n.Errors.MobileNotSupport(a, t), n.isFunction(i) && i(a._errorCode, a._getErrorString()), !1;
    } }, { key: "_mobileNotSupportAsync", value: function(t) {
      var i = this;
      return n.Errors.MobileNotSupport(i, t), n.Promise.reject({ code: i._errorCode, message: i._getErrorString() });
    } }, { key: "_serviceSyncMethodNotSupport", value: function(t) {
      var i = this;
      return n.Errors.ServiceSyncMethodNotSupport(i, t), { code: i._errorCode, message: i._getErrorString() };
    } }, { key: "_serviceAsyncMethodNotSupport", value: function(t) {
      var i = this;
      return n.Errors.ServiceAsyncMethodNotSupport(i, t), { code: i._errorCode, message: i._getErrorString() };
    } }, { key: "_serviceNotSupportAsync", value: function(t) {
      var i = this;
      return n.Errors.ServiceNotSupport(i, t), n.Promise.reject({ code: i._errorCode, message: i._getErrorString() });
    } }, { key: "_nouiNotSupport", value: function(t, i) {
      var a = this;
      return n.Errors.CannotCallUIMethodWhenNotBindDefaultViewer(a, t), n.isFunction(i) && i(a._errorCode, a._getErrorString()), !1;
    } }]), r;
  }(zn(function o() {
    Gn(this, o);
  })), Bu = window.SparkMD5;
  function Bg(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  var Nu = l.navInfoSync, Ng = function(o) {
    Hr(r, o);
    var e = Bg(r);
    function r() {
      return Gn(this, r), e.apply(this, arguments);
    }
    return zn(r, [{ key: "_innerFunRaw", value: function(t, i, a, u, c, d, _) {
      var v, T, M, A, S = this, V = "f/", ne = !1;
      if (l.DWT.ConnectWithSocket)
        return this._innerSend(t, i, !1, d, _), !0;
      if (S._resetErr(), !S._isValid())
        return !1;
      var z = on.isServerInvalid(S);
      if (a && z)
        return S._waitForConnect().then(function() {
          return S._innerFunRaw(t, i, a, u, c, d, _);
        });
      if (!a && z)
        return n.Errors.ThrowString_FailedToCreateDWTObject(S), !1;
      if (a && (ne = !0, V = "fa/"), M = { method: "POST", url: v = [S._httpUrl, V, t].join(""), data: T = au(S._clientId, t, i, 0), async: ne, onSuccess: function(xe, Fe, Qe) {
        var Ze = !1;
        try {
          Ze = n.isString(xe) && Qe.getResponseHeader("content-type") === "text/json" ? n.parse(xe) : xe;
        } catch {
        }
        Ze ? (Ze.exception !== void 0 && Ze.description !== void 0 ? (S._errorCode = Ze.exception, S._errorString = Ze.description) : S._resetErr(), A = c ? Ze : Ze.result) : (l.Lib.Errors.InvalidResultFormat(S), A = ""), n.isFunction(d) && d(A);
      }, onError: function() {
        l.Lib.Errors.NetworkError(S), A = "", !n.page.bUnload && n.isFunction(_) && _();
      } }, !ne && u)
        Nu.bIE ? (M.dataType = "arraybuffer", M.onSuccess = function(xe, Fe, Qe) {
          var Ze, Ct, it, Bt = !1;
          if (Qe.responseHeadersString && Qe.responseHeadersString.indexOf("text/json") != -1 && (Bt = !0), Ze = Qe.responseData, S._resetErr(), A = !1, Ze && (Ct = new Uint8Array(Ze), Bt ? Ze = String.fromCharCode.apply(null, Ct) : (A = new Blob([Ct], { type: S.__strHttpContentTypeFieldValue }), (it = new Bu.ArrayBuffer()).append(Ct), A.md5 = it.end())), !Ze || Bt) {
            var yt, en = !1;
            if ((yt = Bt ? Ze : Qe.responseText).length > 0) {
              if (yt.charAt(0) == "{")
                try {
                  en = n.parse(yt), Bt = !0;
                } catch {
                  l.Lib.log(yt);
                }
              Bt ? en.exception !== void 0 && en.description !== void 0 ? (S._errorCode = en.exception, S._errorString = en.description, A = !1) : A = !0 : (Ct = new Uint8Array(yt), A = new Blob([Ct], { type: S.__strHttpContentTypeFieldValue }), (it = new Bu.ArrayBuffer()).append(Ct), A.md5 = it.end());
            }
          }
          n.isFunction(d) && d(A);
        }) : (ne || (M.dataType = "text", M.contentType = "text/plain; charset=x-user-defined", M.mimeType = "text/plain; charset=x-user-defined"), M.onSuccess = function(xe, Fe, Qe) {
          var Ze, Ct, it;
          if (S._resetErr(), (Ct = (Ze = Qe.responseText).length) > 0) {
            var Bt, yt = !1;
            if (Ze.charAt(0) == "{")
              try {
                Bt = n.parse(Ze), yt = !0;
              } catch {
                l.Lib.log(Ze);
              }
            if (yt)
              Bt.exception !== void 0 && Bt.description !== void 0 ? (S._errorCode = Bt.exception, S._errorString = Bt.description, A = !1) : A = !0;
            else {
              it = new Uint8Array(Ct);
              for (var en = 0; en < Ct; en++)
                it[en] = Ze.charCodeAt(en);
              A = new Blob([it], { type: S.__strHttpContentTypeFieldValue });
              var Ft = new Bu.ArrayBuffer();
              Ft.append(it), A.md5 = Ft.end();
            }
          } else
            A = "";
          n.isFunction(d) && d(A);
        });
      else if (ne && u) {
        M = { method: "POST", body: T }, Nu.bIE ? M.dataType = "arraybuffer" : M.fetchRaw = !0;
        var ue = n.fetch(v, M);
        return Nu.bIE || (ue = ue.then(function(xe) {
          var Fe = xe.headers.get("content-type");
          return Fe.indexOf("image/") >= 0 || Fe.indexOf("application/octet-stream") >= 0 ? xe.arrayBuffer() : xe.json();
        })), ue = ue.then(function(xe) {
          if (S._resetErr(), xe instanceof ArrayBuffer)
            return n.isFunction(d) && d(xe), void (xe = null);
          if (n.isObject(xe)) {
            var Fe = xe;
            if (Fe.exception !== void 0 && Fe.description !== void 0)
              S._errorCode = Fe.exception, S._errorString = Fe.description, n.isFunction(_) && _();
            else {
              var Qe = "";
              Fe.result && (Qe = Fe.result), n.isFunction(d) && d(Qe);
            }
          } else
            l.Lib.Errors.NetworkError(S), !n.page.bUnload && n.isFunction(_) && _();
        }, function(xe) {
          l.Lib.Errors.NetworkError(S), !n.page.bUnload && n.isFunction(_) && _();
        }), !0;
      }
      return ne || n.mix(M, { headers: { "X-Requested-With": !1 } }), Nu.bFileSystem && (M.crossDomain = !1), n.ajax(M), !!ne || A;
    } }, { key: "_innerSend", value: function(t, i, a, u, c) {
      var d = this, _ = null, v = null, T = !1, M = !0;
      if (!d._destroy) {
        if (t == "ActiveUI" ? M = !1 : T = on.isServerInvalid(d), T)
          return d._waitForConnect().then(function() {
            d._innerSend(t, i, a, u, c);
          }).catch(function(ue) {
            n.isFunction(c) && c(ue.code, ue.message);
          });
        n.isFunction(u) && (v = u), n.isFunction(c) && (_ = c);
        var A, S = Qu();
        if (l.DWT.ConnectWithSocket || t != "SaveSelectedImagesToBytes" && t != "ConvertToBlob") {
          var V = d._innerGetCurrentDocumentName();
          V == "" && d._ImgManager && (V = d._ImgManager.getWebViewer().GetDefaultFileName());
          var ne = { cmd: t, cmdId: S, sFun: v, fFun: _, currentFileName: V };
          A = d._innerSendByWS(t, i, ne, null, M);
        } else {
          var z = au(d._clientId, t, i, S);
          d._innerFunRaw(t, z, !0, !0, !0, v, _), A = n.Promise.resolve(!0);
        }
        return A;
      }
    } }, { key: "_innerSendCmd", value: function(t, i) {
      this._innerFunRaw(t, i, !0, !1, !0);
    } }, { key: "_innerFun", value: function(t, i) {
      var a;
      return a = this._innerFunRaw(t, i, !1, !1, !1), l.Lib.isArray(a) ? a[0] : a;
    } }, { key: "_innerFunRawV2", value: function(t, i, a, u) {
      var c, d = this;
      return d._resetErr(), d._isValid() ? on.isServerInvalid(d) ? u ? n.Promise.reject({ code: d._errorCode, message: d._errorString }) : d._waitForConnect().then(function() {
        return d._innerFunRawV2(t, i, a);
      }) : (c = { method: "post", body: au(d._clientId, t, i, 0), dataType: a }, l.DWT.ConnectWithSocket ? new n.Promise(function(_, v) {
        d._innerSend(t, i, !1, function(T) {
          var M = !1;
          try {
            M = n.isString(T) ? n.parse(T) : T;
          } catch {
          }
          if (M) {
            if (M instanceof Blob || M instanceof ArrayBuffer)
              return void _(M);
            M.exception !== void 0 && M.description !== void 0 && (d._errorCode = M.exception, d._errorString = M.description);
          }
          d._resetErr(), _(M);
        }, function(T) {
          if (l.Lib.Errors.NetworkError(d), T) {
            var M = [d._errorString, " ", T.errorString];
            T.httpCode && (M.push(" ("), M.push(T.httpCode), M.push(")")), d._errorString = M.join("");
          }
          v({ code: d._errorCode, message: d._errorString });
        });
      }) : n.fetch([d._httpUrl, "fa/", t].join(""), c).then(function(_) {
        var v = !1;
        try {
          v = n.isString(_) ? n.parse(_) : _;
        } catch {
        }
        if (v) {
          if (v instanceof Blob || v instanceof ArrayBuffer)
            return v;
          if (v.exception === void 0 || v.description === void 0)
            return d._resetErr(), v;
          d._errorCode = v.exception, d._errorString = v.description;
        } else
          l.Lib.Errors.InvalidResultFormat(d);
        throw { code: d._errorCode, message: d._errorString };
      }, function(_) {
        if (l.Lib.Errors.NetworkError(d), _) {
          var v = [d._errorString, " ", _.errorString];
          _.httpCode && (v.push(" ("), v.push(_.httpCode), v.push(")")), d._errorString = v.join("");
        }
        if (!n.page.bUnload)
          throw { code: d._errorCode, message: d._errorString };
      })) : n.Promise.reject({ code: d._errorCode, message: d._errorString });
    } }, { key: "_innerFunV2", value: function(t, i) {
      return this._innerFunRawV2(t, i, "text").then(function(a) {
        return a && l.Lib.isArray(a.result) && a.result.length > 0 ? a.result[0] : a;
      });
    } }, { key: "_innerSendByWS", value: function(t, i, a, u, c) {
      var d, _, v, T, M = this, A = Vg;
      a ? (d = a.cmdId, v = Oc(M._clientId, d), T = Oc(M._clientId, "")) : (d = 0, v = 0, T = 0);
      var S, V, ne, z, ue, xe, Fe, Qe, Ze, Ct = au(M._clientId, t, i, d), it = M._wsClient;
      if (_ = { client: it, userData: { stwain: M, command: a }, taskId: d, eventTaskId: v, lastEventTaskId: T }, !c) {
        try {
          it.request(Ct, A, _);
        } catch (Bt) {
          n.log(Bt);
        }
        return vt;
      }
      for (z = new ArrayBuffer(12), V = u && u.size ? u.size : 0, ne = (S = (Qe = new Blob([Ct])).size) + V, ue = new DataView(z), Fe = 0; Fe < 8 && ne; Fe++)
        ue.setUint8(Fe, ne % 256), ne = Math.floor(ne / 256);
      for (Fe = 0; Fe < 4 && S; Fe++)
        ue.setUint8(8 + Fe, S % 256), S = Math.floor(S / 256);
      return xe = new Blob([z, Qe]), Ze = it.request(xe, A, _), V > 0 && (Ze = it.request(u, A, _)), z = null, Qe = null, xe = null, ue = null, u = null, Ze;
    } }, { key: "_innerGetCurrentDocumentName", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._ImgManager ? t._ImgManager.GetCurrentFileName() : "");
    } }, { key: "_waitForConnect", value: function() {
      var t = this;
      return t.__wsRetry = 0, this._bReady ? n.Promise.resolve() : new n.Promise(function(i, a) {
        t._wsCheckResolve = i, t._wsCheckReject = a, Qd(t);
      });
    } }]), r;
  }(Wg);
  function au(o, e, r, t) {
    var i = [];
    i.push("{"), i.push('"id":"'), i.push(o), i.push('"'), t && (i.push(',"cmdId":"'), i.push(t), i.push('"')), i.push(',"method":"'), i.push(e), i.push('"'), i.push(',"module":"dwt","version":"');
    var a = [n.product.getDWTPrefix(), n.product.getServerVersionInfo()].join("");
    return i.push(a), i.push('"'), r != null && (i.push(',"parameter":'), i.push(r)), i.push("}"), i.join("");
  }
  function Oc(o, e) {
    return ["evt", o, e].join("_");
  }
  function Vg(o, e, r, t) {
    return Xd.apply(this, arguments);
  }
  function Xd() {
    return (Xd = Ln(he.mark(function o(e, r, t, i) {
      var a, u, c, d, _, v, T, M, A;
      return he.wrap(function(S) {
        for (; ; )
          switch (S.prev = S.next) {
            case 0:
              if (r != ui) {
                S.next = 4;
                break;
              }
              return S.abrupt("return", i.taskId);
            case 4:
              if (r != Ei) {
                S.next = 8;
                break;
              }
              return S.abrupt("return", i.eventTaskId);
            case 8:
              if (r != jn) {
                S.next = 17;
                break;
              }
              if (gi(e) !== "object") {
                S.next = 11;
                break;
              }
              return S.abrupt("return", e);
            case 11:
              if (!(e.indexOf("Version not found") >= 0)) {
                S.next = 14;
                break;
              }
              return S.abrupt("return", { cmdId: t ?? 0 });
            case 14:
              return S.abrupt("return", n.parse(e));
            case 17:
              if (r != ye) {
                S.next = 25;
                break;
              }
              if (!e) {
                S.next = 22;
                break;
              }
              if (!e.event) {
                S.next = 21;
                break;
              }
              return S.abrupt("return", 0);
            case 21:
              return S.abrupt("return", e.cmdId);
            case 22:
              return S.abrupt("return", e);
            case 25:
              if (r != oe) {
                S.next = 31;
                break;
              }
              if (!e || !e.event) {
                S.next = 28;
                break;
              }
              return S.abrupt("return", Oc(e.id, e.cmdId));
            case 28:
              return S.abrupt("return", 0);
            case 31:
              if (r != ae) {
                S.next = 59;
                break;
              }
              if (a = i == null ? void 0 : i.userData) {
                S.next = 35;
                break;
              }
              return S.abrupt("return", !1);
            case 35:
              if (u = a.stwain, c = a.command) {
                S.next = 39;
                break;
              }
              return S.abrupt("return", !1);
            case 39:
              if (u && n.isFunction(u.__OnWSMessage) && u.__OnWSMessage(e), gi(e) !== "object") {
                S.next = 44;
                break;
              }
              if (!l.DWT.ConnectWithSocket) {
                S.next = 44;
                break;
              }
              return c.cmd != "ConvertToBlob" && c.cmd != "GetImageByIndex" || c.sFun(e), S.abrupt("return", !0);
            case 44:
              if (!((d = e.replace(/\0/g, "")).indexOf('"method" : "Heartbeat"') >= 0)) {
                S.next = 47;
                break;
              }
              return S.abrupt("return", !0);
            case 47:
              if (!(d.indexOf('"method" : "EnableBuffer"') >= 0 || d.indexOf('"method" : "GetBuffer"') >= 0)) {
                S.next = 50;
                break;
              }
              return l.DWT.lwsproc(d, c), S.abrupt("return", !0);
            case 50:
              if (!(d.indexOf("Exception:") >= 0 || d.indexOf("Error") == 0)) {
                S.next = 57;
                break;
              }
              return _ = e, v = !1, n.log(_ + "@" + c.cmd), c.fFun && (v = c.fFun(_)), !v && u && n.isFunction(u.__OnPrintMsg) && u.__OnPrintMsg(_), S.abrupt("return", !0);
            case 57:
              S.next = 70;
              break;
            case 59:
              if (r != ie) {
                S.next = 70;
                break;
              }
              if (T = i == null ? void 0 : i.userData) {
                S.next = 63;
                break;
              }
              return S.abrupt("return", !1);
            case 63:
              if (M = T.stwain) {
                S.next = 66;
                break;
              }
              return S.abrupt("return", !1);
            case 66:
              if (A = T.command) {
                S.next = 69;
                break;
              }
              return S.abrupt("return", !1);
            case 69:
              return S.abrupt("return", Ug(M, e, A));
            case 70:
            case "end":
              return S.stop();
          }
      }, o);
    }))).apply(this, arguments);
  }
  function Ug(o, e, r) {
    var t = r == null ? void 0 : r.cmd;
    if (!e.event) {
      if (e.exception !== void 0 && e.description !== void 0 ? (o._errorCode = e.exception, o._errorString = e.description) : t != "StartScan" && t != "GetAddOnVersion" && (o._errorCode = 0, o._errorString = ""), t == "ReadBarcode" || t == "OCRRecognize" || e.request && e.request.method == "OCRProRecognize")
        return r.sFun && r.sFun(e), !0;
      if (t == "ActiveUI" || t == "VersionInfo" || t == "ConvertToBase64" || t == "SaveSelectedImagesToBase64Binary" || t == "ConvertToBlob")
        return r.sFun && n.isArray(e.result) && e.result.length > 0 ? (r.sFun(e.result), !0) : (r.fFun(e.result), !0);
      if (t == "ShowFileDialog" || t == "SplitTiff" || t == "SplitPDF" || t == "EncodeAsBase64" || t == "ProductKey" || t == "GetSourceNames" || t == "GetSkewAngle" || t == "GetImageInfo") {
        if (r.sFun)
          return r.sFun(e.result), !0;
      } else if (t == "GetLicenseInfo" && n.isArray(e.Detail)) {
        if (r.sFun)
          return r.sFun(e), !0;
      } else if (t == "SetCapabilities")
        return "exception" in e && e.exception != "0" ? (e.result.errorCode && e.result.errorString ? (o._errorCode = e.result.errorCode, o._errorString = e.result.errorString) : (o._errorCode = e.exception, o._errorString = e.description), r.fFun && r.fFun(e.result), e = null, !0) : (r.sFun && r.sFun(e.result), e = null, !0);
      if (e.result && e.result.length && (e.result[0] == "1" || e.result[0] == 1))
        r.sFun && r.sFun();
      else if (e.exception) {
        var i = !1;
        r.fFun && (i = r.fFun(o._errorString)), !i && e.exception && e.exception < 0 && e.exception != -2115 && n.isFunction(o.__OnPrintMsg) && o.__OnPrintMsg(o._errorString);
      } else {
        if (t == "LoadImage" || t == "LoadImageEx" || t == "LoadImageFromBytes" || t == "LoadImageFromBase64Binary" || t == "LoadDibFromClipboard" || t == "FTPDownload" || t == "FTPDownloadEx")
          return r.sFun && r.sFun(e.result), e = null, !0;
        r.fFun && r.fFun(Ra(["result:"], e.result));
      }
      return !0;
    }
    e.event == "OnBitmapChanged" ? on.handleOnBitmapChangedEvent(o, e, r.currentFileName) : function(a, u, c) {
      var d = u.result[0], _ = vt;
      n.each(on.EVENTS, function(v, T) {
        if (u.event === v) {
          var M = ["_", v].join("");
          return _ = Gt, n.isFunction(a[M]) && a[M](u.result, u), vt;
        }
      }), _ ? (n.log("handled event:" + u.event), n.each(on.SEND_BACK_EVENTS, function(v, T) {
        if (u.event === v)
          return n.log("sendback event:" + u.event), a._innerSendByWS(u.event, zt(d), null, null, Gt), vt;
      })) : (n.each(n.Addon_Events, function(v, T) {
        if (u.event === v) {
          var M = ["_", v].join("");
          return _ = Gt, n.isFunction(a[M]) && a[M](u.result), vt;
        }
      }), _ && (n.log("handled addon event:" + u.event), n.each(n.Addon_Sendback_Events, function(v, T) {
        if (u.event === v)
          return n.log("sendback addon event:" + u.event), a._innerSendByWS(u.event, zt(d), null, null, Gt), vt;
      })));
    }(o, e, r.currentFileName);
  }
  function Qd(o) {
    if (o._bReady)
      o._wsCheckResolve();
    else {
      if (l.DWT.bConnectCanceled)
        return n.asyncQueue.stop(), n.Errors.UserCanceled(o), void o._wsCheckReject({ code: o._errorCode, message: o._errorString });
      if (o.__wsRetry > 10)
        return n.Errors.ThrowString_FailedToCreateDWTObject(o), void o._wsCheckReject({ code: o._errorCode, message: o._errorString });
      o.__wsRetry++, setTimeout(function() {
        Qd(o);
      }, 1100);
    }
  }
  function Gg(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  var Qa = l.navInfoSync;
  n.html5.Funs;
  var jg = { upload: "Uploading...", download: "Downloading...", load: "Processing...", decode: "Processing...", decodeTIFF: "Processing tiff...", decodePDF: "Processing pdf...", encodeTIFF: "Processing tiff...", encodePDF: "Processing pdf...", encode: "Processing..." }, Zd = function(o, e) {
    if (n.config.bDiscardBlankImage) {
      var r = o._ImgManager.getCurrentImageIndex();
      o.IsBlankImage(r) && o.RemoveImage(r);
      var t = ["Blank Discard (", e, "): ", o.ErrorString].join("");
      n.isFunction(o.__OnPrintMsg) && o.__OnPrintMsg(t);
    }
  }, zg = function(o) {
    Hr(r, o);
    var e = Gg(r);
    function r() {
      return Gn(this, r), e.apply(this, arguments);
    }
    return zn(r, [{ key: "_innerRegisterEvent", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      var u = ["__", t].join("");
      if (t == "OnPostTransferAsync") {
        a[u] || (a[u] = {});
        var c = a[u], d = n.guid();
        return c[d] = i, d;
      }
      return a[u] = i, !0;
    } }, { key: "_unregisterEvent", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      var u = ["__", t].join("");
      if (t == "OnPostTransferAsync") {
        var c = a[u];
        if (n.isObject(c)) {
          if (i) {
            var d;
            if (n.isString(i))
              return delete c[i], Gt;
            if (n.isFunction(i)) {
              for (d = 0; d < c.length; d++)
                if (i == c[d])
                  return c.splice(d, 1), Gt;
            }
          }
          a[u] = null;
        }
      } else
        a[u] = null;
      return Gt;
    } }, { key: "_OnRemoteScanStatusAsync", value: function(t) {
      var i, a, u, c, d, _, v, T = this;
      if (t && t.length >= 2) {
        try {
          var M = new String(t[1]);
          i = n.parse(M);
        } catch (S) {
          n.error(S.message), n.log("parse json failed: " + t[1]);
        }
        i || (i = { sequence: 0, screen: [] });
      }
      if (i && i.sequence)
        if (i.sequence > 0 && i.screen && i.screen.length > 0) {
          if (a = i.screen, c = i.sequence, _ = i.wnds, v = (u = a[0]).img, n.isString(v) && v != "" && (d = u.wnd), c && d) {
            var A = n.one(".ds-img-screen");
            A && T._acquireDivEL && (T._acquireDivEL.evtFun && (n.removeEventListener(A[0], "mouseup", T._acquireDivEL.evtFun), T._acquireDivEL.evtFun = null), A[0].src = v, T._acquireDivEL.evtFun = function(S) {
              _ || (_ = "0");
              var V = n.stringify({ sequence: c, wnds: _, wnd: d + "", type: 2, x: S.offsetX, y: S.offsetY });
              T._innerSendCmd("SendEventToScannerUI", ["[", V, "]"].join(""));
            }, n.addEventListener(A[0], "mouseup", T._acquireDivEL.evtFun));
          }
        } else
          T.__closeRemoteScanUI(!1);
      return n.isFunction(T.__OnRemoteScanStatusAsync) && T.__OnRemoteScanStatusAsync(i), !0;
    } }, { key: "_OnConsumed", value: function(t) {
    } }, { key: "_OnBitmapChanged", value: function(t, i, a) {
      var u = this, c = t[0] == "10", d = t[0] == "0", _ = t[0] == "c2", v = d || _ || c, T = t[1].split(","), M = t[2], A = t[3], S = u.__maxImagesInBuffer, V = a, ne = -1, z = [];
      if (n.log("_OnBitmapChanged.currentFileName=" + V), V || (V = u._innerGetCurrentDocumentName()) == "" && u._ImgManager && (V = u._ImgManager.getWebViewer().GetDefaultFileName()), c) {
        if (t.length > 5) {
          var ue = t[5];
          z.push(ue), !u._blts || M != 1 && M != 2 || l.Lib.isUndef(ue.verify) || (ne = l.DWT.lgct(ue.verify), n.isFunction(u.__OnLtsverify) && u.__OnLtsverify(ne, 1, l.DWT.EnumInstance.dwt_browser), l.DWT.lavrf(ne, 1, l.DWT.EnumInstance.dwt_browser, ""));
        }
      } else if (_)
        t.length > 5 && (z = t[5]), n.isArray(z) || (z = []);
      else {
        var xe = {};
        if (t.length > 5 && (xe.width = t[5]), t.length > 6 && (xe.height = t[6]), t.length > 7 && (xe.bitDepth = t[7]), t.length > 8 && (xe.resolutionX = t[8]), t.length > 9 && (xe.resolutionY = t[9]), t.length > 10 && (ne = t[10]), z.push(xe), ne > -1 && u._blts && (M == 1 || M == 2)) {
          var Fe = l.DWT.lgct(ne);
          n.isFunction(u.__OnLtsverify) && u.__OnLtsverify(Fe, 1);
        }
      }
      if (n.log("OnBitmapChanged:" + t), M == 2 || M == 1 && !u.__IfAppendImage)
        n.each(T, function(yt, en) {
          var Ft, st = parseInt(yt), nt = u._ImgManager.getCurrentImageIndex();
          if ((Ft = en < z.length && z[en] ? z[en] : {}).currentFileName = V, isNaN(st) || st < 0)
            return !0;
          if (v)
            u._aryBitmapCache.push(st);
          else
            for (var ft = 0; ft < u._aryBitmapCache.length; ft++)
              if (u._aryBitmapCache[ft] == st)
                return u._aryBitmapCache.splice(ft, 1), !0;
          if (u._ImgManager.exists(st))
            return !0;
          u.__insertingIndex > -1 && (nt = u.__insertingIndex), nt == -1 && (nt = 0), u._ImgManager.insertBefore(nt, S, st, Ft), u.__insertingIndex > -1 && (u.__insertingIndex = u.__insertingIndex + 1);
        }), n.isFunction(u.__OnRefreshUI) && u.__OnRefreshUI(u._ImgManager.getCurrentImageIndex(), u._ImgManager.count());
      else if (M == 1 && u.__IfAppendImage)
        n.each(T, function(yt, en) {
          var Ft, st = parseInt(yt);
          if (isNaN(st) || st < 0)
            return !0;
          if ((Ft = en < z.length && z[en] ? z[en] : {}).currentFileName = V, n.log("metaDataObj.currentFileName=" + V), v)
            u._aryBitmapCache.push(st);
          else
            for (var nt = 0; nt < u._aryBitmapCache.length; nt++)
              if (u._aryBitmapCache[nt] == st)
                return u._aryBitmapCache.splice(nt, 1), !0;
          if (u._ImgManager.exists(st))
            return !0;
          u._ImgManager.append(S, st, Ft);
        }), n.isFunction(u.__OnRefreshUI) && u.__OnRefreshUI(u._ImgManager.getCurrentImageIndex(), u._ImgManager.count());
      else if (M == 3 && v) {
        var Qe = !1;
        T.length == 1 && T[0] == -1 && (Qe = !0), Qe ? u._ImgManager.clear() : n.each(T, function(yt, en) {
          var Ft = parseInt(yt);
          if (isNaN(Ft) || Ft < 0)
            return !0;
          u._ImgManager.removeByServerId(V, Ft);
        }), n.isFunction(u.__OnRefreshUI) && u.__OnRefreshUI(u._ImgManager.getCurrentImageIndex(), u._ImgManager.count());
      } else if (M == 4)
        n.each(T, function(yt, en) {
          var Ft, st = parseInt(yt);
          if (isNaN(st) || st < 0)
            return !0;
          if ((Ft = en < z.length && z[en] ? z[en] : {}).currentFileName = V, st >= 0 && !u.__bLoadingImage) {
            u._isBindViewer() && (u._ImgManager.bImageJustChangedInEditor == 0 ? u._ImgManager.bImageChangedInViewer = !0 : (u._ImgManager.bImageJustChangedInEditor = !1, u._ImgManager.bImageChangedInViewer = !1));
            var nt = u._ImgManager.convertServerIdToClientIndex(st);
            nt > -1 && u.__onRefreshUI(nt, u._ImgManager.count(), !0, Ft);
          }
        });
      else if (M == 5) {
        var Ze;
        A >= 0 && !u.__bLoadingImage && ((Ze = 0 < z.length && z[0] ? z[0] : {}).currentFileName = V, u.__IfAppendImage == 0 && u.__onRefreshUI(A, u._ImgManager.count(), !0, Ze), u._ImgManager.refresh(A, u._ImgManager.count(), !1, Ze));
      }
      if (n.isFunction(u.__OnBitmapChanged)) {
        if (!c && (Qa.bFirefox && !v || !Qa.bFirefox && v))
          return !0;
        var Ct = [];
        n.each(T, function(yt) {
          var en, Ft = parseInt(yt);
          if (isNaN(Ft) || Ft < 0)
            return !0;
          (en = u._ImgManager.convertServerIdToClientIndex(Ft)) > -1 && Ct.push(en);
        });
        var it = u._ImgManager.getCurrentImageIndex(), Bt = M;
        M == 1 && (Bt = u.__IfAppendImage ? 1 : 2), u.__OnBitmapChanged(Ct, Bt, it, u._ImgManager.count());
      }
    } }, { key: "_OnPostLoad", value: function(t, i) {
      var a, u, c, d, _ = this;
      i !== void 0 && i.exception !== void 0 && i.description !== void 0 && (_._errorCode = i.exception, _._errorString = i.description), n.log("OnPostLoad Results:"), u = t[1].split(","), a = n.base64.decode(u[0]), c = n.base64.decode(u[1]), n.log(a), n.log(c), n.log(u[2]), Zd(_, "On PostLoad"), (d = _._ImgManager.getCurrentImageIndex()) >= 0 && _.__onRefreshUI(d), n.isFunction(_.__OnPostLoad) && _.__OnPostLoad(a, c, u[2]);
    } }, { key: "_OnPostTransfer", value: function(t) {
      var i = this;
      n.log("On PostTransfer Results:" + t), Zd(i, "On PostTransfer"), n.isFunction(i.__OnPostTransfer) && i.__OnPostTransfer();
    } }, { key: "_OnPostTransferAsync", value: function(t) {
      var i, a = this;
      if (n.log("On PostTransfer Async Results:" + t), t && t.length >= 2)
        try {
          var u = String(t[1]).replace(/\\/g, "\\\\");
          (i = n.parse(u)).imageId && (i.imageId = a._objImageIndexManager.convertServerIdToGuid(i.imageId));
        } catch {
          n.log(t);
        }
      if (i || (i = { imageId: -1 }), a.__OnPostTransferAsync)
        return function(c, d) {
          for (var _ = 0, v = Object.keys(c), T = n.Promise.resolve(), M = function() {
            var A = c[v[_]];
            n.isFunction(A) && (T = T.then(function() {
              return A(d);
            }));
          }; _ < v.length; _++)
            M();
          return T;
        }(a.__OnPostTransferAsync, i);
    } }, { key: "_OnPreAllTransfersAsync", value: function(t) {
      var i = this;
      if (n.isFunction(i.__OnPreAllTransfersAsync)) {
        var a = { event: "beforeAcquire", result: {} };
        try {
          n.isArray(t) && t.length > 1 && (a = n.parse(t[1]));
        } catch {
        }
        setTimeout(function() {
          i.__OnPreAllTransfersAsync(a);
        }, 10);
      }
    } }, { key: "_OnPostAllTransfers", value: function(t) {
      var i = this;
      t.length >= 2 && i._errorCode == 0 && (i._errorCode = t[1], i._errorString = t[2]), n.log("On PostAllTransfers Results:" + t), i.__bLoadingImage = !1, i.__bAcquireImageNow = !1, i.__closeRemoteScanUI(!0), n.isFunction(i.__OnPostAllTransfers) && i.__OnPostAllTransfers(), i._blts && l.DWT.lcvrf(i);
    } }, { key: "_OnResult", value: function(t) {
      var i = t[1];
      n.isFunction(this.__OnResult) && this.__OnResult(i);
    } }, { key: "_OnTransferCancelled", value: function(t) {
      var i = this;
      i._ImgManager.getCurrentImageIndex(), i._ImgManager.count(), i.__bLoadingImage = !1, i.__bAcquireImageNow = !1, n.isFunction(i.__OnTransferCancelled) && i.__OnTransferCancelled();
    } }, { key: "_OnTransferError", value: function(t) {
      n.isFunction(this.__OnTransferError) && this.__OnTransferError();
    } }, { key: "_OnSourceUIClose", value: function(t) {
      var i = this;
      i.__closeRemoteScanUI(!0), n.isFunction(i.__OnSourceUIClose) && i.__OnSourceUIClose();
    } }, { key: "_OnPreTransfer", value: function(t) {
      n.isFunction(this.__OnPreTransfer) && this.__OnPreTransfer();
    } }, { key: "_OnPreAllTransfers", value: function(t) {
      n.isFunction(this.__OnPreAllTransfers) && this.__OnPreAllTransfers();
    } }, { key: "_OnPercentDone", value: function(t) {
      var i, a, u, c, d, _ = this, v = !1, T = l.Lib, M = !1, A = 0;
      if (T.isArray(t) && t.length > 2 && (a = t[0], A = t[1], u = t[2], t.length > 3 && (c = t[3]), t.length > 4 && (d = t[4]), t.length > 5 && t[5], i = A, A < 0 ? i = 0 : A > 100 && (i = 100), i = Math.floor(i), T.cancelFrom != ei && T.cancelFrom != Qi && T.cancelFrom != Gi || (M = d)), _._bServerPercentDone || a == 0) {
        if ((A > 0 || A == 0) && (T.cancelFrom != ei && T.cancelFrom != Qi || c == "http" && (v = !0), T.cancelFrom != Zi && T.cancelFrom != _i || d == "ftp" && (v = !0)), T.cancelFrom == Li && _.__IfShowProgressBar == 1 || T.cancelFrom != Li && _.__IfShowCancelDialogWhenImageTransfer == 1) {
          var S, V = T.one(".dynamsoft-progressBar"), ne = T.one(".dynamsoft-status"), z = T.one(".dynamsoft-finalMessage"), ue = T.one(".dynamsoft-desc");
          if (T.cancelFrom == Zi || T.cancelFrom == _i) {
            var xe = c;
            xe == 0 ? da(_, !1) : xe == 1 && da(_, !0);
          }
          if (A < 0 ? (T.progressMessage = u, S = T.progressMessage) : S = u != "" && u != "1/1" ? T.progressMessage + "(" + u + ")" : T.progressMessage, z && z.getEL()) {
            var Fe = "", Qe = "";
            S.indexOf(" ...") && (S = S.replace(" ...", "...")), S.indexOf("(") != -1 ? (Fe = S.substr(0, S.indexOf("(")), Qe = S.substr(S.indexOf("("))) : Fe = S, T.each(jg, function(Ze, Ct) {
              Ze.indexOf(Fe) != -1 && (S = l.Lib.product.CustomizableDisplayInfo.customProgressText[Ct] + Qe);
            }), S == "" && (S = "&nbsp;"), z.html(S);
          }
          M != 0 ? (M == "" || T.isUndef(M) ? M = "&nbsp;" : T.isString(M) && M.length > 30 && (M = M.substring(0, 30) + "..."), ue.html(M)) : ue.html("&nbsp;"), (i || i === 0) && (ne && ne.getEL() && ne.html(i + "%"), V && V.getEL() && (Qa.bIE ? V[0].objProgressBar ? V[0].objProgressBar.setValue(i) : V[0].value = i : (Qa.bEdge && (V[0].style.display = ""), V[0].value = i))), i && (i >= 100 || T.dlgRef <= 0) && (setTimeout(function() {
            V && V.getEL() && (Qa.bIE ? V[0].objProgressBar ? V[0].objProgressBar.setValue(0) : V[0].value = 0 : (Qa.bEdge && (V[0].style.display = "none"), V[0].value = 0));
          }, 1e3), T.dlgRef <= 0) && T.closeProgress(_, "OnPercentDone");
        }
        v == 1 && (T.isFunction(_.__OnInternetTransferPercentage) && _.__OnInternetTransferPercentage(i, !1), T.isFunction(_.__OnInternetTransferPercentageEx) && _.__OnInternetTransferPercentageEx(i, !1)), T.isFunction(_.__OnPercentDone) && _.__OnPercentDone();
      }
    } }, { key: "_OnGetFilePath", value: function(t) {
      var i, a, u, c = this;
      i = t[1].split(","), n.log("On GetFilePath Results:" + t), a = n.base64.decode(i[3]), u = n.base64.decode(i[4]), i[2] == "-1032" && (i[2] = "-1", a = u = ""), n.isFunction(c.__OnGetFilePath) && c.__OnGetFilePath(1 * i[0], 1 * i[1], 1 * i[2], a, u), c.__bOpenFileNow = !1;
    } }, { key: "__GetLoadEventsNum", value: function() {
      var t = 0;
      return n.isFunction(this.__OnPostLoad) && (t |= 1), n.isFunction(this.__OnGetFilePath) && (t |= 2), t;
    } }, { key: "_OnPageFocus", value: function(t) {
      var i = this;
      if (i._bPageFocus = !0, (i._isMobileMode() || i._bReady) && Qa.bWin && !i._isMobileMode() && l.DWT.IfAlwaysFocusOnPopupWindow) {
        var a = n.stringify({ sequence: 0, wnds: 0, wnd: "0", type: 3, x: 0, y: 0 });
        (i.__bAcquireImageNow || t || i.__bOpenFileNow) && (i._bServerAlwaysFocusOnPopupWindow = !0, i._innerSendCmd("SendEventToScannerUI", ["[", a, "]"].join("")));
      }
    } }, { key: "_OnPageBlur", value: function(t) {
      var i = this;
      if (Qa.bWin && !i._isMobileMode() && i._bReady) {
        var a = n.stringify({ sequence: 0, wnds: 0, wnd: "0", type: 4, x: 0, y: 0 });
        (i._bPageFocus != 0 || t) && (i._bPageFocus = !1, (i.__bAcquireImageNow || t || i.__bOpenFileNow) && (i._bServerAlwaysFocusOnPopupWindow = !1, i._innerSendCmd("SendEventToScannerUI", ["[", a, "]"].join(""))));
      }
    } }, { key: "__closeRemoteScanUI", value: function(t) {
      var i = this;
      if (i._acquireDivEL) {
        var a = n.one(".ds-img-screen");
        i._acquireDivEL.evtFun ? (a && a.length > 0 && n.removeEventListener(a[0], "mouseup", i._acquireDivEL.evtFun), i._acquireDivEL.evtFun = null) : a && a.length > 0 && n.removeEventListener(a[0], "mouseup"), a && a.length > 0 && (a[0].src = ""), t && (document.body.removeChild(i._acquireDivEL), i._acquireDivEL = null);
      }
    } }, { key: "__onRefreshUI", value: function(t, i, a, u) {
      var c = this;
      return a && c._ImgManager.refresh(t, c._ImgManager.count(), !0, u), l.Lib.isFunction(c.__OnRefreshUI) && c.__OnRefreshUI(c._ImgManager.getCurrentImageIndex(), c._ImgManager.count()), !0;
    } }]), r;
  }(Ng);
  function Hg(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  var Kg = l.navInfoSync, Yg = function(o) {
    Hr(r, o);
    var e = Hg(r);
    function r() {
      return Gn(this, r), e.apply(this, arguments);
    }
    return zn(r, [{ key: "_getVersionInfoAsync", value: function() {
      return this._innerFunV2("VersionInfo");
    } }, { key: "__innerLoadImage", value: function(t, i, a, u, c, d, _) {
      var v = this;
      if (!n.License.checkProductKey(v, { Core: !0 }) || !n.License.checkPDFProductKeyWhenNeeds(v, a))
        return n.isFunction(_) && _(v._errorCode, v._getErrorString()), !1;
      if (n.isFunction(d))
        return v._bRemoteMode && v._getIfShowFileDialog() ? (n.Errors.RemoteServiceCannotSetShowFileDialog(v), { code: v._errorCode, message: v._getErrorString() }) : v.__innerAcquireImage(t, i, u, !0, d, _);
      if (v._bRemoteMode && v._getIfShowFileDialog())
        return n.Errors.RemoteServiceCannotSetShowFileDialog(v), { code: v._errorCode, message: v._getErrorString() };
      var T = v._innerGetCurrentDocumentName();
      return T == "" && v._ImgManager && (T = v._ImgManager.getWebViewer().GetDefaultFileName()), v.__innerLoadImageFun(t, i, c, T);
    } }, { key: "__innerLoadImageFun", value: function(t, i, a, u) {
      var c, d = this, _ = !0;
      if (c = d._innerFunRaw(t, i, !1, !1, !0), d.__bOpenFileNow = !1, n.isArray(c.result) && c.result.length > 0) {
        var v = "", T = [];
        if (a) {
          var M = c.result[0];
          n.isObject(M) ? (v = M.ids, T = M.metaData) : M != -1 || t != "LoadImage" && t != "LoadImageEx" && t != "FTPDownloadEx" && t != "FTPDownload" && t != "LoadImageFromBase64Binary" || (_ = !1);
        } else
          v = c.result.join(",");
        if (n.isArray(T) || (T = []), d._OnBitmapChanged(["c2", v, 1, d._ImgManager.getCurrentImageIndex(), d._ImgManager.count(), T], null, u), _)
          return d._blts && l.DWT.lcvrf(d), !0;
      }
      return l.Lib.Errors.bImageOnlyError_NotPurelyPDF(d._errorCode) && l.Lib.Errors.LicenseNoPDF(d), !1;
    } }, { key: "_initRemoteDiv", value: function() {
      if (!this._acquireDivEL) {
        var t = document.createElement("div");
        t.style.position = "absolute", t.style.zIndex = "510000", t.style.left = "0", t.style.top = "0";
        var i = document.createElement("img");
        i.className = "ds-img-screen", t.appendChild(i), document.body.appendChild(t), this._acquireDivEL = t;
      }
    } }, { key: "__innerAcquireImage", value: function(t, i, a, u, c, d) {
      var _ = this, v = t == "LoadImage" || t == "LoadImageEx" || t == "GenerateURLForUploadData", T = v || t == "LoadDibFromClipboard", M = function(A) {
        _.__bLoadingImage = !1, _.__bAcquireImageNow = !1, _.__bOpenFileNow = !1, _.__closeRemoteScanUI(!0);
        var S = _._ImgManager.getCurrentImageIndex();
        return S >= 0 && _.__onRefreshUI(S), l.Lib.Errors.bImageOnlyError_NotPurelyPDF(_._errorCode) && l.Lib.Errors.LicenseNoPDF(_), n.isFunction(d) && d(_._errorCode, _._getErrorString()), v ? l.Lib.closeProgress(_, t) : Yn(t), A && l.Lib.error(A), !1;
      };
      return v ? l.Lib.showProgress(_, t, !1) : fr(t, _), _._innerSend(t, i, !0, function(A) {
        if (_.__bLoadingImage = !1, _.__bOpenFileNow = !1, _.__closeRemoteScanUI(!0), v) {
          if (l.Lib.closeProgress(_, t), _._isBindViewer()) {
            var S = _._ImgManager.getCurrentImageIndex();
            S >= 0 && _.__onRefreshUI(S);
          }
        } else
          Yn(t);
        n.isFunction(c) && c(A), T && _._blts && l.DWT.lcvrf(_);
      }, function() {
        v ? l.Lib.closeProgress(null, "") : Yn(t), n.isFunction(M) && M();
      }), !0;
    } }, { key: "__innerSaveImage", value: function(t, i, a, u) {
      var c = this;
      return c._OnPercentDone([0, -1, l.MSG.Encoding]), c._bRemoteMode || (l.DWT.IfAlwaysFocusOnPopupWindow ? c._OnPageFocus(!0) : c._OnPageBlur(!0)), n.isFunction(u) ? c._bRemoteMode && c._getIfShowFileDialog() ? (n.Errors.RemoteServiceCannotSetShowFileDialog(c), { code: c._errorCode, message: c._getErrorString() }) : (l.Lib.showProgress(c, t, !1), this._innerSend(t, i, !0, function() {
        l.Lib.closeProgress(c, t), n.isFunction(a) && a();
      }, function(d) {
        return n.isFunction(u) && u(c._errorCode, c._getErrorString()), l.Lib.closeProgress(c, t), d && l.Lib.error(d), !0;
      }), !0) : c._bRemoteMode ? c._serviceSyncMethodNotSupport(t) : this._innerFun(t, i);
    } }, { key: "__captureImage", value: function(t, i, a, u) {
      var c = this.__GetLoadEventsNum();
      return this.__LoadImageFromBytesV2(t, i, "", !0, 0, 0, !0, c, a, u);
    } }, { key: "__LoadImageFromBytes", value: function(t, i, a, u, c, d, _, v) {
      return this.__LoadImageFromBytesV2(t, i, a, u, _, v, !1, 0, c, d);
    } }, { key: "__LoadImageFromBytesV1", value: function(t, i, a, u, c, d, _) {
      return this.__LoadImageFromBytesV2(t, i, a, c, 0, 0, !1, u, d, _);
    } }, { key: "__LoadImageFromBytesV2", value: function(t, i, a, u, c, d, _, v, T, M) {
      var A, S = this, V = "LoadImageFromBytes", ne = i || 3, z = t.size || t.length, ue = t.name, xe = !0, Fe = 1;
      !isNaN(c) && c >= 0 && !isNaN(d) && d > 0 ? Fe = 0 : (c = 0, d = 0), A = ["[", z, ",", 0, ",", ne, ',"', a, '",', c, ",", d, ",", v, ",", Fe, ",", _ ? "true" : "false", "]"].join("");
      var Qe = function() {
        if (l.Lib.closeProgress(S, V), S.__bLoadingImage = !1, xe) {
          var Ze = S._ImgManager.getCurrentImageIndex();
          Ze >= 0 && S.__onRefreshUI(Ze);
        }
        return n.isFunction(M) && M(S._errorCode, S._getErrorString(), ue), !1;
      };
      return (n.License.checkProductKey(S, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(S, { Webcam: !0 }, !0)) && n.License.checkPDFProductKeyWhenNeeds(S, i) ? z === 0 ? (l.Lib.Errors.ImageFileLengthCannotZero(S), xe = !1, Qe()) : (da(S, !1), this._innerSendBlob(V, A, t, u, Fe, function(Ze) {
        if ((c + z == d || d <= 0 || isNaN(d)) && l.Lib.closeProgress(S, V), S.__bLoadingImage = !1, S._isBindViewer()) {
          var Ct = S._ImgManager.getCurrentImageIndex();
          u && Ct >= 0 && S.__onRefreshUI(Ct);
        }
        if (n.isFunction(T)) {
          var it = Ze;
          if (n.isArray(it) && (it = it.length > 0 ? it[0] : {}), u)
            setTimeout(function() {
              T(ue, it);
            }, 30);
          else
            try {
              T(ue, it);
            } catch (Bt) {
              l.Lib.error(Bt.message);
            }
        }
        return S._blts && l.DWT.lcvrf(S), !0;
      }, Qe)) : (xe = !1, Qe());
    } }, { key: "_innerSendBlob", value: function(t, i, a, u, c, d, _) {
      var v = this, T = !1;
      if (on.isServerInvalid(v))
        return v._waitForConnect().then(function() {
          v._innerSendBlob(t, i, a, u, c, d, _);
        });
      if (n.isFunction(_) && (T = _), !u) {
        var M, A, S, V, ne = [], z = "";
        return v._resetErr(), v._isValid() ? (A = [v._httpUrl, "f/", t].join(""), S = au(v._clientId, t, i, 0), S += `\r
\r
`, V = { method: "POST", url: A, processData: !1, data: S += l.Lib.base64.encodeArray(a), async: !1, onSuccess: function(Fe, Qe, Ze) {
          var Ct = !1, it = !1;
          try {
            Ct = n.isString(Fe) && Ze.getResponseHeader("content-type") === "text/json" ? n.parse(Fe) : Fe;
          } catch {
          }
          if (Ct != null && (Ct.exception !== void 0 && Ct.description !== void 0 ? (v._errorCode = Ct.exception, v._errorString = Ct.description) : v._resetErr(), (M = Ct.result) && n.isArray(M) && M.length >= 1))
            if (c) {
              var Bt = M[0];
              Bt && n.isObject(Bt) && (z = Bt.ids, n.isArray(Bt.metaData) && (ne = Bt.metaData), it = !0);
            } else
              z = M.join(","), ne = [], it = !0;
          it || (l.Lib.Errors.InvalidResultFormat(v), M = "", ne = []);
        }, onError: function() {
          l.Lib.Errors.NetworkError(v), M = "", ne = [];
        } }, n.mix(V, { headers: { "X-Requested-With": !1 } }), Kg.bFileSystem && (V.crossDomain = !1), n.ajax(V), v._errorCode == 0 ? (z.length > 0 && v._OnBitmapChanged(["c2", z, 1, v._ImgManager.getCurrentImageIndex(), v._ImgManager.count(), ne], null, a.currentFileName), n.isFunction(d) && d()) : n.isFunction(T) && T(), M) : !1;
      }
      var ue = Qu(), xe = { cmd: t, cmdId: ue, sFun: function(Fe) {
        n.isFunction(d) && d(Fe);
      }, fFun: T, currentFileName: a.currentFileName };
      v._innerSendByWS(t, i, xe, a, !0), a = null;
    } }, { key: "_innerActiveUI", value: function(t, i) {
      var a = this, u = n.detect.ssl, c = function() {
        var A = 300, S = l.DWT.RemoteScanConfig;
        return S && n.isNumber(S.sessionTimeout) && S.sessionTimeout > 0 && (A = S.sessionTimeout), A;
      }();
      if (a._bRemoteMode || (c = 5), a._blts) {
        var d, _, v, T, M = "";
        a._bRemoteMode && (M = (_ = (v = a._dmService) === null || v === void 0 || (T = v.attrs) === null || T === void 0 ? void 0 : T.UUID) !== null && _ !== void 0 ? _ : ""), d = l.DWT.li({ instanceMode: l.DWT.EnumInstance.dwt_desktop }, M), a._innerSend("ActiveUI", zt(l.Lib.env.WSVersion, l.Lib.env.WSSession, 1, d, u, 1, c), !1, t, i), a = null;
      } else
        a._innerSend("ActiveUI", zt(l.Lib.env.WSVersion, l.Lib.env.WSSession, 1, "", u, 1, c), !1, t, i);
      return !0;
    } }, { key: "_getIfShowFileDialog", value: function() {
      return this._resetErr(), this._isValid() ? this._isMobileMode() ? this._mobileNotSupport("IfShowFileDialog") : this._innerFun("IfShowFileDialog") : vt;
    } }, { key: "_innerLoadImageFromBinary", value: function(t, i, a, u, c) {
      var d, _ = this, v = i;
      if (!n.License.checkProductKey(_, { Core: !0 }))
        return n.isFunction(c) && c(_._errorCode, _._getErrorString()), !1;
      if (!t || t == "")
        return n.Errors.ParameterCannotEmpty(_), n.isFunction(c) && c(_._errorCode, _._getErrorString()), !1;
      var T = t.currentFileName;
      if (T || (T = _._innerGetCurrentDocumentName()) == "" && _._ImgManager && (T = _._ImgManager.getWebViewer().GetDefaultFileName()), t instanceof FileList) {
        if (t.length == 1)
          return t[0].currentFileName = T, _._innerLoadImageFromBinary(t[0], v, a, u, c);
        if (t.length > 1) {
          var M;
          for (n.asyncQueue.stop(), M = 0; M < t.length; M++)
            t[M].currentFileName = T, n.asyncQueue.pushToDo(_, "_innerLoadImageFromBinary", [t[M], v, a, u, c]);
          return n.asyncQueue.start(), !0;
        }
        return n.Errors.ParameterCannotEmpty(_), n.isFunction(c) && c(_._errorCode, _._getErrorString()), !1;
      }
      if (window.ReadableStream && t instanceof ReadableStream ? d = new Response(t) : window.Response && t instanceof Response && (d = t), _._isTwainServiceType() || _._isDMServiceType())
        if (d)
          d.arrayBuffer().then(function(z) {
            var ue = new Blob([z]), xe = 0;
            a && (xe = _.__GetLoadEventsNum()), _.__LoadImageFromBytesV1(ue, -1, "", xe, !0, u, c);
          });
        else {
          var A = t;
          (A instanceof ArrayBuffer || A instanceof Uint8Array) && ((A = new Blob([t])).currentFileName = t.currentFileName);
          var S = -1, V = l.DWT.EnumDWT_ImageType;
          n.isString(A.type) && (A.type == "application/pdf" ? S = V.IT_PDF : A.type == "image/png" ? S = V.IT_PNG : A.type == "image/jpeg" || A.type == "image/jpg" ? S = V.IT_JPG : A.type == "image/bmp" ? S = V.IT_BMP : A.type == "image/tiff" || A.type == "image/tif" ? S = V.IT_TIF : A.type == "image/jp2" && (S = V.IT_J2K));
          var ne = 0;
          a && (ne = _.__GetLoadEventsNum()), _.__LoadImageFromBytesV1(A, S, "", ne, !0, u, c);
        }
      else
        d ? d.arrayBuffer().then(function(z) {
          _._innerSendToMobile("LoadImageFromBinary", Kr(z, v, null, T, !1, !1, a), 0, function(ue) {
            n.isFunction(c) && u(0, ue);
          }, c);
        }) : _._innerSendToMobile("LoadImageFromBinary", Kr(t, v, null, T, !1, !1, a), 0, function(z) {
          n.isFunction(c) && u(0, z);
        }, c);
      return !0;
    } }, { key: "_innerSendToMobile", value: function(t, i, a, u, c) {
      var d = this;
      return !!d._isMobileMode() || (n.Errors.ServiceNotSupport(d, t), c && c(d._errorCode, d._getErrorString()), !1);
    } }, { key: "_innerConvertToBase64ByMobile", value: function(t, i, a, u, c, d) {
      var _ = this;
      return !!_._isMobileMode() || (n.Errors.ServiceNotSupport(_, "ConvertToBase64ByMobile"), d && d(_._errorCode, _._getErrorString()), !1);
    } }, { key: "_innerSendToMobileV2", value: function(t, i) {
    } }]), r;
  }(zg);
  function Wc(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function zo(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function bi(o, e, r) {
    return e.has(o), r;
  }
  function qd(o, e, r, t) {
    if (o._ImgManager.count() == 0)
      return n.Errors.NoImage(o), n.isFunction(t) && t(e), !1;
    if (n.isNumber(e)) {
      if (isNaN(e) || e < -2 || e >= o._ImgManager.count())
        return n.Errors.IndexOutOfRange(o), n.isFunction(t) && t(e), !1;
    } else {
      if (!n.isArray(e))
        return n.Errors.IndexOutOfRange(o), n.isFunction(t) && t(e), !1;
      var i;
      for (i = 0; i < e.length; i++) {
        var a = e[i];
        if (isNaN(a) || !n.isNumber(a) || a < 0 || a >= o._ImgManager.count())
          return n.Errors.IndicesOutOfRange(o), n.isFunction(t) && t(e), !1;
      }
    }
    if (r == l.DWT.EnumDWT_ImageType.IT_BMP || r == l.DWT.EnumDWT_ImageType.IT_JPG || r == l.DWT.EnumDWT_ImageType.IT_PNG || r == l.DWT.EnumDWT_ImageType.IT_J2K)
      (e == -1 && o._ImgManager.count() > 1 || n.isArray(e) && e.length > 1) && (n.Errors.UploadIndexMoreThanOne(o), n.isFunction(t) && t(e));
    else if (r != l.DWT.EnumDWT_ImageType.IT_TIF && r != l.DWT.EnumDWT_ImageType.IT_PDF)
      return n.Errors.InvalidImageType(o), n.isFunction(t) && t(e), !1;
    return !0;
  }
  function $d(o) {
    if (o._ImgManager.count() <= 0)
      return [];
    var e = o._ImgManager.getSelectedClientIndexArray();
    if (n.isArray(e)) {
      if (e.length == 0) {
        var r = o._ImgManager.getCurrentImageIndex();
        r >= 0 && e.push(r);
      }
      return e;
    }
    return [];
  }
  function Bc(o) {
    n.html5.ui.init(o, o._config), n.html5.ui.addMethods(o), o._ImgManager.OnReady(), n.isFunction(o.__OnReady) && o.__OnReady(o);
  }
  var eh = /* @__PURE__ */ new WeakSet(), th = /* @__PURE__ */ new WeakSet(), As = /* @__PURE__ */ new WeakSet(), Nc = /* @__PURE__ */ new WeakSet(), nh = /* @__PURE__ */ new WeakSet(), Vc = /* @__PURE__ */ new WeakSet(), rh = /* @__PURE__ */ new WeakSet(), ih = /* @__PURE__ */ new WeakSet(), Jg = /* @__PURE__ */ new WeakSet(), Uc = /* @__PURE__ */ new WeakSet(), oh = function(o) {
    Hr(M, o);
    var e, r, t, i, a, u, c, d, _, v, T = Wc(M);
    function M() {
      var A;
      Gn(this, M);
      for (var S = arguments.length, V = new Array(S), ne = 0; ne < S; ne++)
        V[ne] = arguments[ne];
      return zo(ln(A = T.call.apply(T, [this].concat(V))), Uc), zo(ln(A), Jg), zo(ln(A), ih), zo(ln(A), rh), zo(ln(A), Vc), zo(ln(A), nh), zo(ln(A), Nc), zo(ln(A), As), zo(ln(A), th), zo(ln(A), eh), A;
    }
    return zn(M, [{ key: "dispose", value: function() {
      return this.__unload();
    } }, { key: "_convertToBlobByIndices", value: function(A, S, V, ne, z) {
      var ue = this;
      if (ue._resetErr(), !ue._isValid())
        return !1;
      var xe = parseInt(S), Fe = arguments, Qe = function(Bt, yt) {
        return n.isFunction(V) && Vi(V, Bt, yt, S, Fe), Bt = yt = null, !0;
      }, Ze = function(Bt) {
        return n.isFunction(ne) && So(ne, ue, Bt, S, Fe), Bt = null, !1;
      }, Ct = !1;
      if (!n.License.checkProductKey(ue, { Core: !0 }))
        return n.isFunction(ne) && ne(ue._errorCode, ue._getErrorString()), !1;
      if (!ue._checkIndices(A))
        return Ze(A);
      if (xe == l.DWT.EnumDWT_ImageType.IT_BMP || xe == l.DWT.EnumDWT_ImageType.IT_JPG || xe == l.DWT.EnumDWT_ImageType.IT_PNG || xe == l.DWT.EnumDWT_ImageType.IT_J2K) {
        if (A.length > 1)
          return n.Errors.ConvertBinaryIndexMoreThanOne(ue), Ze(A);
      } else if (xe != l.DWT.EnumDWT_ImageType.IT_TIF && xe != l.DWT.EnumDWT_ImageType.IT_PDF)
        return n.Errors.InvalidImageType(ue), Ze(A);
      var it = [];
      return n.isArray(A) && n.each(A, function(Bt) {
        var yt = ue._ImgManager.convertClientIndexToServerId(Bt);
        yt != -1 && it.push(yt);
      }), n.isFunction(V) ? (bi(ue, Vc, ch).call(ue, it, xe, Ct, Qe, Ze), !0) : bi(ue, Vc, ch).call(ue, it, xe, Ct);
    } }, { key: "_getSourcesAsync", value: (v = Ln(he.mark(function A(S, V, ne) {
      var z, ue;
      return he.wrap(function(xe) {
        for (; ; )
          switch (xe.prev = xe.next) {
            case 0:
              return z = this, xe.next = 3, z._innerFunV2("GetSources", zt(S, V != null && V, ne != null && ne));
            case 3:
              return ue = xe.sent, xe.abrupt("return", bi(this, Nc, uh).call(this, ue));
            case 5:
            case "end":
              return xe.stop();
          }
      }, A, this);
    })), function(A, S, V) {
      return v.apply(this, arguments);
    }) }, { key: "_checkIndices", value: function(A) {
      var S, V, ne = this;
      if (!n.isArray(A))
        return n.Errors.IndicesNotArray(ne), !1;
      if (A.length == 0)
        return n.Errors.IndicesCannotEmpty(ne), !1;
      if (l.DWT.ConnectWithSocket)
        return !0;
      for (S = ne._ImgManager.count(), V = 0; V < A.length; V++) {
        var z = A[V];
        if (n.isUndefined(z) || z === null)
          return n.Errors.IndexNullOrUndefined(ne), !1;
        if (z = parseInt(z), isNaN(z))
          return n.Errors.InvalidIndex(ne), !1;
        if (z < 0 || z >= S)
          return n.Errors.IndicesOutOfRange(ne), !1;
      }
      return !0;
    } }, { key: "_getDefaultDevice", value: function() {
      var A = this;
      if (A._resetErr(), !A._isValid())
        return null;
      var S = "", V = Ne, ne = A._innerFun("GetDefaultSourceName");
      if (ne.length > 0)
        try {
          var z = JSON.parse(ne);
          V = z.type, S = l.Lib.base64.decode(z.ProductName);
        } catch {
          S = "";
        }
      var ue = new oa();
      return ue.name = S, ue.deviceType = V, V == Ut && S.length > 0 ? ue.displayName = "Twain64-" + S : V == Zt && A.__serverPlatform == Oe && S.length > 0 ? ue.displayName = "ICA-" + S : ue.displayName = S, ue;
    } }, { key: "_getDefaultDeviceAsync", value: (_ = Ln(he.mark(function A() {
      var S, V, ne, z, ue, xe;
      return he.wrap(function(Fe) {
        for (; ; )
          switch (Fe.prev = Fe.next) {
            case 0:
              if ((S = this)._resetErr(), S._isValid()) {
                Fe.next = 4;
                break;
              }
              return Fe.abrupt("return", null);
            case 4:
              return V = "", ne = Ne, Fe.next = 8, S._innerFunRawV2("GetDefaultSourceName");
            case 8:
              if ((z = Fe.sent).length > 0)
                try {
                  ue = JSON.parse(z), ne = ue.type, V = l.Lib.base64.decode(ue.ProductName);
                } catch {
                  V = "";
                }
              return (xe = new oa()).name = V, xe.deviceType = ne, ne == Ut && V.length > 0 ? xe.displayName = "Twain64-" + V : ne == Zt && S.__serverPlatform == Oe && V.length > 0 ? xe.displayName = "ICA-" + V : xe.displayName = V, Fe.abrupt("return", xe);
            case 15:
            case "end":
              return Fe.stop();
          }
      }, A, this);
    })), function() {
      return _.apply(this, arguments);
    }) }, { key: "_asyncSaveImage", value: function(A, S, V, ne, z) {
      var ue = this, xe = !0, Fe = n.isString(V) ? V.toLowerCase() : "", Qe = function(Ft, st, nt) {
        var ft = A;
        if (n.isString(ft) && ft != "" ? (ft = n.replaceAll(ft, "\\\\", "_"), ft = n.replaceAll(ft, ":", "_")) : ft = "img" + n.getRandom() + "." + Fe, !xe && n.isString(Ft)) {
          var Pt = [st == "png" ? "data:image/png;base64," : st == "jpg" ? "data:image/jpeg;base64," : st == "tiff" || st == "tif" ? "data:image/tif;base64," : st == "pdf" ? "data:application/pdf;base64," : st == "bmp" ? "data:image/bmp;base64," : st == "jp2" ? "data:image/jp2;base64," : "data:application/octet-stream;base64,", Ft].join("");
          n.MobileFuns.saveLocal(Pt, ft, Fe);
        } else
          n.MobileFuns.saveLocal(Ft, ft, Fe);
        on.refreshImageAfterInvokeFun(ue, S), n.isFunction(ne) && setTimeout(ne, 30);
      }, Ze = function() {
        n.isFunction(z) && z(ue._errorCode, ue._getErrorString());
      }, Ct = window, it = l.navInfoSync, Bt = Ct.requestFileSystem || Ct.webkitRequestFileSystem || Ct.mozRequestFileSystem;
      if ((it.biPad || it.biPhone) && !Bt && (it.bSafari && parseFloat(it.strBrowserVersion) < 13 || !it.bSafari)) {
        xe = !1;
        var yt = -1;
        yt = Fe == "png" ? l.DWT.EnumDWT_ImageType.IT_PNG : Fe == "jpg" ? l.DWT.EnumDWT_ImageType.IT_JPG : Fe == "tiff" || Fe == "tif" ? l.DWT.EnumDWT_ImageType.IT_TIF : Fe == "pdf" ? l.DWT.EnumDWT_ImageType.IT_PDF : Fe == "bmp" ? l.DWT.EnumDWT_ImageType.IT_BMP : Fe == "jp2" ? l.DWT.EnumDWT_ImageType.IT_J2K : l.DWT.EnumDWT_ImageType.IT_PNG;
        var en = [];
        return n.isArray(S) && n.each(S, function(Ft) {
          var st = ue._ImgManager.convertClientIndexToServerId(Ft);
          st != -1 && en.push(st);
        }), ue._innerConvertToBase64ByMobile(A, en, yt, 1, function(Ft) {
          var st = Ft && Ft.result;
          if (n.isArray(st) && st.length == 3)
            return Qe(st[0], st[1], st[2]);
        }, Ze);
      }
      return ue._innerSendToMobile("SaveImage", Kr(A, S, Fe, 1, xe), 0, Qe, Ze);
    } }, { key: "_getSources", value: function(A, S, V) {
      var ne = this._innerFun("GetSources", zt(A, S != null && S, V != null && V));
      return bi(this, Nc, uh).call(this, ne);
    } }, { key: "_getSourceCountAsync", value: (d = Ln(he.mark(function A(S) {
      var V, ne, z, ue, xe, Fe;
      return he.wrap(function(Qe) {
        for (; ; )
          switch (Qe.prev = Qe.next) {
            case 0:
              if ((V = this)._resetErr(), V._isValid()) {
                Qe.next = 4;
                break;
              }
              return Qe.abrupt("return", n.Promise.reject({ code: V._errorCode, message: V._errorString }));
            case 4:
              if (!V._isMobileMode()) {
                Qe.next = 6;
                break;
              }
              return Qe.abrupt("return", n.Promise.resolve(0));
            case 6:
              return bi(V, Uc, lh).call(V), fr("GetSourceCountAsync", V), ne = [], Qe.prev = 9, S && (V._driverType = S), z = vt, ue = vt, xe = vt, V._bRemoteMode ? V.__serverPlatform == Le ? xe = !0 : V.__serverPlatform == Te ? ue = !0 : V.__serverPlatform == Oe && (z = !0) : (z = l.navInfoSync.bMac, ue = l.navInfoSync.bLinux, xe = l.navInfoSync.bWin), Fe = bu(V._driverType, xe, ue, z), Qe.next = 17, this._getSourcesAsync(Fe, !0, void 0);
            case 17:
              ne = Qe.sent, Qe.next = 23;
              break;
            case 20:
              throw Qe.prev = 20, Qe.t0 = Qe.catch(9), Qe.t0;
            case 23:
              return Qe.prev = 23, Yn("GetSourceCountAsync"), Qe.finish(23);
            case 26:
              return Qe.abrupt("return", V._setDevices(ne));
            case 27:
            case "end":
              return Qe.stop();
          }
      }, A, this, [[9, 20, 23, 26]]);
    })), function(A) {
      return d.apply(this, arguments);
    }) }, { key: "_setDevices", value: function(A) {
      var S, V = this;
      return V.__devices = A, S = A.length, V.__sourceCount = S, S <= 0 ? (V.__defaultSourceName = "", V.__sourceCount = 0, 0) : S;
    } }, { key: "_getSourceNameByIndex", value: function(A) {
      var S = this.__devices.length;
      return A < 0 || A >= S ? "" : this.__devices[A].displayName;
    } }, { key: "_selectSourceExAsync", value: (c = Ln(he.mark(function A(S, V) {
      var ne, z;
      return he.wrap(function(ue) {
        for (; ; )
          switch (ue.prev = ue.next) {
            case 0:
              return ne = this, z = ["[", S, ",", V ?? It, "]"].join(""), ue.next = 3, ne._innerFunV2("SelectSourceEx", z);
            case 3:
              return ue.abrupt("return", ue.sent);
            case 4:
            case "end":
              return ue.stop();
          }
      }, A, this);
    })), function(A, S) {
      return c.apply(this, arguments);
    }) }, { key: "__innerConvertToBlob", value: function(A, S, V, ne, z, ue, xe, Fe) {
      var Qe = this;
      if (Qe._isMobileMode())
        return bi(Qe, nh, Zg).call(Qe, A, S, V, z, ue, xe, Fe);
      var Ze = V, Ct = ",";
      n.isString(Ze) && Ze != "" || (Ze = "", Ct = "");
      var it = ["[", A, ',"', S.join(","), '"', Ct, Ze, "]"].join("");
      if (ne)
        return Qe._innerFunRaw("ConvertToBlob", it, !0, !0, !0, function(en) {
          var Ft = on.getBlobTypeByImageType(A), st = new Blob([en], { type: Ft });
          if (l.DWT.IfAddMD5InUploadHeader) {
            var nt = new Bu.ArrayBuffer();
            nt.append(en), n.isFunction(ue) && ue(st, nt.end(), Fe);
          } else
            n.isFunction(ue) && ue(st, "", Fe);
          st = null;
        }, xe);
      var Bt = Qe._innerFunRaw("ConvertToBlob", it, !1, !0, !1), yt = "";
      return Qe._errorCode == 0 ? (Bt && "md5" in Bt && (yt = Bt.md5), ue(Bt, yt, Fe)) : (xe(), !1);
    } }, { key: "_acquireImageFromService", value: function(A, S, V) {
      var ne, z = this, ue = "AcquireImage";
      if (!n.License.checkProductKey(z, { Core: !0 }))
        return n.isFunction(V) && V(z._errorCode, z._getErrorString()), !1;
      if (z._isMobileMode())
        return z._mobileNotSupport(ue, V);
      A.RemoteScan = z._bRemoteMode ? 1 : 0, n.isUndefined(A.ShowRemoteScanUI) ? A.ShowRemoteScanUI = A.RemoteScan ? 1 : 0 : A.ShowRemoteScanUI = A.RemoteScan && A.ShowRemoteScanUI ? 1 : 0, z._bRemoteMode && (n.isFunction(z.__OnRemoteScanStatusAsync) || (z.__OnRemoteScanStatusAsync = function() {
      }), n.isFunction(z.__OnSourceUIClose) || (z.__OnSourceUIClose = function() {
      }));
      for (var xe = 0, Fe = 0; Fe < wu.length; Fe++) {
        var Qe = ["__", wu[Fe]].join("");
        n.isFunction(z[Qe]) && (xe |= 1 << Fe);
      }
      if (A.EnableEvents = xe, z._enableEvents = xe, A.RemoteScan && (z._isBindViewer() || A.ShowRemoteScanUI) && z._initRemoteDiv(), z._bRemoteMode || (z._bPageFocus && l.DWT.IfAlwaysFocusOnPopupWindow ? z._bServerAlwaysFocusOnPopupWindow || z._OnPageFocus(!0) : z._bServerAlwaysFocusOnPopupWindow && z._OnPageBlur(!0)), "SelectSourceByIndex" in A) {
        var Ze = A.SelectSourceByIndex;
        return delete A.SelectSourceByIndex, z._selectSourceByIndexAsync(ue, Ze).then(function() {
          var Ct = ["[", n.stringify(A), "]"].join("");
          return z.__innerAcquireImage(ue, Ct, !1, !1, S, V);
        }, function(Ct) {
          V(Ct.code, Ct.message);
        });
      }
      return ne = ["[", n.stringify(A), "]"].join(""), z.__innerAcquireImage(ue, ne, !1, !1, S, V);
    } }, { key: "_getSourceCountSync", value: function() {
      var A = this;
      if (A._isMobileMode())
        return A._mobileNotSupport("SourceCount");
      var S, V = vt, ne = vt, z = vt;
      if (A._bRemoteMode ? A.__serverPlatform == Le ? z = !0 : A.__serverPlatform == Te ? ne = !0 : A.__serverPlatform == Oe && (V = !0) : (V = l.navInfoSync.bMac, ne = l.navInfoSync.bLinux, z = l.navInfoSync.bWin), S = bu(this._driverType, z, ne, V), A._resetErr(), !A._isValid() || !n.License.checkProductKey(A, { Core: !0 }))
        return 0;
      bi(A, Uc, lh).call(A);
      var ue = A._getSources(S, !0, void 0);
      return A._setDevices(ue);
    } }, { key: "_OnReady", value: function() {
      var A, S = this, V = S._getWebTwainId();
      if (n.detect.starting = !1, S._bRemoteMode || !S._isTwainServiceType() && !S._isWasmWithScan() || (n.detect.bOK = !0), S._bReady = !0, S._bInited = !0, S.__wsRetry = 0, l.DWT.ContainerMap[V]) {
        var ne = l.DWT.ContainerMap[V];
        if (!ne._destroy)
          return void (S != ne && (n.isFunction(S.__OnReady) && S.__OnReady(ne), S.__unload()));
        l.DWT.ContainerMap[V] = null;
      }
      if (S._isTwainServiceType() || S._isDMServiceType()) {
        var z = S._wsClient.ws;
        if (z === null)
          return;
        z.onopen = null, S._wsClient.addEvent("close", S._clientId, function(ue) {
          var xe;
          S._bReady = !1, S.__bAcquireImageNow = !1, S.__wsRetry = 0, n.Errors.Server_Invalid(S), n.detect.bOK = !1, S.__closeRemoteScanUI(!0), S._dm && (S._dm.bLicenseOK = !1), S._dmSync && (S._dmSync.bLicenseOK = !1), ue && n.log("websocket close: " + ue), S.__OnWSClose && S.__OnWSClose(), S._bNoMask || (xe = "websocket close", n.log("hideMask:" + xe + "--" + Sa), n.detect.hideMask(), Sa = 0), S._heartBeatTimer && (clearTimeout(S._heartBeatTimer), S._heartBeatTimer = null), Hc(S);
        }), S._wsClient.addEvent("error", S._clientId, function(ue) {
          ue && n.log("websocket error: " + ue), S.__OnWSError && S.__OnWSError();
        }), S._wsClient.addEvent("timeout", S._clientId, function(ue) {
          S._bReady = !1, S.__wsRetry = 0, n.Errors.Server_Invalid(S), n.detect.bOK = !1, S.__closeRemoteScanUI(!0), ue && n.log("websocket timeout: " + ue), S._heartBeatTimer && (clearTimeout(S._heartBeatTimer), S._heartBeatTimer = null), Hc(S);
        }), n.isLocalIP(S._serverInfo.server) && (n.LS.item("DWT_port", S._serverInfo.port), n.LS.item("DWT_ssl", S._serverInfo.ssl ? "true" : "false"));
      }
      n.attachProperty(S), n.attachPropertyUI(S), S._bNoMask || fr("OnReady", S), S._isTwainServiceType() || S._isDMServiceType() ? S._innerActiveUI(function(ue) {
        var xe, Fe, Qe, Ze = !1;
        if (ue && ue.length >= 6) {
          xe = ue[1], Fe = ue[2], Qe = ue[5];
          var Ct = !1, it = !1, Bt = 0;
          ue.length > 12 ? (ue[6], S._b64bit = ue[7] == "64", ue[8], Ct = ue[9], it = ue[10], Bt = ue[11], ue[12]) : ue.length > 8 && (Ct = ue[6], it = ue[7], Bt = ue[8]), Ct ? it && Bt && (S._bRemoteMode = !0) : S._bRemoteMode = !0, S.__strProductName = Fe, n.isString(Qe) && (Qe == "win" ? S.__serverPlatform = Le : Qe == "linux" ? S.__serverPlatform = Te : Qe == "mac" ? S.__serverPlatform = Oe : Qe == "embed" ? S.__serverPlatform = Re : Qe == "chromeos" && (S.__serverPlatform = Ve));
        } else
          ue && ue.length >= 3 ? (xe = ue[1], Fe = ue[2], S.__strProductName = Fe) : ue && ue.length >= 2 ? (xe = ue[1], Ze = !0) : (Ze = !0, n.log("ActiveUI return parameters error."));
        if (n.attachAddon(S), Fe && (Fe = Fe.toLowerCase()), S.__serverId = xe, S.__bMustUpgradeService = Ze, Ze)
          Bc(S), S._bNoMask || Yn("OnReady");
        else {
          var yt;
          if (S._blts) {
            var en, Ft, st, nt;
            S._bRemoteMode ? en = (Ft = (st = S._dmService) === null || st === void 0 || (nt = st.attrs) === null || nt === void 0 ? void 0 : nt.UUID) !== null && Ft !== void 0 ? Ft : "" : en = "", yt = Fa(l.DWT.EnumInstance.dwt_desktop, en).then(function(Pt) {
              return S._setLTSLicenseAsync(Pt.ar);
            }).then(function(Pt) {
              l.DWT.laddDWTObj(S);
              var Ot, pn, un, An = "";
              S._bRemoteMode && (An = (Ot = (pn = S._dmService) === null || pn === void 0 || (un = pn.attrs) === null || un === void 0 ? void 0 : un.UUID) !== null && Ot !== void 0 ? Ot : ""), l.DWT.lcheckLic(l.DWT.EnumInstance.dwt_desktop, Pt, An);
            });
          } else {
            var ft = n.product.refProductKey;
            yt = S._setProductKeyAsync(ft);
          }
          yt = yt.then(function(Pt) {
            S._bNoMask || Yn("OnReady");
            var Ot = S._blts;
            if (!(Ot && l.DWT.licenseException.code == 0 || !Ot && Pt))
              return !Ot && S._errorCode < 0 && n.License.showLicenseErrorDialog(yr(S)), n.isFunction(S.__OnCreateError) && S.__OnCreateError(S), void S.__unload();
            if (!(n.License.checkProductKey(S, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(S, { Webcam: !0 }, !0))) {
              var pn = !0;
              return S._bNotShowMessage && (pn = !1), n.License.checkProductKey(S, { Core: !0 }, !1, pn), n.isFunction(S.__OnCreateError) && S.__OnCreateError(S), void S.__unload();
            }
            S._setConvertModeAsync(S._pdfConvertMode).catch(function() {
            }), l.DWT.lclex(), Bc(S);
          }, function(Pt) {
            S._bNoMask || Yn("OnReady");
            var Ot = !0;
            S._bNotShowMessage && (Ot = !1), zc(S, S._isMobileMode(), Pt, Ot), n.isFunction(S.__OnCreateError) && S.__OnCreateError(S), S.__unload(), n.detect.arySTwains.splice(0);
          });
        }
        S._bRemoteMode && S._wsClient.startHeartBeat();
      }, function() {
        S._bNoMask || Yn("OnReady"), n.isFunction(S.__OnCreateError) && S.__OnCreateError(S), S.__unload();
      }) : (n.attachAddon(S), S.__serverId = "1", S.__bMustUpgradeService = !1, S._blts ? A = Ka(!1).then(function() {
        return Fa(l.DWT.EnumInstance.dwt_browser, "");
      }).then(function(ue) {
        return ir(ue), S._setLTSLicenseAsync(ue.ar);
      }).then(function(ue) {
        l.DWT.laddDWTObj(S), l.DWT.lcheckLic(l.DWT.EnumInstance.dwt_browser, ue, "");
      }) : (kn(), A = S._setProductKeyAsync(n.product.refProductKey)), A.then(function(ue) {
        S._bNoMask || Yn("OnReady");
        var xe = S._blts;
        return xe && l.DWT.licenseException.code == 0 || !xe && ue ? n.License.checkProductKey(S, { Core: !0 }, !0) || l.navInfoSync.bWin && n.License.checkProductKey(S, { Webcam: !0 }, !0) ? (l.WasmEnv && l.WasmEnv.setLoglevel(S._logLevel), S._setConvertMode(S._pdfConvertMode), l.DWT.lclex(), void Bc(S)) : (n.License.checkProductKey(S, { Core: !0 }, !0, !0), n.isFunction(S.__OnCreateError) && S.__OnCreateError(S), void S.__unload()) : (n.isFunction(S.__OnCreateError) && S.__OnCreateError(S), void S.__unload());
      }, function(ue) {
        var xe = !0;
        S._bNotShowMessage && (xe = !1), zc(S, S._isMobileMode(), ue, xe), S._bNoMask || Yn("OnReady"), n.isFunction(S.__OnCreateError) && S.__OnCreateError(S), n.detect.arySTwains.splice(0), S.__unload();
      }));
    } }, { key: "_setConvertModeAsync", value: function(A) {
      var S = this;
      if (!S._setConvertModeInner(A))
        return n.Promise.reject({ code: S._errorCode, message: S._errorString });
      if (!S._isMobileMode()) {
        var V = S._getPdfDllname();
        return S._innerFunV2("SetPDFConvertMode", zt(S._pdfRealConvertMode, V)).then(function() {
          if (S._pdfRealConvertMode == 2 && S._pdfConvertMode == 1 || S._pdfRealConvertMode == 2 && S._pdfConvertMode == 4)
            throw n.Errors.LicenseNoPDF(S), { code: S._errorCode, message: S._errorString };
          return !0;
        });
      }
      return S._pdfRealConvertMode == 2 && S._pdfConvertMode == 1 || S._pdfRealConvertMode == 2 && S._pdfConvertMode == 4 ? (n.Errors.LicenseNoPDF(S), n.Promise.reject({ code: S._errorCode, message: S._errorString })) : n.Promise.resolve(!0);
    } }, { key: "_setLTSLicenseAsync", value: function(A) {
      var S = this;
      return S._resetErr(), S._isValid() ? n.isString(A) ? (S._isMobileMode() ? S._innerSendToMobileV2("GetLicenseInfo", Kr(A)) : S._setLTSLic(A)).then(function(V) {
        var ne = V;
        if (!ne || ne.message)
          throw n.Errors.LicenseEmptyOrInvalid(S), ne && ne.message && (S._errorString = ne.message), { code: S._errorCode, message: S._errorString };
        if (Wu(S, ne), n.detect.wasmScriptLoaded && !n.detect.wasmPdfReaderLoaded)
          try {
            l.WasmEnv.loadPdfReader(), n.detect.wasmPdfReaderLoaded = !0;
          } catch (z) {
            z && n.error(z.message);
          }
        return S.__licenseInfo && (S.__licenseInfo.LTS = !0), ne;
      }) : (n.Errors.LicenseEmptyOrInvalid(S), n.Promise.reject({ code: S._errorCode, message: S._errorString })) : n.Promise.reject({ code: S._errorCode, message: S._errorString });
    } }, { key: "_setLTSLic", value: function(A) {
      var S = this, V = A;
      return S._resetErr(), !!S._isValid() && (n.isString(V) ? S._innerFunRawV2("LTSLicense", zt(V)).then(function(ne) {
        if (ne) {
          if (ne.exception !== void 0 && ne.description !== void 0)
            throw S._errorCode = ne.exception, S._errorString = ne.description, { code: S._errorCode, message: S._errorString };
          return S._innerFunRawV2("GetLicenseInfo");
        }
        throw n.Errors.LicenseEmptyOrInvalid(S), { code: S._errorCode, message: S._errorString };
      }) : (n.Errors.LicenseEmptyOrInvalid(S), n.Promise.reject({ code: S._errorCode, message: S._errorString })));
    } }, { key: "_setConvertMode", value: function(A) {
      var S = this;
      if (!S._setConvertModeInner(A))
        return !1;
      if (!S._isMobileMode()) {
        var V = S._getPdfDllname();
        S._innerFun("SetPDFConvertMode", zt(S._pdfRealConvertMode, V));
      }
      return !(S._pdfRealConvertMode == 2 && S._pdfConvertMode == 1 || S._pdfRealConvertMode == 2 && S._pdfConvertMode == 4) || (n.Errors.LicenseNoPDF(S), !1);
    } }, { key: "_setConvertModeInner", value: function(A) {
      var S = this;
      if (!n.License.checkProductKey(S, { Core: !0 }))
        return !1;
      var V = 1 * A;
      return S._resetErr(), !!S._isValid() && (isNaN(V) ? (n.Errors.ParameterCannotEmpty(S), !1) : V != 1 && V != 2 && V != 3 && V != 4 ? (n.Errors.InvalidValue(S), !1) : (S._pdfConvertMode = V, V == 2 || n.License.hasPDFRProductKey(S) ? S._pdfRealConvertMode = V : S._pdfRealConvertMode = 2, !0));
    } }, { key: "_getPdfDllname", value: function() {
      var A = this, S = !1, V = !1;
      return A._bRemoteMode ? A.__serverPlatform == Le || (A.__serverPlatform == Te ? V = !0 : A.__serverPlatform == Oe && (S = !0)) : (S = l.navInfoSync.bMac, V = l.navInfoSync.bLinux, l.navInfoSync.bWin), S ? A._b64bit ? "libDynamicPdfCorex64_" + l.DWT.PdfVersion + ".dylib" : "libDynamicPdfCore_" + l.DWT.PdfVersion + ".dylib" : V ? "libDynamicPdfCore_" + l.DWT.PdfVersion + ".so" : A._b64bit ? "DynamicPdfCorex64_" + l.DWT.PdfVersion + ".dll" : "DynamicPdfCore_" + l.DWT.PdfVersion + ".dll";
    } }, { key: "_setProductKeyAsync", value: function(A) {
      var S = this, V = A;
      return S._resetErr(), S._isValid() ? n.isString(V) ? n.License.isLicenseMixed(V) ? n.Promise.reject(l.DWT.licenseException) : n.License.isLongKey(V) ? (S._isMobileMode() ? S._innerSendToMobileV2("GetLicenseInfo", Kr(V)) : bi(S, rh, qg).call(S, V)).then(function(ne) {
        var z = ne;
        if (!z || z.message)
          throw n.Errors.LicenseEmptyOrInvalid(S), z && z.message && (S._errorString = z.message), { code: S._errorCode, message: S._errorString };
        if (Wu(S, z), n.detect.wasmScriptLoaded && !n.detect.wasmPdfReaderLoaded)
          try {
            l.WasmEnv.loadPdfReader(), n.detect.wasmPdfReaderLoaded = !0;
          } catch (ue) {
            ue && n.error(ue.message);
          }
        return z;
      }) : (n.Errors.LicenseEmptyOrInvalid(S), n.Promise.reject({ code: S._errorCode, message: S._errorString })) : (n.Errors.LicenseEmptyOrInvalid(S), n.Promise.reject({ code: S._errorCode, message: S._errorString })) : n.Promise.reject({ code: S._errorCode, message: S._errorString });
    } }, { key: "_innerBindViewer", value: function(A) {
      var S, V = this, ne = A;
      return l.DWT.UseDefaultViewer ? (n.isString(A) && (ne = n.get(A), n.show(ne)), V._config.container != ne && (V._config.container = ne, V._config.ifBindViewer = !0, n.html5.ui.init(V, V._config)), S = V._ImgManager.BindView(A), V._bBindViewer = !0, V._config.ifBindViewer = !1, S) : (n.Errors.CannotBindViewerWhenNoViewerJS(V), !1);
    } }, { key: "_innerUnbindViewer", value: function() {
      var A = this;
      return A.__funResize && (n.removeEventListener(window, "resize", A.__funResize), A.__funResize = vt), A._bBindViewer = !1, A._config.container = null, A._ImgManager ? A._ImgManager.UnbindView() : vt;
    } }, { key: "_reconnect", value: (u = Ln(he.mark(function A() {
      var S, V, ne, z, ue, xe, Fe, Qe, Ze, Ct, it, Bt;
      return he.wrap(function(yt) {
        for (; ; )
          switch (yt.prev = yt.next) {
            case 0:
              if (!(S = this)._destroy) {
                yt.next = 3;
                break;
              }
              return yt.abrupt("return");
            case 3:
              return yt.prev = 3, (V = ti.Instance.getClient(S._serverInfo)).setRetry(0), yt.next = 9, V.testConnection(void 0, 0, void 0, 3e4);
            case 9:
              return S._wsClient = V, S.__wsRetry = 0, yt.next = 13, new n.Promise(function(en, Ft) {
                S._innerActiveUI(function(st) {
                  var nt = !1;
                  st && (st.length > 12 ? (S.__serverId = st[1], nt = st[12]) : st.length > 8 ? (S.__serverId = st[1], nt = st[8]) : st.length >= 2 && (S.__serverId = st[1])), nt && (n.Errors.DynamsoftServiceRestarted(S), S._removeAllImages("ActiveUI")), S._bRemoteMode && V.startHeartBeat(), en();
                }, function(st) {
                  Ft(st);
                });
              });
            case 13:
              if (S._bReady = !0, S._bRemoteMode || (n.detect.bOK = !0), n.detect.starting = !1, !S._blts) {
                yt.next = 25;
                break;
              }
              return ne = S._bRemoteMode && (z = (ue = S._dmService) === null || ue === void 0 || (xe = ue.attrs) === null || xe === void 0 ? void 0 : xe.UUID) !== null && z !== void 0 ? z : "", yt.next = 20, Fa(l.DWT.EnumInstance.dwt_desktop, ne);
            case 20:
              return Fe = yt.sent, yt.next = 23, S._setLTSLicenseAsync(Fe.ar);
            case 23:
              yt.next = 28;
              break;
            case 25:
              return Qe = n.product.refProductKey, yt.next = 28, S._setProductKeyAsync(Qe);
            case 28:
              yt.next = 35;
              break;
            case 30:
              throw yt.prev = 30, yt.t0 = yt.catch(3), yt.t0 && yt.t0.message && n.error(yt.t0.message), S._bRemoteMode && S._isTwainServiceType() && (it = (Ze = S._dmService) === null || Ze === void 0 || (Ct = Ze.attrs) === null || Ct === void 0 ? void 0 : Ct.name, Bt = n.Errors.ThrowFailedConnectToRemoteDynamsoftService(it), S._errorCode = Bt.code, S._errorString = Bt.message), { code: S._errorCode, message: S._errorString };
            case 35:
            case "end":
              return yt.stop();
          }
      }, A, this, [[3, 30]]);
    })), function() {
      return u.apply(this, arguments);
    }) }, { key: "__unload", value: (a = Ln(he.mark(function A() {
      var S, V, ne;
      return he.wrap(function(z) {
        for (; ; )
          switch (z.prev = z.next) {
            case 0:
              if (S = this, V = n.clone(l.DWT.licenseException), S.__closeRemoteScanUI(!0), !S._destroy && !S._destroying) {
                z.next = 5;
                break;
              }
              return z.abrupt("return");
            case 5:
              if (S._destroying = !0, delete l.DWT.ContainerMap[S._id], S._ImgManager && S._ImgManager.clear(), !S._bInited || !S._bReady || n.page.bUnload) {
                z.next = 33;
                break;
              }
              if (!S._dm) {
                z.next = 17;
                break;
              }
              return z.prev = 10, z.next = 13, S._dm.dispose();
            case 13:
              z.next = 17;
              break;
            case 15:
              z.prev = 15, z.t0 = z.catch(10);
            case 17:
              if (!S._dmSync) {
                z.next = 25;
                break;
              }
              return z.prev = 18, z.next = 21, S._dmSync.disposeAsync();
            case 21:
              z.next = 25;
              break;
            case 23:
              z.prev = 23, z.t1 = z.catch(18);
            case 25:
              if (!S._wsClient) {
                z.next = 33;
                break;
              }
              return z.prev = 26, z.next = 29, bi(S, ih, $g).call(S);
            case 29:
              z.next = 33;
              break;
            case 31:
              z.prev = 31, z.t2 = z.catch(26);
            case 33:
              S._wsClient && (S._wsClient.removeEvent("close", S._clientId), S._wsClient.removeEvent("error", S._clientId), S._wsClient.removeEvent("timeout", S._clientId), S._wsClient.dispose(), delete S._wsClient, S._wsClient = null), S._bReady = !1, S.__addon && S.__addon.Camera && S.__addon.Camera._viewer && (S.__addon.Camera.getStatus() != "" && S.__addon.Camera.closeSource().catch(function() {
              }), S.__addon.Camera._viewer.dispose(), S.__addon.Camera._viewer = null), S._isBindViewer() && (S._innerUnbindViewer(), n.html5.ui.unLoad(S)), S._ImgManager && (S._ImgManager.dispose(), S._ImgManager = null, S._viewer = null), S._objImageIndexManager && (S._objImageIndexManager = null), S._containerElement = null, l.DWT.lremoveDWTObj(S), S.__bAcquireImageNow = !1, S._destroying = !1, S._destroy = !0, (ne = l.DWT.licenseException).code = V.code, ne.message = V.message, ne.fromLTS = V.fromLTS;
            case 48:
            case "end":
              return z.stop();
          }
      }, A, this, [[10, 15], [18, 23], [26, 31]]);
    })), function() {
      return a.apply(this, arguments);
    }) }, { key: "_setIfShowUI", value: function(A) {
      this._resetErr(), this._isValid() && (this._isMobileMode() ? this._mobileNotSupport("IfShowUI") : n.isBoolean(A) ? this._innerFun("IfShowUI", zt(A)) : n.Errors.InvalidValue(self));
    } }, { key: "_setIfShowFileDialog", value: function(A) {
      this._resetErr(), this._isValid() && (this._isMobileMode() ? this._mobileNotSupport("IfShowFileDialog") : n.isBoolean(A) ? this._innerFun("IfShowFileDialog", zt(A)) : n.Errors.InvalidValue(self));
    } }, { key: "_getDevicesAsync", value: (i = Ln(he.mark(function A(S, V, ne, z) {
      var ue, xe, Fe, Qe, Ze, Ct, it, Bt, yt, en;
      return he.wrap(function(Ft) {
        for (; ; )
          switch (Ft.prev = Ft.next) {
            case 0:
              if (xe = [], Fe = (ue = this)._bRemoteMode ? an : l.navInfoSync.bAndroid ? xr : an, Qe = V ?? Fe, ue._resetErr(), ue._isValid()) {
                Ft.next = 5;
                break;
              }
              return Ft.abrupt("return", n.Promise.reject({ code: ue._errorCode, message: ue._errorString }));
            case 5:
              if (!ue._isWasmWithScan()) {
                Ft.next = 9;
                break;
              }
              l.navInfoSync.bAndroid && !ue._bRemoteMode && (Qe &= ~an), Ft.next = 11;
              break;
            case 9:
              if (!ue._isMobileMode()) {
                Ft.next = 11;
                break;
              }
              return Ft.abrupt("return", ue._mobileNotSupportAsync(S));
            case 11:
              return fr(S, ue), Ft.prev = 12, ue._dm && (ue._dm.bLicenseOK = !1), Ft.next = 16, bi(ue, As, su).call(ue, !1);
            case 16:
              if (Ze = Ft.sent, Ct = (Qe & Xt) == Xt, it = (Qe & dn) == dn, !((Qe & an) > 0)) {
                Ft.next = 23;
                break;
              }
              return Ft.next = 21, ue._getSourcesAsync(Qe, ne, z);
            case 21:
              Bt = Ft.sent, n.isArray(Bt) && Bt.length > 0 && (xe = xe.concat(Bt));
            case 23:
              if (!Ct && !it) {
                Ft.next = 28;
                break;
              }
              return Ft.next = 26, Ze.getSources(Qe, ne);
            case 26:
              yt = Ft.sent, n.isArray(yt) && yt.length > 0 && (xe = xe.concat(yt));
            case 28:
              Ft.next = 33;
              break;
            case 30:
              throw Ft.prev = 30, Ft.t0 = Ft.catch(12), Ft.t0;
            case 33:
              return Ft.prev = 33, Yn(S), Ft.finish(33);
            case 36:
              if (xe.length > 0) {
                for (en = 0; en < xe.length; en++)
                  n.addDeviceAcquireMethod(xe[en], !1);
                this._setDevices(xe);
              }
              return Ft.abrupt("return", xe);
            case 38:
            case "end":
              return Ft.stop();
          }
      }, A, this, [[12, 30, 33, 36]]);
    })), function(A, S, V, ne) {
      return i.apply(this, arguments);
    }) }, { key: "_selectDeviceAsync", value: (t = Ln(he.mark(function A(S, V, ne) {
      var z, ue, xe, Fe, Qe, Ze, Ct, it, Bt;
      return he.wrap(function(yt) {
        for (; ; )
          switch (yt.prev = yt.next) {
            case 0:
              if (ue = this, xe = V ? V.deviceType : 0, ue._resetErr(), ue._isValid()) {
                yt.next = 4;
                break;
              }
              return yt.abrupt("return", n.Promise.reject({ code: ue._errorCode, message: ue._errorString }));
            case 4:
              if (V && V instanceof oa) {
                yt.next = 7;
                break;
              }
              throw n.Errors.InvalidParameterInCallback(ue), { code: ue._errorCode, message: ue._errorString };
            case 7:
              if (!ue._isWasmWithScan()) {
                yt.next = 13;
                break;
              }
              return this._curDevice = V, this._bSelectedSourceByServer = !1, yt.abrupt("return", !0);
            case 13:
              if (!ue._isMobileMode()) {
                yt.next = 15;
                break;
              }
              return yt.abrupt("return", ue._mobileNotSupportAsync(S));
            case 15:
              if (!(Fe = (z = this._dmService.attrs) === null || z === void 0 ? void 0 : z.UUID)) {
                yt.next = 26;
                break;
              }
              if (((Qe = V.serviceInfo.attrs) === null || Qe === void 0 ? void 0 : Qe.UUID) != Fe) {
                yt.next = 20;
                break;
              }
              yt.next = 26;
              break;
            case 20:
              if (!((Ct = ((Ze = V.serviceInfo.attrs) === null || Ze === void 0 ? void 0 : Ze.url) || V.serviceInfo.server) && Ct.indexOf(Fe) > -1)) {
                yt.next = 24;
                break;
              }
              yt.next = 26;
              break;
            case 24:
              throw n.Errors.DeviceNotFound(ue), { code: ue._errorCode, message: ue._errorString };
            case 26:
              if (it = !1, fr(S, ue), yt.prev = 28, !Su(xe)) {
                yt.next = 33;
                break;
              }
              return yt.next = 32, this._selectSourceExAsync(V.strDevice, ne);
            case 32:
              it = yt.sent;
            case 33:
              if (!Tu(xe)) {
                yt.next = 43;
                break;
              }
              return ue._dm && (ue._dm.bLicenseOK = !1), yt.next = 37, bi(this, As, su).call(this, !1);
            case 37:
              return Bt = yt.sent, yt.next = 40, Bt.selectSourceAsync(V);
            case 40:
              it = yt.sent, yt.next = 43;
              break;
            case 43:
              it && (this._curDevice = V, this._bSelectedSourceByServer = !1), yt.next = 49;
              break;
            case 46:
              throw yt.prev = 46, yt.t0 = yt.catch(28), yt.t0;
            case 49:
              return yt.prev = 49, Yn(S), yt.finish(49);
            case 52:
              return yt.abrupt("return", it);
            case 53:
            case "end":
              return yt.stop();
          }
      }, A, this, [[28, 46, 49, 52]]);
    })), function(A, S, V) {
      return t.apply(this, arguments);
    }) }, { key: "_acquireImageAsync", value: (r = Ln(he.mark(function A(S, V, ne) {
      var z, ue, xe, Fe, Qe, Ze, Ct, it, Bt, yt, en, Ft, st, nt;
      return he.wrap(function(ft) {
        for (; ; )
          switch (ft.prev = ft.next) {
            case 0:
              if (z = this, ue = V ? n.clone(V) : {}, Fe = xe = ne, z._resetErr(), z._isValid()) {
                ft.next = 4;
                break;
              }
              throw { code: z._errorCode, message: z._errorString };
            case 4:
              if (xe) {
                ft.next = 6;
                break;
              }
              throw n.Errors.ThrowInvalidParameterSendTo();
            case 6:
              if (!z._isWasmWithScan()) {
                ft.next = 17;
                break;
              }
              if (z._curDevice) {
                ft.next = 12;
                break;
              }
              if (z.__devices && z.__devices.length != 0) {
                ft.next = 11;
                break;
              }
              return ft.next = 11, z._getDevicesAsync(S, null);
            case 11:
              z.__devices && z.__devices.length > 0 && (z._curDevice = z.__devices[0]);
            case 12:
              if (z._curDevice) {
                ft.next = 15;
                break;
              }
              throw n.Errors.DeviceNotFound(z), { code: z._errorCode, message: z._getErrorString() };
            case 15:
              ft.next = 19;
              break;
            case 17:
              if (!z._isMobileMode()) {
                ft.next = 19;
                break;
              }
              return ft.abrupt("return", z._mobileNotSupportAsync(S));
            case 19:
              if (xe == z && (xe = null), xe || (Fe = z), !z.__bAcquireImageNow) {
                ft.next = 24;
                break;
              }
              throw n.Errors.SystemBusy(z), { code: z._errorCode, message: z._getErrorString() };
            case 24:
              return z.__bAcquireImageNow = !0, fr(S, Fe), Ze = n.cancelFrom, Ct = z.__IfShowProgressBar, n.cancelFrom = Li, z.__IfShowProgressBar = !1, Bt = !0, yt = n.Promise.resolve(), en = l.DWT.RemoteScanConfig, Ft = hn(), ft.prev = 31, nm(ue), en && Tt(en.keepAwake), z._dm && (z._dm.bLicenseOK = !1), ft.next = 37, bi(z, As, su).call(z, !0);
            case 37:
              if (st = ft.sent, !n.isNumber(ue.SelectSourceByIndex)) {
                ft.next = 45;
                break;
              }
              if (z.__devices != null) {
                ft.next = 42;
                break;
              }
              return ft.next = 42, z._getDevicesAsync(S, null);
            case 42:
              if (!(z.__devices && z.__devices.length > 0)) {
                ft.next = 45;
                break;
              }
              return ft.next = 45, z._selectSourceByIndexAsync(S, ue.SelectSourceByIndex);
            case 45:
              if (Qe = z._curDevice ? z._curDevice.deviceType : Ne, n.License.checkProductKey(z, { Core: !0 }) && z._isValid()) {
                ft.next = 48;
                break;
              }
              throw { code: z._errorCode, message: z._errorString };
            case 48:
              if (z._isTwainServiceType() && z._innerSend("Heartbeat"), xe && (xe._isTwainServiceType() && xe._innerSend("Heartbeat"), nt = function() {
                var Pt = Ln(he.mark(function Ot(pn) {
                  return he.wrap(function(un) {
                    for (; ; )
                      switch (un.prev = un.next) {
                        case 0:
                          yt = yt.then(function() {
                            return new n.Promise(function(An, Mr) {
                              z._convertToBlobByIndices([z._imageIDToIndex(pn.imageId)], l.DWT.EnumDWT_ImageType.IT_PNG, function(tr, Qn, wi) {
                                xe && (xe._blts_tmp = xe._blts, xe._blts = !1, xe._innerLoadImageFromBinary(tr, 0, !1, function(Xr, Mn) {
                                  n.log("LoadImageFromBinary success"), xe._blts = xe._blts_tmp;
                                  var ci = z._imageIDToIndex(pn.imageId);
                                  pn.imageId = parseInt(Mn.ids), n.isFunction(xe._OnPostTransferAsync) && xe._OnPostTransferAsync([!0, n.stringify(pn)]), An(), z._removeImage(S, ci);
                                }, function(Xr, Mn) {
                                  n.log(Mn), xe._blts = xe._blts_tmp, Mr({ code: Xr, message: Mn });
                                }));
                              }, function(tr, Qn) {
                                n.log(Qn), Mr({ code: tr, message: Qn });
                              });
                            });
                          });
                        case 1:
                        case "end":
                          return un.stop();
                      }
                  }, Ot);
                }));
                return function(Ot) {
                  return Pt.apply(this, arguments);
                };
              }(), it = z._innerRegisterEvent("OnPostTransferAsync", nt)), !Su(Qe)) {
                ft.next = 55;
                break;
              }
              return ft.next = 53, bi(z, th, Qg).call(z, ue);
            case 53:
              ft.next = 57;
              break;
            case 55:
              if (!Tu(Qe)) {
                ft.next = 57;
                break;
              }
              return ft.delegateYield(he.mark(function Pt() {
                var Ot, pn, un, An, Mr, tr;
                return he.wrap(function(Qn) {
                  for (; ; )
                    switch (Qn.prev = Qn.next) {
                      case 0:
                        return Qn.next = 2, st.acquireImage(z._curDevice, ue, z._bRemoteMode);
                      case 2:
                        Ot = Qn.sent, n.isFunction(z._OnPreAllTransfers) && z._OnPreAllTransfers([]), un = { _ver: [l.Lib.product.getDWTPrefix(), l.Lib.product.getServerVersionInfo()].join(""), _clientId: z._clientId }, xe && (un._clientId = xe._clientId), An = 0, Mr = iu(Qe);
                      case 8:
                        return Qn.prev = 8, Qn.next = 11, st.getImageToDWT(Ot, Mr, un);
                      case 11:
                        pn = Qn.sent, Qn.next = 21;
                        break;
                      case 14:
                        if (Qn.prev = 14, Qn.t0 = Qn.catch(8), An != 0) {
                          Qn.next = 20;
                          break;
                        }
                        throw tr = {}, n.Errors.SourceHasNothingToCapture(tr), { code: tr._errorCode, meesage: tr._errorString };
                      case 20:
                        throw Qn.t0;
                      case 21:
                        pn && (typeof pn == "number" || function() {
                          var wi = z;
                          xe && (wi = xe), yt = yt.then(function() {
                            return new n.Promise(function(Xr, Mn) {
                              var ci = qu;
                              l.navInfoSync.bAndroid && (ci = 0), wi._innerLoadImageFromBinary(pn, ci, !1, function(Da, Mo) {
                                var kr, qr;
                                n.log("LoadImageFromBinary success"), kr = n.isArray(Mo.metaData) && Mo.metaData.length > 0 ? Mo.metaData[0] : { id: Mo.ids }, qr = { imageId: parseInt(kr.id) }, ue.IfGetImageInfo !== !1 && (qr.imageInfo = { XResolution: kr.resolutionX, YResolution: kr.resolutionY, ImageWidth: kr.width, ImageLength: kr.height, BitsPerPixel: kr.bitDepth }), n.isFunction(wi._OnPostTransferAsync) && wi._OnPostTransferAsync([!0, n.stringify(qr)]), Xr();
                              }, function(Da, Mo) {
                                n.log(Mo), Mn({ code: Da, message: Mo });
                              });
                            });
                          });
                        }()), An++;
                      case 23:
                        if (pn) {
                          Qn.next = 8;
                          break;
                        }
                      case 24:
                        n.isFunction(z._OnPostAllTransfers) && z._OnPostAllTransfers([]);
                      case 25:
                      case "end":
                        return Qn.stop();
                    }
                }, Pt, null, [[8, 14]]);
              })(), "t0", 57);
            case 57:
              ft.next = 63;
              break;
            case 59:
              throw ft.prev = 59, ft.t1 = ft.catch(31), Bt = !1, ft.t1;
            case 63:
              return ft.prev = 63, z.__bAcquireImageNow = !1, ft.prev = 65, ft.next = 68, yt;
            case 68:
              ft.next = 72;
              break;
            case 70:
              ft.prev = 70, ft.t2 = ft.catch(65);
            case 72:
              return n.cancelFrom = Ze, z.__IfShowProgressBar = Ct, n.isString(it) && z._unregisterEvent("OnPostTransferAsync", it), Yn(S), Tt(Ft), ft.finish(63);
            case 78:
              return ft.abrupt("return", Bt);
            case 79:
            case "end":
              return ft.stop();
          }
      }, A, this, [[31, 59, 63, 78], [65, 70]]);
    })), function(A, S, V) {
      return r.apply(this, arguments);
    }) }, { key: "_openSourceAsync", value: function(A) {
      var S = this;
      return S._resetErr(), S._isValid() ? S._isMobileMode() ? S._mobileNotSupportAsync(A) : (S._bRemoteMode && S._initRemoteDiv(), S._innerFunV2("OpenSource").then(function(V) {
        return S.__closeRemoteScanUI(!0), V;
      }, function(V) {
        return S.__closeRemoteScanUI(!0), n.Promise.reject(V);
      })) : n.Promise.reject({ code: S._errorCode, message: S._errorString });
    } }, { key: "_closeSourceAsync", value: function(A) {
      var S = this;
      return S._resetErr(), S._isValid() ? S._isWasmWithScan() ? n.Promise.resolve(!0) : S._isMobileMode() ? S._mobileNotSupportAsync(A) : S._innerFunV2("CloseSource").then(function() {
        return S._curDevice = null, !0;
      }) : n.Promise.reject({ code: S._errorCode, message: S._errorString });
    } }, { key: "_selectSourceAsync", value: function(A, S) {
      var V = this;
      return V._resetErr(), V._isValid() ? V._isMobileMode() && !V._isWasmWithScan() ? V._mobileNotSupportAsync(A) : V._getDevicesAsync(A, S).then(function(ne) {
        var z, ue, xe = document, Fe = ne ? ne.length : 0;
        if (n.dialog.selectsourcedlg)
          return n.Errors.SystemBusy(V), n.Promise.reject({ code: V._errorCode, message: V._errorString });
        var Qe, Ze = -1;
        for ((ue = xe.createElement("dialog")).className = "dynamsoft-dialog-selectsource", l.navInfoSync.bIE && (ue.style.width = "300px"), ue.setAttribute("closed", "closed"), (Qe = []).push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">'), z = 0; z < Fe; z++) {
          var Ct = "", it = V._getSourceNameByIndex(z);
          (V.__defaultSourceName == "" && z == 0 || V.__defaultSourceName == it) && (Ct = " dynamsoft-dialog-selectsource-sourcelist-li-selected", Ze = z), Qe.push('<li class="dynamsoft-dialog-selectsource-item' + Ct + '" sourceindex=' + z + ">" + it + "</li>");
        }
        Qe.push("</ul>"), Qe = Qe.join("");
        var Bt = ["<p>", l.Lib.product.CustomizableDisplayInfo.dialogText.selectSource[0], "</p>", '<div id="dynamsoft-dialog-selectsource-sourcelist">', Qe, "</div>", '<div><input type="button" value="', l.Lib.product.CustomizableDisplayInfo.dialogText.selectSource[1], '" class="dynamsoft-dialog-selectsource-button-select">', '<input type="button" value="', l.Lib.product.CustomizableDisplayInfo.dialogText.selectSource[2], '" class="dynamsoft-dialog-selectsource-button-cancel"></div>'].join("");
        return ue.innerHTML = Bt, n.dialog.selectsourcedlg = ue, xe.body.appendChild(n.dialog.selectsourcedlg), n.each(n.all(".dynamsoft-dialog-selectsource-item"), function(yt, en) {
          n.addEventListener(yt, "click", function(Ft) {
            for (var st = Ft.target, nt = st.attributes.sourceindex.value, ft = st.parentElement.children, Pt = 0; Pt < ft.length; Pt++)
              ft[Pt].className = "dynamsoft-dialog-selectsource-item";
            st.className = "dynamsoft-dialog-selectsource-item dynamsoft-dialog-selectsource-sourcelist-li-selected", n.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex", nt);
          });
        }), n.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex", Ze.toString()), n.dialog.setup(n.dialog.selectsourcedlg), n.dialog.selectsourcedlg && n.dialog.selectsourcedlg.showModal(), xe.compatMode == "CSS1Compat" ? xe.documentElement.scrollTop : xe.body.scrollTop, new n.Promise(function(yt, en) {
          n.removeEventListener(n.one(".dynamsoft-dialog-selectsource-button-select")[0], "click"), n.removeEventListener(n.one(".dynamsoft-dialog-selectsource-button-cancel")[0], "click"), Fe > 0 && n.addEventListener(n.one(".dynamsoft-dialog-selectsource-button-select")[0], "click", function() {
            var Ft = parseInt(l.Lib.get("dynamsoft-dialog-selectsource-sourcelist-ul").attributes.selectedSourceIndex.value);
            Ft < 0 || V._selectSourceByIndexAsync(A, Ft).then(function() {
              n.dialog.selectsourcedlg && (n.dialog.selectsourcedlg.close(), document.body.removeChild(n.dialog.selectsourcedlg), n.dialog.selectsourcedlg = !1), yt(Ft);
            });
          }), n.addEventListener(n.one(".dynamsoft-dialog-selectsource-button-cancel")[0], "click", function() {
            n.dialog.selectsourcedlg && (n.dialog.selectsourcedlg.close(), document.body.removeChild(n.dialog.selectsourcedlg), n.dialog.selectsourcedlg = !1), en({ code: l.DWT.EnumDWT_Error.UserCancelled, message: "User cancelled the operation." });
          });
        });
      }) : n.Promise.reject({ code: V._errorCode, message: V._errorString });
    } }, { key: "_getCapabilities", value: function(A, S) {
      var V = this;
      if (V._isMobileMode())
        return V._mobileNotSupport("getCapabilities", S);
      var ne = function() {
        n.isFunction(S) && S(V._errorCode, V._errorString);
      };
      return !V._curDevice || (V._curDevice.deviceType & Xt) != Xt && (V._curDevice.deviceType & dn) != dn ? V._innerFunRaw("GetCapabilities", null, !0, !1, !1, function(z) {
        var ue, xe;
        z.length > 0 && (xe = z[0]);
        try {
          n.isString(xe) ? (xe = n.removeNonPrintableChar(xe), xe = n.replaceAll(xe, "\\\\", "\\\\"), ue = JSON.parse(xe)) : ue = {};
        } catch (Fe) {
          return V._errorCode = -2302, V._errorString = Fe, void ne();
        }
        ue.errorCode == 0 ? n.isFunction(A) && A(ue.response) : (V._errorCode = ue.errorCode, V._errorString = ue.errorString, ne());
      }, ne) : bi(this, eh, Xg).call(this, this._curDevice).then(A, ne);
    } }, { key: "_setCapabilities", value: function(A, S, V) {
      var ne = this;
      if (ne._isMobileMode())
        return ne._mobileNotSupport("setCapabilities", V);
      if (!n.isObject(A) || n.isArray(A))
        return n.Errors.InvalidParameter(ne), n.isFunction(V) && V(ne._errorCode, ne._getErrorString()), !1;
      if (ne._curDevice && ((ne._curDevice.deviceType & Xt) == Xt || (ne._curDevice.deviceType & dn) == dn))
        return n.Errors.ScannerNotSupport(ne, "setCapabilities"), !0;
      var z = ["[", n.stringify(A), "]"].join("");
      return ne._innerSend("SetCapabilities", z, 0, function(ue) {
        n.isFunction(S) && S(ue);
      }, V), !0;
    } }, { key: "_selectSourceByIndexAsync", value: (e = Ln(he.mark(function A(S, V) {
      var ne, z, ue;
      return he.wrap(function(xe) {
        for (; ; )
          switch (xe.prev = xe.next) {
            case 0:
              if (z = 1 * V, (ne = this)._resetErr(), ne._isValid()) {
                xe.next = 4;
                break;
              }
              return xe.abrupt("return", n.Promise.reject({ code: ne._errorCode, message: ne._errorString }));
            case 4:
              if (!ne._isMobileMode() || ne._isWasmWithScan()) {
                xe.next = 6;
                break;
              }
              return xe.abrupt("return", ne._mobileNotSupportAsync(S));
            case 6:
              if (!n.isNaN(z)) {
                xe.next = 9;
                break;
              }
              return n.Errors.InvalidIndex(ne), xe.abrupt("return", n.Promise.reject({ code: ne._errorCode, message: ne._errorString }));
            case 9:
              if (ne.__devices) {
                xe.next = 12;
                break;
              }
              return xe.next = 12, ne._getDevicesAsync(S, null);
            case 12:
              if (!(z < 0 || z >= ne.__devices.length)) {
                xe.next = 15;
                break;
              }
              return n.Errors.IndexOutOfRange(ne), xe.abrupt("return", n.Promise.reject({ code: ne._errorCode, message: ne._errorString }));
            case 15:
              return ue = ne.__devices[z], xe.abrupt("return", ne._selectDeviceAsync(S, ue));
            case 17:
            case "end":
              return xe.stop();
          }
      }, A, this);
    })), function(A, S) {
      return e.apply(this, arguments);
    }) }, { key: "_removeAllImages", value: function(A) {
      var S = this, V = !0, ne = S._isMobileMode();
      if (S._resetErr(), !S._isValid())
        return !1;
      var z = S._ImgManager.GetCurrentTag();
      if (z == "" || z == "All")
        ne ? S._OnBitmapChanged(["10", "-1", 3, -1, 0]) : ((V = S._innerFun("RemoveAllImages")) || S._errorCode == -1033) && S._OnBitmapChanged(["0", "-1", 3, -1, 0]);
      else {
        var ue, xe = function() {
        }, Fe = function() {
        }, Qe = [], Ze = "0";
        for (ne && (Ze = "10"), ue = S._getHowManyImagesInBuffer() - 1; ue >= 0; ue--) {
          var Ct = S._ImgManager.convertClientIndexToServerId(ue);
          Ct > -1 && (ne || (V = S._innerFunRaw("RemoveImage", zt(Ct), !0, !1, !0, xe, Fe)) || S._errorCode == -1033) && Qe.push(Ct);
        }
        S._OnBitmapChanged([Ze, Qe.join(","), 3, S._ImgManager.getCurrentImageIndex(), S._ImgManager.count()]);
      }
      return V;
    } }, { key: "_removeImage", value: function(A, S) {
      var V = this, ne = parseInt(S), z = !0;
      if (!$i(V, ne))
        return !1;
      var ue = V._ImgManager.convertClientIndexToServerId(ne);
      return ue == -1 ? (n.Errors.IndexOutOfRange(V), !1) : (V._isMobileMode() ? V._OnBitmapChanged(["10", "" + ue, 3, V._ImgManager.getCurrentImageIndex(), V._ImgManager.count()]) : ((z = V._innerFun("RemoveImage", zt(ue))) || V._errorCode == -1033) && V._OnBitmapChanged(["0", "" + ue, 3, V._ImgManager.getCurrentImageIndex(), V._ImgManager.count()]), z);
    } }, { key: "_imageIDToIndex", value: function(A) {
      var S, V = this, ne = -1;
      return V._resetErr(), !!V._isValid() && ((S = V._objImageIndexManager.convertGuidToServerId(A)) > 0 && (ne = V._ImgManager.convertServerIdToClientIndex(S)), ne == -1 && n.Errors.InvalidImageID(V), ne);
    } }]), M;
  }(Yg);
  function Xg(o) {
    return ah.apply(this, arguments);
  }
  function ah() {
    return (ah = Ln(he.mark(function o(e) {
      var r, t, i, a;
      return he.wrap(function(u) {
        for (; ; )
          switch (u.prev = u.next) {
            case 0:
              if (r = this, t = e ? e.deviceType : 0, r._resetErr(), !r._isMobileMode()) {
                u.next = 4;
                break;
              }
              return u.abrupt("return", r._mobileNotSupport("getCapabilities"));
            case 4:
              if (i = "", u.prev = 5, t != Xt && t != dn) {
                u.next = 14;
                break;
              }
              return r._dm && (r._dm.bLicenseOK = !1), u.next = 10, bi(r, As, su).call(r, !0);
            case 10:
              return a = u.sent, u.next = 13, a.getCapabilitiesAsync(e);
            case 13:
              i = u.sent;
            case 14:
              u.next = 21;
              break;
            case 16:
              throw u.prev = 16, u.t0 = u.catch(5), this._errorCode = u.t0.code, this._errorString = u.t0.message, u.t0;
            case 21:
              return u.prev = 21, u.finish(21);
            case 23:
              return u.abrupt("return", i);
            case 24:
            case "end":
              return u.stop();
          }
      }, o, this, [[5, 16, 21, 23]]);
    }))).apply(this, arguments);
  }
  function Qg(o) {
    var e = this;
    return new Promise(function(r, t) {
      return e._acquireImageFromService(o, function() {
        n.log("scan completed"), r(!0);
      }, function(i, a) {
        e._errorCode = i, e._errorString = a, t({ code: i, message: a });
      });
    });
  }
  function su(o) {
    return sh.apply(this, arguments);
  }
  function sh() {
    return (sh = Ln(he.mark(function o(e) {
      var r, t, i, a, u, c, d, _, v, T, M;
      return he.wrap(function(A) {
        for (; ; )
          switch (A.prev = A.next) {
            case 0:
              if ((r = this)._dm || (r._bRemoteMode && (a = (u = r._dmService) === null || u === void 0 || (c = u.attrs) === null || c === void 0 ? void 0 : c.url), r._dm = new Wa(a, !1, r._clientId, (t = r._dmService) === null || t === void 0 || (i = t.attrs) === null || i === void 0 ? void 0 : i.ty)), r._dm.bLicenseOK) {
                A.next = 29;
                break;
              }
              return d = r._bRemoteMode && (_ = (v = r._dmService) === null || v === void 0 || (T = v.attrs) === null || T === void 0 ? void 0 : T.UUID) !== null && _ !== void 0 ? _ : "", A.prev = 4, A.next = 7, hc(r, r._dm, d, !1);
            case 7:
              r._dm.bLicenseOK = !0, A.next = 29;
              break;
            case 10:
              if (A.prev = 10, A.t0 = A.catch(4), !l.navInfoSync.bAndroid || r._bRemoteMode) {
                A.next = 28;
                break;
              }
              return l.DWT.bConnectCanceled = !1, n.product.bAndroidConnected = !1, l.ShowOpenAndroidAppDialog(), A.next = 18, Sg();
            case 18:
              if (!l.DWT.bConnectCanceled) {
                A.next = 24;
                break;
              }
              throw n.asyncQueue.stop(), M = {}, n.Errors.UserCanceled(M), l.DWT.bConnectCanceled = !1, { code: M._errorCode, message: M._errorString };
            case 24:
              return r._dm && (r._dm.bLicenseOK = !1), A.next = 27, bi(r, As, su).call(r, !1);
            case 27:
              return A.abrupt("return", A.sent);
            case 28:
              throw A.t0;
            case 29:
              return A.abrupt("return", this._dm);
            case 30:
            case "end":
              return A.stop();
          }
      }, o, this, [[4, 10]]);
    }))).apply(this, arguments);
  }
  function uh(o) {
    return function(e, r) {
      var t, i, a, u = [], c = r;
      if (n.isString(c) && (c = n.parse(c)), n.isArray(c))
        for (t = 0; t < c.length; t++) {
          var d = (i = c[t], a = void 0, a = new oa(), i.deviceInfo && (a.deviceInfo = n.clone(i.deviceInfo)), i.deviceType && (a.deviceType = n.clone(i.deviceType)), i.displayName && (a.displayName = n.clone(i.displayName)), i.name && (a.name = n.clone(i.name)), i.serviceInfo && (a.serviceInfo = yu(i.serviceInfo)), a);
          u.push(d);
        }
      for (t = 0; t < u.length; t++) {
        var _ = u[t];
        _.strDevice = n.stringify(_), _.name && (_.name = n.base64.decode(_.name)), _.deviceInfo && yf(_.deviceInfo), _.serviceInfo = e == null ? void 0 : e._dmService, bf(_, e == null ? void 0 : e._dmService);
      }
      return u;
    }(this, o);
  }
  function Zg(o, e, r, t, i, a, u) {
    var c, d, _ = this, v = [];
    if (o == l.DWT.EnumDWT_ImageType.IT_BMP)
      return c = "bmp", _._mobileNotSupport("Convert to bmp", a);
    for (c = o == l.DWT.EnumDWT_ImageType.IT_JPG ? "jpg" : o == l.DWT.EnumDWT_ImageType.IT_PNG ? "png" : o == l.DWT.EnumDWT_ImageType.IT_TIF ? "tiff" : o == l.DWT.EnumDWT_ImageType.IT_PDF ? "pdf" : o == l.DWT.EnumDWT_ImageType.IT_J2K ? "jp2" : "png", d = 0; d < e.length; d++)
      v.push(_._ImgManager.convertServerIdToClientIndex(e[d]));
    return _._innerSendToMobile("SaveImage", Kr("", v, c, t, !0), 0, function(T, M, A) {
      n.isFunction(i) && i(T, u);
    }, a);
  }
  function ch(o, e, r, t, i) {
    var a = this, u = "ConvertToBlob", c = !0, d = arguments;
    n.isFunction(t) || (c = !1), n.cancelFrom = Li, n.showProgress(a, u, !1);
    var _ = function() {
      if (n.needShowTwiceShowDialog = !1, n.closeProgress(a, u), n.isFunction(i)) {
        var T = [];
        n.isArray(o) && n.each(o, function(M) {
          var A = a._ImgManager.convertServerIdToClientIndex(M);
          A > -1 && T.push(A);
        }), So(i, a, T, e, d);
      }
      return !1;
    }, v = 2;
    return a._OnPercentDone([0, -1, l.MSG.Encoding]), a.__innerConvertToBlob(e, o, r, c, v, function(T, M, A) {
      if (!T || T.size <= 0)
        return n.Errors.ConvertBlobIsEmpty(a), _();
      var S = a.__maxUploadImageSize;
      if (T.size > S && S != -1)
        return n.Errors.UploadExceededMaxSize(a), _();
      if (n.needShowTwiceShowDialog = !1, n.closeProgress(a, u), n.isFunction(t)) {
        var V = [];
        n.isArray(o) && n.each(o, function(ne) {
          var z = a._ImgManager.convertServerIdToClientIndex(ne);
          z > -1 && V.push(z);
        });
        try {
          t(T, V, d);
        } catch {
        }
        T = null;
      }
      return !!c || T;
    }, _);
  }
  function qg(o) {
    var e, r = this, t = o;
    return r._resetErr(), !!r._isValid() && (t = n.isString(t) ? n.trim(t) : "", e = r._innerFunRawV2("ProductKey", zt(t)), r.__productKey = t, e = e.then(function(i) {
      if (i) {
        if (i.exception !== void 0 && i.description !== void 0)
          throw r._errorCode = i.exception, r._errorString = i.description, r.__productKey = "", { code: r._errorCode, message: r._errorString };
        return l.DWT.ProductKey = r.__productKey, n.License.reparseProductKey(), r._innerFunRawV2("GetLicenseInfo");
      }
      throw n.Errors.LicenseEmptyOrInvalid(r), e.context = null, { code: r._errorCode, message: r._errorString };
    }));
  }
  function $g() {
    return this._isValid() ? this._innerSend("dispose", null, null, function() {
    }, function() {
    }) : n.Promise.reject();
  }
  function lh() {
    this.__defaultSourceName = "", this.__sourceCount = 0;
  }
  var em = function(o) {
    Hr(r, o);
    var e = Wc(r);
    function r() {
      return Gn(this, r), e.apply(this, arguments);
    }
    return zn(r, [{ key: "OnRefreshUI", value: function(t, i, a, u) {
      return this.__onRefreshUI(t, i, a, u);
    } }, { key: "GetCurrentDocumentName", value: function() {
      return this._innerGetCurrentDocumentName();
    } }, { key: "RegisterEvent", value: function(t, i) {
      return !!this._innerRegisterEvent(t, i);
    } }, { key: "UnregisterEvent", value: function(t, i) {
      return this._unregisterEvent(t, i);
    } }, { key: "onEvent", value: function(t, i) {
      this._innerRegisterEvent(t, i);
    } }, { key: "on", value: function(t, i) {
      this._innerRegisterEvent(t, i);
    } }]), r;
  }(oh), ds = /* @__PURE__ */ new WeakSet(), Gc = /* @__PURE__ */ new WeakSet(), jc = /* @__PURE__ */ new WeakSet(), tm = function(o) {
    Hr(u, o);
    var e, r, t, i, a = Wc(u);
    function u() {
      var c;
      Gn(this, u);
      for (var d = arguments.length, _ = new Array(d), v = 0; v < d; v++)
        _[v] = arguments[v];
      return zo(ln(c = a.call.apply(a, [this].concat(_))), jc), zo(ln(c), Gc), zo(ln(c), ds), c;
    }
    return zn(u, [{ key: "LoadImage", value: function(c, d, _) {
      var v = this, T = "LoadImage";
      if (v._resetErr(), !v._isValid())
        return !1;
      if (v._isMobileMode())
        return v._mobileNotSupport(T, _);
      var M, A, S, V = on.replaceLocalFilename(c), ne = on.getImageType(V);
      return d && n.isFunction(d) && (A = function(z) {
        d();
      }), _ && n.isFunction(_) && (S = function() {
        _(v._errorCode, v._getErrorString());
      }), M = v.__GetLoadEventsNum(), V == "" && (v.__bOpenFileNow = !0), v.__innerLoadImage(T, zt(V, M, 1), ne, !0, 1, A, S);
    } }, { key: "LoadImageEx", value: function(c, d, _, v) {
      var T = this;
      if (T._resetErr(), !T._isValid())
        return !1;
      if (T._isMobileMode()) {
        var M = n.one(".d-loadImage");
        if (M.length == 0) {
          var A = document.createElement("input");
          A._stwain = T, A.setAttribute("type", "file"), A.setAttribute("multiple", "multiple"), A.style = "position:absolute;top:-2px;left:-2px;width:1px;height:1px;", A.className = "d-loadImage", d == l.DWT.EnumDWT_ImageType.IT_BMP ? A.setAttribute("accept", "image/bmp") : d == l.DWT.EnumDWT_ImageType.IT_JPG ? A.setAttribute("accept", "image/jpeg") : d == l.DWT.EnumDWT_ImageType.IT_TIF ? A.setAttribute("accept", "image/tiff") : d == l.DWT.EnumDWT_ImageType.IT_PNG ? A.setAttribute("accept", "image/png") : d == l.DWT.EnumDWT_ImageType.IT_PDF ? A.setAttribute("accept", ".pdf") : d == l.DWT.EnumDWT_ImageType.IT_J2K ? A.setAttribute("accept", ".jp2,.j2k,.j2c") : n.env.bMobile ? A.setAttribute("accept", "image/jpeg,image/png,image/tiff,image/tif") : A.setAttribute("accept", "image/*,.pdf,.jp2,.j2k,.j2c"), A.ondoubleclick = function() {
            this.files.length > 0 && this._stwain.LoadImageFromBinary(this.files, _, v), this.value = "", this._stwain = null;
          }, A.onchange = function() {
            this.files.length > 0 && this._stwain.LoadImageFromBinary(this.files, _, v), this.value = "", this._stwain = null;
          }, document.body.appendChild(A), A.click();
        } else
          d == l.DWT.EnumDWT_ImageType.IT_BMP ? M[0].setAttribute("accept", "image/bmp") : d == l.DWT.EnumDWT_ImageType.IT_JPG ? M[0].setAttribute("accept", "image/jpeg") : d == l.DWT.EnumDWT_ImageType.IT_TIF ? M[0].setAttribute("accept", "image/tiff") : d == l.DWT.EnumDWT_ImageType.IT_PNG ? M[0].setAttribute("accept", "image/png") : d == l.DWT.EnumDWT_ImageType.IT_PDF ? M[0].setAttribute("accept", ".pdf") : d == l.DWT.EnumDWT_ImageType.IT_J2K ? M[0].setAttribute("accept", ".jp2,.j2k,.j2c") : n.env.bMobile ? M[0].setAttribute("accept", "image/jpeg,image/png,image/tiff,image/tif") : M[0].setAttribute("accept", "image/*,.pdf,.jp2,.j2k,.j2c"), M[0].value = "", M[0]._stwain = T, M[0].click();
        return !0;
      }
      var S, V, ne, z = on.replaceLocalFilename(c), ue = d;
      return _ && n.isFunction(_) && (V = function(xe) {
        _();
      }), v && n.isFunction(v) && (ne = function() {
        v(T._errorCode, T._getErrorString());
      }), ue == l.DWT.EnumDWT_ImageType.IT_ALL && (ue = -1), S = T.__GetLoadEventsNum(), z == "" && (T.__bOpenFileNow = !0), T.__innerLoadImage("LoadImageEx", zt(z, ue, S, 1), ue, !0, 1, V, ne);
    } }, { key: "HTTPDownload", value: function(c, d, _, v) {
      var T = this;
      if (T._resetErr(), !T._isValid())
        return n.Promise.reject({ code: T._errorCode, message: T._getErrorString() });
      var M = on.getImageType(d);
      return T._innerHTTPDownloadThroughGet(c, d, M, _, v);
    } }, { key: "HTTPDownloadEx", value: function(c, d, _, v, T) {
      var M = this;
      return M._resetErr(), M._isValid() ? M._isMobileMode() ? M._mobileNotSupport("HTTPDownloadEx", T) : M._innerHTTPDownloadThroughGet(c, d, _, v, T) : n.Promise.reject({ code: M._errorCode, message: M._getErrorString() });
    } }, { key: "SaveAsBMP", value: function(c, d, _, v) {
      var T = this;
      if (T._resetErr(), !T._isValid())
        return !1;
      if (T._isMobileMode())
        return T._mobileNotSupport("SaveAsBMP", v);
      if (!(n.License.checkProductKey(T, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(T, { Webcam: !0 }, !0)))
        return n.isFunction(v) && v(T._errorCode, T._getErrorString()), !1;
      var M, A = on.replaceLocalFilename(c);
      return !!za(T, d, v) && ((M = T._ImgManager.convertClientIndexToServerId(d)) == -1 ? (n.Errors.IndexOutOfRange(T), n.isFunction(v) && Zr(v, T), !1) : T.__innerSaveImage("SaveAsBMP", zt(A, M), _, v));
    } }, { key: "SaveAsJPEG", value: function(c, d, _, v) {
      var T = this;
      if (T._resetErr(), !T._isValid())
        return !1;
      if (!(n.License.checkProductKey(T, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(T, { Webcam: !0 }, !0)))
        return n.isFunction(v) && v(T._errorCode, T._getErrorString()), !1;
      if (!za(T, d, v))
        return !1;
      var M, A = on.replaceLocalFilename(c);
      return T._isMobileMode() ? A && A != "" ? T._asyncSaveImage(c, [d], "jpg", _, v) : (n.Errors.InvalidFile(T), n.isFunction(v) && Zr(v, T), !1) : (M = T._ImgManager.convertClientIndexToServerId(d)) == -1 ? (n.Errors.IndexOutOfRange(T), n.isFunction(v) && Zr(v, T), !1) : T.__innerSaveImage("SaveAsJPEG", zt(A, M), _, v);
    } }, { key: "SaveAsPDF", value: function(c, d, _, v) {
      var T = this;
      if (T._resetErr(), !T._isValid())
        return !1;
      if (!(n.License.checkProductKey(T, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(T, { Webcam: !0 }, !0)))
        return n.isFunction(v) && v(T._errorCode, T._getErrorString()), !1;
      if (!za(T, d, v))
        return !1;
      var M, A = on.replaceLocalFilename(c);
      return T._isMobileMode() ? A && A != "" ? T._asyncSaveImage(c, [d], "pdf", _, v) : (n.Errors.InvalidFile(T), n.isFunction(v) && Zr(v, T), !1) : (M = T._ImgManager.convertClientIndexToServerId(d)) == -1 ? (n.Errors.IndexOutOfRange(T), n.isFunction(v) && Zr(v, T), !1) : T.__innerSaveImage("SaveAsPDF", zt(A, M), _, v);
    } }, { key: "SaveAsPNG", value: function(c, d, _, v) {
      var T = this;
      if (T._resetErr(), !T._isValid())
        return !1;
      if (!(n.License.checkProductKey(T, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(T, { Webcam: !0 }, !0)))
        return n.isFunction(v) && v(T._errorCode, T._getErrorString()), !1;
      if (!za(T, d, v))
        return !1;
      var M, A = on.replaceLocalFilename(c);
      return T._isMobileMode() ? A && A != "" ? T._asyncSaveImage(c, [d], "png", _, v) : (n.Errors.InvalidFile(T), n.isFunction(v) && Zr(v, T), !1) : (M = T._ImgManager.convertClientIndexToServerId(d)) == -1 ? (n.Errors.IndexOutOfRange(T), n.isFunction(v) && Zr(v, T), !1) : T.__innerSaveImage("SaveAsPNG", zt(A, M), _, v);
    } }, { key: "SaveAsTIFF", value: function(c, d, _, v) {
      var T = this;
      if (T._resetErr(), !T._isValid())
        return !1;
      if (!(n.License.checkProductKey(T, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(T, { Webcam: !0 }, !0)))
        return n.isFunction(v) && v(T._errorCode, T._getErrorString()), !1;
      if (!za(T, d, v))
        return !1;
      var M, A = on.replaceLocalFilename(c);
      return T._isMobileMode() ? A && A != "" ? T._asyncSaveImage(c, [d], "tiff", _, v) : (n.Errors.InvalidFile(T), n.isFunction(v) && Zr(v, T), !1) : (M = T._ImgManager.convertClientIndexToServerId(d)) == -1 ? (n.Errors.IndexOutOfRange(T), n.isFunction(v) && Zr(v, T), !1) : T.__innerSaveImage("SaveAsTIFF", zt(A, M), _, v);
    } }, { key: "SaveSelectedImagesAsMultiPagePDF", value: function(c, d, _) {
      var v = this;
      if (v._resetErr(), !v._isValid())
        return !1;
      if (!(n.License.checkProductKey(v, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(v, { Webcam: !0 }, !0)))
        return n.isFunction(_) && _(v._errorCode, v._getErrorString()), !1;
      var T = on.replaceLocalFilename(c);
      if (v._isMobileMode()) {
        if (!T || T == "")
          return n.Errors.InvalidFile(v), n.isFunction(_) && Zr(_, v), !1;
        var M = $d(v);
        return v._asyncSaveImage(c, M, "pdf", d, _);
      }
      var A = Is(v);
      return v.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF", zt(T, A.join(",")), d, _);
    } }, { key: "SaveSelectedImagesAsMultiPageTIFF", value: function(c, d, _) {
      var v = this;
      if (v._resetErr(), !v._isValid())
        return !1;
      if (!(n.License.checkProductKey(v, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(v, { Webcam: !0 }, !0)))
        return n.isFunction(_) && _(v._errorCode, v._getErrorString()), !1;
      var T = on.replaceLocalFilename(c);
      if (v._isMobileMode()) {
        if (!T || T == "")
          return n.Errors.InvalidFile(v), n.isFunction(_) && Zr(_, v), !1;
        var M = $d(v);
        return v._asyncSaveImage(c, M, "tiff", d, _);
      }
      var A = Is(v);
      return v.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF", zt(T, A.join(",")), d, _);
    } }, { key: "SaveAllAsMultiPageTIFF", value: function(c, d, _) {
      var v = this;
      if (v._resetErr(), !v._isValid())
        return !1;
      if (!(n.License.checkProductKey(v, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(v, { Webcam: !0 }, !0)))
        return n.isFunction(_) && _(v._errorCode, v._getErrorString()), !1;
      if (!Xu(v, _))
        return !1;
      var T = [], M = on.replaceLocalFilename(c);
      if (v._isMobileMode()) {
        if (!M || M == "")
          return n.Errors.InvalidFile(v), n.isFunction(_) && Zr(_, v), !1;
        for (var A = [], S = 0; S < v.HowManyImagesInBuffer; S++)
          A.push(S);
        return v._asyncSaveImage(c, A, "tiff", d, _);
      }
      return Iu(v, T), v.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF", zt(M, T.join(",")), d, _);
    } }, { key: "SaveAllAsPDF", value: function(c, d, _) {
      var v = this;
      if (v._resetErr(), !v._isValid())
        return !1;
      if (!(n.License.checkProductKey(v, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(v, { Webcam: !0 }, !0)))
        return n.isFunction(_) && _(v._errorCode, v._getErrorString()), !1;
      if (!Xu(v, _))
        return !1;
      var T = [], M = on.replaceLocalFilename(c);
      if (v._isMobileMode()) {
        if (!M || M == "")
          return n.Errors.InvalidFile(v), n.isFunction(_) && Zr(_, v), !1;
        for (var A = [], S = 0; S < v.HowManyImagesInBuffer; S++)
          A.push(S);
        return v._asyncSaveImage(c, A, "pdf", d, _);
      }
      return Iu(v, T), v.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF", zt(M, T.join(",")), d, _);
    } }, { key: "HTTPUpload", value: function(c, d, _, v, T, M, A) {
      var S = this;
      return S._resetErr(), !!S._isValid() && (arguments.length <= 3 ? Rg(S, arguments) : Lg(S, arguments));
    } }, { key: "HTTPUploadThroughPost", value: function(c, d, _, v, T, M, A) {
      var S = this;
      if (S._resetErr(), !S._isValid())
        return !1;
      if (S._isMobileMode())
        return S._mobileNotSupport("HTTPUploadThroughPost", M);
      var V = on.getImageType(v), ne = arguments, z = !1, ue = function(xe) {
        return n.isFunction(M) && So(M, S, S.__HTTPPostResponseString, xe, ne), !1;
      };
      return n.isString(v) && v != "" ? (T && n.isFunction(T) && (z = function(xe, Fe) {
        return Vi(T, S.__HTTPPostResponseString, Fe, ne), !0;
      }), !!qd(S, d, V, ue) && bi(S, ds, Rs).call(S, c, d, _, v, V, z, ue, A)) : (n.Errors.UploadFileCannotEmpty(S), ue());
    } }, { key: "HTTPUploadThroughPostEx", value: function(c, d, _, v, T, M, A, S) {
      var V = this;
      if (V._resetErr(), !V._isValid())
        return !1;
      if (V._isMobileMode())
        return V._mobileNotSupport("HTTPUploadThroughPostEx", A);
      var ne = arguments, z = !1, ue = function(xe) {
        return n.isFunction(A) && So(A, V, V.__HTTPPostResponseString, xe, ne), !1;
      };
      return n.isString(v) && v != "" ? (M && n.isFunction(M) && (z = function(xe, Fe) {
        return Vi(M, V.__HTTPPostResponseString, Fe, ne), !0;
      }), !!qd(V, d, T, ue) && bi(V, ds, Rs).call(V, c, d, _, v, T, z, ue, S)) : (n.Errors.UploadFileCannotEmpty(V), ue());
    } }, { key: "HTTPUploadAllThroughPostAsMultiPageTIFF", value: function(c, d, _, v, T, M) {
      var A = this;
      if (A._resetErr(), !A._isValid())
        return !1;
      if (A._isMobileMode())
        return A._mobileNotSupport("HTTPUploadAllThroughPostAsMultiPageTIFF", T);
      var S = -1, V = 2, ne = arguments, z = !1, ue = function(xe) {
        return n.isFunction(T) && So(T, A, A.__HTTPPostResponseString, xe, ne), !1;
      };
      return n.isString(_) && _ != "" ? (v && n.isFunction(v) && (z = function(xe, Fe) {
        return Vi(v, A.__HTTPPostResponseString, Fe, ne), !0;
      }), bi(A, ds, Rs).call(A, c, S, d, _, V, z, ue, M)) : (n.Errors.UploadFileCannotEmpty(A), ue());
    } }, { key: "HTTPUploadAllThroughPostAsPDF", value: function(c, d, _, v, T, M) {
      var A = this;
      if (A._resetErr(), !A._isValid())
        return !1;
      if (A._isMobileMode())
        return A._mobileNotSupport("HTTPUploadAllThroughPostAsPDF", T);
      var S = -1, V = 4, ne = arguments, z = !1, ue = function(xe) {
        return n.isFunction(T) && So(T, A, A.__HTTPPostResponseString, xe, ne), !1;
      };
      return n.isString(_) && _ != "" ? (v && n.isFunction(v) && (z = function(xe, Fe) {
        return Vi(v, A.__HTTPPostResponseString, Fe, ne), !0;
      }), bi(A, ds, Rs).call(A, c, S, d, _, V, z, ue, M)) : (n.Errors.UploadFileCannotEmpty(A), ue());
    } }, { key: "HTTPUploadThroughPostAsMultiPagePDF", value: function(c, d, _, v, T, M) {
      var A = this;
      if (A._resetErr(), !A._isValid())
        return !1;
      if (A._isMobileMode())
        return A._mobileNotSupport("HTTPUploadThroughPostAsMultiPagePDF", T);
      var S = -2, V = 4, ne = arguments, z = !1, ue = function(xe) {
        return n.isFunction(T) && So(T, A, A.__HTTPPostResponseString, xe, ne), !1;
      };
      return n.isString(_) && _ != "" ? (v && n.isFunction(v) && (z = function(xe, Fe) {
        return Vi(v, A.__HTTPPostResponseString, Fe, ne), !0;
      }), bi(A, ds, Rs).call(A, c, S, d, _, V, z, ue, M)) : (n.Errors.UploadFileCannotEmpty(A), ue());
    } }, { key: "HTTPUploadThroughPostAsMultiPageTIFF", value: function(c, d, _, v, T, M) {
      var A = this;
      if (A._resetErr(), !A._isValid())
        return !1;
      if (A._isMobileMode())
        return A._mobileNotSupport("HTTPUploadThroughPostAsMultiPageTIFF", T);
      var S = -2, V = 2, ne = arguments, z = !1, ue = function(xe) {
        return n.isFunction(T) && So(T, A, A.__HTTPPostResponseString, xe, ne), !1;
      };
      return n.isString(_) && _ != "" ? (v && n.isFunction(v) && (z = function(xe, Fe) {
        return Vi(v, A.__HTTPPostResponseString, Fe, ne), !0;
      }), bi(A, ds, Rs).call(A, c, S, d, _, V, z, ue, M)) : (n.Errors.UploadFileCannotEmpty(A), ue());
    } }, { key: "GetSourceNamesAsync", value: (i = Ln(he.mark(function c(d) {
      var _;
      return he.wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              if ((_ = this)._resetErr(), _._isValid()) {
                v.next = 4;
                break;
              }
              throw { code: _._errorCode, message: _._errorString };
            case 4:
              if (!_._isMobileMode()) {
                v.next = 6;
                break;
              }
              return v.abrupt("return", _._mobileNotSupportAsync("GetSourceNamesAsync"));
            case 6:
              return fr("GetSourceNamesAsync", _), v.prev = 7, v.next = 10, _._getSourceCountAsync(_._driverType);
            case 10:
              v.next = 15;
              break;
            case 12:
              throw v.prev = 12, v.t0 = v.catch(7), v.t0;
            case 15:
              return v.prev = 15, Yn("GetSourceNamesAsync"), v.finish(15);
            case 18:
              if (!d) {
                v.next = 22;
                break;
              }
              return v.abrupt("return", bi(_, Gc, dh).call(_));
            case 22:
              return v.abrupt("return", bi(_, jc, hh).call(_));
            case 23:
            case "end":
              return v.stop();
          }
      }, c, this, [[7, 12, 15, 18]]);
    })), function(c) {
      return i.apply(this, arguments);
    }) }, { key: "SelectSourceAsync", value: function(c) {
      return this._selectSourceAsync("SelectSourceAsync", c);
    } }, { key: "SelectSourceByIndexAsync", value: function(c) {
      return this._selectSourceByIndexAsync("SelectSourceByIndex", c);
    } }, { key: "OpenSourceAsync", value: function() {
      return this._openSourceAsync("OpenSourceAsync");
    } }, { key: "CloseSourceAsync", value: function() {
      return this._closeSourceAsync("CloseSourceAsync");
    } }, { key: "OpenSourceManagerAsync", value: function() {
      var c = this;
      return c._resetErr(), c._isValid() ? c._isMobileMode() ? c._mobileNotSupportAsync("OpenSourceManager") : c._innerFunV2("OpenSourceManager") : n.Promise.reject({ code: c._errorCode, message: c._errorString });
    } }, { key: "CloseSourceManagerAsync", value: function() {
      var c = this;
      return c._resetErr(), c._isValid() ? c._isMobileMode() ? c._mobileNotSupportAsync("CloseSourceManager") : c._innerFunV2("CloseSourceManager") : n.Promise.reject({ code: c._errorCode, message: c._errorString });
    } }, { key: "getCapabilities", value: function(c, d) {
      return this._getCapabilities(c, d);
    } }, { key: "setCapabilities", value: function(c, d, _) {
      return this._setCapabilities(c, d, _);
    } }, { key: "AcquireImage", value: function(c, d, _) {
      var v, T = this, M = null, A = null;
      if (T._resetErr(), !T._isValid())
        return !1;
      if (!T._isWasmWithScan()) {
        if (T._isMobileMode())
          return T._mobileNotSupportAsync("AcquireImage");
      }
      return n.isUndefined(_) && (n.isFunction(c) && n.isFunction(d) || n.isFunction(c) && n.isUndefined(d) || n.isFunction(c) && d == null || c == null && n.isFunction(d)) ? (v = {}, n.isFunction(c) && (M = c), n.isFunction(d) && (A = function(S) {
        S && S.code && (T._errorCode = S.code, T._errorString = S.message), d(T._errorCode, T._errorString);
      })) : (v = n.isUndefined(c) || c == null ? {} : n.clone(c), n.isFunction(d) && (M = function() {
        d(v);
      }), n.isFunction(_) && (A = function(S) {
        S && S.code && (T._errorCode = S.code, T._errorString = S.message), _(v, T._errorCode, T._errorString);
      })), M || (M = function() {
      }), A || (A = function(S) {
        S && S.code && (T._errorCode = S.code, T._errorString = S.message);
      }), T.AcquireImageAsync(v).then(M, A), !on.isServerInvalid(T);
    } }, { key: "GetDevicesAsync", value: (t = Ln(he.mark(function c(d, _, v) {
      return he.wrap(function(T) {
        for (; ; )
          switch (T.prev = T.next) {
            case 0:
              return T.abrupt("return", this._getDevicesAsync("GetDevicesAsync", d, _, v));
            case 1:
            case "end":
              return T.stop();
          }
      }, c, this);
    })), function(c, d, _) {
      return t.apply(this, arguments);
    }) }, { key: "SelectDeviceAsync", value: (r = Ln(he.mark(function c(d, _) {
      return he.wrap(function(v) {
        for (; ; )
          switch (v.prev = v.next) {
            case 0:
              return v.abrupt("return", this._selectDeviceAsync("SelectDeviceAsync", d, _));
            case 1:
            case "end":
              return v.stop();
          }
      }, c, this);
    })), function(c, d) {
      return r.apply(this, arguments);
    }) }, { key: "AcquireImageAsync", value: (e = Ln(he.mark(function c(d) {
      return he.wrap(function(_) {
        for (; ; )
          switch (_.prev = _.next) {
            case 0:
              return _.abrupt("return", this._acquireImageAsync("AcquireImageAsync", d, this));
            case 1:
            case "end":
              return _.stop();
          }
      }, c, this);
    })), function(c) {
      return e.apply(this, arguments);
    }) }, { key: "ImageIDToIndex", value: function(c) {
      return this._imageIDToIndex(c);
    } }, { key: "IndexToImageID", value: function(c) {
      var d = this;
      if (d._resetErr(), !d._isValid())
        return !1;
      var _ = parseInt(c);
      if (isNaN(_))
        return n.Errors.InvalidIndex(d), -1;
      if (_ < 0 || _ >= d._ImgManager.count())
        return n.Errors.IndexOutOfRange(d), -1;
      var v = d._ImgManager.convertClientIndexToServerId(_);
      return d._objImageIndexManager.convertServerIdToGuid(v);
    } }, { key: "RemoveImage", value: function(c) {
      return this._removeImage("RemoveImage", c);
    } }, { key: "RemoveAllImages", value: function() {
      return this._removeAllImages("RemoveAllImages");
    } }, { key: "_innerGetSourceNamesSync", value: function(c) {
      var d = this;
      return d._isMobileMode() ? d._mobileNotSupport("GetSourceNames") : (d._getSourceCountSync(), c ? bi(d, Gc, dh).call(d) : bi(d, jc, hh).call(d));
    } }, { key: "_innerHTTPDownloadThroughGet", value: function(c, d, _, v, T) {
      var M = this, A = jo(M), S = on.combineUrl(M, c, d);
      if (S === void 0)
        return n.Errors.ParameterCannotEmpty(M), n.isFunction(T) && Zr(T, M), vt;
      if (M._isMobileMode()) {
        if (!n.License.checkProductKey(M, { Core: !0 }))
          return n.isFunction(T) && Zr(T, M), vt;
      } else if (!n.License.checkProductKey(M, { Core: !0 }) || !n.License.checkPDFProductKeyWhenNeeds(M, _))
        return n.isFunction(T) && Zr(T, M), vt;
      n.cancelFrom = Qi, n.showProgress(M, "HTTPDownloadThroughGet", Gt);
      var V = function(ue) {
        var xe = ue.total === 0 ? 100 : Math.round(100 * ue.loaded / ue.total);
        [ue.loaded, " / ", ue.total].join(""), M._OnPercentDone([0, xe, "", "http"]);
      }, ne = Gt;
      M._OnPercentDone([0, -1, l.MSG.Downloading, "http"]), n.isFunction(v) || (ne = vt);
      var z = M._innerGetCurrentDocumentName();
      return z == "" && M._ImgManager && (z = M._ImgManager.getWebViewer().GetDefaultFileName()), n.log("_innerHTTPDownloadThroughGet.currentFileName:" + z), M._isMobileMode() ? on.loadHttpBlob(M, "get", S, ne, function(ue) {
        M._OnPercentDone([0, -1, l.MSG.Loading]), ue.currentFileName = z, n.log("00b.currentFileName:" + z), M._innerLoadImageFromBinary(ue, 0, !0, function() {
          l.Lib.closeProgress(M, ""), n.isFunction(v) && v();
        }, function() {
          n.closeProgress(M, "HTTPDownloadThroughGet"), n.isFunction(T) && Zr(T, M);
        });
      }, function() {
        n.closeProgress(M, "HTTPDownloadThroughGet"), n.isFunction(T) && Zr(T, M);
      }, V, A) : on.loadHttpBlob(M, "get", S, ne, function(ue) {
        M._OnPercentDone([0, -1, l.MSG.Loading]);
        var xe = _;
        xe != l.DWT.EnumDWT_ImageType.IT_BMP && xe != l.DWT.EnumDWT_ImageType.IT_JPG && xe != l.DWT.EnumDWT_ImageType.IT_TIF && xe != l.DWT.EnumDWT_ImageType.IT_PNG && xe != l.DWT.EnumDWT_ImageType.IT_PDF && xe != l.DWT.EnumDWT_ImageType.IT_J2K && (xe = -1), ue.currentFileName = z, n.log("11b.currentFileName:" + z);
        var Fe = M.__GetLoadEventsNum();
        M.__LoadImageFromBytesV1(ue, xe, "", Fe, ne, function() {
          l.Lib.closeProgress(M, ""), n.isFunction(v) && v();
        }, function() {
          n.closeProgress(M, "HTTPDownloadThroughGet"), n.isFunction(T) && Zr(T, M);
        });
      }, function() {
        n.closeProgress(M, "HTTPDownloadThroughGet"), n.isFunction(T) && Zr(T, M);
      }, V, A);
    } }, { key: "Viewer", get: function() {
      return this._viewer;
    } }, { key: "ErrorCode", get: function() {
      return this._errorCode;
    } }, { key: "ErrorString", get: function() {
      return this._getErrorString();
    } }, { key: "HowManyImagesInBuffer", get: function() {
      return this._getHowManyImagesInBuffer();
    } }, { key: "Addon", get: function() {
      return this.__addon;
    } }, { key: "objImageIndexManager", get: function() {
      return this._objImageIndexManager;
    } }]), u;
  }(em);
  function Rs(o, e, r, t, i, a, u, c) {
    var d, _, v = this, T = "HTTPUploadThroughPostEx", M = on.combineUrl(v, o, r), A = !0, S = !1, V = [], ne = function(Fe) {
      return n.isFunction(u) && u(Fe), !1;
    };
    if (v.__HTTPPostResponseString = "", n.isNumber(e)) {
      if (e < -2)
        return n.Errors.IndexOutOfRange(v), ne(e);
    } else if (!n.isArray(e))
      return n.Errors.IndexOutOfRange(v), ne(e);
    if (!n.isString(t) || t == "")
      return n.Errors.UploadFileCannotEmpty(v), ne();
    if (n.isUndefined(i))
      return n.Errors.InvalidImageType(v), ne(e);
    if (i == l.DWT.EnumDWT_ImageType.IT_BMP || i == l.DWT.EnumDWT_ImageType.IT_JPG || i == l.DWT.EnumDWT_ImageType.IT_PNG || i == l.DWT.EnumDWT_ImageType.IT_J2K) {
      if (e == -1 && v._ImgManager.count() > 1 || n.isArray(e) && e.length > 1)
        return n.Errors.UploadIndexMoreThanOne(v), ne(e);
      n.isArray(e) ? V.push(e[0]) : e == -1 ? V.push(0) : V.push(e);
    } else {
      if (i != l.DWT.EnumDWT_ImageType.IT_TIF && i != l.DWT.EnumDWT_ImageType.IT_PDF)
        return n.Errors.InvalidImageType(v), ne(e);
      if (e == -1) {
        if (v._ImgManager.count() == 0)
          return n.Errors.NoImage(v), ne();
        for (_ = 0; _ < v._ImgManager.count(); _++)
          V.push(_);
      } else if (e == -2)
        V = v._ImgManager.getSelectedClientIndexArray();
      else if (n.isArray(e))
        for (_ = 0; _ < e.length; _++)
          V.push(e[_]);
      else
        V.push(e);
    }
    if (v._isMobileMode() ? A = !0 : n.isFunction(a) || (A = !1), o === "")
      return n.Errors.HttpServerCannotEmpty(v), ne(V);
    if (n.isUndefined(M) || M === "")
      return n.Errors.ParameterCannotEmpty(v), ne(V);
    if (!n.isString(M))
      return n.Errors.InvalidUrl(v), ne(V);
    if (M.indexOf("http://") != 0 && M.indexOf("https://") != 0 && (M = n.detect.ssl ? "https://" + M : "http://" + M), !v._checkIndices(V) && V != -1)
      return ne(V);
    var z = [];
    if (n.isArray(V) && n.each(V, function(Fe) {
      var Qe = v._ImgManager.convertClientIndexToServerId(Fe);
      Qe != -1 && z.push(Qe);
    }), v._resetErr(), !v._isValid())
      return !1;
    if (A)
      return d = { bOnlyUploadForm: vt, method: "HTTPUploadThroughPostEx", _this: v, url: M, serverIds: z, enumImageType: i, saveSetup: !1, fileName: t, retry: 0, bOnlyEmptyIsOK: !0, objUploadFileStatus: !1, dataFormat: l.DWT.EnumDWT_UploadDataFormat.Binary, asyncSuccessFunc: a, asyncFailureFunc: ne }, n._asyncUploadCmd(d), !0;
    n.cancelFrom = ei;
    var ue = function() {
      return n.needShowTwiceShowDialog = !1, n.closeProgress(v, T), ne(V), !1;
    };
    n.needShowTwiceShowDialog = !0, n.showProgress(v, T, !1);
    var xe = jo(v);
    return v._OnPercentDone([0, -1, l.MSG.Encoding, "http"]), v.__innerConvertToBlob(i, z, !1, A, 4, function(Fe, Qe, Ze) {
      if (n.needShowTwiceShowDialog = !1, Fe && (n.dlgRef > 0 || v.__IfShowCancelDialogWhenImageTransfer == 0 || A == 0)) {
        var Ct = v.__maxUploadImageSize;
        return Fe.size > Ct && Ct != -1 ? (n.Errors.UploadExceededMaxSize(v), ue()) : (l.DWT.IfAddMD5InUploadHeader && Qe && Qe != "" && (xe["dwt-md5"] = Qe), Fe instanceof File ? Fe.fileName = t : Fe.name = t, da(v, !0), on.httpPostUpload(v, M, Fe, A, 0, xe, !0, 0, !0, !1, function(it) {
          return n.closeProgress(v, T), S = !0, !0;
        }, ue));
      }
      return ue();
    }, ue), S;
  }
  function dh() {
    var o, e, r = [], t = this.__devices.length;
    for (o = 0; o < t; o++) {
      var i = this.__devices[o], a = i.deviceType, u = { ProductName: "", DeviceInfo: {}, DriverType: "", IsCurrentSource: !1, IsDefaultSource: !1, Manufacturer: "", ProductFamily: "", ProtocolMajor: 0, ProtocolMinor: 0, SupportedGroups: 0, Version: { Country: 0, Info: "", Language: 0, MajorNum: 0, MinorNum: 0 } }, c = void 0;
      if (Tu(a))
        a == Xt ? c = "eSCL" : a == dn && (c = "WiFiScanner");
      else {
        var d = n.clone(i.deviceInfo);
        (e = a) == Ne || e == bt || e == Ut ? (a == Ne ? c = "TWAIN" : a == bt ? c = "WIATWAIN" : a == Ut && (c = "TWAIN64"), u.Manufacturer = d.Manufacturer, u.ProductFamily = d.ProductFamily, u.ProtocolMajor = d.ProtocolMajor, u.ProtocolMinor = d.ProtocolMinor, u.SupportedGroups = d.SupportedGroups, u.Version = d.Version) : a == rt ? (c = "SANE", u.DeviceInfo = d) : a == Zt && (c = "ICA", u.DeviceInfo = d);
      }
      u.ProductName = i.displayName, u.DriverType = c, r.push(u);
    }
    return r;
  }
  function hh() {
    var o, e = [], r = this.__devices.length;
    for (o = 0; o < r; o++) {
      var t = this.__devices[o];
      e.push(t.displayName);
    }
    return e;
  }
  function nm(o) {
    o.Resolution !== void 0 && (o.Resolution = parseInt(o.Resolution)), o.PixelType !== void 0 && (o.PixelType = parseInt(o.PixelType)), o.SelectSourceByIndex !== void 0 && (o.SelectSourceByIndex = parseInt(o.SelectSourceByIndex));
  }
  function zc(o, e, r, t) {
    if (o._blts)
      if (r) {
        var i = r.code || r.ltsErrorCode;
        i == 111 && !l.DWT.isPublicLicense() || i == 106 || i == 108 ? (n.Errors.LicenseNoCore(o, e, i), r = { code: o._errorCode, message: o._errorString }) : (o._errorCode = i, o._errorString = r.message), l.DWT.lsetException(i, r.message, !0), t && l.DWT.OnLicenseException();
      } else
        l.navInfoSync.bAndroid ? n.License.checkAndroidServiceCore(o) : n.License.checkProductKey(o, { Core: !0 }, !0, t);
    else
      o._errorCode = r.code, o._errorString = r.message, t && l.OnLicenseError(r.message, r.code);
  }
  function Hc(o) {
    return fh.apply(this, arguments);
  }
  function fh() {
    return (fh = Ln(he.mark(function o(e) {
      return he.wrap(function(r) {
        for (; ; )
          switch (r.prev = r.next) {
            case 0:
              return e.__bConnecting = !0, r.prev = 1, r.next = 4, e._reconnect();
            case 4:
              r.next = 9;
              break;
            case 6:
              r.prev = 6, r.t0 = r.catch(1), e._heartBeatTimer = setTimeout(function() {
                Hc(e);
              }, e._heartBeatTicks);
            case 9:
              return r.prev = 9, e.__bConnecting = !1, r.finish(9);
            case 12:
            case "end":
              return r.stop();
          }
      }, o, null, [[1, 6, 9, 12]]);
    }))).apply(this, arguments);
  }
  function rm(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  var im = function(o) {
    Hr(r, o);
    var e = rm(r);
    function r() {
      return Gn(this, r), e.apply(this, arguments);
    }
    return zn(r, [{ key: "_innerSendToMobile", value: function(t, i, a, u, c) {
      var d = this;
      return d._isMobileMode() ? t == "GetLicenseInfo" || t == "SetLTSLicense" ? (fr(t, d), Kd(d, i).then(function(_) {
        Yn(t), n.isFunction(u) && u(_);
      }, function(_) {
        Yn(t), n.Errors.GetLicenseInfoFailed(d, _), c && c(d._errorCode, d._getErrorString());
      })) : n.License.checkProductKey(d, { Core: !0 }, !0) ? (t == "SaveImage" ? Hd(d, i).then(function(_) {
        var v = _.blobData;
        u && u(v, _.type, _.MD5);
      }, function() {
        n.isFunction(c) && c(d._errorCode, d._getErrorString());
      }) : d._innerSendToMobileV2(t, i).then(u, function() {
        n.isFunction(c) && c(d._errorCode, d._getErrorString());
      }), !0) : (c && c(d._errorCode, d._getErrorString()), !1) : (n.Errors.ServiceNotSupport(d, t), c && c(d._errorCode, d._getErrorString()), !1);
    } }, { key: "_innerSendToMobileV2", value: function(t, i) {
      var a = this;
      return a._isMobileMode() ? t == "GetLicenseInfo" || t == "SetLTSLicense" ? Kd(a, i) : n.License.checkProductKey(a, { Core: !0 }, !0) ? t == "LoadImageFromBinary" ? jd(a, i) : t == "RotateEx" ? function(u, c) {
        var d = c[0], _ = c[1], v = c[2], T = c[3], M = c[4];
        n.isUndefined(_) && (_ = 0), n.isUndefined(v) && (v = !0), (n.isUndefined(T) || T < 1 || T > 3) && (T = 3), n.isUndefined(M) && (M = "FFFFFF"), _ < 0 ? _ = _ % 360 + 360 : _ >= 360 && (_ %= 360), fr("", u);
        var A = Io(), S = u._ImgManager.convertClientIndexToServerId(d);
        return A.context = {}, u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(V) {
          return A.context.metadata = V && V.metadata ? V.metadata : {}, A.initImage(V.oriData);
        }).then(function() {
          if (_ != 0)
            return A.rotate(_, M, v, T);
        }).then(function() {
          return A.getImage();
        }).then(function(V) {
          if (l.navInfoSync.bMobile || l.navInfoSync.bPad) {
            var ne = u._jpgQuality, z = 3840;
            if (V && (V.imageWidth > z || V.imageHeight > z))
              return l.ImageProcWrapper.resizeImageWithMeta(V.imageData, V, 5, ne, z);
          }
          return V;
        }).then(function(V) {
          "width" in V && (V.imageWidth = V.imageWidth), "height" in V && (V.imageHeight = V.imageHeight);
          var ne = { src: V.imageData, imgType: n.MobileFuns.convertOutputType(V.imageType), dataType: "url", metadata: { width: V.imageWidth, height: V.imageHeight } }, z = !1;
          try {
            u._OnBitmapChanged(["10", "" + S, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), ne]);
          } catch (ue) {
            z = !0, n.Errors.SystemExceptionError(u, ue.message);
          }
          if (Yn(""), A.terminate(), z)
            throw { code: u._errorCode, message: u._getErrorString() };
        }, function(V) {
          throw n.Errors.RotateFailed(u, V), Yn(""), A.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "Flip" ? function(u, c) {
        return zd(u, c[0], 1);
      }(a, i) : t == "Mirror" ? function(u, c) {
        return zd(u, c[0], -1);
      }(a, i) : t == "Invert" ? function(u, c) {
        var d = c[0], _ = Io(), v = u._ImgManager.convertClientIndexToServerId(d);
        return _.context = {}, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(T) {
          return _.context.metadata = T && T.metadata ? T.metadata : {}, _.initImage(T.oriData);
        }).then(function() {
          return _.invert();
        }).then(function() {
          return _.getImage();
        }).then(function(T) {
          var M = { src: T.imageData, imgType: n.MobileFuns.convertOutputType(T.imageType), dataType: "url" };
          try {
            u._OnBitmapChanged(["10", "" + v, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), M]);
          } catch (A) {
            throw n.Errors.SystemExceptionError(u, A.message), 0;
          }
        }).then(function() {
          Yn(""), _.terminate();
        }, function(T) {
          throw Yn(""), T && n.Errors.InvertFailed(u, T), _.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "SaveImage" ? Hd(a, i) : t == "Crop" ? function(u, c) {
        var d = c[0], _ = c[1], v = c[2], T = c[3], M = c[4];
        if (!(n.isNumber(_) && n.isNumber(v) && n.isNumber(T) && n.isNumber(M)))
          return n.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(u), n.Promise.reject({ code: u._errorCode, message: u._getErrorString() });
        var A = Io(), S = u._ImgManager.convertClientIndexToServerId(d);
        return A.context = {}, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(V) {
          return A.context.metadata = V && V.metadata ? V.metadata : {}, A.initImage(V.oriData);
        }).then(function() {
          return A.crop(_, v, T, M);
        }).then(function() {
          return A.getImage();
        }).then(function(V) {
          var ne = { src: V.imageData, imgType: n.MobileFuns.convertOutputType(V.imageType), dataType: "url", metadata: { imageData: V.imageData, width: V.imageWidth, height: V.imageHeight } };
          try {
            u._OnBitmapChanged(["10", "" + S, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), ne]);
          } catch (z) {
            throw n.Errors.SystemExceptionError(u, z.message), 0;
          }
        }).then(function() {
          Yn(""), A.terminate();
        }, function(V) {
          throw Yn(""), V && n.Errors.CropFailed(u, V), A.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "Erase" ? function(u, c) {
        var d = c[0], _ = c[1], v = c[2], T = c[3], M = c[4], A = c[5];
        if (!(n.isNumber(_) && n.isNumber(v) && n.isNumber(T) && n.isNumber(M)))
          return n.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(u), n.Promise.reject({ code: u._errorCode, message: u._getErrorString() });
        n.isUndefined(A) && (A = "FFFFFF");
        var S = Io(), V = u._ImgManager.convertClientIndexToServerId(d);
        return S.context = {}, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(ne) {
          return S.context.metadata = ne && ne.metadata ? ne.metadata : {}, S.initImage(ne.oriData);
        }).then(function() {
          return S.erase(_, v, T, M, A);
        }).then(function() {
          return S.getImage();
        }).then(function(ne) {
          var z = { src: ne.imageData, imgType: n.MobileFuns.convertOutputType(ne.imageType), dataType: "url", metadata: { imageData: ne.imageData, width: ne.imageWidth, height: ne.imageHeight } };
          try {
            u._OnBitmapChanged(["10", "" + V, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), z]);
          } catch (ue) {
            throw n.Errors.SystemExceptionError(u, ue.message), 0;
          }
        }).then(function() {
          Yn(""), S.terminate();
        }, function(ne) {
          throw Yn(""), ne && n.Errors.EraseFailed(u, ne), S.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "ChangeImageSize" ? function(u, c) {
        var d = c[0], _ = c[1], v = c[2], T = c[3];
        if (!n.isNumber(_))
          return n.Errors.MobileServer_InvalidWidth(u), n.Promise.reject({ code: u._errorCode, message: u._getErrorString() });
        if (!n.isNumber(v))
          return n.Errors.MobileServer_InvalidHeight(u), n.Promise.reject({ code: u._errorCode, message: u._getErrorString() });
        n.isUndefined(T) && (T = 5);
        var M = Io(), A = u._ImgManager.convertClientIndexToServerId(d);
        return M.context = {}, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(S) {
          return M.context.metadata = S && S.metadata ? S.metadata : {}, M.initImage(S.oriData);
        }).then(function() {
          var S = M.context.metadata.bitDepth == 1;
          return M.resize(_, v, T, 5, S);
        }).then(function() {
          return M.getImage();
        }).then(function(S) {
          var V = { src: S.imageData, imgType: n.MobileFuns.convertOutputType(S.imageType), dataType: "url", metadata: { imageData: S.imageData, width: S.imageWidth, height: S.imageHeight } };
          try {
            u._OnBitmapChanged(["10", "" + A, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), V]);
          } catch (ne) {
            throw n.Errors.SystemExceptionError(u, ne.message), 0;
          }
        }).then(function() {
          Yn(""), M.terminate();
        }, function(S) {
          throw Yn(""), S && n.Errors.ChangeImageSizeFailed(u, S), M.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "GetSkewAngleOnly" ? function(u, c) {
        var d = c[0], _ = Io();
        u._ImgManager.convertClientIndexToServerId(d), _.context = {}, fr("", u);
        var v = u._ImgManager.getWebViewer().GetMinPageData();
        if (v)
          return _.initImage(v.data, !0, v.width, v.height).then(function() {
            return _.getSkewAngle();
          }).then(function(T) {
            return Yn(""), delete _.context, _.terminate(), T;
          }, function(T) {
            throw Yn(""), n.Errors.SkewAngleFailed(u, T), _.terminate(), { code: u._errorCode, message: u._getErrorString() };
          });
      }(a, i) : t == "GetSkewAngle" ? function(u, c) {
        var d = c[0], _ = Io();
        return u._ImgManager.convertClientIndexToServerId(d), _.context = {}, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(v) {
          return _.context.metadata = v && v.metadata ? v.metadata : {}, _.initImage(v.oriData);
        }).then(function() {
          return _.getSkewAngle();
        }).then(function(v) {
          return Yn(""), delete _.context, _.terminate(), v;
        }, function(v) {
          throw Yn(""), n.Errors.SkewAngleFailed(u, v), _.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "ConvertToGrayScale" ? function(u, c) {
        var d = c[0], _ = Io(), v = u._ImgManager.convertClientIndexToServerId(d);
        return _.context = {}, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(T) {
          return _.context.metadata = T && T.metadata ? T.metadata : {}, _.initImage(T.oriData);
        }).then(function() {
          return _.toGrayscale();
        }).then(function() {
          return _.getImage();
        }).then(function(T) {
          var M = { src: T.imageData, imgType: n.MobileFuns.convertOutputType(T.imageType), dataType: "url", metadata: { imageData: T.imageData, width: T.imageWidth, height: T.imageHeight, bitDepth: 8 } };
          try {
            u._OnBitmapChanged(["10", "" + v, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), M]);
          } catch (A) {
            throw n.Errors.SystemExceptionError(u, A.message), 0;
          }
        }).then(function() {
          Yn(""), _.terminate();
        }, function(T) {
          throw Yn(""), T && n.Errors.ConvertToGrayScaleFailed(u, T), _.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "ConvertToBWScale" ? function(u, c) {
        var d = c[0], _ = Io(), v = u._ImgManager.convertClientIndexToServerId(d);
        return _.context = {}, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(T) {
          return _.context.metadata = T && T.metadata ? T.metadata : {}, _.initImage(T.oriData);
        }).then(function() {
          return _.toBinary(!1, void 0);
        }).then(function() {
          return _.getImage();
        }).then(function(T) {
          var M = { src: T.imageData, imgType: n.MobileFuns.convertOutputType(T.imageType), dataType: "url", metadata: { imageData: T.imageData, width: T.imageWidth, height: T.imageHeight, bitDepth: 1 } };
          try {
            u._OnBitmapChanged(["10", "" + v, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), M]);
          } catch (A) {
            throw n.Errors.SystemExceptionError(u, A.message), 0;
          }
        }).then(function() {
          Yn(""), _.terminate();
        }, function(T) {
          throw Yn(""), T && n.Errors.ConvertToBWScaleFailed(u, T), _.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "SetDPI" ? function(u, c) {
        var d = c[0], _ = c[1], v = c[2], T = c[3], M = c[4];
        if (!n.isNumber(_))
          return n.Errors.MobileServer_InvalidXResolution(u), n.Promise.reject({ code: u._errorCode, message: u._getErrorString() });
        if (!n.isNumber(v))
          return n.Errors.MobileServer_InvalidYResolution(u), n.Promise.reject({ code: u._errorCode, message: u._getErrorString() });
        n.isUndefined(M) && (M = l.DWT.EnumDWT_InterpolationMethod.IM_BICUBIC);
        var A, S, V, ne = Io(), z = u._ImgManager.convertClientIndexToServerId(d);
        return ne.context = {}, A = u._ImgManager._UIView.GetMetaDataByIndex(d), S = A.resolutionX, V = A.resolutionY, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(ue) {
          return ne.context.metadata = ue && ue.metadata ? ue.metadata : {}, ne.initImage(ue.oriData);
        }).then(function() {
          return ne.setDPI(S, V, _, v, T, M);
        }).then(function() {
          return ne.getImage();
        }).then(function(ue) {
          var xe = { src: ue.imageData, imgType: n.MobileFuns.convertOutputType(ue.imageType), dataType: "url", metadata: { imageData: ue.imageData, width: ue.imageWidth, height: ue.imageHeight, resolutionX: _, resolutionY: v } };
          try {
            u._OnBitmapChanged(["10", "" + z, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), xe]);
          } catch (Fe) {
            throw n.Errors.SystemExceptionError(u, Fe.message), 0;
          }
        }).then(function() {
          Yn(""), ne.terminate();
        }, function(ue) {
          throw Yn(""), ue && n.Errors.SetDPIFailed(u, ue), ne.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "SetImageWidth" ? function(u, c) {
        var d = c[0], _ = c[1];
        if (!n.isNumber(_))
          return n.Errors.MobileServer_InvalidWidth(u), n.Promise.reject({ code: u._errorCode, message: u._getErrorString() });
        var v = Io(), T = u._ImgManager.convertClientIndexToServerId(d);
        return v.context = {}, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(M) {
          return v.context.metadata = M && M.metadata ? M.metadata : {}, v.initImage(M.oriData);
        }).then(function() {
          return v.setImageWidth(_);
        }).then(function() {
          return v.getImage();
        }).then(function(M) {
          var A = { src: M.imageData, imgType: n.MobileFuns.convertOutputType(M.imageType), dataType: "url", metadata: { imageData: M.imageData, width: M.imageWidth, height: M.imageHeight } };
          try {
            u._OnBitmapChanged(["10", "" + T, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), A]);
          } catch (S) {
            throw n.Errors.SystemExceptionError(u, S.message), 0;
          }
        }).then(function() {
          Yn(""), v.terminate();
        }, function(M) {
          throw Yn(""), M && n.Errors.SetImageWidthFailed(u, M), v.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "IsTextBasedPDF" ? function(u, c) {
        var d, _, v = c[0], T = l.DWT.EnumDWT_ImageType;
        if (v instanceof FileList ? d = v[0] : v instanceof Blob ? d = v : v instanceof ArrayBuffer || v instanceof Uint8Array ? (d = new Blob([v]), _ = ja(v)) : d = v, n.isUndefined(_) && (d.type ? d.type == "application/pdf" && (_ = T.IT_PDF) : _ = on.getImageType(d.name)), _ == T.IT_PDF) {
          var M = Gd();
          return fr("", u), M.open(d, u._pdfPassword).then(function(A) {
            return Yn(""), M.close(), M.terminate(), A.isTextBased;
          }, function(A) {
            throw Yn(""), n.Errors.LoadImageFailed(u, A), M.close(), M.terminate(), { code: u._errorCode, message: u._getErrorString() };
          });
        }
        return n.Errors.LoadImageFailed(u, "not pdf."), n.Promise.reject({ code: u._errorCode, message: u._getErrorString() });
      }(a, i) : t == "GetMD5" ? function(u, c) {
        var d = c[0], _ = d;
        d instanceof FileList ? _ = d[0] : (d instanceof Uint8ClampedArray || d instanceof ArrayBuffer || d instanceof Uint8Array) && (_ = new Blob([d]));
        var v = Ps();
        return v.getMD5(_).then(function(T) {
          return v.terminate(), T;
        }, function(T) {
          throw n.Errors.GetMD5Failed(u, T), v.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "ChangeBrightness" ? function(u, c) {
        var d = c[0], _ = c[1], v = Io(), T = u._ImgManager.convertClientIndexToServerId(d);
        return v.context = {}, fr("", u), n.log("[Wasm]Change Brightness: value " + _), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(M) {
          return n.log("[Wasm]Change Brightness: get original image data"), v.context.metadata = M && M.metadata ? M.metadata : {}, v.initImage(M.oriData);
        }).then(function() {
          return n.log("[Wasm]Change Brightness: change brightness"), v.changeBrightness(_);
        }).then(function() {
          return v.getImage();
        }).then(function(M) {
          n.log("[Wasm]Change Brightness: change brightness successfully");
          var A = { src: M.imageData, imgType: n.MobileFuns.convertOutputType(M.imageType), dataType: "url", metadata: { imageData: M.imageData, width: M.imageWidth, height: M.imageHeight, bitDepth: 8 } };
          try {
            u._OnBitmapChanged(["10", "" + T, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), A]);
          } catch (S) {
            throw n.Errors.SystemExceptionError(u, S.message), 0;
          }
        }).then(function() {
          Yn(""), v.terminate();
        }, function(M) {
          throw Yn(""), M && n.Errors.ChangeBrightnessFailed(u, M), v.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : t == "ChangeContrast" ? function(u, c) {
        var d = c[0], _ = c[1], v = Io(), T = u._ImgManager.convertClientIndexToServerId(d);
        return v.context = {}, fr("", u), u._ImgManager.getWebViewer().GetImageData(u._ImgManager.getUidByIndex(d)).then(function(M) {
          return v.context.metadata = M && M.metadata ? M.metadata : {}, v.initImage(M.oriData);
        }).then(function() {
          return v.changeContrast(_);
        }).then(function() {
          return v.getImage();
        }).then(function(M) {
          var A = { src: M.imageData, imgType: n.MobileFuns.convertOutputType(M.imageType), dataType: "url", metadata: { imageData: M.imageData, width: M.imageWidth, height: M.imageHeight, bitDepth: 8 } };
          try {
            u._OnBitmapChanged(["10", "" + T, 4, u._ImgManager.getCurrentImageIndex(), u._ImgManager.count(), A]);
          } catch (S) {
            throw n.Errors.SystemExceptionError(u, S.message), 0;
          }
        }).then(function() {
          Yn(""), v.terminate();
        }, function(M) {
          throw Yn(""), M && n.Errors.ChangeContrastFailed(u, M), v.terminate(), { code: u._errorCode, message: u._getErrorString() };
        });
      }(a, i) : n.Promise.reject({ code: -1e3, message: "invalid method: " + t }) : n.Promise.reject(l.DWT.licenseException) : a._serviceNotSupportAsync(t);
    } }, { key: "_saveImageCallback", value: function(t) {
      var i, a, u, c = this;
      if (!n.isArray(t))
        return n.Errors.InvalidSourceFile(c), n.Promise.reject({ code: c._errorCode, message: c._getErrorString() });
      for (n.log("[Wasm]camera callback: save image"), u = t.length, i = n.Promise.resolve({ aryData: t, curIndex: 0, count: u }), a = 0; a < u; a++)
        i = (i = i.then(function(d) {
          var _, v, T, M, A, S, V;
          if (_ = d.aryData[d.curIndex], d.bOneBit = !1, _) {
            var ne = _.iImageData;
            if (_.file, ne instanceof Blob || ne instanceof ArrayBuffer)
              return d.captureBlob = ne, d;
            v = ne.imageData, d.bOneBit = ne.imageBitDepth == 1;
          }
          return v instanceof Blob || v instanceof ArrayBuffer ? d.bOneBit && (c._isTwainServiceType() || c._isDMServiceType()) ? (T = v, M = c, A = Ps(), S = l.Enum_ReturnType.RT_BINARY, V = l.DWT.EnumDWT_ImageType.IT_PNG, A.saveImage(T, V, 85, S, !0).then(function(z) {
            return A && A.terminate(), { blobData: z.imageData, type: "png", MD5: z.MD5 };
          }, function(z) {
            throw n.Errors.SaveImageFailed(M, z), A && A.terminate(), { code: M._errorCode, message: M._getErrorString() };
          })).then(function(z) {
            return d.captureBlob = z.blobData, d;
          }) : (d.captureBlob = v, d) : (l.Lib.Errors.InvalidSourceFile(c), n.log("[Wasm]camera callback: save image error - page " + d.curIndex + " source invalid."), l.Lib.Promise.reject({ code: c._errorCode, message: c._errorString }));
        })).then(function(d) {
          var _, v;
          return _ = d.aryData[d.curIndex], t && _ && (v = _.file), n.log("[Wasm]camera callback: save image - page " + d.curIndex + " data ready"), new l.Lib.Promise(function(T, M) {
            var A = d.captureBlob, S = -1, V = l.DWT.EnumDWT_ImageType;
            if (c._isTwainServiceType() || c._isDMServiceType())
              l.Lib.isString(A.type) && (A.type == "application/pdf" ? S = V.IT_PDF : A.type == "image/png" ? S = V.IT_PNG : A.type == "image/jpeg" || A.type == "image/jpg" ? S = V.IT_JPG : A.type == "image/bmp" ? S = V.IT_BMP : A.type == "image/tiff" || A.type == "image/tif" ? S = V.IT_TIF : A.type == "image/jp2" && (S = V.IT_J2K)), c.__captureImage(A, S, function() {
                n.log("[Wasm]camera callback: save image - page " + d.curIndex + " data saved from service"), d.curIndex = d.curIndex + 1, d.captureBlob = null, T(d);
              }, function(z, ue) {
                M({ code: z, message: ue });
              });
            else {
              var ne = c._innerGetCurrentDocumentName();
              ne == "" && c._ImgManager && (ne = c._ImgManager.getWebViewer().GetDefaultFileName()), c._innerSendToMobile("LoadImageFromBinary", [A, 3006, v, ne, !0, d.bOneBit], 0, function() {
                n.log("[Wasm]camera callback: save image - page " + d.curIndex + " data saved"), d.curIndex = d.curIndex + 1, d.captureBlob = null, T(d);
              }, function(z, ue) {
                M({ code: z, message: ue });
              });
            }
          });
        });
      return i;
    } }, { key: "_insertImageCallback", value: function(t, i, a) {
      var u, c, d = this, _ = i.oriData, v = !0;
      if (_ && (_ instanceof Blob || _ instanceof ArrayBuffer || _ instanceof Uint8Array) && (v = !1), !i || v)
        throw l.Lib.Errors.InvalidSourceFile(d), n.log("[Wasm]camera callback: save image error - source invalid."), { code: d._errorCode, message: d._errorString };
      (u = i.customData) && (c = u.oriBlob) && c.imageBitDepth, n.log("[Wasm]camera callback: save image - data ready");
      var T = Ag();
      u.imageId = T, d._ImgManager.insertImage(t, i, a);
      var M = d._ImgManager.getWebViewer().GetUidByIndex(a);
      d._ImgManager.getView().innerInsertModel(T, M);
    } }, { key: "_checkWebcamWasmLicense", value: function() {
      return n.License.checkCameraProductKey(this) ? { errorCode: 0 } : l.DWT.licenseException;
    } }, { key: "GetRawDataAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isMobileMode())
        return i._serviceNotSupportAsync("GetRawDataAsync");
      var a, u = parseInt(t);
      return isNaN(u) ? (n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : u < 0 || u >= i._ImgManager.count() ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : (i._viewer && i._viewer._webViewer && (a = i._viewer._webViewer.GetUidByIndex(u)), a ? i._viewer._webViewer.GetImageData(a).then(function(c) {
        var d = { displayImage: {}, documentData: { polygon: [], originImage: {} } };
        return c.oriData && (d.displayImage.data = c.oriData), c.metadata && (c.metadata.bitDepth && (d.displayImage.bitDepth = c.metadata.bitDepth), c.metadata.height && (d.displayImage.height = c.metadata.height), c.metadata.width && (d.displayImage.width = c.metadata.width), c.metadata.resolutionX && (d.displayImage.resolutionX = c.metadata.resolutionX), c.metadata.resolutionY && (d.displayImage.resolutionY = c.metadata.resolutionY)), c.customData && (n.isNumber(c.customData.angle) ? d.documentData.angle = c.customData.angle : d.documentData.angle = 0, c.customData.detectArea && (d.documentData.polygon.push({ x: c.customData.detectArea[0], y: c.customData.detectArea[1] }), d.documentData.polygon.push({ x: c.customData.detectArea[2], y: c.customData.detectArea[3] }), d.documentData.polygon.push({ x: c.customData.detectArea[4], y: c.customData.detectArea[5] }), d.documentData.polygon.push({ x: c.customData.detectArea[6], y: c.customData.detectArea[7] })), c.customData.filterValue && (d.documentData.filterValue = c.customData.filterValue), c.customData.oriBlob && (c.customData.oriBlob.imageBitDepth && (d.documentData.originImage.bitDepth = c.customData.oriBlob.imageBitDepth), c.customData.oriBlob.imageData && (d.documentData.originImage.data = c.customData.oriBlob.imageData), c.customData.oriBlob.imageHeight && (d.documentData.originImage.height = c.customData.oriBlob.imageHeight), c.customData.oriBlob.imageWidth && (d.documentData.originImage.width = c.customData.oriBlob.imageWidth), c.customData.oriBlob.imageXResolution && (d.documentData.originImage.resolutionX = c.customData.oriBlob.imageXResolution), c.customData.oriBlob.imageYResolution && (d.documentData.originImage.resolutionY = c.customData.oriBlob.imageYResolution))), d;
      }) : Promise.resolve(null));
    } }, { key: "SetRawDataAsync", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isMobileMode())
        return a._serviceNotSupportAsync("GetRawDataAsync");
      var u, c = parseInt(t);
      if (isNaN(c))
        return n.Errors.InvalidIndex(a), n.Promise.reject({ code: a._errorCode, message: a._errorString });
      if (c < 0 || c >= a._ImgManager.count())
        return n.Errors.IndexOutOfRange(a), n.Promise.reject({ code: a._errorCode, message: a._errorString });
      if (a._viewer && a._viewer._webViewer && (u = a._viewer._webViewer.GetUidByIndex(c))) {
        var d = a._viewer._webViewer.mydvs;
        if (d) {
          var _ = i.displayImage.data;
          delete i.displayImage.data;
          var v = { oriData: _, metadata: i.displayImage, customData: {} };
          i.documentData && (n.isNumber(i.documentData.angle) ? v.customData.angle = i.documentData.angle : v.customData.angle = 0, i.documentData.polygon && i.documentData.polygon.length == 4 && (v.customData.detectArea = [i.documentData.polygon[0].x, i.documentData.polygon[0].y, i.documentData.polygon[1].x, i.documentData.polygon[1].y, i.documentData.polygon[2].x, i.documentData.polygon[2].y, i.documentData.polygon[3].x, i.documentData.polygon[3].y]), i.documentData.filterValue && (v.customData.filterValue = i.documentData.filterValue), i.documentData.originImage && (v.customData.oriBlob = {}, i.documentData.originImage.bitDepth && (v.customData.oriBlob.imageBitDepth = i.documentData.originImage.bitDepth), i.documentData.originImage.data && (v.customData.oriBlob.imageData = i.documentData.originImage.data), i.documentData.originImage.height && (v.customData.oriBlob.imageHeight = i.documentData.originImage.height), i.documentData.originImage.width && (v.customData.oriBlob.imageWidth = i.documentData.originImage.width), v.customData.oriBlob.imageXResolution && (v.customData.oriBlob.imageXResolution = i.documentData.originImage.resolutionX), i.documentData.originImage.resolutionY && (v.customData.oriBlob.imageYResolution = i.documentData.originImage.resolutionY)));
          var T = d.DataControl.updateSync(u, v, !0);
          return Promise.resolve(T);
        }
      }
      return Promise.resolve(null);
    } }, { key: "GetImageDataAsync", value: function(t) {
      var i, a = this;
      return a._viewer && a._viewer._webViewer && (i = a._viewer._webViewer.GetUidByIndex(t)), i ? a._viewer._webViewer.GetImageData(i) : Promise.resolve(null);
    } }, { key: "SetCustomDataAsync", value: function(t, i) {
      var a, u = this;
      return u._viewer && u._viewer._webViewer && (a = u._viewer._webViewer.GetUidByIndex(t)), a && i ? u._viewer._webViewer.GetImageData(a).then(function(c) {
        return c.customData = i, u._viewer._webViewer.UpdateImageData(a, c);
      }) : Promise.resolve(!1);
    } }, { key: "HttpFieldNameOfUploadedImage", get: function() {
      return this._resetErr(), !!this._isValid() && this.__remoteFilename;
    }, set: function(t) {
      this._resetErr(), this._isValid() && (this.__remoteFilename = t);
    } }, { key: "style", get: function() {
      return this.__style;
    } }, { key: "IfShowProgressBar", get: function() {
      return this._resetErr(), this._isMobileMode() ? (this._mobileNotSupport("IfShowProgressBar"), !1) : !!this._isValid() && this.__IfShowProgressBar;
    }, set: function(t) {
      this._resetErr(), this._isMobileMode() ? this._mobileNotSupport("IfShowProgressBar") : this._isValid() && (n.isBoolean(t) ? this.__IfShowProgressBar = t : n.Errors.InvalidValue(this));
    } }, { key: "getInstance", value: function() {
      return this;
    } }]), r;
  }(tm);
  function om(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function Za(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function Ho(o, e, r) {
    return e.has(o), r;
  }
  var gh = /* @__PURE__ */ new WeakSet(), mh = /* @__PURE__ */ new WeakSet(), Kc = /* @__PURE__ */ new WeakSet(), Yc = /* @__PURE__ */ new WeakSet(), Jc = /* @__PURE__ */ new WeakSet(), Xc = /* @__PURE__ */ new WeakSet(), ph = /* @__PURE__ */ new WeakSet(), Qc = /* @__PURE__ */ new WeakSet(), am = function(o) {
    Hr(r, o);
    var e = om(r);
    function r() {
      var t;
      Gn(this, r);
      for (var i = arguments.length, a = new Array(i), u = 0; u < i; u++)
        a[u] = arguments[u];
      return Za(ln(t = e.call.apply(e, [this].concat(a))), Qc), Za(ln(t), ph), Za(ln(t), Xc), Za(ln(t), Jc), Za(ln(t), Yc), Za(ln(t), Kc), Za(ln(t), mh), Za(ln(t), gh), t;
    }
    return zn(r, [{ key: "BindViewer", value: function(t) {
      return this._innerBindViewer(t);
    } }, { key: "UnbindViewer", value: function() {
      return this._innerUnbindViewer();
    } }, { key: "AddText", value: function(t, i, a, u, c, d, _, v) {
      var T = this;
      if (T._isMobileMode())
        return T._mobileNotSupport("AddText");
      var M = parseInt(t);
      if (!$i(T, M))
        return !1;
      var A = n.RGB2BGR(c), S = n.RGB2BGR(d), V = T._ImgManager.convertClientIndexToServerId(M);
      return V == -1 ? (n.Errors.IndexOutOfRange(T), !1) : T._innerFun("AddText", zt(V, i, a, u, A, S, _, v));
    } }, { key: "CreateTextFont", value: function(t, i, a, u, c, d, _, v, T, M, A, S, V, ne) {
      var z = this;
      return z._resetErr(), !!z._isValid() && (z._isMobileMode() ? z._mobileNotSupport("CreateTextFont") : this._innerFun("CreateTextFont", zt(t, i, a, u, c, d, _, v, T, M, A, S, V, ne)));
    } }, { key: "CopyToClipboard", value: function(t) {
      var i = this;
      if (i._isMobileMode())
        return i._mobileNotSupport("CopyToClipboard");
      var a = parseInt(t);
      return !!$i(i, a) && uu(i, "CopyToClipboard", a, null, null, !1, !1);
    } }, { key: "CopyToClipboardAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode())
        return i._mobileNotSupportAsync("CopyToClipboardAsync");
      var a = parseInt(t);
      return isNaN(a) ? (n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : a < 0 || a >= i._ImgManager.count() ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : function(u, c, d) {
        var _ = u._ImgManager.convertClientIndexToServerId(d);
        return _ == -1 ? (n.Errors.IndexOutOfRange(u), n.Promise.reject({ code: u._errorCode, message: u._errorString })) : u._innerFunV2(c, zt(_));
      }(i, "CopyToClipboard", a);
    } }, { key: "Erase", value: function(t, i, a, u, c, d, _) {
      var v, T = this, M = parseInt(t);
      if (!$i(T, M, _))
        return !1;
      if (T._isMobileMode())
        return T._ImgManager.getView().GetWebViewer().clearSelectedAreas(), Ho(T, gh, sm).call(T, M, i, a, u, c, d, _);
      var A = T._ImgManager.convertClientIndexToServerId(M);
      return A == -1 ? (n.Errors.IndexOutOfRange(T), n.isFunction(_) && _(T._errorCode, T._getErrorString()), !1) : (T._ImgManager.getView().GetWebViewer().clearSelectedAreas(), (v = T._innerFun("Erase", zt(A, i, a, u, c)) == 1) ? n.isFunction(d) && d() : n.isFunction(_) && _(T._errorCode, T._getErrorString()), v);
    } }, { key: "GetImageBitDepth", value: function(t) {
      var i = this, a = parseInt(t);
      if (!$i(i, a))
        return !1;
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return parseInt(u.bitDepth);
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), !1) : i._innerFun("GetImageBitDepth", zt(c));
    } }, { key: "GetImageWidth", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return !1;
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), -1;
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), -1;
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return parseInt(u.width);
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), -1) : i._innerFun("GetImageWidth", zt(c));
    } }, { key: "GetImageHeight", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return !1;
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), -1;
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), -1;
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return parseInt(u.height);
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), -1) : i._innerFun("GetImageHeight", zt(c));
    } }, { key: "GetImageSize", value: function(t, i, a) {
      var u = this;
      if (u._resetErr(), !u._isValid())
        return !1;
      if (u._isMobileMode())
        return u._mobileNotSupport("GetImageSize");
      var c = parseInt(t);
      if (isNaN(c))
        return n.Errors.InvalidIndex(u), -1;
      if (c < 0 || c >= u._ImgManager.count())
        return n.Errors.IndexOutOfRange(u), -1;
      var d = u._ImgManager.convertClientIndexToServerId(c);
      return d == -1 ? (n.Errors.IndexOutOfRange(u), -1) : u._innerFun("GetImageSize", zt(d, i, a));
    } }, { key: "GetImageSizeWithSpecifiedType", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      if (a._isMobileMode())
        return a._mobileNotSupport("GetImageSizeWithSpecifiedType");
      var u = parseInt(t);
      if (isNaN(u))
        return n.Errors.InvalidIndex(a), -1;
      if (u < 0 || u >= a._ImgManager.count())
        return n.Errors.IndexOutOfRange(a), -1;
      var c = a._ImgManager.convertClientIndexToServerId(u);
      return c == -1 ? (n.Errors.IndexOutOfRange(a), -1) : a._innerFun("GetImageSizeWithSpecifiedType", zt(c, i));
    } }, { key: "GetImageXResolution", value: function(t) {
      var i = this, a = parseInt(t);
      if (!$i(i, a))
        return !1;
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return parseInt(u.resolutionX);
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), !1) : i._innerFun("GetImageXResolution", zt(c));
    } }, { key: "GetImageYResolution", value: function(t) {
      var i = this, a = parseInt(t);
      if (!$i(i, a))
        return !1;
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return parseInt(u.resolutionY);
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), !1) : i._innerFun("GetImageYResolution", zt(c));
    } }, { key: "SelectAllImages", value: function() {
      var t, i = this, a = i.HowManyImagesInBuffer, u = [];
      if (i._resetErr(), !i._isValid())
        return !1;
      for (t = 0; t < a; t++)
        u.push(t);
      return i._ImgManager.SetSelectedClientIndexArray(u), u;
    } }, { key: "SelectImages", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && i._ImgManager.SetSelectedClientIndexArray(t);
    } }, { key: "_asyncGetSkewAngleOnly", value: function(t, i, a) {
      var u = this, c = parseInt(t);
      return u._innerSendToMobile("GetSkewAngleOnly", Kr(c), 0, function(d) {
        on.refreshImageAfterInvokeFun(u, t), n.isFunction(i) && setTimeout(function() {
          i(d);
        }, 30);
      }, function() {
        n.isFunction(a) && a(u._errorCode, u._getErrorString());
      });
    } }, { key: "GetSkewAngle", value: function(t, i, a) {
      var u, c = this, d = parseInt(t);
      return !!$i(c, d, a) && (c._isMobileMode() ? Ho(c, mh, um).call(c, d, i, a) : (u = uu(c, "GetSkewAngle", d, i, a, !0, !1), c._errorCode == 0 ? (on.refreshImageAfterInvokeFun(c, d), n.isFunction(i) && i(u), u) : (n.isFunction(a) && a(c._errorCode, c._errorString), 0)));
    } }, { key: "GetSkewAngleAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode())
        return i._innerSendToMobileV2("GetSkewAngle", Kr(a)).then(function(c) {
          on.refreshImageAfterInvokeFun(i, a);
        });
      var u = i._ImgManager.convertClientIndexToServerId(a);
      return u == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("GetSkewAngle", zt(u)).then(function(c) {
        var d = c;
        return n.isArray(c) && (d = c.length > 0 ? c[0] : 0), on.refreshImageAfterInvokeFun(i, a), d;
      });
    } }, { key: "GetSkewAngleEx", value: function(t, i, a, u, c) {
      var d = this;
      if (d._isMobileMode())
        return d._mobileNotSupport("GetSkewAngleEx");
      var _ = parseInt(t);
      if (!$i(d, _))
        return !1;
      var v = d._ImgManager.convertClientIndexToServerId(_);
      return v == -1 ? (n.Errors.IndexOutOfRange(d), !1) : d._innerFun("GetSkewAngleEx", zt(v, i, a, u, c));
    } }, { key: "IsBlankImageEx", value: function(t, i, a, u, c, d) {
      var _, v = this;
      if (v._isMobileMode())
        return v._mobileNotSupport("IsBlankImageEx");
      if (!$i(v, _ = parseInt(t)))
        return !1;
      var T = v._ImgManager.convertClientIndexToServerId(_);
      return T == -1 ? (n.Errors.IndexOutOfRange(v), !1) : v._innerFun("IsBlankImageEx", zt(T, i, a, u, c, d));
    } }, { key: "MirrorAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode())
        return i._innerSendToMobileV2("Mirror", Kr(a)).then(function() {
          on.refreshImageAfterInvokeFun(i, a), i._ImgManager._UIView.GetWebViewer().clearSelectedAreas();
        });
      var u = i._ImgManager.convertClientIndexToServerId(a);
      return u == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("Mirror", zt(u)).then(function(c) {
        if (c != 1)
          throw { code: i._errorCode, message: i._errorString };
        on.refreshImageAfterInvokeFun(i, a), i._ImgManager._UIView.GetWebViewer().clearSelectedAreas();
      });
    } }, { key: "Mirror", value: function(t, i, a) {
      var u = this, c = parseInt(t);
      return !!$i(u, c, a) && (u._isMobileMode() ? (u._innerSendToMobileV2("Mirror", Kr(c)).then(function() {
        on.refreshImageAfterInvokeFun(u, c), u._ImgManager._UIView.GetWebViewer().clearSelectedAreas(), i && i();
      }, function() {
        n.isFunction(a) && a(u._errorCode, u._getErrorString());
      }), !0) : uu(u, "Mirror", c, i, a, !1, !0));
    } }, { key: "_innerRemoveImage", value: function(t, i) {
      var a = this, u = a._ImgManager.convertClientIndexToServerIdInFile(t, i);
      a._OnBitmapChanged(["10", "" + u, 3, a._ImgManager.getCurrentImageIndex(), a._ImgManager.count()], null, t);
    } }, { key: "RemoveAllImagesAsync", value: function() {
      var t = this;
      if (t._resetErr(), !t._isValid())
        return n.Promise.reject({ code: t._errorCode, message: t._errorString });
      var i = t._ImgManager.GetCurrentTag();
      if (i == "" || i == "All")
        return t._isMobileMode() ? (t._OnBitmapChanged(["10", "-1", 3, -1, 0]), n.Promise.resolve(!0)) : t._innerFunV2("RemoveAllImages").then(function(u) {
          return !(!u && t._errorCode != -1033) && (t._OnBitmapChanged(["0", "-1", 3, -1, 0]), !0);
        });
      var a = function() {
        var u, c, d = [], _ = t.HowManyImagesInBuffer;
        for (u = 0; u < _; u++) {
          var v = t._ImgManager.convertClientIndexToServerId(u);
          v > -1 && d.push(v);
        }
        return t._isMobileMode() ? c = n.Promise.resolve(d.join(",")) : function() {
          var T = [];
          for (c = n.Promise.resolve(0), u = 0; u < d.length; u++)
            c = c.then(function(M) {
              return t._innerFunRawV2("RemoveImage", zt(d[M])).then(function(A) {
                return (A || t._errorCode == -1033) && T.push(d[M]), M++;
              });
            });
          c = c.then(function() {
            return T.join(",");
          });
        }(), { v: c.then(function(T) {
          var M = "0";
          t._isMobileMode() && (M = "10"), T != "" && t._OnBitmapChanged([M, T, 3, t._ImgManager.getCurrentImageIndex(), t._ImgManager.count()]);
        }) };
      }();
      return gi(a) === "object" ? a.v : void 0;
    } }, { key: "RemoveImageAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var u = i._ImgManager.convertClientIndexToServerId(a);
      return u == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._isMobileMode() ? (i._OnBitmapChanged(["10", "" + u, 3, i._ImgManager.getCurrentImageIndex(), i._ImgManager.count()]), n.Promise.resolve(!0)) : i._innerFunV2("RemoveImage", zt(u)).then(function(c) {
        return !(!c && i._errorCode != -1033) && (i._OnBitmapChanged(["0", "" + u, 3, i._ImgManager.getCurrentImageIndex(), i._ImgManager.count()]), !0);
      });
    } }, { key: "Rotate", value: function(t, i, a, u, c) {
      return this.RotateEx(t, i, a, -1, u, c);
    } }, { key: "RotateEx", value: function(t, i, a, u, c, d) {
      var _ = this;
      if (_._resetErr(), !_._isValid())
        return !1;
      var v, T = parseInt(t);
      if (isNaN(T))
        return n.Errors.InvalidIndex(_), n.isFunction(d) && d(_._errorCode, _._getErrorString()), !1;
      if (T < 0 || T >= _._ImgManager.count())
        return n.Errors.IndexOutOfRange(_), n.isFunction(d) && d(_._errorCode, _._getErrorString()), !1;
      if (_._isMobileMode())
        return Ho(_, Kc, _h).call(_, T, i, a, u).then(c, function() {
          n.isFunction(d) && d(_._errorCode, _._getErrorString());
        }), !0;
      var M = _._ImgManager.convertClientIndexToServerId(T);
      return M == -1 ? (n.Errors.IndexOutOfRange(_), n.isFunction(d) && d(_._errorCode, _._getErrorString()), !1) : ((v = _._innerFun("RotateEx", zt(M, i, a, u)) == 1) ? (on.refreshImageAfterInvokeFun(_, T), _._ImgManager._UIView.GetWebViewer().clearSelectedAreas(), n.isFunction(c) && c()) : n.isFunction(d) && d(_._errorCode, _._getErrorString()), v);
    } }, { key: "RotateLeft", value: function(t, i, a) {
      return this.RotateEx(t, -90, !0, -1, i, a);
    } }, { key: "RotateRight", value: function(t, i, a) {
      return this.RotateEx(t, 90, !0, -1, i, a);
    } }, { key: "RotateAsync", value: function(t, i, a) {
      return this.RotateExAsync(t, i, a, -1);
    } }, { key: "RotateExAsync", value: function(t, i, a, u) {
      var c = this;
      if (c._resetErr(), !c._isValid())
        return n.Promise.reject({ code: c._errorCode, message: c._errorString });
      var d = parseInt(t);
      if (isNaN(d))
        return n.Errors.InvalidIndex(c), n.Promise.reject({ code: c._errorCode, message: c._errorString });
      if (d < 0 || d >= c._ImgManager.count())
        return n.Errors.IndexOutOfRange(c), n.Promise.reject({ code: c._errorCode, message: c._errorString });
      if (c._isMobileMode())
        return Ho(c, Kc, _h).call(c, d, i, a, u);
      var _ = c._ImgManager.convertClientIndexToServerId(d);
      return _ == -1 ? (n.Errors.IndexOutOfRange(c), n.Promise.reject({ code: c._errorCode, message: c._errorString })) : c._innerFunV2("RotateEx", zt(_, i, a, u)).then(function(v) {
        if (v != 1)
          throw { code: c._errorCode, message: c._errorString };
        on.refreshImageAfterInvokeFun(c, d), c._ImgManager._UIView.GetWebViewer().clearSelectedAreas();
      });
    } }, { key: "RotateLeftAsync", value: function(t) {
      return this.RotateExAsync(t, -90, !0, -1);
    } }, { key: "RotateRightAsync", value: function(t) {
      return this.RotateExAsync(t, 90, !0, -1);
    } }, { key: "ChangeImageSize", value: function(t, i, a, u, c, d) {
      var _, v = this, T = parseInt(t), M = 1 * i, A = 1 * a;
      if (!$i(v, T, d))
        return !1;
      if (M <= 0 || A <= 0)
        return n.Errors.InvalidWidthOrHeight(v), n.isFunction(d) && d(v._errorCode, v._getErrorString()), !1;
      if (v._isMobileMode())
        return Ho(v, Yc, vh).call(v, T, i, a, u).then(c, function() {
          n.isFunction(d) && d(v._errorCode, v._getErrorString());
        }), !0;
      var S = v._ImgManager.convertClientIndexToServerId(T);
      return S == -1 ? (n.Errors.IndexOutOfRange(v), n.isFunction(d) && d(v._errorCode, v._getErrorString()), !1) : ((_ = v._innerFun("ChangeImageSize", zt(S, M, A, u)) == 1) ? (on.refreshImageAfterInvokeFun(v, T), n.isFunction(c) && c()) : n.isFunction(d) && d(v._errorCode, v._getErrorString()), _);
    } }, { key: "ChangeImageSizeAsync", value: function(t, i, a, u) {
      var c = this, d = parseInt(t), _ = 1 * i, v = 1 * a;
      if (c._resetErr(), !c._isValid())
        return n.Promise.reject({ code: c._errorCode, message: c._errorString });
      if (isNaN(d))
        return n.Errors.InvalidIndex(c), n.Promise.reject({ code: c._errorCode, message: c._errorString });
      if (d < 0 || d >= c._ImgManager.count())
        return n.Errors.IndexOutOfRange(c), n.Promise.reject({ code: c._errorCode, message: c._errorString });
      if (_ <= 0 || v <= 0)
        return n.Errors.InvalidWidthOrHeight(c), n.Promise.reject({ code: c._errorCode, message: c._errorString });
      if (c._isMobileMode())
        return Ho(c, Yc, vh).call(c, d, i, a, u);
      var T = c._ImgManager.convertClientIndexToServerId(d);
      return T == -1 ? (n.Errors.IndexOutOfRange(c), n.Promise.reject({ code: c._errorCode, message: c._errorString })) : c._innerFunV2("ChangeImageSize", zt(T, _, v, u)).then(function(M) {
        if (M != 1)
          throw { code: c._errorCode, message: c._errorString };
        on.refreshImageAfterInvokeFun(c, d);
      });
    } }, { key: "Flip", value: function(t, i, a) {
      var u = this, c = parseInt(t);
      return !!$i(u, c, a) && (u._isMobileMode() ? (Ho(u, Jc, yh).call(u, c).then(i, function() {
        n.isFunction(a) && a(u._errorCode, u._getErrorString());
      }), !0) : uu(u, "Flip", c, i, a, !1, !0));
    } }, { key: "FlipAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode())
        return Ho(i, Jc, yh).call(i, a);
      var u = i._ImgManager.convertClientIndexToServerId(a);
      return u == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("Flip", zt(u)).then(function(c) {
        if (c != 1)
          throw { code: i._errorCode, message: i._errorString };
        on.refreshImageAfterInvokeFun(i, a), i._ImgManager._UIView.GetWebViewer().clearSelectedAreas();
      });
    } }, { key: "Crop", value: function(t, i, a, u, c, d, _) {
      var v, T = this, M = parseInt(t);
      if (!$i(T, M, _))
        return !1;
      if (T._isMobileMode())
        return Ho(T, Xc, bh).call(T, M, i, a, u, c).then(d, function() {
          n.isFunction(_) && _(T._errorCode, T._getErrorString());
        }), !0;
      var A, S, V = T._ImgManager.convertClientIndexToServerId(M);
      return V == -1 ? (n.Errors.IndexOutOfRange(T), n.isFunction(_) && _(T._errorCode, T._getErrorString()), !1) : (v = T._innerFun("Crop", zt(V, i, a, u, c)) == 1, A = T._errorCode, S = T._getErrorString(), T._ImgManager.getView().GetWebViewer().clearSelectedAreas(), T._errorCode = A, T._errorString = S, v ? (on.refreshImageAfterInvokeFun(T, M), n.isFunction(d) && d()) : n.isFunction(_) && _(A, S), v);
    } }, { key: "CropAsync", value: function(t, i, a, u, c) {
      var d = this;
      if (d._resetErr(), !d._isValid())
        return n.Promise.reject({ code: d._errorCode, message: d._errorString });
      var _ = parseInt(t);
      if (isNaN(_))
        return n.Errors.InvalidIndex(d), n.Promise.reject({ code: d._errorCode, message: d._errorString });
      if (_ < 0 || _ >= d._ImgManager.count())
        return n.Errors.IndexOutOfRange(d), n.Promise.reject({ code: d._errorCode, message: d._errorString });
      if (d._isMobileMode())
        return Ho(d, Xc, bh).call(d, _, i, a, u, c);
      var v = d._ImgManager.convertClientIndexToServerId(_);
      return v == -1 ? (n.Errors.IndexOutOfRange(d), n.Promise.reject({ code: d._errorCode, message: d._errorString })) : d._innerFunV2("Crop", zt(v, i, a, u, c)).then(function(T) {
        var M, A;
        if (M = d._errorCode, A = d._getErrorString(), d._ImgManager.getView().GetWebViewer().clearSelectedAreas(), d._errorCode = M, d._errorString = A, T != 1)
          throw { code: d._errorCode, message: d._errorString };
        return on.refreshImageAfterInvokeFun(d, _), !0;
      });
    } }, { key: "CropToClipboard", value: function(t, i, a, u, c) {
      var d = this;
      if (d._isMobileMode())
        return d._mobileNotSupport("CropToClipboard");
      var _, v = parseInt(t);
      if (!$i(d, v))
        return !1;
      var T = d._ImgManager.convertClientIndexToServerId(v);
      return T == -1 ? (n.Errors.IndexOutOfRange(d), !1) : (d._ImgManager.getView().GetWebViewer().clearSelectedAreas(), (_ = d._innerFun("CropToClipboard", zt(T, i, a, u, c)) == 1) && on.refreshImageAfterInvokeFun(d, v), _);
    } }, { key: "CutFrameToClipboard", value: function(t, i, a, u, c) {
      var d = this;
      if (d._isMobileMode())
        return d._mobileNotSupport("CutFrameToClipboard");
      var _, v = parseInt(t);
      if (!$i(d, v))
        return !1;
      var T = d._ImgManager.convertClientIndexToServerId(v);
      return T == -1 ? (n.Errors.IndexOutOfRange(d), !1) : (d._ImgManager.getView().GetWebViewer().clearSelectedAreas(), (_ = d._innerFun("CutFrameToClipboard", zt(T, i, a, u, c)) == 1) && on.refreshImageAfterInvokeFun(d, v), _);
    } }, { key: "CutToClipboard", value: function(t) {
      var i = this;
      if (i._isMobileMode())
        return i._mobileNotSupport("CutToClipboard");
      var a, u = parseInt(t);
      if (!$i(i, u))
        return !1;
      var c = i._ImgManager.convertClientIndexToServerId(u);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), !1) : ((a = i._innerFun("CutToClipboard", zt(c)) == 1) && i._OnBitmapChanged(["0", "" + c, 3, i._ImgManager.getCurrentImageIndex(), i._ImgManager.count()]), a);
    } }, { key: "CutFrameToClipboardAsync", value: function(t, i, a, u, c) {
      var d = this;
      if (d._resetErr(), !d._isValid())
        return n.Promise.reject({ code: d._errorCode, message: d._errorString });
      if (d._isMobileMode())
        return d._mobileNotSupportAsync("CutFrameToClipboardAsync");
      var _ = parseInt(t);
      if (isNaN(_))
        return n.Errors.InvalidIndex(d), n.Promise.reject({ code: d._errorCode, message: d._errorString });
      if (_ < 0 || _ >= d._ImgManager.count())
        return n.Errors.IndexOutOfRange(d), n.Promise.reject({ code: d._errorCode, message: d._errorString });
      var v = d._ImgManager.convertClientIndexToServerId(_);
      return v == -1 ? (n.Errors.IndexOutOfRange(d), n.Promise.reject({ code: d._errorCode, message: d._errorString })) : d._innerFunV2("CutFrameToClipboard", zt(v, i, a, u, c)).then(function(T) {
        var M = T == 1;
        if (!M)
          throw { code: d._errorCode, message: d._errorString };
        return on.refreshImageAfterInvokeFun(d, _), M;
      });
    } }, { key: "CropToClipboardAsync", value: function(t, i, a, u, c) {
      var d = this;
      if (d._resetErr(), !d._isValid())
        return n.Promise.reject({ code: d._errorCode, message: d._errorString });
      if (d._isMobileMode())
        return d._mobileNotSupportAsync("CropToClipboardAsync");
      var _ = parseInt(t);
      if (isNaN(_))
        return n.Errors.InvalidIndex(d), n.Promise.reject({ code: d._errorCode, message: d._errorString });
      if (_ < 0 || _ >= d._ImgManager.count())
        return n.Errors.IndexOutOfRange(d), n.Promise.reject({ code: d._errorCode, message: d._errorString });
      var v = d._ImgManager.convertClientIndexToServerId(_);
      return v == -1 ? (n.Errors.IndexOutOfRange(d), n.Promise.reject({ code: d._errorCode, message: d._errorString })) : d._innerFunV2("CropToClipboard", zt(v, i, a, u, c)).then(function(T) {
        var M = T == 1;
        if (!M)
          throw { code: d._errorCode, message: d._errorString };
        return on.refreshImageAfterInvokeFun(d, _), M;
      });
    } }, { key: "CutToClipboardAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode())
        return i._mobileNotSupportAsync("CutToClipboardAsync");
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var u = i._ImgManager.convertClientIndexToServerId(a);
      return u == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("CutToClipboard", zt(u)).then(function(c) {
        var d = c == 1;
        if (!d)
          throw { code: i._errorCode, message: i._errorString };
        return i._OnBitmapChanged(["0", "" + u, 3, i._ImgManager.getCurrentImageIndex(), i._ImgManager.count()]), d;
      });
    } }, { key: "SetDPI", value: function(t, i, a, u, c, d, _) {
      var v, T = this, M = parseInt(t);
      if (!$i(T, M, _))
        return !1;
      var A = T._ImgManager.convertClientIndexToServerId(M);
      return A == -1 ? (n.Errors.IndexOutOfRange(T), n.isFunction(_) && _(T._errorCode, T._getErrorString()), !1) : T._isMobileMode() ? Ho(T, ph, cm).call(T, M, A, i, a, u, c, d, _) : ((v = T._innerFun("SetDPI", zt(A, i, a, u, c)) == 1) ? n.isFunction(d) && d() : n.isFunction(_) && _(T._errorCode, T._getErrorString()), v);
    } }, { key: "MoveImage", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      var u = parseInt(t), c = parseInt(i);
      return isNaN(u) || isNaN(c) ? (n.Errors.InvalidIndex(a), !1) : u < 0 || u >= a._ImgManager.count() || c < 0 || c >= a._ImgManager.count() ? (n.Errors.IndexOutOfRange(a), !1) : a._ImgManager.MoveImage(u, c);
    } }, { key: "SwitchImage", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      var u = parseInt(t), c = parseInt(i);
      return isNaN(u) || isNaN(c) ? (n.Errors.InvalidIndex(a), !1) : u < 0 || u >= a._ImgManager.count() || c < 0 || c >= a._ImgManager.count() ? (n.Errors.IndexOutOfRange(a), !1) : a._ImgManager.SwitchImage(u, c);
    } }, { key: "CloseWorkingProcess", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CloseWorkerProcess") : t._innerFun("CloseWorkerProcess"));
    } }, { key: "RemoveAllSelectedImages", value: function() {
      var t = this, i = t._isMobileMode();
      if (t._resetErr(), !t._isValid())
        return !1;
      var a = !0, u = t._ImgManager.getCurrentImageIndex(), c = t._ImgManager.getSelectedClientIndexArray(), d = [];
      if (n.isArray(c) && n.each(c, function(v) {
        var T = t._ImgManager.convertClientIndexToServerId(v);
        T != -1 && d.push(T);
      }), d.length == 0 && u >= 0) {
        var _ = t._ImgManager.convertClientIndexToServerId(u);
        d.push(_);
      }
      return i || (a = t._innerFun("RemoveAllSelectedImages", zt(d.join(",")))), a && (i || (t._HowManyImagesInBuffer = t._innerFun("HowManyImagesInBuffer")), n.each(d, function(v) {
        var T = "0";
        t._isMobileMode() && (T = "10"), t._OnBitmapChanged([T, "" + v, 3, t._ImgManager.getCurrentImageIndex(), t._ImgManager.count()]);
      })), a;
    } }, { key: "RemoveAllSelectedImagesAsync", value: function() {
      var t = this, i = t._isMobileMode();
      if (t._resetErr(), !t._isValid())
        return n.Promise.reject({ code: t._errorCode, message: t._errorString });
      var a = t._ImgManager.getCurrentImageIndex(), u = t._ImgManager.getSelectedClientIndexArray(), c = [];
      if (n.isArray(u) && n.each(u, function(_) {
        var v = t._ImgManager.convertClientIndexToServerId(_);
        v != -1 && c.push(v);
      }), c.length == 0 && a >= 0) {
        var d = t._ImgManager.convertClientIndexToServerId(a);
        c.push(d);
      }
      return (i ? n.Promise.resolve(!0) : t._innerFunV2("RemoveAllSelectedImages", zt(c.join(","))).then(function(_) {
        return _ && t._innerFunV2("HowManyImagesInBuffer").then(function(v) {
          return t._HowManyImagesInBuffer = v, !0;
        });
      })).then(function(_) {
        _ && n.each(c, function(v) {
          var T = "0";
          t._isMobileMode() && (T = "10"), t._OnBitmapChanged([T, "" + v, 3, t._ImgManager.getCurrentImageIndex(), t._ImgManager.count()]);
        });
      });
    } }, { key: "TagImages", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      var u = !0, c = a._ImgManager.getView().GetWebViewer().GetHowManyImagesInBuffer();
      return n.isArray(t) ? n.isString(i) && i != "" ? (n.each(t, function(d) {
        if (isNaN(d) || d < 0 || d >= c)
          return n.Errors.IndexOutOfRange(a), u = !1;
      }), u && a._ImgManager.AddImageTag(t, i)) : (n.Errors.InvalidTagName(a), !1) : (n.Errors.IndicesNotArray(a), !1);
    } }, { key: "ClearImageTags", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (t == -1 || t >= i.HowManyImagesInBuffer ? (n.Errors.IndexOutOfRange(i), !1) : i._ImgManager.RemoveImageTag(t));
    } }, { key: "SetDefaultTag", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && i._ImgManager.SetDefaultTag(t);
    } }, { key: "FilterImagesByTag", value: function(t, i, a) {
      var u = this;
      return u._resetErr(), !!u._isValid() && u._ImgManager.ShowImagesByFilter(t, i, a);
    } }, { key: "ClearFilter", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && t._ImgManager.ClearFilter();
    } }, { key: "CreateDocument", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (t && t != "" ? n.isString(t) ? i._ImgManager.CreateFile(t) : (n.Errors.FileNameNotString(i), !1) : (n.isNumber(t) ? n.Errors.FileNameNotString(i) : n.Errors.FileNameCannotEmpty(i), !1));
    } }, { key: "OpenDocument", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (t && t != "" ? n.isString(t) ? i._ImgManager.OpenFile(t) : (n.Errors.FileNameNotString(i), !1) : (n.isNumber(t) ? n.Errors.FileNameNotString(i) : n.Errors.FileNameCannotEmpty(i), !1));
    } }, { key: "RemoveDocument", value: function(t) {
      var i = this, a = i._isMobileMode();
      if (i._resetErr(), !i._isValid())
        return !1;
      if (!a) {
        var u = i._ImgManager.GetImageIdsByFileName(t);
        i._innerFun("RemoveAllSelectedImages", zt(u.join(",")));
      }
      return i._ImgManager.RemoveFile(t);
    } }, { key: "RenameDocument", value: function(t, i) {
      var a = this;
      return a._resetErr(), !!a._isValid() && (n.isString(t) && n.isString(i) ? t && t != "" && i && i != "" ? a._ImgManager.RenameFile(t, i) : (n.Errors.FileNameCannotEmpty(a), !1) : (n.Errors.FileNameNotString(a), !1));
    } }, { key: "GetDocumentInfoList", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && t._ImgManager.GetFileInfoList();
    } }, { key: "Invert", value: function(t, i, a) {
      var u = this, c = parseInt(t);
      return !!$i(u, c, a) && (u._isMobileMode() ? (Ho(u, Qc, wh).call(u, c).then(i, function() {
        n.isFunction(a) && a(u._errorCode, u._getErrorString());
      }), !0) : uu(u, "Invert", c, i, a, !1, !0));
    } }, { key: "InvertAsync", value: function(t) {
      var i = this, a = parseInt(t);
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode())
        return Ho(i, Qc, wh).call(i, a);
      var u = i._ImgManager.convertClientIndexToServerId(a);
      return u == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("Invert", zt(u)).then(function(c) {
        var d = c == 1;
        if (!d)
          throw { code: i._errorCode, message: i._errorString };
        return on.refreshImageAfterInvokeFun(i, a), d;
      });
    } }, { key: "RenameTag", value: function(t, i) {
      var a = this;
      return a._resetErr(), !!a._isValid() && (n.isUndefined(t) ? (n.Errors.ParameterCannotEmpty(a), !1) : t.length == 0 ? (n.Errors.OldTagNameRequired(a), !1) : n.isUndefined(i) || i.length == 0 ? (n.Errors.NewTagNameRequired(a), !1) : a._ImgManager.RenameTag(t, i));
    } }, { key: "RemoveTag", value: function(t, i) {
      var a = this;
      return a._resetErr(), !!a._isValid() && (n.isUndefined(t) || t.length == 0 ? (n.Errors.ParameterCannotEmpty(a), !1) : n.isUndefined(i) || n.isArray(i) ? a._ImgManager.RemoveTag(t, i) : (n.Errors.IndicesNotArray(a), !1));
    } }, { key: "GetTagList", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && t._ImgManager.GetTagList();
    } }, { key: "GetTagListByIndex", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && i._ImgManager.GetTagListByIndex(t);
    } }, { key: "_registLoadCallback", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && i._ImgManager.RegistLoadCallback(t);
    } }, { key: "GetImageBitDepthAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return n.Promise.resolve(parseInt(u.bitDepth));
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("GetImageBitDepth", zt(c));
    } }, { key: "GetImageWidthAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return n.Promise.resolve(parseInt(u.width));
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("GetImageWidth", zt(c));
    } }, { key: "GetImageHeightAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return n.Promise.resolve(parseInt(u.height));
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("GetImageHeight", zt(c));
    } }, { key: "GetImageSizeAsync", value: function(t, i, a) {
      var u = this;
      if (u._resetErr(), !u._isValid())
        return n.Promise.reject({ code: u._errorCode, message: u._errorString });
      if (u._isMobileMode())
        return u._mobileNotSupportAsync("GetImageSizeAsync");
      var c = parseInt(t);
      if (isNaN(c))
        return n.Errors.InvalidIndex(u), n.Promise.reject({ code: u._errorCode, message: u._errorString });
      if (c < 0 || c >= u._ImgManager.count())
        return n.Errors.IndexOutOfRange(u), n.Promise.reject({ code: u._errorCode, message: u._errorString });
      var d = u._ImgManager.convertClientIndexToServerId(c);
      return d == -1 ? (n.Errors.IndexOutOfRange(u), n.Promise.reject({ code: u._errorCode, message: u._errorString })) : u._innerFunV2("GetImageSize", zt(d, i, a));
    } }, { key: "GetImageSizeWithSpecifiedTypeAsync", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return n.Promise.reject({ code: a._errorCode, message: a._errorString });
      if (a._isMobileMode())
        return a._mobileNotSupportAsync("GetImageSizeWithSpecifiedTypeAsync");
      var u = parseInt(t);
      if (isNaN(u))
        return n.Errors.InvalidIndex(a), n.Promise.reject({ code: a._errorCode, message: a._errorString });
      if (u < 0 || u >= a._ImgManager.count())
        return n.Errors.IndexOutOfRange(a), n.Promise.reject({ code: a._errorCode, message: a._errorString });
      var c = a._ImgManager.convertClientIndexToServerId(u);
      return c == -1 ? (n.Errors.IndexOutOfRange(a), n.Promise.reject({ code: a._errorCode, message: a._errorString })) : a._innerFunV2("GetImageSizeWithSpecifiedType", zt(c, i));
    } }, { key: "GetImageXResolutionAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return n.Promise.resolve(parseInt(u.resolutionX));
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("GetImageXResolution", zt(c));
    } }, { key: "GetImageYResolutionAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode()) {
        var u = i._ImgManager._UIView.GetMetaDataByIndex(a);
        return n.Promise.resolve(parseInt(u.resolutionY));
      }
      var c = i._ImgManager.convertClientIndexToServerId(a);
      return c == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("GetImageYResolution", zt(c));
    } }, { key: "ChangeBrightnessAsync", value: function(t, i) {
      var a = this, u = parseInt(t);
      if (!a._isValid())
        return n.Promise.reject({ code: a._errorCode, message: a._errorString });
      if (i < -1e3 || i > 1e3)
        return n.Errors.InvalidValue(a), n.Promise.reject({ code: a._errorCode, message: a._errorString });
      if (a._isMobileMode())
        return a._innerSendToMobileV2("ChangeBrightness", Kr(u, i)).then(function() {
          on.refreshImageAfterInvokeFun(a, t), a._ImgManager._UIView.GetWebViewer().clearSelectedAreas();
        });
      var c = a._ImgManager.convertClientIndexToServerId(u);
      return c == -1 ? (n.Errors.IndexOutOfRange(a), n.Promise.reject({ code: a._errorCode, message: a._errorString })) : a._innerFunV2("ChangeBrightness", zt(c, i));
    } }, { key: "ChangeContrastAsnyc", value: function(t, i) {
      var a = this, u = parseInt(t);
      if (!a._isValid())
        return n.Promise.reject({ code: a._errorCode, message: a._errorString });
      if (i < -1e3 || i > 1e3)
        return n.Errors.InvalidValue(a), n.Promise.reject({ code: a._errorCode, message: a._errorString });
      if (a._isMobileMode())
        return a._innerSendToMobileV2("ChangeContrast", Kr(u, i)).then(function() {
          on.refreshImageAfterInvokeFun(a, t), a._ImgManager._UIView.GetWebViewer().clearSelectedAreas();
        });
      var c = a._ImgManager.convertClientIndexToServerId(u);
      return c == -1 ? (n.Errors.IndexOutOfRange(a), n.Promise.reject({ code: a._errorCode, message: a._errorString })) : a._innerFunV2("ChangeContrast", zt(c, i));
    } }, { key: "publicGetImageAsync", value: function(t, i, a, u, c) {
      var d = this;
      if (d._resetErr(), !d._isValid())
        return n.Promise.reject({ code: d._errorCode, message: d._errorString });
      var _ = parseInt(t);
      if (isNaN(_))
        return n.Errors.InvalidIndex(d), n.Promise.reject({ code: d._errorCode, message: d._errorString });
      if (_ < 0 || _ >= d._ImgManager.count())
        return n.Errors.IndexOutOfRange(d), n.Promise.reject({ code: d._errorCode, message: d._errorString });
      if (d._isMobileMode())
        return d._mobileNotSupportAsync("GetImageAsync");
      var v, T = d._ImgManager.convertClientIndexToServerId(_);
      return T == -1 ? (n.Errors.IndexOutOfRange(d), n.Promise.reject({ code: d._errorCode, message: d._errorString })) : (n.isNumber(i) ? v = zt(T, i) : n.isNumber(a) && n.isNumber(u) ? v = zt(T, a, u) : n.isNumber(c) && (v = zt(T, -1, -1, c)), d._innerFunRawV2("GetImageByIndex", v, "blob"));
    } }, { key: "GetImageInfoAsync", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return n.Promise.reject({ code: i._errorCode, message: i._errorString });
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString });
      if (i._isMobileMode())
        return i._mobileNotSupportAsync("GetImageAsync");
      var u = i._ImgManager.convertClientIndexToServerId(a);
      return u == -1 ? (n.Errors.IndexOutOfRange(i), n.Promise.reject({ code: i._errorCode, message: i._errorString })) : i._innerFunV2("GetImageInfo", zt(u)).then(function(c) {
        var d = 0, _ = 0, v = c;
        if (l.Lib.isArray(c) && c.length == 1 && (v = c[0]), l.Lib.isString(v)) {
          var T = v.split(",");
          d = parseInt(T[0]), _ = parseInt(T[1]);
        }
        return { width: d, height: _ };
      });
    } }, { key: "IfShowUI", get: function() {
      return this._resetErr(), this._isValid() ? this._isMobileMode() ? this._mobileNotSupport("IfShowUI") : this._innerFun("IfShowUI") : vt;
    }, set: function(t) {
      this._setIfShowUI(t);
    } }, { key: "IfShowFileDialog", get: function() {
      return this._getIfShowFileDialog();
    }, set: function(t) {
      this._setIfShowFileDialog(t);
    } }, { key: "checkErrorString", value: function() {
      var t = this._errorCode;
      if (t === -2115)
        return !0;
      if (t === -2003 && !l.DWT.IfHttpPostErrorNoWindow) {
        var i = window.open("", "ErrorMessage", "height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");
        i == null || i.document.writeln(this.__HTTPPostResponseString);
      }
      return t === 0;
    } }]), r;
  }(im);
  function sm(o, e, r, t, i, a, u) {
    var c = this, d = parseInt(o), _ = c.__backgroundFillColor;
    return n.isUndef(_) ? _ = "FFFFFF" : n.isNumber(_) ? _ = _.toString(16) : n.isString(_) && (_ = n.replaceAll(_, "#", "")), c._innerSendToMobile("Erase", Kr(d, e, r, t, i, _), 0, function() {
      on.refreshImageAfterInvokeFun(c, o), n.isFunction(a) && setTimeout(a, 30);
    }, function() {
      n.isFunction(u) && u(c._errorCode, c._getErrorString());
    });
  }
  function um(o, e, r) {
    var t = this, i = parseInt(o);
    return t._innerSendToMobile("GetSkewAngle", Kr(i), 0, function(a) {
      on.refreshImageAfterInvokeFun(t, o), n.isFunction(e) && setTimeout(function() {
        e(a);
      }, 30);
    }, function() {
      n.isFunction(r) && r(t._errorCode, t._getErrorString());
    });
  }
  function _h(o, e, r, t) {
    var i = this, a = parseInt(o), u = i.__backgroundFillColor;
    return n.isUndef(u) ? u = "FFFFFF" : n.isNumber(u) ? u = "0x" + u.toString(16) : n.isString(u) && (u = n.replaceAll(u, "#", "")), i._innerSendToMobileV2("RotateEx", Kr(a, e, r, t, u)).then(function() {
      on.refreshImageAfterInvokeFun(i, o), i._ImgManager._UIView.GetWebViewer().clearSelectedAreas();
    });
  }
  function vh(o, e, r, t) {
    var i = this, a = parseInt(o), u = parseInt(e), c = parseInt(r);
    return i._innerSendToMobileV2("ChangeImageSize", Kr(a, u, c, t)).then(function() {
      on.refreshImageAfterInvokeFun(i, o);
    });
  }
  function yh(o) {
    var e = this, r = parseInt(o);
    return e._innerSendToMobileV2("Flip", Kr(r)).then(function() {
      on.refreshImageAfterInvokeFun(e, o), e._ImgManager._UIView.GetWebViewer().clearSelectedAreas();
    });
  }
  function bh(o, e, r, t, i) {
    var a = this, u = parseInt(o);
    return a._innerSendToMobileV2("Crop", Kr(u, e, r, t, i)).then(function() {
      var c, d;
      on.refreshImageAfterInvokeFun(a, o), c = a._errorCode, d = a._getErrorString(), a._ImgManager.getView().GetWebViewer().clearSelectedAreas(), a._errorCode = c, a._errorString = d;
    });
  }
  function cm(o, e, r, t, i, a, u, c) {
    var d = this, _ = parseInt(o), v = parseInt(r), T = parseInt(t), M = parseInt(a);
    return isNaN(v) || v <= 0 || isNaN(T) || T <= 0 || isNaN(M) || M < 0 ? (n.Errors.InvalidParameter(d), n.isFunction(c) && c(d._errorCode, d._getErrorString()), !1) : d._innerSendToMobile("SetDPI", Kr(_, v, T, i, M), 0, function() {
      on.refreshImageAfterInvokeFun(d, o), n.isFunction(u) && setTimeout(u, 30);
    }, function() {
      n.isFunction(c) && c(d._errorCode, d._getErrorString());
    });
  }
  function wh(o) {
    var e = this, r = parseInt(o);
    return e._innerSendToMobileV2("Invert", Kr(r)).then(function() {
      on.refreshImageAfterInvokeFun(e, o);
    });
  }
  function uu(o, e, r, t, i, a, u) {
    var c, d = o._ImgManager.convertClientIndexToServerId(r);
    if (d == -1)
      return n.Errors.IndexOutOfRange(o), n.isFunction(i) && i(o._errorCode, o._errorString), !1;
    if (c = o._innerFun(e, zt(d)), a)
      return c;
    var _ = c == 1;
    return _ ? (u && (on.refreshImageAfterInvokeFun(o, r), o._ImgManager._UIView.GetWebViewer().clearSelectedAreas()), n.isFunction(t) && t()) : n.isFunction(i) && i(o._errorCode, o._errorString), _;
  }
  var Zc = function() {
    function o(e, r, t, i) {
      Gn(this, o);
      var a = this;
      a._md5 = t, a._length = r, a._content = i;
    }
    return zn(o, [{ key: "getLength", value: function() {
      return this._length;
    } }, { key: "getMD5", value: function() {
      return this._md5;
    } }, { key: "getData", value: function(e, r) {
      var t = this, i = r;
      return n.isNumber(e) && n.isNumber(r) ? e < 0 || r <= 0 ? "" : e == 0 && i == t._length ? t._content : (e + i > t._length && (i = t._length - e), t._content.substr(e, i)) : "";
    } }]), o;
  }();
  function lm(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  n.html5.Base64Result = Zc;
  var dm = function(o) {
    Hr(r, o);
    var e = lm(r);
    function r() {
      return Gn(this, r), e.apply(this, arguments);
    }
    return zn(r, [{ key: "SetCookie", value: function(t) {
      return this._cookie = t, document.cookie = t, Gt;
    } }, { key: "LoadImageFromBase64Binary", value: function(t, i, a, u) {
      var c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      if (!t)
        return n.Errors.InvalidParameter(c), n.isFunction(u) && u(c._errorCode, c._getErrorString()), !1;
      var d, _, v = t, T = vt, M = "LoadImageFromBase64Binary", A = i, S = 1;
      if (v instanceof Zc && n.isFunction(v.getLength) && n.isFunction(v.getData) && (v = v.getData(0, v.getLength())), n.isString(v))
        if (v.indexOf("data:image/bmp") != -1)
          A = 0;
        else if (v.indexOf("data:image/jpeg") != -1)
          A = 1;
        else if (v.indexOf("data:image/tif") != -1)
          A = 2;
        else if (v.indexOf("data:image/png") != -1)
          A = 3;
        else if (v.indexOf("data:application/pdf") != -1)
          A = 4;
        else if (v.indexOf("data:image/jp2") != -1)
          A = 14;
        else {
          var V = v.substr(0, 64);
          A = ja(l.Lib.base64.decode(V, !0));
        }
      if (A != l.DWT.EnumDWT_ImageType.IT_BMP && A != l.DWT.EnumDWT_ImageType.IT_JPG && A != l.DWT.EnumDWT_ImageType.IT_TIF && A != l.DWT.EnumDWT_ImageType.IT_PNG && A != l.DWT.EnumDWT_ImageType.IT_PDF && A != l.DWT.EnumDWT_ImageType.IT_J2K && (A = -1), !n.License.checkProductKey(c, { Core: !0 }) || !n.License.checkPDFProductKeyWhenNeeds(c, A))
        return n.isFunction(u) && u(c._errorCode, c._getErrorString()), vt;
      var ne = c._innerGetCurrentDocumentName();
      if (ne == "" && c._ImgManager && (ne = c._ImgManager.getWebViewer().GetDefaultFileName()), c._isMobileMode()) {
        n.cancelFrom = Li, n.showProgress(c, M, Gt), c.__bLoadingImage = Gt;
        var z = v;
        if (n.isString(v)) {
          var ue;
          if (v.indexOf("blob:") >= 0 || v.indexOf("data:") >= 0 || (ue = A == l.DWT.EnumDWT_ImageType.IT_PNG ? "data:image/png;base64," : A == l.DWT.EnumDWT_ImageType.IT_JPG ? "data:image/jpeg;base64," : A == l.DWT.EnumDWT_ImageType.IT_TIF ? "data:image/tif;base64," : A == l.DWT.EnumDWT_ImageType.IT_PDF ? "data:application/pdf;base64," : A == l.DWT.EnumDWT_ImageType.IT_BMP ? "data:image/bmp;base64," : A == l.DWT.EnumDWT_ImageType.IT_J2K ? "data:image/jp2;base64," : "data:application/octet-stream;base64,", v = [ue, v].join("")), v.indexOf("data:") >= 0 && (z = n.MobileFuns.dataURLtoBlob(v)) == 0)
            return l.Lib.closeProgress(c, M), c.__bLoadingImage = !1, n.Errors.ConvertFromBase64Failed(c), n.isFunction(u) && u(c._errorCode, c._getErrorString(), v, i), !1;
        } else if (v instanceof ArrayBuffer) {
          var xe = "image/png";
          A == l.DWT.EnumDWT_ImageType.IT_PNG ? xe = "image/png" : A == l.DWT.EnumDWT_ImageType.IT_JPG ? xe = "image/jpeg" : A == l.DWT.EnumDWT_ImageType.IT_TIF ? xe = "image/tiff" : A == l.DWT.EnumDWT_ImageType.IT_PDF ? xe = "application/pdf" : A == l.DWT.EnumDWT_ImageType.IT_BMP ? xe = "image/bmp" : A == l.DWT.EnumDWT_ImageType.IT_J2K && (xe = "image/jp2"), z = new Blob([v], { type: xe });
        }
        return d = c._innerSendToMobile("LoadImageFromBinary", Kr(z, 0, null, ne), 0, function() {
          if (l.Lib.closeProgress(c, M), c.__bLoadingImage = !1, c._isBindViewer()) {
            var Fe = c._ImgManager.getCurrentImageIndex();
            Fe >= 0 && c.__onRefreshUI(Fe);
          }
          return a && a(v, i), !0;
        }, function() {
          l.Lib.closeProgress(c, M), c.__bLoadingImage = !1, n.isFunction(u) && u(c._errorCode, c._getErrorString(), v, i);
        }), !0;
      }
      return n.isFunction(a) && (T = Gt), n.isString(v) && v.indexOf("base64,") != -1 && (v = v.substr(v.indexOf("base64,") + 7)), _ = c.__GetLoadEventsNum(), T ? (n.cancelFrom = Li, n.showProgress(c, M, Gt), c.__bLoadingImage = Gt, S = 0, d = c._innerSend(M, zt(v, A, _, S), Gt, function() {
        if (l.Lib.closeProgress(c, M), c.__bLoadingImage = !1, c._isBindViewer()) {
          var Fe = c._ImgManager.getCurrentImageIndex();
          Fe >= 0 && c.__onRefreshUI(Fe);
        }
        return c._blts && l.DWT.lcvrf(c), a && a(v, i), !0;
      }, function() {
        l.Lib.closeProgress(c, M), c.__bLoadingImage = !1, n.isFunction(u) && u(c._errorCode, c._getErrorString(), v, i);
      })) : (d = c.__innerLoadImageFun(M, zt(v, A, _, S), S, ne)) && c._blts && l.DWT.lcvrf(c), d;
    } }, { key: "SaveSelectedImagesToBytes", value: function(t, i) {
      return n.Errors.HTML5NotSupport(this), vt;
    } }, { key: "LoadImageFromBytes", value: function(t, i, a) {
      return n.Errors.HTML5NotSupport(this), vt;
    } }, { key: "SetCancel", value: function(t, i) {
      var a = this;
      return a._resetErr(), !!a._isValid() && (a._isMobileMode() ? a._mobileNotSupport("SetCancel", i) : (this._innerSend("SetCancel", null, Gt, t, i), !0));
    } }, { key: "_asyncSetImageWidth", value: function(t, i, a, u) {
      var c = this, d = parseInt(t);
      return c._innerSendToMobile("SetImageWidth", Kr(d, i), 0, function() {
        on.refreshImageAfterInvokeFun(c, t), n.isFunction(a) && setTimeout(a, 30);
      }, function() {
        n.isFunction(u) && u(c._errorCode, c._getErrorString());
      });
    } }, { key: "SetImageWidth", value: function(t, i, a, u) {
      var c, d = this;
      if (d._resetErr(), !d._isValid())
        return !1;
      var _ = parseInt(t);
      if (isNaN(_))
        return n.Errors.InvalidIndex(d), n.isFunction(u) && u(d._errorCode, d._getErrorString()), !1;
      if (_ < 0 || _ >= d._ImgManager.count())
        return n.Errors.IndexOutOfRange(d), n.isFunction(u) && u(d._errorCode, d._getErrorString()), !1;
      if (n.isUndefined(i))
        return n.Errors.InvalidParameter(d), n.isFunction(u) && u(d._errorCode, d._getErrorString()), !1;
      if (d._isMobileMode())
        return d._asyncSetImageWidth(_, i, a, u);
      var v = d._ImgManager.convertClientIndexToServerId(_);
      return v == -1 ? (n.Errors.IndexOutOfRange(d), n.isFunction(u) && u(d._errorCode, d._getErrorString()), !1) : ((c = d._innerFun("SetImageWidth", zt(v, i)) == 1) ? n.isFunction(a) && a() : n.isFunction(u) && u(d._errorCode, d._getErrorString()), c);
    } }, { key: "HTTPDownloadStreamThroughPost", value: function(t, i) {
      return n.Errors.HTML5NotSupport(this), vt;
    } }, { key: "HTTPUploadStreamThroughPost", value: function(t, i, a, u, c) {
      return n.Errors.HTML5NotSupport(this), vt;
    } }, { key: "HTTPUploadThroughPutDirectly", value: function(t, i, a, u, c) {
      return n.Errors.HTML5NotSupport(this), !1;
    } }, { key: "SetCustomDSDataEx", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("SetCustomDSDataEx") : this._innerFun("SetCustomDSDataEx", zt(t)));
    } }, { key: "SetCustomDSData", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return !1;
      if (i._isMobileMode())
        return i._mobileNotSupport("SetCustomDSData");
      var a = on.replaceLocalFilename(t);
      return this._innerFun("SetCustomDSData", zt(a));
    } }, { key: "GetCustomDSDataEx", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("GetCustomDSDataEx") : t._innerFun("GetCustomDSDataEx"));
    } }, { key: "GetCustomDSData", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return !1;
      if (i._isMobileMode())
        return i._mobileNotSupport("GetCustomDSData");
      var a = on.replaceLocalFilename(t);
      return i._innerFun("GetCustomDSData", zt(a));
    } }, { key: "_asyncConvertToBW", value: function(t, i, a) {
      var u = this, c = parseInt(t);
      return u._innerSendToMobile("ConvertToBWScale", Kr(c), 0, function() {
        on.refreshImageAfterInvokeFun(u, t), n.isFunction(i) && i();
      }, function() {
        n.isFunction(a) && a(u._errorCode, u._getErrorString());
      });
    } }, { key: "ConvertToBW", value: function(t, i, a) {
      var u = this;
      if (u._resetErr(), !u._isValid())
        return !1;
      if (!n.License.checkProductKey(u, { Core: !0 }))
        return n.isFunction(a) && a(u._errorCode, u._getErrorString()), !1;
      var c = parseInt(t);
      if (isNaN(c))
        return n.Errors.InvalidIndex(u), n.isFunction(a) && a(u._errorCode, u._getErrorString()), !1;
      if (c < 0 || c >= u._ImgManager.count())
        return n.Errors.IndexOutOfRange(u), n.isFunction(a) && a(u._errorCode, u._getErrorString()), !1;
      if (u._isMobileMode())
        return u._asyncConvertToBW(c, i, a);
      var d = u.ChangeBitDepth(t, 1, !0);
      return d ? n.isFunction(i) && i() : n.isFunction(a) && a(u._errorCode, u._getErrorString()), d;
    } }, { key: "LoadImageFromBinary", value: function(t, i, a) {
      return this._innerLoadImageFromBinary(t, 0, !0, i, a);
    } }, { key: "EnableSourceUI", value: function(t, i) {
      var a = this;
      return a._resetErr(), !!a._isValid() && (a._isMobileMode() ? a._mobileNotSupport("EnableSourceUI", i) : (a._innerSend("EnableSourceUI", null, !0, t, i), !0));
    } }, { key: "GetIfShowVideoContainer", value: function() {
      return this._ImgManager.GetIfShowVideoContainer();
    } }, { key: "ShowVideoContainer", value: function(t) {
      return this._ImgManager.ShowVideoContainer(t);
    } }, { key: "UpdateVideoContainer", value: function(t) {
      return this._ImgManager.UpdateVideoContainer(t);
    } }, { key: "ChangeBitDepth", value: function(t, i, a) {
      var u, c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      if (c._isMobileMode())
        return c._mobileNotSupport("ChangeBitDepth");
      if (u = parseInt(t), isNaN(u))
        return n.Errors.InvalidIndex(c), !1;
      if (u < 0 || u >= c._ImgManager.count())
        return n.Errors.IndexOutOfRange(c), !1;
      var d = c._ImgManager.convertClientIndexToServerId(u);
      return d == -1 ? (n.Errors.IndexOutOfRange(c), !1) : c._innerFun("ChangeBitDepth", zt(d, i, a));
    } }, { key: "_asyncConvertToGrayScale", value: function(t, i, a) {
      var u = this, c = function() {
        n.isFunction(a) && a(u._errorCode, u._getErrorString());
      };
      if (!n.License.checkProductKey(u, { Core: !0 }))
        return c(), !1;
      var d = parseInt(t);
      return u._innerSendToMobile("ConvertToGrayScale", Kr(d), 0, function() {
        on.refreshImageAfterInvokeFun(u, t), n.isFunction(i) && setTimeout(i, 30);
      }, c);
    } }, { key: "ConvertToGrayScale", value: function(t, i, a) {
      var u, c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      var d = parseInt(t);
      if (isNaN(d))
        return n.Errors.InvalidIndex(c), n.isFunction(a) && a(c._errorCode, c._getErrorString()), !1;
      if (d < 0 || d >= c._ImgManager.count())
        return n.Errors.IndexOutOfRange(c), n.isFunction(a) && a(c._errorCode, c._getErrorString()), !1;
      if (c._isMobileMode())
        return c._asyncConvertToGrayScale(d, i, a);
      var _ = c._ImgManager.convertClientIndexToServerId(d);
      return _ == -1 ? (n.Errors.IndexOutOfRange(c), n.isFunction(a) && a(c._errorCode, c._getErrorString()), !1) : ((u = c._innerFun("ConvertToGrayScale", zt(_)) == 1) ? (on.refreshImageAfterInvokeFun(c, d), n.isFunction(i) && i()) : n.isFunction(a) && a(c._errorCode, c._getErrorString()), u);
    } }, { key: "ClearTiffCustomTag", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._aryTiffTag.splice(0, t._aryTiffTag.length), !!t._isMobileMode() || t._innerFun("ClearTiffCustomTag"));
    } }, { key: "SetTiffCustomTag", value: function(t, i, a) {
      var u = this;
      if (u._resetErr(), !u._isValid())
        return !1;
      if (n.isUndef(t) || n.isUndef(i))
        return n.Errors.InvalidParameter(u), !1;
      var c, d = 1 * t;
      if (c = n.isString(i) ? n.replaceAll(i, '"', '\\"') : i, d <= 0 || d > 2147483647)
        return n.Errors.InvalidTiffTagError(u), !1;
      var _, v = 0, T = !1, M = u._aryTiffTag.length;
      for (v = 0; v < M; v++)
        (_ = u._aryTiffTag[v]).tag == d && (_.Content = i, _.UseBase64Encoding = a, T = !0);
      return !T && M >= 32 ? (n.Errors.TiffTagCountExceedError(u), !1) : u._isMobileMode() ? (T || u._aryTiffTag.push({ tag: t, content: i, UseBase64Encoding: a }), !0) : u._innerFun("SetTiffCustomTag", zt(d, c, a));
    } }, { key: "IsBlankImage", value: function(t) {
      var i, a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      if (a._isMobileMode())
        return a._mobileNotSupport("IsBlankImage");
      if (i = parseInt(t), isNaN(i))
        return n.Errors.InvalidIndex(a), !1;
      if (i < 0 || i >= a._ImgManager.count())
        return n.Errors.IndexOutOfRange(a), !1;
      var u = a._ImgManager.convertClientIndexToServerId(i);
      return u == -1 ? (n.Errors.IndexOutOfRange(a), !1) : a._innerFun("IsBlankImage", zt(u, vt));
    } }, { key: "IsBlankImageExpress", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return !1;
      if (i._isMobileMode())
        return i._mobileNotSupport("IsBlankImageExpress");
      var a = parseInt(t);
      if (isNaN(a))
        return n.Errors.InvalidIndex(i), !1;
      if (a < 0 || a >= i._ImgManager.count())
        return n.Errors.IndexOutOfRange(i), !1;
      var u = i._ImgManager.convertClientIndexToServerId(a);
      return u == -1 ? (n.Errors.IndexOutOfRange(i), !1) : i._innerFun("IsBlankImage", zt(u, Gt));
    } }, { key: "SetOpenSourceTimeout", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("SetOpenSourceTimeout") : i._innerFun("SetOpenSourceTimeout", zt(t)));
    } }, { key: "GetImageURL", value: function(t, i, a, u, c) {
      var d = this;
      if (d._resetErr(), !d._isValid())
        return !1;
      if (d._isMobileMode()) {
        if (!n.isFunction(i))
          return d._mobileNotSupport("GetImageURL");
        d._ImgManager.getWebViewer().GetImageData(d._ImgManager.getWebViewer().GetUidByIndex(t)).then(function(z) {
          i(z.oriData);
        }, function(z) {
          a(z.message);
        });
      }
      var _, v, T, M = t, A = parseInt(i), S = parseInt(a);
      if (u ? (_ = "", v = "dwt://") : (_ = d._httpUrl, v = "dwt/"), T = [_, v, n.product.getDWTPrefix(), n.product.getServerVersionInfo(), "/img?id=", d._clientId], n.isUndefined(M) || M === null)
        return n.Errors.IndexNullOrUndefined(d), "";
      if (c)
        T.push("&index=-1&width=-1&height=-1&webcam="), T.push(c);
      else {
        if (M = parseInt(M), isNaN(M))
          return n.Errors.InvalidIndex(d), "";
        if (M < -1 || M >= d._ImgManager.count())
          return n.Errors.IndexOutOfRange(d), "";
        var V = d._ImgManager.convertClientIndexToServerId(M);
        if (V == -1)
          return "";
        T.push("&index="), T.push(V), A > 0 && S > 0 && (T.push("&width="), T.push(A), T.push("&height="), T.push(S));
      }
      if (T.push("&t="), T.push((/* @__PURE__ */ new Date()).getTime()), T = T.join(""), l.navInfoSync.bFileSystem && T.indexOf("dwt://") < 0) {
        var ne = new Image();
        ne.crossOrigin = "anonymous", ne.src = T, ne = null;
      }
      return T;
    } }, { key: "GetImagePartURL", value: function(t, i, a) {
      var u = this;
      if (u._resetErr(), !u._isValid())
        return !1;
      if (u._isMobileMode())
        return u._mobileNotSupport("GetImagePartURL");
      var c = parseInt(t);
      return isNaN(c) ? (n.Errors.InvalidIndex(u), "") : c < 0 || c >= u._ImgManager.count() ? (n.Errors.IndexOutOfRange(u), "") : this.GetImageURL(c, i, a, !0);
    } }, { key: "SetLanguage", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("SetLanguage") : i._innerFun("SetLanguageForSecurity", zt(t)));
    } }, { key: "_wasmGetLicenseInfo", value: function(t, i) {
      var a = this;
      return a._innerSendToMobile("GetLicenseInfo", Kr(), 0, function(u) {
        if (u)
          if (u.exception)
            i && i(u.exception);
          else {
            if (Wu(a, u), n.detect.wasmScriptLoaded && !n.detect.wasmPdfReaderLoaded)
              try {
                l.WasmEnv.loadPdfReader(), n.detect.wasmPdfReaderLoaded = !0;
              } catch (c) {
                c && n.error(c.message);
              }
            t && t(a.__licenseInfo);
          }
        else
          i && i();
      }, i);
    } }, { key: "GetLicenseInfo", value: function(t, i) {
      var a = this;
      if (a.__licenseInfo)
        n.isFunction(t) && t(a.__licenseInfo);
      else {
        if (a._isMobileMode())
          return a._wasmGetLicenseInfo(t, i);
        a._innerFunRaw("GetLicenseInfo", null, Gt, vt, Gt, function(u) {
          if (u)
            if (u.exception)
              n.isFunction(i) && i(u.exception);
            else {
              if (Wu(a, u), n.detect.wasmScriptLoaded && !n.detect.wasmPdfReaderLoaded)
                try {
                  l.WasmEnv.loadPdfReader(), n.detect.wasmPdfReaderLoaded = !0;
                } catch (c) {
                  c && n.error(c.message);
                }
              n.isFunction(t) && t(a.__licenseInfo);
            }
          else
            n.isFunction(i) && i();
        }, i);
      }
      return Gt;
    } }, { key: "SetProductKeyAsync", value: function(t) {
      return this._setProductKeyAsync(t);
    } }, { key: "GetVersionInfoAsync", value: function() {
      return this._innerFunV2("VersionInfo");
    } }, { key: "isUsingActiveX", value: function() {
      return !1;
    } }, { key: "SetLTSLicenseAsync", value: function(t) {
      return this._setLTSLicenseAsync(t);
    } }]), r;
  }(am);
  function hm(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function qc(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function hs(o, e, r) {
    return e.has(o), r;
  }
  var $c = /* @__PURE__ */ new WeakSet(), Vu = /* @__PURE__ */ new WeakSet(), el = /* @__PURE__ */ new WeakSet(), fm = function(o) {
    Hr(r, o);
    var e = hm(r);
    function r() {
      var t;
      Gn(this, r);
      for (var i = arguments.length, a = new Array(i), u = 0; u < i; u++)
        a[u] = arguments[u];
      return qc(ln(t = e.call.apply(e, [this].concat(a))), el), qc(ln(t), Vu), qc(ln(t), $c), t;
    }
    return zn(r, [{ key: "SaveAsGIF", value: function(t, i, a, u) {
      var c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      if (c._isMobileMode())
        return n.Errors.HTML5NotSupport(c), n.isFunction(u) && Zr(u, c), vt;
      if (!(n.License.checkProductKey(c, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(c, { Webcam: !0 }, !0)))
        return n.isFunction(u) && u(c._errorCode, c._getErrorString()), !1;
      var d, _ = on.replaceLocalFilename(t);
      return !!za(c, i, u) && ((d = c._ImgManager.convertClientIndexToServerId(i)) == -1 ? (n.Errors.IndexOutOfRange(c), n.isFunction(u) && Zr(u, c), !1) : c.__innerSaveImage("SaveAsGIF", zt(_, d), a, u));
    } }, { key: "SaveSelectedImagesToBase64Binary", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      if (!(n.License.checkProductKey(a, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(a, { Webcam: !0 }, !0)))
        return n.isFunction(i) && i(a._errorCode, a._getErrorString()), !1;
      if (a._isMobileMode())
        return a._mobileNotSupport("SaveSelectedImagesToBase64Binary", i);
      var u = Is(a);
      return n.isFunction(t) ? (a._innerSend("SaveSelectedImagesToBase64Binary", zt(u.join(",")), !0, t, i), !0) : a._innerFun("SaveSelectedImagesToBase64Binary", zt(u.join(",")));
    } }, { key: "ShowFileDialog", value: function(t, i, a, u, c, d, _, v) {
      var T = this;
      if (T._resetErr(), !T._isValid())
        return !1;
      if (T._isMobileMode())
        return T._mobileNotSupport("ShowFileDialog");
      var M, A = on.replaceLocalFilename(c);
      return M = T.__GetLoadEventsNum(), T._innerSend("ShowFileDialog", zt(t, i, a, u, A, d, _, v, M), !0), !0;
    } }, { key: "FTPDownload", value: function(t, i, a, u) {
      var c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      if (c._isMobileMode())
        return c._mobileNotSupport("FTPDownload", u);
      if (!t)
        return n.Errors.InvalidParameter(c), n.isFunction(u) && u(c._errorCode, c._getErrorString()), !1;
      var d = on.getImageType(i);
      return hs(c, el, Sh).call(c, "FTPDownload", zt(t, i), d, a, u);
    } }, { key: "FTPDownloadEx", value: function(t, i, a, u, c) {
      var d = this;
      return d._resetErr(), !!d._isValid() && (d._isMobileMode() ? d._mobileNotSupport("FTPDownloadEx", c) : t ? hs(d, el, Sh).call(d, "FTPDownloadEx", zt(t, i, a), a, u, c) : (n.Errors.InvalidParameter(d), n.isFunction(c) && c(d._errorCode, d._getErrorString()), !1));
    } }, { key: "FTPUpload", value: function(t, i, a, u, c) {
      var d = this;
      if (d._resetErr(), !d._isValid())
        return !1;
      if (d._isMobileMode())
        return d._mobileNotSupport("FTPUpload", c);
      var _ = d._ImgManager.convertClientIndexToServerId(i);
      return !!za(d, i, c) && (_ == -1 ? (n.Errors.IndexOutOfRange(d), n.isFunction(c) && Zr(c, d), !1) : d.__innerFTPUpload("FTPUpload", zt(t, _, a), u, c));
    } }, { key: "FTPUploadEx", value: function(t, i, a, u, c, d) {
      var _, v = this;
      return v._resetErr(), !!v._isValid() && (v._isMobileMode() ? v._mobileNotSupport("FTPUploadEx", d) : !!za(v, i, d) && ((_ = v._ImgManager.convertClientIndexToServerId(i)) == -1 ? (n.Errors.IndexOutOfRange(v), n.isFunction(d) && Zr(d, v), !1) : v.__innerFTPUpload("FTPUploadEx", zt(t, _, a, u), c, d)));
    } }, { key: "FTPUploadAllAsMultiPageTIFF", value: function(t, i, a, u) {
      var c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      if (c._isMobileMode())
        return c._mobileNotSupport("FTPUploadAllAsMultiPageTIFF", u);
      var d = [];
      return Iu(c, d), this.__innerFTPUpload("FTPUploadAsMultiPageTIFF", zt(t, i, d.join(",")), a, u);
    } }, { key: "FTPUploadAllAsPDF", value: function(t, i, a, u) {
      var c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      if (c._isMobileMode())
        return c._mobileNotSupport("FTPUploadAllAsPDF", u);
      var d = [];
      return Iu(c, d), c.__innerFTPUpload("FTPUploadAsMultiPagePDF", zt(t, i, d.join(",")), a, u);
    } }, { key: "FTPUploadAsMultiPagePDF", value: function(t, i, a, u) {
      var c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      if (c._isMobileMode())
        return c._mobileNotSupport("FTPUploadAsMultiPagePDF", u);
      var d = Is(c);
      return c.__innerFTPUpload("FTPUploadAsMultiPagePDF", zt(t, i, d.join(",")), a, u);
    } }, { key: "FTPUploadAsMultiPageTIFF", value: function(t, i, a, u) {
      var c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      if (c._isMobileMode())
        return c._mobileNotSupport("FTPUploadAsMultiPageTIFF", u);
      var d = Is(c);
      return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF", zt(t, i, d.join(",")), a, u);
    } }, { key: "HTTPDownloadDirectly", value: function(t, i, a, u, c) {
      var d = this;
      if (d._resetErr(), !d._isValid())
        return !1;
      if (!n.License.checkProductKey(d, { Core: !0 }))
        return n.isFunction(c) && c(d._errorCode, d._getErrorString()), !1;
      if (d._isMobileMode())
        return d._mobileNotSupport("HTTPDownloadDirectly", c);
      var _, v, T = jo(d), M = on.combineUrl(d, t, i);
      if (M === void 0)
        return n.Errors.ParameterCannotEmpty(d), !1;
      if (!a || a == "")
        return n.Errors.InvalidLocalFilename(d, "HTTPDownloadDirectly"), n.isFunction(c) && Zr(c, d), !1;
      if (_ = on.getImageType(a), !n.License.checkPDFProductKeyWhenNeeds(d, _))
        return n.isFunction(c) && c(d._errorCode, d._errorString), !1;
      n.cancelFrom = Qi, v = on.replaceLocalFilename(a), n.showProgress(d, "HTTPDownloadDirectly", !0);
      var A = !0;
      return d._OnPercentDone([0, -1, l.MSG.Downloading, "http"]), n.isFunction(u) || (A = !1), on.loadHttpBlob(d, "get", M, A, function(S) {
        d._OnPercentDone([0, -1, l.MSG.Loading]);
        var V = d.__GetLoadEventsNum();
        return d.__LoadImageFromBytesV1(S, 3, v, V, A, u, c);
      }, function() {
        return n.closeProgress(d, "HTTPDownloadDirectly"), n.isFunction(c) && Zr(c, d), !1;
      }, function(S) {
        var V = S.total === 0 ? 100 : Math.round(100 * S.loaded / S.total);
        [S.loaded, " / ", S.total].join(""), d._OnPercentDone([0, V, "", "http"]);
      }, T);
    } }, { key: "HTTPUploadThroughPostDirectly", value: function(t, i, a, u, c, d) {
      var _ = this;
      if (_._resetErr(), !_._isValid())
        return !1;
      if (_._isMobileMode())
        return _._mobileNotSupport("HTTPUploadThroughPostDirectly", d);
      var v = on.combineUrl(_, t, a), T = function() {
        n.isFunction(d) && Zr(d, _, _.__HTTPPostResponseString);
      };
      return _.__HTTPPostResponseString = "", t === "" ? (n.Errors.HttpServerCannotEmpty(_), T(), !1) : _._innerUploadDirectly(v, i, u, !0, !1, 0, !0, !1, c, T);
    } }, { key: "_innerUploadDirectly", value: function(t, i, a, u, c, d, _, v, T, M) {
      var A, S = this, V = jo(S), ne = "HTTPUploadThroughPostDirectly", z = !0;
      if (t === !1 || t === "")
        return n.Errors.ParameterCannotEmpty(S), n.isFunction(M) && M(S._errorCode, S._getErrorString()), !1;
      if (n.isFunction(T) || (z = !1), !n.License.checkProductKey(S, { Core: !0 }))
        return n.isFunction(M) && M(S._errorCode, S._getErrorString()), !1;
      n.cancelFrom = ei;
      var ue = function() {
        return n.needShowTwiceShowDialog = !1, u && n.closeProgress(S, ne), n.isFunction(M) && M(S._errorCode, S._getErrorString()), !1;
      };
      return n.needShowTwiceShowDialog = !0, u && n.showProgress(S, ne, !1), (A = on.replaceLocalFilename(i)) && A != "" ? v && v.bCancel ? (v.st = 2, ue()) : hs(S, $c, Ih).call(S, A, z, c, function(xe) {
        return n.needShowTwiceShowDialog = !1, v && v.bCancel ? (v.st = 2, ue()) : xe && (n.dlgRef > 0 || S.__IfShowCancelDialogWhenImageTransfer == 0 || z == 0 || u === !1) ? (xe instanceof File ? xe.fileName = a : xe.name = a, da(S, !0), on.httpPostUpload(S, t, xe, z, 0, V, !0, d, _, v, function(Fe) {
          u && n.closeProgress(S, ne), n.isFunction(T) && Vi(T, Fe);
        }, ue)) : (ue(), !1);
      }, ue) : (n.Errors.InvalidFile(S), ue(), !1);
    } }, { key: "_innerUploadFilesDirectly", value: function(t, i, a, u, c, d, _, v, T) {
      var M, A = this, S = jo(A), V = "HTTPUploadThroughPostDirectly", ne = !0, z = [];
      if (t === !1 || t === "")
        return n.Errors.ParameterCannotEmpty(A), n.isFunction(T) && T(A._errorCode, A._getErrorString(), i), !1;
      if (n.isFunction(v) || (ne = !1), !n.License.checkProductKey(A, { Core: !0 }))
        return n.isFunction(T) && T(A._errorCode, A._getErrorString(), i), !1;
      n.cancelFrom = ei;
      var ue = function() {
        return n.needShowTwiceShowDialog = !1, u && n.closeProgress(A, V), n.isFunction(T) && T(i), !1;
      };
      n.needShowTwiceShowDialog = !0, u && n.showProgress(A, V, !1), n.each(i, function(Ze) {
        var Ct = on.replaceLocalFilename(Ze);
        if (!Ct || Ct == "")
          return n.Errors.InvalidFile(A), ue(), !1;
        z.push(Ct);
      });
      var xe = [], Fe = z.length, Qe = 0;
      return n.each(z, function(Ze, Ct) {
        M = hs(A, $c, Ih).call(A, Ze, ne, c, function(it) {
          if (n.needShowTwiceShowDialog = !1, !it || !(n.dlgRef > 0 || A.__IfShowCancelDialogWhenImageTransfer == 0 || ne == 0 || u === !1))
            return u && n.closeProgress(A, V), n.isFunction(ue) && ue(), !1;
          var Bt = on.cformat(a, Ct + 1);
          return it instanceof File ? it.fileName = Bt : it.name = Bt, xe[Ct] = it, ++Qe == Fe ? (da(A, !0), on.httpPostUploadFiles(A, t, xe, ne, 0, S, u, d, _, function(yt) {
            u && n.closeProgress(A, V), n.isFunction(v) && Vi(v, yt);
          }, function() {
            u && n.closeProgress(A, V), n.isFunction(ue) && ue();
          })) : void 0;
        }, function() {
          u && n.closeProgress(A, V), n.isFunction(ue) && ue();
        });
      }), M;
    } }, { key: "SetUploadSegment", value: function(t, i) {
      var a = this;
      return a._resetErr(), !!a._isValid() && (a._isMobileMode() ? a._mobileNotSupport("SetUploadSegment") : !n.isNumber(t) || t < 0 ? (n.Errors.InvalidSegmentUploadThreshold(a), !1) : !n.isNumber(i) || i <= 0 ? (n.Errors.InvalidModuleSize(a), !1) : (a._segementUploadThreshold = 1024 * t * 1024, a._moduleSize = 1024 * i, !0));
    } }, { key: "_innerFormFieldHTTPUpload", value: function(t, i, a) {
      var u, c = this, d = "HTTPUpload", _ = t;
      if (c.__HTTPPostResponseString = "", u = function() {
        return n.needShowTwiceShowDialog = !1, n.closeProgress(c, d), n.isFunction(a) && Zr(a, c, c.__HTTPPostResponseString), !1;
      }, n.isUndefined(_) || _ === "")
        return n.Errors.ParameterCannotEmpty(c), u();
      if (!n.isString(_))
        return n.Errors.InvalidUrl(c), u();
      _.indexOf("http://") != 0 && _.indexOf("https://") != 0 && (_ = n.detect.ssl ? "https://" + _ : "http://" + _), c.__HTTPPostResponseString = "", n.cancelFrom = ei, n.showProgress(c, d, !1), n.needShowTwiceShowDialog = !0;
      var v = jo(c);
      return c._OnPercentDone([0, -1, l.MSG.Uploading, "http"]), on.httpUploadByBIO(c, _, vt, 0, !0, v, !0, 0, !0, !1, function(T) {
        n.needShowTwiceShowDialog = !1, n.closeProgress(c, d), n.isFunction(i) && Vi(i, T);
      }, u);
    } }, { key: "__innnerHTTPUploadBinaryFull", value: function(t, i, a, u, c, d, _, v, T, M) {
      var A = this, S = jo(A), V = c, ne = t;
      return l.DWT.IfAddMD5InUploadHeader && i && i != "" && (S["dwt-md5"] = i), n.dlgRef > 0 || A.__IfShowCancelDialogWhenImageTransfer == 0 ? (a instanceof File ? a.fileName = V : a.name = V, da(A, !0), on.httpPostUpload(A, ne, a, !0, 0, S, !0, d, _, v, function(z) {
        n.isFunction(T) && Vi(T, z);
      }, M)) : (n.Errors.UploadError(A, !0), M());
    } }, { key: "ConvertToBase64", value: function(t, i, a, u) {
      var c = this;
      if (c._resetErr(), !c._isValid())
        return !1;
      var d = [], _ = arguments, v = parseInt(i), T = !1;
      if (!n.License.checkProductKey(c, { Core: !0 }))
        return n.isFunction(u) && u(c._errorCode, c._getErrorString()), !1;
      if (!c._checkIndices(t))
        return n.isFunction(u) && So(u, c, t, i, _), !1;
      if (v == l.DWT.EnumDWT_ImageType.IT_BMP || v == l.DWT.EnumDWT_ImageType.IT_JPG || v == l.DWT.EnumDWT_ImageType.IT_PNG) {
        if (t.length > 1)
          return n.Errors.ConvertBase64IndexMoreThanOne(c), n.isFunction(u) && So(u, c, t, i, _), !1;
      } else if (v != l.DWT.EnumDWT_ImageType.IT_TIF && v != l.DWT.EnumDWT_ImageType.IT_PDF)
        return n.Errors.InvalidImageType(c), n.isFunction(u) && So(u, c, t, i, _), !1;
      n.isArray(t) && n.each(t, function(V) {
        var ne = c._ImgManager.convertClientIndexToServerId(V);
        ne != -1 && d.push(ne);
      });
      var M = function(V) {
        var ne = [];
        return n.isArray(d) && n.each(d, function(z) {
          var ue = c._ImgManager.convertServerIdToClientIndex(z);
          ue > -1 && ne.push(ue);
        }), n.isFunction(a) && Vi(a, V, ne, i, _), !1;
      }, A = function() {
        var V = [];
        return n.isArray(d) && n.each(d, function(ne) {
          var z = c._ImgManager.convertServerIdToClientIndex(ne);
          z > -1 && V.push(z);
        }), n.isFunction(u) && So(u, c, V, i, _), !1;
      }, S = 3;
      return c._convertToBase64ByServerIds(d, v, T, S, M, A);
    } }, { key: "ClearAllHTTPFormField", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t.httpFormFields = {}, !0);
    } }, { key: "SetHTTPFormField", value: function(t, i, a) {
      var u = this;
      if (u._resetErr(), !u._isValid())
        return !1;
      var c = t;
      return n.isString(c) || (c = "" + c), i instanceof Blob && (i.name = a), u.httpFormFields[c] = i, !0;
    } }, { key: "HTTPDownloadThroughPost", value: function(t, i, a, u, c, d) {
      var _, v = this, T = jo(v), M = arguments, A = on.combineUrl(v, t, i);
      if (A === void 0)
        return n.Errors.ParameterCannotEmpty(v), vt;
      if (!n.License.checkProductKey(v, { Core: !0 }) || !n.License.checkPDFProductKeyWhenNeeds(v, a))
        return n.isFunction(c) && Zr(c, v, M), vt;
      n.cancelFrom = Qi, n.showProgress(v, "HttpDownloadThroughPost", Gt), _ = "post";
      var S = function(ne) {
        var z = ne.total === 0 ? 100 : Math.round(100 * ne.loaded / ne.total);
        [ne.loaded, " / ", ne.total].join(""), v._OnPercentDone([0, z, "", "http"]);
      }, V = Gt;
      return v._OnPercentDone([0, -1, l.MSG.Downloading, "http"]), n.isFunction(u) || (V = vt), on.loadHttpBlob(v, _, A, V, function(ne) {
        v._OnPercentDone([0, -1, l.MSG.Loading]);
        var z = a;
        z != l.DWT.EnumDWT_ImageType.IT_BMP && z != l.DWT.EnumDWT_ImageType.IT_JPG && z != l.DWT.EnumDWT_ImageType.IT_TIF && z != l.DWT.EnumDWT_ImageType.IT_PNG && z != l.DWT.EnumDWT_ImageType.IT_PDF && z != l.DWT.EnumDWT_ImageType.IT_J2K && (z = -1);
        var ue = v.__GetLoadEventsNum();
        v.__LoadImageFromBytesV1(ne, z, "", ue, V, u, c);
      }, function() {
        n.closeProgress(v, "HttpDownloadThroughPost"), n.isFunction(c) && Zr(c, v, M);
      }, S, T);
    } }, { key: "HTTPDownloadThroughGet", value: function(t, i, a, u, c) {
      return this._innerHTTPDownloadThroughGet(t, i, a, u, c);
    } }, { key: "HTTPUploadThroughPut", value: function(t, i, a, u, c) {
      var d = on.getImageType(a);
      return this.HTTPUploadThroughPutEx(t, i, a, d, u, c);
    } }, { key: "HTTPUploadThroughPutEx", value: function(t, i, a, u, c, d) {
      var _ = this, v = jo(_), T = "HTTPUploadThroughPutEx", M = on.combineUrl(_, t, a), A = !0, S = [];
      if (M === void 0)
        return n.Errors.ParameterCannotEmpty(_), n.isFunction(d) && So(d, _, "", [i], a, u), !1;
      n.isFunction(c) || (A = !1), n.cancelFrom = ei;
      var V, ne = function() {
        return n.needShowTwiceShowDialog = !1, n.closeProgress(_, T), n.isFunction(d) && So(d, _, _.__HTTPPostResponseString, S, a, u), !1;
      };
      switch (n.needShowTwiceShowDialog = !0, n.showProgress(_, T, !1), i) {
        case -1:
          for (var z = 0; z < _._ImgManager.count(); z++)
            S.push(z);
          break;
        case -2:
          S = _._ImgManager.getSelectedClientIndexArray();
          break;
        default:
          if (S.push(i), !(i >= 0))
            return n.Errors.IndexOutOfRange(_), ne();
      }
      if (t === "")
        return n.Errors.HttpServerCannotEmpty(_), ne();
      var ue = [];
      return n.isArray(S) && n.each(S, function(xe) {
        var Fe = _._ImgManager.convertClientIndexToServerId(xe);
        Fe != -1 && ue.push(Fe);
      }), _._OnPercentDone([0, -1, l.MSG.Encoding, "http"]), _.__innerConvertToBlob(u, ue, !1, A, 4, function(xe, Fe, Qe) {
        if (l.DWT.IfAddMD5InUploadHeader && Fe && Fe != "" && (v["dwt-md5"] = Fe), n.needShowTwiceShowDialog = !1, xe && (n.dlgRef > 0 || _.__IfShowCancelDialogWhenImageTransfer == 0 || A == 0)) {
          var Ze = _.__maxUploadImageSize;
          return xe.size > Ze && Ze != -1 ? (n.Errors.UploadExceededMaxSize(_), ne()) : (V = function(Ct) {
            var it = Ct.total === 0 ? 100 : Math.round(100 * Ct.loaded / Ct.total);
            [Ct.loaded, " / ", Ct.total].join(""), _._OnPercentDone([0, it, "", "http"]);
          }, _._OnPercentDone([0, -1, l.MSG.Uploading, "http"]), da(_, !0), on.httpPutImage(_, M, xe, A, function(Ct) {
            if (_.__HTTPPostResponseString = Ct, n.closeProgress(_, T), n.isFunction(c)) {
              var it = [];
              n.isArray(ue) && n.each(ue, function(Bt) {
                var yt = _._ImgManager.convertServerIdToClientIndex(Bt);
                yt > -1 && it.push(yt);
              }), Vi(c, _.__HTTPPostResponseString, it, a, u);
            }
            return !0;
          }, ne, V));
        }
        return n.closeProgress(_, T), !1;
      }, ne);
    } }, { key: "HTTPUploadAllThroughPutAsMultiPageTIFF", value: function(t, i, a, u) {
      return this.HTTPUploadThroughPutEx(t, -1, i, 2, a, u);
    } }, { key: "HTTPUploadThroughPutAsMultiPageTIFF", value: function(t, i, a, u) {
      return this.HTTPUploadThroughPutEx(t, -2, i, 2, a, u);
    } }, { key: "HTTPUploadAllThroughPutAsPDF", value: function(t, i, a, u) {
      return this.HTTPUploadThroughPutEx(t, -1, i, 4, a, u);
    } }, { key: "HTTPUploadThroughPutAsMultiPagePDF", value: function(t, i, a, u) {
      return this.HTTPUploadThroughPutEx(t, -2, i, 4, a, u);
    } }, { key: "GetSelectedImagesSize", value: function(t) {
      var i = this;
      if (i._resetErr(), !i._isValid())
        return !1;
      if (i._isMobileMode())
        return i._mobileNotSupport("GetSelectedImagesSize");
      var a = Is(i);
      return i._innerFun("GetSelectedImagesSize", zt(t, a.join(",")));
    } }, { key: "SetHTTPHeader", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      var u, c, d = t;
      if (a.__httpHeaderMap || (a.__httpHeaderMap = {}), !d || !n.isString(d))
        return n.isUndefined(d) ? n.Errors.HttpHeaderIsUndefined(a) : d === "" ? n.Errors.HttpHeaderIsEmpty(a) : d === null ? n.Errors.HttpHeaderIsNull(a) : n.Errors.HttpHeaderIsInvalid(a), !1;
      for (u = ["if-modified-since", "if-none-match", "if-range", "range", "accept-charset", "accept-encoding", "access-control-request-headers", "access-control-request-method", "connection", "content-length", "cookie", "cookie2", "date", "dnt", "expect", "host", "keep-alive", "origin", "referer", "te", "trailer", "transfer-encoding", "upgrade", "user-agent", "via"], d = d.toLowerCase(), c = 0; c < u.length; c++)
        if (u[c] == d)
          return n.Errors.HttpHeaderNotAllowed(a), !1;
      return n.isUndefined(i) || i === null || i === "" ? (t in a.__httpHeaderMap && delete a.__httpHeaderMap[t], !0) : (n.isNumber(i) && (i = "" + i), a.__httpHeaderMap[t] = i, !0);
    } }, { key: "ConvertToBlob", value: function(t, i, a, u, c) {
      return this._convertToBlobByIndices(t, i, a, u, c);
    } }, { key: "_asyncUploadFilesCmd", value: function(t, i, a, u, c, d, _, v, T, M) {
      var A = this, S = parseInt(a), V = "HTTPUpload", ne = t, z = !1, ue = [];
      A.__HTTPPostResponseString = "", n.cancelFrom = ei;
      var xe = function() {
        if (A._bServerPercentDone = !0, n.needShowTwiceShowDialog = !1, d && n.closeProgress(A, V), ue = null, n.isFunction(M)) {
          var it = [];
          n.isArray(i) && n.each(i, function(Bt) {
            var yt = A._ImgManager.convertServerIdToClientIndex(Bt);
            yt > -1 && it.push(yt);
          });
          try {
            M(it);
          } catch {
          }
        }
        return !1;
      };
      n.needShowTwiceShowDialog = !0, d && n.showProgress(A, V, !1);
      var Fe = i.length, Qe = 0, Ze = 0, Ct = "";
      return A._bServerPercentDone = !1, A._OnPercentDone([0, -1, l.MSG.Encoding, "http"]), n.each(i, function(it, Bt) {
        z = A.__innerConvertToBlob(S, [it], c, !0, 4, function(yt, en, Ft) {
          if (!yt || yt.size <= 0)
            return n.Errors.UploadFileCannotEmpty(A), xe();
          var st = A.__maxUploadImageSize;
          if (yt.size > st && st != -1)
            return n.Errors.UploadExceededMaxSize(A), xe();
          var nt = on.cformat(u, Bt + 1);
          if (Ze = (Qe + 1) / Fe * 100, Ct = [Qe + 1, "/", Fe].join(""), A._OnPercentDone([0, Ze, Ct, "http", nt]), Ft[0], Ft[1], yt.name = nt, ue.push(yt), ++Qe >= Fe) {
            var ft = jo(A);
            l.DWT.IfAddMD5InUploadHeader && en && en != "" && (ft["dwt-md5"] = en), z = on.httpPostUploadFiles(A, ne, ue, !0, 0, ft, d, _, v, function(Pt) {
              (function(Ot) {
                if (A._bServerPercentDone = !0, n.needShowTwiceShowDialog = !1, d && n.closeProgress(A, V), ue = null, n.isFunction(T)) {
                  var pn = [];
                  n.isArray(i) && n.each(i, function(un) {
                    var An = A._ImgManager.convertServerIdToClientIndex(un);
                    An > -1 && pn.push(An);
                  }), Vi(T, Ot, pn);
                }
              })(Pt);
            }, xe);
          }
        }, xe, [it, Bt]);
      }), z;
    } }, { key: "_convertToBase64ByServerIds", value: function(t, i, a, u, c, d) {
      var _ = this, v = "ConvertToBase64", T = a;
      n.showProgress(_, v, !1);
      var M = function() {
        return n.closeProgress(_, v), n.isFunction(d) && d(), !1;
      }, A = function(V) {
        var ne, z = 0, ue = "", xe = "", Fe = V && V.result;
        n.isArray(t) && n.each(t, function(Qe) {
          _._ImgManager.convertServerIdToClientIndex(Qe);
        }), _._errorCode == 0 ? Fe && n.isArray(Fe) && Fe.length == 3 ? (xe = Fe[0], z = Fe[1], ue = Fe[2], ne = new Zc(null, z, ue, xe), n.closeProgress(_, v), n.isFunction(c) && Vi(c, ne)) : (n.Errors.ConvertBase64Failed(_), M()) : M();
      };
      if (_._isMobileMode())
        return i == l.DWT.EnumDWT_ImageType.IT_BMP ? (n.closeProgress(_, v), _._mobileNotSupport("Convert to bmp", d)) : _._innerConvertToBase64ByMobile("", t, i, u, A, M);
      n.isString(T) && T != "" || (T = "{}");
      var S = ["[", i, ',"', t.join(","), '",', T, ",1]"].join("");
      return _._innerFunRaw(v, S, !0, !1, !0, A, M);
    } }, { key: "_innerConvertToBase64ByMobile", value: function(t, i, a, u, c, d) {
      var _, v, T = this, M = [];
      if (a == l.DWT.EnumDWT_ImageType.IT_BMP)
        return _ = "bmp", T._mobileNotSupport("Convert to bmp", d);
      if (_ = a == l.DWT.EnumDWT_ImageType.IT_JPG ? "jpg" : a == l.DWT.EnumDWT_ImageType.IT_PNG ? "png" : a == l.DWT.EnumDWT_ImageType.IT_TIF ? "tiff" : a == l.DWT.EnumDWT_ImageType.IT_PDF ? "pdf" : a == l.DWT.EnumDWT_ImageType.IT_J2K ? "jp2" : "png", n.isArray(i))
        for (v = 0; v < i.length; v++)
          M.push(T._ImgManager.convertServerIdToClientIndex(i[v]));
      return T._innerSendToMobile("SaveImage", Kr(t, M, _, u, !1), 0, function(A, S, V) {
        if (A instanceof Uint8ClampedArray || A instanceof ArrayBuffer || A instanceof Uint8Array) {
          var ne = new FileReader();
          ne.onload = function(ue) {
            var xe, Fe = ue == null || (xe = ue.target) === null || xe === void 0 ? void 0 : xe.result, Qe = n.isString(Fe) ? Fe.split(",") : [];
            Qe.length >= 2 && (Fe = Qe[1]), n.isFunction(c) && c({ result: [Fe, Fe.length, ne.md5] });
          };
          var z = "image/" + S;
          return S == "pdf" && (z = "application/pdf"), void T._innerSendToMobile("GetMD5", Kr(A), 0, function(ue) {
            ne.md5 = ue, ne.readAsDataURL(new Blob([A], { type: z }));
          }, d);
        }
        c({ result: [A, A.length, V] });
      }, d);
    } }, { key: "__innerGetBarcodeResultAsyncFunction", value: function(t) {
      var i = l.Lib.NewBarcodeResult();
      return t && (i._errorCode = t.exception, i._errorString = t.description, i._resultlist = t.result, i._Count = t.result.length), i;
    } }, { key: "__innerGetOCRResultAsyncFunction", value: function(t) {
      var i = l.Lib.NewOCRResult(this);
      return t && (i._errorCode = t.exception, i._errorString = t.description, i._resultlist = t.result), i;
    } }, { key: "__innerFTPDownloadDirectly", value: function(t, i, a, u, c) {
      var d = this;
      return n.License.checkProductKey(d, { Core: !0 }) && n.License.checkPDFProductKeyWhenNeeds(d, a) ? (n.cancelFrom = _i, hs(d, Vu, tl).call(d, t, i, !0, u, c)) : (n.isFunction(c) && c(d._errorCode, d._errorString), !1);
    } }, { key: "__innerFTPUpload", value: function(t, i, a, u) {
      return l.Lib.cancelFrom = Zi, hs(this, Vu, tl).call(this, t, i, !0, a, u);
    } }]), r;
  }(dm);
  function Ih(o, e, r, t, i) {
    var a = this;
    if (e)
      return a._innerFunRaw("SaveSelectedImagesToBytes", zt(0, 0, o, r), e, !0, !0, function(c) {
        if (n.isFunction(t)) {
          var d = new Blob([c]);
          t(d), d = null;
        }
      }, i), !0;
    var u = a._innerFunRaw("SaveSelectedImagesToBytes", zt(0, 0, o, r), e, !0, !1);
    return a._errorCode == 0 ? t(u) : (i(), !1);
  }
  function tl(o, e, r, t, i) {
    var a = this;
    return n.isFunction(i) ? (l.Lib.showProgress(a, o, r), this._innerSend(o, e, !0, function() {
      l.Lib.closeProgress(a, o), n.isFunction(t) && t();
    }, function(u) {
      return n.isFunction(i) && i(a._errorCode, a._getErrorString()), l.Lib.closeProgress(a, o), u && l.Lib.error(u), !0;
    }), !0) : this._innerFun(o, e);
  }
  function Sh(o, e, r, t, i) {
    var a, u = this;
    if (!n.License.checkProductKey(u, { Core: !0 }) || !n.License.checkPDFProductKeyWhenNeeds(u, r))
      return n.isFunction(i) && i(u._errorCode, u._errorString), !1;
    if (n.cancelFrom = _i, n.isFunction(i))
      return hs(u, Vu, tl).call(u, o, e, !0, function() {
        var _ = u._ImgManager.getCurrentImageIndex();
        _ >= 0 && u.__onRefreshUI(_), u._blts && l.DWT.lcvrf(u), n.isFunction(t) && t();
      }, i);
    var c = u._innerGetCurrentDocumentName();
    c == "" && u._ImgManager && (c = u._ImgManager.getWebViewer().GetDefaultFileName()), (a = u.__innerLoadImageFun(o, e, 1, c)) && u._blts && l.DWT.lcvrf(u);
    var d = u._ImgManager.getCurrentImageIndex();
    return d >= 0 && u.__onRefreshUI(d), a;
  }
  function gm(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function Th(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function Ch(o, e, r) {
    return e.has(o), r;
  }
  var Ls = l.navInfoSync, Eh = /* @__PURE__ */ new WeakSet(), Dh = /* @__PURE__ */ new WeakSet(), mm = function(o) {
    Hr(r, o);
    var e = gm(r);
    function r() {
      var t;
      Gn(this, r);
      for (var i = arguments.length, a = new Array(i), u = 0; u < i; u++)
        a[u] = arguments[u];
      return Th(ln(t = e.call.apply(e, [this].concat(a))), Dh), Th(ln(t), Eh), t;
    }
    return zn(r, [{ key: "LoadDibFromClipboard", value: function(t, i) {
      var a, u, c = this, d = "LoadDibFromClipboard";
      if (c._resetErr(), !c._isValid())
        return !1;
      if (c._isMobileMode())
        return c._mobileNotSupport(d, i);
      if (c._bRemoteMode)
        return n.Errors.RemoteServiceCannotLoadDibFromClipboard(c), { code: c._errorCode, message: c._getErrorString() };
      t && n.isFunction(t) && (a = function(v) {
        t();
      }), i && n.isFunction(i) && (u = function() {
        i(c._errorCode, c._getErrorString());
      });
      var _;
      return _ = c.__GetLoadEventsNum(), c.__innerLoadImage(d, zt(_, 1), -1, !0, 1, a, u);
    } }, { key: "CancelAllPendingTransfers", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CancelAllPendingTransfers") : this._innerFun("CancelAllPendingTransfers"));
    } }, { key: "CloseSource", value: function() {
      var t = this;
      if (t._resetErr(), !t._isValid())
        return !1;
      if (t._isMobileMode())
        return t._mobileNotSupport("CloseSource");
      if (t._curDevice && ((t._curDevice.deviceType & Xt) == Xt || (t._curDevice.deviceType & dn) == dn))
        return !0;
      var i = t._innerFun("CloseSource");
      return i && (t._curDevice = null), i;
    } }, { key: "CloseSourceManager", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CloseSourceManager") : t._innerFun("CloseSourceManager"));
    } }, { key: "SelectDevice", value: function(t, i) {
      var a, u = this, c = t ? t.deviceType : 0;
      if (u._resetErr(), u._isMobileMode())
        return u._mobileNotSupport("SelectDevice");
      var d, _ = (a = this._dmService.attrs) === null || a === void 0 ? void 0 : a.UUID;
      if (_ && ((d = t.serviceInfo.attrs) === null || d === void 0 ? void 0 : d.UUID) != _) {
        var v, T = ((v = t.serviceInfo.attrs) === null || v === void 0 ? void 0 : v.url) || t.serviceInfo.server;
        if (!(T && T.indexOf(_) > -1))
          return n.Errors.DeviceNotFound(u), !1;
      }
      var M = !1;
      try {
        Su(c) ? M = Ch(this, Eh, pm).call(this, t.strDevice, i) : Tu(c) && (u._dmSync && (u._dmSync.bLicenseOK = !1), M = Ch(this, Dh, _m).call(this, !1).selectSource(t)), M && (this._curDevice = t, this._bSelectedSourceByServer = !1);
      } catch (A) {
        throw A;
      }
      return M;
    } }, { key: "DisableSource", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("DisableSource") : t._innerFun("DisableSource"));
    } }, { key: "FeedPage", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("FeedPage") : t._innerFun("FeedPage"));
    } }, { key: "GetDeviceType", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("GetDeviceType") : t._innerFun("GetDeviceType"));
    } }, { key: "GetSourceNameItems", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("GetSourceNameItems") : (i.__sourceCount < 0 && (i.__sourceCount = 0), t < i.__sourceCount && t >= 0 ? i._getSourceNameByIndex(t) : ""));
    } }, { key: "SourceNameItems", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("SourceNameItems") : i.GetSourceNameItems(t));
    } }, { key: "GetSourceNames", value: function(t) {
      return this._innerGetSourceNamesSync(t);
    } }, { key: "getSourceCount", value: function(t) {
      return this._getSourceCountAsync(t);
    } }, { key: "GetSourceCountAsync", value: function(t) {
      return this._getSourceCountAsync(t);
    } }, { key: "GetSourceType", value: function(t) {
      var i = this, a = parseInt(t);
      if (i._resetErr(), isNaN(a))
        return n.Errors.InvalidParameter(i), !1;
      if (i.__devices == null && i.GetSourceNames(!1), a >= i.__devices.length || a < 0)
        return n.Errors.IndexOutOfRange(i), !1;
      var u, c, d, _ = i.__devices[a];
      return u = _.deviceType, c = Ge, (d = u & an) == Ne || d == bt || (d == Ut ? c = bn : d == Zt ? c = lt : d == rt ? c = ot : (d & Ut) == Ut ? (d & Ne) != Ne && (d & bt) != bt || (c = Lt) : (d & Zt) == Zt && ((d & Ne) != Ne && (d & bt) != bt || (c = Kt))), c;
    } }, { key: "OpenSource", value: function() {
      var t = this, i = "OpenSource";
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport(i) : !(!t._curDevice || (t._curDevice.deviceType & Xt) != Xt && (t._curDevice.deviceType & dn) != dn) || (t._bRemoteMode ? (n.Errors.OpenSourceMustAsyncWhenRemote(t), { code: t._errorCode, message: t._getErrorString() }) : t._innerFun(i)));
    } }, { key: "OpenSourceManager", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("OpenSourceManager") : t._innerFun("OpenSourceManager"));
    } }, { key: "ResetImageLayout", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("ResetImageLayout") : t._innerFun("ResetImageLayout"));
    } }, { key: "RewindPage", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("RewindPage") : t._innerFun("RewindPage"));
    } }, { key: "SelectSource", value: function(t, i) {
      var a = this;
      if (a._resetErr(), !a._isValid())
        return !1;
      if (a._isMobileMode())
        return a._mobileNotSupport("SelectSource", i);
      var u = Ge;
      if (n.isUndefined(t)) {
        if (a._bRemoteMode)
          return n.Errors.SelectSourceMustAsyncWhenRemote(a), !1;
        if (a._driverType == Lt)
          return n.Errors.SelectSourceMustAsync(a), !1;
        a._driverType != lt && a._driverType != ot && a._driverType != bn || (u = a._driverType);
        var c = Ls.bMac, d = Ls.bLinux, _ = bu(u, Ls.bWin, d, c);
        return a._bSelectedSourceByServer = !0, a._curDevice = null, a._innerFun("SelectSource", zt(_));
      }
      a._driverType != lt && a._driverType != ot && a._driverType != bn && a._driverType != Lt || (u = a._driverType);
      var v = Ls.bMac, T = Ls.bLinux, M = bu(u, Ls.bWin, T, v);
      return a.SelectSourceAsync(M).then(function() {
        n.isFunction(t) && t();
      }, function() {
        n.isFunction(i) && i(a._errorCode, a._getErrorString());
      }), !0;
    } }, { key: "GetSourceTypeAsync", value: function(t) {
      var i = this, a = 1 * t;
      return i._resetErr(), i._isValid() ? i._isMobileMode() ? i._mobileNotSupportAsync("GetSourceType") : n.Promise.resolve(i.GetSourceType(a)) : n.Promise.reject({ code: i._errorCode, message: i._errorString });
    } }, { key: "SetFileXferInfo", value: function(t, i) {
      var a, u, c = this;
      return c._resetErr(), !!c._isValid() && (c._isMobileMode() ? c._mobileNotSupport("SetFileXferInfo") : (a = l.navInfoSync.bFileSystem ? t.replace(/<%/g, "<%25") : t, u = on.replaceLocalFilename(a), c._innerFun("SetFileXferInfo", zt(u, i))));
    } }, { key: "SetImageLayout", value: function(t, i, a, u) {
      var c = this;
      return c._resetErr(), !!c._isValid() && (c._isMobileMode() ? c._mobileNotSupport("SetImageLayout") : c._innerFun("SetImageLayout", zt(t, i, a, u)));
    } }, { key: "CapGet", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CapGet") : this._innerFun("CapGet"));
    } }, { key: "CapGetCurrent", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CapGetCurrent") : this._innerFun("CapGetCurrent"));
    } }, { key: "CapGetDefault", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CapGetDefault") : this._innerFun("CapGetDefault"));
    } }, { key: "CapGetFrameBottom", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("CapGetFrameBottom") : this._innerFun("CapGetFrameBottom", zt(t)));
    } }, { key: "CapGetFrameLeft", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("CapGetFrameLeft") : this._innerFun("CapGetFrameLeft", zt(t)));
    } }, { key: "CapGetFrameRight", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("CapGetFrameRight") : this._innerFun("CapGetFrameRight", zt(t)));
    } }, { key: "CapGetFrameTop", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("CapGetFrameTop") : this._innerFun("CapGetFrameTop", zt(t)));
    } }, { key: "CapGetHelp", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CapGetHelp") : this._innerFun("CapGetHelp"));
    } }, { key: "CapGetLabel", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CapGetLabel") : this._innerFun("CapGetLabel"));
    } }, { key: "CapGetLabels", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CapGetLabels") : this._innerFun("CapGetLabels"));
    } }, { key: "CapIfSupported", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("CapIfSupported") : this._innerFun("CapIfSupported", zt(t)));
    } }, { key: "CapReset", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CapReset") : this._innerFun("CapReset"));
    } }, { key: "CapSet", value: function() {
      var t = this;
      return t._resetErr(), !!t._isValid() && (t._isMobileMode() ? t._mobileNotSupport("CapSet") : this._innerFun("CapSet"));
    } }, { key: "CapSetFrame", value: function(t, i, a, u, c) {
      var d = this;
      return d._resetErr(), !!d._isValid() && (d._isMobileMode() ? d._mobileNotSupport("CapSetFrame") : this._innerFun("CapSetFrame", zt(t, i, a, u, c)));
    } }, { key: "GetCapItems", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("GetCapItems") : this._innerFun("GetCapItems", zt(t)));
    } }, { key: "GetCapItemsString", value: function(t) {
      var i = this;
      return i._resetErr(), !!i._isValid() && (i._isMobileMode() ? i._mobileNotSupport("GetCapItemsString") : this._innerFun("GetCapItemsString", zt(t)));
    } }, { key: "SetCapItems", value: function(t, i) {
      var a = this;
      return a._resetErr(), !!a._isValid() && (a._isMobileMode() ? a._mobileNotSupport("SetCapItems") : this._innerFun("SetCapItems", zt(t, i)));
    } }, { key: "SetCapItemsString", value: function(t, i) {
      var a = this;
      return a._resetErr(), !!a._isValid() && (a._isMobileMode() ? a._mobileNotSupport("SetCapItemsString") : this._innerFun("SetCapItemsString", zt(t, i)));
    } }, { key: "GenerateURLForUploadData", value: function(t, i, a, u, c) {
      var d = this, _ = [];
      if (i == l.DWT.EnumDWT_ImageType.IT_BMP || i == l.DWT.EnumDWT_ImageType.IT_JPG || i == l.DWT.EnumDWT_ImageType.IT_PNG) {
        if (!n.isArray(t))
          return n.Errors.IndicesNotArray(d), n.isFunction(u) && u(d._errorCode, d._getErrorString(), "", t, i), "";
        if (t.length > 1)
          return n.Errors.UploadIndexMoreThanOne(d), n.isFunction(u) && u(d._errorCode, d._getErrorString(), "", t, i), "";
        if (!d._checkIndices(t))
          return u(d._errorCode, d._getErrorString(), "", t, i), !1;
        var v = d._ImgManager.convertClientIndexToServerId(t[0]);
        v != -1 && _.push(v);
      } else {
        if (i != l.DWT.EnumDWT_ImageType.IT_TIF && i != l.DWT.EnumDWT_ImageType.IT_PDF)
          return n.isArray(t) ? n.Errors.InvalidImageType(d) : n.Errors.IndicesNotArray(d), n.isFunction(u) && u(d._errorCode, d._getErrorString(), d.__HTTPPostResponseString, t, i), "";
        var T, M;
        if (n.isArray(t)) {
          if (!d._checkIndices(t))
            return u(d._errorCode, d._getErrorString(), "", t, i), !1;
          T = t;
        } else {
          if (t != -1)
            return n.Errors.IndicesNotArray(d), n.isFunction(u) && u(d._errorCode, d._getErrorString(), d.__HTTPPostResponseString, t, i), "";
          for (T = [], M = 0; M < d._ImgManager.count(); M++)
            T.push(M);
        }
        n.each(T, function(A) {
          var S = d._ImgManager.convertClientIndexToServerId(A);
          S != -1 && _.push(S);
        });
      }
      return n.isFunction(a) && n.isFunction(u) ? (d._asyncGenerateURLForUploadData(_, i, c, a, function(A) {
        u(d._errorCode, d._getErrorString(), d.__HTTPPostResponseString, A, i);
      }), !0) : this._syncGenerateURLForUploadData(_, i, c);
    } }, { key: "_syncGenerateURLForUploadData", value: function(t, i, a) {
      var u, c = this, d = !1, _ = l.dcp.managerVersion.join(""), v = a, T = ",";
      n.isString(v) && v != "" || (v = "", T = "");
      var M = ["[", '"dcp","dwasm_' + _, '",', i, ',"', t.join(","), '"', T, v, "]"].join("");
      if ((u = this._innerFunRaw("GenerateURLForUploadData", M, !1, !1, !0)) && n.isArray(u.result) && u.result.length > 1) {
        var A = u.result[0], S = u.result[1];
        A == 1 && (d = ["dcp://dwasm_", _, "/file/", S].join(""));
      }
      return n.isArray(t) && n.each(t, function(V) {
        c._ImgManager.convertServerIdToClientIndex(V);
      }), d == 0 ? (n.Errors.GenerateURL_InvalidRetFromServer(c), "") : d;
    } }, { key: "_asyncGenerateURLForUploadData", value: function(t, i, a, u, c) {
      var d = this, _ = i, v = function() {
        if (n.isFunction(c)) {
          var ne = [];
          n.isArray(t) && n.each(t, function(z) {
            var ue = d._ImgManager.convertServerIdToClientIndex(z);
            ue > -1 && ne.push(ue);
          }), c(ne);
        }
        return "";
      }, T = ",";
      if (_ == l.DWT.EnumDWT_ImageType.IT_BMP || _ == l.DWT.EnumDWT_ImageType.IT_JPG || _ == l.DWT.EnumDWT_ImageType.IT_PNG) {
        if (t.length > 1)
          return n.Errors.UploadIndexMoreThanOne(d), v(), "";
      } else if (_ != l.DWT.EnumDWT_ImageType.IT_TIF && _ != l.DWT.EnumDWT_ImageType.IT_PDF)
        return n.Errors.InvalidImageType(d), v(), "";
      var M = !1, A = l.dcp.managerVersion.join(""), S = a;
      n.isString(S) && S != "" || (S = "", T = "");
      var V = ["[", '"dcp","dwasm_' + A, '",', _, ',"', t.join(","), '"', T, S, "]"].join("");
      return this._innerFunRaw("GenerateURLForUploadData", V, !0, !1, !0, function(ne) {
        if (ne && n.isArray(ne.result) && ne.result.length > 0)
          if (ne.result[0] == 1 && ne.result.length > 1) {
            var z = ne.result[1];
            M = ["dcp://dwasm_", A, "/file/", z].join("");
          } else
            ne.exception !== void 0 && ne.description !== void 0 ? (d._errorCode = ne.exception, d._errorString = ne.description) : n.Errors.GenerateURL_InvalidRetFromServer(d);
        else
          n.Errors.GenerateURL_InvalidRetFromServer(d);
        if (M == 0)
          return v(), "";
        if (n.isFunction(u)) {
          var ue = [];
          n.isArray(t) && n.each(t, function(xe) {
            var Fe = d._ImgManager.convertServerIdToClientIndex(xe);
            Fe > -1 && ue.push(Fe);
          }), u(M, ue, i);
        }
        return M;
      }, v);
    } }, { key: "SourceCount", get: function() {
      return this._getSourceCountSync();
    } }, { key: "MaxUploadImageSize", get: function() {
      return this._resetErr(), this._isValid() ? this.__maxUploadImageSize : vt;
    }, set: function(t) {
      var i = this;
      if (i._resetErr(), this._isValid()) {
        var a = 1 * t;
        !n.isNumber(a) || isNaN(a) ? n.Errors.InvalidValue(i) : (i.__maxUploadImageSize = a, i._isMobileMode() || i._innerFun("MaxUploadImageSize", zt(a)));
      }
    } }, { key: "CurrentSourceName", get: function() {
      var t = this, i = "CurrentSourceName";
      return t._isMobileMode() ? (t._mobileNotSupport(i), "") : t._curDevice ? t._curDevice.name : t._innerFun(i);
    } }]), r;
  }(fm);
  function pm(o, e) {
    var r = ["[", o, ",", e ?? It, "]"].join("");
    return this._innerFun("SelectSourceEx", r);
  }
  function _m(o) {
    if (!this._dmSync) {
      var e, r, t, i, a, u, c, d;
      this._dmSync = new Tg((e = this._dmService) === null || e === void 0 || (r = e.attrs) === null || r === void 0 ? void 0 : r.url, !1, this._clientId, (t = this._dmService) === null || t === void 0 || (i = t.attrs) === null || i === void 0 ? void 0 : i.ty), this._bRemoteMode ? a = (u = (c = this._dmService) === null || c === void 0 || (d = c.attrs) === null || d === void 0 ? void 0 : d.UUID) !== null && u !== void 0 ? u : "" : a = "", function(_, v, T) {
        var M;
        try {
          if (n.License.isLTS()) {
            var A = "", S = "";
            if (l.navInfoSync.bAndroid) {
              var V = Fa(l.DWT.EnumInstance.dwt_browser, "");
              S = V.ar, A = V.cu;
            } else {
              T == "" && Ka(_._bRemoteMode);
              var ne = Fa(l.DWT.EnumInstance.dwt_desktop, T);
              S = ne.ar, A = ne.cu;
            }
            M = v.getLicenseInfoSync(S, A);
          } else
            M = v.getLicenseInfoSync(l.DWT.ProductKey);
        } catch (z) {
          throw z;
        }
      }(this, this._dmSync, a);
    }
    return this._dmSync;
  }
  function vm(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function kh(o, e) {
    (function(r, t) {
      if (t.has(r))
        throw new TypeError("Cannot initialize the same private elements twice on an object");
    })(o, e), e.add(o);
  }
  function Ko(o, e, r) {
    return e.has(o), r;
  }
  var xh = 12, Mh = 13, Ph = 14, ym = function o(e, r) {
    if (!n.isUndef(e) && !n.isUndef(r) && e != null && r != null) {
      for (var t in r)
        e.hasOwnProperty(t) ? gi(e[t]) === "object" && o(e[t], r[t]) : e[t] = r[t];
      return e;
    }
  }, Ah = /* @__PURE__ */ new WeakSet(), Yo = /* @__PURE__ */ new WeakSet(), bm = function(o) {
    Hr(r, o);
    var e = vm(r);
    function r() {
      var t;
      Gn(this, r);
      for (var i = arguments.length, a = new Array(i), u = 0; u < i; u++)
        a[u] = arguments[u];
      return kh(ln(t = e.call.apply(e, [this].concat(a))), Yo), kh(ln(t), Ah), t;
    }
    return zn(r, [{ key: "checkStartScanParams", value: function(t, i) {
      var a = this;
      if (!t)
        return n.Errors.ScanUploader_InvalidScanSetup(a), !1;
      if (!n.isUndefined(i.transferMode) && t.transferMode != 0 && t.transferMode != 1 && t.transferMode != 2)
        return n.Errors.ScanUploader_InvalidTransferMode(a), !1;
      if (t.transferMode == l.DWT.EnumDWT_TransferMode.TWSX_FILE) {
        if (!t.fileXfer)
          return n.Errors.ScanUploader_InvalidFileXfer(a), !1;
        if (!n.isString(t.fileXfer.fileName) || t.fileXfer.fileName == "")
          return n.Errors.ScanUploader_InvalidFileXferFilename(a), !1;
        if (!n.isNumber(t.fileXfer.fileFormat) || t.fileXfer.fileFormat < 0 || t.fileXfer.fileFormat > 16)
          return n.Errors.ScanUploader_InvalidFileXferFileFormat(a), !1;
      }
      if (i) {
        if (!n.isString(i.type) || i.type == "")
          return n.Errors.ScanUploader_InvalidHttpType(a), !1;
        if (!i.httpParams)
          return n.Errors.ScanUploader_InvalidHttpParams(a), !1;
        if (t.transferMode != l.DWT.EnumDWT_TransferMode.TWSX_FILE && n.isUndefined(i.format))
          return n.Errors.ScanUploader_InvalidOutputFormat(a), !1;
        if (!n.isString(i.httpParams.url) || i.httpParams.url == "")
          return n.Errors.ScanUploader_InvalidHttpUrl(a), !1;
        if (!n.isString(i.httpParams.fileName) || i.httpParams.fileName == "")
          return n.Errors.ScanUploader_InvalidHttpFilename(a), !1;
      }
      return !0;
    } }, { key: "startScan", value: function(t) {
      var i = this, a = t;
      if (i._resetErr(), !i._isValid())
        return !1;
      if (i._isMobileMode())
        return i._mobileNotSupportAsync("startScan");
      if (i._startScanFlag == 1)
        return n.Errors.StartScanFailed(i), n.Promise.reject({ code: i._errorCode, message: i._getErrorString() });
      i._startScanFlag = !0, n.isObject(a) || (a = {});
      var u, c, d, _ = !1, v = !1, T = !0, M = !0, A = !0, S = !1, V = a.onFinally, ne = [], z = [], ue = 0, xe = 1, Fe = [], Qe = { type: "http", format: l.DWT.EnumDWT_ImageType.IT_PDF, reTries: 3, useUploader: !1, singlePost: !0, showProgressBar: !0, removeAfterOutput: !0, httpParams: { url: "", headers: {}, formFields: {}, remoteName: "RemoteFile", fileName: "" } }, Ze = n.clone(a), Ct = a;
      if (d = Ze.funcScanStatus, delete Ze.funcScanStatus, n.isFunction(d) ? Ze.bfuncScanStatus = !0 : Ze.bfuncScanStatus = !1, Ze.outputSetup) {
        var it = { pdfSetup: {}, tiffSetup: {} };
        ym(Ze.outputSetup, Qe), c = Ze.outputSetup, delete Ze.outputSetup, c.pdfSetup && (c.format != l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF && c.format != l.DWT.EnumDWT_ImageType.IT_PDF || n.mix(it.pdfSetup, c.pdfSetup)), c.tiffSetup && (c.format != l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF && c.format != l.DWT.EnumDWT_ImageType.IT_TIF || n.mix(it.tiffSetup, c.tiffSetup)), c.format != l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF && c.format != l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF || (c.singlePost = !0), n.isNumber(c.httpParams.threads) && (xe = c.httpParams.threads), _ = n.stringify(it), v = i.checkStartScanParams(Ze, c);
      } else
        (c = Qe).type = "", v = i.checkStartScanParams(Ze, !1);
      if (!v)
        return new n.Promise(function(kr, qr) {
          T && (qr({ code: i._errorCode, message: i._getErrorString(), response: "" }), T = !1, i._startScanFlag = !1);
        });
      c.funcHttpUploadStatus && (S = c.funcHttpUploadStatus);
      var Bt, yt, en, Ft, st, nt = i.HttpFieldNameOfUploadedImage, ft = i.MaxUploadImageSize, Pt = i.IfShowProgressBar, Ot = i.__IfShowCancelDialogWhenImageTransfer, pn = i.__OnPostTransferAsync, un = i.__OnPostAllTransfers, An = i.__OnHttpUploadStatus, Mr = i.__insertingIndex, tr = i.__IfAppendImage, Qn = i.httpFormFields, wi = i._tiffCompressionType, Xr = !1, Mn = c.showProgressBar;
      if (Bt = function(kr) {
        var qr = !0;
        n.each(Fe, function(hi, go) {
          hi.st == -1 && (qr = !1);
        }), qr ? yt(kr) : setTimeout(function() {
          Bt(kr);
        }, 200);
      }, yt = function(kr) {
        kr.__OnPostTransferAsync = pn, kr.__OnPostAllTransfers = un, kr.__OnHttpUploadStatus = An, kr.HttpFieldNameOfUploadedImage = nt, kr.__maxUploadImageSize = ft, kr.IfShowProgressBar = Pt, kr.__IfShowCancelDialogWhenImageTransfer = Ot, kr.__insertingIndex = Mr, kr.__IfAppendImage = tr, kr.httpFormFields = Qn, kr._tiffCompressionType = wi, kr.__OnCancel = !1, l.FileUploader && (l.FileUploader.nextLoopTime = 600), kr._startScanFlag = !1;
      }, en = function(kr, qr, hi) {
        M ? (qr(hi), Bt(kr)) : setTimeout(function() {
          en(kr, qr, hi);
        }, 200);
      }, Ft = function(kr, qr) {
        Xr = !0, T && (T = !1, M || i._innerSendCmd("CancelAllPendingTransfers"), en(i, kr, qr));
      }, st = function(kr, qr, hi, go) {
        if (n.isFunction(S)) {
          var ha, Yr = qr, ri = 0;
          n.isNumber(go) && go > 0 && (ri = go), ha = { fileName: Yr, percentage: hi, statusCode: ri, responseString: kr.__HTTPPostResponseString }, setTimeout(function() {
            S(ha);
          }, 10);
        }
      }, i.__OnCancel = !1, i.__HTTPPostResponseString = "", i.IfShowProgressBar = Mn, i.__IfShowCancelDialogWhenImageTransfer = Mn, n.isNumber(Ze.insertingIndex) && Ze.insertingIndex > -1 && (i.__insertingIndex = Ze.insertingIndex, i.__IfAppendImage = !1), n.isFunction(S) ? i.__OnHttpUploadStatus = S : i.__OnHttpUploadStatus = !1, c.useUploader && !l.FileUploader)
        return new n.Promise(function(kr, qr) {
          n.Errors.Uploader_ModuleError(i);
          var hi = { code: i._errorCode, message: i._getErrorString(), response: "" };
          M = !0, Ft(qr, hi);
        });
      if (u = c.reTries, c.useUploader) {
        var ci = c.httpParams.url;
        if (!n.startsWith(ci, "http://") && !n.startsWith(ci, "https://")) {
          var Da = window.location.href, Mo = Da.lastIndexOf("/");
          Da = Da.substring(0, Mo + 1), c.httpParams.url = Da + ci;
        }
      } else
        n.each(c.httpParams.headers, function(kr, qr) {
          i.SetHTTPHeader(qr, kr);
        }), n.each(c.httpParams.formFields, function(kr, qr) {
          i.SetHTTPFormField(qr, kr);
        });
      return c.httpParams.remoteName !== "" && (i.HttpFieldNameOfUploadedImage = c.httpParams.remoteName), new n.Promise(function(kr, qr) {
        c.useUploader ? l.FileUploader.Init(0, function(hi) {
          kr({ uploadManager: hi });
        }, function(hi, go) {
          i._errorCode = hi, i._errorString = go;
          var ha = { code: hi, message: go, response: i.__HTTPPostResponseString };
          M = !0, Ft(qr, ha);
        }) : kr({});
      }).then(function(kr) {
        return new n.Promise(function(qr, hi) {
          var go = function Yr() {
            (Ze.transferMode == l.DWT.EnumDWT_TransferMode.TWSX_FILE ? ue == z.length : ue == ne.length) ? (n.closeProgress(i, "Scan Upload"), Xr = !0, qr(Ct), yt(i)) : setTimeout(Yr, 100);
          };
          d && n.isFunction(d) && (i.__OnPreAllTransfersAsync = function(Yr) {
            d(Yr);
          }), i._innerRegisterEvent("OnPostTransferAsync", function(Yr) {
            var ri, pi, Jo, Bi, Po, to = c.httpParams.url, Ii = i._objImageIndexManager.convertGuidToServerId(Yr.imageId), $a = c.singlePost, Ri = Ze.transferMode == l.DWT.EnumDWT_TransferMode.TWSX_FILE, Hi = c.removeAfterOutput, xi = 0;
            if (A && (M = !1, A = !1), Ri ? (xi = z.length, z.push(Yr.path)) : (xi = ne.length, ne.push(Ii)), d && n.isFunction(d)) {
              var ka = { event: "postTransfer", bScanCompleted: !1, result: { currentPageNum: xi + 1 } };
              setTimeout(function() {
                d(ka);
              }, 10);
            }
            if (Xr)
              return !1;
            if (c.type == "http")
              if (pi = on.cformat(c.httpParams.fileName, xi + 1), Jo = on.cformat(c.httpParams.remoteName, xi + 1), $a || c.type != "http")
                !$a && c.type;
              else if (n.isNumber(c.httpParams.maxSizeLimit) && (i.__maxUploadImageSize = c.httpParams.maxSizeLimit), c.useUploader) {
                Mn && (l.FileUploader.nextLoopTime = 300, n.showProgress(i, "Scan Upload", !0)), Bi = function(ai, Tr) {
                  return i.__HTTPPostResponseString = Tr, st(i, ai._fileName, 100, 200), i._OnPercentDone([0, 100, "", "http", ai._fileName]), Mn && n.closeProgress(i, "Scan Upload"), !Ri && c.removeAfterOutput ? setTimeout(function() {
                    i._ImgManager.convertServerIdToClientIndex(Ii) > -1 ? Ko(i, Yo, ta).call(i, Ii, function() {
                      ue++;
                    }, function() {
                      ue++;
                    }) : ue++;
                  }, 100) : ue++, !0;
                };
                var xa, Ma, Sr = kr.uploadManager;
                if (xa = function() {
                  if (Mn) {
                    var ai, Tr = 0;
                    for (Tr = Ri ? z.length : ne.length, ai = 0; ai < Tr; ai++)
                      n.closeProgress(i, "Scan Upload");
                  }
                  !Ri && c.removeAfterOutput && setTimeout(function() {
                    i._ImgManager.convertServerIdToClientIndex(Ii) > -1 && Ko(i, Yo, ta).call(i, Ii);
                  }, 100), Sr.CancelAllUpload();
                  var Pr = { code: i._errorCode, message: i._getErrorString(), response: i.__HTTPPostResponseString };
                  return Ft(hi, Pr), !1;
                }, Po = function(ai, Tr, Pr, ur) {
                  var gr = 303;
                  Tr == xh ? gr = 404 : Tr == Mh ? gr = 500 : Tr == Ph && (gr = 503), i._errorCode = Tr, i._errorString = Pr, i.__HTTPPostResponseString = ur, st(i, pi, 100, gr), xa();
                }, i.__OnCancel = function() {
                  Po(null, l.DWT.EnumDWT_Error.UserCancelled, "User cancelled the operation.", "");
                }, Ma = function() {
                  i.__HTTPPostResponseString = "", st(i, pi, 100, 303), xa();
                }, Ri) {
                  var cn = Sr.CreateJob(), rn = cn.FormField;
                  n.each(c.httpParams.headers, function(ai, Tr) {
                    cn.HttpHeader[Tr] = ai;
                  }), n.each(c.httpParams.formFields, function(ai, Tr) {
                    rn.Add(Tr, ai);
                  }), cn.ServerUrl = to, cn.bDeleteFile = Hi, cn.reTries = u, n.isNumber(c.httpParams.maxSizeLimit) && (cn.maxSizeLimit = c.httpParams.maxSizeLimit), cn._fileName = pi, cn.SourceValue.Add(Yr.path, pi, Jo), cn.ImageType = Ze.fileXfer.fileFormat, cn.ThreadNum = xe, cn.OnRunSuccess = Bi, cn.OnRunFailure = Po, (Mn || n.isFunction(S)) && (cn.OnUploadTransferPercentage = function(ai, Tr) {
                    Tr > 0 && Tr <= 100 && (Tr == 100 && (Tr = 99), Mn && i._OnPercentDone([0, Tr, "", "http", ai._fileName]), n.isFunction(S) && st(i, ai._fileName, Tr, 0));
                  }, n.cancelFrom = Gi, Mn && i._OnPercentDone([0, -1, l.MSG.Uploading, "http", pi]), st(i, pi, 0, 0)), Sr.Run(cn);
                } else
                  (ri = c.format) == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF ? ri = l.DWT.EnumDWT_ImageType.IT_PDF : ri == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF && (ri = l.DWT.EnumDWT_ImageType.IT_TIF), Mn && (n.cancelFrom = Gi, i._OnPercentDone([0, -1, l.MSG.Encoding, "http", pi])), i._asyncGenerateURLForUploadData([Ii], ri, _, function(ai) {
                    var Tr = Sr.CreateJob(), Pr = Tr.FormField;
                    n.each(c.httpParams.headers, function(ur, gr) {
                      Tr.HttpHeader[gr] = ur;
                    }), n.each(c.httpParams.formFields, function(ur, gr) {
                      Pr.Add(gr, ur);
                    }), Tr.ServerUrl = to, Tr.bDeleteFile = Hi, Tr.reTries = u, n.isNumber(c.httpParams.maxSizeLimit) && (Tr.maxSizeLimit = c.httpParams.maxSizeLimit), Tr._fileName = pi, Tr.SourceValue.Add(ai, pi, Jo), Tr.ImageType = ri, Tr.ThreadNum = xe, Tr.OnRunSuccess = Bi, Tr.OnRunFailure = Po, (Mn || n.isFunction(S)) && (Tr.OnUploadTransferPercentage = function(ur, gr) {
                      gr > 0 && gr <= 100 && (gr == 100 && (gr = 99), Mn && i._OnPercentDone([0, gr, "", "http", ur._fileName]), n.isFunction(S) && st(i, ur._fileName, gr, 0));
                    }, n.cancelFrom = Gi, Mn && i._OnPercentDone([0, -1, l.MSG.Uploading, "http", pi]), st(i, pi, 0, 0)), Sr.Run(Tr);
                  }, Ma);
              } else {
                var ii = { id: Ii, st: -1, bCancel: !1 };
                if (Fe.push(ii), xi == 0 && n.showProgress(i, "Scan Upload", !0), Ri)
                  Bi = function(ai) {
                    return ii.st = 0, !Ri && c.removeAfterOutput ? setTimeout(function() {
                      i._ImgManager.convertServerIdToClientIndex(Ii) > -1 ? Ko(i, Yo, ta).call(i, Ii, function() {
                        ue++;
                      }, function() {
                        ue++;
                      }) : ue++;
                    }, 100) : ue++, !0;
                  }, Po = function() {
                    !Ri && c.removeAfterOutput && setTimeout(function() {
                      i._ImgManager.convertServerIdToClientIndex(Ii) > -1 && Ko(i, Yo, ta).call(i, Ii);
                    }, 100);
                    var ai = { code: i._errorCode, message: i._getErrorString(), response: i.__HTTPPostResponseString };
                    return n.closeProgress(i, "Scan Upload"), ii.st == 2 || (ii.st = 1, n.each(Fe, function(Tr, Pr) {
                      Tr.st == -1 && (Tr.bCancel = !0);
                    }), Ft(hi, ai)), !1;
                  }, i._innerUploadDirectly(to, Yr.path, pi, Mn, Hi, u, !1, ii, Bi, Po);
                else {
                  if (Bi = function(ai, Tr) {
                    return ii.st = 0, !Ri && c.removeAfterOutput ? setTimeout(function() {
                      i._ImgManager.convertServerIdToClientIndex(Ii) > -1 ? Ko(i, Yo, ta).call(i, Ii, function() {
                        ue++;
                      }, function() {
                        ue++;
                      }) : ue++;
                    }, 100) : ue++, !0;
                  }, Po = function(ai) {
                    !Ri && c.removeAfterOutput && setTimeout(function() {
                      i._ImgManager.convertServerIdToClientIndex(Ii) > -1 && Ko(i, Yo, ta).call(i, Ii);
                    }, 100);
                    var Tr = { code: i._errorCode, message: i._getErrorString(), response: i.__HTTPPostResponseString };
                    return n.closeProgress(i, "Scan Upload"), ii.st == 2 || (ii.st = 1, n.each(Fe, function(Pr, ur) {
                      Pr.st == -1 && (Pr.bCancel = !0);
                    }), Ft(hi, Tr)), !1;
                  }, ri = c.format, n.isUndefined(ri)) {
                    var dr = i._ImgManager.convertServerIdToClientIndex(Ii);
                    return n.Errors.InvalidImageType(i), Po([dr]), !1;
                  }
                  ri == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF ? ri = l.DWT.EnumDWT_ImageType.IT_PDF : ri == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF && (ri = l.DWT.EnumDWT_ImageType.IT_TIF);
                  var es = { bOnlyUploadForm: !1, method: "startScan", _this: i, url: to, serverIds: [Ii], enumImageType: ri, saveSetup: _, fileName: pi, dataFormat: l.DWT.EnumDWT_UploadDataFormat.Binary, retry: u, bOnlyEmptyIsOK: !1, objUploadFileStatus: ii, asyncSuccessFunc: Bi, asyncFailureFunc: Po };
                  n._asyncUploadCmd(es);
                }
              }
          }), i.__OnPostAllTransfers = function() {
            var Yr, ri, pi = -1, Jo = l.DWT.EnumDWT_UploadDataFormat.Binary, Bi = c.httpParams.url, Po = c.singlePost, to = Ze.transferMode == l.DWT.EnumDWT_TransferMode.TWSX_FILE, Ii = c.removeAfterOutput;
            if (d && n.isFunction(d) && (pi = to ? z.length : ne.length, ri = { event: "postTransfer", bScanCompleted: !0, result: { currentPageNum: pi } }, setTimeout(function() {
              d(ri);
            }, 10)), pi == 0)
              return n.Errors.SourceHasNothingToCapture(i), void setTimeout(function() {
                M = !0, V && n.isFunction(V) && V();
                var Pr = { code: i._errorCode, message: i._getErrorString(), response: i.__HTTPPostResponseString };
                Ft(hi, Pr);
              }, 1e3);
            if (pi > 0 && i._errorCode == -1029)
              i._errorCode = 0;
            else if (i._errorCode != 0) {
              M = !0, V && n.isFunction(V) && V();
              var $a = { code: i._errorCode, message: i._getErrorString(), response: i.__HTTPPostResponseString };
              return void Ft(hi, $a);
            }
            if (c.type == "http") {
              if (Po && c.type == "http") {
                var Ri, Hi, xi = ne;
                if (n.isNumber(c.httpParams.maxSizeLimit) && (i.__maxUploadImageSize = c.httpParams.maxSizeLimit), c.useUploader) {
                  var ka, xa, Ma = kr.uploadManager, Sr = Ma.CreateJob(), cn = Sr.FormField;
                  if (Mn && (l.FileUploader.nextLoopTime = 300, n.showProgress(i, "Scan Upload", !0)), Ri = function(Pr, ur) {
                    var gr = Pr._fileName;
                    return gr || (gr = ""), i._bServerPercentDone = !0, i.__HTTPPostResponseString = ur, st(i, gr, 100, 200), i._OnPercentDone([0, 100, "", "http"]), Mn && n.closeProgress(i, "Scan Upload"), !to && c.removeAfterOutput ? setTimeout(function() {
                      ue = 0, n.each(xi, function(fi) {
                        i._ImgManager.convertServerIdToClientIndex(fi) > -1 ? Ko(i, Yo, ta).call(i, fi, function() {
                          ue++;
                        }, function() {
                          ue++;
                        }) : ue++;
                      }), setTimeout(go, 100);
                    }, 100) : (Xr = !0, qr(Ct), yt(i)), !0;
                  }, ka = function() {
                    i._OnPercentDone([0, 100, "", "http"]), Mn && n.closeProgress(i, "Scan Upload"), i._bServerPercentDone = !0;
                    var Pr = { code: i._errorCode, message: i._getErrorString(), response: i.__HTTPPostResponseString };
                    return Ft(hi, Pr), !to && c.removeAfterOutput && setTimeout(function() {
                      n.each(xi, function(ur) {
                        i._ImgManager.convertServerIdToClientIndex(ur) > -1 && Ko(i, Yo, ta).call(i, ur);
                      });
                    }, 100), !1;
                  }, Hi = function(Pr, ur, gr, fi) {
                    var Yi = 303;
                    ur == xh ? Yi = 404 : ur == Mh ? Yi = 500 : ur == Ph && (Yi = 503), i._errorCode = ur, i._errorString = gr, i.__HTTPPostResponseString = fi, st(i, "", 100, Yi), ka();
                  }, i.__OnCancel = function() {
                    Hi(null, l.DWT.EnumDWT_Error.UserCancelled, "User cancelled the operation.", "");
                  }, xa = function() {
                    i.__HTTPPostResponseString = "", st(i, "", 100, 303), ka();
                  }, to)
                    n.each(c.httpParams.headers, function(Pr, ur) {
                      Sr.HttpHeader[ur] = Pr;
                    }), n.each(c.httpParams.formFields, function(Pr, ur) {
                      cn.Add(ur, Pr);
                    }), Sr.ServerUrl = Bi, Sr.bDeleteFile = Ii, Sr.reTries = u, n.isNumber(c.httpParams.maxSizeLimit) && (Sr.maxSizeLimit = c.httpParams.maxSizeLimit), n.each(z, function(Pr, ur) {
                      var gr = on.cformat(c.httpParams.fileName, ur + 1), fi = on.cformat(c.httpParams.remoteName, ur + 1);
                      Sr.SourceValue.Add(Pr, gr, fi);
                    }), Sr.ImageType = Ze.fileXfer.fileFormat, Sr.ThreadNum = xe, Sr.OnRunSuccess = Ri, Sr.OnRunFailure = Hi, (Mn || n.isFunction(S)) && (Sr.OnUploadTransferPercentage = function(Pr, ur) {
                      ur > 0 && ur <= 100 && (ur == 100 && (ur = 99), Mn && i._OnPercentDone([0, ur, "", "http"]), n.isFunction(S) && (ur > 99 && (ur = 99), st(i, "", ur, 0)));
                    }, Mn && i._OnPercentDone([0, -1, l.MSG.Uploading, "http"]), st(i, "", 0, 0)), Ma.Run(Sr);
                  else if ((Yr = c.format) == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF || Yr == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF)
                    Yr == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF ? Yr = l.DWT.EnumDWT_ImageType.IT_PDF : Yr == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF && (Yr = l.DWT.EnumDWT_ImageType.IT_TIF), Mn && i._OnPercentDone([0, -1, l.MSG.Encoding, "http"]), i._asyncGenerateURLForUploadData(xi, Yr, _, function(Pr) {
                      n.each(c.httpParams.headers, function(fi, Yi) {
                        Sr.HttpHeader[Yi] = fi;
                      }), n.each(c.httpParams.formFields, function(fi, Yi) {
                        cn.Add(Yi, fi);
                      }), Sr.ServerUrl = Bi, Sr.bDeleteFile = Ii, Sr.reTries = u, n.isNumber(c.httpParams.maxSizeLimit) && (Sr.maxSizeLimit = c.httpParams.maxSizeLimit);
                      var ur = on.cformat(c.httpParams.fileName, 1), gr = on.cformat(c.httpParams.remoteName, 1);
                      Sr._fileName = ur, Sr.SourceValue.Add(Pr, ur, gr), Sr.ImageType = Yr, Sr.ThreadNum = xe, Sr.OnRunSuccess = Ri, Sr.OnRunFailure = Hi, (Mn || n.isFunction(S)) && (Sr.OnUploadTransferPercentage = function(fi, Yi) {
                        Yi > 0 && Yi <= 100 && (Yi == 100 && (Yi = 99), Mn && i._OnPercentDone([0, Yi, "", "http", ur]), n.isFunction(S) && st(i, ur, Yi, 0));
                      }, n.cancelFrom = Gi, Mn && i._OnPercentDone([0, -1, l.MSG.Uploading, "http", ur])), Ma.Run(Sr);
                    }, xa);
                  else {
                    var rn = xi.length, ii = 0, dr = 0, es = "";
                    Mn && (i._bServerPercentDone = !1, i._OnPercentDone([0, -1, l.MSG.Encoding, "http"])), n.each(xi, function(Pr, ur) {
                      var gr = on.cformat(c.httpParams.fileName, ur + 1), fi = on.cformat(c.httpParams.remoteName, ur + 1);
                      i._asyncGenerateURLForUploadData([Pr], Yr, _, function(Yi) {
                        dr = (ii + 1) / rn * 100, es = [ii + 1, "/", rn].join(""), i._OnPercentDone([0, dr, es, "http"]), Sr.SourceValue.Add(Yi, gr, fi), ++ii >= rn && (Mn && (i._bServerPercentDone = !0), n.each(c.httpParams.headers, function(gs, Bo) {
                          Sr.HttpHeader[Bo] = gs;
                        }), n.each(c.httpParams.formFields, function(gs, Bo) {
                          cn.Add(Bo, gs);
                        }), Sr.ServerUrl = Bi, Sr.bDeleteFile = Ii, Sr.reTries = u, n.isNumber(c.httpParams.maxSizeLimit) && (Sr.maxSizeLimit = c.httpParams.maxSizeLimit), Sr.ImageType = Yr, Sr.ThreadNum = xe, Sr.OnRunSuccess = Ri, Sr.OnRunFailure = Hi, (Mn || n.isFunction(S)) && (Sr.OnUploadTransferPercentage = function(gs, Bo) {
                          Bo > 0 && Bo <= 100 && (Bo == 100 && (Bo = 99), Mn && i._OnPercentDone([0, Bo, "", "http"]), n.isFunction(S) && (Bo > 99 && (Bo = 99), st(i, "", Bo, 0)));
                        }, Mn && i._OnPercentDone([0, -1, l.MSG.Uploading, "http"])), Ma.Run(Sr));
                      }, xa);
                    });
                  }
                } else if (to)
                  Ri = function(Pr) {
                    return i._bServerPercentDone = !0, !to && c.removeAfterOutput ? setTimeout(function() {
                      ue = 0, n.each(xi, function(ur) {
                        i._ImgManager.convertServerIdToClientIndex(ur) > -1 ? Ko(i, Yo, ta).call(i, ur, function() {
                          ue++;
                        }, function() {
                          ue++;
                        }) : ue++;
                      }), setTimeout(go, 100);
                    }, 100) : (Xr = !0, qr(Ct), yt(i)), !0;
                  }, Hi = function(Pr) {
                    i._bServerPercentDone = !0;
                    var ur = { code: i._errorCode, message: i._getErrorString(), response: i.__HTTPPostResponseString };
                    return Ft(hi, ur), !to && c.removeAfterOutput && setTimeout(function() {
                      n.each(xi, function(gr) {
                        i._ImgManager.convertServerIdToClientIndex(gr) > -1 && Ko(i, Yo, ta).call(i, gr);
                      });
                    }, 100), !1;
                  }, i._innerUploadFilesDirectly(Bi, z, c.httpParams.fileName, Mn, Ii, u, !1, Ri, Hi);
                else if (Ri = function(Pr, ur) {
                  return i._bServerPercentDone = !0, !to && c.removeAfterOutput ? setTimeout(function() {
                    ue = 0, n.each(xi, function(gr) {
                      i._ImgManager.convertServerIdToClientIndex(gr) > -1 ? Ko(i, Yo, ta).call(i, gr, function() {
                        ue++;
                      }, function() {
                        ue++;
                      }) : ue++;
                    }), setTimeout(go, 100);
                  }, 100) : (Xr = !0, qr(Ct), yt(i)), !0;
                }, Hi = function(Pr) {
                  i._bServerPercentDone = !0;
                  var ur = { code: i._errorCode, message: i._getErrorString(), response: i.__HTTPPostResponseString };
                  return Ft(hi, ur), !to && c.removeAfterOutput && setTimeout(function() {
                    n.each(xi, function(gr) {
                      i._ImgManager.convertServerIdToClientIndex(gr) > -1 && Ko(i, Yo, ta).call(i, gr);
                    });
                  }, 100), !1;
                }, (Yr = c.format) == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF || Yr == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF) {
                  Yr == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF ? Yr = l.DWT.EnumDWT_ImageType.IT_PDF : Yr == l.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF && (Yr = l.DWT.EnumDWT_ImageType.IT_TIF);
                  var ai = on.cformat(c.httpParams.fileName, 1);
                  on.cformat(c.httpParams.remoteName, 1);
                  var Tr = { bOnlyUploadForm: !1, method: "startScan", _this: i, url: Bi, serverIds: xi, enumImageType: Yr, saveSetup: _, fileName: ai, dataFormat: Jo, retry: u, bOnlyEmptyIsOK: !1, objUploadFileStatus: !1, asyncSuccessFunc: Ri, asyncFailureFunc: Hi };
                  n._asyncUploadCmd(Tr);
                } else
                  xi.length > 0 && i._asyncUploadFilesCmd(Bi, xi, Yr, c.httpParams.fileName, _, Mn, u, !1, Ri, Hi);
              }
              Po && c.type;
            }
            M = !0, V && n.isFunction(V) && V();
          };
          var ha = function() {
            c.type != "http" ? (Xr = !0, qr(Ct), yt(i)) : c.singlePost || setTimeout(go, 100);
          };
          Ko(i, Ah, wm).call(i, Ze, ha, function(Yr) {
            if (i._errorCode == -1029 && (Ze.transferMode == l.DWT.EnumDWT_TransferMode.TWSX_FILE ? z.length > 0 : ne.length > 0))
              return i._errorCode = 0, ha();
            var ri = { code: i._errorCode, message: i._getErrorString(), response: i.__HTTPPostResponseString };
            Ft(hi, ri);
          });
        });
      });
    } }]), r;
  }(mm);
  function wm(o, e, r) {
    var t, i, a = this, u = null, c = null;
    if (i = n.isUndefined(o) || o == null ? {} : o, a._resetErr(), !a._isValid())
      return !1;
    if (n.isFunction(e) && (u = function() {
      e(i);
    }), n.isFunction(r) && (c = function(T, M) {
      r(T, M, i);
    }), !n.License.checkProductKey(a, { Core: !0 }))
      return n.isFunction(c) && c(a._errorCode, a._errorString), !1;
    for (var d = 0, _ = 0; _ < wu.length; _++) {
      var v = ["__", wu[_]].join("");
      n.isFunction(a[v]) && (d |= 1 << _);
    }
    return i.EnableEvents = d, t = ["[", n.stringify(i), "]"].join(""), a.__bAcquireImageNow = !0, a.__innerAcquireImage("StartScan", t, !1, !0, u, c);
  }
  function ta(o, e, r) {
    var t = this;
    return t._innerFunRaw("RemoveImage", zt(o), !0, !1, !0, function() {
      t._OnBitmapChanged(["0", "" + o, 3, t._ImgManager.getCurrentImageIndex(), t._ImgManager.count()]), n.isFunction(e) && e();
    }, r);
  }
  function Im(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  var Sm = function(o) {
    Hr(r, o);
    var e = Im(r);
    function r() {
      return Gn(this, r), e.apply(this, arguments);
    }
    return zn(r, [{ key: "SelectSourceByIndex", value: function(t) {
      var i = this, a = parseInt(t);
      if (i._resetErr(), i._isMobileMode())
        return i._mobileNotSupport("SelectSourceByIndex");
      if (isNaN(a))
        return n.Errors.InvalidParameter(i), !1;
      if (i.__devices == null && i.GetSourceNames(!1), a >= i.__devices.length || a < 0)
        return n.Errors.IndexOutOfRange(i), !1;
      var u = i.__devices[a];
      return i.SelectDevice(u);
    } }, { key: "EnableSource", value: function(t, i, a) {
      var u = this;
      if (u._resetErr(), !u._isValid())
        return !1;
      if (!u._isWasmWithScan()) {
        if (u._isMobileMode())
          return u._mobileNotSupport("EnableSource", a);
      }
      return u.AcquireImage(t, i, a);
    } }]), r;
  }(bm);
  function Rh(o) {
    var e = function() {
      if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
        return !1;
      if (typeof Proxy == "function")
        return !0;
      try {
        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
        })), !0;
      } catch {
        return !1;
      }
    }();
    return function() {
      var r, t = $(o);
      if (e) {
        var i = $(this).constructor;
        r = Reflect.construct(t, arguments, i);
      } else
        r = t.apply(this, arguments);
      return Rr(this, r);
    };
  }
  function Lh(o, e) {
    var r = e || {};
    o._config = r, o._clientId = n.getRandom(), function(t, i) {
      var a = i.bNoViewer, u = i.iServiceType;
      if (t._destroy = vt, t._destroying = vt, t._bInited = vt, t._id = i.id, t._bNoMask = i.bNoMask ? Gt : vt, t._bNotShowMessage = i.bNotShowMessage ? Gt : vt, t._bSelectedSourceByServer = vt, t._bKeepAwake = i.keepAwake, t._bAx = vt, i.container ? t._containerElement = i.container : i.containerId && (t._containerElement = n.get(i.containerId)), t._bBindViewer = a ? vt : Gt, t._iServiceType = u, u == hr)
        t._bRemoteMode = vt;
      else if (i.dmService) {
        var c, d, _, v, T, M, A = yu(i.dmService), S = "/", V = "";
        d = A.server;
        var ne = new n.Uri(i.dmService.server), z = ne.scheme;
        z && (z = z.toLowerCase()), z == "https" ? (c = !0, _ = d.substring(8)) : z == "http" ? (c = !1, _ = d.substring(7)) : (_ = d, d = (c = n.detect.ssl) ? "https://" + d : "http://" + d), n.isLocalIP(ne.hostname) ? t._bRemoteMode = vt : t._bRemoteMode = Gt, n.endsWith(d, "/") && (S = "");
        var ue = A.attrs;
        if (ue) {
          var xe, Fe;
          v = ((xe = ue) === null || xe === void 0 ? void 0 : xe.UUID) || "";
          var Qe, Ze = ((Fe = ue.modules) === null || Fe === void 0 ? void 0 : Fe.length) || 0;
          v != "" && Ze > 0 && (c ? Ze > 1 && Ze > 1 + (Qe = ue.modules[1]) + 2 && (T = ue.modules[1 + Qe + 2]) : Ze > 2 && (T = ue.modules[2]), n.endsWith(T, "/") && (S = ""), V = [v, "/", T, "/"].join(""));
        } else
          ue = { UUID: "", service_type: vr };
        M = [d, S, V].join(""), ue.url = M, t._serverInfo = new vi([_, S, V].join(""), null, c, !0, l.dcp.wsProtocol), t._httpUrl = M, t._dmService = A;
      } else {
        var Ct, it = i.port, Bt = n.detect.ssl, yt = !1;
        i.host ? (Ct = i.host, n.isLocalIP(Ct) || (yt = !0)) : Ct = K(), it || (it = Bt ? l.dcp.SSLPort : l.dcp.Port), t._serverInfo = new vi(Ct, it, Bt, !0, l.dcp.wsProtocol), t._httpUrl = ma(t._serverInfo), t._dmService = { server: t._httpUrl, attrs: { url: t._httpUrl, UUID: "", service_type: vr } }, t._bRemoteMode = yt;
      }
      t._bReady = vt, t._wsClient = null, t.__wsRetry = 0, t.__IfShowProgressBar = Gt, t.__IfShowCancelDialogWhenImageTransfer = Gt, t._errorCode = 0, t._errorString = "", t.__bLoadingImage = vt, t.__bAcquireImageNow = vt, t.__bOpenFileNow = vt, t.__addon = {}, t.__defaultSourceName = "", t.__sourceCount = 0, t.__serverId = "", t.__bConnecting = vt, t.__bTrial = vt, t.__licenseInfo = void 0, t.__strProductName = l.DWT.ProductName, t.__productKey = "", t.__versionInfo = l.DWT.JSVersion, t.__bMustUpgradeService = vt, t.__withCredentials = vt, t._moduleSize = 1048576, t._b64bit = l.dcp.b64bit, t._driverType = Ge, t.__IfAppendImage = Gt, t.__maxImagesInBuffer = 32767, t.__maxUploadImageSize = -1, t.__insertingIndex = -1, t._objImageIndexManager = new Eg(), t._bServerPercentDone = Gt, t._aryBitmapCache = [], t._bSSL = l.navInfoSync.bSSL, t._bRegistedLoad = !1, t._logLevel = 0, t._scaleDownThreshold = 0, t._pdfWriteSetting = {}, t.__serverPlatform = Ee, t._bPageFocus = !0, t._bServerAlwaysFocusOnPopupWindow = !0, n.License.isLTS() && (t._blts = !0), t._heartBeatTicks = 1e3;
    }(o, r), o._bRemoteMode || (o.httpFormFields = {}, o.HTTPPassword = r.HTTPPassword || "", o.HTTPPort = r.HTTPPort || (n.detect.ssl ? 443 : 80), o.HTTPUserName = r.HTTPUserName || "", o.__HTTPPostResponseString = "", o.__strHttpContentTypeFieldValue = "application/octet-stream", o.__remoteFilename = "RemoteFile", o.__httpHeaderMap = vt, o._b64bit ? o._segementUploadThreshold = 4294967296 : o._segementUploadThreshold = 524288e3, o._aryTiffTag = [], o._tiffCompressionType = l.DWT.EnumDWT_TIFFCompressionType.TIFF_AUTO, o._jpgQuality = 80, o._pdfConvertMode = 3, o._pdfRealConvertMode = 3, o._pdfResolution = 200, o._pdfPassword = ""), function(t, i) {
      t.__OnReady = i.onReady || null, t.__OnWSReconnect = i.onWSReconnect || null, t.__OnWSClose = i.onWSClose || null, t.__OnWSMessage = i.onWSMessage || null, t.__OnWSError = i.onWSError || null, t.__OnCreateError = i.onCreateError || null, t.__OnPercentDone = i.onPercentDone || "", t.__OnPrintMsg = i.onPrintMsg || "", t.__OnResult = i.onResult || "", t.__OnAfterOperate = i.onAfterOperate || "", t.__OnBeforeOperate = i.onBeforeOperate || "", t.__OnOperateStatus = i.onOperateStatus || "", t.__OnBitmapChanged = i.onBitmapChanged || "", t.__OnGetFilePath = i.onGetFilePath || "", t.__OnPreAllTransfers = i.onPreAllTransfers || "", t.__OnPreTransfer = i.onPreTransfer || "", t.__OnPostLoad = i.onPostLoad || "", t.__OnPostTransfer = i.onPostTransfer || "", t.__OnPostAllTransfers = i.onPostAllTransfers || "", t.__OnSourceUIClose = i.onSourceUIClose || "", t.__OnTransferCancelled = i.onTransferCancelled || "", t.__OnTransferError = i.onTransferError || "", t.__OnInternetTransferPercentage = i.onInternetTransferPercentage || "", t.__OnInternetTransferPercentageEx = i.onInternetTransferPercentageEx || "", t.__OnRemoteScanStatusAsync = i.onRemoteScanStatusAsync || "", t.__OnPostTransferAsync = {};
    }(o, r);
  }
  var cu, Fh = function(o) {
    Hr(r, o);
    var e = Rh(r);
    function r(t) {
      var i;
      return Gn(this, r), Lh(ln(i = e.call(this)), t), i;
    }
    return zn(r);
  }(Sm), Tm = function(o) {
    Hr(r, o);
    var e = Rh(r);
    function r(t) {
      var i;
      return Gn(this, r), Lh(ln(i = e.call(this)), t), i;
    }
    return zn(r, [{ key: "getDevices", value: function(t, i, a) {
      return this._getDevicesAsync("getDevices", t, i, a);
    } }, { key: "selectDevice", value: function(t, i) {
      return this._selectDeviceAsync("selectDevice", t, i);
    } }, { key: "acquireImage", value: function(t, i) {
      return this._acquireImageAsync("acquireImage", t, i);
    } }, { key: "openSource", value: function() {
      return this._openSourceAsync("openSource");
    } }, { key: "closeSource", value: function() {
      return this._closeSourceAsync("closeSource");
    } }, { key: "selectSource", value: function(t) {
      return this._selectSourceAsync("selectSource", t);
    } }, { key: "getCapabilities", value: function() {
      var t = this;
      return t._resetErr(), t._isValid() ? new n.Promise(function(i, a) {
        return t._getCapabilities(function(u) {
          i(u);
        }, function(u, c) {
          a({ code: u, message: c });
        });
      }) : n.Promise.reject({ code: t._errorCode, message: t._errorString });
    } }, { key: "setCapabilities", value: function(t) {
      var i = this;
      return i._resetErr(), i._isValid() ? new n.Promise(function(a, u) {
        return i._setCapabilities(t, function() {
          a(!0);
        }, u);
      }) : n.Promise.reject({ code: i._errorCode, message: i._errorString });
    } }]), r;
  }(oh), Cm = function() {
    function o(e) {
      Gn(this, o), this._stwain = e;
    }
    return zn(o, [{ key: "getDevices", value: function(e, r, t) {
      return this._stwain.getDevices(e, r, t);
    } }, { key: "selectDevice", value: function(e, r) {
      return this._stwain.selectDevice(e, r);
    } }, { key: "acquireImage", value: function(e, r) {
      return this._stwain.acquireImage(e, r);
    } }, { key: "openSource", value: function() {
      return this._stwain.openSource();
    } }, { key: "closeSource", value: function() {
      return this._stwain.closeSource();
    } }, { key: "selectSource", value: function(e) {
      return this._stwain.selectSource(e);
    } }, { key: "getCapabilities", value: function() {
      return this._stwain.getCapabilities();
    } }, { key: "setCapabilities", value: function(e) {
      return this._stwain.setCapabilities(e);
    } }, { key: "dispose", value: function() {
      this._stwain.dispose();
    } }]), o;
  }(), Oh = n.win;
  function nl(o, e) {
    var r;
    if (!n.isObject(o)) {
      var t = {};
      return n.Errors.InvalidParameter(t), n.Promise.reject(yr(t));
    }
    if (!(o instanceof ki)) {
      var i = {};
      return n.Errors.InvalidParameter(i), n.Promise.reject(yr(i));
    }
    if (!n.product.loadResourcePath)
      return Ds().then(us).then(function() {
        return nl(o, e);
      }, function(c) {
        return n.Promise.reject(c);
      });
    if (!e) {
      n.License.isLicenseMixed(null, !0) || l.Lib.License.reparseProductKey();
      var a = l.DWT.licenseException;
      if (a.code != 0)
        return n.License.showLicenseErrorDialog(a), n.Promise.reject(a);
    }
    var u = { id: n.guid(), iServiceType: Vr, dmService: o, bNoViewer: !0, bNoMask: o == null || (r = o.attrs) === null || r === void 0 ? void 0 : r.bNoMask, bNotShowMessage: !0 };
    return new n.Promise(function(c, d) {
      return rl(u, c, function(_, v) {
        var T = { code: l.DWT.EnumDWT_Error.FailedToCreateDWTObject, message: _ };
        v && v.__unload(), d(T);
      });
    });
  }
  function rl(o, e, r) {
    var t = o.id, i = o.containerId;
    if (o.bNoViewer || n.isString(i) && i != "" && (o.container || n.get(i))) {
      if (l.DWT.Containers && !o.bNoViewer) {
        var a, u = l.DWT.Containers;
        for (a = 0; a < u.length; a++)
          if (u[a].ContainerId == i)
            return o.bNoMask || n.closeLoadingMsg(), !o.bNotShowMessage && n.isFunction(r) && (o.bNoMask || n.closeLoadingMsg(), n._safePromptCustomMsg(function() {
              r(l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_CreateID_MustNotInContainers);
            })), vt;
      }
      o.container || (o.container = n.get(i));
    } else
      o.bNoViewer = !0, o.containerId = 0;
    if (l.DWT.ContainerMap[t])
      return o.bNoMask || n.closeLoadingMsg(), n.isFunction(r) && r(l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated), vt;
    var c, d, _, v, T = !1;
    if (o.iServiceType == hr) {
      if (!l.WasmEnv)
        return o.bNoMask || n.closeLoadingMsg(), n._safePromptCustomMsg(function() {
          n.isFunction(r) && r(l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WasmEnvNotLoaded);
        }), vt;
    } else
      o.dmService && (c = o.dmService.server, d = vt, _ = new n.Uri(c), n.isLocalIP(_.hostname || _.scheme) || (d = Gt), T = d);
    return o.onReady = function(M) {
      if (Oh.DCP_DWT_OnClickCloseInstall(!1, !0), !M)
        return o.bNoMask || n.closeLoadingMsg(), n.isFunction(r) && r(l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_CreateID_NotContainer), !1;
      if (l.DWT.ContainerMap[M._id])
        return o.bNoMask || n.closeLoadingMsg(), n.isFunction(r) && r(l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated, M), !1;
      var A = {};
      return A.WebTwainId = M._id, M._containerElement && M._containerElement.id && (A.ContainerId = M._containerElement.id), l.DWT.DynamicContainers.push(A), l.DWT.ContainerMap[M._id] = M, l.DWT.IfDisableDefaultSettings || !M._isTwainServiceType() && !M._isDMServiceType() ? (o.bNoMask || n.closeLoadingMsg(), n.isFunction(e) && e(M)) : Bh(M).then(function() {
        o.bNoMask || n.closeLoadingMsg(), n.isFunction(e) && e(M), lu(M);
      }, function() {
        o.bNoMask || n.closeLoadingMsg(), M._errorCode == -2207 && (n.detect.bPromptJSOrServerOutdated || (n.detect.bPromptJSOrServerOutdated = Gt)), lu(M);
      }), !0;
    }, o.onCreateError = function(M) {
      if (Oh.DCP_DWT_OnClickCloseInstall(!1, !0), n.isFunction(r)) {
        var A, S = l.DWT.licenseException;
        S == 0 ? (A = n.Errors.ThrowString_FailedToCreateDWTObject(v), M && M._errorString != "" && (A = M._errorString)) : A = S.message, r(A, M, !0);
      }
      return !1;
    }, vn(o.container) ? o.bNoViewer = !1 : o.bNoViewer = !0, (v = T ? new Tm(o) : new Fh(o))._isTwainServiceType() || v._isDMServiceType() ? (n.detect.bFirst && n._init(o), n.detect.bFirst = !1, function(M) {
      var A = M._getWebTwainId();
      if (l.DWT.ContainerMap[A] && M._OnReady(), !(M._bReady || M._destroy)) {
        M.__bConnecting = !0;
        var S = ti.Instance.getClient(M._serverInfo);
        return S.setRetry(0), fr("", M), Ka(M._bRemoteMode).then(function() {
          var V, ne, z = 0, ue = 1e4;
          return S.testConnection(V, z, ne, ue);
        }).then(function() {
          M.__bConnecting = !1, M._wsClient = S, M._bReady || (M._bReady = !0, M._OnReady()), Yn("");
        }, function(V) {
          if (V && V.message && n.error(V.message), M._bRemoteMode && M._isTwainServiceType()) {
            var ne, z, ue = (ne = M._dmService) === null || ne === void 0 || (z = ne.attrs) === null || z === void 0 ? void 0 : z.name, xe = n.Errors.ThrowFailedConnectToRemoteDynamsoftService(ue);
            M._errorCode = xe.code, M._errorString = xe.message;
          }
          n.isFunction(M.__OnCreateError) && M.__OnCreateError(M), M._bReady = !1, M.__bConnecting = !1, Yn("");
        });
      }
    }(v)) : v._isWasmWithScan() ? function(M) {
      return Vh.apply(this, arguments);
    }(v) : (v._OnReady(), v);
  }
  function Em(o, e) {
    var r = l.navInfoSync;
    if (n.isFunction(l.OnWebTwainNeedUpgradeCallback)) {
      var t, i, a, u, c = {};
      if (r.bWin) {
        if (r.bIE)
          i = l.dcp.getDSPath();
        else {
          var d = n.product;
          i = d.bHTML5Edition ? l.dcp.getDSPath() : d.getMSIPath();
        }
        t = Le;
      } else
        l.navInfo.bEmbed || r.bAndroid || r.bChromeOS || r.bHarmonyOS || r.biPhone || r.biPad ? (i = a = l.dcp.getDSPath(), c.deb = a, t = r.bAndroid ? le : r.biPhone || r.biPad ? je : r.bChromeOS ? Ve : r.bHarmonyOS ? We : Re) : r.bLinux ? (a = l.dcp.getLinuxHTML5DebPath(), u = l.dcp.getLinuxHTML5RpmPath(), i = a, c.deb = a, c.rpm = u, t = Te) : (i = n.product.bHTML5Edition ? l.dcp.getDSPath() : n.product.getPKGPath(), t = Oe);
      c.default = i;
      var _ = n.one(".dynamsoft-dialog-license");
      _ && _.getEL() && (_.getEL().style.display = "none"), n.detect.needUpgrade = Gt, l.OnWebTwainNeedUpgradeCallback(n.product.name, c, n.product.bHTML5Edition, t, r.bIE, r.bSafari, n.detect.ssl, n.env.strIEVersion, n.detect.bPromptJSOrServerOutdated, o, e);
    }
  }
  function lu(o) {
    return Wh.apply(this, arguments);
  }
  function Wh() {
    return (Wh = Ln(he.mark(function o(e) {
      var r, t, i;
      return he.wrap(function(a) {
        for (; ; )
          switch (a.prev = a.next) {
            case 0:
              if (e && !e._blts) {
                a.next = 2;
                break;
              }
              return a.abrupt("return");
            case 2:
              return a.next = 4, e._getVersionInfoAsync();
            case 4:
              if (r = a.sent, n.detect.bNeedUpgradeEvent || ig(r)) {
                a.next = 14;
                break;
              }
              if (n.detect.bNeedUpgradeEvent = Gt, !n.isFunction(l.DWT.OnWebTwainNeedUpgrade)) {
                a.next = 10;
                break;
              }
              if (!l.DWT.OnWebTwainNeedUpgrade()) {
                a.next = 10;
                break;
              }
              return a.abrupt("return");
            case 10:
              if (!e._bRemoteMode) {
                a.next = 13;
                break;
              }
              return n.isFunction(l.OnRemoteWebTwainNeedUpgradeCallback) && (t = e._serverInfo.port, l.OnRemoteWebTwainNeedUpgradeCallback(n.product.name, e._serverInfo.server, t, e._serverInfo.ssl)), a.abrupt("return");
            case 13:
              (n.product.bHTML5Edition && e._isBindViewer() || !n.product.bHTML5Edition) && ((i = e._containerElement) && (n.one(i).before(n.install._strNonInstallDIV), n.show(n.install._divDWTNonInstallContainerID)), n.install._divDWTemessageContainer != "" && n.hide(n.install._divDWTemessageContainer), Em());
            case 14:
            case "end":
              return a.stop();
          }
      }, o);
    }))).apply(this, arguments);
  }
  function Bh(o) {
    return n.showLoadingMsg(-1, "", l.MSG.Init_ConfiguringDWT), o._innerFunV2("IfDisableSourceAfterAcquire", "[1]").then(function() {
      var e = l.navInfoSync, r = Ge, t = o, i = !1, a = !1;
      t._bRemoteMode ? t.__serverPlatform == Le || (t.__serverPlatform == Te ? a = !0 : t.__serverPlatform == Oe && (i = !0)) : (i = e.bMac, a = e.bLinux, e.bWin), i ? r = Kt : a && (r = ot), o._driverType = r, o._bRemoteMode && (o._setIfShowUI(!1), o._setIfShowFileDialog(!1));
    }).then(function() {
      o.__licenseInfo && (n.License.checkProductKey(o, { Core: !0 }) || l.navInfoSync.bWin && n.License.checkProductKey(o, { Webcam: !0 })) && (l.DWT.lclex(), n.Errors.ClearErrorInfo(o));
    });
  }
  function Nh(o, e) {
    if (n.product.bActiveXEdition) {
      var r = {};
      return n.Errors.ActiveXNotSupport(r), n.Promise.reject({ code: r._errorCode, message: r._errorString });
    }
    return nl(o, e);
  }
  function Vh() {
    return (Vh = Ln(he.mark(function o(e) {
      var r;
      return he.wrap(function(t) {
        for (; ; )
          switch (t.prev = t.next) {
            case 0:
              if (r = e._getWebTwainId(), l.DWT.ContainerMap[r] && e._OnReady(), !e._bReady && !e._destroy) {
                t.next = 4;
                break;
              }
              return t.abrupt("return");
            case 4:
              return e.__bConnecting = !0, t.prev = 5, t.next = 8, Qs();
            case 8:
              return t.next = 10, Uh(e);
            case 10:
              t.next = 17;
              break;
            case 12:
              t.prev = 12, t.t0 = t.catch(5), n.error(t.t0), jh(), n.isFunction(e.__OnCreateError) && e.__OnCreateError(e);
            case 17:
              return t.prev = 17, t.finish(17);
            case 19:
            case "end":
              return t.stop();
          }
      }, o, null, [[5, 12, 17, 19]]);
    }))).apply(this, arguments);
  }
  function Uh(o) {
    return Gh.apply(this, arguments);
  }
  function Gh() {
    return (Gh = Ln(he.mark(function o(e) {
      var r, t, i, a, u;
      return he.wrap(function(c) {
        for (; ; )
          switch (c.prev = c.next) {
            case 0:
              return c.prev = 0, c.next = 3, oo();
            case 3:
              if (r = c.sent, !n.License.isLTS()) {
                c.next = 8;
                break;
              }
              if (l.DWT.li({ instanceMode: l.DWT.EnumInstance.dwt_desktop }, "")) {
                c.next = 8;
                break;
              }
              return c.abrupt("return", Ul(r));
            case 8:
              return c.prev = 8, t = new Wa("", !1), c.next = 12, hc(e, t, "", !1);
            case 12:
              if (i = c.sent, n.License.isLTS() && (i.LTS = !0), e.__anlic = i, e.__bConnecting = !1, !l.navInfoSync.bAndroid) {
                c.next = 21;
                break;
              }
              if (n.License.checkAndroidServiceCore(e)) {
                c.next = 21;
                break;
              }
              return l.OnLicenseError(e._errorString, e._errorCode), n.isFunction(e.__OnCreateError) && e.__OnCreateError(e), c.abrupt("return");
            case 21:
              e._bReady || (e._bReady = !0, e._OnReady()), c.next = 28;
              break;
            case 24:
              c.prev = 24, c.t0 = c.catch(8), zc(e, !1, c.t0, !0), n.isFunction(e.__OnCreateError) && e.__OnCreateError(e);
            case 28:
              return c.prev = 28, t && t.dispose(), c.finish(28);
            case 31:
              c.next = 42;
              break;
            case 33:
              throw c.prev = 33, c.t1 = c.catch(0), u = -1, e._bReady = !1, e.__bConnecting = !1, n.isString(c.t1) ? a = c.t1 : c.t1 && (c.t1.code && (u = c.t1.code), c.t1.message && (a = c.t1.message)), e._errorCode = u, e._errorString = a, a;
            case 42:
            case "end":
              return c.stop();
          }
      }, o, null, [[0, 33], [8, 24, 28, 31]]);
    }))).apply(this, arguments);
  }
  function jh() {
    Zs(null, 0, 0, !1, !1);
  }
  var du, Fs, Dm = l.DWT, fs = l.navInfoSync, il = n.each;
  function Os() {
    var o, e = n.detect, r = 5;
    if (!n.product.bHTML5Edition)
      return n.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!"), void Fs();
    if (l.navInfoSync.bAndroid && (r = 0), e.tryTimes > r)
      return n.log("Failed more than 5 times."), void Fs();
    if (e.OnDetectNext && e.OnDetectNext(), e.tryTimes == 0 && e.cUrlIndex > 0 && e.arySTwains.length > 0) {
      var t = e.arySTwains[0];
      e.bNoControlEvent || Yn(""), zh(t);
    }
    if (e.cUrlIndex >= e.urls.length && (e.cUrlIndex = 0, e.tryTimes++), !(e.arySTwains.length > 0))
      return e.bOK = !0, void du();
    var i = (o = e.arySTwains[0])._getWebTwainId();
    if (l.DWT.ContainerMap[i] && o._OnReady(), o._bReady || o._destroy)
      return e.arySTwains.splice(0, 1), void (e.arySTwains.length <= 0 ? (e.bOK = !0, du()) : setTimeout(Os, 100));
    if (e.bNoControlEvent || fr("", o), !o.__bConnecting) {
      if (o.__bConnecting = !0, o._isTwainServiceType() || o._isDMServiceType()) {
        var a = ti.Instance.getClient(o._serverInfo);
        return a.testConnection().then(function() {
          o.__bConnecting = !1, o._wsClient = a, o._bReady || (o._bReady = !0, o._OnReady()), e.arySTwains.splice(0, 1), e.arySTwains.length <= 0 ? (Yn(""), e.bOK = !0, du()) : setTimeout(Os, 100);
        }, function(u) {
          var c;
          u && u.message && (c = u.message, n.error(c)), o.__bConnecting = !1, o._bReady ? (Yn(""), Fs(c)) : (e.cUrlIndex++, setTimeout(Os, 100));
        });
      }
      return o._isWasmWithScan() ? Uh(o).then(function() {
        e.arySTwains.splice(0, 1), e.arySTwains.length <= 0 ? (Yn(""), e.bOK = !0, du()) : setTimeout(Os, 100);
      }, function(u) {
        o._bReady ? (Yn(""), Fs(u)) : (e.cUrlIndex++, setTimeout(Os, 100));
      }) : void 0;
    }
    Fs();
  }
  function zh(o) {
    var e = n.detect;
    if (!e.bNoControlEvent) {
      if (n.isFunction(e.onNoControl)) {
        var r, t = 0, i = 0;
        o && (t = o._width, i = o._height, r = o._containerElement), t <= 0 && (t = 270), i <= 0 && (i = 350), e.onNoControl(r, t, i, o);
      }
      e.bNoControlEvent = !0;
    }
  }
  n.ProgressBar = gn, n.env.WSVersion = "12.0.0", n.env.WSSession = (/* @__PURE__ */ new Date()).getTime(), n._init = function(o) {
    var e, r = l.Lib, t = l.dcp, i = r.LS.item("DWT_port"), a = r.LS.item("DWT_ssl");
    if (t.bEnhancedMode)
      return !0;
    r.detect.urls.splice(0), r.detect.cUrlIndex = 0, i !== cu && a !== cu && (e = { port: i, ssl: a == "true" });
    var u = function(c) {
      return !e || !(!c || c.port == e.port && c.ssl == e.ssl);
    };
    r.detect.detectType === 1 ? (e !== cu && e.ssl && r.detect.urls.push(e), il(r.detect.ports, function(c) {
      c.ssl && u(c) && r.detect.urls.push(c);
    })) : r.detect.detectType === 0 ? (e === cu || e.ssl || r.detect.urls.push(e), il(r.detect.ports, function(c) {
      c.ssl === !1 && u(c) && r.detect.urls.push(c);
    })) : (e !== cu && r.detect.urls.push(e), il(r.detect.ports, function(c) {
      u(c) && r.detect.urls.push(c);
    }));
  }, n.startCheckWS = function() {
    return n.detect.tryTimes = 0, new n.Promise(function(o, e) {
      du = o, Fs = e, setTimeout(Os, 200);
    });
  }, n.html5.closeAll = function() {
    var o, e, r, t, i, a, u, c;
    for (n.dlgProgress = !1, n.detect.bOK = !1, n.detect.bFirst = !0, o = n.detect.arySTwains.length - 1; o >= 0; o--)
      if (r = n.detect.arySTwains[o]) {
        if (a = r._id, r._containerElement && (i = r._containerElement, t = r._containerElement.id), c = !1, l.DWT.Containers) {
          for (e = 0; e < l.DWT.Containers.length; e++)
            if ((u = l.DWT.Containers[e]) && (a == u.WebTwainId || t && t == u.ContainerId || i == u.Container)) {
              c = !0;
              break;
            }
        }
        c && (r.dispose(), n.detect.arySTwains.splice(o, 1)), r._isMobileMode();
      }
  }, n.bio = !1, n.progressMessage = "", n.dialogShowStatus = !1, n.needShowTwiceShowDialog = !1, n.dlgProgress = !1, n.cancelFrom = Li, n.dlgRef = 0, n.initProgress = function(o) {
    var e, r;
    if (!n.dlgProgress) {
      (r = []).push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><div class="ds-dwt-progressWrap">'), r.push('<h3 class="dynamsoft-finalMessage"> </h3>'), r.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>'), fs.bIE ? r.push('<div class="dynamsoft-progressBar" value="" max="100"></div>') : r.push('<progress class="dynamsoft-progressBar" value="" max="100"></progress>'), r.push('<br /><div style="width:100%;text-align:center"><button class="dynamsoft-btnCancel" value="cancel" autofcus>cancel</button></div>'), r.push("</div></dialog>"), (e = n.one(".dynamsoft-dwt-dialogProgress")) && e.getEL() && e.remove();
      var t = n.parseHTML(r.join(""));
      if (t && t.length > 0 && document.body.appendChild(t[0]), fs.bIE) {
        var i = n.one(".dynamsoft-progressBar"), a = i && i.getEL();
        a && (a.objProgressBar = new gn(a, { width: 280, height: 20 }));
      }
      (e = n.one(".dynamsoft-dwt-dialogProgress")) && e.getEL() && (n.dlgProgress = e[0], n.dialog.setup(n.dlgProgress)), n.dlgRef = 0, n.dialogShowStatus = !1, n.cancelFrom = Li;
    }
  }, n.setBtnCancelVisibleForProgress = function(o) {
    if (!(n.dlgRef <= 0 || n.dialogShowStatus == 0)) {
      var e = n.one(".dynamsoft-btnCancel"), r = e && e.getEL();
      r && (r.style.display = o ? "" : "none");
    }
  }, n.showProgressMsg = function(o, e, r) {
    if (!(n.dlgRef <= 0 || n.dialogShowStatus == 0)) {
      var t = n.one(".dynamsoft-progressBar"), i = n.one(".dynamsoft-status"), a = n.one(".dynamsoft-finalMessage"), u = n.one(".dynamsoft-desc"), c = o;
      o < 0 ? c = 0 : o > 100 && (c = 100), c = Math.floor(c), a && a.getEL() && a.html(e), u && u.getEL() && u.html(r), (c || c === 0) && (i && i.getEL() && i.html(c + "%"), t && t.getEL() && (fs.bIE ? t[0].objProgressBar ? t[0].objProgressBar.setValue(c) : t[0].value = c : (fs.bEdge && (t[0].style.display = ""), t[0].value = c))), c && (c >= 100 || n.dlgRef <= 0) && (setTimeout(function() {
        t && t.getEL() && (fs.bIE ? t[0].objProgressBar ? t[0].objProgressBar.setValue(0) : t[0].value = 0 : (fs.bEdge && (t[0].style.display = "none"), t[0].value = 0));
      }, 300), n.dlgRef <= 0) && n.closeProgress(null, "OnPercentDone");
    }
  }, n.showProgress = function(o, e, r) {
    var t, i = o;
    if (l.DWT.IfConfineMaskWithinTheViewer ? i._isNoViewer() ? t = document.body : i._containerElement ? t = i._containerElement : l.DWT.Containers && l.DWT.Containers.length > 0 && l.DWT.Containers[0].ContainerId && (t = l.Lib.get(l.DWT.Containers[0].ContainerId)) || (t = document.body) : t = document.body, t && t !== document.body) {
      var a = t.firstElementChild;
      a && a !== n.dlgProgress && (t = a), t.style.position !== "" && t.style.position !== "static" || (t.style.position = "relative", i.progressContainer = { el: t });
    }
    if (n.dlgProgress && t.appendChild(n.dlgProgress), n.log("showProgress:" + e + ",bCancel:" + r), n.cancelFrom == Li && i.__IfShowProgressBar == 1 || n.cancelFrom != Li && i.__IfShowCancelDialogWhenImageTransfer == 1) {
      var u = n.one(".dynamsoft-btnCancel"), c = u && u.getEL();
      if (c && (c.style.display = r == 0 ? "none" : ""), n.dialogShowStatus == 0) {
        n.dlgProgress && (n.dialog.setup(n.dlgProgress, !0), n.dlgProgress.showModal()), n.dialogShowStatus = !0;
        var d = n.one(".dynamsoft-finalMessage"), _ = n.one(".dynamsoft-progressBar"), v = _ && _.getEL(), T = n.one(".dynamsoft-status");
        d && d.getEL() && d.html(""), T && T.getEL() && T.html("0%"), v && (fs.bIE && v.objProgressBar ? v.objProgressBar.setValue(0) : v.value = 0);
      }
      n.dlgRef++;
    }
  }, n.closeProgress = function(o, e) {
    var r = o;
    n.log("closeProgress:" + e);
    var t = n.one(".dynamsoft-btnCancel");
    n.dlgRef--, n.dlgRef <= 0 && (n.dlgRef = 0), n.needShowTwiceShowDialog == 1 && n.cancelFrom == ei ? t && t.getEL() && (t[0].innerHTML = "Cancel") : (t && t.getEL() && (t[0].innerHTML = "Cancel"), n.dlgRef == 0 && (n.dialogShowStatus == 1 && (n.dlgProgress && (n.dlgProgress.close(), n.dlgProgress && document.body.appendChild(n.dlgProgress), r && r.progressContainer && r.progressContainer.el && (r.progressContainer.el.style.position = "", r.progressContainer = null)), n.dialogShowStatus = !1), n.needShowTwiceShowDialog = !1, n.cancelFrom = Li));
  }, Dm.RemoveAllAuthorizations = function() {
    var o, e = n.LS.item("DWT_port"), r = "http://";
    return n.LS.item("DWT_ssl") == "true" && (r = "https://"), o = [r, K(), ":", e, "/dwt/", n.product.getDWTPrefix(), n.product.getServerVersionInfo(), "/RemoveAllAuthorizations?t=", n.now()].join(""), n.ajax({ method: "GET", xhrFields: { withCredentials: !0 }, url: o, async: !0 }), !0;
  };
  var km = { isSupportLS: function() {
    var o = l.navInfoSync, e = !1;
    if (!(o.bEdge && o.bFileSystem))
      try {
        e = !!window.localStorage;
      } catch {
      }
    return e;
  }, item: function(o, e, r) {
    var t = null;
    return this.isSupportLS() ? (e ? (localStorage.setItem(o, e), t = e) : t = localStorage.getItem(o), t === null ? r : t) : r;
  }, removeItem: function(o) {
    return !!this.isSupportLS() && (localStorage.removeItem(o), !0);
  } }, qa = l.navInfoSync, Ea = l.dcp, ol = 0, Hh = 2;
  function al(o, e) {
    n.isLocalIP(o) && (n.LS.item("DWT_port", e), n.LS.item("DWT_ssl", qa.bSSL ? "true" : "false"));
  }
  function sl(o, e, r) {
    var t, i, a = function(c) {
      var d, _ = "", v = c, T = "", M = l.navInfoSync;
      return d = M.bMac ? "mac/MacDWT_" : M.bLinux ? "linux/LinuxDWT_" : "win/WinDWT_", M.bFileSystem || (_ = "?t=" + n.getRandom()), v.length > 0 && v[v.length - 1] != "/" && (v += "/"), M.bWin && Ea.b64bit && (T = "_x64"), [v, "dist/", d, n.product.getServerVersionInfo(), T, ".zip", _].join("");
    }(l.DWT.ResourcesPath);
    if (t = function(c) {
      Ea.loadZip(c, 0, function() {
        if (n.closeLoadingMsg(), n.isFunction(l.OnWebTWAINDllDownloadSuccessful) && l.OnWebTWAINDllDownloadSuccessful(), l.DWT.OnWebTwainInitMessage) {
          var d;
          if (qa.bSSL && qa.bFirefox)
            return d = l.Lib.product.CustomizableDisplayInfo.generalMessages.refreshNeeded, void l.DWT.OnWebTwainInitMessage(d, Be);
          d = l.Lib.product.CustomizableDisplayInfo.generalMessages.DWTmoduleLoaded, l.DWT.OnWebTwainInitMessage(d, Je);
        }
        setTimeout(e, 3e3);
      }, i);
    }, i = function(c) {
      if (n.closeLoadingMsg(), l.DWT.OnWebTwainInitMessage) {
        var d = l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_DWT_NOT_DOWNLOADED;
        l.DWT.OnWebTwainInitMessage(d, Dt);
      }
      if (n.isFunction(l.OnWebTWAINDllDownloadFailure)) {
        var _ = {};
        c.httpCode == 404 ? n.Errors.WebTwainModuleNotExist(_) : n.Errors.WebTwainModuleDownloadFailure(_), l.OnWebTWAINDllDownloadFailure(n.product.name, _._errorCode, _._errorString);
      }
      n.detect.dcpStatus = 3, n.isFunction(o.dwtFailedCallback) && o.dwtFailedCallback();
    }, l.DWT.OnWebTwainInitMessage) {
      var u = l.Lib.product.CustomizableDisplayInfo.generalMessages.downloadingDWTModule;
      l.DWT.OnWebTwainInitMessage(u, Je);
    }
    n.fetch(a, { mode: "cors", dataType: "arraybuffer" }).then(t, i);
  }
  function Kh(o, e, r, t) {
    var i, a = function() {
      if (l.DWT.OnWebTwainInitMessage) {
        var v = l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED;
        l.DWT.OnWebTwainInitMessage(v, Ht);
      }
      if (t) {
        var T = l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED;
        Nn(t, Hh, T);
      }
    };
    if (l.DWT.OnWebTwainInitMessage) {
      var u = l.Lib.product.CustomizableDisplayInfo.generalMessages.checkingDWTVersion;
      l.DWT.OnWebTwainInitMessage(u, Je);
    }
    i = function(v) {
      var T;
      v && (T = n.parse(v)), T && "result" in T && (T = T.result, n.isArray(T) && T.length > 0) ? setTimeout(function() {
        (function(M, A, S, V) {
          if (n.isFunction(V)) {
            var ne, z = S[0], ue = S.length > 1 ? S[1] : "", xe = S.length > 2 ? S[2] : 0, Fe = S.length > 3 ? S[3] : "", Qe = S.length > 4 ? S[4] : "";
            if (ue !== "")
              l.DWT.OnWebTwainInitMessage && l.DWT.OnWebTwainInitMessage(ue, ce), Nn(V, Hh, l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED);
            else {
              var Ze = "The WebTwain version is: " + z;
              l.DWT.OnWebTwainInitMessage && l.DWT.OnWebTwainInitMessage(Ze, Je), xe == "32" && n.isLocalIP(M) && (l.dcp.b64bit = !1), Fe != "" && (l.DWT.lsmid(Fe, ""), l.DWT.lsmid2b(Fe)), V(ol, M, A, z);
            }
            n.isFunction(l.OnSSLCertInfo) && (Qe != "" && (ne = Date.parse(Qe + "T00:00:00"), ne = isNaN(ne) ? null : new Date(ne)), l.OnSSLCertInfo(ne));
          }
        })(o, e, T, t);
      }, 0) : setTimeout(a, 1e3);
    };
    var c = n.now(), d = ['{"id":"', n.guid(), '","method":"VersionInfo","version":"', n.product.getDWTPrefix(), n.product.getServerVersionInfo(), '","parameter":[]}'].join("");
    if (l.DWT.ConnectWithSocket && l.navInfoSync.bHTML5Edition)
      return oi.postStringDataByWSUrl(oi.getWsUrl(o, e), d).then(i, a);
    var _ = "fa/VersionInfo?ts=" + c;
    ji.getHttpClient(o, e, n.detect.ssl).request(d, _, {}, r).then(i, a);
  }
  function hu(o, e, r) {
    var t, i = o.host, a = o.port;
    return o.iServiceType === hr ? (n.showLoadingMsg(-1, "", l.MSG.Init_CreatingDWT), n.detect.dcpStatus = 2, al("", 0), void Ka(!1).then(function() {
      n.isFunction(o.wasmModeCallback) && o.wasmModeCallback();
    })) : o.iServiceType === Zn ? (n.showLoadingMsg(-1, "", l.MSG.Init_CreatingDWT), n.detect.dcpStatus = 2, al("", 0), void Ka(!1).then(function() {
      n.isFunction(o.serviceModeCallback) && o.serviceModeCallback();
    })) : (n.showLoadingMsg(-1, "", l.MSG.Init_CheckDWT), t = r > 0 ? r + 1 : 1, a || n.each(n.detect.ports, function(u) {
      qa.bSSL ? u.ssl && (a = u.port) : u.ssl || (a = u.port);
    }), n.showLoadingMsg(-1, "", l.MSG.Init_CheckDWTVersion), void Kh(i, a, vo, function(u, c, d, _) {
      if (u === ol && _ && _.length > 0 && ed(_, n.product.getServerVersionInfo(!0)))
        return n.detect.dcpStatus = 2, al(c, d), n.showLoadingMsg(-1, "", l.MSG.Init_CreatingDWT), void Ka(!1).then(function() {
          n.isFunction(o.serviceModeCallback) && o.serviceModeCallback(c, d);
        });
      if (e) {
        if (t > 3)
          return n.closeLoadingMsg(), n.detect.dcpStatus = 3, void (n.isFunction(o.dwtFailedCallback) && o.dwtFailedCallback({ code: u, message: c }));
        setTimeout(function() {
          hu(o, Gt, t);
        }, 1e3);
      } else {
        if (!l.DWT.IfInstallDWTModuleWithZIP)
          return n.closeLoadingMsg(), n.detect.dcpStatus = 3, void (n.isFunction(o.dwtFailedCallback) && o.dwtFailedCallback({ code: u, message: c }));
        sl(o, function() {
          hu(o, Gt, t);
        });
      }
    }));
  }
  function Yh(o) {
    var e = function(t, i) {
      if (l.DWT.OnWebTwainInitMessage) {
        var a = l.Lib.product.CustomizableDisplayInfo.generalMessages.downloadNeeded;
        l.DWT.OnWebTwainInitMessage(a, Je);
      }
      if (n.isLocalIP(o.host))
        !n.detect.bNoControlEvent && n.isFunction(n.detect.onNoControl) && (n.detect.bNoControlEvent = Gt, n.detect.onNoControl());
      else if (n.isFunction(l.OnRemoteWebTwainNotFoundCallback)) {
        var u = qa.bSSL;
        l.OnRemoteWebTwainNotFoundCallback(n.product.name, o.host, o.port, u, n.env.bMobile);
      }
      if (n.isFunction(o.dcpFailedCallback)) {
        var c = i, d = l.DWT.licenseException;
        n.isString(i) ? c = i : t ? n.isString(t) ? c = t : t.message && (d.code = t.code, c = t.message) : c = "", d.code = l.DWT.EnumDWT_Error.FailedToCreateDWTObject, d.message = c, o.dcpFailedCallback(c);
      }
    };
    if (!l.DWT.IfCheckDCP || o.iServiceType === hr || o.iServiceType === Zn)
      return o.dwtFailedCallback || (o.dwtFailedCallback = e), void hu(o, vt, 0);
    var r = function(t) {
      var i = 1, a = l.navInfoSync;
      if (l.navInfoSync.bWin && (i = t > 0 ? t + 1 : 1) > 3)
        return r = null, n.closeLoadingMsg(), n.detect.dcpStatus = 3, void (n.isFunction(o.dwtFailedCallback) && o.dwtFailedCallback());
      if (o.dwtFailedCallback || (o.dwtFailedCallback = function() {
        var _, v, T = l.navInfoSync;
        n.closeLoadingMsg(), n.isFunction(l.OnWebTWAINModuleDownloadManually) && (T.bLinux ? (_ = Te, v = { default: l.dcp.getLinuxHTML5DebPath(), deb: l.dcp.getLinuxHTML5DebPath(), rpm: l.dcp.getLinuxHTML5RpmPath() }) : T.bMac ? (_ = Oe, v = { default: l.dcp.getDSPath() }) : (_ = Le, v = { default: l.dcp.getDSPath() }), l.OnWebTWAINModuleDownloadManually(v, _, T.bIE, T.bSafari, n.detect.ssl, n.env.strIEVersion));
      }), Ea.bEnhancedMode) {
        var u, c, d = 0;
        return u = function(_) {
          if (n.isArray(_) && _.length > 1) {
            n.closeLoadingMsg();
            var v, T, M = _[1];
            if (M && (Ea.currentUserPorts = M, M.dwt))
              return v = M.dwt.port, T = M.dwt.sslPort, v == 0 || T == 0 ? l.dcp.bEnhancedMode ? (setTimeout(function() {
                Ea.getPorts(Ea.strSID, u, c);
              }, 800), !0) : ++d > 5 ? (r(i), !1) : (setTimeout(function() {
                Ea.getPorts(Ea.strSID, u, c);
              }, 300), !0) : (o.port = a.bSSL ? T : v, A = o.port, n.detect.urls.splice(0), n.detect.urls.push({ port: A, ssl: qa.bSSL }), n.detect.ports = [{ port: A, ssl: qa.bSSL }], n.detect.cUrlIndex = 0, qa.bSSL ? l.DWT.SSLPort = A : l.DWT.Port = A, hu(o, vt, 0), !0);
          }
          var A;
          return l.DWT.IfInstallDWTModuleWithZIP ? (sl(o, function() {
            r(i);
          }), !0) : (n.detect.dcpStatus = 3, void (n.isFunction(o.dwtFailedCallback) && o.dwtFailedCallback()));
        }, c = function() {
          return n.closeLoadingMsg(), l.DWT.IfInstallDWTModuleWithZIP ? (sl(o, function() {
            r(i);
          }), !0) : (n.detect.dcpStatus = 3, void (n.isFunction(o.dwtFailedCallback) && o.dwtFailedCallback()));
        }, Ea.getPorts(Ea.strSID, u, c), !0;
      }
      return r = null, hu(o, vt, 0), !0;
    };
    Jh(r, e);
  }
  function Jh(o, e) {
    n.License.isLicenseMixed(null, !0) || l.Lib.License.reparseProductKey();
    var r = l.DWT.licenseException;
    if (r.code != 0)
      return n.License.showLicenseErrorDialog(r), !!n.isFunction(e) && e(r.code, r.message);
    var t = n.product.refProductKey, i = !0, a = 0, u = l.dcp, c = u.detect, d = function(v) {
      return !!(n.isArray(v) && v.length > 0 && v[0]) && (u._setDefaultValuesFromServer(v), c.dcpStatus = c.EnumDCP_DetectStatus.UpdateSkipped, u._sendStatusEvent(), setTimeout(o, 0), !0);
    }, _ = function v(T, M) {
      if (++a >= c.IMAXCONNECTCOUNT ? (c.bConnected = !1, c.dcpStatus = c.EnumDCP_DetectStatus.NotInstalled, u._sendStatusEvent()) : setTimeout(function() {
        l.DWT.ConnectWithSocket && l.navInfoSync.bHTML5Edition ? u._checkManagerVersionWS(t, d, v) : u._checkManagerVersion(t, d, v);
      }, 1e3), i) {
        if (n.isFunction(e)) {
          var A = {};
          n.Errors.Uploader_ModuleError(A), e(A._errorCode, A._errorString);
        }
        return i = !1, !1;
      }
      return !0;
    };
    c.bConnected = !1, l.DWT.ConnectWithSocket && l.navInfoSync.bHTML5Edition ? u._checkManagerVersionWS(t, d, _) : u._checkManagerVersion(t, d, _);
  }
  if (n.LS = km, l.DWT.NetManager.checkModuleManager = Jh, n.product.bHTML5Edition) {
    var fu, Xh = function() {
      try {
        if ((typeof WebAssembly > "u" ? "undefined" : gi(WebAssembly)) === "object" && typeof WebAssembly.instantiate == "function") {
          var o = new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0]));
          if (o instanceof WebAssembly.Module)
            return new WebAssembly.Instance(o) instanceof WebAssembly.Instance;
        }
      } catch {
      }
      return !1;
    }, xm = function(o, e, r) {
      var t = { id: o.WebTwainId, width: o.Width, height: o.Height }, i = o.iServiceType;
      o.Container ? (t.container = o.Container, t.containerId = o.Container.id) : o.ContainerId && (t.container = n.get(o.ContainerId), t.containerId = o.ContainerId), Xn(t.id) || (vn(n.get(t.containerId)) ? t.id = t.containerId : t.id = t.containerId = "dwtcontrolContainer"), function(d) {
        var _ = d || {};
        _.basePath && (n.env.basePath = _.basePath), _.pathType && (n.env.pathType = _.pathType), n.isUndefined(_.bDiscardBlankImage) || (n.config.bDiscardBlankImage = _.bDiscardBlankImage), _.msgPrefix && (n.config.msgPrefix = _.msgPrefix), _.msgSuffix && (n.config.msgSuffix = _.msgSuffix), _.detectType && (n.detect.detectType = _.detectType), _.tryTimes && (n.detect.tryTimes = _.tryTimes), _.onReady && (l.DWT.OnWebTwainReady = _.onReady);
        var v = l.DWT.RemoteScanConfig;
        v || (v = { sessionTimeout: 300, keepAwake: !0 }, l.DWT.RemoteScanConfig = v), v.keepAwake === void 0 && (v.keepAwake = !0);
      }(t);
      var a, u, c = i == hr;
      for (n.mix(t, c ? { iServiceType: i } : { host: o.host, port: o.port, HTTPPort: n.detect.ssl ? 443 : 80, iServiceType: i }), t.onReady = function(d) {
        if (!d)
          return delete l.DWT.ContainerMap[t.id], !1;
        n.replaceControl(t.id, d), n.isFunction(e) && e(d);
      }, t.onCreateError = function(d) {
        delete l.DWT.ContainerMap[t.id], n.isFunction(r) && r(d);
      }, a = 0; a < n.detect.arySTwains.length; a++)
        u = n.detect.arySTwains[a], t.id == u._id && (t.id = t.id + "_" + n.getRandom()), !u._containerElement || t.container != u._containerElement && t.containerId != u._containerElement.id || (t.containerId = "");
      return function(d) {
        var _, v;
        for (v = 0; v < n.detect.arySTwains.length; v++)
          if (n.detect.arySTwains[v]._id == d.id)
            return void (d.bNoMask || n.closeLoadingMsg());
        return vn(d.container) ? d.bNoViewer = !1 : d.bNoViewer = !0, (_ = new Fh(d))._isTwainServiceType() || _._isDMServiceType() || _._isWasmWithScan() ? (n.detect.arySTwains.push(_), n.detect.bFirst && n._init(d), n.detect.bFirst = !1) : _._OnReady(), _;
      }(t);
    }, Qh = function() {
      var o, e, r, t, i;
      if (l.DWT.lunload(), n.closeAll && n.closeAll(), t = l.DWT.ContainerMap)
        for (i = Object.keys(t), o = 0; o < i.length; o++)
          (r = i[o]) && r in t && (e = t[r]) && (e.__unload(), delete t[r]);
      for (o = 0; o < n.product.unloadQueue.length; o++) {
        var a = n.product.unloadQueue[o];
        n.isFunction(a) && a();
      }
      return n.product.unloadQueue.splice(0), l.DWT.DynamicContainers.splice(0), n.detect.arySTwains.splice(0), l.Lib.detect.bNeedWasm = !1, n.MobileFuns ? n.MobileFuns.unloadWasm() : n.Promise.resolve();
    }, Mm = function(o) {
      var e = l.DWT.Containers;
      if (e && o) {
        var r = e.length;
        (Am += 1) >= r && function(t) {
          var i, a, u, c, d = l.DWT.Containers, _ = n.Promise.resolve(0), v = l.DWT.licenseException, T = v.code != 0;
          if (T) {
            var M = n.getLogger();
            M && M.error(v.message);
          }
          if (d && d.length > 0) {
            if (T || gu.DCP_DWT_OnClickCloseInstall(!1, !0), n.isUndefined(t))
              for (a = 0; a < d.length && !(n.product.bHTML5Edition && Xn(u = d[a].WebTwainId) && (c = l.DWT.ContainerMap[u])); a++)
                ;
            else
              c = t;
            c && (n.product.bHTML5Edition ? (c._isTwainServiceType() || c._isDMServiceType()) && (_ = c._innerFunRawV2("LogLevel").then(function() {
              lu(c);
            }, function() {
              c._errorCode == -2207 && (n.isFunction(l.DWT.OnWebTwainNeedUpgradeWebJavascript) ? l.DWT.OnWebTwainNeedUpgradeWebJavascript(c.ErrorString) : n.detect.bPromptJSOrServerOutdated || (n.detect.bPromptJSOrServerOutdated = Gt)), lu(c);
            })) : lu(c));
          }
          var A = [], S = !1;
          for (n.License.isLTS() && n.isNumber(v.code) && v.code !== 0 && v.fromLTS === !0 && (S = !0), a = 0; a < d.length; a++)
            n.product.bHTML5Edition && (u = d[a].WebTwainId), (i = l.DWT.ContainerMap[u]) && (S ? n.hide(i._containerElement) : n.product.bHTML5Edition && (i._isBindViewer() && (i.Width <= 0 || i.Height <= 0) && (i.Width <= 0 && (i.Width = 270), i.Height <= 0 && (i.Height = 350)), i._isTwainServiceType() || i._isDMServiceType() ? A.push(Bh(i)) : T || n.License.checkProductKey(i, { Core: !0 }))), i = null;
          A.length > 0 && (_ = _.then(function() {
            return l.Lib.Promise.all(A);
          })), d = null, S ? (l.DWT.ContainerMap = {}, n.detect.arySTwains.splice(0)) : _ = _.then(function() {
            n.isFunction(l.DWT.OnWebTwainReady) ? l.DWT.OnWebTwainReady() : n.isFunction(gu.Dynamsoft_OnReady) && gu.Dynamsoft_OnReady();
          }, function(V) {
            n.error(V);
          });
        }(o);
      }
    }, Pm = function(o) {
    }, Zh = function() {
      l.DWT.ShowMessage(l.MSG.Err_BrowserNotSupportWasm, { width: 510, headerStyle: 2 });
    }, qh = function(o, e, r) {
      if (n.openLoadingMsg(), n.isUndefined(o.UseLocalService))
        o.UseLocalService = n.product.UseLocalService;
      else if (!(o.UseLocalService && l.navInfoSync.bAndroid)) {
        if (o.UseLocalService && n.env.bMobile) {
          var t = l.MSG.Err_ServiceModeNotSupportMobile;
          return r && r(t), n.closeLoadingMsg(), vt;
        }
      }
      n.License.isLicenseMixed(null, !0) || l.Lib.License.reparseProductKey();
      var i = l.DWT.licenseException;
      if (i.code != 0)
        return n.License.showLicenseErrorDialog(i), n.closeLoadingMsg(), vt;
      if (o.UseLocalService === !1 && !Xh())
        return n.closeLoadingMsg(), Zh(), r && r(l.MSG.Err_BrowserNotSupportWasm), vt;
      var a, u, c = {}, d = o.WebTwainId, _ = o.Host, v = o.Port, T = o.PortSSL;
      return !n.product._srcUseLocalService && o.UseLocalService && (n.detect.dcpStatus = 0, n.product._srcUseLocalService = !0), o.Container ? (a = o.Container, c.container = o.Container, c.bNoViewer = !1, (u = c.container.id) !== fu && u !== null && u !== "" || (c.container.id = ["dwt_", n.getRandom()].join("")), c.containerId = c.container.id, c.id = d === fu || d === null || d === "" ? c.container.id : d) : d === fu || d === null || d === "" ? (c.id = ["dwt_", n.getRandom()].join(""), c.bNoViewer = !0) : n.isString(d) && n.get(d) ? (c.id = d, c.containerId = d, a = n.get(d), c.bNoViewer = !1) : (c.id = d, c.bNoViewer = !0), c.bNoViewer ? (c.width = 0, c.height = 0) : (n.isUndefined(o.Width) ? a && a.style.width ? c.width = a.style.width : c.width = 300 : c.width = o.Width, n.isUndefined(o.Height) ? a && a.style.height ? c.height = a.style.height : c.height = 300 : c.height = o.Height), o.UseLocalService ? (l.navInfoSync.bAndroid ? (c.iServiceType = Zn, n.detect.bNeedWasm = !0) : c.iServiceType = Vr, c.dmService = o.dmService) : (c.iServiceType = hr, n.detect.bNeedWasm = !0), c.iServiceType != Vr && c.iServiceType != Zn || (n.isString(_) && _ != "" || (_ = K()), c.host = _, $h.bSSL ? (T || (T = l.DWT.SSLPort), c.port = T) : (v || (v = l.DWT.Port), c.port = v)), us().then(Qs).then(function() {
        return new n.Promise(function(M, A) {
          Yh({ host: c.host, port: c.port, iServiceType: c.iServiceType, serviceModeCallback: function(S, V) {
            rl(c, M, function(ne, z, ue) {
              ue && (z && z._bReady || l.DWT.licenseException == 0 && zh(z)), r && r(ne), z && z.__unload(), A();
            });
          }, wasmModeCallback: function() {
            rl(c, M, function(S, V) {
              r && r(S), V && V.__unload(), A();
            });
          }, dcpFailedCallback: function(S) {
            r && r(S), A();
          } });
        });
      }).then(function(M) {
        n.closeLoadingMsg(), n.isFunction(e) && e(M);
      }, function(M) {
        n.closeLoadingMsg();
      }), Gt;
    }, $h = l.navInfoSync, gu = n.win, ul = l.Lib.timestamp;
    gu.addEventListener("beforeunload", function() {
      l.Lib.page.bUnload = !0, l.DWT.Unload(), l.Lib.page.OnUnload && l.Lib.page.OnUnload();
    }), gu.addEventListener("unload", function() {
      l.DWT.Unload();
    }), n.replaceControl = function(o, e) {
      l.DWT.ContainerMap[o] = e;
    }, n.detect.onNoControl = function(o, e, r, t) {
      t && t._bRemoteMode && !t._bNotShowMessage ? n.isFunction(l.OnRemoteWebTwainNotFoundCallback) && l.OnRemoteWebTwainNotFoundCallback(n.product.name, t._serverInfo.server, t._serverInfo.port, t._serverInfo.ssl, n.env.bMobile) : (l.DWT.licenseException.code != 0 || n.detect.bOK || n.asyncQueue.pushToDo(null, l.DWT.Load), n.product.bHTML5Edition ? l.DWT.CheckWebTwainBySocket(function() {
        l.DWT.NeedCheckWebTwainBySocket() ? n.isFunction(l.OnHTTPCorsError) && l.OnHTTPCorsError() : Zs(o, e, r, !1, !0);
      }, function() {
        Zs(o, e, r, !0, !0);
      }, function() {
        Zs(o, e, r, !1, !1);
      }) : Zs(o, e, r, !1, !0));
    }, l.DWT.Unload = function() {
      Qh();
      try {
        n.closeLoadingMsg(), l.DWT.CloseDialog(), n._zdgb_xkz_dhk(), n.closeProgress(null, ""), n.hideMask(), function() {
          for (var o, e, r, t = ["dynamsoft.webtwain.install.js", "dynamsoft.viewer.js", "dynamsoft.imageio.js", "dynamsoft.lts.js", "dynamsoft.viewer.css", "dynamsoft.webtwain.css"], i = document.head.childNodes, a = i.length - 1; a >= 0; a--)
            if ((e = i[a]).tagName == "LINK" ? r = e.href : e.tagName == "SCRIPT" && (r = e.src), r)
              for (o = 0; o < t.length; o++)
                r.indexOf(t[o]) >= 0 && e.remove();
          n.detect.cssLoaded = !1;
        }();
      } catch {
      }
      l.Lib.product.bDWTLoading = !1;
    };
    var Am = 0, ef = function() {
      var o = Ln(he.mark(function e(r, t, i) {
        var a, u, c, d, _;
        return he.wrap(function(v) {
          for (; ; )
            switch (v.prev = v.next) {
              case 0:
                if (a = l.DWT.Containers, d = !1, i == hr && (d = !0), a && a.length !== 0) {
                  v.next = 6;
                  break;
                }
                return n.closeLoadingMsg(), n.log("Dynamsoft.DWT.Containers was not set."), v.abrupt("return");
              case 6:
                u = 0;
              case 7:
                if (!(u < a.length)) {
                  v.next = 21;
                  break;
                }
                if (c = n.clone(a[u]), vn(n.get(c.ContainerId)) || (c.bNoViewer = !0), c.iServiceType = i, _ = !d, c.bLocalService !== void 0 ? _ = !!c.bLocalService : c.UseLocalService !== void 0 && (_ = !!c.UseLocalService), _ && (c.host = r, c.port = t), !l.DWT.ContainerMap[c.WebTwainId]) {
                  v.next = 17;
                  break;
                }
                return v.abrupt("continue", 18);
              case 17:
                xm(c, Mm, Pm);
              case 18:
                u++, v.next = 7;
                break;
              case 21:
                if (d || !(n.detect.arySTwains.length > 0)) {
                  v.next = 24;
                  break;
                }
                return v.next = 24, n.startCheckWS();
              case 24:
              case "end":
                return v.stop();
            }
        }, e);
      }));
      return function(e, r, t) {
        return o.apply(this, arguments);
      };
    }();
    l.DWT.Load = function() {
      return n.product.bDWTLoading ? n.Promise.resolve() : (n.product.bDWTLoading = Gt, n.openLoadingMsg(), Ds().then(us).then(Qs).then(Qh).then(function() {
        l.DWT.CloseDialog();
      }).then(l.DWT._innerLoad).then(function() {
        n.product.bDWTLoading = !1, n.closeLoadingMsg();
      }, function(o) {
        return n.product.bDWTLoading = !1, n.closeLoadingMsg(), n.log(o), n.Promise.reject(o);
      }));
    }, l.DWT.CheckConnectToTheService = function(o, e, r, t) {
      var i = 0, a = o, u = e, c = r, d = t;
      if (n.isFunction(a) && n.isFunction(u)) {
        for (c = a, d = u, a = K(), i = 0; i < l.Lib.detect.ports.length; i++)
          if (l.navInfoSync.bSSL && l.Lib.detect.ports[i].ssl || !l.navInfoSync.bSSL && !l.Lib.detect.ports[i].ssl) {
            u = l.Lib.detect.ports[i].port;
            break;
          }
      }
      a || (a = K()), l.navInfoSync.bAndroid ? oo().then(c, d) : Kh(a, u, vo, function(_, v, T, M) {
        if (_ === ol && M && M.length > 0 && ed(M, n.product.getServerVersionInfo(!0)))
          return l.DWT.CloseDialog(), void (n.isFunction(c) && c(v, T));
        n.isFunction(d) && d();
      });
    }, l.DWT.ConnectToTheService = function() {
      n.asyncQueue.start();
    }, l.DWT.CreateDWTObject = function(o, e, r, t, i, a) {
      var u, c = i, d = a, _ = arguments;
      if (!n.product.loadResourcePath)
        return n.openLoadingMsg(), void Ds().then(us).then(function() {
          setTimeout(function() {
            l.DWT.CreateDWTObject(o, e, r, t, i, a);
          }, 100);
        }, function() {
          n.closeLoadingMsg();
        });
      n.isFunction(e) && n.isFunction(r) && n.isUndefined(t) && n.isUndefined(i) && n.isUndefined(a) ? (c = e, d = r, u = { WebTwainId: o, Host: l.DWT.Host, Port: l.DWT.Port, PortSSL: l.DWT.SSLPort, UseLocalService: n.product.UseLocalService }) : u = { WebTwainId: o, Host: e, Port: r, PortSSL: t, UseLocalService: n.product.UseLocalService };
      var v = o;
      if (n.isString(v) && (v = n.get(v)), n.isShadowRoot(v)) {
        var T = document.createElement("div");
        v.appendChild(T), v = T;
      }
      if (n.isDOM(v)) {
        var M = n.getShadowRoot(v);
        if (M) {
          var A = document.createElement("style");
          A.innerHTML = ['@import url("', l.DWT.ResourcesPath, "/src/dynamsoft.viewer.css", ul, '")'].join(""), M.appendChild(A);
        }
        u.Container = v, v.id && v.id != "" || (v.id = ["dwt_", n.getRandom()].join("")), u.WebTwainId = v.id;
      } else {
        if (!n.isString(o))
          return n.isFunction(d) && d(n.Errors.container_id_not_string()), vt;
        if (!n.get(o))
          return n.isFunction(d) && d(n.Errors.container_id_not_exist(o)), vt;
      }
      return qh(u, c, function(S) {
        l.DWT.licenseException.code != 0 || n.detect.bOK || (n.asyncQueue.stop(), n.asyncQueue.pushToDo(null, l.DWT.CreateDWTObject, _)), d(S);
      });
    }, l.DWT.CreateDWTObjectEx = function(o, e, r) {
      var t = o.Container, i = arguments;
      if (!n.product.loadResourcePath)
        return n.openLoadingMsg(), void Ds().then(us).then(function() {
          n.closeLoadingMsg(), setTimeout(function() {
            l.DWT.CreateDWTObjectEx(o, e, r);
          }, 100);
        }, function() {
          n.closeLoadingMsg();
        });
      if (n.isShadowRoot(t)) {
        var a = document.createElement("div");
        t.appendChild(a), t = a;
      }
      if (n.isDOM(t)) {
        var u = n.getShadowRoot(t);
        if (u) {
          var c = document.createElement("style");
          c.innerHTML = ['@import url("', l.DWT.ResourcesPath, "/src/dynamsoft.viewer.css", ul, '")'].join(""), u.appendChild(c);
        }
        u == t && (t = document.createElement("div"), u.appendChild(t), o.Container = t), t.id && t.id != "" || (t.id = ["dwt_", n.getRandom()].join("")), n.isString(o.WebTwainId) || (o.WebTwainId = t.id);
      } else if (!n.isString(o.WebTwainId))
        return r && r(n.Errors.webtwain_id_not_string()), vt;
      return qh(o, e, function(d) {
        l.DWT.licenseException.code != 0 || n.detect.bOK || (n.asyncQueue.stop(), n.asyncQueue.pushToDo(null, l.DWT.CreateDWTObjectEx, i)), n.isFunction(r) && r(d);
      });
    }, l.DWT.CreateRemoteScanObjectAsync = function(o) {
      return fr("CreateRemoteScanObjectAsync", null), nl(o, !1).then(function(e) {
        if (Yn("CreateRemoteScanObjectAsync"), e && !e._blts && !n.License.checkLocalPlatformForRemoteService(e)) {
          var r = { code: e._errorCode, message: e._getErrorString() };
          throw e && e.__unload(), r;
        }
        var t = new Cm(e);
        return Object.preventExtensions(t), t;
      }, function(e) {
        throw Yn("CreateRemoteScanObjectAsync"), e;
      });
    }, l.DWT._innerLoad = Ln(he.mark(function o() {
      var e, r, t, i, a, u, c, d, _, v, T, M, A, S;
      return he.wrap(function(V) {
        for (; ; )
          switch (V.prev = V.next) {
            case 0:
              if (n.page.bUnload = vt, n.product.bHTML5Edition) {
                V.next = 3;
                break;
              }
              return V.abrupt("return", vt);
            case 3:
              if (n.License.isLicenseMixed(null, !0) || l.Lib.License.reparseProductKey(), (e = l.DWT.licenseException).code == 0) {
                V.next = 8;
                break;
              }
              return n.License.showLicenseErrorDialog(e), V.abrupt("return", n.Promise.reject({ code: e.code, message: e.message }));
            case 8:
              if (n.product.UseLocalService && !l.Lib.detect.bMobile || l.WasmEnv && !l.WasmEnv.wasmLoad && (l.Lib.License.isLTS() || kn()), r = l.DWT.Containers, u = [], !r) {
                V.next = 30;
                break;
              }
              t = 0;
            case 12:
              if (!(t < r.length)) {
                V.next = 30;
                break;
              }
              a = r[t], c = a.Container, n.isShadowRoot(c) && (d = document.createElement("div"), c.appendChild(d), c = d), n.isDOM(c) && ((_ = n.getShadowRoot(c)) && ((v = document.createElement("style")).innerHTML = ['@import url("', l.DWT.ResourcesPath, "/src/dynamsoft.viewer.css", ul, '")'].join(""), _.appendChild(v)), c.id && c.id != "" || (c.id = ["dwt_", n.getRandom()].join("")), a.ContainerId = c.id), (n.isString(a.WebTwainId) || n.isNumber(a.WebTwainId)) && a.WebTwainId != "" || (n.isString(a.ContainerId) && a.ContainerId != "" ? a.WebTwainId = a.ContainerId : a.WebTwainId = ["dwt_", n.getRandom()].join("")), i = 0;
            case 19:
              if (!(i < u.length)) {
                V.next = 26;
                break;
              }
              if (a.WebTwainId != u[i]) {
                V.next = 23;
                break;
              }
              return a.WebTwainId = a.WebTwainId + "_" + n.getRandom(), V.abrupt("break", 26);
            case 23:
              i++, V.next = 19;
              break;
            case 26:
              u.push(a.WebTwainId);
            case 27:
              t++, V.next = 12;
              break;
            case 30:
              if (!n.IsNeedLoadWasm()) {
                V.next = 35;
                break;
              }
              if (Xh()) {
                V.next = 34;
                break;
              }
              return Zh(), V.abrupt("return", vt);
            case 34:
              n.detect.bNeedWasm = !0;
            case 35:
              if (T = n.product.UseLocalService ? l.navInfoSync.bAndroid ? Zn : Vr : hr, V.prev = 36, T != Vr && T != Zn) {
                V.next = 48;
                break;
              }
              return M = l.DWT.Host, A = l.DWT.Port, A = $h.bSSL ? l.DWT.SSLPort : l.DWT.Port, V.next = 43, new n.Promise(function(ne, z) {
                Yh({ host: M, port: A, iServiceType: T, serviceModeCallback: function(ue, xe) {
                  ne({ host: ue, port: xe });
                }, wasmModeCallback: function() {
                  ne();
                }, dcpFailedCallback: function(ue) {
                  z(ue);
                } });
              });
            case 43:
              return S = V.sent, V.next = 46, ef(S.host, S.port, T);
            case 46:
              V.next = 50;
              break;
            case 48:
              return V.next = 50, ef(fu, fu, T);
            case 50:
              V.next = 54;
              break;
            case 52:
              V.prev = 52, V.t0 = V.catch(36);
            case 54:
            case "end":
              return V.stop();
          }
      }, o, null, [[36, 52]]);
    })), l.DWT.DeleteDWTObject = function(o) {
      var e, r = l.DWT.ContainerMap;
      if (!n.product.bHTML5Edition)
        return vt;
      if (r && o in r) {
        var t = r[o];
        t && (delete r[o], t.__unload());
      }
      for (e = 0; e < l.DWT.DynamicContainers.length; e++)
        if (l.DWT.DynamicContainers[e].WebTwainId == o) {
          l.DWT.DynamicContainers.splice(e, 1);
          break;
        }
      return n.closeLoadingMsg(), Gt;
    }, l.DWT.GetWebTwain = function(o) {
      var e, r, t, i, a = o;
      if (e = l.DWT.Containers, n.isString(a))
        a = n.get(a);
      else if (!n.isDOM(a)) {
        if (!a && e && e.length > 0)
          for (t = 0; t < e.length; t++) {
            if (e[t].Container) {
              a = e[t].Container;
              break;
            }
            if (e[t].ContainerId && vn(n.get(e[t].ContainerId))) {
              a = n.get(e[t].ContainerId);
              break;
            }
          }
      }
      var u = l.DWT.ContainerMap;
      if (a && u && e && e.length > 0) {
        for (t = 0; t < e.length; t++)
          if (i = !1, (r = e[t]).Container) {
            if (r.Container == a && (i = Xn(r.WebTwainId) ? r.WebTwainId : r.Container.id) && i in u)
              return u[i];
          } else if (r.ContainerId && r.ContainerId == a.id && (i = Xn(r.WebTwainId) ? r.WebTwainId : r.ContainerId) && i in u)
            return u[i];
      }
      return l.DWT.GetWebTwainEx(o);
    }, l.DWT.GetWebTwainEx = function(o) {
      var e, r, t = o;
      if (e = l.DWT.DynamicContainers, n.isDOM(t))
        t = t.id;
      else if (!t && e && e.length > 0) {
        for (r = 0; r < e.length; r++)
          if (Xn(e[r].WebTwainId)) {
            t = e[r].WebTwainId;
            break;
          }
      }
      if (e = null, t) {
        var i = l.DWT.ContainerMap;
        if (i && t in i)
          return i[t];
      }
      return null;
    };
  }
  if (n.product.bActiveXEdition) {
    var tf = function() {
      var o, e, r, t, i;
      if (l.DWT.lunload(), n.closeAll && n.closeAll(), t = l.DWT.ContainerMap)
        for (i = Object.keys(t), o = 0; o < i.length; o++)
          (r = i[o]) && r in t && (e = t[r]) && (e.__unload(), delete t[r]);
      for (o = 0; o < n.product.unloadQueue.length; o++) {
        var a = n.product.unloadQueue[o];
        n.isFunction(a) && a();
      }
      return n.product.unloadQueue.splice(0), n.detect.arySTwains.splice(0), n.Promise.resolve();
    }, Uu = !1;
    l.DWT.Unload = function() {
      tf();
      try {
        n.closeLoadingMsg(), l.DWT.CloseDialog(), n._zdgb_xkz_dhk(), n.closeProgress(null, ""), n.hideMask();
      } catch {
      }
    }, l.DWT.Load = function() {
      if (!n.product.bDWTLoading) {
        n.product.bDWTLoading = !0, n.License.isLicenseMixed(null, !0) || l.Lib.License.reparseProductKey();
        var o = l.DWT.licenseException;
        return o.code != 0 ? (n.License.showLicenseErrorDialog(o), n.closeLoadingMsg(), n.Promise.reject({ code: o.code, message: o.message })) : (n.openLoadingMsg(), l.Lib.detect.bNeedWasm = Uu, n.detect.axAutoLoadDone = !1, Ds().then(us).then(tf).then(function() {
          return l.DWT._innerLoad();
        }).then(function() {
          n.product.bDWTLoading = !1, n.detect.axAutoLoadDone = !0, n.closeLoadingMsg();
        }, function(e) {
          n.product.bDWTLoading = !1, n.detect.axAutoLoadDone = !1, n.closeLoadingMsg(), n.log(e);
        }));
      }
    }, l.DWT.ConnectToTheService = l.DWT.Load, l.DWT.CheckConnectToTheService = function(o, e, r, t) {
      n.product.bActiveXEdition ? n.isFunction(t) && t() : n.isFunction(r) && r();
    }, l.DWT.CreateDWTObject = function(o, e, r, t, i, a) {
      return n._safePromptCustomMsg(function() {
        a && a(l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT);
      }), Uu;
    }, l.DWT.CreateDWTObjectEx = function(o, e, r) {
      return n._safePromptCustomMsg(function() {
        r && r(l.Lib.product.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT);
      }), Uu;
    }, l.DWT.CreateRemoteScanObjectAsync = function() {
      var o = {};
      return n.Errors.ActiveXNotSupport(o), n.Promise.reject({ code: o._errorCode, message: o._errorString });
    }, l.DWT.DeleteDWTObject = function(o) {
      if (n.product.bActiveXEdition)
        return Uu;
    };
  }
  function nf(o, e) {
    o.acquireImage = function() {
      var r = Ln(he.mark(function t(i, a) {
        var u, c, d, _, v, T, M, A, S, V, ne;
        return he.wrap(function(z) {
          for (; ; )
            switch (z.prev = z.next) {
              case 0:
                if (u = this.deviceType, c = this.serviceInfo, d = i ? n.clone(i) : {}, _ = !0, a) {
                  z.next = 3;
                  break;
                }
                throw n.Errors.ThrowInvalidParameterSendTo();
              case 3:
                if (v = l.DWT.RemoteScanConfig, T = hn(), fr("acquireImage", a), z.prev = 6, v && Tt(v.keepAwake), (u & Xt) != Xt && (u & dn) != dn) {
                  z.next = 22;
                  break;
                }
                return A = new Wa((c == null || (M = c.attrs) === null || M === void 0 ? void 0 : M.url) || (c == null ? void 0 : c.server), e), z.prev = 10, z.delegateYield(he.mark(function ue() {
                  var xe, Fe, Qe, Ze, Ct;
                  return he.wrap(function(it) {
                    for (; ; )
                      switch (it.prev = it.next) {
                        case 0:
                          return it.next = 2, hc(null, A, c, e);
                        case 2:
                          return it.sent, it.next = 5, A.acquireImage(o, d, !1);
                        case 5:
                          xe = it.sent, Fe = 0, Ze = iu(u);
                        case 8:
                          return it.prev = 8, it.next = 11, A.getImageToDWT(xe, Ze);
                        case 11:
                          Qe = it.sent, it.next = 21;
                          break;
                        case 14:
                          if (it.prev = 14, it.t0 = it.catch(8), Fe != 0) {
                            it.next = 20;
                            break;
                          }
                          throw Ct = {}, n.Errors.SourceHasNothingToCapture(Ct), { code: Ct._errorCode, meesage: Ct._errorString };
                        case 20:
                          throw it.t0;
                        case 21:
                          if (!Qe) {
                            it.next = 24;
                            break;
                          }
                          return it.next = 24, new n.Promise(function(Bt, yt) {
                            a._innerLoadImageFromBinary(Qe, qu, !1, function(en, Ft) {
                              var st, nt;
                              n.log("LoadImageFromBinary success"), st = n.isArray(Ft.metaData) && Ft.metaData.length > 0 ? Ft.metaData[0] : { id: Ft.ids }, nt = { imageId: parseInt(st.id) }, d.IfGetImageInfo !== !1 && (nt.imageInfo = { XResolution: st.resolutionX, YResolution: st.resolutionY, ImageWidth: st.width, ImageLength: st.height, BitsPerPixel: st.bitDepth }), n.isFunction(a._OnPostTransferAsync) && a._OnPostTransferAsync([!0, n.stringify(nt)]), Bt();
                            }, function(en, Ft) {
                              n.log(Ft), yt({ code: en, message: Ft });
                            });
                          });
                        case 24:
                          Fe++;
                        case 25:
                          if (Qe) {
                            it.next = 8;
                            break;
                          }
                        case 26:
                        case "end":
                          return it.stop();
                      }
                  }, ue, null, [[8, 14]]);
                })(), "t0", 12);
              case 12:
                z.next = 17;
                break;
              case 14:
                throw z.prev = 14, z.t1 = z.catch(10), z.t1;
              case 17:
                z.prev = 17;
                try {
                  A._bInited && A.dispose();
                } catch {
                }
                return z.finish(17);
              case 20:
                z.next = 59;
                break;
              case 22:
                if (c == null || (S = c.attrs) === null || S === void 0 || !S.url) {
                  z.next = 59;
                  break;
                }
                return (V = yu(c)).attrs = V.attrs || {}, V.attrs.bNoMask = !0, V.attrs.bNotShowMessage = !0, z.prev = 27, z.next = 30, Nh(V, !0);
              case 30:
                if (!(ne = z.sent)._bRemoteMode) {
                  z.next = 36;
                  break;
                }
                return z.next = 34, ne.selectDevice(o);
              case 34:
                z.next = 38;
                break;
              case 36:
                return z.next = 38, ne.SelectDeviceAsync(o);
              case 38:
                return z.next = 40, ne._acquireImageAsync("acquireImage", d, a);
              case 40:
                z.sent, z.next = 46;
                break;
              case 43:
                throw z.prev = 43, z.t2 = z.catch(27), z.t2;
              case 46:
                if (z.prev = 46, !ne) {
                  z.next = 56;
                  break;
                }
                return z.prev = 48, z.next = 51, ne._closeSourceAsync("");
              case 51:
                z.next = 55;
                break;
              case 53:
                z.prev = 53, z.t3 = z.catch(48);
              case 55:
                ne.dispose();
              case 56:
                return z.finish(46);
              case 57:
                z.next = 59;
                break;
              case 59:
                z.next = 65;
                break;
              case 61:
                throw z.prev = 61, z.t4 = z.catch(6), _ = !1, z.t4;
              case 65:
                return z.prev = 65, Yn("acquireImage"), Tt(T), z.finish(65);
              case 69:
                return z.abrupt("return", _);
              case 70:
              case "end":
                return z.stop();
            }
        }, t, this, [[6, 61, 65, 69], [10, 14, 17, 20], [27, 43, 46, 57], [48, 53]]);
      }));
      return function(t, i) {
        return r.apply(this, arguments);
      };
    }();
  }
  n.addDeviceAcquireMethod = nf, l.DWT.FindDynamsoftServiceAsync = function() {
    var o = Ln(he.mark(function e(r, t) {
      var i, a, u, c, d;
      return he.wrap(function(_) {
        for (; ; )
          switch (_.prev = _.next) {
            case 0:
              if (!n.product.bActiveXEdition) {
                _.next = 4;
                break;
              }
              return i = {}, n.Errors.ActiveXNotSupport(i), _.abrupt("return", n.Promise.reject({ code: i._errorCode, message: i._errorString }));
            case 4:
              if (!(r && n.isString(r) && n.startsWith(location.href, "https://") && n.startsWith(r, "http://"))) {
                _.next = 8;
                break;
              }
              return a = {}, n.Errors.HTTPSRequired(a, location.href, r), _.abrupt("return", n.Promise.reject({ code: a._errorCode, message: a._errorString }));
            case 8:
              if (n.isString(r) && r != "") {
                _.next = 12;
                break;
              }
              return u = {}, n.Errors.InvalidServerUrl(u), _.abrupt("return", n.Promise.reject(yr(u)));
            case 12:
              return c = [], d = new Wa(r, !0), fr("FindDynamsoftServiceAsync", null), _.prev = 14, _.next = 17, d.getDynamsoftService(t);
            case 17:
              c = _.sent, _.next = 23;
              break;
            case 20:
              throw _.prev = 20, _.t0 = _.catch(14), _.t0;
            case 23:
              _.prev = 23, Yn("FindDynamsoftServiceAsync");
              try {
                d._bInited && d.dispose();
              } catch {
              }
              return _.finish(23);
            case 27:
              return _.abrupt("return", c);
            case 28:
            case "end":
              return _.stop();
          }
      }, e, null, [[14, 20, 23, 27]]);
    }));
    return function(e, r) {
      return o.apply(this, arguments);
    };
  }(), l.DWT.FindDevicesAsync = function() {
    var o = Ln(he.mark(function e(r, t, i, a) {
      var u, c, d, _, v, T, M, A, S, V, ne, z, ue, xe, Fe, Qe, Ze, Ct, it, Bt, yt, en, Ft, st;
      return he.wrap(function(nt) {
        for (; ; )
          switch (nt.prev = nt.next) {
            case 0:
              if (u = [], c = "FindDevicesAsync", d = [], M = !1, A = t ?? an, !n.product.bActiveXEdition) {
                nt.next = 5;
                break;
              }
              return V = {}, n.Errors.ActiveXNotSupport(V), nt.abrupt("return", n.Promise.reject({ code: V._errorCode, message: V._errorString }));
            case 5:
              if (!(r && n.isString(r) && n.startsWith(location.href, "https://") && n.startsWith(r, "http://"))) {
                nt.next = 9;
                break;
              }
              return ne = {}, n.Errors.HTTPSRequired(ne, location.href, r), nt.abrupt("return", n.Promise.reject({ code: ne._errorCode, message: ne._errorString }));
            case 9:
              if (!(r instanceof ki)) {
                nt.next = 12;
                break;
              }
              nt.next = 16;
              break;
            case 12:
              if (n.isString(r) && r != "") {
                nt.next = 16;
                break;
              }
              return z = {}, n.Errors.InvalidServerUrl(z), nt.abrupt("return", n.Promise.reject(yr(z)));
            case 16:
              if (fr(c, null), nt.prev = 17, !n.isString(r)) {
                nt.next = 50;
                break;
              }
              if (ue = r, !(n.startsWith(ue, "127.0.0.1") || n.startsWith(ue, "http://127.0.0.1") || n.startsWith(ue, "https://127.0.0.1"))) {
                nt.next = 44;
                break;
              }
              if (l.navInfoSync.bAndroid || (M = !0), ft = void 0, Pt = void 0, Ot = void 0, ft = K(), Pt = Y(), Ot = ma(new vi(ft, Pt, n.detect.ssl)), xe = { server: Ot, attrs: { url: Ot, UUID: "", service_type: vr } }, !n.env.bMobile) {
                nt.next = 30;
                break;
              }
              if (!l.navInfoSync.bAndroid) {
                nt.next = 27;
                break;
              }
              nt.next = 28;
              break;
            case 27:
              throw n.Errors.ThrowMobileNotSupportOS(c);
            case 28:
              nt.next = 31;
              break;
            case 30:
              d.push(xe);
            case 31:
              return nt.prev = 31, nt.next = 34, oo();
            case 34:
              nt.next = 41;
              break;
            case 36:
              return nt.prev = 36, nt.t0 = nt.catch(31), Yn(c), jh(), nt.abrupt("return", u);
            case 41:
              T = xe.server, nt.next = 48;
              break;
            case 44:
              return T = r, nt.next = 47, l.DWT.FindDynamsoftServiceAsync(r);
            case 47:
              d = nt.sent;
            case 48:
              nt.next = 51;
              break;
            case 50:
              r instanceof ki && (M = !0, Qe = r == null || (Fe = r.attrs) === null || Fe === void 0 ? void 0 : Fe.service_type, vr == Qe && d.push(r));
            case 51:
              _ = 0;
            case 52:
              if (!(_ < d.length)) {
                nt.next = 86;
                break;
              }
              return Ze = yu(d[_]), Ct = void 0, it = void 0, nt.prev = 54, Ze.attrs = Ze.attrs || {}, Ze.attrs.bNoMask = !0, Ze.attrs.bNotShowMessage = !0, nt.next = 60, Nh(Ze, !0);
            case 60:
              if (!(it = nt.sent)._bRemoteMode) {
                nt.next = 67;
                break;
              }
              return nt.next = 64, it.getDevices(A, i, a);
            case 64:
              Ct = nt.sent, nt.next = 72;
              break;
            case 67:
              return Bt = l.navInfoSync.bAndroid ? xr : an, A = t ?? Bt, nt.next = 71, it.GetDevicesAsync(A, i, a);
            case 71:
              Ct = nt.sent;
            case 72:
              nt.next = 79;
              break;
            case 74:
              if (nt.prev = 74, nt.t1 = nt.catch(54), !a) {
                nt.next = 78;
                break;
              }
              throw nt.t1;
            case 78:
              S = nt.t1;
            case 79:
              return nt.prev = 79, it && it.dispose(), nt.finish(79);
            case 82:
              if (n.isArray(Ct) && Ct.length > 0)
                for (v = 0; v < Ct.length; v++)
                  u.push(Ct[v]);
            case 83:
              _++, nt.next = 52;
              break;
            case 86:
              if (!T || M) {
                nt.next = 103;
                break;
              }
              if (yt = (A & dn) == dn, (A & Xt) != Xt && !yt) {
                nt.next = 103;
                break;
              }
              return en = new Wa(T, !0), nt.prev = 90, nt.next = 93, en.getSources(A, i);
            case 93:
              if (Ft = nt.sent, n.isArray(Ft) && Ft.length > 0)
                for (v = 0; v < Ft.length; v++)
                  nf(st = Ft[v], !0), u.push(st);
              nt.next = 100;
              break;
            case 97:
              throw nt.prev = 97, nt.t2 = nt.catch(90), nt.t2;
            case 100:
              nt.prev = 100;
              try {
                en._bInited && en.dispose();
              } catch {
              }
              return nt.finish(100);
            case 103:
              nt.next = 108;
              break;
            case 105:
              throw nt.prev = 105, nt.t3 = nt.catch(17), nt.t3;
            case 108:
              return nt.prev = 108, Yn(c), S && l.DWT.lsetException(S.code, S.message), nt.finish(108);
            case 112:
              return nt.abrupt("return", u);
            case 113:
            case "end":
              return nt.stop();
          }
        var ft, Pt, Ot;
      }, e, null, [[17, 105, 108, 112], [31, 36], [54, 74, 79, 82], [90, 97, 100, 103]]);
    }));
    return function(e, r, t, i) {
      return o.apply(this, arguments);
    };
  }(), n.timestamp = "?t=20221216144236", l.Ready = function(o) {
    var e = l.Lib;
    if (!l.navInfo)
      return e.asyncGetNavInfo().then(function() {
        try {
          o(e);
        } catch (r) {
          throw e.log(r.stack || r, "error"), r;
        }
      });
    try {
      o(e);
    } catch (r) {
      throw e.log(r.stack || r, "error"), r;
    }
  };
})();
G.DWT.bNpm = !0;
G.DWT.dbrCanvasMaxWH = 4096;
G.aryAddonReadyFun = [];
G.AddonReady = function(l) {
  G.aryAddonReadyFun.push(l);
};
G.Lib.mix(G, { license: "", workerPathPdfR: "", workerPathPdfW: "", workerPathImgcore: "" });
G.AddonReady(function(l, n) {
  var L = window.Dynamsoft;
  /*!
  * Dynamsoft JavaScript Library
  * @product Dynamsoft Image IO JS Edition
  * @website http://www.dynamsoft.com
  * @copyright Copyright 2022, Dynamsoft Corporation
  * @author Dynamsoft
  * @version 1.8.0 (2022-11-09T09:07:50.211Z)
  * @fileoverview Dynamsoft JavaScript Library for Image IO
  * 
  */
  (function(k, re) {
    typeof exports == "object" && typeof module < "u" ? re(exports) : (typeof define == "function" && define.amd, re(((k = typeof Xi < "u" ? Xi : k || self).Dynamsoft = k.Dynamsoft || {}, k.Dynamsoft.ImageIO = {})));
  })(this, function(k) {
    var re = function($, pe) {
      return re = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(se, Ie) {
        se.__proto__ = Ie;
      } || function(se, Ie) {
        for (var he in Ie)
          Object.prototype.hasOwnProperty.call(Ie, he) && (se[he] = Ie[he]);
      }, re($, pe);
    };
    function R($, pe) {
      if (typeof pe != "function" && pe !== null)
        throw new TypeError("Class extends value " + String(pe) + " is not a constructor or null");
      function se() {
        this.constructor = $;
      }
      re($, pe), $.prototype = pe === null ? Object.create(pe) : (se.prototype = pe.prototype, new se());
    }
    var C, p, N, U, H, K, Y, F, q = function() {
      return q = Object.assign || function($) {
        for (var pe, se = 1, Ie = arguments.length; se < Ie; se++)
          for (var he in pe = arguments[se])
            Object.prototype.hasOwnProperty.call(pe, he) && ($[he] = pe[he]);
        return $;
      }, q.apply(this, arguments);
    };
    function O($, pe, se, Ie) {
      return new (se || (se = Promise))(function(he, tt) {
        function ht(Vt) {
          try {
            kt(Ie.next(Vt));
          } catch (Nt) {
            tt(Nt);
          }
        }
        function wt(Vt) {
          try {
            kt(Ie.throw(Vt));
          } catch (Nt) {
            tt(Nt);
          }
        }
        function kt(Vt) {
          var Nt;
          Vt.done ? he(Vt.value) : (Nt = Vt.value, Nt instanceof se ? Nt : new se(function(fn) {
            fn(Nt);
          })).then(ht, wt);
        }
        kt((Ie = Ie.apply($, pe || [])).next());
      });
    }
    function J($, pe) {
      var se, Ie, he, tt, ht = { label: 0, sent: function() {
        if (1 & he[0])
          throw he[1];
        return he[1];
      }, trys: [], ops: [] };
      return tt = { next: wt(0), throw: wt(1), return: wt(2) }, typeof Symbol == "function" && (tt[Symbol.iterator] = function() {
        return this;
      }), tt;
      function wt(kt) {
        return function(Vt) {
          return function(Nt) {
            if (se)
              throw new TypeError("Generator is already executing.");
            for (; tt && (tt = 0, Nt[0] && (ht = 0)), ht; )
              try {
                if (se = 1, Ie && (he = 2 & Nt[0] ? Ie.return : Nt[0] ? Ie.throw || ((he = Ie.return) && he.call(Ie), 0) : Ie.next) && !(he = he.call(Ie, Nt[1])).done)
                  return he;
                switch (Ie = 0, he && (Nt = [2 & Nt[0], he.value]), Nt[0]) {
                  case 0:
                  case 1:
                    he = Nt;
                    break;
                  case 4:
                    return ht.label++, { value: Nt[1], done: !1 };
                  case 5:
                    ht.label++, Ie = Nt[1], Nt = [0];
                    continue;
                  case 7:
                    Nt = ht.ops.pop(), ht.trys.pop();
                    continue;
                  default:
                    if (!((he = (he = ht.trys).length > 0 && he[he.length - 1]) || Nt[0] !== 6 && Nt[0] !== 2)) {
                      ht = 0;
                      continue;
                    }
                    if (Nt[0] === 3 && (!he || Nt[1] > he[0] && Nt[1] < he[3])) {
                      ht.label = Nt[1];
                      break;
                    }
                    if (Nt[0] === 6 && ht.label < he[1]) {
                      ht.label = he[1], he = Nt;
                      break;
                    }
                    if (he && ht.label < he[2]) {
                      ht.label = he[2], ht.ops.push(Nt);
                      break;
                    }
                    he[2] && ht.ops.pop(), ht.trys.pop();
                    continue;
                }
                Nt = pe.call($, ht);
              } catch (fn) {
                Nt = [6, fn], Ie = 0;
              } finally {
                se = he = 0;
              }
            if (5 & Nt[0])
              throw Nt[1];
            return { value: Nt[0] ? Nt[1] : void 0, done: !0 };
          }([kt, Vt]);
        };
      }
    }
    function E($, pe, se, Ie) {
      if (se === "a" && !Ie)
        throw new TypeError("Private accessor was defined without a getter");
      if (typeof pe == "function" ? $ !== pe || !Ie : !pe.has($))
        throw new TypeError("Cannot read private member from an object whose class did not declare it");
      return se === "m" ? Ie : se === "a" ? Ie.call($) : Ie ? Ie.value : pe.get($);
    }
    function me($, pe, se, Ie, he) {
      if (Ie === "m")
        throw new TypeError("Private method is not writable");
      if (Ie === "a" && !he)
        throw new TypeError("Private accessor was defined without a setter");
      if (typeof pe == "function" ? $ !== pe || !he : !pe.has($))
        throw new TypeError("Cannot write private member to an object whose class did not declare it");
      return Ie === "a" ? he.call($, se) : he ? he.value = se : pe.set($, se), se;
    }
    (function($) {
      $.logInfo = "logInfo", $.logDebug = "logDebug", $.logAll = "logAll", $.imgIO = "imgIO", $.core = "imgCore", $.imgProc = "imgProc", $.pdfR = "pdfReader", $.pdfW = "pdfWriter", $.crypto = "crypto", $.binaryBlobType = "application/octet-stream", $.wasmExtension = ".wasm";
    })(C || (C = {})), function($) {
      $.pending = "pending", $.ready = "ready", $.failed = "failed", $.destroyed = "destroyed", $.init = "init";
    }(p || (p = {})), function($) {
      $.PARAMETER_TYPE_ERROR = "Parameter Type not Supported = ", $.TIMEOUT = "Timeout no Response = ", $.FILE_STREAM_ERROR = "File Stream Error = ", $.WASM_EXCEPTION_ERROR = "An WASM exception occurred.";
    }(N || (N = {})), function($) {
      $[$.LONG_KEY = 0] = "LONG_KEY", $[$.DLS_KEY = 1] = "DLS_KEY";
    }(U || (U = {})), function($) {
      $[$.wasmBase = -4e3] = "wasmBase", $[$.wasmException = -4001] = "wasmException", $[$.wasmNoModule = -4002] = "wasmNoModule", $[$.wasmJsBase = -4100] = "wasmJsBase", $[$.wasmJsObjectNotInit = -4101] = "wasmJsObjectNotInit", $[$.wasmJsObjectTerminated = -4102] = "wasmJsObjectTerminated", $[$.wasmJsObjectInitFailed = -4103] = "wasmJsObjectInitFailed", $[$.wasmJsNotLoaded = -4104] = "wasmJsNotLoaded", $[$.wasmJsInvalidJson = -4105] = "wasmJsInvalidJson", $[$.wasmJsWorkerRunException = -4106] = "wasmJsWorkerRunException", $[$.wasmJsWorkerRunFailed = -4107] = "wasmJsWorkerRunFailed", $[$.wasmJsReadFileFailed = -4108] = "wasmJsReadFileFailed", $[$.wasmJsCoreTaskException = -4109] = "wasmJsCoreTaskException", $[$.wasmJsProcTaskException = -4110] = "wasmJsProcTaskException", $[$.wasmJsSavePdfFailed = -4111] = "wasmJsSavePdfFailed", $[$.wasmJsSaveTiffFailed = -4112] = "wasmJsSaveTiffFailed";
    }(H || (H = {})), k.ImageType = void 0, (K = k.ImageType || (k.ImageType = {}))[K.IT_DIB = -1] = "IT_DIB", K[K.IT_RGBA = -2] = "IT_RGBA", K[K.IT_BGRA = -3] = "IT_BGRA", K[K.IT_BMP = 0] = "IT_BMP", K[K.IT_JPG = 1] = "IT_JPG", K[K.IT_PNG = 3] = "IT_PNG", K[K.IT_ALL = 5] = "IT_ALL", k.ReturnedDataType = void 0, (Y = k.ReturnedDataType || (k.ReturnedDataType = {}))[Y.RT_AUTO = -1] = "RT_AUTO", Y[Y.RT_BINARY = 1] = "RT_BINARY", Y[Y.RT_BASE64 = 2] = "RT_BASE64", function($) {
      $[$.SF_DEF = 0] = "SF_DEF", $[$.SF_ENABLE = 1] = "SF_ENABLE", $[$.SF_DISABLE = 2] = "SF_DISABLE";
    }(F || (F = {}));
    var Ee, Le = function() {
      function $() {
      }
      return $.fetchRetry = function(pe, se, Ie, he) {
        var tt = se.retries, ht = se.retryDelay;
        return new Promise(function(wt, kt) {
          var Vt = function(Nt) {
            return fetch(pe, se).then(function(fn) {
              wt(fn);
            }).catch(function(fn) {
              Nt < tt ? function(Hn, er, sr) {
                Ie && Ie(er, he), setTimeout(function() {
                  Vt(++Hn);
                }, ht);
              }(Nt, fn) : kt(fn);
            });
          };
          return Vt(0);
        });
      }, $;
    }();
    (function($) {
      $.imgIOVer = "1.8.0", $.coreVer = "1.8.0", $.imgProcVer = "1.8.0", $.pdfRVer = "1.8.0", $.pdfWVer = "1.8.0", $.cryptoVer = "1.8.0";
    })(Ee || (Ee = {}));
    var Oe, Te, Re, Ve, We, le, je, fe, Me, Z, Ue, ct, mt, at, Ye, Et, Je, ce, Ht, Dt, Be, Ge, lt, ot = function() {
      function $() {
      }
      var pe, se, Ie, he, tt, ht, wt, kt, Vt, Nt, fn, Hn, er, sr, li, Lr, Ci, Er, mr, yr, Gr, yi, ui, Ei;
      return Object.defineProperty($, "UseSimd", { get: function() {
        return E(this, pe, "f", wt);
      }, set: function(jn) {
        me(this, pe, jn, "f", wt);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "License", { get: function() {
        return E(this, pe, "f", se);
      }, set: function(jn) {
        me(this, pe, jn, "f", se);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "LicMode", { get: function() {
        return E(this, pe, "f", Ie);
      }, set: function(jn) {
        me(this, pe, jn, "f", Ie), E(this, pe, "m", Vt).call(this);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "UUID", { get: function() {
        return E(this, pe, "f", he);
      }, set: function(jn) {
        me(this, pe, jn, "f", he);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "NavInfo", { get: function() {
        return E(this, pe, "f", tt);
      }, set: function(jn) {
        me(this, pe, jn, "f", tt);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "Mobile", { get: function() {
        return E(this, pe, "f", ht);
      }, set: function(jn) {
        me(this, pe, jn, "f", ht);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "DefHeapSize", { get: function() {
        return E(this, pe, "f", Nt);
      }, set: function(jn) {
        me(this, pe, jn, "f", Nt);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "MaxHeapSize", { get: function() {
        return E(this, pe, "f", fn);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "ImageIOWorkerJS", { get: function() {
        return "dynamsoft.imageio_wasm-" + Ee.imgIOVer + ".js";
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "PdfReaderWorkerJS", { get: function() {
        return "dynamsoft.pdfReader_wasm-" + Ee.pdfRVer + ".js";
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "ImageIOPrefixName", { get: function() {
        return "dynamsoft.imageio-";
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "ImagecorePrefixName", { get: function() {
        return "dynamsoft.imagecore-";
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "ImageProcPrefixName", { get: function() {
        return "dynamsoft.imageProc-";
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "PdfReaderPrefixName", { get: function() {
        return "dynamsoft.pdfReader-";
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "PdfWriterPrefixName", { get: function() {
        return "dynamsoft.pdfWriter-";
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "CryptoPrefixName", { get: function() {
        return "dynamsoft.crypto-";
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "ImageIOResource", { get: function() {
        return E(this, pe, "f", sr);
      }, set: function(jn) {
        me(this, pe, E(this, pe, "m", Hn).call(this, jn), "f", sr), E(this, pe, "m", Lr).call(this, E(this, pe, "f", sr), this.imageIOModule), E(this, pe, "m", Lr).call(this, E(this, pe, "f", sr), E(this, pe, "f", Ci)), E(this, pe, "m", Lr).call(this, E(this, pe, "f", sr), E(this, pe, "f", mr)), E(this, pe, "m", Lr).call(this, E(this, pe, "f", sr), E(this, pe, "f", yr));
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "PdfReaderResource", { get: function() {
        return E(this, pe, "f", li);
      }, set: function(jn) {
        jn.useFastCompEdition = !1, me(this, pe, E(this, pe, "m", Hn).call(this, jn), "f", li), E(this, pe, "m", Lr).call(this, E(this, pe, "f", li), E(this, pe, "f", Er)), this.PdfReaderModule.singleInstance = !0;
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "ImageIOModule", { get: function() {
        return this.imageIOModule;
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "CryptoModule", { get: function() {
        return E(this, pe, "f", Ci);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "PdfReaderModule", { get: function() {
        return E(this, pe, "f", Er);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "ImagecoreModule", { get: function() {
        return E(this, pe, "f", mr);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "ImageProcModule", { get: function() {
        return E(this, pe, "f", yr);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "PdfWriterModule", { get: function() {
        return E(this, pe, "f", Gr);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "LogLevel", { get: function() {
        return E(this, pe, "f", yi);
      }, enumerable: !1, configurable: !0 }), $.setLogFunc = function(jn, ye, oe) {
        me(this, pe, jn, "f", yi), me(this, pe, ye, "f", ui), me(this, pe, oe, "f", Ei);
      }, Object.defineProperty($, "LogFunc", { get: function() {
        return E(this, pe, "f", ui);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($, "LogContext", { get: function() {
        return E(this, pe, "f", Ei);
      }, enumerable: !1, configurable: !0 }), pe = $, kt = function(jn) {
        this.LicMode == U.DLS_KEY && jn.dependencyModules && jn.dependencyModules.indexOf(C.imgIO) != -1 && jn.dependencyModules.indexOf(C.crypto) == -1 && jn.dependencyModules.push(C.crypto);
      }, Vt = function() {
        E(this, pe, "m", kt).call(this, E(this, pe, "f", mr)), E(this, pe, "m", kt).call(this, E(this, pe, "f", yr)), E(this, pe, "m", kt).call(this, E(this, pe, "f", Gr));
      }, Hn = function(jn) {
        var ye, oe, ae, ie, _e, de = { crossScript: !1, resourceDir: jn.resourceDir, workerScript: jn.workerScript, useFastCompEdition: (ye = jn.useFastCompEdition) !== null && ye !== void 0 && ye, useSimd: (oe = jn.useSimd) !== null && oe !== void 0 ? oe : E(this, pe, "f", wt), fetchOptions: (ae = jn.fetchOptions) !== null && ae !== void 0 ? ae : E(this, pe, "f", er), defHeapSize: (ie = jn.defHeapSize) !== null && ie !== void 0 ? ie : this.DefHeapSize, maxHeapSize: (_e = jn.maxHeapSize) !== null && _e !== void 0 ? _e : this.MaxHeapSize };
        return de.workerScript = jn.resourceDir + jn.workerScript, de.workerScript.startsWith("http://") || de.workerScript.startsWith("https://") ? (de.resourceDir = jn.resourceDir, de.workerScript.startsWith(location.origin) || (de.crossScript = !0)) : jn.resourceDir.startsWith("/") ? location.origin != null && (de.resourceDir = location.origin + jn.resourceDir) : location.href != null && (de.resourceDir = location.href.substring(0, location.href.lastIndexOf("/") + 1) + jn.resourceDir), de.resourceDir.endsWith("/") || (de.resourceDir += "/"), jn.useFastCompEdition && (de.resourceDir += "fastcomp/", de.workerScript = de.resourceDir + jn.workerScript), de;
      }, Lr = function(jn, ye) {
        ye.resourceDir = jn.resourceDir, ye.crossScript = jn.crossScript, ye.name === C.imgProc ? ye.useSimd = jn.useSimd : ye.useSimd = !1, ye.script = jn.workerScript, ye.fetchOptions = jn.fetchOptions, ye.defHeapSize = jn.defHeapSize, ye.maxHeapSize = jn.maxHeapSize;
      }, se = { value: "" }, Ie = { value: U.LONG_KEY }, he = { value: "" }, tt = { value: null }, ht = { value: !1 }, wt = { value: !1 }, Nt = { value: 32 }, fn = { value: 200 }, er = { value: { mode: "cors", credentials: "same-origin", retries: 3, retryDelay: 500 } }, sr = { value: { resourceDir: "", workerScript: $.ImageIOWorkerJS, useFastCompEdition: !1, useSimd: !1, crossScript: !1, fetchOptions: E($, pe, "f", er), defHeapSize: $.DefHeapSize, maxHeapSize: $.MaxHeapSize } }, li = { value: { resourceDir: "", workerScript: $.PdfReaderWorkerJS, useFastCompEdition: !1, useSimd: !1, crossScript: !1, fetchOptions: E($, pe, "f", er), defHeapSize: $.DefHeapSize, maxHeapSize: $.MaxHeapSize } }, $.imageIOModule = { name: C.imgIO, autoLoad: !1, ver: Ee.imgIOVer, prefixName: $.ImageIOPrefixName, dependencyModules: [], useSimd: !1, fetchOptions: E($, pe, "f", er) }, Ci = { value: { name: C.crypto, autoLoad: !1, ver: Ee.cryptoVer, prefixName: $.CryptoPrefixName, dependencyModules: [C.imgIO], fetchOptions: E($, pe, "f", er) } }, Er = { value: { name: C.pdfR, autoLoad: !1, ver: Ee.pdfRVer, prefixName: $.PdfReaderPrefixName, dependencyModules: [], fetchOptions: E($, pe, "f", er) } }, mr = { value: { name: C.core, autoLoad: !1, ver: Ee.coreVer, prefixName: $.ImagecorePrefixName, dependencyModules: [C.imgIO], fetchOptions: E($, pe, "f", er) } }, yr = { value: { name: C.imgProc, autoLoad: !1, ver: Ee.imgProcVer, prefixName: $.ImageProcPrefixName, dependencyModules: [C.imgIO, C.core], useSimd: $.UseSimd } }, Gr = { value: { name: C.pdfW, autoLoad: !1, ver: Ee.pdfWVer, prefixName: $.PdfWriterPrefixName, dependencyModules: [C.imgIO, C.core], useSimd: $.UseSimd } }, yi = { value: "" }, ui = { value: void 0 }, Ei = { value: null }, $;
    }(), Kt = function() {
      function $(pe, se, Ie, he, tt) {
        Oe.add(this), Te.set(this, void 0), Re.set(this, void 0), Ve.set(this, void 0), We.set(this, void 0), le.set(this, void 0), je.set(this, void 0), fe.set(this, void 0), Me.set(this, void 0), Z.set(this, void 0), Ue.set(this, void 0), ct.set(this, void 0), mt.set(this, void 0), at.set(this, 0), Ye.set(this, {}), Et.set(this, null), me(this, Te, pe, "f"), me(this, Z, Ie, "f"), me(this, Ve, [], "f"), me(this, We, !1, "f"), me(this, le, !1, "f"), me(this, at, se, "f"), me(this, Et, /* @__PURE__ */ Object.create(null), "f"), E(this, Ye, "f").modulesInfo = [], me(this, ct, /* @__PURE__ */ Object.create(null), "f"), me(this, je, he, "f"), me(this, fe, tt, "f"), me(this, Me, null, "f"), me(this, Ue, 0, "f"), me(this, mt, 0, "f"), me(this, Re, E(this, Oe, "m", ce).call(this, E(this, Te, "f")), "f"), E(this, Re, "f").on("message", E(this, Oe, "m", Be), this), E(this, Re, "f").on("error", E(this, Oe, "m", Dt), this), E(this, Re, "f").on("exit", function(ht, wt, kt) {
          var Vt = `Worker #terminated Unexpectedly
`;
          Vt += " exitCode: `" + ht + "`\n", Vt += " signalCode: `" + wt + "`\n", Vt += " #script: `" + pe + "`\n", E(kt, Oe, "m", Dt).call(kt, new Error(Vt), kt);
        }, this);
      }
      return Object.defineProperty($.prototype, "WorkerScript", { get: function() {
        return E(this, Z, "f");
      }, enumerable: !1, configurable: !0 }), $.prototype.setLogFunc = function(pe, se) {
        me(this, je, pe, "f"), me(this, fe, se, "f");
      }, Object.defineProperty($.prototype, "id", { get: function() {
        return E(this, at, "f");
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($.prototype, "Module", { get: function() {
        return E(this, Ye, "f");
      }, set: function(pe) {
        me(this, Ye, pe, "f");
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($.prototype, "Instances", { get: function() {
        return E(this, Et, "f");
      }, enumerable: !1, configurable: !0 }), $.prototype.execTask = function(pe, se, Ie) {
        Ie || ((Ie = {}).promise = new Promise(function(ht, wt) {
          Ie.resolve = ht, Ie.reject = wt;
        }));
        var he = me(this, mt, +E(this, mt, "f") + 1, "f");
        E(this, ct, "f")[he] = { id: he, resolver: Ie };
        var tt = { id: he, func: pe, params: se };
        return E(this, Oe, "m", Ht).call(this, pe + " send"), E(this, le, "f") ? Ie.reject(new Error("Worker is #terminated")) : E(this, We, "f") ? Ie.reject(new Error("Worker is #terminating")) : E(this, Re, "f").wasmReady || E(this, Re, "f").ready && pe === "loadWasm" ? E(this, Re, "f").send(tt) : E(this, Ve, "f").push(tt), Ie.promise;
      }, Object.defineProperty($.prototype, "memSize", { get: function() {
        return E(this, Ue, "f");
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($.prototype, "busy", { get: function() {
        return this.howManyTasks > 0;
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($.prototype, "howManyTasks", { get: function() {
        return Object.keys(E(this, ct, "f")).length;
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($.prototype, "alive", { get: function() {
        return !E(this, We, "f") && !E(this, le, "f");
      }, enumerable: !1, configurable: !0 }), $.prototype.terminate = function(pe, se) {
        if (E(this, Oe, "m", Ht).call(this, "worker terminate " + pe), pe && E(this, Oe, "m", lt).call(this, "Worker has been #terminated"), typeof se == "function" && me(this, Me, se, "f"), this.busy)
          me(this, We, !0, "f");
        else {
          if (E(this, Re, "f")) {
            if (typeof E(this, Re, "f").terminate != "function")
              throw new Error("Failed to terminate worker");
            E(this, Re, "f").terminate(), me(this, Re, null, "f");
          }
          me(this, We, !1, "f"), me(this, le, !0, "f"), E(this, Me, "f") && E(this, Me, "f").call(this, this);
        }
      }, $;
    }();
    Te = /* @__PURE__ */ new WeakMap(), Re = /* @__PURE__ */ new WeakMap(), Ve = /* @__PURE__ */ new WeakMap(), We = /* @__PURE__ */ new WeakMap(), le = /* @__PURE__ */ new WeakMap(), je = /* @__PURE__ */ new WeakMap(), fe = /* @__PURE__ */ new WeakMap(), Me = /* @__PURE__ */ new WeakMap(), Z = /* @__PURE__ */ new WeakMap(), Ue = /* @__PURE__ */ new WeakMap(), ct = /* @__PURE__ */ new WeakMap(), mt = /* @__PURE__ */ new WeakMap(), at = /* @__PURE__ */ new WeakMap(), Ye = /* @__PURE__ */ new WeakMap(), Et = /* @__PURE__ */ new WeakMap(), Oe = /* @__PURE__ */ new WeakSet(), Je = function($) {
      for (var pe = new Error(""), se = Object.keys($), Ie = 0; Ie < se.length; Ie++)
        pe[se[Ie]] = $[se[Ie]];
      return pe;
    }, ce = function($) {
      if (typeof Worker != "function" && typeof Worker != "object")
        throw new Error("Web Workers not supported");
      var pe = new Worker($);
      return pe.on = function(se, Ie, he) {
        this.addEventListener(se, function(tt) {
          se === "exit" ? Ie(tt.data, "", he) : Ie(tt.data, he);
        });
      }, pe.send = function(se) {
        if (se != null && se.params != null && se.params.input != null) {
          var Ie = Object.prototype.toString.call(se.params.input);
          if (Object.prototype.toString.call(se.params.input) === "[object Array]") {
            if ((Ie = Object.prototype.toString.call(se.params.input[0])) === "[object ArrayBuffer]" || Ie === "[object Uint8ClampedArray]" || Ie === "[object Uint8Array]")
              return void this.postMessage(se, [se.params.input[0].buffer != null ? se.params.input[0].buffer : se.params.input[0]]);
          } else if (Ie === "[object ArrayBuffer]" || Ie === "[object Uint8ClampedArray]" || Ie === "[object Uint8Array]")
            return void this.postMessage(se, [se.params.input.buffer != null ? se.params.input.buffer : se.params.input]);
        }
        this.postMessage(se);
      }, pe;
    }, Ht = function($) {
      E(this, je, "f") && E(this, je, "f").call(this, $, E(this, fe, "f"));
    }, Dt = function($, pe) {
      me(pe, le, !0, "f"), E(pe, Oe, "m", Ht).call(pe, "[js][" + Date.now() / 1e3 + "] worker error " + JSON.stringify($)), E(pe, We, "f") && E(pe, Me, "f") && E(pe, Me, "f").call(pe, pe), me(pe, We, !1, "f"), E(pe, Oe, "m", lt).call(pe);
    }, Be = function($, pe) {
      if (E(pe, Oe, "m", Ht).call(pe, $.log ? $.log : $), typeof $ == "string" && $ === "ready")
        E(pe, Re, "f").ready = !0, E(pe, Oe, "m", Ge).call(pe);
      else if (!$.log) {
        if (typeof $ == "object") {
          var se = $.result;
          typeof se == "object" ? (se.errorCode != null && (se.code = se.errorCode, delete se.errorCode), se.errorMessage != null && (se.message = se.errorMessage, delete se.errorMessage)) : typeof se == "string" && (se = (se = (se = (se = se.replace('"errorCode"', '"code"')).replace("'errorCode'", "'code'")).replace('"errorMessage"', '"message"')).replace("'errorMessage'", "'message'"), $.result = se), $.memSize != null && me(pe, Ue, $.memSize, "f");
        }
        var Ie = $.id, he = E(pe, ct, "f")[Ie];
        he !== void 0 && (delete E(pe, ct, "f")[Ie], E(pe, Oe, "m", Ht).call(pe, $.func + " received"), E(pe, We, "f") === !0 && pe.terminate(), $.func === "loadWasm" && $.result != null && (E(pe, Re, "f").wasmReady = !0, E(pe, Oe, "m", Ge).call(pe)), $.error ? he.resolver.reject(E(pe, Oe, "m", Je).call(pe, $.error)) : $.result && he.resolver.resolve($.result));
      }
    }, Ge = function() {
      E(this, Ve, "f").forEach(E(this, Re, "f").send.bind(E(this, Re, "f"))), me(this, Ve, [], "f");
    }, lt = function($) {
      for (var pe in E(this, ct, "f"))
        E(this, ct, "f")[pe] !== void 0 && E(this, ct, "f")[pe].resolver.reject(new Error($));
      me(this, ct, /* @__PURE__ */ Object.create(null), "f");
    };
    var Lt, bn, Fn, wn, ge, Wt, xt, He, Ne, bt, Ut, Zt, rt = function() {
      function $() {
        pe.add(this), he.set(this, []), tt.set(this, 2), ht.set(this, 60), wt.set(this, !1), kt.set(this, void 0), Vt.set(this, null), Nt.set(this, C.logDebug), Hn.set(this, !1);
      }
      var pe, se, Ie, he, tt, ht, wt, kt, Vt, Nt, fn, Hn, er, sr, li, Lr, Ci, Er, mr, yr, Gr, yi, ui, Ei, jn, ye, oe, ae, ie, _e;
      return Object.defineProperty($, "Instance", { get: function() {
        return E(this, se, "f", Ie) || me(this, se, new $(), "f", Ie), E(this, se, "f", Ie);
      }, enumerable: !1, configurable: !0 }), Object.defineProperty($.prototype, "Terminated", { get: function() {
        return E(this, wt, "f");
      }, enumerable: !1, configurable: !0 }), $.prototype.getModuleLoadedError = function(de) {
        for (var Se = 0, Ae = E($, se, "f", fn); Se < Ae.length; Se++) {
          var ze = Ae[Se];
          if (ze.name == de)
            return ze.error;
        }
      }, $.prototype.getModuleStatus = function(de) {
        for (var Se = 0, Ae = E($, se, "f", fn); Se < Ae.length; Se++) {
          var ze = Ae[Se];
          if (ze.name == de)
            return ze.status;
        }
        return "";
      }, $.prototype.addModules = function(de, Se) {
        var Ae = !1;
        if (E($, se, "f", fn).forEach(function(qe, Ke, At) {
          qe.name == de.name && (qe.ver == de.ver ? Ae = !0 : At.splice(Ke, 1));
        }), !Ae) {
          var ze = de;
          ze.status = Se || "", ze.wasmModule = null, E($, se, "f", fn).push(ze);
        }
      }, $.prototype.loadModule = function(de, Se) {
        return O(this, void 0, void 0, function() {
          var Ae, ze, qe, Ke, At, _n, Jt;
          return J(this, function(In) {
            for (Ae = null, Se == null && (Se = E(this, pe, "m", ui).call(this, de).length != 0), ze = 0, qe = de.dependencyModules; ze < qe.length; ze++)
              (Ke = qe[ze]) === C.imgIO ? (this.addModules(ot.ImageIOModule, p.pending), ot.LicMode === U.DLS_KEY && de.name != C.crypto && this.addModules(ot.CryptoModule, p.pending)) : Ke === C.core && this.addModules(ot.ImagecoreModule, p.pending);
            for (At = 0, _n = E($, se, "f", fn); At < _n.length; At++)
              if ((Jt = _n[At]).name === de.name) {
                if (Jt.wasmModule) {
                  if (Se)
                    return [2, !0];
                  Ae = Jt;
                  break;
                }
                if (Jt.status === p.pending)
                  return [2, !1];
                Ae = Jt;
                break;
              }
            if (Ae)
              if (Ae.status === "")
                Ae.status = p.pending, Ae.wasmModule = null;
              else {
                if (Ae.status === p.pending)
                  return [2, null];
                Se || (Ae.error = { code: 0, message: "" }, Ae.status = p.pending);
              }
            else
              (Ae = de).status = p.pending, Ae.wasmModule = null, E($, se, "f", fn).push(Ae);
            return [2, E(this, pe, "m", er).call(this, Ae)];
          });
        });
      }, $.prototype.setLogFunc = function(de, Se, Ae) {
        me(this, kt, Se, "f"), me(this, Vt, Ae, "f"), me(this, Nt, de, "f");
      }, Object.defineProperty($.prototype, "busy", { get: function() {
        E(this, pe, "m", oe).call(this);
        for (var de = 0, Se = E(this, he, "f"); de < Se.length; de++)
          if (Se[de].busy)
            return !0;
        return !1;
      }, enumerable: !1, configurable: !0 }), $.prototype.getWorker = function(de, Se) {
        return O(this, void 0, void 0, function() {
          var Ae;
          return J(this, function(ze) {
            switch (ze.label) {
              case 0:
                return E(this, pe, "m", Ei).call(this, de.name) ? (E(this, pe, "m", ye).call(this), [2, null]) : (Ae = E(this, pe, "m", ui).call(this, de)).length == 0 ? [3, 1] : [2, E(this, pe, "m", ae).call(this, Ae, Se, !de.singleInstance)];
              case 1:
                return [4, this.loadModule(de, !1)];
              case 2:
                return ze.sent(), [2, null];
            }
          });
        });
      }, $.prototype.removeInstanceInWorker = function(de, Se, Ae, ze) {
        var qe;
        if (E(this, pe, "m", ie).call(this, Se, Ae), ze && Se && Se.memSize != null) {
          var Ke = 1024 * ((qe = de.maxHeapSize) !== null && qe !== void 0 ? qe : ot.MaxHeapSize) * 1024;
          if (E(this, pe, "m", yr).call(this, "current memSize=" + Se.memSize + ", max=" + Ke), Se.memSize > Ke && Ke != 0 && !E(this, pe, "m", _e).call(this, Se)) {
            E(this, pe, "m", yr).call(this, "try to terminate the worker"), Se.terminate();
            var At = E(this, he, "f").indexOf(Se);
            At !== -1 && E(this, he, "f").splice(At, 1);
          }
        }
      }, $.prototype.terminate = function(de) {
        me($, se, null, "f", Ie), E(this, pe, "m", yr).call(this, "worker pool terminate " + de), me(this, wt, !0, "f");
        var Se = [], Ae = E(this, he, "f").slice();
        return me(this, he, [], "f"), Ae.forEach(function(ze) {
          var qe = {};
          qe.promise = new Promise(function(Ke, At) {
            qe.resolve = Ke, qe.reject = At;
          }), Se.push(qe.promise), ze.terminate(de, function(Ke) {
            qe.resolve(Ke);
          });
        }), Promise.all(Se);
      }, $.prototype.terminateWorker = function(de) {
        var Se = E(this, he, "f").filter(function(Ae) {
          return !Ae.Module.modulesInfo[de.name] || (Ae.terminate(!0), !1);
        });
        me(this, he, Se, "f");
      }, $.prototype.getMemoryUsed = function() {
        for (var de = [], Se = 0, Ae = 0, ze = E(this, he, "f"); Ae < ze.length; Ae++) {
          var qe = ze[Ae];
          qe && qe.memSize != null && (de[Se++] = qe.memSize);
        }
        return de;
      }, se = $, he = /* @__PURE__ */ new WeakMap(), tt = /* @__PURE__ */ new WeakMap(), ht = /* @__PURE__ */ new WeakMap(), wt = /* @__PURE__ */ new WeakMap(), kt = /* @__PURE__ */ new WeakMap(), Vt = /* @__PURE__ */ new WeakMap(), Nt = /* @__PURE__ */ new WeakMap(), Hn = /* @__PURE__ */ new WeakMap(), pe = /* @__PURE__ */ new WeakSet(), er = function(de) {
        return O(this, void 0, void 0, function() {
          var Se, Ae, ze, qe, Ke, At, _n, Jt;
          return J(this, function(In) {
            switch (In.label) {
              case 0:
                return Se = this, [4, E(this, pe, "m", Gr).call(this, de)];
              case 1:
                if (Ae = In.sent()) {
                  if ((ze = { id: 0, func: "loadWasm", params: { insId: 0, priority: 0, module: { modulesInfo: [] }, fetchOptions: de.fetchOptions } }).params.resourceDir = de.resourceDir, ze.params.initMemory = de.defHeapSize, ze.params.module) {
                    for (qe = 0, Ke = E($, se, "f", fn); qe < Ke.length; qe++)
                      for (At = Ke[qe], _n = 0, Jt = de.dependencyModules; _n < Jt.length; _n++)
                        Jt[_n] == At.name && ze.params.module.modulesInfo.push(At);
                    ze.params.module.modulesInfo.push(de);
                  }
                  return [2, E(this, pe, "m", li).call(this, Ae, ze, function(jt) {
                    me(Se, tt, E(Se, pe, "m", Ci).call(Se), "f"), de.status === p.pending && (de.status = "");
                  })];
                }
                return de.status = "", [2];
            }
          });
        });
      }, sr = function(de, Se, Ae, ze) {
        for (var qe = 0, Ke = E($, se, "f", fn); qe < Ke.length; qe++) {
          var At = Ke[qe];
          if (At.name === de) {
            At.status = Se, At.wasmModule = Ae, At.error = ze;
            break;
          }
        }
      }, li = function(de, Se, Ae) {
        return O(this, void 0, void 0, function() {
          var ze, qe, Ke, At;
          return J(this, function(_n) {
            switch (_n.label) {
              case 0:
                ze = this, _n.label = 1;
              case 1:
                return _n.trys.push([1, 3, 4, 5]), [4, de.execTask(Se.func, Se.params)];
              case 2:
                return qe = _n.sent(), Ke = !1, qe.code === void 0 || qe.modules ? Ke = E(ze, pe, "m", Lr).call(ze, qe, de) : E(ze, pe, "m", yr).call(ze, qe), [2, Ke];
              case 3:
                return At = _n.sent(), E(ze, pe, "m", yr).call(ze, At), [2, !1];
              case 4:
                return Ae && Ae(), [7];
              case 5:
                return [2];
            }
          });
        });
      }, Lr = function(de, Se) {
        if (E(this, pe, "m", yr).call(this, "handleWasmLoad:"), E(this, pe, "m", yr).call(this, de), E(this, wt, "f"))
          return Se.terminate(), !1;
        if ((typeof de != "object" || de.modules == null) && typeof de == "object")
          return !1;
        for (var Ae = !1, ze = 0, qe = de.modules; ze < qe.length; ze++) {
          var Ke = qe[ze];
          de.code ? (E(this, pe, "m", sr).call(this, Ke.name, p.failed, null, { code: de.code, message: de.message }), Se.Module.modulesInfo[Ke.name] = !1) : (E(this, pe, "m", sr).call(this, Ke.name, p.ready, Ke.wasmModule, void 0), Se.Module.modulesInfo[Ke.name] = !0, Ae = !0);
        }
        return Ae;
      }, Ci = function() {
        var de = 2;
        return "hardwareConcurrency" in self.navigator && (de = self.navigator.hardwareConcurrency), Math.max(Math.min(E(this, tt, "f"), Math.max(E(this, tt, "f"), de / 2)), 1);
      }, Er = function() {
        ot.LogLevel == E(this, Nt, "f") && ot.LogFunc == E(this, kt, "f") || this.setLogFunc(ot.LogLevel, ot.LogFunc, ot.LogContext);
      }, mr = function(de) {
        E(this, pe, "m", Er).call(this), E(this, kt, "f") && E(this, Nt, "f") === C.logAll && E(this, kt, "f").call(this, de, E(this, Vt, "f"));
      }, yr = function(de) {
        E(this, pe, "m", Er).call(this), E(this, kt, "f") && E(this, Nt, "f") === C.logDebug && E(this, kt, "f").call(this, de, E(this, Vt, "f"));
      }, Gr = function(de) {
        return O(this, void 0, void 0, function() {
          var Se, Ae, ze, qe;
          return J(this, function(Ke) {
            for (E(this, pe, "m", oe).call(this), Se = E(this, he, "f"), Ae = 0, ze = Se; Ae < ze.length; Ae++)
              if ((qe = ze[Ae]).WorkerScript === de.script)
                return qe.busy ? [2, null] : [2, qe];
            return [2, E(this, pe, "m", yi).call(this, de)];
          });
        });
      }, yi = function(de) {
        return O(this, void 0, void 0, function() {
          var Se, Ae, ze, qe;
          return J(this, function(Ke) {
            switch (Ke.label) {
              case 0:
                return (Ae = E(Se = this, he, "f")).length < E(Se, tt, "f") && !E(Se, Hn, "f") ? (me(Se, Hn, !0, "f"), ze = de.script, de.crossScript ? [4, Le.fetchRetry(de.script, de.fetchOptions, E(Se, kt, "f"), Se).then(function(At) {
                  return At.blob();
                }).then(function(At) {
                  return URL.createObjectURL(At);
                }).catch(function(At) {
                  return E(Se, pe, "m", yr).call(Se, "get new worker fetch failed: "), E(Se, pe, "m", yr).call(Se, At), me(Se, Hn, !1, "f"), null;
                })] : [3, 2]) : [3, 3];
              case 1:
                ze = Ke.sent(), Ke.label = 2;
              case 2:
                return qe = new Kt(ze, Ae.length + 1, de.script, E(Se, kt, "f"), E(Se, Vt, "f")), Ae.push(qe), me(Se, Hn, !1, "f"), E(Se, pe, "m", mr).call(Se, Ae), E(Se, pe, "m", yr).call(Se, "get new worker " + qe.id + " succeed!"), [2, qe];
              case 3:
                return [2, null];
            }
          });
        });
      }, ui = function(de) {
        E(this, pe, "m", oe).call(this);
        var Se = E(this, he, "f");
        E(this, pe, "m", mr).call(this, Se);
        for (var Ae = [], ze = 0, qe = Se; ze < qe.length; ze++) {
          var Ke = qe[ze];
          if (Ke.Module.modulesInfo[de.name]) {
            if (Ke.busy && Se.length < E(this, tt, "f"))
              continue;
            Ae.push(Ke);
          }
        }
        return E(this, pe, "m", mr).call(this, "get workers for module " + de.name), E(this, pe, "m", mr).call(this, Ae), Ae;
      }, Ei = function(de) {
        for (var Se = 0, Ae = E($, se, "f", fn); Se < Ae.length; Se++) {
          var ze = Ae[Se];
          if (ze.name === de && ze.status === p.pending)
            return !0;
        }
        return !1;
      }, jn = function() {
        return O(this, void 0, void 0, function() {
          var de, Se, Ae;
          return J(this, function(ze) {
            switch (ze.label) {
              case 0:
                this.terminate(!0), de = 0, Se = E($, se, "f", fn), ze.label = 1;
              case 1:
                return de < Se.length ? (Ae = Se[de], [4, E(this, pe, "m", er).call(this, Ae)]) : [3, 4];
              case 2:
                ze.sent(), ze.label = 3;
              case 3:
                return de++, [3, 1];
              case 4:
                return [2];
            }
          });
        });
      }, ye = function() {
        E(this, pe, "m", oe).call(this), E(this, he, "f").length == 0 && E($, se, "f", fn).length != 0 && (E(this, pe, "m", yr).call(this, "no worker ready, reinit"), E(this, pe, "m", jn).call(this));
      }, oe = function() {
        me(this, he, E(this, he, "f").filter(function(de) {
          return de.alive;
        }), "f");
      }, ae = function(de, Se, Ae) {
        E(this, pe, "m", mr).call(this, "getWorkerByIntanceId"), E(this, pe, "m", mr).call(this, de);
        for (var ze = 9007199254740991, qe = void 0, Ke = 0, At = de; Ke < At.length; Ke++) {
          var _n = At[Ke];
          if (!Ae && Object.keys(_n.Instances).length != 0)
            return null;
          if (_n.Instances[Se] != null) {
            qe = _n;
            break;
          }
          var Jt = _n.howManyTasks;
          Jt < ze && (qe = _n, ze = Jt);
        }
        return qe ? (qe.Instances[Se] = "", E(this, pe, "m", mr).call(this, de), E(this, pe, "m", yr).call(this, "get worker " + Se + " in " + qe.id + " succeed!"), E(this, Nt, "f") != "" && qe.setLogFunc(E(this, kt, "f"), E(this, Vt, "f")), qe) : (E(this, pe, "m", mr).call(this, "#getWorkerByIntanceId: no suitable worker"), null);
      }, ie = function(de, Se) {
        var Ae = E(this, he, "f");
        E(this, pe, "m", mr).call(this, "removeInstanceInWorkerInner"), E(this, pe, "m", mr).call(this, Ae);
        for (var ze = 0, qe = Ae; ze < qe.length; ze++) {
          var Ke = qe[ze];
          if (Ke === de) {
            Ke.Instances[Se] != null ? (delete Ke.Instances[Se], E(this, pe, "m", mr).call(this, Ae), E(this, pe, "m", yr).call(this, "removeInstanceInWorkerInner " + Se + " in " + de.id + " succeed!")) : E(this, pe, "m", yr).call(this, "not found instance " + Se);
            break;
          }
        }
      }, _e = function(de) {
        return Object.keys(de.Instances).length != 0;
      }, Ie = { value: null }, fn = { value: new Array() }, $;
    }();
    (function($) {
      $.Text = "Text", $.Link = "Link", $.FreeText = "FreeText", $.Line = "Line", $.Square = "Square", $.Circle = "Circle", $.Polygon = "Polygon", $.PolyLine = "PolyLine", $.Hignlight = "Hignlight", $.Underline = "Underline", $.Squiggly = "Squiggly", $.StrikeOut = "StrikeOut", $.Stamp = "Stamp", $.Caret = "Caret", $.Ink = "Ink", $.Popup = "Popup";
    })(Lt || (Lt = {})), function($) {
      $.None = "none", $.Invisible = "invisible", $.Hidden = "hidden", $.Print = "print", $.NoZoom = "noZoom", $.NoRotate = "noRotate", $.NoView = "noView", $.ReadOnly = "readOnly", $.Locked = "locked", $.ToggleNoView = "toggleNoView", $.LockedContents = "lockedContents";
    }(bn || (bn = {})), function($) {
      $.Solid = "S", $.Dashed = "D", $.Beveled = "B", $.Insert = "I", $.Underline = "U";
    }(Fn || (Fn = {})), function($) {
      $.NoEffect = "S", $.Cloudy = "C";
    }(wn || (wn = {})), function($) {
      $.Comment = "Comment", $.Key = "Key", $.Note = "Note", $.Help = "Help", $.NewParagraph = "NewParagraph", $.Paragraph = "Paragraph", $.Insert = "Insert";
    }(ge || (ge = {})), function($) {
      $.Marked = "Marked", $.Review = "Review";
    }(Wt || (Wt = {})), function($) {
      $.Accepted = "Accepted", $.Rejected = "Rejected", $.Cancelled = "Cancelled", $.Completed = "Completed", $.None = "None";
    }(xt || (xt = {})), function($) {
      $.None = "None", $.Square = "Square", $.Circle = "Circle", $.Diamond = "Diamond", $.OpenArrow = "OpenArrow", $.ClosedArrow = "ClosedArrow", $.Butt = "Butt", $.ROpenArrow = "ROpenArrow", $.RClosedArrow = "RClosedArrow", $.Slash = "Slash";
    }(He || (He = {})), function($) {
      $[$.LeftJustified = 0] = "LeftJustified", $[$.Centered = 1] = "Centered", $[$.RightJustified = 2] = "RightJustified";
    }(Ne || (Ne = {})), function($) {
      $.FreeText = "FreeText", $.FreeTextCallout = "FreeTextCallout", $.FreeTextTypeWriter = "FreeTextTypeWriter";
    }(bt || (bt = {})), function($) {
      $.LineArrow = "LineArrow", $.LineDimension = "LineDimension";
    }(Ut || (Ut = {})), function($) {
      $.Approved = "Approved", $.Experimental = "Experimental", $.NotApproved = "NotApproved", $.Asls = "Asls", $.Expired = "Expired", $.NotForPublicRelease = "NotForPublicRelease", $.Confidential = "Confidential", $.Final = "Final", $.Sold = "Sold", $.Departmental = "Departmental", $.ForComment = "ForComment", $.TopSecret = "TopSecret", $.Draft = "Draft", $.ForPublicRelease = "ForPublicRelease";
    }(Zt || (Zt = {}));
    var Xt, dn, an, Rn, xr, hr = function() {
      this.annot = void 0;
    }, Vr = function() {
      this.width = void 0, this.style = void 0, this.dash = void 0;
    }, Zn = function() {
      this.style = void 0, this.intensity = void 0;
    }, It = function($) {
      function pe(se) {
        var Ie = $.call(this, se) || this;
        return Ie.title = void 0, Ie.opacity = void 0, Ie.richText = void 0, Ie.creationDate = void 0, Ie.subject = void 0, Ie;
      }
      return R(pe, $), pe;
    }(function() {
      function $(pe) {
        this.type = void 0, this.rectangle = void 0, this.contents = void 0, this.name = void 0, this.modifiedDate = void 0, this.flags = void 0, this.border = void 0, this.color = void 0, this.normalAppearance = void 0, this.type = pe;
      }
      return $.prototype.toJsonString = function() {
        return JSON.stringify(this);
      }, $;
    }()), Mt = function($) {
      function pe() {
        var se = $.call(this, Lt.Text) || this;
        return se.open = void 0, se.iconName = void 0, se.state = void 0, se.stateModel = void 0, se;
      }
      return R(pe, $), pe;
    }(It), Yt = function($) {
      function pe() {
        var se = $.call(this, Lt.FreeText) || this;
        return se.defaultAppearance = void 0, se.q = void 0, se.defaultStyle = void 0, se.callout = void 0, se.intent = void 0, se.borderEffect = void 0, se.rectDifference = void 0, se.borderStyle = void 0, se.lineEnding = void 0, se;
      }
      return R(pe, $), pe;
    }(It), $t = function($) {
      function pe(se, Ie, he, tt) {
        var ht = $.call(this, Lt.Line) || this;
        return ht.line = void 0, ht.borderStyle = void 0, ht.lineEnding = void 0, ht.interiorColor = void 0, ht.leadLineLength = void 0, ht.leadLineExtensionLength = void 0, ht.caption = void 0, ht.intent = void 0, ht.leadLineOffsetLength = void 0, ht.captionPosition = void 0, ht.captionOffset = void 0, ht.line = [se, Ie, he, tt], ht;
      }
      return R(pe, $), pe;
    }(It), Pn = function($) {
      function pe() {
        var se = $.call(this, Lt.Square) || this;
        return se.borderStyle = void 0, se.interiorColor = void 0, se.borderEffect = void 0, se.rectDifference = void 0, se;
      }
      return R(pe, $), pe;
    }(It), nr = function($) {
      function pe() {
        var se = $.call(this, Lt.Circle) || this;
        return se.borderStyle = void 0, se.interiorColor = void 0, se.borderEffect = void 0, se.rectDifference = void 0, se;
      }
      return R(pe, $), pe;
    }(It), _r = function($) {
      function pe() {
        var se = $.call(this, Lt.Polygon) || this;
        return se.vertices = void 0, se.borderStyle = void 0, se.borderEffect = void 0, se;
      }
      return R(pe, $), pe;
    }(It), vr = function($) {
      function pe() {
        var se = $.call(this, Lt.PolyLine) || this;
        return se.vertices = void 0, se.borderStyle = void 0, se.lineEnding = void 0, se.borderEffect = void 0, se;
      }
      return R(pe, $), pe;
    }(It), Fr = function($) {
      function pe() {
        var se = $.call(this, Lt.Hignlight) || this;
        return se.quadPoints = void 0, se;
      }
      return R(pe, $), pe;
    }(It), Or = function($) {
      function pe() {
        var se = $.call(this, Lt.Underline) || this;
        return se.quadPoints = void 0, se;
      }
      return R(pe, $), pe;
    }(It), Jr = function($) {
      function pe() {
        var se = $.call(this, Lt.StrikeOut) || this;
        return se.quadPoints = void 0, se;
      }
      return R(pe, $), pe;
    }(It), $n = function($) {
      function pe() {
        var se = $.call(this, Lt.Squiggly) || this;
        return se.quadPoints = void 0, se;
      }
      return R(pe, $), pe;
    }(It), no = function($) {
      function pe() {
        var se = $.call(this, Lt.Stamp) || this;
        return se.name = void 0, se;
      }
      return R(pe, $), pe;
    }(It), Li = function($) {
      function pe() {
        var se = $.call(this, Lt.Ink) || this;
        return se.inkList = void 0, se.borderStyle = void 0, se;
      }
      return R(pe, $), pe;
    }(It), ei = function() {
      function $() {
      }
      return $.PdfAnnotType = Lt, $.PdfAnnotFlag = bn, $.PdfAnnotBorderStyleStyle = Fn, $.PdfAnnotBorderEffectStyle = wn, $.PdfAnnotTextName = ge, $.PdfAnnotTextStateModel = Wt, $.PdfAnnotTextState = xt, $.PdfAnnotLineEnding = He, $.PdfAnnotFreeTextQuadding = Ne, $.PdfAnnotFreeTextIntent = bt, $.PdfAnnotLineIntent = Ut, $.PdfAnnotStampName = Zt, $.PdfAnnotAppearance = hr, $.PdfAnnotBorderStyle = Vr, $.PdfAnnotBorderEffect = Zn, $.PdfTextAnnot = Mt, $.PdfFreeTextAnnot = Yt, $.PdfLineAnnot = $t, $.PdfSquareAnnot = Pn, $.PdfCircleAnnot = nr, $.PdfPolygonAnnot = _r, $.PdfPolyLineAnnot = vr, $.PdfHighlightAnnot = Fr, $.PdfUnderlineAnnot = Or, $.PdfStrikeOutAnnot = Jr, $.PdfSquigglyAnnot = $n, $.PdfRubberStampAnnot = no, $.PdfInkAnnot = Li, $;
    }(), Qi = function() {
      function $() {
      }
      return $.read = function(pe) {
        return new Promise(function(se, Ie) {
          var he = Object.prototype.toString.call(pe);
          if (he === "[object String]") {
            if (pe.indexOf("blob:") === 0 || pe.indexOf(".jpg") > 0 || pe.indexOf(".jpeg") > 0 || pe.indexOf(".png") > 0 || pe.indexOf(".bmp") > 0 || pe.indexOf(".dib") > 0 || pe.indexOf(".pdf") > 0 || pe.indexOf(".tiff") > 0 || pe.indexOf(".tif") > 0)
              return fetch(pe, { mode: "cors" }).then(function(wt) {
                return wt.arrayBuffer();
              }).then(function(wt) {
                return se(wt);
              }).catch(function(wt) {
                return Promise.reject(wt);
              });
            Ie("Error url: Can not read the file URL");
          } else if (he === "[object Blob]" || he === "[object FileList]" || he === "[object File]") {
            var tt = pe;
            he !== "[object FileList]" && he !== "[object File]" || (tt = pe[0] ? pe[0] : pe);
            var ht = new FileReader();
            ht.readAsArrayBuffer(tt), ht.onload = function() {
              var wt = ht.result;
              se(wt);
            };
          } else
            he === "[object ArrayBuffer]" || he === "[object Uint8ClampedArray]" ? se(pe) : Ie("Not support source type: " + he);
        });
      }, $;
    }(), Zi = function() {
      function $(ie, _e) {
        var de, Se, Ae, ze;
        pe.add(this), he.set(this, void 0), this._outputType = k.ImageType.IT_JPG, this._inputType = k.ImageType.IT_ALL, this._jpegQuality = 80, tt.set(this, (de = ot.License) !== null && de !== void 0 ? de : ""), ht.set(this, []), wt.set(this, null), kt.set(this, 0), Vt.set(this, ""), Nt.set(this, null), fn.set(this, null), Hn.set(this, me(ze = $, se, +E(ze, se, "f", Ie) + 1, "f", Ie)), er.set(this, null), sr.set(this, JSON.parse(JSON.stringify(ot.NavInfo))), li.set(this, ot.Mobile), Lr.set(this, location.origin), Ci.set(this, ""), Er.set(this, p.init), mr.set(this, !1), yr.set(this, (Se = ot.LicMode) !== null && Se !== void 0 ? Se : U.LONG_KEY), Gr.set(this, (Ae = ot.UUID) !== null && Ae !== void 0 ? Ae : ""), this._handleBooleanResult = function(qe, Ke) {
          return !0;
        }, me(this, he, ie, "f"), me(this, tt, _e ?? ot.License, "f"), this.setLog(ot.LogLevel, ot.LogFunc, ot.LogContext);
      }
      var pe, se, Ie, he, tt, ht, wt, kt, Vt, Nt, fn, Hn, er, sr, li, Lr, Ci, Er, mr, yr, Gr, yi, ui, Ei, jn, ye, oe, ae;
      return $.prototype._prepareModule = function(ie) {
      }, $.prototype.setLog = function(ie, _e, de) {
        me(this, Nt, _e ?? null, "f"), me(this, fn, de, "f"), me(this, Vt, ie ?? "", "f");
      }, $.prototype._log = function(ie) {
        typeof E(this, Nt, "f") == "function" && E(this, Nt, "f").call(this, ie, E(this, fn, "f"));
      }, $.prototype._logAll = function(ie) {
        E(this, Vt, "f") === C.logAll && this._log(ie);
      }, $.prototype._handleBasicResult = function(ie, _e) {
        return delete ie.code, delete ie.message, ie;
      }, $.prototype._handleImageData = function(ie, _e) {
        var de, Se, Ae;
        if (typeof ie.imageData == "object")
          if (ie.imageCount != null && ie.imageCount > 1)
            for (var ze = 0; ze < ie.imageCount; ze++)
              ie.imageData[ze] = E(de = _e.context, pe, "m", jn).call(de, ie.imageData[ze], ie.blobType, _e.params.returnBlob);
          else
            ie.imageData = E(Se = _e.context, pe, "m", jn).call(Se, ie.imageData, ie.blobType, _e.params.returnBlob);
        return typeof ie.pdfData == "object" && (ie.pdfData = E(Ae = _e.context, pe, "m", jn).call(Ae, ie.pdfData, ie.blobType, _e.params.returnBlob)), ie;
      }, $.prototype._handleResult = function(ie, _e) {
        var de, Se, Ae, ze = E(Se = _e.context, pe, "m", ye).call(Se, ie);
        if (ze.code === void 0 || !ze.code && ze.message === "Successful.")
          ze = _e.handleResult(ze, _e), E(Ae = _e.context, pe, "m", ui).call(Ae), (0, _e.resolve)(ze);
        else {
          var qe = { code: ze.code, message: ze.code === H.wasmException ? N.WASM_EXCEPTION_ERROR + "(" + ((de = _e.params) === null || de === void 0 ? void 0 : de.moduleName) + ":" + _e.func + ":" + ze.message + ")" : ze.message };
          _e.context.terminated ? _e.resolve(qe) : _e.reject(qe);
        }
      }, $.prototype._execTask = function(ie) {
        var _e = this, de = E(_e, wt, "f");
        if (_e._logAll(ie), de)
          try {
            de.execTask(ie.func, ie.params).then(function(Ae) {
              _e._log(Ae), _e._handleResult(E(_e, pe, "m", ye).call(_e, Ae), ie);
            }).catch(function(Ae) {
              _e._log(Ae), E(_e, pe, "m", ui).call(_e);
              var ze = Ae;
              typeof Ae == "object" && Ae.message != null && (ze = Ae.message);
              var qe = { code: H.wasmJsWorkerRunFailed, message: ze };
              E(_e, mr, "f") ? ie.resolve(qe) : ie.reject(qe);
            });
          } catch (Ae) {
            E(_e, pe, "m", ui).call(_e), _e._log(Ae);
            var Se = { code: H.wasmJsWorkerRunException, message: Ae.message, stack: Ae.stack };
            E(_e, mr, "f") ? ie.resolve(Se) : ie.reject(Se);
          }
      }, $.prototype._cancelAllTasks = function(ie, _e) {
        for (var de = 0, Se = E(this, ht, "f"); de < Se.length; de++) {
          var Ae = Se[de];
          if (Ae !== void 0) {
            var ze = { code: ie, message: _e };
            E(this, mr, "f") ? Ae.resolve(ze) : Ae.reject(ze);
          }
        }
        me(this, ht, [], "f");
      }, $.prototype._createTask = function(ie, _e, de) {
        var Se = { moduleName: E(this, he, "f").name, insId: E(this, Hn, "f") }, Ae = { id: me(this, kt, +E(this, kt, "f") + 1, "f"), func: ie, params: Se };
        return Ae.promise = new Promise(function(ze, qe) {
          Ae.resolve = ze, Ae.reject = qe;
        }), Ae.func = ie, Ae.context = this, Ae.handleResult = de !== void 0 && de ? de : this._handleBasicResult, Ae.params.input = _e !== void 0 && _e ? _e : "", Ae.params.returnType = k.ReturnedDataType.RT_AUTO, Ae.params.returnBlob = !0, ot.LogLevel === C.logDebug && (Ae.params.logLevel = C.logDebug), Ae;
      }, $.prototype._addTask = function(ie, _e) {
        return E(this, Er, "f") === p.destroyed ? ie.reject({ code: H.wasmJsObjectNotInit, message: E(this, mr, "f") ? "object has been disposed" : "object not init" }) : E(this, Er, "f") === p.failed ? ie.reject({ code: H.wasmJsObjectInitFailed, message: E(this, Ci, "f") }) : (_e ? E(this, ht, "f").unshift(ie) : E(this, ht, "f").push(ie), E(this, pe, "m", ui).call(this)), ie.promise;
      }, $.prototype.terminate = function(ie) {
        var _e = this;
        ie = ie == null || ie;
        var de = E(_e, pe, "m", ae).call(_e);
        me(_e, mr, !0, "f");
        var Se = rt.Instance;
        Se && Se.removeInstanceInWorker(E(_e, he, "f"), E(_e, wt, "f"), E(_e, Hn, "f"), ie), de.then(function(Ae) {
          me(_e, wt, null, "f"), _e._log(E(_e, he, "f").name + " destroy return: "), _e._log(Ae);
        }).catch(function(Ae) {
          me(_e, wt, null, "f"), _e._log(E(_e, he, "f").name + " destroy failed"), _e._log(Ae);
        }), me(_e, Er, "", "f");
      }, $.prototype._readFile = function(ie, _e) {
        return new Promise(function(de, Se) {
          return Qi.read(ie).then(function(Ae) {
            de(Ae);
          }, function(Ae) {
            var ze;
            E(ze = _e.context, pe, "m", Ei).call(ze, _e, Ae, H.wasmJsReadFileFailed);
          }).catch(function(Ae) {
            var ze;
            E(ze = _e.context, pe, "m", Ei).call(ze, _e, Ae, H.wasmJsReadFileFailed);
          });
        });
      }, se = $, he = /* @__PURE__ */ new WeakMap(), tt = /* @__PURE__ */ new WeakMap(), ht = /* @__PURE__ */ new WeakMap(), wt = /* @__PURE__ */ new WeakMap(), kt = /* @__PURE__ */ new WeakMap(), Vt = /* @__PURE__ */ new WeakMap(), Nt = /* @__PURE__ */ new WeakMap(), fn = /* @__PURE__ */ new WeakMap(), Hn = /* @__PURE__ */ new WeakMap(), er = /* @__PURE__ */ new WeakMap(), sr = /* @__PURE__ */ new WeakMap(), li = /* @__PURE__ */ new WeakMap(), Lr = /* @__PURE__ */ new WeakMap(), Ci = /* @__PURE__ */ new WeakMap(), Er = /* @__PURE__ */ new WeakMap(), mr = /* @__PURE__ */ new WeakMap(), yr = /* @__PURE__ */ new WeakMap(), Gr = /* @__PURE__ */ new WeakMap(), pe = /* @__PURE__ */ new WeakSet(), yi = function ie(_e) {
        var de = _e ?? this;
        if (E(de, er, "f") && clearTimeout(E(de, er, "f")), E(de, wt, "f") && E(de, wt, "f").alive)
          return E(de, wt, "f");
        var Se = rt.Instance;
        Se ? Se.getWorker(E(de, he, "f"), E(de, Hn, "f")).then(function(Ae) {
          if (me(de, wt, Ae, "f"), E(de, wt, "f") && E(de, wt, "f").alive)
            E(de, ht, "f").length > 0 && E(de, pe, "m", ui).call(de);
          else {
            var ze = Se.getModuleLoadedError(E(de, he, "f").name);
            if (ze != null && ze.code)
              return de._cancelAllTasks(H.wasmJsNotLoaded, ze.message), E(de, wt, "f");
            E(de, ht, "f").length > 0 && me(de, er, setTimeout(E(de, pe, "m", ie), 50, de), "f");
          }
          return E(de, wt, "f");
        }).catch(function(Ae) {
          return E(de, wt, "f");
        }) : de._cancelAllTasks(H.wasmJsNotLoaded, "wasm env not loaded or unloaded");
      }, ui = function() {
        if (this._logAll(E(this, ht, "f")), E(this, Er, "f") != p.init)
          if (E(this, wt, "f") && E(this, wt, "f").alive) {
            if (E(this, ht, "f").length > 0) {
              var ie = E(this, ht, "f")[0];
              E(this, Er, "f") !== p.ready && ie.func !== "init" || (delete E(this, ht, "f")[0], E(this, ht, "f").splice(0, 1), this._execTask(ie));
            }
          } else {
            if (E(this, wt, "f") && !E(this, wt, "f").alive && E(this, ht, "f").length > 0 && E(this, ht, "f")[0].func != "init")
              return me(this, wt, null, "f"), void E(this, pe, "m", oe).call(this);
            E(this, ht, "f").length > 0 && E(this, pe, "m", yi).call(this, this);
          }
        else
          E(this, pe, "m", oe).call(this);
      }, Ei = function(ie, _e, de) {
        var Se = _e;
        return typeof Se != "object" && ((Se = {}).code = de, Se.message = _e), ie.context.terminated ? ie.resolve(Se) : ie.reject(Se);
      }, jn = function(ie, _e, de) {
        return de ? _e != null ? new Blob([ie], { type: _e }) : new Blob([ie]) : ie;
      }, ye = function(ie) {
        try {
          return typeof ie == "string" ? JSON.parse(ie) : ie;
        } catch {
          return ie;
        }
      }, oe = function() {
        var ie = this;
        ie._prepareModule(E(this, he, "f"));
        var _e = this._createTask("init");
        _e.params.key = E(this, tt, "f"), _e.params.uuid = E(this, Gr, "f"), _e.params.licMode = E(this, yr, "f"), _e.params.val = { nv: E(this, sr, "f"), mb: E(this, li, "f"), dm: E(this, Lr, "f") }, _e.handleResult = function(de, Se) {
          return me(Se.context, Er, p.ready, "f"), de;
        }, me(this, Er, p.pending, "f"), this._addTask(_e, !0), _e.promise.then(function(de) {
          ie._log(E(ie, he, "f").name + " init return: "), ie._log(de);
        }).catch(function(de) {
          me(ie, Er, p.failed, "f"), me(ie, Ci, de.message, "f"), ie._log(E(ie, he, "f").name + " init failed"), ie._log(de), ie._cancelAllTasks(H.wasmJsObjectInitFailed, de.message);
        });
      }, ae = function() {
        if (E(this, Er, "f") == p.pending || E(this, Er, "f") == p.ready) {
          var ie = this._createTask("destroy");
          return this._addTask(ie), ie.promise;
        }
        return Promise.resolve(!0);
      }, Ie = { value: 0 }, $;
    }(), _i = function($) {
      function pe(se, Ie) {
        return $.call(this, se, Ie) || this;
      }
      return R(pe, $), pe.prototype._prepareModule = function(se) {
        var Ie = rt.Instance;
        Ie.addModules(ot.ImageIOModule), ot.LicMode === U.DLS_KEY && Ie.addModules(ot.CryptoModule), E(pe, Xt, "m", dn).call(pe, ot.ImageIOModule, se), Ie.addModules(se);
      }, pe;
    }(Zi);
    Xt = _i, dn = function($, pe) {
      pe.resourceDir = $.resourceDir, pe.crossScript = $.crossScript, pe.script = $.script, pe.useSimd = $.useSimd, pe.name === C.imgProc ? pe.useSimd = ot.UseSimd : pe.useSimd = !1, pe.fetchOptions = $.fetchOptions, pe.defHeapSize = $.defHeapSize, pe.maxHeapSize = $.maxHeapSize;
    };
    var Gi, Gn = function($) {
      function pe(se) {
        var Ie = $.call(this, ot.ImagecoreModule, se) || this;
        return an.add(Ie), Rn.set(Ie, 0), Ie;
      }
      return R(pe, $), pe.prototype.getImageFormat = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie, he, tt;
          return J(this, function(ht) {
            switch (ht.label) {
              case 0:
                return he = (Ie = this)._createTask("GetImageFormat"), [4, Ie._readFile(se, he)];
              case 1:
                return tt = ht.sent(), he.params.input = tt, Ie._addTask(he), [2, he.promise];
            }
          });
        });
      }, pe.prototype.readImageInfo = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie, he, tt;
          return J(this, function(ht) {
            switch (ht.label) {
              case 0:
                return he = (Ie = this)._createTask("ReadImageInfo"), [4, Ie._readFile(se, he)];
              case 1:
                return tt = ht.sent(), he.params.input = tt, Ie._addTask(he), [2, he.promise];
            }
          });
        });
      }, pe.prototype.getMD5 = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie, he, tt;
          return J(this, function(ht) {
            switch (ht.label) {
              case 0:
                return he = (Ie = this)._createTask("GetMD5"), [4, Ie._readFile(se, he)];
              case 1:
                return tt = ht.sent(), he.params.input = tt, he.handleResult = function(wt, kt) {
                  return wt.MD5;
                }, Ie._addTask(he), [2, he.promise];
            }
          });
        });
      }, pe.prototype.getLicenseInfo = function() {
        return O(this, void 0, void 0, function() {
          return J(this, function(se) {
            return [2, this._addTask(this._createTask("GetLicenseInfo"))];
          });
        });
      }, pe.prototype.getAesResult = function(se) {
        return O(this, void 0, void 0, function() {
          return J(this, function(Ie) {
            return se = se ?? "", [2, this._addTask(this._createTask("GetAesResult", [se]))];
          });
        });
      }, pe.prototype.saveImage = function(se, Ie, he, tt, ht) {
        return O(this, void 0, void 0, function() {
          return J(this, function(wt) {
            return (ht = ht != null && ht) ? [2, E(this, an, "m", xr).call(this, se, void 0, void 0, void 0, 1, void 0, void 0, Ie, he, tt)] : [2, E(this, an, "m", xr).call(this, se, void 0, void 0, void 0, void 0, void 0, void 0, Ie, he, tt)];
          });
        });
      }, pe.prototype.readImage = function(se, Ie, he, tt, ht) {
        return O(this, void 0, void 0, function() {
          var wt, kt, Vt;
          return J(this, function(Nt) {
            switch (Nt.label) {
              case 0:
                return Ie = Ie ?? this._outputType, he = he ?? this._jpegQuality, tt = tt != null && tt, ht = ht != null && ht, kt = (wt = this)._createTask("ReadImage"), [4, wt._readFile(se, kt)];
              case 1:
                return Vt = Nt.sent(), kt.params.input = [Vt, Ie, he, ht], kt.params.returnType = tt ? k.ReturnedDataType.RT_BASE64 : k.ReturnedDataType.RT_AUTO, kt.params.returnBlob = !tt, kt.handleResult = wt._handleImageData, wt._addTask(kt), [2, kt.promise];
            }
          });
        });
      }, pe.prototype.openTiff = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie, he, tt, ht, wt;
          return J(this, function(kt) {
            switch (kt.label) {
              case 0:
                return he = (Ie = this)._createTask("LoadTiff"), [4, Ie._readFile(se, he)];
              case 1:
                return tt = kt.sent(), he.params.input = tt, Ie._addTask(he), [4, he.promise];
              case 2:
                return (ht = kt.sent()).srcBuffer && (wt = Object.prototype.toString.call(se)) != "[object ArrayBuffer]" && wt != "[object Uint8ClampedArray]" && delete ht.srcBuffer, [2, ht];
            }
          });
        });
      }, pe.prototype.readTiff = function(se, Ie, he, tt) {
        se = se ?? 0, Ie = Ie ?? this._outputType, he = he != null && he, tt = tt != null && tt;
        var ht = this._createTask("ReadTiffPage");
        return ht.params.input = [se, Ie, tt], ht.params.returnType = he ? k.ReturnedDataType.RT_BASE64 : k.ReturnedDataType.RT_AUTO, ht.params.returnBlob = !he, ht.handleResult = this._handleImageData, this._addTask(ht);
      }, pe.prototype.readTiffInfo = function(se) {
        se = se ?? 0;
        var Ie = this._createTask("GetTiffPageInfo");
        return Ie.params.input = [se], this._addTask(Ie);
      }, pe.prototype.closeTiff = function() {
        return this._addTask(this._createTask("EndReadTiff", null, this._handleBooleanResult));
      }, pe.prototype.createTiff = function() {
        return this._addTask(this._createTask("NewTiff", null, this._handleBooleanResult));
      }, pe.prototype.appendImage = function(se, Ie, he, tt, ht) {
        return O(this, void 0, void 0, function() {
          var wt, kt, Vt;
          return J(this, function(Nt) {
            switch (Nt.label) {
              case 0:
                return Ie = Ie ?? this._inputType, he = he ?? E(this, Rn, "f"), tt = tt ?? this._jpegQuality, ht = ht != null && ht, kt = (wt = this)._createTask("AppendImageToTiff"), [4, wt._readFile(se, kt)];
              case 1:
                return Vt = Nt.sent(), kt.params.input = [Vt, Ie, he, tt, ht], kt.handleResult = wt._handleBooleanResult, wt._addTask(kt), [2, kt.promise];
            }
          });
        });
      }, pe.prototype.addTag = function(se, Ie, he) {
        return he = he != null && he, this._addTask(this._createTask("AddTagToNextPage", [se, Ie, he], this._handleBooleanResult));
      }, pe.prototype.getTiff = function(se) {
        var Ie = this._createTask("GetTiffStream");
        return Ie.handleResult = this._handleImageData, Ie.params.returnType = se ?? k.ReturnedDataType.RT_AUTO, Ie.params.returnBlob = se != k.ReturnedDataType.RT_AUTO, this._addTask(Ie);
      }, pe.prototype.getMemoryUsed = function() {
        return this._addTask(this._createTask("getMemoryUsed", null, function(se, Ie) {
          return se.memoryUsed;
        }));
      }, pe.prototype.getMultiPartFile = function(se, Ie) {
        return this._addTask(this._createTask("ds_get_file", [se, Ie], function(he, tt) {
          return he;
        }));
      }, pe;
    }(_i);
    Rn = /* @__PURE__ */ new WeakMap(), an = /* @__PURE__ */ new WeakSet(), xr = function($, pe, se, Ie, he, tt, ht, wt, kt, Vt) {
      return O(this, void 0, void 0, function() {
        var Nt, fn, Hn;
        return J(this, function(er) {
          switch (er.label) {
            case 0:
              return Nt = this, pe = pe ?? this._inputType, se = se ?? 0, Ie = Ie ?? 0, he = he ?? 24, tt = tt ?? 96, ht = ht ?? 96, wt = wt ?? this._outputType, kt = kt ?? this._jpegQuality, Vt = Vt ?? k.ReturnedDataType.RT_AUTO, fn = Nt._createTask("SaveImage"), [4, Nt._readFile($, fn)];
            case 1:
              return Hn = er.sent(), fn.params.input = [Hn, pe, se, Ie, he, tt, ht, wt, kt], fn.params.returnType = Vt, fn.params.returnBlob = Vt != k.ReturnedDataType.RT_BASE64, fn.handleResult = Nt._handleImageData, Nt._addTask(fn), [2, fn.promise];
          }
        });
      });
    }, function($) {
      $[$.NearestNeighbour = 1] = "NearestNeighbour", $[$.Bilinear = 2] = "Bilinear", $[$.Bicublic = 3] = "Bicublic", $[$.BestQuality = 5] = "BestQuality";
    }(Gi || (Gi = {}));
    var gi, ra, Ro = function($) {
      function pe(se) {
        return $.call(this, ot.ImageProcModule, se) || this;
      }
      return R(pe, $), pe.prototype.initImage = function(se, Ie, he, tt, ht) {
        return O(this, void 0, void 0, function() {
          var wt, kt, Vt;
          return J(this, function(Nt) {
            switch (Nt.label) {
              case 0:
                return Ie = Ie != null && Ie, he = he ?? 0, tt = tt ?? 0, ht = ht != null && ht, (kt = (wt = this)._createTask("InitImageObject")).params.input = [se, he, tt], Ie || ht ? (Ie ? kt.params.input.push(k.ImageType.IT_RGBA) : kt.params.input.push(k.ImageType.IT_BGRA), wt._addTask(kt), [3, 3]) : [3, 1];
              case 1:
                return [4, wt._readFile(se, kt)];
              case 2:
                Vt = Nt.sent(), kt.params.input[0] = Vt, kt.params.input.push(k.ImageType.IT_ALL), wt._addTask(kt), Nt.label = 3;
              case 3:
                return [2, kt.promise];
            }
          });
        });
      }, pe.prototype.rotate = function(se, Ie, he, tt) {
        return se = se ?? 0, he = he != null && he, tt = tt ?? Gi.Bicublic, Ie = Ie ?? "FFFFFF", (se < 0 || se > 360) && (se %= 360) < 0 && (se += 360), this._addTask(this._createTask("RotateEx", [se, he, tt, Ie], this._handleBooleanResult));
      }, pe.prototype.flip = function(se) {
        se = se ?? 1;
        var Ie = this._createTask("");
        return Ie.handleResult = this._handleBooleanResult, se === 1 ? Ie.func = "Flip" : se === -1 && (Ie.func = "Mirror"), this._addTask(Ie), Ie.promise;
      }, pe.prototype.erase = function(se, Ie, he, tt, ht) {
        ht = ht ?? "FFFFFF";
        var wt = this._createTask("Erase");
        return wt.handleResult = this._handleBooleanResult, wt.params.input = [se, Ie, he, tt, ht], this._addTask(wt), wt.promise;
      }, pe.prototype.crop = function(se, Ie, he, tt) {
        return this._addTask(this._createTask("Crop", [se, Ie, he, tt], this._handleBooleanResult));
      }, pe.prototype.resize = function(se, Ie, he) {
        return he = he ?? Gi.BestQuality, this._addTask(this._createTask("ChangeImageSize", [se, Ie, he], this._handleBooleanResult));
      }, pe.prototype.toGrayscale = function(se) {
        (se = se ?? 1) < 1 && (se = 1), se > 3 && (se = 3);
        var Ie = "";
        return se === 1 ? Ie = "0" : se === 2 ? Ie = "3;3;720;1.05" : se === 3 && (Ie = "3;5;1080;1.05"), this._addTask(this._createTask("ConvertToGrayScale", Ie, this._handleBooleanResult));
      }, pe.prototype.toBinary = function(se, Ie) {
        (Ie = Ie ?? 1) < 1 && (Ie = 1), Ie > 3 && (Ie = 3);
        var he = "";
        return se != null && (se ? he = "1" : Ie === 1 ? he = "0" : Ie === 2 ? he = "2;3;720;1.05" : Ie === 3 && (he = "2;5;1080;1.05")), this._addTask(this._createTask("ConvertToBWScale", he, this._handleBooleanResult));
      }, pe.prototype.invert = function() {
        return this._addTask(this._createTask("Invert", null, this._handleBooleanResult));
      }, pe.prototype.setImageWidth = function(se, Ie) {
        return Ie = Ie ?? "FFFFFF", this._addTask(this._createTask("SetImageWidth", [se, Ie], this._handleBooleanResult));
      }, pe.prototype.setImageHeight = function(se, Ie) {
        return Ie = Ie ?? "FFFFFF", this._addTask(this._createTask("SetImageHeight", [se, Ie], this._handleBooleanResult));
      }, pe.prototype.setDPI = function(se, Ie, he, tt, ht, wt) {
        return ht = ht != null && ht, wt = wt ?? Gi.Bilinear, this._addTask(this._createTask("SetDPI", [se, Ie, he, tt, ht, wt], this._handleBooleanResult));
      }, pe.prototype.getImage = function(se, Ie, he, tt, ht, wt, kt, Vt, Nt) {
        se = se ?? this._jpegQuality, Ie = Ie == null || Ie, he = he != null && he, tt = tt ?? 0, ht = ht ?? 0, wt = wt ?? 0, kt = kt == null || kt, Vt = he && Vt == null ? k.ImageType.IT_JPG : Vt ?? k.ImageType.IT_ALL, Nt = Nt != null && Nt;
        var fn = this._createTask("GetCurrentImage");
        return fn.params.input = [Vt, tt, ht, wt, !1, se, Ie, Nt], fn.params.returnBlob = kt, fn.handleResult = this._handleImageData, this._addTask(fn);
      }, pe.prototype.getSkewAngle = function(se) {
        return se = se ?? "", this._addTask(this._createTask("GetSkewAngle", [se], function(Ie, he) {
          return Ie.skewAngle;
        }));
      }, pe.prototype.freeReservedData = function() {
        return this._addTask(this._createTask("FreeReservedData", null, this._handleBooleanResult));
      }, pe.prototype.detectDocument = function(se, Ie, he, tt, ht) {
        return se = se ?? Gi.Bilinear, Ie = Ie ?? 75, he = he ?? 100, tt = tt ?? 0, ht = ht ?? "", this._addTask(this._createTask("DocumentDetect", [se, Ie / 100, he, tt / 255, ht, "1"]));
      }, pe.prototype.perspective = function(se, Ie, he, tt, ht, wt, kt, Vt) {
        return this._addTask(this._createTask("Perspective", [se, Ie, he, tt, ht, wt, kt, Vt], this._handleBooleanResult));
      }, pe.prototype.changeBrightness = function(se, Ie) {
        return se = se ?? 0, (Ie = Ie ?? 1) != 0 && Ie != 1 && (Ie = 0), Ie === 1 ? this._addTask(this._createTask("ChangeBrightnessAndContrast", [se, 0], this._handleBooleanResult)) : this._addTask(this._createTask("ChangeBrightness", [Math.floor(se / 1e3 * 255)], this._handleBooleanResult));
      }, pe.prototype.changeContrast = function(se, Ie) {
        return se = se ?? 0, (Ie = Ie ?? 1) != 0 && Ie != 1 && (Ie = 0), Ie === 1 ? this._addTask(this._createTask("ChangeBrightnessAndContrast", [0, se], this._handleBooleanResult)) : this._addTask(this._createTask("ChangeContrast", [1 + se / 1e3], this._handleBooleanResult));
      }, pe.prototype.changeBrightnessAndContrast = function(se, Ie) {
        return se = se ?? 0, Ie = Ie ?? 0, this._addTask(this._createTask("ChangeBrightnessAndContrast", [se, Ie], this._handleBooleanResult));
      }, pe.prototype.removeShadow = function(se, Ie) {
        Ie = Ie ?? 1.05, (se = se ?? 1) < 1 && (se = 1), se > 3 && (se = 3);
        var he = "5";
        return se === 1 ? he += ";3;720;" + Ie : se === 2 ? he += ";5;1080;" + Ie : se === 3 && (he += ";10;0;" + Ie), this._addTask(this._createTask("ShadowRemovel", [he], this._handleBooleanResult));
      }, pe.prototype.enhanceAndSharpenImage = function() {
        return this._addTask(this._createTask("EnhanceAndSharpen", [""], this._handleBooleanResult));
      }, pe.prototype.brighten = function() {
        return this._addTask(this._createTask("Brighten", [""], this._handleBooleanResult));
      }, pe.prototype.getBlurryScore = function() {
        return this._addTask(this._createTask("GetBlurScore", [""], function(se, Ie) {
          return se.blurryScore;
        }));
      }, pe.prototype.drawQuadrangle = function(se, Ie, he, tt, ht, wt, kt, Vt, Nt, fn) {
        var Hn = (Nt = Nt ?? "FFFFFF") + ";" + (fn = fn ?? 5);
        return this._addTask(this._createTask("DrawQuadrangle", [se, Ie, he, tt, ht, wt, kt, Vt, Hn], this._handleBooleanResult));
      }, pe;
    }(_i), zn = function() {
      function $() {
      }
      return $.resize = function(pe, se, Ie, he, tt, ht) {
        return O(this, void 0, void 0, function() {
          var wt, kt, Vt, Nt, fn;
          return J(this, function(Hn) {
            switch (Hn.label) {
              case 0:
                if (he <= 0 || he >= se && he >= Ie)
                  return [2, { imageData: pe }];
                ht = ht != null && ht, wt = new Ro(), Hn.label = 1;
              case 1:
                return Hn.trys.push([1, , 9, 10]), [4, wt.initImage(pe)];
              case 2:
                return Hn.sent(), kt = void 0, Vt = void 0, fn = tt ?? Gi.BestQuality, Nt = se > Ie ? se / he : Ie / he, kt = Math.floor(se / Nt + 0.5), Vt = Math.floor(Ie / Nt + 0.5), ht ? [4, wt.resize(kt, Vt, fn)] : [3, 5];
              case 3:
                return Hn.sent(), [4, wt.toBinary(!1)];
              case 4:
                return Hn.sent(), [3, 7];
              case 5:
                return [4, wt.resize(kt, Vt, fn)];
              case 6:
                Hn.sent(), Hn.label = 7;
              case 7:
                return [4, wt.getImage()];
              case 8:
                return [2, Hn.sent()];
              case 9:
                return wt.terminate(), [7];
              case 10:
                return [2];
            }
          });
        });
      }, $.createImage = function(pe) {
        var se, Ie, he, tt, ht, wt, kt, Vt, Nt;
        return O(this, void 0, void 0, function() {
          var fn, Hn, er, sr, li, Lr, Ci, Er, mr, yr, Gr, yi, ui, Ei, jn, ye, oe, ae, ie, _e, de, Se, Ae, ze, qe, Ke;
          return J(this, function(At) {
            switch (At.label) {
              case 0:
                fn = new Ro(), At.label = 1;
              case 1:
                return At.trys.push([1, , 14, 15]), Hn = { src: null, result: null, preview: null }, er = pe.source, sr = pe.output, li = (Ie = (se = er.imageWidth) !== null && se !== void 0 ? se : er.width) !== null && Ie !== void 0 ? Ie : 0, Lr = (tt = (he = er.imageHeight) !== null && he !== void 0 ? he : er.height) !== null && tt !== void 0 ? tt : 0, Ci = er.imageData || er.data, sr == null || sr.orgImage == null && sr.previewImage == null ? [2, Hn] : (Er = (ht = er.rgba) !== null && ht !== void 0 && ht, mr = (wt = er.bgra) !== null && wt !== void 0 && wt, yr = (kt = pe.doPerspective) !== null && kt !== void 0 && kt, Gr = er.angle || 0, [4, fn.initImage(Ci, Er, li, Lr, mr)]);
              case 2:
                return yi = At.sent(), Hn.src = yi.srcBuffer, yr && pe.polygon ? [4, fn.perspective(pe.polygon.points[0], pe.polygon.points[1], pe.polygon.points[2], pe.polygon.points[3], pe.polygon.points[4], pe.polygon.points[5], pe.polygon.points[6], pe.polygon.points[7])] : [3, 4];
              case 3:
                At.sent(), At.label = 4;
              case 4:
                return Gr == 0 ? [3, 6] : ((Gr < 0 || Gr > 360) && (Gr %= 360) < 0 && (Gr += 360), [4, fn.rotate(Gr)]);
              case 5:
                At.sent(), At.label = 6;
              case 6:
                return sr.orgImage ? (ui = sr.orgImage.returnBlob == null || sr.orgImage.returnBlob, Ei = er.imageBitDepth != null ? er.imageBitDepth : void 0, jn = er.imageXResolution != null ? er.imageXResolution : void 0, ye = er.imageYResolution != null ? er.imageYResolution : void 0, oe = ot.NavInfo.bMac || ot.NavInfo.biPhone || ot.NavInfo.biPad, [4, fn.getImage(sr.orgImage.quality, !1, Er || mr, Ei, jn, ye, ui, sr.orgImage.returnType, oe)]) : [3, 8];
              case 7:
                ae = At.sent(), sr.orgImage.returnType == k.ImageType.IT_BGRA ? ae.bgra = !0 : sr.orgImage.returnType == k.ImageType.IT_RGBA && (ae.rgba = !0), Hn.result = ae, At.label = 8;
              case 8:
                return sr.previewImage ? (ie = li, _e = Lr, Gr != 90 && Gr != 270 || (ie = Lr, _e = li), de = Math.min(((Vt = sr.previewImage.width) !== null && Vt !== void 0 ? Vt : li) / ie, ((Nt = sr.previewImage.height) !== null && Nt !== void 0 ? Nt : Lr) / _e), Se = void 0, Ae = void 0, Gr == 90 || Gr == 270 ? (Se = Math.floor(Lr * de + 0.5), Ae = Math.floor(li * de + 0.5)) : (Se = Math.floor(li * de + 0.5), Ae = Math.floor(Lr * de + 0.5)), [4, fn.resize(Se, Ae, sr.previewImage.nInterplationMethod)]) : [3, 13];
              case 9:
                return At.sent(), !pe.polygon || yr ? [3, 11] : (ze = pe.polygon.points, Gr != 0 && (ze = E(this, gi, "m", ra).call(this, ze, Gr, ie, _e)), [4, fn.drawQuadrangle(Math.floor(ze[0] * de + 0.5), Math.floor(ze[1] * de + 0.5), Math.floor(ze[2] * de + 0.5), Math.floor(ze[3] * de + 0.5), Math.floor(ze[4] * de + 0.5), Math.floor(ze[5] * de + 0.5), Math.floor(ze[6] * de + 0.5), Math.floor(ze[7] * de + 0.5), pe.polygon.strokeColor, pe.polygon.lineWidth)]);
              case 10:
                At.sent(), At.label = 11;
              case 11:
                return qe = sr.previewImage.returnBlob == null || sr.previewImage.returnBlob, [4, fn.getImage(sr.previewImage.quality, !0, Er || mr, void 0, void 0, void 0, qe, sr.previewImage.returnType)];
              case 12:
                Ke = At.sent(), sr.previewImage.returnType == k.ImageType.IT_BGRA ? Ke.bgra = !0 : sr.previewImage.returnType == k.ImageType.IT_RGBA && (Ke.rgba = !0), Hn.preview = Ke, At.label = 13;
              case 13:
                return [2, Hn];
              case 14:
                return fn.terminate(), [7];
              case 15:
                return [2];
            }
          });
        });
      }, $.resizeImageWithMeta = function(pe, se, Ie, he, tt) {
        return O(this, void 0, void 0, function() {
          var ht, wt, kt, Vt, Nt, fn, Hn, er, sr, li;
          return J(this, function(Lr) {
            switch (Lr.label) {
              case 0:
                ht = he ?? 85, wt = new Ro(), kt = tt ?? 0, Lr.label = 1;
              case 1:
                return Lr.trys.push([1, , 9, 10]), [4, wt.initImage(pe)];
              case 2:
                return Lr.sent(), Vt = void 0, Nt = void 0, fn = Ie ?? Gi.BestQuality, se.imageWidth > se.imageHeight ? (Vt = kt, Nt = Math.floor(se.imageHeight * kt / se.imageWidth + 0.5)) : (Vt = Math.floor(se.imageWidth * kt / se.imageHeight + 0.5), Nt = kt), se.imageBitDepth != 1 ? [3, 5] : [4, wt.resize(Vt, Nt, fn)];
              case 3:
                return Lr.sent(), [4, wt.toBinary(!1)];
              case 4:
                return Lr.sent(), [3, 7];
              case 5:
                return [4, wt.resize(Vt, Nt, fn)];
              case 6:
                Lr.sent(), Lr.label = 7;
              case 7:
                return Hn = se.imageBitDepth, er = se.imageXResolution, sr = se.imageYResolution, li = Hn == 1 ? k.ImageType.IT_PNG : k.ImageType.IT_JPG, [4, wt.getImage(ht, !1, !1, Hn, er, sr, !0, li)];
              case 8:
                return [2, Lr.sent()];
              case 9:
                return wt.terminate(), [7];
              case 10:
                return [2];
            }
          });
        });
      }, $.getMax4kImage = function(pe, se, Ie, he) {
        return O(this, void 0, void 0, function() {
          var tt, ht, wt, kt, Vt;
          return J(this, function(Nt) {
            switch (Nt.label) {
              case 0:
                tt = Ie ?? 85, wt = new Gn(), Nt.label = 1;
              case 1:
                return Nt.trys.push([1, , 3, 4]), [4, wt.readImageInfo(pe)];
              case 2:
                return kt = Nt.sent(), ht = { imageWidth: kt.imageWidth, imageHeight: kt.imageHeight, imageBitDepth: kt.imageBitDepth, imageXResolution: kt.imageXResolution, imageYResolution: kt.imageYResolution }, [3, 4];
              case 3:
                return wt.terminate(), [7];
              case 4:
                return (ot.NavInfo.biPhone || ot.NavInfo.biPad) && he && (ht.imageWidth > he || ht.imageHeight > he) ? [4, $.resizeImageWithMeta(pe, ht, se, Ie, he)] : [3, 6];
              case 5:
                return [2, Nt.sent()];
              case 6:
                wt = new Gn(), Nt.label = 7;
              case 7:
                return Nt.trys.push([7, , 9, 10]), Vt = ht.imageBitDepth == 1 ? k.ImageType.IT_PNG : k.ImageType.IT_JPG, [4, wt.readImage(pe, Vt, tt, !1)];
              case 8:
                return [2, Nt.sent()];
              case 9:
                return wt.terminate(), [7];
              case 10:
                return [2];
            }
          });
        });
      }, $;
    }();
    gi = zn, ra = function($, pe, se, Ie) {
      for (var he = [], tt = 0; tt < $.length; tt += 2) {
        var ht = void 0, wt = void 0, kt = $[tt], Vt = $[tt + 1];
        pe == 90 ? (ht = se - Vt, wt = kt) : pe == 180 ? (ht = se - kt, wt = Ie - Vt) : pe == 270 ? (ht = Vt, wt = Ie - kt) : (ht = kt, wt = Vt), he.push(ht, wt);
      }
      return he;
    };
    var Ur, pt, ia, ma = function() {
      function $() {
      }
      return $.decode = function(pe) {
        var se = { encodeChars: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", decodeChars: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1] };
        function Ie(he) {
          var tt, ht, wt, kt, Vt = [], Nt = he.length;
          for (tt = 0; tt < Nt; tt++)
            (ht = he.charCodeAt(tt)) >> 7 & 255 ? (ht >> 5 & 255) == 6 ? (kt = (31 & ht) << 6 | 63 & (wt = he.charCodeAt(++tt)), Vt.push(String.fromCharCode(kt))) : (ht >> 4 & 255) == 14 && (kt = (255 & (ht << 4 | (wt = he.charCodeAt(++tt)) >> 2 & 15)) << 8 | (3 & wt) << 6 | 63 & he.charCodeAt(++tt), Vt.push(String.fromCharCode(kt))) : Vt.push(he.charAt(tt));
          return Vt.join("");
        }
        return function(he) {
          for (var tt, ht, wt, kt, Vt = [], Nt = 0, fn = he.length; Nt < fn; ) {
            do
              tt = se.decodeChars[255 & he.charCodeAt(Nt++)];
            while (Nt < fn && tt == -1);
            if (tt == -1)
              break;
            do
              ht = se.decodeChars[255 & he.charCodeAt(Nt++)];
            while (Nt < fn && ht == -1);
            if (ht == -1)
              break;
            Vt.push(String.fromCharCode(tt << 2 | (48 & ht) >> 4));
            do {
              if ((wt = 255 & he.charCodeAt(Nt++)) == 61)
                return Ie(Vt.join(""));
              wt = se.decodeChars[wt];
            } while (Nt < fn && wt == -1);
            if (wt == -1)
              break;
            Vt.push(String.fromCharCode((15 & ht) << 4 | (60 & wt) >> 2));
            do {
              if ((kt = 255 & he.charCodeAt(Nt++)) == 61)
                return Ie(Vt.join(""));
              kt = se.decodeChars[kt];
            } while (Nt < fn && kt == -1);
            if (kt == -1)
              break;
            Vt.push(String.fromCharCode((3 & wt) << 6 | kt));
          }
          return Ie(Vt.join(""));
        }(pe);
      }, $;
    }();
    (function($) {
      $[$.render = 1] = "render", $[$.extractImageOnly = 2] = "extractImageOnly", $[$.auto = 3] = "auto", $[$.renderWithAnnot = 4] = "renderWithAnnot";
    })(ia || (ia = {}));
    var pa = function($) {
      function pe(se) {
        var Ie = $.call(this, ot.PdfReaderModule, se) || this;
        return Ur.set(Ie, 200), pt.set(Ie, 3), Ie._outputType = k.ImageType.IT_ALL, Ie;
      }
      return R(pe, $), pe.prototype.open = function(se, Ie) {
        return O(this, void 0, void 0, function() {
          var he, tt, ht;
          return J(this, function(wt) {
            switch (wt.label) {
              case 0:
                return Ie = Ie ?? "", tt = (he = this)._createTask("LoadPdf"), [4, he._readFile(se, tt)];
              case 1:
                return ht = wt.sent(), tt.params.input = [ht, Ie], tt.handleResult = function(kt, Vt) {
                  if (kt.srcBuffer) {
                    var Nt = Object.prototype.toString.call(se);
                    Nt != "[object ArrayBuffer]" && Nt != "[object Uint8ClampedArray]" && delete kt.srcBuffer;
                  }
                  var fn = ma.decode(kt.infoBase64);
                  try {
                    var Hn = void 0;
                    try {
                      fn.replace(new RegExp("\\\\", "gi"), "\\\\"), Hn = JSON.parse(fn);
                    } catch {
                      Hn = fn;
                    }
                    var er = { PdfCount: kt.pageCount, PdfInfo: Hn, isTextBased: kt.isTextBased };
                    return kt.srcBuffer && (er.srcBuffer = kt.srcBuffer, delete kt.srcBuffer), er;
                  } catch (sr) {
                    Vt.reject({ code: H.wasmJsInvalidJson, message: sr.message, stack: sr.stack });
                  }
                }, he._addTask(tt), [2, tt.promise];
            }
          });
        });
      }, pe.prototype.readPage = function(se, Ie, he, tt, ht, wt, kt) {
        return O(this, void 0, void 0, function() {
          var Vt;
          return J(this, function(Nt) {
            return se = se ?? 0, Ie = Ie ?? E(this, Ur, "f"), he = he ?? E(this, pt, "f"), tt = tt ?? this._outputType, wt = wt != null && wt, ht = ht != null && ht, kt = kt != null && kt, (Vt = this._createTask("ReadPdfPage")).params.input = [se, Ie, he, tt, ht, kt], Vt.params.returnType = wt ? k.ReturnedDataType.RT_BASE64 : k.ReturnedDataType.RT_AUTO, Vt.params.returnBlob = !wt, Vt.handleResult = this._handleImageData, [2, this._addTask(Vt)];
          });
        });
      }, pe.prototype.close = function() {
        return O(this, void 0, void 0, function() {
          return J(this, function(se) {
            return [2, this._addTask(this._createTask("UnloadPdf", null, this._handleBooleanResult))];
          });
        });
      }, pe.prototype.readPageAnnot = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie;
          return J(this, function(he) {
            return se = se ?? 0, (Ie = this._createTask("ReadPdfAnnot", [se])).handleResult = function(tt, ht) {
              var wt = ma.decode(tt.annotBase64);
              try {
                var kt = void 0;
                try {
                  wt.replace(new RegExp("\\\\", "gi"), "\\\\"), kt = JSON.parse(wt);
                } catch {
                  kt = wt;
                }
                return { code: tt.code, message: tt.message, pageIndex: tt.pageIndex, annots: kt };
              } catch (Vt) {
                ht.reject({ code: H.wasmJsInvalidJson, message: Vt.message, stack: Vt.stack });
              }
            }, [2, this._addTask(Ie)];
          });
        });
      }, pe.prototype.setRenderLimitImageSize = function(se, Ie) {
        return O(this, void 0, void 0, function() {
          return J(this, function(he) {
            return se = se ?? 0, Ie = Ie ?? 0, [2, this._addTask(this._createTask("SetRenderLimitImageSize", [se, Ie], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.findText = function(se, Ie, he) {
        return O(this, void 0, void 0, function() {
          return J(this, function(tt) {
            return he = he ?? 0, [2, this._addTask(this._createTask("FindText", [se, Ie, he]))];
          });
        });
      }, pe.prototype.addSystemFont = function(se, Ie) {
        return O(this, void 0, void 0, function() {
          return J(this, function(he) {
            return [2, this._addTask(this._createTask("AddSystemFont", [se, Ie]))];
          });
        });
      }, pe.prototype.getModifiedPdf = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie;
          return J(this, function(he) {
            return (Ie = this._createTask("GetModifiedPdf")).params.returnType = se ?? k.ReturnedDataType.RT_AUTO, Ie.params.returnBlob = se != k.ReturnedDataType.RT_AUTO, Ie.handleResult = this._handleImageData, [2, this._addTask(Ie)];
          });
        });
      }, pe.prototype.addAnnot = function(se, Ie) {
        return O(this, void 0, void 0, function() {
          var he;
          return J(this, function(tt) {
            return se = se ?? 0, he = Ie.toJsonString(), [2, this._addTask(this._createTask("PageAddAnnot", [se, he], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.addImage = function(se, Ie, he) {
        return O(this, void 0, void 0, function() {
          var tt, ht, wt, kt;
          return J(this, function(Vt) {
            switch (Vt.label) {
              case 0:
                return se = se ?? 0, tt = JSON.stringify(he), wt = (ht = this)._createTask("PageAddImage"), [4, ht._readFile(Ie, wt)];
              case 1:
                return kt = Vt.sent(), wt.params.input = [se, tt, kt, 0, 0], wt.handleResult = ht._handleBooleanResult, ht._addTask(wt), [2, wt.promise];
            }
          });
        });
      }, pe.prototype.addText = function(se, Ie) {
        return O(this, void 0, void 0, function() {
          var he;
          return J(this, function(tt) {
            return se = se ?? 0, he = JSON.stringify(Ie), [2, this._addTask(this._createTask("PageAddText", [se, he], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.addPath = function(se, Ie) {
        return O(this, void 0, void 0, function() {
          var he;
          return J(this, function(tt) {
            return he = JSON.stringify(Ie), [2, this._addTask(this._createTask("PageAddPath", [se, he], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.deleteAnnot = function(se, Ie) {
        return O(this, void 0, void 0, function() {
          return J(this, function(he) {
            return se = se ?? 0, Ie = Ie ?? 0, [2, this._addTask(this._createTask("PageDeleteAnnot", [se, Ie], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.deletePage = function(se) {
        return O(this, void 0, void 0, function() {
          return J(this, function(Ie) {
            return se = se ?? 0, [2, this._addTask(this._createTask("DeletePdfPage", [se], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.changePagesOrder = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie, he;
          return J(this, function(tt) {
            for (se = se ?? [], Ie = "", he = 0; he < se.length; he++)
              he != 0 && (Ie += ","), Ie += se[he] + 1;
            return [2, this._addTask(this._createTask("ChangePagesOrder", [Ie], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.rotatePageLeft = function(se) {
        return O(this, void 0, void 0, function() {
          return J(this, function(Ie) {
            return se = se ?? 0, [2, this._addTask(this._createTask("PageRotateLeft", [se], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.rotatePageRight = function(se) {
        return O(this, void 0, void 0, function() {
          return J(this, function(Ie) {
            return se = se ?? 0, [2, this._addTask(this._createTask("PageRotateRight", [se], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.insertBlankPage = function(se, Ie, he) {
        return O(this, void 0, void 0, function() {
          return J(this, function(tt) {
            return se = se ?? 0, Ie = Ie ?? 595, he = he ?? 842, [2, this._addTask(this._createTask("InsertBlankPdfPage", [se, Ie, he], this._handleBooleanResult))];
          });
        });
      }, pe.prototype.mergePdf = function(se, Ie, he, tt) {
        return O(this, void 0, void 0, function() {
          var ht, wt, kt, Vt, Nt;
          return J(this, function(fn) {
            switch (fn.label) {
              case 0:
                for (tt = tt ?? -1, he = he ?? [], Ie = Ie ?? "", wt = (ht = this)._createTask("MergePdfPage"), kt = "", Vt = 0; Vt < he.length; Vt++)
                  Vt != 0 && (kt += ","), kt += he[Vt] + 1;
                return [4, ht._readFile(se, wt)];
              case 1:
                return Nt = fn.sent(), wt.params.input = [Nt, tt, Ie, kt], wt.handleResult = ht._handleBooleanResult, ht._addTask(wt), [2, wt.promise];
            }
          });
        });
      }, pe.prototype.getPageInfo = function(se) {
        return O(this, void 0, void 0, function() {
          return J(this, function(Ie) {
            return se = se ?? 0, [2, this._addTask(this._createTask("GetPdfPageInfo", [se]))];
          });
        });
      }, pe;
    }(Zi);
    Ur = /* @__PURE__ */ new WeakMap(), pt = /* @__PURE__ */ new WeakMap();
    var Vo, Co, oi, vi, ar, _o = function($) {
      function pe(se) {
        return $.call(this, se) || this;
      }
      return R(pe, $), pe.prototype.readPage = function(se, Ie, he, tt, ht, wt, kt, Vt, Nt, fn) {
        return O(this, void 0, void 0, function() {
          var Hn, er;
          return J(this, function(sr) {
            switch (sr.label) {
              case 0:
                return [4, $.prototype.readPage.call(this, se, Ie, he, tt, ht, wt, kt)];
              case 1:
                return Hn = sr.sent(), er = { imageWidth: Hn.imageWidth, imageHeight: Hn.imageHeight, imageBitDepth: Hn.imageBitDepth, imageXResolution: Hn.imageXResolution, imageYResolution: Hn.imageYResolution }, fn && (er.imageWidth > fn || er.imageHeight > fn) ? [4, zn.resizeImageWithMeta(Hn.imageData, er, Vt, Nt, fn)] : [3, 3];
              case 2:
                return [2, sr.sent()];
              case 3:
                return [2, Hn];
            }
          });
        });
      }, pe;
    }(pa), Ln = function($) {
      function pe(se) {
        return $.call(this, se) || this;
      }
      return R(pe, $), pe.prototype.readTiff = function(se, Ie, he, tt, ht, wt, kt) {
        return O(this, void 0, void 0, function() {
          var Vt, Nt;
          return J(this, function(fn) {
            switch (fn.label) {
              case 0:
                return [4, $.prototype.readTiff.call(this, se, Ie, he, tt)];
              case 1:
                return Vt = fn.sent(), Nt = { imageWidth: Vt.imageWidth, imageHeight: Vt.imageHeight, imageBitDepth: Vt.imageBitDepth, imageXResolution: Vt.imageXResolution, imageYResolution: Vt.imageYResolution }, kt && (Nt.imageWidth > kt || Nt.imageHeight > kt) ? [2, zn.resizeImageWithMeta(Vt.imageData, Nt, ht, wt, kt)] : [2, Vt];
            }
          });
        });
      }, pe;
    }(Gn), ln = function() {
      function $() {
      }
      return $.buildWasmFileName = function(pe, se, Ie, he) {
        return pe + (he ? "sn-" : "") + se + Ie;
      }, $.base64DecToArr = function(pe, se) {
        for (var Ie = pe.replace(/[^A-Za-z0-9\+\/]/g, ""), he = Ie.length, tt = se ? Math.ceil((3 * he + 1 >>> 2) / se) * se : 3 * he + 1 >>> 2, ht = new Uint8Array(tt), wt = void 0, kt = void 0, Vt = 0, Nt = 0, fn = 0; fn < he; fn++)
          if (kt = 3 & fn, Vt |= E(this, Vo, "m", Co).call(this, Ie.charCodeAt(fn)) << 18 - 6 * kt, kt === 3 || he - fn == 1) {
            for (wt = 0; wt < 3 && Nt < tt; wt++, Nt++)
              ht[Nt] = Vt >>> (16 >>> wt & 24) & 255;
            Vt = 0;
          }
        return ht;
      }, $.isWasmSupport = function() {
        try {
          if (typeof WebAssembly == "object" && typeof WebAssembly.instantiate == "function") {
            var pe = new WebAssembly.Module(Uint8Array.of(0, 97, 115, 109, 1, 0, 0, 0));
            if (pe instanceof WebAssembly.Module)
              return new WebAssembly.Instance(pe) instanceof WebAssembly.Instance;
          }
        } catch {
        }
        return !1;
      }, $.random = function() {
        return (Date.now() % 10086).toString(36).slice(2) + Math.random().toString(36).slice(2);
      }, $;
    }();
    Vo = ln, Co = function($) {
      return $ > 64 && $ < 91 ? $ - 65 : $ > 96 && $ < 123 ? $ - 71 : $ > 47 && $ < 58 ? $ + 4 : $ === 43 ? 62 : $ === 47 ? 63 : 0;
    }, function($) {
      $[$.auto = 0] = "auto", $[$.store = 1] = "store";
    }(ar || (ar = {}));
    var mn = function($) {
      function pe(se) {
        var Ie = $.call(this, ot.PdfWriterModule, se) || this;
        return oi.add(Ie), Ie;
      }
      return R(pe, $), pe.prototype.initPdfSetting = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie, he;
          return J(this, function(tt) {
            return (he = (Ie = this)._createTask("InitPdfWriter")).params.input = JSON.stringify(E(Ie, oi, "m", vi).call(Ie, se)), he.handleResult = this._handleBooleanResult, [2, Ie._addTask(he)];
          });
        });
      }, pe.prototype.appendPage = function(se, Ie) {
        return O(this, void 0, void 0, function() {
          var he, tt, ht;
          return J(this, function(wt) {
            switch (wt.label) {
              case 0:
                return tt = (he = this)._createTask("AddPageFromImageFileStream"), Ie = Ie != null && Ie, [4, he._readFile(se, tt)];
              case 1:
                return ht = wt.sent(), tt.params.input = [ht, Ie], tt.handleResult = he._handleBooleanResult, he._addTask(tt), [2, tt.promise];
            }
          });
        });
      }, pe.prototype.writePdf = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie;
          return J(this, function(he) {
            return (Ie = this._createTask("GetPdfContent")).params.returnType = se ?? k.ReturnedDataType.RT_AUTO, Ie.params.returnBlob = se != k.ReturnedDataType.RT_AUTO, Ie.handleResult = this._handleImageData, [2, this._addTask(Ie)];
          });
        });
      }, pe.prototype.newPage = function(se, Ie) {
        return O(this, void 0, void 0, function() {
          var he;
          return J(this, function(tt) {
            return se = se ?? 595, Ie = Ie ?? 842, (he = this._createTask("NewPdfPage")).params.input = [se, Ie], he.handleResult = this._handleBooleanResult, [2, this._addTask(he)];
          });
        });
      }, pe.prototype.writePage = function() {
        return O(this, void 0, void 0, function() {
          var se;
          return J(this, function(Ie) {
            return (se = this._createTask("WritePdfPage")).handleResult = this._handleBooleanResult, [2, this._addTask(se)];
          });
        });
      }, pe.prototype.pageSetRotate = function(se) {
        return O(this, void 0, void 0, function() {
          var Ie;
          return J(this, function(he) {
            return (se = se ?? 0) !== 0 && se !== 90 && se !== 180 && se !== 270 && (se = 0), (Ie = this._createTask("PdfPageSetRotate")).params.input = [se], Ie.handleResult = this._handleBooleanResult, [2, this._addTask(Ie)];
          });
        });
      }, pe.prototype.pageAddImage = function(se, Ie, he, tt) {
        return O(this, void 0, void 0, function() {
          var ht, wt, kt, Vt;
          return J(this, function(Nt) {
            switch (Nt.label) {
              case 0:
                return wt = (ht = this)._createTask("PdfPageAddImage"), tt = tt != null && tt, Ie = Ie ?? 0, kt = JSON.stringify(E(ht, oi, "m", vi).call(ht, he)), [4, ht._readFile(se, wt)];
              case 1:
                return Vt = Nt.sent(), wt.params.input = [Vt, Ie, kt, tt], wt.handleResult = ht._handleBooleanResult, ht._addTask(wt), [2, wt.promise];
            }
          });
        });
      }, pe;
    }(_i);
    oi = /* @__PURE__ */ new WeakSet(), vi = function($) {
      var pe = {};
      if ($ != null && typeof $ == "object")
        for (var se in $)
          pe[se] = $[se];
      return pe;
    };
    var Hr = function() {
      function $() {
      }
      return $.log = function(pe, se) {
        this.logLevel === se && (typeof this.logFunc == "function" ? this.logFunc(pe) : console.log(pe));
      }, $.setLoglevel = function(pe, se) {
        this.logLevel = pe === 1 ? C.logDebug : "", this.logFunc = se, ot.setLogFunc(this.logLevel, se);
      }, $.getMemoryUsed = function() {
        return rt.Instance.getMemoryUsed();
      }, $.getLicenseInfo = function(pe, se, Ie) {
        return O(this, void 0, void 0, function() {
          var he;
          return J(this, function(tt) {
            switch (tt.label) {
              case 0:
                return this.Init(pe, se, Ie), se ? [4, rt.Instance.loadModule(ot.CryptoModule)] : [3, 2];
              case 1:
                tt.sent(), tt.label = 2;
              case 2:
                return [4, rt.Instance.loadModule(ot.ImageIOModule)];
              case 3:
                tt.sent(), he = new Gn(this.productKey), tt.label = 4;
              case 4:
                return tt.trys.push([4, , 6, 7]), [4, he.getLicenseInfo()];
              case 5:
                return [2, tt.sent()];
              case 6:
                return he.terminate(), [7];
              case 7:
                return [2];
            }
          });
        });
      }, $.Init = function(pe, se, Ie) {
        this.productKey = pe ?? this.productKey, se !== void 0 && (this.licMode = se ? 1 : 0), this.uuid = Ie ?? this.uuid, ot.License = this.productKey, ot.UUID = this.uuid, ot.LicMode = this.licMode, ot.NavInfo = JSON.parse(JSON.stringify(L.navInfo)), ot.Mobile = L.Lib.env.bMobile, this.simdFlag === F.SF_ENABLE ? ot.UseSimd = !0 : this.simdFlag === F.SF_DISABLE ? ot.UseSimd = !1 : ot.UseSimd = this.getUseSimd();
        var he = { resourceDir: this.resourceDir, workerScript: "", useFastCompEdition: this.useFastcompEdition, useSimd: ot.UseSimd, fetchOptions: this.fetchOptions, defHeapSize: ot.DefHeapSize, maxHeapSize: ot.MaxHeapSize };
        he.workerScript = ot.ImageIOWorkerJS, he.defHeapSize = this.wasmHeap[this.ImageIOWasm].initHeapSize, he.maxHeapSize = this.wasmHeap[this.ImageIOWasm].maxHeapSize, ot.ImageIOResource = he;
        var tt = q({}, he);
        tt.defHeapSize = this.wasmHeap[this.PdfReaderWasm].initHeapSize, tt.maxHeapSize = this.wasmHeap[this.PdfReaderWasm].maxHeapSize, tt.workerScript = ot.PdfReaderWorkerJS, ot.PdfReaderResource = tt, this.logLevel === "" || this.logFunc || this.setLoglevel(1, console.log);
      }, $.loadPdfReader = function(pe, se, Ie) {
        return O(this, void 0, void 0, function() {
          var he;
          return J(this, function(tt) {
            switch (tt.label) {
              case 0:
                return this.Init(pe, se, Ie), this.loadStatePdf == "Pending" ? [2, !1] : (this.loadStatePdf = "Pending", [4, rt.Instance.loadModule(ot.ImageProcModule)]);
              case 1:
                return tt.sent(), [4, rt.Instance.loadModule(ot.PdfReaderModule)];
              case 2:
                return he = tt.sent(), this.loadStatePdf = "", [2, he];
            }
          });
        });
      }, $.loadMain = function(pe, se, Ie) {
        return O(this, void 0, void 0, function() {
          var he;
          return J(this, function(tt) {
            switch (tt.label) {
              case 0:
                return this.Init(pe, se, Ie), this.loadStateMain == "Pending" ? [2, !1] : (this.loadStateMain = "Pending", [4, rt.Instance.loadModule(ot.ImagecoreModule)]);
              case 1:
                return he = tt.sent(), rt.Instance.loadModule(ot.ImageProcModule), this.loadStateMain = "", [2, he];
            }
          });
        });
      }, $.load = function(pe, se, Ie) {
        return O(this, void 0, void 0, function() {
          return J(this, function(he) {
            switch (he.label) {
              case 0:
                return rt.Instance.terminate(!0), this.Init(pe, se, Ie), [4, this.loadMain(pe, se, Ie)];
              case 1:
                return he.sent(), [4, this.loadPdfReader(pe, se, Ie)];
              case 2:
                return he.sent(), [2];
            }
          });
        });
      }, $.unloadMain = function() {
        rt.Instance.terminateWorker(ot.ImageIOModule);
      }, $.unloadPdfReader = function() {
        rt.Instance.terminateWorker(ot.PdfReaderModule);
      }, $.unload = function() {
        return O(this, void 0, void 0, function() {
          return J(this, function(pe) {
            switch (pe.label) {
              case 0:
                return [4, rt.Instance.terminate(!0)];
              case 1:
                return pe.sent(), [2];
            }
          });
        });
      }, $.getUseSimd = function() {
        if (this.useFastcompEdition)
          return !1;
        if (this.simdFlag === F.SF_DEF) {
          if (navigator.userAgentData !== void 0 && navigator.userAgentData.brands !== void 0)
            for (var pe = 0, se = navigator.userAgentData.brands; pe < se.length; pe++) {
              var Ie = se[pe];
              if (Ie.brand && (Ie.brand === "Chromium" || Ie.brand === "Google Chrome") && Ie.version && parseInt(Ie.version, 10) >= 94)
                return !0;
            }
        } else if (this.simdFlag === F.SF_ENABLE)
          return !0;
        return !1;
      }, $.resourceDir = L.DWT.ResourcesPath + "/src/", $.logLevel = L.DWT.Debug ? C.logDebug : "", $.logFunc = null, $.productKey = "", $.licMode = U.LONG_KEY, $.uuid = "", $.fetchOptions = { mode: "cors", credentials: "same-origin", retries: 3, retryDelay: 500 }, $.simdFlag = F.SF_DEF, $.useFastcompEdition = !1, $.ImageIOWasm = 0, $.PdfReaderWasm = 1, $.loadStatePdf = "", $.loadStateMain = "", $.wasmHeap = [{ maxHeapSize: 300, initHeapSize: ot.DefHeapSize }, { maxHeapSize: 200, initHeapSize: ot.DefHeapSize }], $;
    }(), Rr = function() {
      function $() {
      }
      return $.IsModuleInstalled = function() {
        if (ln.isWasmSupport()) {
          var pe = rt.Instance.getModuleStatus(C.pdfR), se = rt.Instance.getModuleStatus(C.pdfW);
          return pe === p.ready && se === p.ready;
        }
        return !1;
      }, $;
    }();
    k.ImageProc = Ro, k.ImageProcWrapper = zn, k.ImagecoreEx = Ln, k.PdfAnnot = ei, k.PdfReaderEx = _o, k.PdfSettings = function() {
      this.version = void 0, this.compression = void 0, this.author = void 0, this.creationDate = void 0, this.creator = void 0, this.keywords = void 0, this.modifiedDate = void 0, this.producer = void 0, this.subject = void 0, this.title = void 0, this.quality = void 0, this.jpegMode = void 0;
    }, k.PdfWriter = mn, k.WasmEnv = Hr, k.pdf = Rr, Object.defineProperty(k, "__esModule", { value: !0 });
  }), L.WasmEnv = L.ImageIO.WasmEnv, L.Imagecore = L.ImageIO.ImagecoreEx, L.ImageProc = L.ImageIO.ImageProc, L.PdfReader = L.ImageIO.PdfReaderEx, L.PdfWriter = L.ImageIO.PdfWriter, L.ImageProcWrapper = L.ImageIO.ImageProcWrapper, L.pdf = L.ImageIO.pdf, L.Enum_ImageType = L.ImageIO.ImageType, L.Enum_ReturnType = L.ImageIO.ReturnedDataType;
});
/*! 20221212133727
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: BarcodeReader
* Version: 18.0
* 
*/
var G = self.Dynamsoft || {};
G.DWT = G.DWT || {}, G.DBR = G.DBR || {}, G.aryAddonReadyFun = G.aryAddonReadyFun || [], G.AddonReady = G.AddonReady || function(l) {
  G.aryAddonReadyFun.push(l);
}, function() {
  G.BarcodeReaderAddon = G.BarcodeReaderAddon || {};
  var l = G.BarcodeReaderAddon;
  l.Version = "9.4.0.1025", l._decoding = !1, l._decodeQueue = [], l._decodeNext = function() {
    var n, L;
    l._decodeQueue.length == 0 ? l._decoding = !1 : (n = (L = l._decodeQueue[0]).method, L = L.args, l._decodeQueue.splice(0, 1), n.apply(null, L));
  }, l._defaultRuntimeSettingsStr = "", l._defaultTemplateStr = "", l._wasmInstance = !1, l._activeXInstance = !1, l.BarcodeReaderException = function() {
    var L = arguments[0], n = G.DBR.EnumErrorCode.DBR_UNKNOWN, L = typeof L == "number" ? (n = L, new Error(arguments[1])) : new Error(L);
    return L.code = n, L;
  }, l.RemoveNonPrintableChar = function(n) {
    return G.Lib.isString(n) ? n.replace(/[^\x20-\x7E]|(\\")/g, "") : n;
  }, l.errors = { webcamNotInstalled: "The Webcam add-on not installed.", nonServiceNotSupportWebcamDecode: "The BarcodeReader add-on does not support reading barcodes from video streams.", decodeResultEmpty: "decode result is empty." }, l._activeXMaxIEVersion = 9, l.logLevel = 3, G.DBR.EnumAccompanyingTextRecognitionMode = { ATRM_GENERAL: 1, ATRM_SKIP: 0 }, G.DBR.EnumBarcodeColourMode = { BICM_DARK_ON_LIGHT: 1, BICM_LIGHT_ON_DARK: 2, BICM_DARK_ON_DARK: 4, BICM_LIGHT_ON_LIGHT: 8, BICM_DARK_LIGHT_MIXED: 16, BICM_DARK_ON_LIGHT_DARK_SURROUNDING: 32, BICM_SKIP: 0 }, G.DBR.EnumBarcodeComplementMode = { BCM_AUTO: 1, BCM_GENERAL: 2, BCM_SKIP: 0 }, G.DBR.EnumBarcodeFormat = { BF_ALL: -32505857, BF_ONED: 2047, BF_GS1_DATABAR: 260096, BF_CODE_39: 1, BF_CODE_128: 2, BF_CODE_93: 4, BF_CODABAR: 8, BF_ITF: 16, BF_EAN_13: 32, BF_EAN_8: 64, BF_UPC_A: 128, BF_UPC_E: 256, BF_INDUSTRIAL_25: 512, BF_CODE_39_EXTENDED: 1024, BF_GS1_DATABAR_OMNIDIRECTIONAL: 2048, BF_GS1_DATABAR_TRUNCATED: 4096, BF_GS1_DATABAR_STACKED: 8192, BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL: 16384, BF_GS1_DATABAR_EXPANDED: 32768, BF_GS1_DATABAR_EXPANDED_STACKED: 65536, BF_GS1_DATABAR_LIMITED: 131072, BF_PATCHCODE: 262144, BF_PDF417: 33554432, BF_QR_CODE: 67108864, BF_DATAMATRIX: 134217728, BF_AZTEC: 268435456, BF_MAXICODE: 536870912, BF_MICRO_QR: 1073741824, BF_MICRO_PDF417: 524288, BF_GS1_COMPOSITE: -2147483648, BF_NULL: 0 }, G.DBR.EnumBarcodeFormat_2 = { BF2_NULL: 0, BF2_POSTALCODE: 32505856, BF2_NONSTANDARD_BARCODE: 1, BF2_USPSINTELLIGENTMAIL: 1048576, BF2_POSTNET: 2097152, BF2_PLANET: 4194304, BF2_AUSTRALIANPOST: 8388608, BF2_RM4SCC: 16777216, BF2_DOTCODE: 2 }, G.DBR.EnumBinarizationMode = { BM_AUTO: 1, BM_LOCAL_BLOCK: 2, BM_SKIP: 0 }, G.DBR.EnumClarityCalculationMethod = { ECCM_CONTRAST: 1 }, G.DBR.EnumClarityFilterMode = { CFM_GENERAL: 1 }, G.DBR.EnumColourClusteringMode = { CCM_AUTO: 1, CCM_GENERAL_HSV: 2, CCM_SKIP: 0 }, G.DBR.EnumColourConversionMode = { CICM_GENERAL: 1, CICM_SKIP: 0 }, G.DBR.EnumConflictMode = { CM_IGNORE: 1, CM_OVERWRITE: 2 }, G.DBR.EnumDeformationResistingMode = { DRM_AUTO: 1, DRM_GENERAL: 2, DRM_SKIP: 0 }, G.DBR.EnumDPMCodeReadingMode = { DPMCRM_AUTO: 1, DPMCRM_GENERAL: 2, DPMCRM_SKIP: 0 }, G.DBR.EnumErrorCode = { DBR_SYSTEM_EXCEPTION: 1, DBR_SUCCESS: 0, DBR_UNKNOWN: -1e4, DBR_NO_MEMORY: -10001, DBR_NULL_REFERENCE: -10002, DBR_LICENSE_INVALID: -10003, DBR_LICENSE_EXPIRED: -10004, DBR_FILE_NOT_FOUND: -10005, DBR_FILETYPE_NOT_SUPPORTED: -10006, DBR_BPP_NOT_SUPPORTED: -10007, DBR_INDEX_INVALID: -10008, DBR_BARCODE_FORMAT_INVALID: -10009, DBR_CUSTOM_REGION_INVALID: -10010, DBR_MAX_BARCODE_NUMBER_INVALID: -10011, DBR_IMAGE_READ_FAILED: -10012, DBR_TIFF_READ_FAILED: -10013, DBR_QR_LICENSE_INVALID: -10016, DBR_1D_LICENSE_INVALID: -10017, DBR_DIB_BUFFER_INVALID: -10018, DBR_PDF417_LICENSE_INVALID: -10019, DBR_DATAMATRIX_LICENSE_INVALID: -10020, DBR_PDF_READ_FAILED: -10021, DBR_PDF_DLL_MISSING: -10022, DBR_PAGE_NUMBER_INVALID: -10023, DBR_CUSTOM_SIZE_INVALID: -10024, DBR_CUSTOM_MODULESIZE_INVALID: -10025, DBR_RECOGNITION_TIMEOUT: -10026, DBR_JSON_PARSE_FAILED: -10030, DBR_JSON_TYPE_INVALID: -10031, DBR_JSON_KEY_INVALID: -10032, DBR_JSON_VALUE_INVALID: -10033, DBR_JSON_NAME_KEY_MISSING: -10034, DBR_JSON_NAME_VALUE_DUPLICATED: -10035, DBR_TEMPLATE_NAME_INVALID: -10036, DBR_JSON_NAME_REFERENCE_INVALID: -10037, DBR_PARAMETER_VALUE_INVALID: -10038, DBR_DOMAIN_NOT_MATCHED: -10039, DBR_RESERVEDINFO_NOT_MATCHED: -10040, DBR_AZTEC_LICENSE_INVALID: -10041, DBR_LICENSE_DLL_MISSING: -10042, DBR_LICENSEKEY_NOT_MATCHED: -10043, DBR_REQUESTED_FAILED: -10044, DBR_LICENSE_INIT_FAILED: -10045, DBR_PATCHCODE_LICENSE_INVALID: -10046, DBR_POSTALCODE_LICENSE_INVALID: -10047, DBR_DPM_LICENSE_INVALID: -10048, DBR_FRAME_DECODING_THREAD_EXISTS: -10049, DBR_STOP_DECODING_THREAD_FAILED: -10050, DBR_SET_MODE_ARGUMENT_ERROR: -10051, DBR_LICENSE_CONTENT_INVALID: -10052, DBR_LICENSE_KEY_INVALID: -10053, DBR_LICENSE_DEVICE_RUNS_OUT: -10054, DBR_GET_MODE_ARGUMENT_ERROR: -10055, DBR_IRT_LICENSE_INVALID: -10056, DBR_MAXICODE_LICENSE_INVALID: -10057, DBR_GS1_DATABAR_LICENSE_INVALID: -10058, DBR_GS1_COMPOSITE_LICENSE_INVALID: -10059, DBR_DOTCODE_LICENSE_INVALID: -10061, DMERR_FAILED_TO_REACH_LTS: -20200 }, G.DBR.EnumGrayscaleTransformationMode = { GTM_INVERTED: 1, GTM_ORIGINAL: 2, GTM_SKIP: 0 }, G.DBR.EnumImagePixelFormat = { IPF_Binary: 0, IPF_BinaryInverted: 1, IPF_GrayScaled: 2, IPF_NV21: 3, IPF_RGB_565: 4, IPF_RGB_555: 5, IPF_RGB_888: 6, IPF_ARGB_8888: 7, IPF_RGB_161616: 8, IPF_ARGB_16161616: 9, IPF_ABGR_8888: 10, IPF_ABGR_16161616: 11, IPF_BGR_888: 12 }, G.DBR.EnumImagePreprocessingMode = { IPM_AUTO: 1, IPM_GENERAL: 2, IPM_GRAY_EQUALIZE: 4, IPM_GRAY_SMOOTH: 8, IPM_SHARPEN_SMOOTH: 16, IPM_MORPHOLOGY: 32, IPM_SKIP: 0 }, G.DBR.EnumIMResultDataType = { IMRDT_IMAGE: 1, IMRDT_CONTOUR: 2, IMRDT_LINESEGMENT: 4, IMRDT_LOCALIZATIONRESULT: 8, IMRDT_REGIONOFINTEREST: 16, IMRDT_QUADRILATERAL: 32 }, G.DBR.EnumIntermediateResultSavingMode = { IRSM_MEMORY: 1, IRSM_FILESYSTEM: 2, IRSM_BOTH: 4 }, G.DBR.EnumIntermediateResultType = { IRT_NO_RESULT: 0, IRT_ORIGINAL_IMAGE: 1, IRT_COLOUR_CLUSTERED_IMAGE: 2, IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE: 4, IRT_TRANSFORMED_GRAYSCALE_IMAGE: 8, IRT_PREDETECTED_REGION: 16, IRT_PREPROCESSED_IMAGE: 32, IRT_BINARIZED_IMAGE: 64, IRT_TEXT_ZONE: 128, IRT_CONTOUR: 256, IRT_LINE_SEGMENT: 512, IRT_FORM: 1024, IRT_SEGMENTATION_BLOCK: 2048, IRT_TYPED_BARCODE_ZONE: 4096, IRT_PREDETECTED_QUADRILATERAL: 8192 }, G.DBR.EnumLocalizationMode = { LM_SKIP: 0, LM_AUTO: 1, LM_CONNECTED_BLOCKS: 2, LM_LINES: 8, LM_STATISTICS: 4, LM_SCAN_DIRECTLY: 16, LM_STATISTICS_MARKS: 32, LM_STATISTICS_POSTAL_CODE: 64 }, G.DBR.EnumPDFReadingMode = { PDFRM_RASTER: 1, PDFRM_AUTO: 2, PDFRM_VECTOR: 4 }, G.DBR.EnumQRCodeErrorCorrectionLevel = { QRECL_ERROR_CORRECTION_H: 0, QRECL_ERROR_CORRECTION_L: 1, QRECL_ERROR_CORRECTION_M: 2, QRECL_ERROR_CORRECTION_Q: 3 }, G.DBR.EnumRegionPredetectionMode = { RPM_AUTO: 1, RPM_GENERAL: 2, RPM_GENERAL_RGB_CONTRAST: 4, RPM_GENERAL_GRAY_CONTRAST: 8, RPM_GENERAL_HSV_CONTRAST: 16, RPM_SKIP: 0 }, G.DBR.EnumResultCoordinateType = { RCT_PIXEL: 1, RCT_PERCENTAGE: 2 }, G.DBR.EnumResultType = { RT_STANDARD_TEXT: 0, RT_RAW_TEXT: 1, RT_CANDIDATE_TEXT: 2, RT_PARTIAL_TEXT: 3 }, G.DBR.EnumScaleUpMode = { SUM_AUTO: 1, SUM_LINEAR_INTERPOLATION: 2, SUM_NEAREST_NEIGHBOUR_INTERPOLATION: 4, SUM_SKIP: 0 }, G.DBR.EnumTerminatePhase = { TP_REGION_PREDETECTED: 1, TP_IMAGE_PREPROCESSED: 2, TP_IMAGE_BINARIZED: 4, TP_BARCODE_LOCALIZED: 8, TP_BARCODE_TYPE_DETERMINED: 16, TP_BARCODE_RECOGNIZED: 32 }, G.DBR.EnumTextAssistedCorrectionMode = { TACM_AUTO: 1, TACM_VERIFYING: 2, TACM_VERIFYING_PATCHING: 4, TACM_SKIP: 0 }, G.DBR.EnumTextFilterMode = { TFM_AUTO: 1, TFM_GENERAL_CONTOUR: 2, TFM_SKIP: 0 }, G.DBR.EnumTextResultOrderMode = { TROM_CONFIDENCE: 1, TROM_POSITION: 2, TROM_FORMAT: 4, TROM_SKIP: 0 }, G.DBR.EnumTextureDetectionMode = { TDM_AUTO: 1, TDM_GENERAL_WIDTH_CONCENTRATION: 2, TDM_SKIP: 0 };
}(), G.AddonReady(function(l, n) {
  var L, k = G.BarcodeReaderAddon;
  function re(R) {
    return R && R instanceof ArrayBuffer;
  }
  k.Class = function() {
    function R(p) {
      this._runtimeSettings = null, this._initSettingsContent = null, this._tplContentArr = [], this.bWasm = !1, this._stwain = p;
    }
    var C;
    return R.prototype._decodeBlob = function(p, N) {
      var U = this;
      return new l.Promise(function(H) {
        if (!(p instanceof Blob))
          throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.");
        H();
      }).then(function() {
        return U._innerDecode(0, p, N);
      });
    }, R.prototype._decodeArrayBuffer = function(p, N) {
      var U = this;
      return new l.Promise(function(H) {
        if (!(p instanceof ArrayBuffer))
          throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.");
        H();
      }).then(function() {
        return U._innerDecode(0, p, N);
      });
    }, R.prototype._decodeUint8Array = function(p, N) {
      var U = this;
      return new l.Promise(function(H) {
        if (!(p instanceof Uint8Array || self.Uint8ClampedArray && p instanceof Uint8ClampedArray))
          throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.");
        H();
      }).then(function() {
        return U._innerDecode(0, p, N);
      });
    }, R.prototype._decodeImage = function(p, N) {
      var U = this;
      return new l.Promise(function(H) {
        if (!(p instanceof HTMLImageElement))
          throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.");
        if (p.crossOrigin && p.crossOrigin != "anonymous")
          throw "cors";
        N = N || "", H();
      }).then(function() {
        return p.src.substring(0, 11) == "data:image/" ? U._decodeBase64(p.src, N) : U._decodeUrl(p.src, N).catch(function(H) {
          return 3 <= k.logLevel && console && console.warn && (console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead."), console.warn(H)), self.HTMLCanvasElement ? ((H = document.createElement("canvas")).width = p.naturalWidth, H.height = p.naturalHeight, H.getContext("2d").drawImage(p, 0, 0), U._decodeCanvas(H, N)) : l.Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."));
        });
      });
    }, R.prototype._decodeCanvas = function(p, N) {
      var U = this;
      return new l.Promise(function(H) {
        if (!(p instanceof HTMLCanvasElement))
          throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.");
        if (p.crossOrigin && p.crossOrigin != "anonymous")
          throw "cors";
        N = N || "", p.toBlob ? p.toBlob(function(K) {
          H(K);
        }) : p.msToBlob ? p.msToBlob(function(K) {
          H(K);
        }) : H(p.toDataURL());
      }).then(function(H) {
        return p.toBlob || p.msToBlob ? U._decodeBlob(H, N) : U._decodeBase64(H, N);
      });
    }, R.prototype._decodeVideo = function(p) {
      var N, U = this, H = arguments;
      return new l.Promise(function(K) {
        if (!(p instanceof HTMLVideoElement))
          throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.");
        if (p.crossOrigin && p.crossOrigin != "anonymous")
          throw "cors";
        H.length <= 2 ? (Y = F = 0, q = J = p.videoWidth, O = E = p.videoHeight) : E = H.length <= 4 ? (Y = F = 0, q = p.videoWidth, O = p.videoHeight, J = H[1], H[2]) : (Y = H[1], F = H[2], q = H[3], O = H[4], J = H[5], H[6]), N = typeof H[H.length - 1] == "string" ? H[H.length - 1] : "";
        var Y, F, q, O, J, E, me = document.createElement("canvas");
        me.width = J, me.height = E, me.getContext("2d").drawImage(p, Y, F, q, O, 0, 0, J, E), K(me);
      }).then(function(K) {
        return U._decodeCanvas(K, N);
      });
    }, R.prototype._decodeBase64 = R.prototype.decodeBase64String = function(p, N) {
      var U = this;
      return new l.Promise(function(H) {
        if (!(typeof p == "string" || typeof p == "object" && p instanceof String))
          throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.");
        p.substring(0, 11) == "data:image/" && (p = p.substring(p.indexOf(",") + 1)), H();
      }).then(function() {
        return U._innerDecode(1, p, N);
      });
    }, R.prototype._decodeUrl = function(p, N) {
      var U = this;
      return p && p.indexOf && (p.indexOf("dwt://") == 0 || p.indexOf("dcs://") == 0) ? U._decodeDynamsoftServiceInnerUrl(p, N) : k._wasmInstance ? k._wasmInstance.decode(p) : new l.Promise(function(H, K) {
        var Y;
        if (!(typeof p == "string" || typeof p == "object" && p instanceof String))
          throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.");
        N = N || "", k._activeXInstance ? ((Y = new ActiveXObject("MSXML2.XMLHTTP")).open("GET", p, !0), Y.overrideMimeType ? Y.overrideMimeType("text/plain; charset=x-user-defined") : Y.setRequestHeader("Accept-Charset", "x-user-defined"), Y.onreadystatechange = function() {
          Y.readyState == 4 && H(new VBArray(Y.responseBody).toArray());
        }, Y.send("")) : ((Y = new XMLHttpRequest()).open("GET", p, !0), Y.responseType = "arraybuffer", Y.send(), Y.onloadend = function() {
          H(this.response);
        }, Y.onerror = function() {
          K(Error(Y.error));
        });
      }).then(function(H) {
        return k._activeXInstance ? U._activeXDecodeArray(H, N) : U._decodeArrayBuffer(H, N);
      });
    }, R.prototype._decodeDynamsoftServiceInnerUrl = function(p, N) {
      var U = this;
      return new l.Promise(function(H) {
        if (!(typeof p == "string" || typeof p == "object" && p instanceof String))
          throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.");
        if (p.indexOf("dwt://") != 0 && p.indexOf("dcs://") != 0)
          throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.");
        H();
      }).then(function() {
        return U._innerDecode(4e3, p, N);
      });
    }, R.prototype._activeXDecodeArray = function(p, N) {
      var U = this;
      return new l.Promise(function(H, K) {
        if (!(p instanceof Array))
          throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.");
        N = N || "";
        try {
          H(G.Lib.btoa(String.fromCharCode.apply(String, p)));
        } catch (Y) {
          K(Y);
        }
      }).then(function(H) {
        return U._decodeBase64(H, N);
      });
    }, R.prototype._activeXDecodeHandle = function(p, N) {
      var U = this;
      return new l.Promise(function(H) {
        N = N || "", H();
      }).then(function() {
        return U._innerDecode(4001, p, N);
      });
    }, R.prototype._decode = R.prototype.decode = function(p, N) {
      return k._activeXInstance ? typeof p == "string" || p instanceof String ? this._activeXDecodeHandle(p, N) : l.Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'.")) : k._wasmInstance ? k._wasmInstance.decode(p) : self.Blob && p instanceof Blob ? this._decodeBlob(p, N) : self.ArrayBuffer && p instanceof ArrayBuffer ? this._decodeArrayBuffer(p, N) : self.Uint8Array && p instanceof Uint8Array || self.Uint8ClampedArray && p instanceof Uint8ClampedArray ? this._decodeUint8Array(p, N) : p instanceof Array ? this._activeXDecodeArray(p, N) : self.HTMLImageElement && p instanceof HTMLImageElement ? this._decodeImage(p, N) : self.HTMLCanvasElement && p instanceof HTMLCanvasElement ? this._decodeCanvas(p, N) : self.HTMLVideoElement && p instanceof HTMLVideoElement ? this._decodeVideo(p, N) : isNaN(p) ? typeof p == "string" || p instanceof String ? p.substring(0, 11) == "data:image/" ? this._decodeBase64(p, N) : this._decodeUrl(p, N) : l.Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'.")) : this._activeXDecodeHandle(p, N);
    }, R.prototype._innerServiceCmd = function(p, N) {
      var U = this._stwain;
      return new l.Promise(function(H, K) {
        var Y, F = { method: "ReadBarcode", parameter: [G.Lib.product.refProductKey, 4002, "", ""], updateSettings: p, initSettingsContent: N };
        k._activeXInstance ? H(k._activeXInstance.Process(l.stringify(F), location.protocol + "//" + location.host)) : (U._blts ? (Y = "", U && U._bRemoteMode && U._dmService && U._dmService.attrs && U._dmService.attrs.UUID && (Y = U._dmService.attrs.UUID), G.DWT.lglic(G.DWT.EnumInstance.dwt_desktop, Y).then(function(q) {
          return F.parameter.push(q.ar), F.parameter.push(q.cu), F.parameter.push(0), F.parameter.push(""), l.stringify(F);
        })) : l.Promise.resolve(l.stringify(F))).then(function(q) {
          return l.fetch(U._dbrUrlRoot + "ReadBarcode", { mode: "cors", method: "post", body: q, dataType: "arrayBuffer" });
        }).then(function(q) {
          re(q) ? H(String.fromCharCode.apply(null, new Uint8Array(q))) : H(q);
        }, function(q) {
          var O = "Init template & runtimeSettings failed.";
          q && (O = [O, " Http info: ", q.errorString, " (", q.httpCode, ")"].join("")), K(O);
        });
      });
    }, R.prototype._innerDecode = function(p, N, U, H) {
      var K = this;
      return K._runtimeSettings && K._runtimeSettings.expectedBarcodesCount == 0 && (K._runtimeSettings.expectedBarcodesCount = 512), new l.Promise(function(Y, F) {
        function q(Ee, Le, Oe) {
          try {
            var Te, Re, Ve, We, le = C && C(Ee);
            for (le && le.textResults || F(new k.BarcodeReaderException(le.exception, le.description)), l.product.bHTML5Edition && Oe && Oe.config.data && (Te = l.parse(Oe.config.data), l.isArray(Te.parameter)) && 2 < Te.parameter.length && Te.parameter[1] == 4e3 && (4 < Te.parameter.length && Te.parameter[4] ? le.textResults.imageid = Te.parameter[4] : 0 <= (We = (Ve = Te.parameter[2]).indexOf("&index=")) && (le.textResults.imageid = Ve.substring(We + 7, Ve.indexOf("&t=")))), Re = 0; Re < le.textResults.length; Re++) {
              var je = le.textResults[Re];
              je.BarcodeText = je.barcodeText, le.exception != G.DBR.EnumErrorCode.DBR_SUCCESS && (je.exception = le.exception);
            }
            le.exception != G.DBR.EnumErrorCode.DBR_SUCCESS && (le.textResults.exception = le.exception, le.textResults.description = le.description), k._activeXInstance && le.records && (G.Lib.each(le.records, function(fe, Me) {
              G.DWT.lavrf(Me, fe, G.DWT.EnumInstance.dwt_desktop);
            }), G.DWT.lavrf_(1, G.DWT.EnumInstance.dwt_desktop)), Y(le.textResults);
          } catch (fe) {
            F(fe);
          }
        }
        var O, J, E = { method: "ReadBarcode", parameter: [G.Lib.product.refProductKey, p, p != 0 ? N : null, U || ""], updateSettings: K._runtimeSettings, conflictMode: K.conflictMode == 1 ? "ignore" : "overwrite", initSettingsContent: K._initSettingsContent, tplContent: function() {
          if (U) {
            for (var Ee = 0; Ee < K._tplContentArr.length; ++Ee)
              if (U == K._tplContentArr[Ee].ImageParameter.Name)
                return l.stringify(K._tplContentArr[Ee]);
          }
          return null;
        }() }, me = K._stwain;
        k._activeXInstance ? me._blts ? G.DWT.lglic(G.DWT.EnumInstance.dwt_desktop, "").then(function(Ee) {
          E.parameter.push(Ee.ar), E.parameter.push(Ee.cu), E.parameter.push(0), E.parameter.push(""), q(k._activeXInstance.Process(l.stringify(E), location.protocol + "//" + location.host));
        }) : q(k._activeXInstance.Process(l.stringify(E), location.protocol + "//" + location.host)) : (O = me._dbrUrlRoot + "ReadBarcode", p == 0 && (O += "/LoadZipFromBytes?cmd=" + encodeURIComponent(l.stringify(E))), (p == 0 ? l.Promise.resolve(N) : me._blts ? (J = "", me && me._bRemoteMode && me._dmService && me._dmService.attrs && me._dmService.attrs.UUID && (J = me._dmService.attrs.UUID), G.DWT.lglic(G.DWT.EnumInstance.dwt_desktop, J).then(function(Ee) {
          return E.parameter.push(Ee.ar), E.parameter.push(Ee.cu), E.parameter.push(0), E.parameter.push([l.product.getDWTPrefix(), l.product.getServerVersionInfo(), "/verify?id=", H, "&t=", l.getRandom()].join("")), l.stringify(E);
        })) : l.Promise.resolve(l.stringify(E))).then(function(Ee) {
          return l.fetch(O, { mode: "cors", method: "post", body: Ee, dataType: "arrayBuffer" });
        }).then(function(Ee, Le, Oe) {
          re(Ee) ? q(String.fromCharCode.apply(null, new Uint8Array(Ee)), 0, Oe) : q(Ee, 0, Oe);
        }, function(Ee) {
          var Le = "ReadBarcode request fail.";
          Ee && (Le = [Le, " Http info: ", Ee.errorString, " (", Ee.httpCode, ")"].join("")), F(Error(Le));
        }));
      });
    }, C = k._handleRetJsonString = function(p) {
      var N;
      if (typeof p == "string" || typeof p == "object" && p instanceof String)
        try {
          N = l.parse(p);
        } catch {
          N = l.parse(k.RemoveNonPrintableChar(p));
        }
      else
        N = p;
      if (!N)
        throw k.BarcodeReaderException(G.DBR.EnumErrorCode.DBR_UNKNOWN, k.errors.decodeResultEmpty);
      if ("textResults" in N && l.isArray(N.textResults) || N.exception == G.DBR.EnumErrorCode.DBR_SUCCESS)
        return N;
      throw k.BarcodeReaderException(N.exception, N.description);
    }, R.prototype.getAllParameterTemplateNames = function() {
      for (var p = [], N = 0; N < this._tplContentArr.length; ++N)
        p.push(this._tplContentArr[N].ImageParameter.Name);
      return p;
    }, R.prototype.getRuntimeSettings = function() {
      return this.bWasm ? k._wasmInstance.getRuntimeSettings() : (this._runtimeSettings || (this._runtimeSettings = l.parse(k._defaultRuntimeSettingsStr)), l.Promise.resolve(this._runtimeSettings));
    }, R.prototype.updateRuntimeSettings = function(p) {
      var N, U = this;
      if (typeof p == "string" || typeof p == "object" && p instanceof String) {
        if (p == "speed" || p == "balance" || p == "coverage" || p == "default")
          return U.initRuntimeSettingsWithString(p == "speed" ? '{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}' : p == "balance" ? '{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}' : p == "coverage" ? '{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}' : '{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}');
        N = p;
      } else {
        if (typeof p != "object")
          throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");
        N = l.stringify(p);
      }
      return p = l.parse(N), U.bWasm ? k._wasmInstance.updateRuntimeSettings(p).then(function() {
        return k._wasmInstance.getRuntimeSettings();
      }) : (U._runtimeSettings = p, U._initSettingsContent = null, U._innerServiceCmd(U._runtimeSettings, null).then(function(H) {
        return H = k._handleRetJsonString(H), U._runtimeSettings = H.settings, U._runtimeSettings || (U._runtimeSettings = l.parse(k._defaultRuntimeSettingsStr)), H.settings;
      }));
    }, R.prototype.resetRuntimeSettings = function() {
      var p = this;
      return p.bWasm ? k._wasmInstance.resetRuntimeSettings().then(function() {
        return k._wasmInstance.getRuntimeSettings();
      }) : (p._runtimeSettings = l.parse(k._defaultRuntimeSettingsStr), p._initSettingsContent = null, p._innerServiceCmd(p._runtimeSettings, null).then(function(N) {
        return N = k._handleRetJsonString(N), p._runtimeSettings = N.settings, p._runtimeSettings || (p._runtimeSettings = l.parse(k._defaultRuntimeSettingsStr)), N.settings;
      }));
    }, R.prototype.outputSettingsToString = function(p) {
      if (!p)
        return k._defaultTemplateStr;
      for (var N = 0; N < this._tplContentArr.length; ++N)
        if (p == this._tplContentArr[N].ImageParameter.Name)
          return l.stringify(this._tplContentArr[N]);
    }, R.prototype.initRuntimeSettingsWithString = function(p) {
      var N = this;
      if (l.isString(p))
        return N.bWasm ? k._wasmInstance.initRuntimeSettingsWithString(p).then(function() {
          return k._wasmInstance.getRuntimeSettings();
        }) : (N._runtimeSettings = null, N._initSettingsContent = l.parse(p), N._innerServiceCmd(null, N._initSettingsContent).then(function(U) {
          return U = k._handleRetJsonString(U), N._runtimeSettings = U.settings, N._runtimeSettings || (N._runtimeSettings = l.parse(k._defaultRuntimeSettingsStr)), U.settings;
        }));
      throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.");
    }, R;
  }(), k._dbr_ax = !1, k._dbr_wasm = !1, k._dbr = !1, k._initH5 = function(R, C, p) {
    return new l.Promise(function(N, U) {
      R._bRemoteMode && R._dmService && R._dmService.attrs && R._dmService.attrs.url && (R._dbrUrlRoot = R._dmService.attrs.url + "dcp/dbr_" + k.Version.replace(/\./g, "") + "/"), R._dbrUrlRoot || (R._dbrUrlRoot = G.DWT.NetManager.getModuleUrl("dcp/dbr_" + k.Version.replace(/\./g, "") + "/"));
      var H = 5, K = { method: "POST", url: R._dbrUrlRoot + "VersionInfo?t=" + l.getRandom(), data: '{"method":"VersionInfo"}', onSuccess: function() {
        N();
      }, onError: function() {
        if (--H <= 0)
          return U("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.");
        setTimeout(function() {
          l.ajax(K);
        }, 300);
      }, dataType: "json", async: !0, timeout: 800 };
      l.ajax(K);
    }).then(function() {
      return k._dbr = new k.Class(R), k._dbr._innerServiceCmd(null, null);
    }).then(function(N) {
      try {
        var U = k._handleRetJsonString(N);
        k._dbr._runtimeSettings = U.settings, k._defaultRuntimeSettingsStr = l.stringify(U.settings), k._defaultTemplateStr = l.stringify(U.outputSettings), C(k._dbr);
      } catch (H) {
        p(Error("Init template & runtimeSettings failed: " + H.message) || H);
      }
    }, function(N) {
      p(N);
    });
  }, k.dbrInitPromiseFun = function(R) {
    return new l.Promise(function(C, p) {
      k.innerDbrInit(R, C, p);
    });
  }, k.innerDbrInit = function(R, C, p) {
    function N() {
      G.DBR && G.DBR.BarcodeReader && G.DBR.BarcodeReader.createInstance && G.DBR.BarcodeReader.createInstance().then(function(J) {
        return G.DBR.EnumErrorCode.DMERR_FAILED_TO_REACH_LTS == G.DBR.BarcodeReader.lastErrorCode && (G.DWT.licenseException.code = G.DBR.BarcodeReader.lastErrorCode, G.DWT.licenseException.message = G.DBR.BarcodeReader.lastErrorString), G.DBR.BarcodeReader._bNeverShowDialog = !0, G.DWT.dbrCanvasMaxWH && (J._canvasMaxWH = G.DWT.dbrCanvasMaxWH), (Y._wasmInstance = J).getRuntimeSettings();
      }).then(function(J) {
        Y._dbr_wasm._runtimeSettings = J, Y._defaultRuntimeSettingsStr = l.stringify(J), C(Y._dbr_wasm);
      }, function(J) {
        var E = J.code || J.ltsErrorCode;
        E == 111 || E == 106 || E == 108 ? (l.Errors.LicenseNoDbr(R, E), J = { code: R._errorCode, message: R._errorString }) : (R._errorCode = E, R._errorString = J.message), p(J);
      });
    }
    var U = R._isMobileMode() || !G.navInfoSync.bWin, H = !1, K = !1, Y = (U || (l.product.bHTML5Edition ? H = !0 : K = !0), G.BarcodeReaderAddon);
    if (U) {
      if (Y._dbr_wasm)
        return void (Y._wasmInstance ? C(Y._dbr_wasm) : N());
    } else if (H) {
      if (Y._dbr)
        return void C(Y._dbr);
    } else if (K && Y._dbr_ax)
      return void C(Y._dbr_ax);
    function F() {
      if (U)
        return (G.DBR && G.DBR.BarcodeReader || G.BarcodeReader) && (G.DBR || G.BarcodeReader && (G.DBR = { BarcodeReader: G.BarcodeReader }), G.DBR.BarcodeReader.engineResourcePath = G.DWT.ResourcesPath + "/addon/dbrjs/", G.Lib.License.reparseProductKey(), R._blts ? (G.DBR.BarcodeReader.productKeys = G.Lib.License.getLTSLicense(), l.isString(G.Lib.product.sessionPassword) && (G.DBR.BarcodeReader.sessionPassword = G.Lib.product.sessionPassword), l.isArray(G.Lib.product.licenseServer) && (G.DBR.BarcodeReader.licenseServer = G.Lib.product.licenseServer)) : G.DBR.BarcodeReader.productKeys = G.Lib.product.refProductKey, l.showLoadingMsg(-1, "", G.MSG.Init_CompilingWasm), G.DBR.BarcodeReader._bUseFullFeature = !0, G.DBR.BarcodeReader._bNeverShowDialog = !0, Y._dbr_wasm = new Y.Class(R), Y._dbr_wasm.bWasm = !0, N());
      if (H && Y._initH5(R, C, p), K) {
        var J = G.navInfoSync, E = { method: "ReadBarcode", parameter: [G.Lib.product.refProductKey, 4002, "", ""] };
        if (!J.bIE)
          return p(Error("The DBR init error."));
        try {
          Y._activeXInstance = new ActiveXObject("DBRModule.AtlDBR");
          var me, Ee = Y._activeXInstance.Process(l.stringify(E), location.protocol + "//" + location.host), Le = l.parse(Ee);
          Le ? "settings" in Le ? (Y._dbr_ax = new Y.Class(R), Y._dbr_ax._runtimeSettings = Le.settings, Y._defaultRuntimeSettingsStr = l.stringify(Le.settings), "outputSettings" in Le && (Y._defaultTemplateStr = l.stringify(Le.outputSettings)), C(Y._dbr_ax)) : (me = Le.description || "The DBR init error.", p(Error(me))) : p(Error("The DBR init error."));
        } catch (Oe) {
          return p(Error("The DBR .dll is missing or not accessible: " + (Oe.message || Oe)));
        }
      }
    }
    var q = G.Lib.timestamp, O = G.DWT.ResourcesPath;
    !U || l.detect.dbrwasmScriptLoaded ? F() : function() {
      try {
        if (typeof WebAssembly == "object" && typeof WebAssembly.instantiate == "function") {
          var J = new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0]));
          if (J instanceof WebAssembly.Module)
            return new WebAssembly.Instance(J) instanceof WebAssembly.Instance;
        }
      } catch {
      }
    }() ? (O = l.addScript([O, "/addon/dbrjs/dbr.js", q].join(""), !0, !1, function(J) {
      l.detect.dbrwasmScriptLoaded = !0, F();
    }), l.isString(G.Lib.product.handshakeCode) ? O.setAttribute("data-handshakeCode", G.Lib.product.handshakeCode) : l.isString(G.Lib.product.organizationID) ? O.setAttribute("data-organizationID", G.Lib.product.organizationID) : l.isString(G.Lib.product.refProductKey) && O.setAttribute("data-productKeys", G.Lib.product.refProductKey)) : p(Error(G.MSG.Err_BrowserNotSupportWasm));
  }, l.DynamicLoadAddonFuns && l.DynamicLoadAddonFuns.push(function(R) {
    var C;
    if (L = R._b64bit ? "dbrx64_" + G.BarcodeReaderAddon.Version + ".dll" : "dbr_" + G.BarcodeReaderAddon.Version + ".dll", l.product.bHTML5Edition && !R._isMobileMode())
      try {
        R._innerSend("GetAddOnVersion", l.html5.Funs.makeParams("barcodereader", L), !0, !1, !1).catch(function() {
        });
      } catch {
      }
    C = { BarcodeReader: { decode: function(p) {
      return l.License.checkProductKey(R, { Core: !0 }) ? !l.isNumber(p) || p < 0 || p >= R.HowManyImagesInBuffer ? (l.Errors.IndexOutOfRange(R), l.Promise.reject(k.BarcodeReaderException(R._errorCode, R._errorString))) : new l.Promise(function(N) {
        k._decoding ? k._decodeQueue.push({ method: N, args: [p] }) : (k._decoding = !0, N(p));
      }).then(function(N) {
        var U;
        if (l.product.bHTML5Edition) {
          if ((U = R._ImgManager.convertClientIndexToServerId(N)) == -1)
            throw l.Errors.IndexOutOfRange(R), setTimeout(k._decodeNext, 0), k.BarcodeReaderException(R._errorCode, R._errorString);
        } else
          U = N;
        return new l.Promise(function(H, K) {
          k.dbrInitPromiseFun(R).then(function(Y) {
            var F, q;
            if (!Y.bWasm)
              return l.product.bHTML5Edition ? Y.bWasm ? void 0 : (F = R._ImgManager.convertServerIdToClientIndex(U), q = R.GetImagePartURL(F, -1, -1), Y._innerDecode(4e3, q, "", R._clientId).then(function(O) {
                O.imageid = R.IndexToImageID(F), setTimeout(k._decodeNext, 0), H(O), R._blts && G.DWT.lcvrf(R);
              }, function(O) {
                setTimeout(k._decodeNext, 0), K(O);
              })) : (F = U, q = R.GetImagePartURL(F, -1, -1), Y._innerDecode(4001, q, "").then(function(O) {
                O.imageid = R.IndexToImageID(F), setTimeout(k._decodeNext, 0), H(O);
              }, function(O) {
                setTimeout(k._decodeNext, 0), K(O);
              }));
            q = (q = Y.getRuntimeSettings()).then(function(O) {
              if (O.expectedBarcodesCount == 0)
                return O.expectedBarcodesCount = 512, Y.updateRuntimeSettings(O);
            }), (q = (q = R._isMobileMode() ? (q = q.then(function() {
              var O = R._ImgManager.convertServerIdToClientIndex(U);
              return R._ImgManager.getWebViewer().GetImageData(R._ImgManager.getUidByIndex(O));
            })).then(function(O) {
              return O.oriData || O.originalData;
            }) : q.then(function() {
              var O = R._ImgManager.convertServerIdToClientIndex(U);
              return R.GetImageURL(O, -1, -1);
            })).then(function(O) {
              return O instanceof Blob || O instanceof ArrayBuffer ? k._wasmInstance.decode(O) : l.fetch(O, { mode: "cors", dataType: "blob" }).then(function(J) {
                return k._wasmInstance.decode(J);
              });
            })).then(function(O) {
              O.imageid = R._objImageIndexManager.convertServerIdToGuid(U), setTimeout(k._decodeNext, 0), H(O);
            }, function(O) {
              var J = "decode failed.";
              O && (J = [J, " ", O.errorString, " (", O.httpCode, ")"].join("")), setTimeout(k._decodeNext, 0), K(Error(J));
            });
          }, function(Y) {
            setTimeout(k._decodeNext, 0), K(Y);
          });
        });
      }) : l.Promise.reject(k.BarcodeReaderException(R._errorCode, R._errorString));
    }, resetRuntimeSettings: function() {
      return l.License.checkProductKey(R, { Core: !0 }) ? k.dbrInitPromiseFun(R).then(function(p) {
        return p.resetRuntimeSettings();
      }) : l.Promise.reject(k.BarcodeReaderException(R._errorCode, R._errorString));
    }, getRuntimeSettings: function(p) {
      return l.License.checkProductKey(R, { Core: !0 }) ? !l.isString(p) || p != "speed" && p != "balance" && p != "coverage" && p != "default" ? k.dbrInitPromiseFun(R).then(function(N) {
        return N.getRuntimeSettings();
      }) : this.updateRuntimeSettings(p) : l.Promise.reject(k.BarcodeReaderException(R._errorCode, R._errorString));
    }, updateRuntimeSettings: function(p) {
      return l.License.checkProductKey(R, { Core: !0 }) ? k.dbrInitPromiseFun(R).then(function(N) {
        return N.updateRuntimeSettings(p);
      }) : l.Promise.reject(k.BarcodeReaderException(R._errorCode, R._errorString));
    }, initRuntimeSettingsWithString: function(p) {
      return l.License.checkProductKey(R, { Core: !0 }) ? k.dbrInitPromiseFun(R).then(function(N) {
        return N.initRuntimeSettingsWithString(p);
      }) : l.Promise.reject(k.BarcodeReaderException(R._errorCode, R._errorString));
    } } }, l.product.bHTML5Edition ? (R.__addon = R.__addon || {}, l.mix(R.__addon, C)) : (R.Addon = R.Addon || {}, l.mix(R.Addon, C));
  }), l.product.unloadQueue.push(function() {
    k._wasmInstance && (l.isFunction(k._wasmInstance.destroy) && k._wasmInstance.destroy(), k._wasmInstance = !1);
  });
});
/*! 20221212133727
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: PDF
* Version: 18.0
* 
*/
var G = self.Dynamsoft || {};
G.DWT = G.DWT || {}, G.aryAddonReadyFun = G.aryAddonReadyFun || [], G.AddonReady = G.AddonReady || function(l) {
  G.aryAddonReadyFun.push(l);
}, function() {
  for (var l = [G.DWT], n = 0; n < 1; n++) {
    var L = l[n];
    L.EnumDWT_ConvertMode = { CM_RENDERALL: 1, CM_IMAGEONLY: 2, CM_AUTO: 3, CM_RENDERALLWITHANNOTATION: 4 }, L.EnumDWT_PDFCompressionType = { PDF_AUTO: 0, PDF_FAX3: 1, PDF_FAX4: 2, PDF_LZW: 3, PDF_RLE: 4, PDF_JPEG: 5, PDF_JP2000: 6, PDF_JBIG2: 7 };
  }
}(), G.AddonReady(function(l, n) {
  var L;
  l.product.bHTML5Edition && l.DynamicLoadAddonFuns && l.DynamicLoadAddonFuns.push(function(k) {
    var re, R = l.html5.Funs;
    if (L = k.__serverPlatform == G.DWT.EnumDWT_PlatformType.enumMac ? k._b64bit ? "libDynamicPdfCorex64_" + G.DWT.PdfVersion + ".dylib" : "libDynamicPdfCore_" + G.DWT.PdfVersion + ".dylib" : k.__serverPlatform == G.DWT.EnumDWT_PlatformType.enumLinux || k.__serverPlatform == G.DWT.EnumDWT_PlatformType.enumEmbed || k.__serverPlatform == G.DWT.EnumDWT_PlatformType.enumChromeOS ? "libDynamicPdfCore_" + G.DWT.PdfVersion + ".so" : k._b64bit ? "DynamicPdfCorex64_" + G.DWT.PdfVersion + ".dll" : "DynamicPdfCore_" + G.DWT.PdfVersion + ".dll", !k._isMobileMode())
      try {
        k._innerSend("GetAddOnVersion", R.makeParams("pdf", L), !0, !1, !1).catch(function() {
        });
      } catch {
      }
    re = { PDF: { IsModuleInstalled: function() {
      var C = k;
      return C._resetErr(), C._isMobileMode() ? !!G.pdf && G.pdf.IsModuleInstalled() : C._innerFun("GetAddOnVersion", R.makeParams("pdf", L)) != "";
    }, IsModuleInstalledAsync: function() {
      var C = k;
      return C._resetErr(), C._isMobileMode() ? G.pdf ? l.Promise.resolve(G.pdf.IsModuleInstalled()) : l.Promise.resolve(!1) : C._innerFunV2("GetAddOnVersion", R.makeParams("pdf", L)).then(function(p) {
        return p != "";
      });
    }, ConvertToImage: function(H, p, N, U) {
      var H = R.replaceLocalFilename(H), K = "ConvertPDFToImage", Y = k;
      return Y._resetErr(), Y._isMobileMode() || (R.showMask(K), Y._innerSend(K, R.makeParams(H, p), !0, function(F) {
        return R.hideMask(K), N && N(), !0;
      }, function(F) {
        return R.hideMask(K), U && U(), !1;
      })), !0;
    }, SetPassword: function(C) {
      var p = k;
      return p._resetErr(), p._isMobileMode() ? (p._pdfPassword = C, !0) : p._innerFun("SetPDFPassword", R.makeParams(C));
    }, SetConvertMode: function(C) {
      return k._setConvertMode(C);
    }, SetConvertModeAsync: function(C) {
      return k._setConvertModeAsync(C);
    }, GetConvertMode: function() {
      var C = k;
      return C._resetErr(), C._pdfConvertMode;
    }, SetResolution: function(C) {
      var p = k;
      return p._resetErr(), p._isMobileMode() ? (p._pdfResolution = +C, !0) : k._innerFun("SetPDFResolution", R.makeParams(C));
    }, SetResolutionAsync: function(C) {
      var p = k;
      return p._resetErr(), p._isMobileMode() ? (p._pdfResolution = +C, l.Promise.resolve(!0)) : k._innerFunV2("SetPDFResolution", R.makeParams(C));
    }, IsTextBasedPDF: function(C, p, N) {
      var U = k;
      return U._resetErr(), U._isMobileMode() ? U._mobileNotSupport("IsTextBasedPDF", N) : (C = R.replaceLocalFilename(C), C = k._innerFun("IsTextBasedPDF", R.makeParams(C)), U.ErrorCode == 0 ? l.isFunction(p) && p(C) : l.isFunction(N) && N(U.ErrorCode, U.ErrorString), C);
    }, Write: { Setup: function(p) {
      var p = (p = p) || { version: 15 }, N = (2 < l.stringify(p).length && (l.isNumber(p.version) ? 1 <= p.version && p.version < 2 && (p.version = parseInt(10 * p.version)) : p.version = 15), l.isNumber(p.compression) && p.compression == G.DWT.EnumDWT_PDFCompressionType.PDF_FAX3 && (p.compression = G.DWT.EnumDWT_PDFCompressionType.PDF_FAX4), k);
      return N._resetErr(), N._isMobileMode() ? (N._pdfWriteSetting = p, !0) : (p = l.stringify(p), p = l.replaceAll(p, '"', '\\"'), N._innerFun("SetPDFSettings", ['["', p, '"]'].join("")));
    } } } }, k.__addon = k.__addon || {}, l.mix(k.__addon, re);
  });
}), G.AddonReady(function(l, n) {
  l.product.bActiveXEdition && l.DynamicLoadAddonFuns && l.DynamicLoadAddonFuns.push(function(L) {
    var k, re, R;
    if (!L.getSWebTwain() || !L.getSWebTwain().Addon)
      return !1;
    G.navInfoSync.bWin && (R = !G.navInfo.bOSx64 || G.navInfo.bWOW64 ? "DynamicPdfCore_" + G.DWT.PdfVersion + ".dll" : "DynamicPdfCorex64_" + G.DWT.PdfVersion + ".dll"), re = L.getSWebTwain(), k = { PDF: { IsModuleInstalled: function() {
      var C = re.GetAddOnVersion("pdf", R);
      return l.setErrorString(L), C != "";
    }, IsModuleInstalledAsync: function() {
      var C = re.GetAddOnVersion("pdf", R);
      return l.setErrorString(L), l.Promise.resolve(C != "");
    }, ConvertToImage: function(C, p, N, U) {
      return C = re.ConvertPDFToImage(C, p), l.wrapperRet(L, C, N, U);
    }, SetPassword: function(C) {
      return C = re.SetPDFPassword(C), l.wrapperRet(L, C);
    }, SetConvertMode: function(C) {
      return L._setConvertMode(C);
    }, SetConvertModeAsync: function(C) {
      return Promise.resolve(L._setConvertMode(C));
    }, GetConvertMode: function() {
      return L._resetErr(), L._pdfConvertMode;
    }, SetResolution: function(C) {
      return C = re.SetPDFResolution(C), l.wrapperRet(L, C);
    }, SetResolutionAsync: function(C) {
      return C = re.SetPDFResolution(C), l.Promise.resolve(l.wrapperRet(L, C));
    }, IsTextBasedPDF: function(C) {
      return C = re.IsTextBasedPDF(C), l.wrapperRet(L, C);
    } } }, L.Addon = L.Addon || {}, l.mix(L.Addon, k);
  });
});
var G = self.Dynamsoft || {};
G.DWT = G.DWT || {};
G.aryAddonReadyFun = G.aryAddonReadyFun || [];
G.AddonReady = G.AddonReady || function(l) {
  G.aryAddonReadyFun.push(l);
};
G.DWT.OCRVerInName = "10.0.0.0618";
(function(l) {
  for (var n = [G.DWT], L = 0; L < 1; L++) {
    var k = n[L];
    k.EnumDWT_OCRLanguage = { OCRL_ENG: "eng", OCRL_ARA: "ara", OCRL_CHI_SIM: "chi_sim", OCRL_CHI_TRA: "chi_tra", OCRL_HIN: "hin", OCRL_URD: "urd", OCRL_SPA: "spa", OCRL_FRA: "fra", OCRL_MSA: "msa", OCRL_IND: "ind", OCRL_RUS: "rus", OCRL_BEN: "ben", OCRL_POR: "por", OCRL_PAN: "pan", OCRL_DEU: "deu", OCRL_JPN: "jpn", OCRL_FAS: "fas", OCRL_SWA: "swa", OCRL_JAV: "jav", OCRL_TEL: "tel", OCRL_TUR: "tur", OCRL_KOR: "kor", OCRL_MAR: "mar", OCRL_TAM: "tam", OCRL_VIE: "vie", OCRL_ITA: "ita", OCRL_THA: "tha" }, k.EnumDWT_OCRPageSetMode = { OCRPSM_OSD_ONLY: 0, PSM_AUTO_OSD: 1, PSM_AUTO_ONLY: 2, PSM_AUTO: 3, PSM_SINGLE_COLUMN: 4, PSM_SINGLE_BLOCK_VERT_TEXT: 5, PSM_SINGLE_BLOCK: 6, PSM_SINGLE_LINE: 7, PSM_SINGLE_WORD: 8, PSM_CIRCLE_WORD: 9, PSM_SINGLE_CHAR: 10 }, k.EnumDWT_OCROutputFormat = { OCROF_TEXT: 0, OCROF_PDFPLAINTEXT: 1, OCROF_PDFIMAGEOVERTEXT: 2, OCROF_PDFPLAINTEXT_PDFX: 3, OCROF_PDFIMAGEOVERTEXT_PDFX: 4 }, k.EnumDWT_OCRDownloadType = { OCRDT_Dll: 0, OCRDT_LANGUAGE: 1 };
  }
})();
G.DWT.OCRLanguageData_eng = "4113088";
G.DWT.OCRLanguageData_ara = "1432056";
G.DWT.OCRLanguageData_chi_sim = "2469156";
G.DWT.OCRLanguageData_chi_tra = "2366642";
G.DWT.OCRLanguageData_hin = "1122751";
G.DWT.OCRLanguageData_urd = "1398718";
G.DWT.OCRLanguageData_spa = "2294433";
G.DWT.OCRLanguageData_fra = "1130365";
G.DWT.OCRLanguageData_msa = "1747801";
G.DWT.OCRLanguageData_ind = "1122661";
G.DWT.OCRLanguageData_rus = "3861738";
G.DWT.OCRLanguageData_ben = "855841";
G.DWT.OCRLanguageData_por = "1982756";
G.DWT.OCRLanguageData_pan = "497721";
G.DWT.OCRLanguageData_deu = "1525436";
G.DWT.OCRLanguageData_jpn = "2471260";
G.DWT.OCRLanguageData_fas = "431500";
G.DWT.OCRLanguageData_swa = "2167651";
G.DWT.OCRLanguageData_jav = "2982741";
G.DWT.OCRLanguageData_tel = "2769654";
G.DWT.OCRLanguageData_tur = "4550554";
G.DWT.OCRLanguageData_kor = "1677415";
G.DWT.OCRLanguageData_mar = "2118233";
G.DWT.OCRLanguageData_tam = "3237963";
G.DWT.OCRLanguageData_vie = "531275";
G.DWT.OCRLanguageData_ita = "2701314";
G.DWT.OCRLanguageData_tha = "1072600";
G.DWT.OCRLanguageData = {};
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_ENG] = G.DWT.OCRLanguageData_eng;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_ARA] = G.DWT.OCRLanguageData_ara;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_CHI_TRA] = G.DWT.OCRLanguageData_chi_tra;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_CHI_SIM] = G.DWT.OCRLanguageData_chi_sim;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_HIN] = G.DWT.OCRLanguageData_hin;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_URD] = G.DWT.OCRLanguageData_urd;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_SPA] = G.DWT.OCRLanguageData_spa;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_FRA] = G.DWT.OCRLanguageData_fra;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_MSA] = G.DWT.OCRLanguageData_msa;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_IND] = G.DWT.OCRLanguageData_ind;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_RUS] = G.DWT.OCRLanguageData_rus;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_BEN] = G.DWT.OCRLanguageData_ben;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_POR] = G.DWT.OCRLanguageData_por;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_PAN] = G.DWT.OCRLanguageData_pan;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_DEU] = G.DWT.OCRLanguageData_deu;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_JPN] = G.DWT.OCRLanguageData_jpn;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_FAS] = G.DWT.OCRLanguageData_fas;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_SWA] = G.DWT.OCRLanguageData_swa;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_JAV] = G.DWT.OCRLanguageData_jav;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_TEL] = G.DWT.OCRLanguageData_tel;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_TUR] = G.DWT.OCRLanguageData_tur;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_KOR] = G.DWT.OCRLanguageData_kor;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_MAR] = G.DWT.OCRLanguageData_mar;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_TAM] = G.DWT.OCRLanguageData_tam;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_VIE] = G.DWT.OCRLanguageData_vie;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_ITA] = G.DWT.OCRLanguageData_ita;
G.DWT.OCRLanguageData[G.DWT.EnumDWT_OCRLanguage.OCRL_THA] = G.DWT.OCRLanguageData_tha;
(function(l) {
  function n() {
    var L = this;
    L._text = "", L._fontName = "", L._fontSize = "", L._left = 0, L._top = 0, L._right = 0, L._bottom = 0;
  }
  n.prototype.GetText = function() {
    var L = this;
    return L._text;
  }, n.prototype.GetFontName = function() {
    var L = this;
    return L._fontName;
  }, n.prototype.GetFontSize = function() {
    var L = this;
    return L._fontSize;
  }, n.prototype.GetWordRect = function() {
    var L = this;
    return L._left + "," + L._top + "," + L._right + "," + L._bottom;
  }, l.NewWordBasicResult = function() {
    return new n();
  };
})(G.Lib);
(function(l) {
  function n() {
    var L = this;
    L._count = 0, L._left = 0, L._top = 0, L._right = 0, L._bottom = 0, L._wordlist = [];
  }
  n.prototype.GetWordCount = function() {
    var L = this;
    return L._count;
  }, n.prototype.GetLineRect = function() {
    var L = this;
    return L._left + "," + L._top + "," + L._right + "," + L._bottom;
  }, n.prototype.GetWordContent = function(L) {
    var k = this, re = k._wordlist.length;
    if (k._errorCode < 0)
      return "";
    if (L == null || L >= re || L < 0)
      return G.Lib.Errors.OCR_InvalidIndex(k, "GetWordContent"), "";
    var R = G.Lib.NewWordBasicResult();
    return R._text = k._wordlist[L].text, R._fontName = k._wordlist[L].fontname, R._fontSize = k._wordlist[L].fontsize, R._left = k._wordlist[L].rect[0], R._top = k._wordlist[L].rect[1], R._right = k._wordlist[L].rect[2], R._bottom = k._wordlist[L].rect[3], R;
  }, l.NewLineBasicResult = function() {
    return new n();
  };
})(G.Lib);
(function(l) {
  function n() {
    var L = this;
    L._count = 0, L._linelist = [];
  }
  n.prototype.GetLineCount = function() {
    var L = this;
    return L._count;
  }, n.prototype.GetLineContent = function(L) {
    var k = this, re = k._linelist.length;
    if (k._errorCode < 0)
      return "";
    if (L == null || L >= re || L < 0)
      return G.Lib.Errors.OCR_InvalidIndex(k, "GetLineContent"), "";
    var R = G.Lib.NewLineBasicResult();
    return R._count = k._linelist[L].words.length, R._left = k._linelist[L].rect[0], R._top = k._linelist[L].rect[1], R._right = k._linelist[L].rect[2], R._bottom = k._linelist[L].rect[3], R._wordlist = k._linelist[L].words, R;
  }, l.NewPageBasicResult = function() {
    return new n();
  };
})(G.Lib);
(function(l) {
  function n() {
    var L = this;
    L._count = 0, L._pagelist = [];
  }
  n.prototype.GetPageCount = function() {
    var L = this;
    return L._count;
  }, n.prototype.GetPageContent = function(L) {
    var k = this, re = k._pagelist.length;
    if (k._errorCode < 0)
      return "";
    if (L == null || L >= re || L < 0)
      return G.Lib.Errors.OCR_InvalidIndex(k, "GetPageContent"), "";
    var R = G.Lib.NewPageBasicResult();
    return R._count = k._pagelist[L].lines.length, R._linelist = k._pagelist[L].lines, R;
  }, l.NewPageSetBasicResult = function() {
    return new n();
  };
})(G.Lib);
(function(l) {
  function n(L) {
    var k = this;
    k._errorCode = 0, k._errorString = "", k._resultlist = [], k._stwain = L;
  }
  n.prototype.GetErrorCode = function() {
    var L = this;
    return L._errorCode;
  }, n.prototype.GetErrorString = function() {
    var L = this;
    return L._errorString;
  }, n.prototype.GetFormat = function() {
    var L = this;
    return L._resultlist[0].format;
  }, n.prototype.GetInput = function() {
    var L = this, k = L._resultlist[0].input;
    if (k) {
      var re = Number(k);
      if (!isNaN(re))
        return L._stwain._ImgManager.convertServerIdToClientIndex(re);
    }
    return k;
  }, n.prototype.GetPageSetCount = function() {
    var L = this;
    return L._resultlist[0].pagesets.length;
  }, n.prototype.GetPageSetContent = function(L) {
    var k = this, re = k._resultlist[0].pagesets.length;
    if (k._errorCode < 0)
      return "";
    if (L == null || L >= re || L < 0)
      return G.Lib.Errors.OCR_InvalidIndex(k, "GetPageSetContent"), "";
    var R = G.Lib.NewPageSetBasicResult();
    return R._count = k._resultlist[0].pagesets[L].pages.length, R._pagelist = k._resultlist[0].pagesets[L].pages, R;
  }, n.prototype.Get = function() {
    var L = this;
    return L._stwain._innerFun("GetOCRRestult");
  }, n.prototype.Save = function(L) {
    var k = this, re = l.html5.Funs.replaceLocalFilename(L);
    return k._stwain._innerFun("SaveOCRRestult", l.html5.Funs.makeParams(re));
  }, l.NewOCRBasicResult = function(L) {
    return new n(L);
  };
})(G.Lib);
(function(l) {
  function n() {
    var L = this;
    L.UnicodeFontName = "", L.UseDetectedFont = !0, L.MinFontSizeforMoreAccurateResult = 0, L.OCRLanguage = G.DWT.EnumDWT_OCRLanguage.OCRL_ENG, L.PageSetMode = G.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO, L.OutputFormat = G.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT;
  }
  n.prototype.GetUnicodeFontName = function() {
    var L = this;
    return L.UnicodeFontName;
  }, n.prototype.SetUnicodeFontName = function(L) {
    var k = this, re = L;
    return l.isString(re) || (re = ""), k.UnicodeFontName = re, !0;
  }, n.prototype.GetUseDetectedFont = function() {
    var L = this, k = L.UseDetectedFont;
    return !!k;
  }, n.prototype.SetUseDetectedFont = function(L) {
    var k = this;
    return k.UseDetectedFont = !!L, !0;
  }, n.prototype.GetMinFontSizeforMoreAccurateResult = function() {
    var L = this;
    return L.MinFontSizeforMoreAccurateResult;
  }, n.prototype.SetMinFontSizeforMoreAccurateResult = function(L) {
    var k = this, re = L * 1;
    return re < 0 && (re = 0), k.MinFontSizeforMoreAccurateResult = re, !0;
  }, n.prototype.GetOCRLanguage = function() {
    var L = this;
    return L.OCRLanguage;
  }, n.prototype.SetOCRLanguage = function(L) {
    var k = this, re = L;
    return l.isString(re) || (re = ""), k.OCRLanguage = re, !0;
  }, n.prototype.GetPageSetMode = function() {
    var L = this;
    return L.PageSetMode;
  }, n.prototype.SetPageSetMode = function(L) {
    var k = this, re = L * 1;
    return (re < 0 || re > G.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR) && (re = G.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO), k.PageSetMode = re, !0;
  }, n.prototype.GetOutputFormat = function() {
    var L = this;
    return L.OutputFormat;
  }, n.prototype.SetOutputFormat = function(L) {
    var k = this, re = L * 1;
    return (re < 0 || re > G.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX) && (re = G.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT), k.OutputFormat = re, !0;
  }, l.NewOptions = function() {
    return new n();
  };
})(G.Lib);
G.AddonReady(function(l, n) {
  if (!l.product.bHTML5Edition)
    return;
  var L;
  function k(C) {
    var p = l.html5.Funs;
    l.env.bMac ? L = "DynamicOCR_" + G.DWT.OCRVerInName + ".dylib" : l.env.bLinux ? L = "DynamicOCR_" + G.DWT.OCRVerInName + ".so" : G.dcp.b64bit ? L = "DynamicOCRx64_" + G.DWT.OCRVerInName + ".dll" : L = "DynamicOCR_" + G.DWT.OCRVerInName + ".dll", C._isMobileMode() || C._innerSend("GetAddOnVersion", p.makeParams("ocr", L), !0, !1, !1), C.__innerOCRBasicReadFunction = function(N, U, H, K, Y, F, q, O, J, E, me) {
      var Ee = this;
      return l.isFunction(E) ? Ee.__innerOCRBasicAsyncReadFunction(N, U, H, K, Y, F, q, O, J, E, me) : Ee.__innerOCRSyncReadFunction(N, J);
    }, C.__innerGetOCRBasicResultAsyncFunction = function(N) {
      var U = G.Lib.NewOCRBasicResult(this);
      return N && (U._errorCode = N.exception, U._errorString = N.description, U._resultlist = N.result), U;
    }, C.__innerOCRBasicAsyncReadFunction = function(N, U, H, K, Y, F, q, O, J, E, me) {
      var Ee = this, Le = function(Te) {
        if (Te.exception == 0) {
          if (l.isFunction(E))
            if (U != -1) {
              var Re = Ee.objImageIndexManager.convertServerIdToGuid(U);
              K == 1 ? E(Re, Y, F, q, O, Ee.__innerGetOCRBasicResultAsyncFunction(Te)) : E(Re, Ee.__innerGetOCRBasicResultAsyncFunction(Te));
            } else
              H != "" ? E(H, Ee.__innerGetOCRBasicResultAsyncFunction(Te)) : E(Ee.__innerGetOCRBasicResultAsyncFunction(Te));
          l.License.isLTS() && G.DWT.lcvrf(C);
        } else
          l.isFunction(me) && me(Te.exception, Te.description);
        p.hideMask(N);
      }, Oe = function(Te) {
        p.hideMask(N);
      };
      return p.showMask(N), Ee._innerSend(N, J, !0, Le, Oe), !0;
    }, C.__innerOCRSyncReadFunction = function(N, U) {
      var H = this, K, Y;
      return K = H._innerFunRaw(N, U, !1, !1), Y = l.NewOCRBasicResult(), Y._errorCode = H._errorCode, Y._errorString = H._errorString, K && l.isArray(K) && (Y._resultlist = K, Y._Count = K.length, l.License.isLTS() && G.DWT.lcvrf(C)), Y;
    }, C.__IsOCRBasicModuleInstalled = function() {
      var N = C, U = N._innerFun("GetAddOnVersion", p.makeParams("ocr", L)), H = U.split("|");
      return H[0] != "";
    }, C.__innerBasicDownload = function(N, U, H, K, Y) {
      var F = C, q;
      l.cancelFrome = 2, N = N.toString();
      var O = function() {
        return l.isFunction(K) && K(), !0;
      }, J = function() {
        return l.isFunction(Y) && Y(F.ErrorCode, F.ErrorString), !1;
      };
      if (!l.License.checkProductKey(F, { Core: !0 }) || !l.License.checkProductKey(F, { OCR: !0 }, !0))
        return J();
      U != G.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll && F._innerFun("SetOCRLanguage", p.makeParams(H));
      var E = F._innerFun("GetAddOnVersion", p.makeParams("ocr", L)), me = E.split("|");
      if (U == G.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll) {
        if (me[0] != "")
          return O(), !0;
      } else {
        var Ee = G.DWT.OCRLanguageData[H];
        if (Ee && me[1] == Ee)
          return O(), !0;
      }
      if (!N || N == "")
        return l.Errors.OCR_InvalidRemoteFilename(F), J(), !1;
      if (p.isServerInvalid(F))
        return J(), !1;
      q = "get", l.showProgress(F, "Download", !0);
      var Le = function(Te) {
        var Re = Te.total === 0 ? 100 : Math.round(Te.loaded * 100 / Te.total);
        [Te.loaded, " / ", Te.total].join(""), F._OnPercentDone([0, Re, "", "http"]);
      }, Oe = !0;
      U == G.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll ? F._OnPercentDone([0, -1, "Downloading OCR Module...", "http"]) : F._OnPercentDone([0, -1, "Downloading OCR Language Data...", "http"]), l.isFunction(K) || (Oe = !1), p.loadHttpBlob(F, q, N, Oe, function(Te) {
        F._OnPercentDone([0, -1, "Loading..."]);
        var Re = 100;
        U == G.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE && (Re = 101), F.__LoadImageFromBytes(Te, Re, "", Oe, O, J);
      }, function() {
        l.closeProgress("Download"), J();
      }, Le);
    };
  }
  var re = function(C) {
    var p = [], N, U;
    return C._ImgManager.count() <= 0 || (N = C._ImgManager.getCurrentImageIndex(), C._ImgManager.convertClientIndexToServerId(N), U = C._ImgManager.getSelectedClientIndexArray(), l.isArray(U) && l.each(U, function(H) {
      var K = C._ImgManager.convertClientIndexToServerId(H);
      p.push(K);
    })), p;
  }, R = function(C) {
    var p = l.html5.Funs, N, U = l.NewOptions();
    k(C), N = { OCR: { SetUnicodeFontName: function(H) {
      var K = C;
      return K._resetErr(), K._isMobileMode() ? K._mobileNotSupport("Addon.OCR.SetUnicodeFontName") : U.SetUnicodeFontName(H);
    }, GetUnicodeFontName: function() {
      var H = C;
      return H._resetErr(), H._isMobileMode() ? H._mobileNotSupport("Addon.OCR.GetUnicodeFontName") : U.GetUnicodeFontName();
    }, SetIfUseDetectedFont: function(H) {
      var K = C;
      return K._resetErr(), K._isMobileMode() ? K._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont") : U.SetUseDetectedFont(H);
    }, GetIfUseDetectedFont: function() {
      var H = C;
      return H._resetErr(), H._isMobileMode() ? H._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont") : U.GetUseDetectedFont();
    }, SetMinFontSizeforMoreAccurateResult: function(H) {
      var K = C;
      return K._resetErr(), K._isMobileMode() ? K._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult") : U.SetMinFontSizeforMoreAccurateResult(H);
    }, GetMinFontSizeforMoreAccurateResult: function() {
      var H = C;
      return H._resetErr(), H._isMobileMode() ? H._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult") : U.GetMinFontSizeforMoreAccurateResult();
    }, SetLanguage: function(H) {
      var K = C;
      return K._resetErr(), K._isMobileMode() ? K._mobileNotSupport("Addon.OCR.SetLanguage") : U.SetOCRLanguage(H);
    }, IsModuleInstalled: function() {
      var H = C;
      return H._resetErr(), H._isMobileMode() ? H._mobileNotSupport("Addon.OCR.IsModuleInstalled") : H.__IsOCRBasicModuleInstalled();
    }, SetPageSetMode: function(H) {
      var K = C;
      if (K._resetErr(), K._isMobileMode())
        return K._mobileNotSupport("Addon.OCR.SetPageSetMode");
      var Y = H * 1;
      return Y == G.DWT.EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_OSD || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD || Y == G.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR ? U.SetPageSetMode(Y) : (G.Lib.Errors.OCR_InvalidPageSetMode(K), !1);
    }, SetOutputFormat: function(H) {
      var K = C;
      if (K._resetErr(), K._isMobileMode())
        return K._mobileNotSupport("Addon.OCR.SetOutputFormat");
      var Y = H * 1;
      return Y == G.DWT.EnumDWT_OCROutputFormat.OCROF_TEXT || Y == G.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT || Y == G.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT || Y == G.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX || Y == G.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX ? U.SetOutputFormat(Y) : (G.Lib.Errors.OCR_InvalidOutputFormat(K), !1);
    }, Recognize: function(H, K, Y) {
      var F = C;
      if (F._resetErr(), F._isMobileMode())
        return F._mobileNotSupport("Addon.OCR.Recognize");
      if (!l.License.checkProductKey(F, { OCR: !0 }, !0))
        return l.isFunction(Y) && Y(F._errorCode, F._errorString), !1;
      var q = F._ImgManager.convertClientIndexToServerId(H);
      return F.__innerOCRBasicReadFunction("OCRRecognize", q, "", 0, 0, 0, 0, 0, p.makeParams(0, q, "", 0, 0, 0, 0, U.GetUnicodeFontName(), U.GetUseDetectedFont(), U.GetMinFontSizeforMoreAccurateResult(), U.GetOCRLanguage(), U.GetPageSetMode(), U.GetOutputFormat(), ""), K, Y);
    }, RecognizeRect: function(H, K, Y, F, q, O, J) {
      var E = C;
      if (E._resetErr(), E._isMobileMode())
        return E._mobileNotSupport("Addon.OCR.RecognizeRect");
      if (!K && K != 0 || !Y && Y != 0 || !F && F != 0 || !q && q != 0) {
        var me = G.Lib.NewOCRBasicResult(E);
        G.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(me, "RecognizeRect"), J(me.GetErrorCode(), me.GetErrorString());
        return;
      }
      if (!l.License.checkProductKey(E, { OCR: !0 }, !0))
        return l.isFunction(J) && J(E._errorCode, E._errorString), !1;
      var Ee = E._ImgManager.convertClientIndexToServerId(H);
      return E.__innerOCRBasicReadFunction("OCRRecognize", Ee, "", 1, K, Y, F, q, p.makeParams(0, Ee, "", K, Y, F, q, U.GetUnicodeFontName(), U.GetUseDetectedFont(), U.GetMinFontSizeforMoreAccurateResult(), U.GetOCRLanguage(), U.GetPageSetMode(), U.GetOutputFormat(), ""), O, J);
    }, RecognizeFile: function(H, K, Y) {
      var F = C;
      if (F._resetErr(), F._isMobileMode())
        return F._mobileNotSupport("Addon.OCR.RecognizeFile");
      var q = p.replaceLocalFilename(H);
      return l.License.checkProductKey(F, { OCR: !0 }, !0) ? F.__innerOCRBasicReadFunction("OCRRecognize", -1, q, 0, 0, 0, 0, 0, p.makeParams(1, -1, q, 0, 0, 0, 0, U.GetUnicodeFontName(), U.GetUseDetectedFont(), U.GetMinFontSizeforMoreAccurateResult(), U.GetOCRLanguage(), U.GetPageSetMode(), U.GetOutputFormat(), ""), K, Y) : (l.isFunction(Y) && Y(F._errorCode, F._errorString), !1);
    }, RecognizeSelectedImages: function(H, K) {
      var Y = C;
      if (Y._resetErr(), Y._isMobileMode())
        return Y._mobileNotSupport("Addon.OCR.RecognizeSelectedImages");
      var F;
      if (!l.License.checkProductKey(Y, { OCR: !0 }, !0))
        return l.isFunction(K) && K(Y._errorCode, Y._errorString), !1;
      var q = re(Y);
      return F = Y.__innerOCRBasicReadFunction("OCRRecognize", -1, "", 0, 0, 0, 0, 0, p.makeParams(2, -1, "", 0, 0, 0, 0, U.GetUnicodeFontName(), U.GetUseDetectedFont(), U.GetMinFontSizeforMoreAccurateResult(), U.GetOCRLanguage(), U.GetPageSetMode(), U.GetOutputFormat(), q.join(",")), H, K), F;
    }, Download: function(H, K, Y) {
      var F = C;
      return F._resetErr(), F._isMobileMode() ? F._mobileNotSupport("Addon.OCR.Download") : F.__innerBasicDownload(H, G.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll, U.GetOCRLanguage(), K, Y);
    }, DownloadLangData: function(H, K, Y) {
      var F = C;
      return F._resetErr(), F._isMobileMode() ? F._mobileNotSupport("Addon.OCR.DownloadLangData") : F.__innerBasicDownload(H, G.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE, U.GetOCRLanguage(), K, Y);
    } } }, C.__addon = C.__addon || {}, l.mix(C.__addon, N);
  };
  l.DynamicLoadAddonFuns && l.DynamicLoadAddonFuns.push(R);
});
var G = self.Dynamsoft || {};
G.DWT = G.DWT || {};
G.aryAddonReadyFun = G.aryAddonReadyFun || [];
G.AddonReady = G.AddonReady || function(l) {
  G.aryAddonReadyFun.push(l);
};
G.ProOCRVerInName = "1.2.0.0806";
(function(l) {
  function n() {
    var L = this;
    L._text = "", L._left = 0, L._top = 0, L._right = 0, L._bottom = 0;
  }
  n.prototype.GetText = function() {
    var L = this;
    return L._text;
  }, n.prototype.GetLetterRect = function() {
    var L = this;
    return L._left + "," + L._top + "," + L._right + "," + L._bottom;
  }, l.NewLetterResult = function() {
    return new n();
  };
})(G.Lib);
(function(l) {
  function n() {
    var L = this;
    L._count = 0, L._letterlist = [], L._zoneCount = 0, L._zoneWords = [];
  }
  n.prototype.GetLettersCount = function() {
    var L = this;
    return L._count;
  }, n.prototype.GetZoneCount = function() {
    var L = this;
    return L._zoneCount;
  }, n.prototype.GetLetterContent = function(L) {
    var k = this, re = k._count;
    if (k._errorCode < 0)
      return "";
    if (L == null || L >= re || L < 0)
      return G.Lib.Errors.OCR_InvalidIndex(k, "GetLetterContent"), "";
    var R = G.Lib.NewLetterResult();
    return R._text = k._letterlist[L].letter, R._left = k._letterlist[L].boundary[0], R._top = k._letterlist[L].boundary[1], R._right = k._letterlist[L].boundary[2], R._bottom = k._letterlist[L].boundary[3], R;
  }, n.prototype.GetZoneContent = function(L) {
    var k = this, re = k._zoneCount;
    return k._errorCode < 0 ? "" : L == null || L >= re || L < 0 ? (G.Lib.Errors.OCR_InvalidIndex(k, "GetZoneContent"), "") : k._zoneWords[L];
  }, l.NewPageResult = function() {
    return new n();
  };
})(G.Lib);
(function(l) {
  function n() {
    var L = this;
    L._input = 0, L._message = "", L._page = -1;
  }
  n.prototype.GetInput = function() {
    var L = this;
    return L._input;
  }, n.prototype.GetMessage = function() {
    var L = this;
    return L._message;
  }, n.prototype.GetPage = function() {
    var L = this;
    return L._page;
  }, l.NewErrorInfo = function() {
    return new n();
  };
})(G.Lib);
(function(l) {
  function n(L) {
    var k = this;
    k._errorCode = 0, k._errorString = "", k._errorlist = [], k._request = "", k._ocrTotalCount = 0, k._alreadyOCRCount = 0, k._resultlist = [], k._resultZoneDetail = [], k._stwain = L;
  }
  n.prototype.GetErrorCode = function() {
    var L = this;
    return L._errorCode;
  }, n.prototype.GetErrorString = function() {
    var L = this;
    return L._errorString;
  }, n.prototype.GetInput = function() {
    var L = this;
    if (L._request && L._request.input) {
      var k = L._request.input;
      if (k) {
        var re = Number(k);
        if (!isNaN(re))
          return L._stwain._ImgManager.convertServerIdToClientIndex(re);
      }
      return k;
    } else
      return "";
  }, n.prototype.GetErrorDetailList = function() {
    var L = this, k = 0;
    L._errorlist && (k = L._errorlist.length);
    for (var re = [], R = 0; R < k; R++) {
      var C = G.Lib.NewErrorInfo();
      C._input = L._errorlist[R].input, C._message = L._errorlist[R].message, C._page = L._errorlist[R].page, re.push(C);
    }
    return re;
  }, n.prototype.GetOCRTotalCount = function() {
    var L = this;
    return L._ocrTotalCount ? L._ocrTotalCount : 0;
  }, n.prototype.GetAlreadyOCRCount = function() {
    var L = this;
    return L._alreadyOCRCount ? L._alreadyOCRCount : 0;
  }, n.prototype.GetPageCount = function() {
    var L = this;
    return L._resultlist && L._resultlist.length ? L._resultlist.length : 0;
  }, n.prototype.GetPageContent = function(L) {
    var k = this, re = 0;
    if (k._resultlist && (re = k._resultlist.length), L == null || L >= re || L < 0)
      return G.Lib.Errors.OCR_InvalidIndex(k, "GetPageContent"), "";
    var R = G.Lib.NewPageResult();
    return k._resultlist ? (R._count = k._resultlist[L].length, R._letterlist = k._resultlist[L]) : R._count = 0, k._resultZoneDetail ? (R._zoneCount = k._resultZoneDetail[L].length, R._zoneWords = k._resultZoneDetail[L]) : R._zoneCount = 0, R;
  }, n.prototype.Get = function() {
    var L = this;
    return L._stwain._innerFun("GetOCRRestult");
  }, n.prototype.Save = function(L) {
    var k = this, re = l.html5.Funs.replaceLocalFilename(L);
    return k._stwain._innerFun("SaveOCRRestult", l.html5.Funs.makeParams(re));
  }, l.NewOCRProResult = function(L) {
    return new n(L);
  };
})(G.Lib);
(function(l) {
  for (var n = [G.DWT], L = 0; L < 1; L++) {
    var k = n[L];
    k.EnumDWT_OCRProRecognitionModule = { OCRPM_AUTO: "AUTO", OCRPM_MOSTACCURATE: "MOSTACCURATE", OCRPM_BALANCED: "BALANCED", OCRPM_FASTEST: "FASTEST" }, k.EnumDWT_OCRProOutputFormat = { OCRPFT_TXTS: "TXTS", OCRPFT_TXTCSV: "TXTCSV", OCRPFT_TXTF: "TXTF", OCRPFT_XML: "XML", OCRPFT_IOTPDF: "IOTPDF", OCRPFT_IOTPDF_MRC: "IOTPDF_MRC" }, k.EnumDWT_OCRProPDFVersion = { OCRPPDFV_0: "1.0", OCRPPDFV_1: "1.1", OCRPPDFV_2: "1.2", OCRPPDFV_3: "1.3", OCRPPDFV_4: "1.4", OCRPPDFV_5: "1.5", OCRPPDFV_6: "1.6", OCRPPDFV_7: "1.7" }, k.EnumDWT_OCRProPDFAVersion = { OCRPPDFAV_1A: "pdf/a-1a", OCRPPDFAV_1B: "pdf/a-1b", OCRPPDFAV_2A: "pdf/a-2a", OCRPPDFAV_2B: "pdf/a-2b", OCRPPDFAV_2U: "pdf/a-2u", OCRPPDFAV_3A: "pdf/a-3a", OCRPPDFAV_3B: "pdf/a-3b", OCRPPDFAV_3U: "pdf/a-3u" }, k.EnumDWT_OCRProType = { OCRDT_File: 0, OCRDT_Index: 1 }, k.EnumDWT_OCRFindTextFlags = { OCRFT_WHOLEWORD: 1, OCRFT_MATCHCASE: 2, OCRFT_FUZZYMATCH: 4 }, k.EnumDWT_OCRFindTextAction = { OCRFT_HIGHLIGHT: 0, OCRFT_STRIKEOUT: 1, OCRFT_MARKFORREDACT: 2 };
  }
})();
(function(l) {
  function n() {
    var L = this;
    L.FindText = "", L.FindTextFlags = G.DWT.EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD, L.FindTextAction = G.DWT.EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT;
  }
  l.NewRedaction = function() {
    return new n();
  };
})(G.Lib);
G.WebTwain = { Addon: { OCRPro: {} } };
(function(l) {
  function n() {
    var L = this;
    L.RecognitionModule = "", L.Languages = "eng", L.OutputFormat = "", L.PDFVersion = "", L.PDFAVersion = "", L.LicenseChecker = "", L.Redaction = G.Lib.NewRedaction();
  }
  l.NewSettings = function() {
    return new n();
  };
})(G.WebTwain.Addon.OCRPro);
(function() {
  function l(n, L, k, re) {
    var R = this;
    R.left = n, R.top = L, R.right = k, R.bottom = re;
  }
  G.WebTwain.Addon.OCRPro.NewOCRZone = function(n, L, k, re) {
    return new l(n, L, k, re);
  };
})();
G.AddonReady(function(l, n) {
  if (!l.product.bHTML5Edition)
    return;
  function L(Te) {
    var Re = l.html5.Funs;
    Te.__innerGetOCRProResultAsyncFunction = function(Ve) {
      var We = G.Lib.NewOCRProResult(this);
      return Ve && (We._errorCode = Ve.code, We._errorString = Ve.message, We._request = Ve.request, We._errorlist = Ve.errorList, We._ocrTotalCount = Ve.ocrTotalCount, We._alreadyOCRCount = Ve.alreadyOCRCount, We._resultlist = Ve.resultDetail, We._resultZoneDetail = Ve.resultZoneDetail), We;
    }, Te.__innerIsOCRTrial = function(Ve, We) {
      var le = this, je = function() {
        var fe = !1;
        if (le.__licenseInfo.Detail)
          for (var Me = 0; Me < le.__licenseInfo.Detail.length; Me++)
            le.__licenseInfo.Detail[Me].EnumLicenseType == "10" && le.__licenseInfo.Detail[Me].Trial == "TRUE" && (fe = !0);
        return Ve(fe);
      };
      return le.__licenseInfo && le.__licenseInfo.Detail ? je() : le.GetLicenseInfo(je, We);
    }, Te.__innerOCRReadFunction = function(Ve, We, le, je, fe, Me, Z, Ue) {
      var ct = this;
      return ct.__innerOCRAsyncReadFunction(Ve, We, le, je, fe, Me, Z, Ue);
    }, Te.__innerOCRAsyncReadFunction = function(Ve, We, le, je, fe, Me, Z, Ue) {
      var ct = this, mt = function(Ye) {
        Ye.code == 0 ? (l.isFunction(Z) && (We != -1 ? je == 1 ? Z(We, fe, ct.__innerGetOCRProResultAsyncFunction(Ye)) : Z(We, ct.__innerGetOCRProResultAsyncFunction(Ye)) : le != "" ? Z(le, ct.__innerGetOCRProResultAsyncFunction(Ye)) : Z(ct.__innerGetOCRProResultAsyncFunction(Ye))), l.License.isLTS() && G.DWT.lcvrf(Te)) : l.isFunction(Ue) && Ue(Ye.code, Ye.message, ct.__innerGetOCRProResultAsyncFunction(Ye)), Re.hideMask(Ve);
      }, at = function(Ye) {
        Re.hideMask(Ve);
      };
      return Re.showMask(Ve), ct._innerSend(Ve, Me, !0, mt, at), !0;
    }, Te.__innerGetRequestJson = function(Ve, We, le, je, fe) {
      var Me, Z = "[{";
      for (Z += '"id":"' + Te.clientId + '",', Z += '"method":"OCRProRecognize",', Z += '"dllName":"' + fe + '",', Z += '"productkey":"' + G.DWT.ProductKey + '",', Ve == G.DWT.EnumDWT_OCRProType.OCRDT_File ? Z += '"inputType":"file",' : Z += '"inputType":"index",', Z += '"input":[', Me = 0; Me < We.length; Me++)
        Ve == G.DWT.EnumDWT_OCRProType.OCRDT_File ? Z += '"' + We[Me] + '"' : Z += We[Me], Me + 1 < We.length && (Z += "|");
      if (Z += "],", Z += '"settings":{', Z += '"recognitionMethod": "Page"', le && (le.RecognitionModule && le.RecognitionModule.length > 0 && (Z += ',"recognitionModule":"' + le.RecognitionModule + '"'), le.Languages && le.Languages.length > 0 && (Z += ',"languages":"' + le.Languages + '"'), le.OutputFormat && le.OutputFormat.length > 0 && (Z += ',"outputFormat":"' + le.OutputFormat + '"'), le.PDFVersion && le.PDFVersion.length > 0 && (Z += ',"pdfVersion":"' + le.PDFVersion + '"'), le.PDFAVersion && le.PDFAVersion.length > 0 && (Z += ',"pdfAVersion":"' + le.PDFAVersion + '"'), le.Redaction && le.Redaction.FindText && le.Redaction.FindText.length > 0)) {
        var Ue = parseInt(le.Redaction.FindTextFlags), ct = parseInt(le.Redaction.FindTextAction);
        if (!isNaN(Ue) && !isNaN(ct)) {
          Z += ',"redaction":{';
          var mt = le.Redaction.FindText;
          mt = mt.replace(/\"/g, '\\"'), Z += '"findText":"' + mt + '"', Z += ',"findTextFlags":' + Ue, Z += ',"findTextAction":' + ct, Z += "}";
        }
      }
      for (Z += "},", Z += '"zones":[', Me = 0; Me < je.length; Me++)
        Z += "[" + je[Me].left + "," + je[Me].top + "," + je[Me].right + "," + je[Me].bottom + "]", Me + 1 < je.length && (Z += ",");
      return Z += "],", Z += '"outputFile":""', Z += "}]", Z;
    }, Te.__LoadImageFromBytesForDownloadInner = function(Ve, We, le, je, fe, Me, Z, Ue, ct) {
      var mt = Te, at, Ye, Et;
      Ve >= je ? (at = Me * je, Et = We.slice(at, fe)) : (at = Ve * Me, Ye = (Ve + 1) * Me, Et = We.slice(at, Ye));
      var Je = function() {
        G.Lib.isFunction(ct) && ct();
      }, ce = function() {
        if (Ve >= je) {
          G.Lib.isFunction(Ue) && Ue();
          return;
        }
        Ve = Ve + 1, mt.__LoadImageFromBytesForDownloadInner(Ve, We, le, je, fe, Me, Z, Ue, ct);
      };
      mt.__LoadImageFromBytes(Et, le, "", Z, ce, Je, at, fe);
    }, Te.__LoadImageFromBytesForDownload = function(Ve, We, le, je, fe, Me) {
      var Z = Te, Ue = 2 * 1e3 * 1e3, ct = Ve.size || Ve.length, mt = parseInt(ct / Ue), at = ct % Ue;
      at == 0 && (mt = mt - 1), Z.__LoadImageFromBytesForDownloadInner(0, Ve, We, mt, ct, Ue, je, fe, Me);
    };
  }
  var k = function(Te) {
    var Re = [], Ve, We;
    return Te._ImgManager.count() <= 0 || (Ve = Te._ImgManager.getCurrentImageIndex(), Te._ImgManager.convertClientIndexToServerId(Ve), We = Te._ImgManager.getSelectedClientIndexArray(), l.isArray(We) && l.each(We, function(le) {
      var je = Te._ImgManager.convertClientIndexToServerId(le);
      Re.push(je);
    })), Re;
  }, re = function(Te, Re, Ve, We) {
    var le = l.NewOCRProResult(Te);
    le._errorCode = Re, le._errorString = Ve;
    var je = l.NewErrorInfo();
    return je.input = We, je.message = le._errorString, je.page = 0, le._errorlist = [je], le;
  }, R = function(Te) {
    var Re = l.html5.Funs, Ve, We;
    l.env.bMac ? We = "DynamicOCRPro_" + G.ProOCRVerInName + ".dylib" : l.env.bLinux ? We = "DynamicOCRPro_" + G.ProOCRVerInName + ".so" : G.dcp.b64bit ? We = "DynamicOCRProx64_" + G.ProOCRVerInName + ".dll" : We = "DynamicOCRPro_" + G.ProOCRVerInName + ".dll", L(Te), Ve = { OCRPro: { Settings: !1, Recognize: function(le, je, fe) {
      var Me = [], Z, Ue, ct = Te;
      if (ct._resetErr(), ct._isMobileMode())
        return ct._mobileNotSupport("Addon.OCRPro.Recognize");
      if (Z = parseInt(le), l.isNaN(Z) || !l.isNumber(Z))
        return Ue = re(Te, -2201, "Invalid parameter type.", le), l.isFunction(fe) ? fe(Ue._errorCode, Ue._errorString, Ue) : l.Errors.WebviewerError(Te, Ue._errorString, Ue._errorCode), !1;
      var mt = Te._ImgManager.convertClientIndexToServerId(Z);
      if (mt == -1)
        return l.isFunction(fe) && (l.Errors.IndexOutOfRange(Te), Ue = re(Te, Te._errorCode, Te._errorString, le), fe(Ue._errorCode, Ue._errorString, Ue)), !1;
      if (!l.License.checkProductKey(Te, { OCRPro: !0 }, !0))
        return l.isFunction(fe) && (Ue = re(Te, Te._errorCode, Te._errorString, le), fe(Ue._errorCode, Ue._errorString, Ue)), !1;
      Me.push(mt);
      var at = [], Ye = this.Settings, Et = Te.__innerGetRequestJson(G.DWT.EnumDWT_OCRProType.OCRDT_Index, Me, Ye, at, We);
      return Te.__innerIsOCRTrial(function(Je) {
        return Je || l.License.isLTS() ? Te.__innerOCRReadFunction("OCRProRecognize", le, "", 0, at, Et, je, fe) : N(Ye.LicenseChecker, Te, "OCRProRecognize", le, "", 0, at, Et, je, fe);
      }, fe);
    }, RecognizeRect: function(le, je, fe, Me) {
      var Z = [], Ue, ct, mt = Te;
      if (mt._resetErr(), mt._isMobileMode())
        return mt._mobileNotSupport("Addon.OCRPro.RecognizeRect");
      if (Ue = parseInt(le), l.isNaN(Ue) || !l.isNumber(Ue))
        return ct = re(Te, -2201, "Invalid parameter type.", le), l.isFunction(Me) ? Me(ct._errorCode, ct._errorString, ct) : l.Errors.WebviewerError(Te, ct._errorString, ct._errorCode), !1;
      var at = Te._ImgManager.convertClientIndexToServerId(Ue), Ye = Te._ImgManager.GetImageWidth(Ue), Et = Te.GetImageHeight(Ue);
      if (at == -1)
        return l.isFunction(Me) && (l.Errors.IndexOutOfRange(Te), ct = re(Te, Te._errorCode, Te._errorString, le), Me(ct._errorCode, ct._errorString, ct)), !1;
      if (!l.License.checkProductKey(Te, { OCRPro: !0 }, !0))
        return l.isFunction(Me) && (ct = re(Te, Te._errorCode, Te._errorString, le), Me(ct._errorCode, ct._errorString, ct)), !1;
      if (Ye > 0 && Et > 0)
        for (var Je, ce, Ht, Dt, Be, Ge, lt = 0; lt < je.length; lt++)
          Je = je[lt], ce = Je.left, Ht = Je.top, Dt = Je.right, Be = Je.bottom, ce < 0 && (ce = 0), Ht < 0 && (Ht = 0), Dt < 0 && (Dt = 0), Be < 0 && (Be = 0), ce > Dt && (Ge = ce, ce = Dt, Dt = Ge), Ht > Be && (Ge = Ht, Ht = Be, Be = Ge), Dt > Ye && (Dt = Ye), Be > Et && (Be = Et), Je.left = ce, Je.top = Ht, Je.right = Dt, Je.bottom = Be;
      Z.push(at);
      var ot = this.Settings, Kt = Te.__innerGetRequestJson(G.DWT.EnumDWT_OCRProType.OCRDT_Index, Z, ot, je, We);
      return Te.__innerIsOCRTrial(function(Lt) {
        return Lt || l.License.isLTS() ? Te.__innerOCRReadFunction("OCRProRecognize", le, "", 1, je, Kt, fe, Me) : N(ot.LicenseChecker, Te, "OCRProRecognize", le, "", 1, je, Kt, fe, Me);
      }, Me);
    }, RecognizeFile: function(le, je, fe) {
      var Me = Te;
      if (Me._resetErr(), Me._isMobileMode())
        return Me._mobileNotSupport("Addon.OCRPro.RecognizeFile");
      var Z, Ue, ct;
      if (le.length == 0)
        return l.isFunction(fe) && (Z = G.Lib.NewOCRProResult(Te), Z._errorCode = -2201, Z._errorString = "File name cannot be empty.", ct = [], Ue = G.Lib.NewErrorInfo(), Ue.input = le, Ue.message = Z._errorString, Ue.page = 0, ct.push(Ue), Z._errorlist = ct, fe(Z._errorCode, Z._errorString, Z)), !1;
      if (!l.License.checkProductKey(Te, { OCRPro: !0 }, !0))
        return l.isFunction(fe) && (Z = G.Lib.NewOCRProResult(Te), Z._errorCode = Te._errorCode, Z._errorString = Te._errorString, ct = [], Ue = G.Lib.NewErrorInfo(), Ue.input = le, Ue.message = Z._errorString, Ue.page = 0, ct.push(Ue), Z._errorlist = ct, fe(Z._errorCode, Z._errorString, Z)), !1;
      var mt = Re.replaceLocalFilename(le), at = [];
      mt.indexOf("|") > 0 ? at = mt.split("|") : mt.indexOf(";") > 0 ? at = mt.split(";") : mt.indexOf(",") > 0 && (at = mt.split(","));
      var Ye = [];
      if (at.length > 0)
        for (var Et = 0; Et < at.length; Et++)
          Ye.push(at[Et]);
      else
        Ye.push(mt);
      var Je = [], ce = this.Settings, Ht = Te.__innerGetRequestJson(G.DWT.EnumDWT_OCRProType.OCRDT_File, Ye, ce, Je, We);
      Te.__innerIsOCRTrial(function(Dt) {
        return Dt || l.License.isLTS() ? Te.__innerOCRReadFunction("OCRProRecognize", -1, le, 0, Je, Ht, je, fe) : N(ce.LicenseChecker, Te, "OCRProRecognize", -1, le, 0, Je, Ht, je, fe);
      }, fe);
    }, RecognizeSelectedImages: function(le, je) {
      var fe, Me, Z, Ue = Te;
      if (Ue._resetErr(), Ue._isMobileMode())
        return Ue._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages");
      if (!l.License.checkProductKey(Te, { OCRPro: !0 }, !0)) {
        if (l.isFunction(je)) {
          var ct = G.Lib.NewOCRProResult(Te);
          ct._errorCode = Te._errorCode, ct._errorString = Te._errorString, Me = [], Z = G.Lib.NewErrorInfo(), Z.input = "", Z.message = ct._errorString, Z.page = 0, Me.push(Z), ct._errorlist = Me, je(ct._errorCode, ct._errorString, ct);
        }
        return !1;
      }
      var mt = [], at = this.Settings, Ye = k(Te), Et = Te.__innerGetRequestJson(G.DWT.EnumDWT_OCRProType.OCRDT_Index, Ye, at, mt, We);
      return Te.__innerIsOCRTrial(function(Je) {
        Je || l.License.isLTS() ? fe = Te.__innerOCRReadFunction("OCRProRecognize", -1, "", 0, mt, Et, le, je) : fe = N(at.LicenseChecker, Te, "OCRProRecognize", -1, "", 0, mt, Et, le, je);
      }, je), fe;
    }, IsModuleInstalled: function() {
      var le = Te;
      if (le._resetErr(), le._isMobileMode())
        return le._mobileNotSupport("Addon.OCRPro.IsModuleInstalled");
      var je = le._innerFun("GetAddOnVersion", Re.makeParams("proocr", We));
      return je != "";
    }, Download: function(le, je, fe) {
      var Me = Te, Z;
      if (Me._resetErr(), Me._isMobileMode())
        return Me._mobileNotSupport("Addon.OCRPro.Download");
      var Ue = function() {
        return l.isFunction(je) && je(), !0;
      }, ct = function() {
        return l.isFunction(fe) && fe(Me.ErrorCode, Me.ErrorString), !1;
      };
      if (!l.License.checkProductKey(Me, { Core: !0 }) || !l.License.checkProductKey(Me, { OCRPro: !0 }, !0))
        return ct();
      if (this.IsModuleInstalled())
        return Ue(), !0;
      if (!le || le == "" || !l.isString(le))
        return l.Errors.OCR_InvalidRemoteFilename(Me), ct(), !1;
      if (Re.isServerInvalid(Me))
        return ct(), !1;
      Z = "get", l.cancelFrome = 2, l.showProgress(Me, "Download", !0);
      var mt = function(Ye) {
        var Et = Ye.total === 0 ? 100 : Math.round(Ye.loaded * 100 / Ye.total);
        [Ye.loaded, " / ", Ye.total].join(""), Me._OnPercentDone([0, Et, "", "http"]);
      }, at = !0;
      return Me._OnPercentDone([0, -1, "Downloading OCR Resources...", "http"]), l.isFunction(je) || (at = !1), Re.loadHttpBlob(Me, Z, le, at, function(Ye) {
        Me._OnPercentDone([0, -1, "Loading..."]);
        var Et = 102;
        Me.__LoadImageFromBytesForDownload(Ye, Et, "", at, Ue, ct);
      }, function() {
        l.closeProgress("Download"), ct();
      }, mt);
    } } }, Te.__addon = Te.__addon || {}, l.mix(Te.__addon, Ve);
  };
  l.DynamicLoadAddonFuns && l.DynamicLoadAddonFuns.push(R);
  function C(Te, Re, Ve, We, le, je, fe, Me, Z, Ue) {
    var ct = this;
    ct.STWAIN = Re, ct.AjaxFunctionUrl = Te, ct.FunctionName = Ve, ct.ImageIndex = We, ct.FileNames = le, ct.Type = je, ct.AryZone = fe, ct.JsonString = Me, ct.OnSuccess = Z, ct.OnFailure = Ue;
  }
  G.WebTwain.Addon.OCRPro.NewOCRReadPara = function(Te, Re, Ve, We, le, je, fe, Me, Z, Ue) {
    return new C(Te, Re, Ve, We, le, je, fe, Me, Z, Ue);
  };
  function p(Te, Re) {
    var Ve = "", We = Te.responseText;
    if (We.length == 0) {
      var le = G.WebTwain.Addon.OCRPro.NewOCRError();
      G.Lib.Errors.OCR_LicenseCheckerError(le, Re.AjaxFunctionUrl), We = le.responseText;
    }
    Ve = Oe(We);
    var je = Ve.split(";");
    if (je.length == 1)
      Re.OnFailure(-1, We, G.Lib.NewOCRProResult());
    else if (je[0] == "true") {
      var fe = function(Me, Z, Ue) {
        G.Lib.isUndefined(Ue) ? G.Lib.isUndefined(Z) ? (Re.OnSuccess(Me), U(Re.AjaxFunctionUrl, Me.GetPageCount())) : (Re.OnSuccess(Me, Z), U(Re.AjaxFunctionUrl, Z.GetPageCount())) : (Re.OnSuccess(Me, Z, Ue), U(Re.AjaxFunctionUrl, Ue.GetPageCount()));
      };
      Re.STWAIN.__innerOCRReadFunction(Re.FunctionName, Re.ImageIndex, Re.FileNames, Re.Type, Re.AryZone, Re.JsonString, fe, Re.OnFailure);
    } else
      Re.OnFailure(je[1], je[2], G.Lib.NewOCRProResult());
  }
  function N(Te, Re, Ve, We, le, je, fe, Me, Z, Ue) {
    var ct = Te, mt = "DTW_AjaxMethod=CheckLicense&Productkey=" + Le(G.DWT.ProductKey), at = G.WebTwain.Addon.OCRPro.NewOCRReadPara(Te, Re, Ve, We, le, je, fe, Me, Z, Ue);
    return F(ct, mt, p, at);
  }
  function U(Te, Re) {
    var Ve = Te, We = "DTW_AjaxMethod=WriteOCRCount&OCRCount=" + Le(Re + "");
    F(Ve, We, H, null);
  }
  function H(Te, Re) {
  }
  function K() {
    var Te = this;
    Te.responseText = "", Te.errorString = "";
  }
  G.WebTwain.Addon.OCRPro.NewOCRError = function() {
    return new K();
  }, G.Lib.mix(G.Lib.Errors, { OCR_LicenseCheckerEmpty: function(Te) {
    var Re = -2601, Ve = "LicenseChecker cannot be empty.";
    Te.errorString = Ve, Te.responseText = Le("false;" + Re + ";" + Ve + ";");
  }, OCR_LicenseCheckerNotConnect: function(Te) {
    var Re = -2602, Ve = "Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";
    Te.errorString = Ve, Te.responseText = Le("false;" + Re + ";" + Ve + ";");
  }, OCR_AccessDenied: function(Te) {
    var Re = -2603, Ve = "Access denied.";
    Te.errorString = Ve, Te.responseText = Le("false;" + Re + ";" + Ve + ";");
  }, OCR_LicenseCheckerError: function(Te, Re) {
    var Ve = -2604, We = "Error occured in '" + Re + "'.";
    Te.errorString = We, Te.responseText = Le("false;" + Ve + ";" + We + ";");
  }, OCR_HTTPError: function(Te, Re) {
    var Ve = -2605, We = "HTTP Error " + Re + ".";
    Te.errorString = We, Te.responseText = Le("false;" + Ve + ";" + We + ";");
  }, OCR_LicenseCheckerUnauthorized: function(Te, Re) {
    var Ve = -2606, We = "You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '" + Re + "'.";
    Te.errorString = We, Te.responseText = Le("false;" + Ve + ";" + We + ";");
  }, __last: !1 });
  function Y() {
    var Te = null, Re = window;
    try {
      Te = new Re.ActiveXObject("Msxml2.XMLHTTP");
    } catch {
      try {
        Te = new Re.ActiveXObject("Microsoft.XMLHTTP");
      } catch {
        Te = new XMLHttpRequest();
      }
    }
    return Te;
  }
  function F(Te, Re, Ve, We) {
    var le = G.WebTwain.Addon.OCRPro.NewOCRError();
    if (Te == "")
      return G.Lib.Errors.OCR_LicenseCheckerEmpty(le), alert(le.errorString), Ve(le, We), !1;
    var je = Y();
    return je.open("POST", Te, !0), je.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), je.onreadystatechange = function() {
      if (je.readyState == 4)
        if (je.status == 200)
          Ve != null && typeof Ve == "function" && Ve(je, We);
        else
          return je.status == 401 ? (G.Lib.Errors.OCR_LicenseCheckerUnauthorized(le, We.AjaxFunctionUrl), Ve(le, We), !1) : je.status == 404 ? (G.Lib.Errors.OCR_LicenseCheckerNotConnect(le), alert(le.errorString), Ve(le, We), !1) : je.status == 403 ? (G.Lib.Errors.OCR_AccessDenied(le), Ve(le, We), !1) : (G.Lib.Errors.OCR_HTTPError(le, je.status), Ve(le, We), !1);
    }, je && Re && je.send(Re), !0;
  }
  var q = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", O = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);
  function J(Te) {
    var Re, Ve, We, le, je, fe;
    for (We = Te.length, Ve = 0, Re = ""; Ve < We; ) {
      if (le = Te.charCodeAt(Ve++) & 255, Ve == We) {
        Re += q.charAt(le >> 2), Re += q.charAt((le & 3) << 4), Re += "==";
        break;
      }
      if (je = Te.charCodeAt(Ve++), Ve == We) {
        Re += q.charAt(le >> 2), Re += q.charAt((le & 3) << 4 | (je & 240) >> 4), Re += q.charAt((je & 15) << 2), Re += "=";
        break;
      }
      fe = Te.charCodeAt(Ve++), Re += q.charAt(le >> 2), Re += q.charAt((le & 3) << 4 | (je & 240) >> 4), Re += q.charAt((je & 15) << 2 | (fe & 192) >> 6), Re += q.charAt(fe & 63);
    }
    return Re;
  }
  function E(Te) {
    var Re, Ve, We, le, je, fe, Me;
    for (fe = Te.length, je = 0, Me = ""; je < fe; ) {
      do
        Re = O[Te.charCodeAt(je++) & 255];
      while (je < fe && Re == -1);
      if (Re == -1)
        break;
      do
        Ve = O[Te.charCodeAt(je++) & 255];
      while (je < fe && Ve == -1);
      if (Ve == -1)
        break;
      Me += String.fromCharCode(Re << 2 | (Ve & 48) >> 4);
      do {
        if (We = Te.charCodeAt(je++) & 255, We == 61)
          return Me;
        We = O[We];
      } while (je < fe && We == -1);
      if (We == -1)
        break;
      Me += String.fromCharCode((Ve & 15) << 4 | (We & 60) >> 2);
      do {
        if (le = Te.charCodeAt(je++) & 255, le == 61)
          return Me;
        le = O[le];
      } while (je < fe && le == -1);
      if (le == -1)
        break;
      Me += String.fromCharCode((We & 3) << 6 | le);
    }
    return Me;
  }
  function me(Te) {
    var Re, Ve, We, le;
    for (Re = "", We = Te.length, Ve = 0; Ve < We; Ve++)
      le = Te.charCodeAt(Ve), le >= 1 && le <= 127 ? Re += Te.charAt(Ve) : le > 2047 ? (Re += String.fromCharCode(224 | le >> 12 & 15), Re += String.fromCharCode(128 | le >> 6 & 63), Re += String.fromCharCode(128 | le >> 0 & 63)) : (Re += String.fromCharCode(192 | le >> 6 & 31), Re += String.fromCharCode(128 | le >> 0 & 63));
    return Re;
  }
  function Ee(Te) {
    var Re, Ve, We, le, je, fe;
    for (Re = "", We = Te.length, Ve = 0; Ve < We; )
      switch (le = Te.charCodeAt(Ve++), le >> 4) {
        case 0:
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
        case 7:
          Re += Te.charAt(Ve - 1);
          break;
        case 12:
        case 13:
          je = Te.charCodeAt(Ve++), Re += String.fromCharCode((le & 31) << 6 | je & 63);
          break;
        case 14:
          je = Te.charCodeAt(Ve++), fe = Te.charCodeAt(Ve++), Re += String.fromCharCode((le & 15) << 12 | (je & 63) << 6 | (fe & 63) << 0);
          break;
      }
    return Re;
  }
  function Le(Te) {
    return J(me(Te));
  }
  function Oe(Te) {
    return Ee(E(Te));
  }
});
/*! 20221212133727
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: Webcam
* Version: 18.0
* 
*/
var G = self.Dynamsoft || {};
G.DWT = G.DWT || {}, G.aryAddonReadyFun = G.aryAddonReadyFun || [], G.AddonReady = G.AddonReady || function(l) {
  G.aryAddonReadyFun.push(l);
}, G.WebcamVerForActiveX = "15.0.0.0625", G.WebcamVerInName = "15.0.0.0625", function() {
  for (var l = [G.DWT], n = 0; n < 1; n++) {
    var L = l[n];
    L.EnumDWT_VideoRotateMode = { VRM_NONE: 0, VRM_90_DEGREES_CLOCKWISE: 1, VRM_180_DEGREES_CLOCKWISE: 2, VRM_270_DEGREES_CLOCKWISE: 3, VRM_FLIP_VERTICAL: 4, VRM_FLIP_HORIZONTAL: 5 }, L.EnumDWT_VideoProperty = { VP_BRIGHTNESS: 0, VP_CONTRAST: 1, VP_HUE: 2, VP_SATURATION: 3, VP_SHARPNESS: 4, VP_GAMMA: 5, VP_COLORENABLE: 6, VP_WHITEBALANCE: 7, VP_BACKLIGHTCOMPENSATION: 8, VP_GAIN: 9 }, L.EnumDWT_CameraControlProperty = { CCP_PAN: 0, CCP_TILT: 1, CCP_ROLL: 2, CCP_ZOOM: 3, CCP_EXPOSURE: 4, CCP_IRIS: 5, CCP_FOCUS: 6 };
  }
}(), function() {
  G.Lib.WebcamErrors = { InvalidParameter: function(l) {
    l._errorCode = -10001, l._errorString = "The parameter is invalid.";
  }, VideoNotPlayingWhenCapture: function(l) {
    l._errorCode = -10002, l._errorString = "To capture an image, the video must be playing.";
  }, VideoNotPlayingWhenGetURL: function(l) {
    l._errorCode = -10003, l._errorString = "To get the url for the current frame, the video must be playing.";
  }, Success: function(l) {
    l._errorCode = 0, l._errorString = "Successful.";
  } };
}(), function(l) {
  function n(L) {
    var k = this;
    k._Count = 0, k._resultlist = [], k._stwain = L;
  }
  n.prototype.GetCount = function() {
    return l.WebcamErrors.Success(this._stwain), this._Count - 1;
  }, n.prototype.Get = function(L) {
    var k = this;
    return k._resultlist.length - 1 <= L || L < 0 ? (G.Lib.Errors.Webcam_InvalidIndex(k._stwain, "Get"), "") : (l.WebcamErrors.Success(k._stwain), k._resultlist[L]);
  }, n.prototype.GetCurrent = function() {
    var L = this, k = L._resultlist.length;
    return k == 0 ? (G.Lib.Errors.Webcam_InvalidIndex(L._stwain, "GetCurrent"), "") : (l.WebcamErrors.Success(L._stwain), L._resultlist[k - 1]);
  }, l.NewWebcamValue = function(L) {
    return new n(L);
  };
}(G.Lib), function(l) {
  function n(L) {
    var k = this;
    k._Count = 0, k._resultlist = [], k._stwain = L;
  }
  n.prototype.GetValue = function() {
    var L = this;
    return L._resultlist.length == 0 ? (G.Lib.Errors.Webcam_InvalidIndex(L._stwain, ""), "") : (l.WebcamErrors.Success(L._stwain), L._resultlist[0].current);
  }, n.prototype.GetIfAuto = function() {
    var L = this;
    return L._resultlist.length == 0 ? (G.Lib.Errors.Webcam_InvalidIndex(L._stwain, ""), !1) : (l.WebcamErrors.Success(L._stwain), L._resultlist[0].auto == "true");
  }, l.NewWebcamSetting = function(L) {
    return new n(L);
  };
}(G.Lib), function(l) {
  function n(L) {
    var k = this;
    k._Count = 0, k._resultlist = [], k._stwain = L;
  }
  n.prototype.GetMinValue = function() {
    var L = this;
    return L._resultlist.length == 0 ? (G.Lib.Errors.Webcam_InvalidIndex(L._stwain, ""), "") : L._resultlist[0].min;
  }, n.prototype.GetMaxValue = function() {
    var L = this;
    return L._resultlist.length == 0 ? (G.Lib.Errors.Webcam_InvalidIndex(L._stwain, ""), "") : L._resultlist[0].max;
  }, n.prototype.GetSteppingDelta = function() {
    var L = this;
    return L._resultlist.length == 0 ? (G.Lib.Errors.Webcam_InvalidIndex(L._stwain, ""), 0) : L._resultlist[0].step;
  }, n.prototype.GetDefaultValue = function() {
    var L = this;
    return L._resultlist.length == 0 ? (G.Lib.Errors.Webcam_InvalidIndex(L._stwain, ""), 0) : L._resultlist[0].defaultValue;
  }, n.prototype.GetIfAuto = function() {
    var L = this;
    return L._resultlist.length == 0 ? (G.Lib.Errors.Webcam_InvalidIndex(L._stwain, ""), !1) : L._resultlist[0].auto == "true";
  }, l.NewWebcamMoreSetting = function(L) {
    return new n(L);
  };
}(G.Lib), G.AddonReady(function(l, n) {
  l.DynamicLoadAddonFuns && l.DynamicLoadAddonFuns.push(function(L) {
    L._innerSetWebcamValue = function(k) {
      var re = l.NewWebcamValue(L);
      return k && l.isArray(k) && (re._resultlist = k, re._Count = k.length), re;
    }, L._innerSetWebcamSetting = function(k) {
      var re = l.NewWebcamSetting(L);
      return k && l.isArray(k) && (re._resultlist = k, re._Count = k.length), re;
    }, L._innerSetWebcamMoreSetting = function(k) {
      var re = l.NewWebcamMoreSetting(L);
      return k && l.isArray(k) && (re._resultlist = k, re._Count = k.length), re;
    };
  }), l.Addon_Events.push("OnFrameCaptured"), l.Addon_Events.push("OnCaptureSuccess"), l.Addon_Events.push("OnCaptureError");
}), G.AddonReady(function(l, n) {
  l.product.bHTML5Edition && l.DynamicLoadAddonFuns && l.DynamicLoadAddonFuns.push(function(L) {
    var k, re = l.html5.Funs, R = l.env.bMac ? "DynamicWebcam_" + G.WebcamVerInName + ".dylib" : l.env.bLinux ? "DynamicWebcam_" + G.WebcamVerInName + ".so" : L._b64bit ? "DynamicWebcamx64_" + G.WebcamVerInName + ".dll" : "DynamicWebcam_" + G.WebcamVerInName + ".dll";
    if (!L._isMobileMode())
      try {
        L._innerSend("GetAddOnVersion", re.makeParams("webcam", R), !0, !1, !1).catch(function() {
        });
      } catch {
      }
    (k = L)._innerWebcamValueFunction = function(C, p) {
      return C = this._innerFunRaw(C, p, !1, !1), this._innerSetWebcamValue(C);
    }, k._innerWebcamSettingFunction = function(C, p) {
      return C = this._innerFunRaw(C, p, !1, !1), this._innerSetWebcamSetting(C);
    }, k._innerWebcamMoreSettingFunction = function(C, p) {
      return C = this._innerFunRaw(C, p, !1, !1), this._innerSetWebcamMoreSetting(C);
    }, k._OnCaptureSuccess = function(C) {
      G.Lib.isFunction(this.__OnCaptureSuccess) && this.__OnCaptureSuccess();
    }, k._OnCaptureError = function(N) {
      var p = N[1], N = N[2];
      G.Lib.isFunction(this.__OnCaptureError) && this.__OnCaptureError(p, N);
    }, k._OnFrameCaptured = function(C) {
      var p, N = this, U = G.Lib;
      N.__videoPause || (p = (p = N.__videoQuality) || 60, N.__videoDest && N.__videoDest.UpdateVideoContainer(N.GetImageURL(-1, -1, -1, 0, p))), U.isFunction(N.__OnFrameCaptured) && N.__OnFrameCaptured(C);
    }, k = { Webcam: { IsModuleInstalled: function() {
      var C = L;
      return C._resetErr(), C._isMobileMode() ? C._mobileNotSupport("Addon.Webcam.IsModuleInstalled") : C._innerFun("GetAddOnVersion", re.makeParams("webcam", R)) != "";
    }, Download: function(C, p, N) {
      var U = L;
      if (U._resetErr(), U._isMobileMode())
        return U._mobileNotSupport("Addon.Webcam.Download");
      G.Lib.cancelFrome = 2;
      function H() {
        return G.Lib.isFunction(p) && p(), !0;
      }
      function K() {
        return G.Lib.isFunction(N) && N(L._errorCode, L._errorString), !1;
      }
      if (!l.License.checkProductKey(L, { Webcam: !0 }, !0))
        return K();
      if (this.IsModuleInstalled())
        return H();
      if (!C || C == "")
        return G.Lib.Errors.Webcam_InvalidRemoteFilename(U), K();
      if (re.isServerInvalid(U))
        return K(), !1;
      G.Lib.showProgress(U, "Download", !0);
      var Y = !0;
      return U._OnPercentDone([0, -1, "Downloading Webcam Module...", "http"]), G.Lib.isFunction(p) || (Y = !1), re.loadHttpBlob(U, "get", C, Y, function(F) {
        U._OnPercentDone([0, -1, "Loading..."]), U.__LoadImageFromBytesV1(F, 100, "", 0, Y, H, K);
      }, function() {
        G.Lib.closeProgress(U, "Download"), K();
      }, function(F) {
        var q = F.total === 0 ? 100 : Math.round(100 * F.loaded / F.total);
        [F.loaded, " / ", F.total].join(""), U._OnPercentDone([0, q, "", "http"]);
      });
    }, GetSourceList: function() {
      var C, p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.GetSourceList") : l.License.checkProductKey(p, { Webcam: !0 }, !0) ? (C = p._innerFunRaw("GetWebcamSourceList"), p.ErrorCode == 0 && C.splice(C.length - 1, 1), C) : [];
    }, SelectSource: function(C) {
      var p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.SelectSource") : !!l.License.checkProductKey(p, { Webcam: !0 }, !0) && p._innerFun("SelectWebcam", re.makeParams(C));
    }, CloseSource: function() {
      var C = L;
      return C._resetErr(), C._isMobileMode() ? C._mobileNotSupport("Addon.Webcam.CloseSource") : (this._clear(), C._innerFun("StopCapture"));
    }, GetFramePartURL: function() {
      var C = L;
      return C._resetErr(), C._isMobileMode() ? C._mobileNotSupport("Addon.Webcam.GetFramePartURL") : this._isPlaying() ? C.GetImageURL(-1, -1, -1, !0, C.__videoQuality) : (l.WebcamErrors.VideoNotPlayingWhenGetURL(C), "");
    }, GetFrameURL: function() {
      var C = L;
      return C._resetErr(), C._isMobileMode() ? C._mobileNotSupport("Addon.Webcam.GetFrameURL") : this._isPlaying() ? C.GetImageURL(-1, -1, -1, 0, C.__videoQuality) : (l.WebcamErrors.VideoNotPlayingWhenGetURL(C), "");
    }, PlayVideo: function(C, p, N, U, H) {
      var K, Y, F, q, O = L;
      return O._resetErr(), O._isMobileMode() ? O._mobileNotSupport("Addon.Webcam.PlayVideo") : (K = G.Lib, Y = 60, F = this, q = function() {
        return F._clear(), G.Lib.isFunction(H) && H(L._errorCode, L._errorString), !1;
      }, C ? l.License.checkProductKey(L, { Webcam: !0 }, !0) ? (O.__videoDest = C, O.__videoDest.ShowVideoContainer(!0), K.isFunction(N) && (L.__OnFrameCaptured = N), L.__videoPause ? (L.__videoPause = !1, l.isFunction(U) && U()) : (L.__videoPause = !1, L.__videoQuality = p ? Y = (Y = +p) < 1 ? 60 : Y : Y, L._innerSend("PlayVideo", re.makeParams(!0), !0, U, q)), !0) : q() : (G.Lib.Errors.ParameterCannotEmpty(L), q()));
    }, PauseVideo: function() {
      var C = L;
      return C._resetErr(), C._isMobileMode() ? C._mobileNotSupport("Addon.Webcam.PauseVideo") : (this._isPlaying() && (C.__videoPause = !0), !0);
    }, _clear: function() {
      var C = L;
      G.Lib, C.__videoPause = !1, C.__OnFrameCaptured = !1, C.__videoQuality = 60, C.__videoDest && C.__videoDest.ShowVideoContainer(!1), C.__videoDest = !1;
    }, _isPlaying: function() {
      return L.GetIfShowVideoContainer();
    }, StopVideo: function() {
      var C = L;
      if (C._resetErr(), C._isMobileMode())
        return C._mobileNotSupport("Addon.Webcam.StopVideo");
      this._clear();
      var p = C._innerFun("PlayVideo", re.makeParams(!1, 0));
      return C._innerFun("StopCapture"), p;
    }, CaptureImage: function(C, p) {
      var N, U, H = L;
      return H._resetErr(), H._isMobileMode() ? (H._mobileNotSupport("Addon.Webcam.CaptureImage"), l.isFunction(p) && p(H._errorCode, H._errorString), !1) : l.License.checkProductKey(H, { Webcam: !0 }, !0) ? (N = "CaptureImage", U = function() {
        re.hideMask(N), l.isFunction(p) && p(H._errorCode, H._errorString);
      }, re.showMask(N), H.__OnCaptureError = U, H._innerSend(N, re.makeParams(!1), !0, function() {
        re.hideMask(), H.ErrorCode == 0 ? (re.hideMask(N), l.isFunction(C) && setTimeout(C, 0), l.License.isLTS() && G.DWT.lcvrf(L)) : U(H.ErrorCode, H.ErrorString);
      }, U), !0) : (l.isFunction(p) && p(H._errorCode, H._errorString), !1);
    }, GetMediaType: function() {
      var C = L;
      return C._resetErr(), C._isMobileMode() ? C._mobileNotSupport("Addon.Webcam.GetMediaType") : C._innerWebcamValueFunction("GetMediaType");
    }, SetMediaType: function(C) {
      var p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.SetMediaType") : l.isString(C) ? p._innerFun("SetMediaType", re.makeParams(C)) : (l.Errors.InvalidValue(p), !1);
    }, GetResolution: function() {
      var C = L;
      if (C._resetErr(), C._isMobileMode())
        return C._mobileNotSupport("Addon.Webcam.GetResolution");
      if (C = C._innerWebcamValueFunction("GetResolution"), C && C._resultlist) {
        var p, N, U = C._resultlist, H = [], K = [];
        for ((N = 0 < U.length ? U[U.length - 1] : N) == "" && 0 < U.length && (N = U[0]), p = 0; p < U.length - 1; p++) {
          for (var Y, F = (Y = U[p]).toLowerCase().split("x"), q = (J = O = q = void 0, { value: Y, p1: parseInt(F[0]), p2: parseInt(F[1]) }), O = H, J = O.length - 1; 0 <= J && O[J].p1 >= q.p1 && !(O[J].p1 == q.p1 && O[J].p2 < q.p2); )
            O[J + 1] = O[J], J--;
          O[J + 1] = q;
        }
        for (p = 0; p < H.length; p++)
          Y = H[p].value, K.push(Y);
        N && K.push(N), C._resultlist = K, K = H = null;
      }
      return C;
    }, SetResolution: function(C) {
      var p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.SetResolution") : l.isNumber(C) || l.isString(C) ? p._innerFun("SetResolution", re.makeParams(C)) : (l.Errors.InvalidValue(p), !1);
    }, GetFrameRate: function() {
      var C = L;
      return C._resetErr(), C._isMobileMode() ? C._mobileNotSupport("Addon.Webcam.GetFrameRate") : C._innerWebcamValueFunction("GetFrameRate");
    }, SetFrameRate: function(C) {
      var p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.SetFrameRate") : l.isNumber(C) ? L._innerFun("SetFrameRate", re.makeParams(C)) : (l.Errors.InvalidValue(p), !1);
    }, GetVideoPropertySetting: function(C) {
      var p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.GetVideoPropertySetting") : p._innerWebcamSettingFunction("GetWebcamVideoPropertySetting", re.makeParams(C));
    }, GetVideoPropertyMoreSetting: function(C) {
      var p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.GetVideoPropertyMoreSetting") : p._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting", re.makeParams(C));
    }, SetVideoPropertySetting: function(C, p, N) {
      var U = L;
      return U._resetErr(), U._isMobileMode() ? U._mobileNotSupport("Addon.Webcam.SetVideoPropertySetting") : U._innerFun("SetWebcamVideoPropertySetting", re.makeParams(C, p, N));
    }, SetVideoRotateMode: function(C) {
      var p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.SetVideoRotateMode") : p._innerFun("SetVideoRotateMode", re.makeParams(C));
    }, GetCameraControlPropertySetting: function(C) {
      var p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.GetCameraControlPropertySetting") : p._innerWebcamSettingFunction("GetWebcamCameraControlSetting", re.makeParams(C));
    }, GetCameraControlPropertyMoreSetting: function(C) {
      var p = L;
      return p._resetErr(), p._isMobileMode() ? p._mobileNotSupport("Addon.Webcam.GetCameraControlPropertyMoreSetting") : p._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting", re.makeParams(C));
    }, SetCameraControlPropertySetting: function(C, p, N) {
      var U = L;
      return U._resetErr(), U._isMobileMode() ? U._mobileNotSupport("Addon.Webcam.SetCameraControlPropertySetting") : U._innerFun("SetWebcamCameraControlPropertySetting", re.makeParams(C, p, N));
    } } }, L.__addon = L.__addon || {}, l.mix(L.__addon, k);
  });
}), G.AddonReady(function(l, n) {
  var L;
  l.product.bActiveXEdition && l.DynamicLoadAddonFuns && l.DynamicLoadAddonFuns.push(function(k) {
    var re, R, C;
    if (!k.getSWebTwain() || !k.getSWebTwain().Addon)
      return !1;
    G.navInfoSync.bWin && (C = !G.navInfo.bOSx64 || G.navInfo.bWOW64, L = C ? "DynamicWebcam_" + G.WebcamVerForActiveX + ".dll" : "DynamicWebcamx64_" + G.WebcamVerForActiveX + ".dll"), re = k.getSWebTwain();
    try {
      re.GetAddOnVersion("webcam", L);
    } catch {
    }
    (C = k)._innerRead = function(p) {
      var N;
      try {
        N = G.Lib.parse(p);
      } catch {
      }
      return N.result;
    }, C._innerWebcamValueFunctionPlugin = function(p) {
      return p = this._innerRead(p), this._innerSetWebcamValue(p);
    }, C._innerWebcamSettingFunctionPlugin = function(p) {
      return p = this._innerRead(p), this._innerSetWebcamSetting(p);
    }, C._innerWebcamMoreSettingFunctionPlugin = function(p) {
      return p = this._innerRead(p), this._innerSetWebcamMoreSetting(p);
    }, R = { Webcam: { IsModuleInstalled: function() {
      var p = re.GetAddOnVersion("webcam", L);
      return l.setErrorString(k), p != "";
    }, Download: function(p, N, U) {
      function H() {
        return G.Lib.isFunction(N) && N(), !0;
      }
      function K() {
        return G.Lib.isFunction(U) && U(k._errorCode, k._errorString), !1;
      }
      return l.License.checkProductKey(k, { Webcam: !0 }, !0) ? this.IsModuleInstalled() ? H() : p && p != "" ? (p = re.DownloadAddon(p), l.wrapperRet(k, p, H, K)) : (G.Lib.Errors.Webcam_InvalidRemoteFilename(k), K()) : K();
    }, GetSourceList: function() {
      var p, N;
      return l.License.checkProductKey(k, { Webcam: !0 }, !0) ? (p = re.GetWebcamSourceList(), N = [], l.setErrorString(k), k._errorCode == 0 && (N = k._innerRead(p)) && 1 < N.length && N.splice(N.length - 1, 1), N) : [];
    }, SelectSource: function(p) {
      return !!l.License.checkProductKey(k, { Webcam: !0 }, !0) && (p = re.SelectWebcam(p), l.setErrorString(k), p);
    }, CloseSource: function() {
      k._playVideoDWT = null;
      var p = re.StopCapture();
      return l.setErrorString(k), p;
    }, GetFramePartURL: function() {
      var p;
      return this._isPlaying() ? (p = re.GetDIB(-1), l.setErrorString(k), p) : (l.WebcamErrors.VideoNotPlayingWhenGetURL(k), "");
    }, GetFrameURL: function() {
      return "";
    }, PlayVideo: function(p, N, U, H, K) {
      function Y() {
        return k._playVideoDWT = null, G.Lib.isFunction(K) && K(k.ErrorCode, k.ErrorString), !1;
      }
      var F;
      return p && p.getSWebTwain() ? l.License.checkProductKey(k, { Webcam: !0 }, !0) ? (F = p.getSWebTwain().CurrentHWND) ? (k._playVideoDWT = p, setTimeout(function() {
        var q = re.RunWebcamCmd("PlayVideo", F, null, null, U);
        l.wrapperRet(k, q, H, Y);
      }, 0), !0) : (l.WebcamErrors.InvalidParameter(k), Y()) : Y() : (G.Lib.WebcamErrors.InvalidParameter(k), Y());
    }, PauseVideo: function() {
      return !0;
    }, StopVideo: function() {
      k._playVideoDWT = null;
      var p = re.RunWebcamCmd("StopVideo", 0, null, null, null);
      return l.setErrorString(k), re.StopCapture(), p;
    }, CaptureImage: function(p, N) {
      function U() {
        return G.Lib.isFunction(N) && N(k.ErrorCode, k.ErrorString), !1;
      }
      var H;
      return l.License.checkProductKey(k, { Webcam: !0 }, !0) ? (H = re.RunWebcamCmd("Capture", 0, function() {
        l.isFunction(p) && setTimeout(p, 0), l.License.isLTS() && G.DWT.lcvrf(k);
      }, U, null), l.setErrorString(k), H) : U();
    }, GetMediaType: function() {
      var p = k._innerWebcamValueFunctionPlugin(re.GetMediaType());
      return l.setErrorString(k), p;
    }, SetMediaType: function(p) {
      return l.isString(p) ? (p = re.SetMediaType(p), l.setErrorString(k), p) : (l.Errors.InvalidValue(k), !1);
    }, GetResolution: function() {
      var p = k._innerWebcamValueFunctionPlugin(re.GetResolution());
      if (l.setErrorString(k), p && p._resultlist) {
        var N, U, H = p._resultlist, K = [], Y = [];
        for (0 < H.length && (U = H[H.length - 1]), N = 0; N < H.length - 1; N++) {
          for (var F, q = (F = H[N]).toLowerCase().split("x"), O = (E = J = O = void 0, { value: F, p1: parseInt(q[0]), p2: parseInt(q[1]) }), J = K, E = J.length - 1; 0 <= E && J[E].p1 >= O.p1 && !(J[E].p1 == O.p1 && J[E].p2 < O.p2); )
            J[E + 1] = J[E], E--;
          J[E + 1] = O;
        }
        for (N = 0; N < K.length; N++)
          F = K[N].value, Y.push(F);
        U && Y.push(U), p._resultlist = Y, Y = K = null;
      }
      return p;
    }, SetResolution: function(p) {
      return l.isNumber(p) || l.isString(p) ? (p = re.SetResolution(p), l.setErrorString(k), p) : (l.Errors.InvalidValue(k), !1);
    }, GetFrameRate: function() {
      var p = k._innerWebcamValueFunctionPlugin(re.GetFrameRate());
      return l.setErrorString(k), p;
    }, SetFrameRate: function(p) {
      return l.isNumber(p) ? (p = re.SetFrameRate(p), l.setErrorString(k), p) : (l.Errors.InvalidValue(k), !1);
    }, GetVideoPropertySetting: function(p) {
      return p = re.GetWebcamVideoPropertySetting(p), l.setErrorString(k), k._innerWebcamSettingFunctionPlugin(p);
    }, GetVideoPropertyMoreSetting: function(p) {
      return p = re.GetWebcamVideoPropertyMoreSetting(p), l.setErrorString(k), k._innerWebcamMoreSettingFunctionPlugin(p);
    }, SetVideoPropertySetting: function(p, N, U) {
      return p = re.SetWebcamVideoPropertySetting(p, N, U), l.setErrorString(k), p;
    }, SetVideoRotateMode: function(p) {
      return p = re.SetVideoRotateMode(p), l.setErrorString(k), p;
    }, GetCameraControlPropertySetting: function(p) {
      return p = re.GetWebcamCameraControlSetting(p), l.setErrorString(k), k._innerWebcamSettingFunctionPlugin(p);
    }, GetCameraControlPropertyMoreSetting: function(p) {
      return p = re.GetWebcamCameraControlMoreSetting(p), l.setErrorString(k), k._innerWebcamMoreSettingFunctionPlugin(p);
    }, SetCameraControlPropertySetting: function(p, N, U) {
      return p = re.SetWebcamCameraControlPropertySetting(p, N, U), l.setErrorString(k), p;
    }, _isPlaying: function() {
      return !!k._playVideoDWT;
    } } }, k.Addon = k.Addon || {}, l.mix(k.Addon, R);
  });
});
/*! 20221212133727
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: Camera
* Version: 18.0
* 
*/
var G = self.Dynamsoft || {};
G.DWT = G.DWT || {};
G.aryAddonReadyFun = G.aryAddonReadyFun || [];
G.AddonReady = G.AddonReady || function(l) {
  G.aryAddonReadyFun.push(l);
};
G.CameraVerInName = "18.0.0.0831";
G.AddonReady(function(l, n) {
  if (!l.product.bHTML5Edition || G.navInfoSync.bIE)
    return;
  /*! 20221212 132344 */
  var L = { 757: function(R, C, p) {
    R.exports = p(666);
  }, 666: function(R) {
    R = function(C) {
      var p, N = Object.prototype, U = N.hasOwnProperty, Ve = typeof Symbol == "function" ? Symbol : {}, H = Ve.iterator || "@@iterator", K = Ve.asyncIterator || "@@asyncIterator", Y = Ve.toStringTag || "@@toStringTag";
      function F(at, Ye, Et) {
        return Object.defineProperty(at, Ye, { value: Et, enumerable: !0, configurable: !0, writable: !0 }), at[Ye];
      }
      try {
        F({}, "");
      } catch {
        F = function(Ye, Et, Je) {
          return Ye[Et] = Je;
        };
      }
      function q(at, Ge, Et, lt) {
        var ce, Ht, Dt, Be, Ge = Ge && Ge.prototype instanceof Oe ? Ge : Oe, Ge = Object.create(Ge.prototype), lt = new Ue(lt || []);
        return Ge._invoke = (ce = at, Ht = Et, Dt = lt, Be = J, function(ot, Kt) {
          if (Be === me)
            throw new Error("Generator is already running");
          if (Be === Ee) {
            if (ot === "throw")
              throw Kt;
            return mt();
          }
          for (Dt.method = ot, Dt.arg = Kt; ; ) {
            var Lt = Dt.delegate;
            if (Lt && (Lt = function bn(Fn, wn) {
              var ge = Fn.iterator[wn.method];
              if (ge === p) {
                if (wn.delegate = null, wn.method === "throw") {
                  if (Fn.iterator.return && (wn.method = "return", wn.arg = p, bn(Fn, wn), wn.method === "throw"))
                    return Le;
                  wn.method = "throw", wn.arg = new TypeError("The iterator does not provide a 'throw' method");
                }
                return Le;
              }
              if (ge = O(ge, Fn.iterator, wn.arg), ge.type === "throw")
                return wn.method = "throw", wn.arg = ge.arg, wn.delegate = null, Le;
              if (ge = ge.arg, !ge)
                return wn.method = "throw", wn.arg = new TypeError("iterator result is not an object"), wn.delegate = null, Le;
              {
                if (!ge.done)
                  return ge;
                wn[Fn.resultName] = ge.value, wn.next = Fn.nextLoc, wn.method !== "return" && (wn.method = "next", wn.arg = p);
              }
              return wn.delegate = null, Le;
            }(Lt, Dt), Lt)) {
              if (Lt === Le)
                continue;
              return Lt;
            }
            if (Dt.method === "next")
              Dt.sent = Dt._sent = Dt.arg;
            else if (Dt.method === "throw") {
              if (Be === J)
                throw Be = Ee, Dt.arg;
              Dt.dispatchException(Dt.arg);
            } else
              Dt.method === "return" && Dt.abrupt("return", Dt.arg);
            if (Be = me, Lt = O(ce, Ht, Dt), Lt.type === "normal") {
              if (Be = Dt.done ? Ee : E, Lt.arg !== Le)
                return { value: Lt.arg, done: Dt.done };
            } else
              Lt.type === "throw" && (Be = Ee, Dt.method = "throw", Dt.arg = Lt.arg);
          }
        }), Ge;
      }
      function O(at, Ye, Et) {
        try {
          return { type: "normal", arg: at.call(Ye, Et) };
        } catch (Je) {
          return { type: "throw", arg: Je };
        }
      }
      C.wrap = q;
      var J = "suspendedStart", E = "suspendedYield", me = "executing", Ee = "completed", Le = {};
      function Oe() {
      }
      function Te() {
      }
      function Re() {
      }
      var Ve = {}, We = (F(Ve, H, function() {
        return this;
      }), Object.getPrototypeOf), We = We && We(We(ct([]))), le = (We && We !== N && U.call(We, H) && (Ve = We), Re.prototype = Oe.prototype = Object.create(Ve));
      function je(at) {
        ["next", "throw", "return"].forEach(function(Ye) {
          F(at, Ye, function(Et) {
            return this._invoke(Ye, Et);
          });
        });
      }
      function fe(at, Ye) {
        var Et;
        this._invoke = function(Je, ce) {
          function Ht() {
            return new Ye(function(Dt, Be) {
              (function Ge(Fn, ot, Kt, Lt) {
                var bn, Fn = O(at[Fn], at, ot);
                if (Fn.type !== "throw")
                  return (ot = (bn = Fn.arg).value) && typeof ot == "object" && U.call(ot, "__await") ? Ye.resolve(ot.__await).then(function(wn) {
                    Ge("next", wn, Kt, Lt);
                  }, function(wn) {
                    Ge("throw", wn, Kt, Lt);
                  }) : Ye.resolve(ot).then(function(wn) {
                    bn.value = wn, Kt(bn);
                  }, function(wn) {
                    return Ge("throw", wn, Kt, Lt);
                  });
                Lt(Fn.arg);
              })(Je, ce, Dt, Be);
            });
          }
          return Et = Et ? Et.then(Ht, Ht) : Ht();
        };
      }
      function Me(at) {
        var Ye = { tryLoc: at[0] };
        1 in at && (Ye.catchLoc = at[1]), 2 in at && (Ye.finallyLoc = at[2], Ye.afterLoc = at[3]), this.tryEntries.push(Ye);
      }
      function Z(at) {
        var Ye = at.completion || {};
        Ye.type = "normal", delete Ye.arg, at.completion = Ye;
      }
      function Ue(at) {
        this.tryEntries = [{ tryLoc: "root" }], at.forEach(Me, this), this.reset(!0);
      }
      function ct(at) {
        if (at) {
          var Ye, Et = at[H];
          if (Et)
            return Et.call(at);
          if (typeof at.next == "function")
            return at;
          if (!isNaN(at.length))
            return Ye = -1, (Et = function Je() {
              for (; ++Ye < at.length; )
                if (U.call(at, Ye))
                  return Je.value = at[Ye], Je.done = !1, Je;
              return Je.value = p, Je.done = !0, Je;
            }).next = Et;
        }
        return { next: mt };
      }
      function mt() {
        return { value: p, done: !0 };
      }
      return F(le, "constructor", Te.prototype = Re), F(Re, "constructor", Te), Te.displayName = F(Re, Y, "GeneratorFunction"), C.isGeneratorFunction = function(at) {
        return at = typeof at == "function" && at.constructor, !!at && (at === Te || (at.displayName || at.name) === "GeneratorFunction");
      }, C.mark = function(at) {
        return Object.setPrototypeOf ? Object.setPrototypeOf(at, Re) : (at.__proto__ = Re, F(at, Y, "GeneratorFunction")), at.prototype = Object.create(le), at;
      }, C.awrap = function(at) {
        return { __await: at };
      }, je(fe.prototype), F(fe.prototype, K, function() {
        return this;
      }), C.AsyncIterator = fe, C.async = function(at, Ye, Et, Je, ce) {
        ce === void 0 && (ce = Promise);
        var Ht = new fe(q(at, Ye, Et, Je), ce);
        return C.isGeneratorFunction(Ye) ? Ht : Ht.next().then(function(Dt) {
          return Dt.done ? Dt.value : Ht.next();
        });
      }, je(le), F(le, Y, "Generator"), F(le, H, function() {
        return this;
      }), F(le, "toString", function() {
        return "[object Generator]";
      }), C.keys = function(at) {
        var Ye, Et = [];
        for (Ye in at)
          Et.push(Ye);
        return Et.reverse(), function Je() {
          for (; Et.length; ) {
            var ce = Et.pop();
            if (ce in at)
              return Je.value = ce, Je.done = !1, Je;
          }
          return Je.done = !0, Je;
        };
      }, C.values = ct, Ue.prototype = { constructor: Ue, reset: function(at) {
        if (this.prev = 0, this.next = 0, this.sent = this._sent = p, this.done = !1, this.delegate = null, this.method = "next", this.arg = p, this.tryEntries.forEach(Z), !at)
          for (var Ye in this)
            Ye.charAt(0) === "t" && U.call(this, Ye) && !isNaN(+Ye.slice(1)) && (this[Ye] = p);
      }, stop: function() {
        this.done = !0;
        var at = this.tryEntries[0].completion;
        if (at.type === "throw")
          throw at.arg;
        return this.rval;
      }, dispatchException: function(at) {
        if (this.done)
          throw at;
        var Ye = this;
        function Et(Ge, lt) {
          return Ht.type = "throw", Ht.arg = at, Ye.next = Ge, lt && (Ye.method = "next", Ye.arg = p), !!lt;
        }
        for (var Je = this.tryEntries.length - 1; 0 <= Je; --Je) {
          var ce = this.tryEntries[Je], Ht = ce.completion;
          if (ce.tryLoc === "root")
            return Et("end");
          if (ce.tryLoc <= this.prev) {
            var Dt = U.call(ce, "catchLoc"), Be = U.call(ce, "finallyLoc");
            if (Dt && Be) {
              if (this.prev < ce.catchLoc)
                return Et(ce.catchLoc, !0);
              if (this.prev < ce.finallyLoc)
                return Et(ce.finallyLoc);
            } else if (Dt) {
              if (this.prev < ce.catchLoc)
                return Et(ce.catchLoc, !0);
            } else {
              if (!Be)
                throw new Error("try statement without catch or finally");
              if (this.prev < ce.finallyLoc)
                return Et(ce.finallyLoc);
            }
          }
        }
      }, abrupt: function(at, Ye) {
        for (var Et = this.tryEntries.length - 1; 0 <= Et; --Et) {
          var Je = this.tryEntries[Et];
          if (Je.tryLoc <= this.prev && U.call(Je, "finallyLoc") && this.prev < Je.finallyLoc) {
            var ce = Je;
            break;
          }
        }
        var Ht = (ce = ce && (at === "break" || at === "continue") && ce.tryLoc <= Ye && Ye <= ce.finallyLoc ? null : ce) ? ce.completion : {};
        return Ht.type = at, Ht.arg = Ye, ce ? (this.method = "next", this.next = ce.finallyLoc, Le) : this.complete(Ht);
      }, complete: function(at, Ye) {
        if (at.type === "throw")
          throw at.arg;
        return at.type === "break" || at.type === "continue" ? this.next = at.arg : at.type === "return" ? (this.rval = this.arg = at.arg, this.method = "return", this.next = "end") : at.type === "normal" && Ye && (this.next = Ye), Le;
      }, finish: function(at) {
        for (var Ye = this.tryEntries.length - 1; 0 <= Ye; --Ye) {
          var Et = this.tryEntries[Ye];
          if (Et.finallyLoc === at)
            return this.complete(Et.completion, Et.afterLoc), Z(Et), Le;
        }
      }, catch: function(at) {
        for (var Ye = this.tryEntries.length - 1; 0 <= Ye; --Ye) {
          var Et, Je, ce = this.tryEntries[Ye];
          if (ce.tryLoc === at)
            return (Et = ce.completion).type === "throw" && (Je = Et.arg, Z(ce)), Je;
        }
        throw new Error("illegal catch attempt");
      }, delegateYield: function(at, Ye, Et) {
        return this.delegate = { iterator: ct(at), resultName: Ye, nextLoc: Et }, this.method === "next" && (this.arg = p), Le;
      } }, C;
    }(R.exports);
    try {
      regeneratorRuntime = R;
    } catch {
      typeof Xi == "object" ? Xi.regeneratorRuntime = R : Function("r", "regeneratorRuntime = r")(R);
    }
  } }, k = {};
  function re(R) {
    var C = k[R];
    return C !== void 0 ? C.exports : (C = k[R] = { exports: {} }, L[R](C, C.exports, re), C.exports);
  }
  re.n = function(R) {
    var C = R && R.__esModule ? function() {
      return R.default;
    } : function() {
      return R;
    };
    return re.d(C, { a: C }), C;
  }, re.d = function(R, C) {
    for (var p in C)
      re.o(C, p) && !re.o(R, p) && Object.defineProperty(R, p, { enumerable: !0, get: C[p] });
  }, re.o = function(R, C) {
    return Object.prototype.hasOwnProperty.call(R, C);
  }, function() {
    function R(te, W, g, f, b, m, I) {
      try {
        var x = te[m](I), D = x.value;
      } catch (B) {
        return void g(B);
      }
      x.done ? W(D) : Promise.resolve(D).then(f, b);
    }
    function C(te) {
      return function() {
        var W = this, g = arguments;
        return new Promise(function(f, b) {
          var m = te.apply(W, g);
          function I(D) {
            R(m, f, b, I, x, "next", D);
          }
          function x(D) {
            R(m, f, b, I, x, "throw", D);
          }
          I(void 0);
        });
      };
    }
    var Bn = re(757), p = re.n(Bn), N = window.Dynamsoft;
    function U() {
      return (U = Object.assign || function(te) {
        for (var W = 1; W < arguments.length; W++) {
          var g, f = arguments[W];
          for (g in f)
            Object.prototype.hasOwnProperty.call(f, g) && (te[g] = f[g]);
        }
        return te;
      }).apply(this, arguments);
    }
    function H(te) {
      if (te === void 0)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return te;
    }
    function K(te, W) {
      return (K = Object.setPrototypeOf || function(g, f) {
        return g.__proto__ = f, g;
      })(te, W);
    }
    function Y(te, W) {
      te.prototype = Object.create(W.prototype), K(te.prototype.constructor = te, W);
    }
    function F(te, W) {
      if (Object.prototype.hasOwnProperty.call(te, W))
        return te;
      throw new TypeError("attempted to use private field on non-instance");
    }
    var q = 0;
    function O(te) {
      return "__private_" + q++ + "_" + te;
    }
    var J = { code: 0, message: "ok." }, E = { code: 80001, message: "The parameter type is wrong." }, me = { code: 80025, message: "The camera class is required." }, Ee = { code: 80028, message: "The video is shown." }, Le = { code: 80033, message: "The options is invalid." }, Oe = { code: 80034, message: "The file name is invalid." }, Te = "_updateErrorMessage", Re = "_canvasClick", Ve = "_afterRender", We = "_documentClickUI", le = "_pagerChangedUI", je = "__dynamsoft_camera_files", fe = "dynamsoft-dvs-file", Me = "documentScanPage", Z = { ORIGINAL: "original" }, Ue = { scannerViewer: { maxDocuments: 20, maxImagesInBuffer: 20, fullScreen: !0, enableBorderDetection: !0, polygonStyle: { stroke: "#fe8e14", strokeWidth: "2px", dash: "solid" }, headerStyle: { background: "#000000", color: "#ffffff", selectedColor: "#fe8e14" }, bodyStyle: { background: "#ffffff" }, footerStyle: { background: "#000000", color: "#ffffff", selectedColor: "#fe8e14" }, scanButtonStyle: { background: "#fe8e14", color: "#ffffff" }, resolution: { visibility: "visible", valueList: [{ label: "720P", value: { width: 1280, height: 720 } }, { label: "1080P", value: { width: 1920, height: 1080 } }, { label: "2K", value: { width: 2560, height: 1440 } }, { label: "4K", value: { width: 3840, height: 2160 } }], defaultValue: { width: 1280, height: 720 } }, autoDetect: { visibility: "visible", enableAutoDetect: !1, acceptedPolygonConfidence: 0, acceptedBlurryScore: 0 }, torch: { visibility: "visible", on: !1, enableTorch: !1 }, autoScan: { visibility: "visible", enableAutoScan: !1 }, continuousScan: { visibility: "visible", enableContinuousScan: !0 }, switchCamera: { visibility: "visible" }, loadLocalFile: { visibility: "visible" } }, documentEditorSettings: { visibility: "visible", headerStyle: { background: "#000000", color: "#ffffff", selectedColor: "#fe8e14", disabledColor: "#808080" }, bodyStyle: { background: "#ffffff" }, footerStyle: { background: "#000000", color: "#ffffff", selectedColor: "#fe8e14" }, insert: { visibility: "visible", position: "before" }, delete: { visibility: "visible" }, rotateLeft: { visibility: "visible" }, filter: { visibility: "visible", valueList: [{ label: "Original", value: Z.ORIGINAL, option: { level: 1 } }, { label: "B&W", value: "blackAndWhite", option: { level: 1 } }, { label: "Grayscale", value: "grayscale", option: { level: 1 } }, { label: "Clean", value: "clean", option: { level: 1 } }, { label: "Brightening", value: "brightening", option: { level: 1 } }, { label: "Save Toner", value: "saveToner", option: { level: 1 } }], applyToAll: { visibility: "visible", enableApplyToAll: !0, label: "Apply to All" }, defaultValue: Z.ORIGINAL }, cropViewer: { visibility: "visible", polygonStyle: { stroke: "#fe8e14", strokeWidth: "2px", dash: "solid" }, rotateLeft: { visibility: "visible" }, rotateRight: { visibility: "visible" }, autoDetectBorder: { visibility: "visible" }, apply: { visibility: "visible" } } } }, ct = "error", mt = "cropViewer", at = "mainViewer", Ye = 0, Et = 1, Je = 2, ce, Ht = function() {
      function te(W) {
        this._updateData(W);
      }
      return te.prototype._updateData = function(W) {
        var g = this;
        Object.keys(W).forEach(function(f) {
          g[f] = W[f];
        });
      }, te;
    }(), Dt = { OK: { code: 0, message: "Successful" }, HTTPS_REQUIRED: { code: -4201, message: "HTTPS is required for accessing cameras." }, MEDIADEVICES_NOT_IMPL: { code: -4202, message: "The current browser has not implemented the MediaDevices interface." }, GETUSERMEDIA_NOT_IMPL: { code: -4203, message: "The current browser has not implemented the getUserMedia interface." }, NO_MEMORY: { code: -4204, message: "Not enough memory for this operation." }, NO_CAMERA_SELECTED: { code: -4205, message: "No camera is selected." }, VIDEO_ELEMENT_REQUIRED: { code: -4206, message: "A Video element is required for this operation." }, CAMERA_PLUG_OUT: { code: -4207, message: "The camera is not plugged in." }, CAMERA_NOT_OPEN: { code: -4208, message: "The camera is not open." }, CAMERA_SETTINGS_NOT_SUPPORT: { code: -4209, message: "The current browser does not support camera settings." }, FAILED_GET_USERMEDIA: { code: -4210, message: "Failed to get camera input." }, SOURCE_NOT_FOUND: { code: -4211, message: "The camera source can not be found." }, VIDEO_NOT_PLAY: { code: -4214, message: "The video must be playing for the capture operation to work." }, VIDEO_NOT_STOP: { code: -4215, message: "The video is already playing. Please stop the video before attempting to play it again to a different container." }, NO_CAMERA: { code: -4216, message: "No camera is found." }, LICENSE_INVALID: { code: -4217, message: "The license is invalid." }, MAX_DOCUMENT_LIMIT: { code: -4218, message: "The number of images processed at one time exceeds the maximum limit." }, MAX_IMAGES_IN_BUFFER_LIMIT: { code: -4219, message: "The number of images processed exceeded memory limit." }, CAPTURE_NO_IMAGE: { code: -4220, message: "No image is found for the capture operation." }, IMAGE_FORMAT_INVALID: { code: -4221, message: "The image format is not support." }, RESOLUTION_INVALID: { code: -4222, message: "The resolution is not support." } };
    function Be(te, W) {
      var g, f = typeof Symbol < "u" && te[Symbol.iterator] || te["@@iterator"];
      if (f)
        return (f = f.call(te)).next.bind(f);
      if (Array.isArray(te) || (f = function(b, m) {
        if (b) {
          if (typeof b == "string")
            return Ge(b, m);
          var I = Object.prototype.toString.call(b).slice(8, -1);
          return (I = I === "Object" && b.constructor ? b.constructor.name : I) === "Map" || I === "Set" ? Array.from(b) : I === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I) ? Ge(b, m) : void 0;
        }
      }(te)) || W && te && typeof te.length == "number")
        return f && (te = f), g = 0, function() {
          return g >= te.length ? { done: !0 } : { done: !1, value: te[g++] };
        };
      throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
    }
    function Ge(te, W) {
      (W == null || W > te.length) && (W = te.length);
      for (var g = 0, f = new Array(W); g < W; g++)
        f[g] = te[g];
      return f;
    }
    function lt(te, W, g, X, b, m, I, x) {
      x === void 0 && (x = !1);
      var D, B = JSON.parse(JSON.stringify({ video: { width: { ideal: 1280 }, height: { ideal: 720 }, facingMode: { ideal: x ? "user" : "environment" } } })), X = X === "exact" && !b;
      if (W && (B.video.width = ((D = {})[X ? "exact" : "ideal"] = W, D)), g && (B.video.height = ((D = {})[X ? "exact" : "ideal"] = g, D)), m && m.bMobile && m.bSafari && b && (D = Math.max(W || 1280, g || 720), B.video.width = ((b = {})[X ? "exact" : "ideal"] = D, b), delete B.video.height), te)
        delete B.video.facingMode, B.video.deviceId = { exact: te };
      else if (I && !x) {
        for (var Q, ve = ["rear", "back", "rück", "arrière", "trasera", "trás", "traseira", "posteriore", "后面", "後面", "背面", "后置", "後置", "背置", "задней", "الخلفية", "후", "arka", "achterzijde", "หลัง", "baksidan", "bagside", "sau", "bak", "tylny", "takakamera", "belakang", "אחורית", "πίσω", "spate", "hátsó", "zadní", "darrere", "zadná", "задня", "stražnja", "belakang", "बैक"], ke = Be(I); !(Q = ke()).done && function() {
          var dt = Q.value, et = dt.label.toLowerCase();
          if (et && ve.some(function($e) {
            return et.indexOf($e) != -1;
          }) && /\b0(\b)?/.test(et))
            return delete B.video.facingMode, B.video.deviceId = { ideal: dt.deviceId }, "break";
        }() !== "break"; )
          ;
        !B.video.deviceId && m.bAndroid && m.bHarmonyOS && (delete B.video.facingMode, B.video.deviceId = { ideal: I[I.length - 1].deviceId });
      }
      return B.video.facingMode && (W = (W = (W = B.video.facingMode) instanceof Array && W.length ? W[0] : W).exact || W.ideal || W) === "environment" && (B.bFmEnvironment = !!B.video.facingMode), B;
    }
    function ot() {
      return Kt.apply(this, arguments);
    }
    function Kt() {
      return (Kt = C(p().mark(function te(W, g, f, b, m, I, x) {
        var D, B, X, Q, ve, ke;
        return p().wrap(function(dt) {
          for (; ; )
            switch (dt.prev = dt.next) {
              case 0:
                return D = {}, X = B = null, dt.prev = 3, ve = lt(W, g, f, b, !1, m, I), dt.next = 7, Lt(ve, !1, m, I);
              case 7:
                if (B = dt.sent) {
                  dt.next = 10;
                  break;
                }
                return dt.abrupt("return", D);
              case 10:
                if (document && document.createElement ? X = document.createElement("video") : pe(x, Dt.VIDEO_ELEMENT_REQUIRED), Q = b === "exact", m.bFirefox || !Q)
                  return X.srcObject = B, dt.next = 16, X.play();
                dt.next = 16;
                break;
              case 16:
                D.type = b, Q ? (ve = B.getVideoTracks()[0], (ke = ve.getConstraints()) && ke.width ? (D.height = ke.height.exact || ke.height, D.width = ke.width.exact || ke.width) : (ke = ve.getSettings(), D.height = ke.height.exact || ke.height, D.width = ke.width.exact || ke.width)) : (D.height = X.videoHeight, D.width = X.videoWidth), dt.next = 23;
                break;
              case 20:
                dt.prev = 20, dt.t0 = dt.catch(3), this._fireLog && this._fireLog("_getResolution exception:" + (dt.t0.message || dt.t0));
              case 23:
                if (B)
                  return m.bFirefox && (X.srcObject = null), dt.next = 27, B.getTracks().forEach(function(et) {
                    et.stop();
                  });
                dt.next = 29;
                break;
              case 27:
                X = B = null;
              case 29:
                return dt.abrupt("return", D);
              case 30:
              case "end":
                return dt.stop();
            }
        }, te, this, [[3, 20]]);
      }))).apply(this, arguments);
    }
    function Lt() {
      return bn.apply(this, arguments);
    }
    function bn() {
      return (bn = C(p().mark(function te(W, g, f, b) {
        return p().wrap(function(m) {
          for (; ; )
            switch (m.prev = m.next) {
              case 0:
                return typeof W.video == "boolean" && (W.video = {}), m.prev = 1, m.next = 4, navigator.mediaDevices.getUserMedia(W);
              case 4:
                return m.abrupt("return", m.sent);
              case 7:
                if (m.prev = 7, m.t0 = m.catch(1), !m.t0.name || m.t0.name !== "OverconstrainedError") {
                  m.next = 13;
                  break;
                }
                if (g)
                  throw m.t0;
                m.next = 12;
                break;
              case 12:
                return m.abrupt("return", null);
              case 13:
                return f && f.bMobile && f.bSafari ? (delete W.video.width, delete W.video.height) : W.bFmEnvironment ? (delete W.video.facingMode, b && b.length && (W.video.deviceId = { ideal: b[b.length - 1].deviceId })) : W.video = !0, m.abrupt("return", navigator.mediaDevices.getUserMedia(W));
              case 15:
              case "end":
                return m.stop();
            }
        }, te, null, [[1, 7]]);
      }))).apply(this, arguments);
    }
    function Fn() {
      var te;
      return navigator.mediaDevices && (te = navigator.mediaDevices.getSupportedConstraints()) != null && te.torch;
    }
    (Bn = ce = ce || {}).iconResolution = "dynamsoft-camera-icon-resolution", Bn.iconAutoDetect = "dynamsoft-camera-icon-autoDetect", Bn.iconClose = "dynamsoft-camera-icon-close", Bn.iconLoad = "dynamsoft-camera-icon-loadLocalFile", Bn.iconSwitch = "dynamsoft-camera-icon-switchCamera", Bn.iconCapture = "dynamsoft-camera-icon-scan", Bn.iconAutoCapture = "dynamsoft-camera-icon-autoScan", Bn.iconContinuous = "dynamsoft-camera-icon-continuous", Bn.iconBack = "dynamsoft-camera-icon-back", Bn.iconArrow = "dynamsoft-camera-icon-arrow", Bn.iconDelete = "dynamsoft-camera-icon-remove", Bn.iconInsert = "dynamsoft-camera-icon-insert", Bn.iconRotateLeft = "dynamsoft-camera-icon-rotateLeft", Bn.iconFilter = "dynamsoft-camera-icon-filter", Bn.iconCrop = "dynamsoft-camera-icon-crop", Bn.iconSave = "dynamsoft-camera-icon-save", Bn.iconRotateRight = "dynamsoft-camera-icon-rotateRight", Bn.iconFullCrop = "dynamsoft-camera-icon-autoDetectBorder", Bn.iconFlash = "dynamsoft-camera-icon-flash", Bn.iconFlashOn = "dynamsoft-camera-icon-flashOn", Bn.iconFlashOff = "dynamsoft-camera-icon-flashOff", Bn.iconNext = "dynamsoft-camera-icon-next", Bn.uiIcon = "dynamsoft-camera-ui-icon", Bn.uiExitMutiple = "dynamsoft-camera-ui-exitMutiple", Bn.uiCapture = "dynamsoft-camera-ui-capture", Bn.uiDetect = "dynamsoft-camera-ui-detect", Bn.uiPrevious = "dynamsoft-camera-ui-previous", Bn.uiNext = "dynamsoft-camera-ui-next", Bn.uiDelete = "dynamsoft-camera-ui-delete", Bn.uiSave = "dynamsoft-camera-ui-save", Bn.displayNone = "dynamsoft-camera-display-none", Bn.fixedFull = "dynamsoft-camera-fixed-full", Bn.font = "dynamsoft-camera-font", Bn.disable = "dynamsoft-camera-disable", Bn.filterDropDown = "dynamsoft-camera-filterDropDown", Bn.buttonMultipleImg = "dynamsoft-camera-button-multipleImg", Bn.filterApplyAll = "dynamsoft-camera-filterApplyAll", Bn.hidden = "dynamsoft-camera-display-none", Bn.previewImg = "dynamsoft-camera-previewImg", Bn.cameraVideo = "dynamsoft-camera-cameraVideo", Bn.cameraCvs = "dynamsoft-camera-cameraCvs", Bn.cameraContainer = "dynamsoft-camera-cameraContainer", Bn.overflowHidden = "dynamsoft-camera-overflowHidden", Bn.relative = "dynamsoft-camera-relative", Bn.cvsContainer = "dynamsoft-camera-cvsContainer", Bn.detectCvs = "dynamsoft-camera-detectCvs", Bn.documentScanPage = "dynamsoft-camera-scanPage", Bn.documentEditPage = "dynamsoft-camera-documentEditPage", Bn.cropPage = "dynamsoft-camera-cropPage", Bn.block = "dynamsoft-camera-block", Bn.capturing = "dynamsoft-camera-capturing", Bn.headerfont = "dynamsoft-camera-header-icon-font", Bn.footerfont = "dynamsoft-camera-footer-icon-font", Bn.headerSelected = "dynamsoft-camera-header-selected", Bn.footerSelected = "dynamsoft-camera-footer-selected", Bn.filterSelectedItem = "dynamsoft-camera-filter-selected", Bn.filterCheckBox = "dynamsoft-camera-filter-checkBox", Bn.filterCheckedBox = "dynamsoft-camera-filter-checkedBox", Bn.ddlSelectedItem = "dynamsoft-camera-ddl-selected", Bn.BUTTON_PREFIX = "dynamsoft-camera-button-";
    var wn = ["blobList"];
    function ge(te) {
      te && !te.isDestroyed && te.destroy();
    }
    function Wt() {
      return (Wt = C(p().mark(function te(W, g) {
        var f;
        return p().wrap(function(b) {
          for (; ; )
            switch (b.prev = b.next) {
              case 0:
                if (g === void 0 && (g = !0), W) {
                  b.next = 4;
                  break;
                }
                return document.body.classList.remove(ce.overflowHidden), b.abrupt("return");
              case 4:
                if (!W.element) {
                  b.next = 25;
                  break;
                }
                if (f = W.container) {
                  b.next = 15;
                  break;
                }
                if (W.container = document.body, g)
                  return b.next = 11, W.show();
                b.next = 11;
                break;
              case 11:
                return W.element.classList.add(ce.fixedFull), document.body.appendChild(W.element), document.body.classList.add(ce.overflowHidden), b.abrupt("return");
              case 15:
                if (!(f = mn(f) ? document.getElementById(f) : f)) {
                  b.next = 25;
                  break;
                }
                if (document.body.classList.contains(ce.overflowHidden) && document.body.classList.remove(ce.overflowHidden), document.body === f && document.body.classList.add(ce.overflowHidden), window.getComputedStyle(f).position === "static" && document.body !== f && f.classList.add(ce.relative), f.appendChild(W.element), W.container = f, g)
                  return b.next = 25, W.show();
                b.next = 25;
                break;
              case 25:
              case "end":
                return b.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function xt() {
      return He.apply(this, arguments);
    }
    function He() {
      return (He = C(p().mark(function te(W, g, f) {
        var b, m, I, x, D;
        return p().wrap(function(B) {
          for (; ; )
            switch (B.prev = B.next) {
              case 0:
                return m = !1, f && (b = vr(f), m = Vt(b, W.imageWidth, W.imageHeight)), x = !1, D = { quality: 85, returnType: N.Enum_ImageType.IT_BGRA, returnBlob: !1 }, !m && f && (_o(b) && b.length == 8 && (I = { points: b }), x = !0), B.abrupt("return", Or(W, g, I, x, D, !1).then(function(X) {
                  return W.imageData = X.src, ar(X.result), X.result;
                }));
              case 5:
              case "end":
                return B.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Ne(te, W) {
      var g, m = te.config, m = se(m === void 0 ? {} : m, "documentEditorSettings.filter"), f = m.defaultValue, f = f === void 0 ? Z.ORIGINAL : f, b = m.applyToAll, m = m.valueList;
      return (g = (g = b && b.enableApplyToAll && mn(te.filterApplyToAllValue) && te.filterApplyToAllValue != "" ? te.filterApplyToAllValue : g) || (g = mn(W) && W != "" ? W : g) || f) !== Z.ORIGINAL && m.some(function(I) {
        return I.value === g;
      }) ? g : Z.ORIGINAL;
    }
    function bt() {
      return (bt = C(p().mark(function te(W, g, f, b) {
        var m, I;
        return p().wrap(function(x) {
          for (; ; )
            switch (x.prev = x.next) {
              case 0:
                if ((m = Ne(W, b)) === Z.ORIGINAL)
                  return x.abrupt("return", { filterValue: m, filterBlob: f });
                x.next = 3;
                break;
              case 3:
                return x.next = 5, W.filterHandlerByIImageData(g, f, m);
              case 5:
                return I = x.sent, x.abrupt("return", { filterValue: m, filterBlob: I });
              case 7:
              case "end":
                return x.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Ut() {
      return Zt.apply(this, arguments);
    }
    function Zt() {
      return (Zt = C(p().mark(function te(W, g, f, b, m, I, x) {
        var D, B, X, Q, ve, ke, dt, et, $e, gt, hn;
        return p().wrap(function(Tt) {
          for (; ; )
            switch (Tt.prev = Tt.next) {
              case 0:
                if (f === void 0 && (f = !1), b === void 0 && (b = !1), m === void 0 && (m = !1), !I) {
                  Tt.next = 14;
                  break;
                }
                if (!m) {
                  Tt.next = 11;
                  break;
                }
                Tt.next = 7;
                var Dn = W, Xn = { source: Dn, output: { orgImage: !1, previewImage: { quality: 85, width: 200, height: 200, returnType: N.Enum_ImageType.IT_JPG, returnBlob: !0, nInterplationMethod: 5 } } };
                return N.ImageProcWrapper.createImage(Xn).then(function(vn) {
                  return Dn.imageData = vn.src, ar(vn.preview), vn.preview;
                });
              case 7:
                D = Tt.sent, D = new Ht({ oriBlob: I, preview: D }), Tt.next = 12;
                break;
              case 11:
                D = new Ht({ oriBlob: I });
              case 12:
                Tt.next = 21;
                break;
              case 14:
                return m || (B = !1), Tt.next = 17, Or(W, void 0, void 0, void 0, void 0, B);
              case 17:
                X = Tt.sent, W.imageData = X.src, ar(X.result), D = m ? (ar(X.preview), new Ht({ oriBlob: X.result, preview: X.preview })) : new Ht({ oriBlob: X.result });
              case 21:
                if (X = se(g, "config.scannerViewer"), ke = X.enableBorderDetection, ke = ke === void 0 || ke, Q = W.imageWidth, ve = W.imageHeight, ke)
                  return Tt.next = 26, Rn(W, g);
                Tt.next = 40;
                break;
              case 26:
                if (ke = Tt.sent, $e = function(vn, Nn, ir) {
                  return vn.map(function(kn, En) {
                    return En % 2 == 0 ? (En = kn, En = Math.max(0, kn), Math.min(En, Nn)) : (En = Math.max(0, kn), Math.min(En, ir));
                  });
                }(vr(ke.cornerPoints), Q, ve), D.detectArea = $e, b || f)
                  return Tt.next = 33, xt(W, void 0, D.detectArea);
                Tt.next = 38;
                break;
              case 33:
                return dt = Tt.sent, Tt.next = 36, Xt(dt);
              case 36:
                et = Tt.sent, f && (D.resImage = dt, D.resBlob = vi(et));
              case 38:
                Tt.next = 43;
                break;
              case 40:
                D.detectArea = [0, 0, Q, 0, Q, ve, 0, ve], b && (dt = W, et = D.oriBlob), f && (D.resImage = W, D.resBlob = vi(D.oriBlob));
              case 43:
                if (b)
                  return Tt.next = 46, function() {
                    return bt.apply(this, arguments);
                  }(g, dt, et, x);
                Tt.next = 51;
                break;
              case 46:
                $e = Tt.sent, gt = $e.filterValue, hn = $e.filterBlob, D.filterValue = gt, D.filterBlob = hn;
              case 51:
                return et = dt = null, Tt.abrupt("return", D);
              case 54:
              case "end":
                return Tt.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function rt(te, W, g, f) {
      return $n.log("blobToImageData"), Or(te, W, g, f, { quality: 85, returnType: N.Enum_ImageType.IT_BGRA, returnBlob: !1 }, !1).then(function(b) {
        return ar(b.result), b.result;
      });
    }
    function Xt(te) {
      $n.log("ImageDataToBlob");
      var W = { quality: 85, returnType: N.Enum_ImageType.IT_JPG, returnBlob: !0 };
      return Or(te, void 0, void 0, void 0, W, !1).then(function(g) {
        return te.imageData = g.src, ar(g.result), g.result;
      });
    }
    function dn() {
      return an.apply(this, arguments);
    }
    function an() {
      return (an = C(p().mark(function te(W, g, f) {
        var b, m, I, x, D, B, X, Q;
        return p().wrap(function(ve) {
          for (; ; )
            switch (ve.prev = ve.next) {
              case 0:
                if (b = W.getCurrentPage()) {
                  ve.next = 3;
                  break;
                }
                return ve.abrupt("return");
              case 3:
                if (m = b.getHtmlElement()) {
                  ve.next = 6;
                  break;
                }
                return ve.abrupt("return");
              case 6:
                if (I = m == null ? void 0 : m.querySelector("." + ce.buttonMultipleImg)) {
                  ve.next = 9;
                  break;
                }
                return ve.abrupt("return");
              case 9:
                if (x = b.queryPreviewImageElement()) {
                  ve.next = 12;
                  break;
                }
                return ve.abrupt("return");
              case 12:
                if (!(D = g).preview) {
                  ve.next = 16;
                  break;
                }
                ve.next = 26;
                break;
              case 16:
                return ve.next = 18, rt(D.oriBlob);
              case 18:
                return X = ve.sent, D.detectArea && (B = { cornerPoints: D.detectArea }), ve.next = 22, Pn(W, B, X, !1, !1);
              case 22:
                X = ve.sent, D.preview = X.preview, delete X.preview, X = null;
              case 26:
                return ve.next = 28, new Promise(function(ke, dt) {
                  var et = x.src;
                  x.src = tt.createURL(D.preview), D.detectArea && x.setAttribute("data", JSON.stringify(D.detectArea)), oi(D), D = null, x.onload = function() {
                    x.onload = null, et && tt.revokeObjectURL(et), ke(!0);
                  }, x.onerror = function($e) {
                    dt($e);
                  };
                });
              case 28:
                Q = I == null ? void 0 : I.querySelector(".dynamsoft-camera-imgCount"), 0 < f ? (Q.innerText = String(f), Q.classList.remove(ce.displayNone)) : (Q.innerText = "", Q.classList.add(ce.displayNone)), Q = m == null ? void 0 : m.querySelector("." + ce.BUTTON_PREFIX + "continuousMode"), I.classList.remove(ce.displayNone), Q != null && Q.classList.add(ce.footerSelected);
              case 33:
              case "end":
                return ve.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Rn() {
      return xr.apply(this, arguments);
    }
    function xr() {
      return (xr = C(p().mark(function te(W, g) {
        var f, b, m, I, x, D, B, X, Q, ve;
        return p().wrap(function(ke) {
          for (; ; )
            switch (ke.prev = ke.next) {
              case 0:
                if (f = W.imageWidth, b = W.imageHeight, m = g.config.scannerViewer || {}, m = m.autoDetect, I = (m = m === void 0 ? {} : m).acceptedPolygonConfidence, I = I === void 0 ? 80 : I, x = m.acceptedBlurryScore, x = x === void 0 ? 80 : x, D = g.getAreaDetectCallback()) {
                  ke.next = 7;
                  break;
                }
                return g.emit(ct, { message: "The detect function is not bind.", code: -4290 }), ke.abrupt("return", { cornerPoints: [], detectedArea: !1 });
              case 7:
                return ke.next = 9, D(W, I, x, void 0, void 0);
              case 9:
                return B = ke.sent, W.imageData = B.src, X = B.confidence, X = X === void 0 ? [0] : X, Q = B.blurryScore, Q = Q === void 0 ? 0 : Q, ve = B.cornerPoints, g.emit("documentDetected", B), typeof m.processFrame == "function" ? m.processFrame(B, m) ? B.detectedArea = !0 : (B.detectedArea = !1, B.cornerPoints = [0, 0, f, 0, f, b, 0, b]) : X[0] < I / 100 || Q < x || ve.every(function(dt) {
                  return dt === 0;
                }) ? (B.detectedArea = !1, B.cornerPoints = [0, 0, f, 0, f, b, 0, b]) : B.detectedArea = !0, ke.abrupt("return", B);
              case 15:
              case "end":
                return ke.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function hr() {
      return (hr = C(p().mark(function te(W, g, f, b, m) {
        var I, x, D;
        return p().wrap(function(B) {
          for (; ; )
            switch (B.prev = B.next) {
              case 0:
                if (m === Z.ORIGINAL)
                  return B.abrupt("return", g);
                B.next = 2;
                break;
              case 2:
                if (I = f.find(function(X) {
                  return X.label === m;
                }), x = b.find(function(X) {
                  return X.value === m;
                }), I && I.handler && x) {
                  B.next = 6;
                  break;
                }
                return B.abrupt("return", g);
              case 6:
                return B.next = 8, rt(g);
              case 8:
                return D = B.sent, B.next = 11, I.handler(D, x.option);
              case 11:
                return D = B.sent, B.abrupt("return", D.result);
              case 13:
              case "end":
                return B.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Vr() {
      return (Vr = C(p().mark(function te(W, g, f, b, m) {
        var I, x, D;
        return p().wrap(function(B) {
          for (; ; )
            switch (B.prev = B.next) {
              case 0:
                if (m === Z.ORIGINAL)
                  return B.abrupt("return", g);
                B.next = 2;
                break;
              case 2:
                if (I = f.find(function(X) {
                  return X.label === m;
                }), x = b.find(function(X) {
                  return X.value === m;
                }), I && I.handler && x) {
                  B.next = 6;
                  break;
                }
                return B.abrupt("return", g);
              case 6:
                return B.next = 8, I.handler(W, x.option);
              case 8:
                return D = B.sent, W.imageData = D.src, ar(D.result), B.abrupt("return", D.result);
              case 12:
              case "end":
                return B.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Zn(f, W) {
      var f = f || {}, g = f.iconCss, f = f.visibility, f = f === void 0 || f;
      return g && (W.icon = g), (mn(f) && f.toLowerCase() == "hidden" || f === !1) && (W.visibility = "hidden"), W;
    }
    function It() {
      return (It = C(p().mark(function te(W, g, f, b) {
        var m;
        return p().wrap(function(I) {
          for (; ; )
            switch (I.prev = I.next) {
              case 0:
                if (f)
                  return b.blobList, m = function(x, D) {
                    if (x == null)
                      return {};
                    for (var B, X = {}, Q = Object.keys(x), ve = 0; ve < Q.length; ve++)
                      B = Q[ve], 0 <= D.indexOf(B) || (X[B] = x[B]);
                    return X;
                  }(b, wn), I.next = 4, Promise.resolve(f([{ iImageData: g, file: U({}, m) }]));
                I.next = 8;
                break;
              case 4:
                I.sent !== !1 && W.redirectToHome(), I.next = 9;
                break;
              case 8:
                W.redirectToHome();
              case 9:
              case "end":
                return I.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Mt() {
      return (Mt = C(p().mark(function te(W, g, f, b) {
        var m, I, x, D, B, X, Q, ve, ke, dt, et, $e, gt, hn, Tt, Dn, Xn, vn, Nn, ir, kn;
        return p().wrap(function(En) {
          for (; ; )
            switch (En.prev = En.next) {
              case 0:
                if (m = W.getCurrentPage(), I = W.config.scannerViewer, I = (I === void 0 ? {} : I).continuousScan, I = I === void 0 ? {} : I, g.length == 0)
                  return En.abrupt("return");
                En.next = 5;
                break;
              case 5:
                if (I.enableContinuousScan || g.length != 1) {
                  En.next = 20;
                  break;
                }
                return x = g[0], En.next = 9, rt(x);
              case 9:
                return D = En.sent, En.next = 12, Ut(D, W, !1, !1, !1, x);
              case 12:
                return X = En.sent, X = X.detectArea, X = { cornerPoints: X, detectedArea: !0 }, En.next = 17, Yt(W, D, !1, X, f, x);
              case 17:
                m instanceof qe && m.enableMultiImages(), En.next = 56;
                break;
              case 20:
                if (B = m.getImageCount(), X = W.config.scannerViewer || {}, ve = X.maxDocuments, ke = ve = ve === void 0 ? 20 : ve, Q = g.length, (B + g.length > ke || B + g.length > ve) && (W.emit("video-error", Dt.MAX_IMAGES_IN_BUFFER_LIMIT), Q = ke - B), ve = m.getDvs(), !(0 < Q)) {
                  En.next = 56;
                  break;
                }
                ke = Ne(W, null), $e = et = 0;
              case 30:
                if ($e < Q)
                  return gt = g[$e], En.next = 34, rt(gt);
                En.next = 46;
                break;
              case 34:
                return hn = En.sent, En.next = 37, Ut(hn, W, !0, !0, !1, gt, ke);
              case 37:
                hn = En.sent, Tt = hn.filterBlob, Dn = hn.resBlob, Xn = hn.detectArea, vn = hn.oriBlob, ir = Nn = void 0, ir = ei(Nn = b ? vn : Tt || Dn), dt = Xn, ve.DataControl.appendSync(f, [{ oriData: Nn.imageData, metadata: ir, customData: { oriBlob: vn, angle: et, detectArea: Xn, filterValue: ke, resBlob: Tt || Dn } }]);
              case 43:
                $e++, En.next = 30;
                break;
              case 46:
                return kn = { oriBlob: g[Q - 1], detectArea: dt }, En.next = 49, dn(W, kn, B + Q);
              case 49:
                if (oi(kn), kn = null, I.enableContinuousScan) {
                  En.next = 56;
                  break;
                }
                if (m instanceof qe)
                  return m.enableMultiImages(), En.next = 56, ma(null, { dcs: W });
                En.next = 56;
                break;
              case 56:
              case "end":
                return En.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Yt() {
      return $t.apply(this, arguments);
    }
    function $t() {
      return ($t = C(p().mark(function te(W, g, f, b, m, I) {
        var x, D, B, X, Q, ve, ke, dt, et, $e, gt, hn, Tt, Dn, Xn, vn, Nn, ir;
        return p().wrap(function(kn) {
          for (; ; )
            switch (kn.prev = kn.next) {
              case 0:
                if (D = W.getCurrentPage(), B = D.options, X = W.config.scannerViewer, X = (X === void 0 ? {} : X).continuousScan, X = X === void 0 ? {} : X, Q = se(W, "config.documentEditorSettings.cropViewer"), Q = Q.visibility, Q = Q === void 0 || Q, ve = g, ke = W.config, ke = (ke === void 0 ? {} : ke).documentEditorSettings, ke = ke === void 0 ? {} : ke, et = W.config.scannerViewer || {}, et = et.maxDocuments, $e = et = et === void 0 ? 20 : et, dt = D.getImageCount() + 1, $n.log("continuous mode."), $e < dt || et < dt)
                  return $n.log("maxImagesInBuffer."), W.emit("video-error", Dt.MAX_IMAGES_IN_BUFFER_LIMIT), (W.config.scannerViewer.autoScan.enableAutoScan || W.config.scannerViewer.autoDetect.enableAutoDetect) && ($e = W.captureLoop.getLoopType(), W.captureLoop.stopCaptureLoop(), W.captureLoop.changeStyle(), W.captureLoop._setLoopType($e), W.captureLoop.setDisable()), kn.abrupt("return");
                kn.next = 17;
                break;
              case 17:
                if (X.enableContinuousScan) {
                  kn.next = 61;
                  break;
                }
                if (W.showLoading("handle sigle image"), $n.log("not continuous mode."), W.stop(), Q)
                  return $n.log("get BlobItem no filter+noPerspective+no preview"), kn.next = 25, Ut(ve, W, !1, !1, !1, I);
                kn.next = 30;
                break;
              case 25:
                x = kn.sent, f && W.setImageDataBack(ve.imageData), x.filterValue = Ne(W, null), kn.next = 48;
                break;
              case 30:
                return $n.log("get BlobItem filter+Perspective+no preview"), kn.next = 33, Ut(ve, W, !0, !0, !1, I);
              case 33:
                if (x = kn.sent, f && (W.setImageDataBack(ve.imageData), delete ve.imageData), $e = (et = x).filterBlob, hn = et.resBlob, Tt = x.resImage, (En = x) && (Vo(En), Co(En), oi(En)), Tt && delete x.resImage, $e && delete x.filterBlob, ke.visibility.toString().toLowerCase() == "hidden")
                  return Tt = { blobList: [] }, kn.next = 44, function() {
                    return It.apply(this, arguments);
                  }(W, $e || hn, B.onSaveCapture, Tt);
                kn.next = 48;
                break;
              case 44:
                return W.captureLoop && W.captureLoop.setIsLooping(!1), W.emit("focusPage"), W.hideLoading("handle sigle image"), kn.abrupt("return");
              case 48:
                if (W.emit("blurPage"), gt = W.getCurrentPage())
                  return gt.hide(), hn = gt.getDvs(), Tt = x.resBlob || x.oriBlob, hn.DataControl.appendSync(m, [{ oriData: Tt.imageData, metadata: ei(Tt), customData: { oriBlob: x.oriBlob, detectArea: x.detectArea, filterValue: x.filterValue } }]), kn.next = 57, gt.clickMultipleImage();
                kn.next = 57;
                break;
              case 57:
                gt instanceof qe && (gt.enableMultiImages(), gt.setPreviewImageFlag()), W.hideLoading("handle sigle image"), kn.next = 74;
                break;
              case 61:
                return kn.next = 63, Pn(W, b, ve, f, !0);
              case 63:
                return Dn = kn.sent, Xn = (vn = Dn).oriBlob, vn = vn.detectArea, Nn = Ne(W, null), ir = ei(Xn), D.getDvs().DataControl.appendSync(m, [{ oriData: Xn.imageData, metadata: ir, customData: { oriBlob: Xn, detectArea: vn, angle: 0, filterValue: Nn } }]), kn.next = 72, dn(W, Dn, dt);
              case 72:
                oi(Dn), Dn = null;
              case 74:
              case "end":
                return kn.stop();
            }
          var En;
        }, te);
      }))).apply(this, arguments);
    }
    function Pn() {
      return nr.apply(this, arguments);
    }
    function nr() {
      return (nr = C(p().mark(function te(W, g, f, b, m) {
        var I, x, D;
        return p().wrap(function(B) {
          for (; ; )
            switch (B.prev = B.next) {
              case 0:
                if ($n.log("package to BlobItem"), W.config.scannerViewer.enableBorderDetection) {
                  B.next = 5;
                  break;
                }
                I = {}, B.next = 12;
                break;
              case 5:
                if (!g) {
                  B.next = 9;
                  break;
                }
                I = g, B.next = 12;
                break;
              case 9:
                return B.next = 11, Rn(f, W);
              case 11:
                I = B.sent;
              case 12:
                x = I.cornerPoints, D = se(W, "config.scannerViewer"), D = D.polygonStyle, D = D === void 0 ? { stroke: "#fe8e14", strokeWidth: "2px", dashed: "solid" } : D, $n.log("get detected preview"), B.next = 18;
                var X, Q = f, ve = x, ke = D, dt = m, et = "fe8e14";
                return ke && mn(ke.stroke) && ke.stroke.indexOf("#") == 0 && (et = ke.stroke.substr(1)), ve && (ke = vr(ve), X = { points: ke, lineWidth: 5, strokeColor: et }), Or(Q, void 0, X, !1, dt, !0).then(function($e) {
                  return Q.imageData = $e.src, $e && (ar($e.result), ar($e.preview)), $e;
                });
              case 18:
                return D = B.sent, $n.log("get detected preview ok"), b && (W.setImageDataBack(f.imageData), delete f.imageData), B.abrupt("return", new Ht({ oriBlob: D.result, preview: D.preview, detectArea: x }));
              case 22:
              case "end":
                return B.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function _r(te) {
      if (!te)
        return [];
      for (var W = 0; W < te.length; W++)
        te[W] = Math.fround(te[W]);
      return te;
    }
    function vr(g) {
      var W, g = function(f) {
        var b = f.slice().sort(function(D, B) {
          return D.y - B.y;
        })[0], m = f.indexOf(b), I = f[m - 1], x = f[m + 1];
        return m === 0 && (I = f[3]), I = { x: b.x - I.x, y: b.y - I.y }, x = { x: x.x - b.x, y: x.y - b.y }, b = { x: 10, y: 0 }, I = Fr(b, I), b = Fr(b, x), x = m, I < b && (x = m === 0 ? 3 : m - 1), f.slice(x).concat(f.slice(0, x));
      }(function(f) {
        var b;
        if (f && f.length === 8)
          return f = function(m) {
            for (var I = [], x = 0; x < m.length; x += 2) {
              var D = { x: m[x], y: m[x + 1] };
              I.push(D);
            }
            return I;
          }(f), b = function(m) {
            var I = { x: 0, y: 0 };
            return m.forEach(function(x) {
              I.x += x.x, I.y += x.y;
            }), I.x /= m.length, I.y /= m.length, I;
          }(f), f.sort(function(m, I) {
            return Math.atan2(m.y - b.y, m.x - b.x) - Math.atan2(I.y - b.y, I.x - b.x);
          }), f;
      }(g));
      return W = [], g.forEach(function(f) {
        W.push(f.x, f.y);
      }), W;
    }
    function Fr(b, W) {
      var g = Math.pow(Math.pow(b.x, 2) + Math.pow(b.y, 2), 0.5), f = Math.pow(Math.pow(W.x, 2) + Math.pow(W.y, 2), 0.5), b = b.x * W.x + b.y * W.y;
      return Math.acos(b / (g * f));
    }
    function Or(te, W, g, f, b, m) {
      var I = void 0, I = { polygon: I, doPerspective: I, source: { angle: I }, output: { orgImage: I, previewImage: I } };
      return Rr(te, I.source), I.source.angle = W, g && _o(g.points) && g.points.length == 8 && (I.polygon = g, f && (I.doPerspective = !0)), b !== !1 && (b instanceof Object ? I.output.orgImage = b : I.output.orgImage = { quality: 85, returnType: N.Enum_ImageType.IT_JPG, returnBlob: !0 }), m !== !1 && (m instanceof Object ? I.output.previewImage = m : I.output.previewImage = { quality: 85, width: 200, height: 200, returnType: N.Enum_ImageType.IT_JPG, returnBlob: !0, nInterplationMethod: 5 }), N.ImageProcWrapper.createImage(I);
    }
    function Jr(te) {
      return te %= 360, te < 0 && (te += 360), te;
    }
    var $n = { log: function(te, W, g, f) {
      window.Dynamsoft && window.Dynamsoft.Lib.debug && window.Dynamsoft.Lib.log(te, W, g, f);
    }, error: function(te) {
      window.Dynamsoft && window.Dynamsoft.Lib.error(te);
    } };
    function no() {
      return Li.apply(this, arguments);
    }
    function Li() {
      return (Li = C(p().mark(function te(W, g, f, b, m) {
        var I, x, D;
        return p().wrap(function(B) {
          for (; ; )
            switch (B.prev = B.next) {
              case 0:
                return m === void 0 && (m = {}), B.next = 3, g.DataControl.getData(f);
              case 3:
                return x = B.sent, I = x.customData, x = ei(W), I ? b && (Co(I), oi(I)) : I = {}, m && (D = b ? ["angle", "detectArea", "filterValue", "bitDepth"] : ["angle", "detectArea", "filterValue", "bitDepth", "resBlob", "preview"], N.Lib.each(D, function(X) {
                  m[X] !== void 0 && (I[X] = m[X]);
                }), !I.oriBlob && m.oriBlob && (I.oriBlob = vi(m.oriBlob))), g.DataControl.updateSync(f, { oriData: W.imageData, metadata: x, customData: I }, !0), B.abrupt("return", !0);
              case 10:
              case "end":
                return B.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function ei(te) {
      return { width: te.imageWidth, height: te.imageHeight, bitDepth: te.imageBitDepth, resolutionX: te.imageXResolution, resolutionY: te.imageYResolution, rgba: te.rgba, bgra: te.bgra };
    }
    function Qi(te) {
      return { imageWidth: te.width, imageHeight: te.height, imageBitDepth: te.bitDepth, imageXResolution: te.resolutionX, imageYResolution: te.resolutionY };
    }
    function Zi(te) {
      var W = te == null ? void 0 : te.querySelectorAll(".dynamsoft-camera-preFilter");
      if (W)
        for (var g = 0; g < W.length; g++) {
          var f = W[g];
          f && f.tagName == "IMG" && f.src && (tt.revokeObjectURL(f.src), f.onload = null, f.parentNode.remove());
        }
    }
    function _i(te) {
      var W, g = te.getCurrentPage();
      !g || (g = g.getHtmlElement()) && ((W = g == null ? void 0 : g.querySelector("." + ce.filterDropDown)) && (Zi(W), te && te.removeGlobalClickEvent(W), W.remove()), g != null && (te = g.querySelector("." + ce.filterDropDown)) != null && te.remove());
    }
    function Gi() {
      return (Gi = C(p().mark(function te(W) {
        return p().wrap(function(g) {
          for (; ; )
            switch (g.prev = g.next) {
              case 0:
                return g.prev = 0, g.next = 3, W.turnOnTorch();
              case 3:
                g.next = 7;
                break;
              case 5:
                g.prev = 5, g.t0 = g.catch(0);
              case 7:
              case "end":
                return g.stop();
            }
        }, te, null, [[0, 5]]);
      }))).apply(this, arguments);
    }
    function Gn() {
      return (Gn = C(p().mark(function te(W) {
        return p().wrap(function(g) {
          for (; ; )
            switch (g.prev = g.next) {
              case 0:
                return g.prev = 0, g.next = 3, W.turnOffTorch();
              case 3:
                g.next = 7;
                break;
              case 5:
                g.prev = 5, g.t0 = g.catch(0);
              case 7:
              case "end":
                return g.stop();
            }
        }, te, null, [[0, 5]]);
      }))).apply(this, arguments);
    }
    function gi() {
      return ra.apply(this, arguments);
    }
    function ra() {
      return (ra = C(p().mark(function te(W) {
        var g, f, b, m, I;
        return p().wrap(function(x) {
          for (; ; )
            switch (x.prev = x.next) {
              case 0:
                if (g = W) {
                  x.next = 3;
                  break;
                }
                return x.abrupt("return");
              case 3:
                if (Fn()) {
                  x.next = 5;
                  break;
                }
                return x.abrupt("return");
              case 5:
                if (f = g.config.scannerViewer, f = (f === void 0 ? {} : f).torch, f = f === void 0 ? {} : f, b = (b = g.getCurrentPage()) == null || (b = b.element) == null ? void 0 : b.querySelector("." + ce.BUTTON_PREFIX + "flashBtn"), m = !1, ((I = f.visibility) == null ? void 0 : I.toString().toLowerCase()) == "hidden" ? b != null && b.classList.add(ce.hidden) : b != null && b.classList.remove(ce.hidden), (m = g.isRunPlaying()) ? g.getCapabilities().torch ? b != null && b.classList.remove(ce.disable) : (f.on = !1, b != null && b.classList.add(ce.disable)) : f.on = !1, I = b == null ? void 0 : b.querySelector("." + ce.iconFlash), !f.on) {
                  x.next = 22;
                  break;
                }
                if (m)
                  return x.next = 17, function() {
                    return Gi.apply(this, arguments);
                  }(g);
                x.next = 17;
                break;
              case 17:
                b != null && b.classList.add(ce.headerSelected), I != null && I.classList.remove(ce.iconFlashOff), I != null && I.classList.add(ce.iconFlashOn), x.next = 28;
                break;
              case 22:
                if (m)
                  return x.next = 25, function() {
                    return Gn.apply(this, arguments);
                  }(g);
                x.next = 25;
                break;
              case 25:
                b != null && b.classList.remove(ce.headerSelected), I != null && I.classList.remove(ce.iconFlashOn), I != null && I.classList.add(ce.iconFlashOff);
              case 28:
              case "end":
                return x.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Ro(te) {
      var W, g, f;
      return (N.navInfo.biPhone || N.navInfo.biPad) && (W = 5, g = 85, f = 3840), N.ImageProcWrapper.getMax4kImage(te, W, g, f);
    }
    function zn(b) {
      var W = b.defaultViewerName, W = W === void 0 ? mt : W, f = b.cropViewer, g = !0, f = (f === void 0 ? {} : f).visibility, b = b.visibility;
      return (mn(f) && f.toLowerCase() == "hidden" || mn(b) && b.toLowerCase() == "hidden") && (g = !1), W = W.toLowerCase(), !(!g || W != mt.toLowerCase());
    }
    function Ur() {
      return (Ur = C(p().mark(function te(W, g, f, b, m) {
        var I;
        return p().wrap(function(x) {
          for (; ; )
            switch (x.prev = x.next) {
              case 0:
                if (zn(f))
                  return I = { fileName: b, initFileName: b, curIndex: -1, saveData: !1, fromInternal: m }, x.next = 5, W.showCropPage(I, g);
                x.next = 7;
                break;
              case 5:
                x.next = 10;
                break;
              case 7:
                return I = { fileName: b, initFileName: b, curIndex: -1, saveData: !1, fromInternal: m, visibility: f.visibility }, x.next = 10, W.showDocumentEditPage(I, g);
              case 10:
              case "end":
                return x.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function pt(te) {
      return !(te != null && (mn(te) && te.toLowerCase(), te === "hidden" || te === !1));
    }
    function ia(te, W) {
      return !mn(te) && W == Z.ORIGINAL || te == W;
    }
    function ma(te, W) {
      return pa.apply(this, arguments);
    }
    function pa() {
      return (pa = C(p().mark(function te(W, g) {
        var f, b;
        return p().wrap(function(m) {
          for (; ; )
            switch (m.prev = m.next) {
              case 0:
                if (f = g.dcs, b = f.getCurrentPage()) {
                  m.next = 4;
                  break;
                }
                return m.abrupt("return");
              case 4:
                return f.hideLoading("handle multiple image"), f.emit("blurPage"), f.stop(), m.next = 9, b.clickMultipleImage();
              case 9:
                b.setPreviewImageFlag();
              case 10:
              case "end":
                return m.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Vo(te) {
      te && te.oriBlob && (delete te.oriBlob.imageData, delete te.oriBlob);
    }
    function Co(te) {
      te && te.resBlob && (delete te.resBlob.imageData, delete te.resBlob);
    }
    function oi(te) {
      te && te.preview && (Ln(te.preview) && delete te.preview.imageData, delete te.preview);
    }
    function vi(te) {
      var W;
      return te && (Ln(te) && te.imageData ? (W = {}, N.Lib.each(["imageHeight", "imageWidth", "imageBitDepth", "imageXResolution", "imageYResolution", "rgba", "bgra", "imageData"], function(g) {
        te[g] !== void 0 && (W[g] = te[g]);
      })) : W = te), W;
    }
    function ar(te) {
      te && (delete te.code, delete te.message);
    }
    function _o(te) {
      return Array.isArray ? Array.isArray(te) : Object.prototype.toString.call(te) === "[object Array]";
    }
    function Ln(te) {
      return Object.prototype.toString.call(te) === "[object Object]";
    }
    function ln(te) {
      return typeof te == "function";
    }
    function mn(te) {
      return typeof te == "string";
    }
    function Hr(te) {
      return typeof te == "number" && !Number.isNaN(te);
    }
    function Rr(te, W) {
      for (var g in te)
        W[g] === void 0 ? W[g] = te[g] : Ln(te[g]) && Ln(W[g]) ? Rr(te[g], W[g]) : te[g] !== void 0 && (W[g] = te[g]);
      return W;
    }
    function $(te) {
      if (te == null || typeof te != "object")
        return te;
      var W, g, f;
      if (te instanceof Date)
        return (W = /* @__PURE__ */ new Date()).setTime(te.getTime()), W;
      if (te instanceof Array) {
        for (W = [], f = te.length, g = 0; g < f; g++)
          W[g] = $(te[g]);
        return W;
      }
      if (te instanceof Object) {
        for (g in W = {}, te)
          te.hasOwnProperty(g) && (W[g] = $(te[g]));
        return W;
      }
      return Hr(te) || Object.prototype.toString.call(te) === "[object Boolean]" ? te : mn(te) ? new String(te) : {};
    }
    function pe(te, W) {
      te && te.emit(ct, W);
    }
    function se(te, W) {
      return W.split(".").reduce(function(g, f) {
        return g[f] || {};
      }, te);
    }
    function Ie(te) {
      var W, g, f;
      return (N.navInfo.biPhone || N.navInfo.biPad) && (W = 5, g = 85, f = 3840), N.ImageProcWrapper.getMax4kImage(te, W, g, f);
    }
    var he = "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=", tt = { windowURL: window.URL || window.webkitURL, createURL: function(te) {
      return mn(te) ? te : function(W) {
        if (mn(W) || W === void 0)
          return { type: "string", data: W };
        {
          if (W instanceof Blob)
            return { type: "object", data: tt.createObjectURL(W) };
          if (W.imageData && W.imageData instanceof Blob)
            return { type: "object", data: tt.createObjectURL(W.imageData) };
        }
        if (W.imageData) {
          var g = Object.prototype.toString.call(W.imageData);
          if (/\[object \w*Array\w*\]/.test(g))
            return { type: "object", data: tt.createObjectURL(new Blob([W.imageData])) };
        } else if (g = Object.prototype.toString.call(W), /\[object \w*Array\w*\]/.test(g))
          return { type: "object", data: tt.createObjectURL(new Blob([W])) };
        return /data:image\/\w+;base64/.test(W) ? { type: "string", data: W } : { type: "object", data: W };
      }(te).data;
    }, createObjectURL: function(te) {
      return te ? (te = tt.windowURL.createObjectURL(te), $n.log("createObjectURL:" + te), te) : "";
    }, revokeObjectURL: function(te) {
      $n.log("revokeObjectURL:" + te), mn(te) && te.indexOf("blob:http") == 0 && tt.windowURL.revokeObjectURL(te);
    } };
    function ht(te) {
      var W = Math.random().toString(35).substring(2);
      return W.length < 11 && (W += Math.random().toString(35).substring(2)), te = Math.max(Math.min(Math.round(te), 11), 8), W = W.substring(0, te);
    }
    function wt(te, W) {
      if (te == W)
        return 1;
      var g = !1;
      if (_o(te) && _o(W)) {
        var f = te.length;
        if (f == W.length) {
          for (var g = !0, b = 0; b < f; b++)
            if (!kt(te[b], W[b])) {
              g = !1;
              break;
            }
        }
      }
      return g;
    }
    function kt(te, W, g) {
      return g === void 0 && (g = 1), Math.abs(te - W) < g;
    }
    function Vt(te, W, g) {
      var f, b, m, I, x, D, B;
      return !(!_o(te) || te.length != 8) && (f = te[0], b = te[1], m = te[2], I = te[3], x = te[4], D = te[5], B = te[6], te = te[7], kt(f, 0) && kt(b, 0) && kt(m, W) && kt(I, 0) && kt(x, W) && kt(D, g) && kt(B, 0) && kt(te, g));
    }
    var Bn = function() {
      function te(g) {
        this._evtIds = [], this._oPub = null, this._bDisposePub = !1, g ? this._oPub = g : (this._oPub = new Nt(), this._bDisposePub = !0);
      }
      var W = te.prototype;
      return W.getPublishSubscribe = function() {
        return this._oPub;
      }, W._on = function(g, f) {
        f = this._oPub.on(g, f), this.push(g, f);
      }, W._emit = function(g) {
        for (var f, b = arguments.length, m = new Array(1 < b ? b - 1 : 0), I = 1; I < b; I++)
          m[I - 1] = arguments[I];
        (f = this._oPub) != null && f.emit.apply(f, [g].concat(m));
      }, W._off = function(g, f) {
        var b;
        (b = this._oPub) != null && b.off(g, f);
      }, W.push = function(g, f) {
        this._evtIds.push({ name: g, id: f });
      }, W.dispose = function() {
        if (this._oPub) {
          for (var g = this._evtIds.length, f = 0; f < g; f++) {
            var b = this._evtIds[f];
            this._oPub.offById(b.name, b.id);
          }
          this._bDisposePub && this._oPub && this._oPub.dispose();
        }
        this._oPub = null;
      }, te;
    }(), Nt = function() {
      function te() {
        this._events = {};
      }
      var W = te.prototype;
      return W.on = function(g, f, b) {
        this._events[g] || (this._events[g] = []);
        var m = ht(10);
        return this._events[g].push({ fn: f, once: b, evtId: m }), m;
      }, W.once = function(g, f) {
        this.on(g, f, !0);
      }, W.emit = function(g) {
        var f = this._events[g];
        if (!f || f.length === 0)
          return !1;
        for (var b = f.length, m = arguments.length, I = new Array(1 < m ? m - 1 : 0), x = 1; x < m; x++)
          I[x - 1] = arguments[x];
        for (var D = 0; D < b; D++) {
          var B, X = f[D];
          X && ((B = X.fn).call.apply(B, [null].concat(I)), X.once && (f.splice(D, 1), D--));
        }
      }, W.emitEx = function(g) {
        var f = this._events[g];
        if (!f || f.length === 0)
          return Promise.resolve(!0);
        for (var b = f.length, m = Promise.resolve(!0), I = arguments.length, x = new Array(1 < I ? I - 1 : 0), D = 1; D < I; D++)
          x[D - 1] = arguments[D];
        if (f.length === 1)
          return (g = (g = f[0]) == null ? void 0 : (g = g.fn).call.apply(g, [null].concat(x))) instanceof Promise ? g : m;
        for (var B = 0; B < b; B++) {
          var X = f[B];
          X && function() {
            var Q, ve = (Q = X.fn).call.apply(Q, [null].concat(x));
            ve instanceof Promise && (m = m.then(function() {
              return ve;
            })), X.once && (f.splice(B, 1), B--);
          }();
        }
        return m;
      }, W.off = function(g, f) {
        var b = this._events[g];
        if (!b)
          return !1;
        if (f)
          for (var m = b.length - 1; 0 <= m; m--) {
            var I = b[m];
            I && I.fn === f && b.splice(m, 1), I = null;
          }
        else
          b && (b.length = 0);
      }, W.offById = function(g, f) {
        var b = this._events[g];
        if (!b)
          return !1;
        if (f)
          for (var m = b.length - 1; 0 <= m; m--) {
            var I = b[m];
            if (I && I.evtId === f) {
              b.splice(m, 1);
              break;
            }
            I = null;
          }
        else
          b && (b.length = 0);
      }, W.dispose = function() {
        for (var g = Object.keys(this._events), f = 0, b = g.length; f < b; f++) {
          var m = g[f], m = this._events[m];
          m && m.splice(0), m = null;
        }
        this._events = {};
      }, te;
    }(), fn = function() {
      function te(g, f) {
        this.name = "", this.icon = "", this.text = "", this.color = "", this.className = "", this.onclick = null, this.element = null, this.options = g, this.context = f, this.element = this._initEl();
      }
      var W = te.prototype;
      return W._initEl = function() {
        var g, f, b, m, I, x, D, B, X, Q, Un = this.options, En = Un.icon, ve = Un.text, ke = Un.colorStyle, kn = Un.className, dt = Un.bHeader, et = Un.onclick, ir = Un.name, $e = Un.onmount, gt = Un.onunmount, hn = Un.dropdown, Tt = Un.order, Tt = Tt === void 0 ? 0 : Tt, Dn = Un.onSelected, Xn = Un.isSelected, Xn = Xn !== void 0 && Xn, Un = Un.visibility, Un = Un === void 0 ? "visible" : Un, vn = this.context, Nn = document.createElement("div");
        if (this.name = ir, this.name == "capture" && (Nn.style.background = ke.background), kn) {
          if (Un === "hidden")
            return Nn.className = kn + " " + ce.block, Nn;
          Nn.className = kn;
        }
        Nn.style.order = String(Tt);
        var ir = Nn, Un = En, kn = ke.color, En = (Un && ((Tt = document.createElement("i")).className = Un, Tt.style.color = kn, ir.appendChild(Tt)), Nn), Un = ve;
        return Un && ((kn = document.createElement("p")).innerText = Un, En.appendChild(kn)), g = Nn, b = vn, m = Xn, (f = $e) && setTimeout(function() {
          f(g, b, m);
        }, 0), gt && (this._unmount = gt.bind(null, Nn, vn)), I = et, x = vn, Nn.addEventListener("click", function(Ai) {
          mn(I) ? x.dcs.emit(I, Ai, x) : ln(I) && I(Ai, x), Ai.preventDefault();
        }), B = Dn, X = vn, ir = Xn, Tt = dt, (Q = D = Nn).bSelected = ir, Q.bHeader = Tt, B && (ir && (Tt ? D.classList.add(ce.headerSelected) : D.classList.add(ce.footerSelected)), D.addEventListener("click", function(Ai) {
          Q.bSelected = !Q.bSelected, Q.bHeader ? D.classList[Q.bSelected ? "add" : "remove"](ce.headerSelected) : D.classList[Q.bSelected ? "add" : "remove"](ce.footerSelected), B != null && B(Q.bSelected, X), Ai.preventDefault();
        })), function() {
          Hn.apply(this, arguments);
        }(Nn, vn, hn, ke), Nn;
      }, W.destroy = function() {
        var g;
        (g = this._unmount) != null && g.call(this), this.element = null;
      }, W.update = function() {
        var g, f;
        this.element && (f = this._initEl(), (g = this.element.parentElement) != null && g.insertBefore(f, this.element), this.element.remove(), this.element = f);
      }, W.setSelected = function(g) {
        var f = this.options.onSelected;
        f && f(g, this.context);
      }, te;
    }();
    function Hn() {
      return (Hn = C(p().mark(function te(W, g, f, b) {
        var m, I, x, D, B, X, Q, ve;
        return p().wrap(function(ke) {
          for (; ; )
            switch (ke.prev = ke.next) {
              case 0:
                if (ke.prev = 0, ve = function(dt, et, $e) {
                  et.dataset.showDropdown = "false", dt.onclick = function(gt) {
                    et.dataset.showDropdown != "true" && (et.classList.remove(ce.displayNone), dt.classList.add(ce.headerSelected), et.dataset.showDropdown = "true", gt.stopPropagation(), $e.dcs.addGlobalClickEvent(et, function() {
                      return !(!et || et.dataset.showDropdown != "true") && (et.classList.add(ce.displayNone), et.parentElement.classList.remove(ce.headerSelected), et.dataset.showDropdown = "false", $e.dcs.emit("hideResolutionList"), !0);
                    }));
                  };
                }, Q = function(dt, et, $e, gt) {
                  et === void 0 && (et = !1);
                  for (var hn = [], Tt = dt.children, Dn = 0; Dn < Tt.length; Dn++)
                    Tt[Dn].classList.contains(ce.ddlSelectedItem) && hn.push(Tt[Dn]);
                  var Xn = !0;
                  function vn(Nn, ir) {
                    Nn.classList[ir ? "add" : "remove"](ce.ddlSelectedItem);
                  }
                  dt.onclick = function(Nn) {
                    var ir, kn = !1;
                    if (Nn instanceof MouseEvent) {
                      if (Nn.stopPropagation(), !Xn)
                        return;
                      ir = Nn.target, kn = !0;
                    } else
                      ir = Nn;
                    if (((Nn = ir) == null ? void 0 : Nn.tagName) === "LI") {
                      Xn = !1;
                      var Nn = hn.indexOf(ir);
                      if (-1 < Nn) {
                        if (!et)
                          return void (Xn = !0);
                        hn.splice(Nn, 1), vn(ir, !0);
                      } else if (et)
                        hn.push(ir), vn(ir, !0);
                      else {
                        for (; hn.length; )
                          vn(hn.pop(), !1);
                        vn(ir, !0), hn.push(ir), dt && (dt.parentElement.classList.remove(ce.headerSelected), dt.classList.add(ce.displayNone), dt.dataset.showDropdown = "false", gt.dcs.emit("hideResolutionList", dt, gt));
                      }
                      kn && (Nn = $e == null ? void 0 : $e(ir, ir.customData, gt), Promise.resolve(Nn).then(function() {
                        Xn = !0;
                      }));
                    }
                  };
                }, X = function(dt) {
                  var et = document.createDocumentFragment();
                  return dt.forEach(function($e, gt) {
                    var hn = document.createElement("li"), Tt = $e.value, Dn = $e.innerHtml;
                    hn.customData = Tt, $e.isSelected && hn.classList.add(ce.ddlSelectedItem), Dn ? hn.innerHTML = Dn : ((Tt = document.createElement("i")).style.pointerEvents = "none", Tt.className = $e.icon || "", (Dn = document.createElement("p")).style.pointerEvents = "none", Dn.innerText = $e.text || "", hn.appendChild(Tt), hn.appendChild(Dn)), et.appendChild(hn);
                  }), et;
                }, f) {
                  ke.next = 6;
                  break;
                }
                return ke.abrupt("return");
              case 6:
                return x = f.list, m = f.multiple, I = f.onclick, ke.next = 9, x(W, g);
              case 9:
                if (ke.t0 = ke.sent, ke.t0) {
                  ke.next = 12;
                  break;
                }
                ke.t0 = [];
              case 12:
                x = ke.t0, D = X(x), (B = W == null ? void 0 : W.querySelector("dropdown")) ? (B.removeEventListener("click", null), B.childNodes && B.childNodes.forEach(function(dt) {
                  dt.remove();
                }), B.appendChild(D)) : ((B = document.createElement("ul")).className = "resolutionList dropdown " + ce.displayNone, B.style.background = b.background, B.style.color = b.color, B.appendChild(D), W.appendChild(B)), ve(W, B, g), Q(B, m, I, g), ke.next = 29;
                break;
              case 20:
                return ke.prev = 20, ke.t1 = ke.catch(0), $n.log("Error Begin---"), $n.log(ke.t1), $n.log(W), $n.log(g), $n.log(f), $n.log("Error End---"), ke.abrupt("return", null);
              case 29:
              case "end":
                return ke.stop();
            }
        }, te, null, [[0, 20]]);
      }))).apply(this, arguments);
    }
    var er = "dvsDb", sr = "dvsDoc", li = function() {
      function te(g, f) {
        this._db = g.DataControl._db, f ? this.syncDb = {} : ((g = this._db.DBMng._d)[er] || (g[er] = {}), g[er][sr] || (g[er][sr] = {}), this.syncDb = g[er][sr]);
      }
      var W = te.prototype;
      return W.setCustomDataSync = function(g, f) {
        if (this.syncDb)
          return this.syncDb[g].customData = f, !0;
      }, W.getCustomDataSync = function(g) {
        return this.syncDb && this.syncDb[g] && this.syncDb[g].customData ? this.syncDb[g].customData : null;
      }, W.getOriDataSync = function(g) {
        return this.syncDb && this.syncDb[g] ? this.syncDb[g].oriData : null;
      }, W.getDataRootSync = function(g) {
        return this.syncDb && this.syncDb[g] ? this.syncDb[g] : null;
      }, W.getMetaDataSync = function(g) {
        if (this._db)
          return this._db.getMetadata(g);
      }, W.removeMidSync = function(g) {
        var f, b = this._db.middle._d;
        b && (b = b[g]) && ((f = b.customData) && (Vo(f), Co(f), oi(f), delete b.customData), mn(b.oriData) && tt.revokeObjectURL(b.oriData), mn(b.minData) && tt.revokeObjectURL(b.minData), delete b.oriData, delete b.minData, (f = b.img) && (f.src = he, f.onload = null, f.onerror = null, b.img = null)), this._db.removeMid(g), this._db.removeMetadata(g);
      }, W.removeSync = function(g) {
        var f;
        this.syncDb && this.syncDb[g] && ((f = this.syncDb[g]) && (delete f.oriData, Vo(f.customData), Co(f.customData), oi(f.customData), f.metadata && delete f.metadata, f.tags && (f.tags.slice(0), delete f.tags)), delete this.syncDb[g]), this.removeMidSync(g);
      }, W.dispose = function() {
        this._db = null, this.syncDb = null;
      }, te;
    }(), Lr = function() {
      function te(g) {
        this._fileTree = g._tree;
      }
      var W = te.prototype;
      return W.createFile = function(g) {
        if (this._fileTree)
          return this._fileTree.createFile(g);
      }, W.openFile = function(g) {
        return this._fileTree ? (g = this._fileTree.findChild(this._fileTree.dfNode, g), g && g.type === "file" ? g.chs.slice() : []) : [];
      }, W.findFile = function(g) {
        return this._fileTree ? this._fileTree.dfNode && (g = this._fileTree.findChild(this._fileTree.dfNode, g), g && g.type === "file") ? g : null : [];
      }, W.replaceFileContent = function(g, f) {
        g = this.findFile(g), g && (g.chs.splice(0), g.chs = f);
      }, W.getFileCount = function(g) {
        return g = this.findFile(g), g ? g.chs.length : 0;
      }, W.getIndexByUidInFile = function(g, f) {
        var b = this.findFile(g);
        if (b) {
          for (var m = b.chs.length, I = 0; I < m; I++)
            if (b.chs[I] == f)
              return I;
        }
        return -1;
      }, W.removeByIndexInFile = function(g, f) {
        if (g = this.findFile(g), g) {
          var b = g.chs.length;
          if (0 <= f && f < b)
            return g.chs.splice(f, 1);
        }
        return null;
      }, W.removeFile = function(g, f) {
        if (g && f)
          for (var b, m = this.openFile(f), I = 0; I < m.length; I++)
            b = m[I], g.removeSync(b);
      }, W.dispose = function() {
        this._fileTree = null;
      }, te;
    }(), fo = function() {
      function te(g, f, b) {
        this.element = null, this.headerButtons = [], this.footerButtons = [], this.className = "", this.pageName = "", this.container = null, this.isDestroyed = !1, this._fileWrapper = null, this._dvsWrapper = null, this.template = "", this._dcs = null, this._dvs = null, this._pagepubsub = new Nt(), this._dvsWrapper = new li(f), this._fileWrapper = new Lr(f.File), this.initPageOption(g, b), this._dcs = b, this._dvs = f;
      }
      var W = te.prototype;
      return W.initPageOption = function(g, f) {
        this.options = g;
      }, W.getDcs = function() {
        return this._dcs;
      }, W.getDvs = function() {
        return this._dvs;
      }, W.getHeaderButtons = function() {
        return [];
      }, W.getFooterButtons = function() {
        return [];
      }, W.getOptionsEl = function() {
        return null;
      }, W.createEl = function() {
        this.headerButtons = this.getHeaderButtons(), this.footerButtons = this.getFooterButtons(), this.container = this.getOptionsEl(), this.element || (g = this.template, (f = document.createElement("div")).innerHTML = g, f.className = this.className, this.element = f);
        var g, f = (g = this.element) == null ? void 0 : g.querySelector("header"), f = (this.insertButtons(f, this.headerButtons), (g = this.element) == null ? void 0 : g.querySelector("footer"));
        this.insertButtons(f, this.footerButtons);
      }, W.insertButtons = function(g, f) {
        var b;
        g.appendChild((g = f, b = document.createDocumentFragment(), g.forEach(function(m) {
          b.appendChild(m.element);
        }), b));
      }, W.destroy = function() {
        this.isDestroyed = !0, this._dvsWrapper && this._dvsWrapper.dispose(), this._dvsWrapper = null, this._fileWrapper && this._fileWrapper.dispose(), this._fileWrapper = null, Ci(this.headerButtons), Ci(this.footerButtons), this.headerButtons = [], this.footerButtons = [], this.element && (this.element.parentElement && this.element.parentElement.childNodes && this.element.parentElement.childNodes.length == 1 ? this.element.parentElement.remove() : (this.element.remove(), this.element = null)), this.pageName == "documentScanPage" && (_i(this._dcs), this._dcs.emit("video-closed")), _i(this._dcs), this._dcs = null;
      }, W.hide = function() {
        var g;
        (g = this.element) != null && g.classList.add(ce.displayNone);
      }, W.show = function() {
        var g = C(p().mark(function f() {
          var b;
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  (b = this.element) != null && b.classList.remove(ce.displayNone);
                case 1:
                case "end":
                  return m.stop();
              }
          }, f, this);
        }));
        return function() {
          return g.apply(this, arguments);
        };
      }(), W.updateButton = function(g, f) {
        for (var b = [].concat(this.headerButtons, this.footerButtons), m = 0; m < b.length; m++) {
          var I = b[m];
          if (I.name === g)
            return Rr(f, I.options), void I.update();
        }
      }, W.on = function(g, f) {
        this._pagepubsub.on(g, f);
      }, W.once = function(g, f) {
        this._pagepubsub.once(g, f);
      }, W.off = function(g, f) {
        this._pagepubsub.off(g, f);
      }, W.emit = function(g) {
        for (var f, b = arguments.length, m = new Array(1 < b ? b - 1 : 0), I = 1; I < b; I++)
          m[I - 1] = arguments[I];
        (f = this._pagepubsub).emit.apply(f, [g].concat(m));
      }, W.emitEx = function(g) {
        for (var f, b = arguments.length, m = new Array(1 < b ? b - 1 : 0), I = 1; I < b; I++)
          m[I - 1] = arguments[I];
        return (f = this._pagepubsub).emitEx.apply(f, [g].concat(m));
      }, W.setDefaultBackgroundColors = function(g, f, b) {
        g.background || (g.background = "#000"), f.background || (f.background = "#323232"), b.background || (b.background = "#000");
      }, W.createIconItems = function(g, f, b, m) {
        var I, x = [], D = { dcs: this._dcs, page: this };
        for (I in g)
          g[I] && (g[I].colorStyle = I == "capture" && m ? m : f, g[I].bHeader = b, x.push(new fn(U({}, g[I], { name: I }), D)));
        return x;
      }, W.getHtmlElement = function() {
        return this.element;
      }, te;
    }();
    function Ci(te) {
      te.forEach(function(W, g) {
        W.destroy(), te[g] = null;
      });
    }
    function Er() {
      return { icon: ce.font + " " + ce.iconLoad, onclick: (te = C(p().mark(function W(g, f) {
        var b, m, I, x;
        return p().wrap(function(D) {
          for (; ; )
            switch (D.prev = D.next) {
              case 0:
                if (b = f.dcs, !(x = b.getLoadCallback())) {
                  D.next = 18;
                  break;
                }
                if (D.prev = 3, m = b.getCurrentPage())
                  return b.emit("blurPage"), I = m.options.documentEditorSettings, I = zn(I === void 0 ? {} : I), D.next = 11, x(f);
                D.next = 13;
                break;
              case 11:
                (x = D.sent) && !m.isDestroyed && yi(x, b, I);
              case 13:
                return D.prev = 13, b.emit("focusPage"), D.finish(13);
              case 16:
                D.next = 19;
                break;
              case 18:
                (function(B) {
                  var X = document.createElement("input");
                  X.style.display = "none", document.body.appendChild(X), X.addEventListener("click", function(Q) {
                    Q.stopPropagation();
                  }), X.type = "file", X.multiple = !0, X.accept = "image/png,image/jpeg,image/jpg", X.click(), X.onchange = function() {
                    var Q;
                    X.value != "" && ((Q = B.dcs).showLoading("load local image"), Q.emit("blurPage"), mr({ el: X, context: B, callback: yr })), document.body.removeChild(X);
                  };
                })((g.target, f));
              case 19:
              case "end":
                return D.stop();
            }
        }, W, null, [[3, , 13, 16]]);
      })), function(W, g) {
        return te.apply(this, arguments);
      }), className: ce.BUTTON_PREFIX + "loadBtn", text: "Load" };
      var te;
    }
    function mr(te) {
      te.context.dcs.captureLoop.getIsLooping() ? setTimeout(mr, 200, te) : te.callback.apply(null, [te.el, te.context]);
    }
    function yr(te, W) {
      return Gr.apply(this, arguments);
    }
    function Gr() {
      return (Gr = C(p().mark(function te(W, g) {
        var f, b, m, I, x, D, B;
        return p().wrap(function(X) {
          for (; ; )
            switch (X.prev = X.next) {
              case 0:
                f = g.dcs, b = W.files, X.prev = 2, m = f.getCurrentPage(), m = m.options.documentEditorSettings, m = zn(m === void 0 ? {} : m), x = !(I = []), D = 0;
              case 9:
                if (!(D < b.length)) {
                  X.next = 22;
                  break;
                }
                if ((B = b[D]).type == "application/pdf" || B.type == "image/tiff")
                  return x == 0 && f.emit("video-error", Dt.IMAGE_FORMAT_INVALID), x = !0, X.abrupt("continue", 19);
                X.next = 15;
                break;
              case 15:
                return X.next = 17, Ie(b[D]);
              case 17:
                B = X.sent, I.push(B);
              case 19:
                D++, X.next = 9;
                break;
              case 22:
                0 < I.length && !g.page.isDestroyed && yi(I, f, m);
              case 23:
                return X.prev = 23, f.hideLoading("load local image"), W.value = null, W.files = null, W.onchange = null, W = null, f.emit("focusPage"), X.finish(23);
              case 31:
              case "end":
                return X.stop();
            }
        }, te, null, [[2, , 23, 31]]);
      }))).apply(this, arguments);
    }
    function yi() {
      ui.apply(this, arguments);
    }
    function ui() {
      return (ui = C(p().mark(function te(W, g, f) {
        return p().wrap(function(b) {
          for (; ; )
            switch (b.prev = b.next) {
              case 0:
                g.showLoading("handleBlobList"), function() {
                  return Mt.apply(this, arguments);
                }(g, W, je, f).finally(function() {
                  g.hideLoading("handleBlobList");
                });
              case 2:
              case "end":
                return b.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function Ei() {
      return { icon: ce.font + " " + ce.iconCapture, className: ce.BUTTON_PREFIX + "captureBtn", onclick: function(te, W) {
        W.dcs.captureLoop.startManualCapture(W);
      } };
    }
    function jn() {
      return { icon: ce.font + " " + ce.iconClose, className: ce.BUTTON_PREFIX + "closeBtn", onclick: (te = C(p().mark(function W(g, f) {
        var b, m, I, x;
        return p().wrap(function(D) {
          for (; ; )
            switch (D.prev = D.next) {
              case 0:
                if (b = f.dcs, m = f.page, I = !1, 0 < m.getImageCount() && (I = !0), m.pageName == Me && b.config.scannerViewer.funcConfirmExit)
                  return D.next = 6, b.config.scannerViewer.funcConfirmExit(I);
                D.next = 13;
                break;
              case 6:
                if ((x = D.sent) == Ye)
                  return D.abrupt("return");
                D.next = 11;
                break;
              case 11:
                if (x != Et && x != Je)
                  return D.abrupt("return");
                D.next = 13;
                break;
              case 13:
                if (x === void 0 && (x = Et), m._isClosed)
                  return D.next = 17, b.navigateBack();
                D.next = 18;
                break;
              case 17:
                return D.abrupt("return");
              case 18:
                return m._isClosed = !0, b.emit("blurPage"), b.stop(), D.next = 23, b.navigateBack();
              case 23:
                m.pageName != Me || x != Et && x != Je || b.exit(m.getDvs());
              case 24:
              case "end":
                return D.stop();
            }
        }, W);
      })), function(W, g) {
        return te.apply(this, arguments);
      }) };
      var te;
    }
    function ye() {
      return { icon: ce.font + " " + ce.iconSwitch, onclick: function(te, f) {
        var g = f.dcs, f = (g.emit("blurPage"), g.showLoading("switch camera button click"), g.config.scannerViewer.resolution.defaultValue);
        g.toggleCamera(f.width, f.height).finally(C(p().mark(function b() {
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  return g.hideLoading("switch camera button click"), g.emit("focusPage"), m.next = 4, gi(g);
                case 4:
                case "end":
                  return m.stop();
              }
          }, b);
        })));
      }, className: ce.BUTTON_PREFIX + "toggleCamera", text: "Switch Camera" };
    }
    function oe() {
      return { icon: ce.font + " " + ce.iconAutoCapture, className: ce.BUTTON_PREFIX + "autoCapture", onmount: function(te, W) {
      }, onSelected: function(te, W) {
        var g = W.dcs, f = g.config;
        te ? (f.scannerViewer.autoDetect.enableAutoDetect = !0, f.scannerViewer.autoScan.enableAutoScan = !0) : f.scannerViewer.autoScan.enableAutoScan = !1, g.captureLoop.loadLoopTypeFromConfig(), g.captureLoop.startLoop(W);
      } };
    }
    function ae() {
      return { icon: ce.font + " " + ce.iconResolution, className: ce.BUTTON_PREFIX + "resBtn", dropdown: { multiple: !1, list: function(te, W) {
        var g = W.dcs;
        return new Promise(function(f, b) {
          g.once("onPlayed", C(p().mark(function m() {
            var I, x, D, B, X;
            return p().wrap(function(Q) {
              for (; ; )
                switch (Q.prev = Q.next) {
                  case 0:
                    if (x = se(g, "config.scannerViewer.resolution"), I = x.valueList, x = x.defaultValue, g.showLoading("resolution list"), Q.prev = 3, I && I.length) {
                      Q.next = 12;
                      break;
                    }
                    return Q.next = 7, g.getResolution();
                  case 7:
                    D = Q.sent, x = x || { width: 1280, height: 720 }, I = D.map(function(ve) {
                      return { label: ve.width + "×" + ve.height, value: ve };
                    }), Q.next = 13;
                    break;
                  case 12:
                    x = x || I[I.length - 1].value;
                  case 13:
                    if ((B = ie(x, I)) < 0)
                      return Q.next = 17, g.getCurrentResolution();
                    Q.next = 35;
                    break;
                  case 17:
                    if (!(X = Q.sent) || X.width == x.width && X.height == x.height) {
                      Q.next = 34;
                      break;
                    }
                    return Q.prev = 19, Q.next = 22, g.setResolution(x);
                  case 22:
                    return Q.next = 24, g.getCurrentResolution();
                  case 24:
                    X = Q.sent, (B = ie(X, I)) < 0 && (I.push({ value: X, label: X.width + "×" + X.height }), B = I.length - 1), Q.next = 32;
                    break;
                  case 29:
                    Q.prev = 29, Q.t0 = Q.catch(19);
                  case 32:
                    Q.next = 35;
                    break;
                  case 34:
                    B < 0 && (I.push({ value: X, label: X.width + "×" + X.height }), B = I.length - 1);
                  case 35:
                    f(I.map(function(ve, ke) {
                      return { value: ve.value, text: ve.label, icon: "checkBox", isSelected: ke === B };
                    }));
                  case 36:
                    return Q.prev = 36, g.hideLoading("resolution list"), Q.finish(36);
                  case 39:
                  case "end":
                    return Q.stop();
                }
            }, m, null, [[3, , 36, 39], [19, 29]]);
          }))), g.on("resetResolution", function() {
            var m, D = g.config.scannerViewer.resolution.defaultValue, I = g.config.scannerViewer.resolution.valueList, x = ie(D, I), D = (x < 0 && (I.push({ value: D, label: D.width + "×" + D.height }), x = I.length - 1), document.getElementsByClassName("resolutionList"));
            if (D && 0 < D.length) {
              var B = D[0];
              if (B.childNodes)
                for (var X = 0; X < B.childNodes.length; X++)
                  m = B.childNodes[X], X == x && B.onclick(m);
            }
          }), g.on("resetRealResolution", function() {
            var m = g.config.scannerViewer.resolution.defaultValue;
            g.showLoading("resolution button click"), g.setResolution(m).then(function(I) {
              g.hideLoading("resolution button click");
            });
          });
        });
      }, onclick: function(te, W, g) {
        var f = g.dcs;
        f.showLoading("resolution button click"), f.setResolution(W).then(function(b) {
          W.width != b.width && W.height != b.height && f.emit("video-error", Dt.RESOLUTION_INVALID), f.config.scannerViewer.resolution.defaultValue = W, f.hideLoading("resolution button click"), f.getCameraView().resetVideoInfo();
        });
      } }, onclick: function(te, W) {
        var g = W.dcs;
        g.emit("blurPage"), g.once("hideResolutionList", function() {
          g.emit("focusPage");
        });
      } };
    }
    function ie(b, W) {
      var g = b.width, f = b.height, b = W.findIndex(function(x) {
        var x = x.value || {}, I = x.width, x = x.height;
        return I === g && x === f;
      });
      return b = b < 0 ? W.findIndex(function(x) {
        var x = x.value || {}, I = x.width, x = x.height;
        return I === f && x === g;
      }) : b;
    }
    function _e() {
      return { icon: ce.font + " " + ce.iconAutoDetect, onmount: function(te, W) {
      }, onSelected: function(te, W) {
        var g = W.dcs, f = g.config;
        te ? f.scannerViewer.autoDetect.enableAutoDetect = !0 : (f.scannerViewer.autoDetect.enableAutoDetect = !1, f.scannerViewer.autoScan.enableAutoScan = !1), g.captureLoop.loadLoopTypeFromConfig(), g.captureLoop.startLoop(W);
      }, className: ce.BUTTON_PREFIX + "detectCamera" };
    }
    function de() {
      return { icon: ce.font + " " + ce.iconFlash + " " + ce.iconFlashOff, className: ce.BUTTON_PREFIX + "flashBtn " + ce.disable, onclick: (te = C(p().mark(function W(g, f) {
        var b, m;
        return p().wrap(function(I) {
          for (; ; )
            switch (I.prev = I.next) {
              case 0:
                return b = f.dcs, f.page, m = b.config.scannerViewer, m = (m === void 0 ? {} : m).torch, (m = m === void 0 ? {} : m).on ? (m.on = !1, m.enableTorch = !1) : (m.on = !0, m.enableTorch = !0), I.next = 6, gi(b);
              case 6:
              case "end":
                return I.stop();
            }
        }, W);
      })), function(W, g) {
        return te.apply(this, arguments);
      }) };
      var te;
    }
    var Se = "dynamsoft_camera_scan_page_style", Ae = O("initElement"), ze = O("addStyle"), qe = function(te) {
      function W(f, b, m) {
        return b = te.call(this, f, b, m) || this, Object.defineProperty(H(b), ze, { value: At }), Object.defineProperty(H(b), Ae, { value: Ke }), b.fileName = null, b._nextViewerPage = null, b.pageName = Me, F(H(b), Ae)[Ae](), b.attachDefaultEvent(), b.initFileName(f), b;
      }
      Y(W, te);
      var g = W.prototype;
      return g.initFileName = function(f) {
        this.fileName = je, this._fileWrapper.findFile(this.fileName) || this._fileWrapper.createFile(this.fileName);
      }, g.getFileName = function() {
        return this.fileName;
      }, g.getImageCount = function() {
        return this._fileWrapper.getFileCount(this.fileName);
      }, g.attachDefaultEvent = function() {
        var f = this;
        this.on("onSaveCapture", function(b, m, I, x, D) {
          return Yt(m.dcs, I, x, D, f.fileName);
        });
      }, g.setDefaultColors = function(f, b, m, I) {
        this.setDefaultBackgroundColors(f, b, m), f.color || (f.color = "#fff"), f.selectedColor || (f.selectedColor = "#fe8e14"), b.maskColor || (b.maskColor = "#323232"), m.color || (m.color = "#fff"), m.selectedColor || (m.selectedColor = "#fe8e14"), I.color || (I.color = "#fff"), I.background || (I.background = "#fe8e14");
      }, g.getOptionsEl = function() {
        var f = this.options.scannerViewer, f = (f === void 0 ? {} : f).element;
        return f = mn(f) ? document.getElementById(f) : f;
      }, g.getHeaderButtons = function() {
        var m = this.options, f = m.headerButtons, m = m.scannerViewer, m = m === void 0 ? {} : m, b = m.scanButtonStyle, m = m.headerStyle;
        return te.prototype.createIconItems.call(this, f === void 0 ? {} : f, m === void 0 ? {} : m, !0, b === void 0 ? {} : b);
      }, g.getFooterButtons = function() {
        var m = this.options, f = m.footerButtons, m = m.scannerViewer, m = m === void 0 ? {} : m, b = m.scanButtonStyle, m = m.footerStyle;
        return te.prototype.createIconItems.call(this, f === void 0 ? {} : f, m === void 0 ? {} : m, !1, b === void 0 ? {} : b);
      }, g.initPageOption = function(f, B) {
        f.scannerViewer || (f.scannerViewer = $(B.config.scannerViewer), B.config && B.config.scannerViewer && B.config.scannerViewer.element && (f.scannerViewer.element = B.config.scannerViewer.element));
        var B = f.scannerViewer, Q = B.resolution, m = B.autoScan, I = B.autoDetect, x = B.switchCamera, D = B.loadLocalFile, B = B.torch, X = { icon: ce.font + " " + ce.iconContinuous, className: ce.BUTTON_PREFIX + "continuousMode" }, Q = { headerButtons: { changeResBtn: Zn(Q, ae()), autoDetect: U({ isSelected: (m == null ? void 0 : m.enableAutoScan) || (I == null ? void 0 : I.enableAutoDetect) }, Zn(I, _e())), flashBtn: Zn(B, de()), closeBtn: jn() }, footerButtons: { load: Zn(D, Er()), toggleCamera: Zn(x, ye()), capture: Ei(), autoCapture: U({ isSelected: m == null ? void 0 : m.enableAutoScan }, Zn(m, oe())), multipleBtn: { onclick: ma, onmount: function(ve) {
          ve.innerHTML = '<img class="' + ce.previewImg + `">
<div class="dynamsoft-camera-imgCount ` + ce.displayNone + `"></div>
<div class="dynamsoft-camera-nextArr ` + ce.font + " " + ce.iconBack + '"></div>', $n.log(ve);
        }, className: ce.buttonMultipleImg + " " + ce.displayNone, text: "Continuous" }, continuous: X }, scannerViewer: { resolution: { defaultValue: { width: 1280, height: 720 } }, fullScreen: !1 } };
        Fn() && ((I = B.visibility) == null ? void 0 : I.toString().toLowerCase()) != "hidden" || delete Q.headerButtons.flashBtn, this.options = Rr(f, Q);
      }, g.show = function() {
        var f = C(p().mark(function b() {
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  te.prototype.show.call(this);
                case 1:
                case "end":
                  return m.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.generatePreview = function() {
        var f = C(p().mark(function b() {
          var m, I, x, D, B, X, Q, ve, ke, dt, et;
          return p().wrap(function($e) {
            for (; ; )
              switch ($e.prev = $e.next) {
                case 0:
                  if (m = this._fileWrapper.openFile(this.fileName), I = m.length, x = (x = this.element) == null ? void 0 : x.querySelector("." + ce.buttonMultipleImg), D = x == null ? void 0 : x.querySelector("." + ce.previewImg), x && D) {
                    $e.next = 6;
                    break;
                  }
                  return $e.abrupt("return");
                case 6:
                  if ((B = x == null ? void 0 : x.querySelector(".dynamsoft-camera-imgCount")) && (0 < I ? (B.innerText = String(I), B.classList.remove(ce.displayNone)) : (B.innerText = "", B.classList.add(ce.displayNone))), I <= 0)
                    return x.classList.add(ce.displayNone), D.src != he && D.src != "" && (tt.revokeObjectURL(D.src), D.src = he), D.setAttribute("data", ""), $e.abrupt("return");
                  $e.next = 13;
                  break;
                case 13:
                  if (B = m[I - 1], !(X = this._dvsWrapper.getCustomDataSync(B))) {
                    $e.next = 41;
                    break;
                  }
                  if (Q = X.detectArea, X.preview !== !0) {
                    $e.next = 23;
                    break;
                  }
                  if (wt(ke = mn(ke = D.getAttribute("data")) && ke != "" ? JSON.parse(ke) : ke, Q))
                    return $e.abrupt("return");
                  $e.next = 22;
                  break;
                case 22:
                  delete X.preview;
                case 23:
                  if (D.src != he && D.src != "" && (tt.revokeObjectURL(D.src), D.src = he), !X.preview) {
                    $e.next = 28;
                    break;
                  }
                  ve = X.preview, $e.next = 38;
                  break;
                case 28:
                  return $e.next = 30, rt(X.oriBlob);
                case 30:
                  return ke = $e.sent, Q && (dt = { cornerPoints: Q }), $e.next = 34, Pn(this._dcs, dt, ke, !1, !1);
                case 34:
                  et = $e.sent, ve = et.preview, Vo(et);
                case 38:
                  D.src = tt.createURL(ve), ve.imageData && delete ve.imageData, Q && D.setAttribute("data", JSON.stringify(Q));
                case 41:
                case "end":
                  return $e.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.playVideo = function() {
        var f = C(p().mark(function b() {
          var m, I, x, D, B, X, Q, ve;
          return p().wrap(function(ke) {
            for (; ; )
              switch (ke.prev = ke.next) {
                case 0:
                  if (m = this._dcs, I = this.element, I = I.children[1], m.showLoading("ShowDocumentScanPage"), ke.prev = 4, D = this.options, D = D.scannerViewer, B = (D = D === void 0 ? {} : D).resolution, B = B === void 0 ? {} : B, x = D.fullScreen, D = D.deviceId, D = D === void 0 ? "" : D, X = B.valueList, X = X === void 0 ? [] : X, (B = B.defaultValue) || X && 0 < X.length && (B = X[X.length - 1].value), !m.isRunPlaying()) {
                    ke.next = 13;
                    break;
                  }
                  if (m.getCameraManage().getCurrentCamera())
                    return ke.next = 13, m.closeSource();
                  ke.next = 13;
                  break;
                case 13:
                  if (D != "")
                    return ke.next = 16, m.selectSource(D);
                  ke.next = 16;
                  break;
                case 16:
                  return Q = (X = { width: void 0, height: void 0 }).width, ve = X.height, B && (Q = B.width || void 0, ve = B.height || void 0), ke.next = 20, m.play(I, Q, ve, x);
                case 20:
                  ke.next = 27;
                  break;
                case 22:
                  return ke.prev = 22, ke.t0 = ke.catch(4), ke.next = 26, m.navigateBack();
                case 26:
                  m.emit(ct, ke.t0);
                case 27:
                  return ke.prev = 27, m.hideLoading("ShowDocumentScanPage"), ke.finish(27);
                case 30:
                case "end":
                  return ke.stop();
              }
          }, b, this, [[4, 22, 27, 30]]);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.queryPreviewImageElement = function() {
        var f = (f = this.element) == null ? void 0 : f.querySelector("." + ce.buttonMultipleImg);
        return f ? f == null ? void 0 : f.querySelector("." + ce.previewImg) : null;
      }, g.destroy = function() {
        var f = this.queryPreviewImageElement();
        f && (f.src && tt.revokeObjectURL(f.src), f.onload = null, f.onerror = null), this.pageName == Me && ((f = this._fileWrapper) != null && f.removeFile(this._dvsWrapper, this.fileName), (f = this._dvs) != null && (f = f.File) != null && f.removeFile(this.fileName), this._dcs.exit(this._dvs)), this._nextViewerPage && (this._nextViewerPage.destroy(), this._nextViewerPage = null), te.prototype.destroy.call(this);
      }, g.setNextViewerPage = function(f) {
        this._nextViewerPage = f;
      }, g.clickMultipleImage = function() {
        var f = C(p().mark(function b() {
          var m, I, x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if (this._nextViewerPage)
                    return m = this._nextViewerPage, I = this._fileWrapper.openFile(this.fileName), D.next = 5, m.syncFiles(!1, I);
                  D.next = 13;
                  break;
                case 5:
                  return I = D.sent, m.gotoViewPage(I - 1), D.next = 9, this._dcs.navigateToPage(m);
                case 9:
                  this.hide(), this._nextViewerPage = null, D.next = 16;
                  break;
                case 13:
                  return x = this._dcs.config.documentEditorSettings, x = x === void 0 ? {} : x, D.next = 16, function() {
                    return Ur.apply(this, arguments);
                  }(this._dcs, this._dvs, x, je, !0);
                case 16:
                case "end":
                  return D.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.removeDataByIndex = function(f, b) {
        f = this._fileWrapper.removeByIndexInFile(f, b), this._dvsWrapper.removeSync(f);
      }, g.insertDataByIndex = function(f, b, m) {
        return m = 0 <= m ? this._dvs.DataControl.insertSync(f, [b], m) : this._dvs.DataControl.appendSync(f, [b]), m && m.length == 1 ? m[0] : null;
      }, g.enableMultiImages = function() {
        var f;
        this.element && ((f = (f = this.element) == null ? void 0 : f.querySelector("." + ce.iconContinuous)) && f.classList.add(ce.displayNone), (f = (f = this.element) == null ? void 0 : f.querySelector("." + ce.buttonMultipleImg)) && f.classList.remove(ce.displayNone));
      }, g.moveMultipleImgPosition = function() {
        var f, b;
        this.element && (f = (f = this.element) == null ? void 0 : f.querySelector("." + ce.buttonMultipleImg)) && (f.style.top = "0", f.style.right = "0", f.style.position = "relative", (b = (b = this.element) == null ? void 0 : b.querySelector("." + ce.BUTTON_PREFIX + "continuousMode")) && b.appendChild(f), ((b = this.element) == null ? void 0 : b.querySelector("." + ce.iconContinuous)).classList.add(ce.displayNone));
      }, g.refreshPreviewWhenChanged = function() {
        var f = C(p().mark(function b() {
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  return m.next = 2, this.generatePreview();
                case 2:
                case "end":
                  return m.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.setPreviewImageFlag = function() {
        var f = this._fileWrapper.openFile(this.fileName);
        if (0 < f.length)
          for (var b = f.length, m = b - 1, I = 0; I < b; I++) {
            var x = f[I], x = this._dvsWrapper.getCustomDataSync(x);
            x && (I == m ? x.preview = !0 : x.preview !== void 0 && delete x.preview);
          }
      }, W;
    }(fo);
    function Ke() {
      var te = this.options, b = te.scannerViewer, b = b === void 0 ? {} : b, W = b.headerStyle, W = W === void 0 ? {} : W, g = b.bodyStyle, g = g === void 0 ? {} : g, f = b.footerStyle, f = f === void 0 ? {} : f, b = b.scanButtonStyle, b = (this.setDefaultColors(W, g, f, b === void 0 ? {} : b), `
        <header style="background:` + W.background + `"></header>
        <div style="background:` + g.background + `" class="videoContainer"></div>
        <footer style="background:` + f.background + `" class="buttonList">
            ` + (te.title ? '<div class="modeTitle">' + te.title + "</div>" : "") + `
        </footer>
        `);
      this.template = b, this.className = ce.documentScanPage, this.createEl(), F(this, ze)[ze]();
    }
    function At() {
      var g = this.options.scannerViewer, g = g === void 0 ? {} : g, f = g.headerStyle, f = f === void 0 ? {} : f, te = g.bodyStyle, W = g.footerStyle, W = W === void 0 ? {} : W, g = g.scanButtonStyle, g = `
.` + ce.documentScanPage + " ." + ce.headerSelected + ` i {
  color: ` + f.selectedColor + ` !important;
}
.` + ce.documentScanPage + " ." + ce.footerSelected + ` i {
  color: ` + W.selectedColor + ` !important;
}
@keyframes dynamsoft-camera-glow-keyframe-insert {
  0% {border: 3px solid transparent;}
  100% {border: 3px solid ` + (g === void 0 ? {} : g).background + `;}
}
.` + ce.documentScanPage + ` .resolutionList .checkBox {
  border: 1px solid ` + f.color + `;
}
.` + ce.documentScanPage + " .resolutionList ." + ce.ddlSelectedItem + ` .checkBox {
  background-color: ` + f.selectedColor + `;
}
.` + ce.buttonMultipleImg + ` .dynamsoft-camera-imgCount {
  color: ` + W.color + `;
  background: ` + W.selectedColor + `;
}
.` + ce.buttonMultipleImg + ` .dynamsoft-camera-nextArr {
  color: ` + W.selectedColor + `;
}
.dcs-loading-content div>div {
  background: ` + (te === void 0 ? {} : te).maskColor + `;
}
`, f = document.getElementById(Se);
      if (f)
        f.innerHTML = g;
      else {
        (f = document.createElement("style")).type = "text/css", f.id = Se;
        try {
          f.appendChild(document.createTextNode(g));
        } catch {
        }
        document.body.appendChild(f);
      }
    }
    function _n() {
      return { icon: ce.font + " " + ce.iconFilter, className: ce.BUTTON_PREFIX + "filter", onclick: function(te, b) {
        var g, f, b = b.dcs, m = b.getCurrentPage();
        m && (g = m.getDvs(), f = m.getViewerUid(), m.getViewerByUid(f).getCurrentIndex() < 0 || function() {
          Jt.apply(this, arguments);
        }(te, g, f, b));
      } };
    }
    function Jt() {
      return (Jt = C(p().mark(function te(W, g, f, b) {
        var m, I, x, D, B, X, Q, ve, ke, dt, et, $e, gt, hn, Tt, Dn, Xn, vn, Nn, ir, kn, En, Un;
        return p().wrap(function(Ai) {
          for (; ; )
            switch (Ai.prev = Ai.next) {
              case 0:
                if (Un = function() {
                  var Ar, Qr, qi, oo = document.createElement("span"), ko = document.createElement("div");
                  ko.className = "" + ce.filterCheckBox, Ar = document.createElement("span"), (Qr = document.createElement("input")).type = "checkBox", Qr.id = "dynamsoft-camera-" + ht(6), ko.appendChild(Ar), Ar.appendChild(Qr);
                  var xo = ((xo = b.config.documentEditorSettings) == null ? void 0 : xo.filter).applyToAll, xo = (xo && xo.enableApplyToAll && (Qr.checked = !0), (qi = document.createElement("label")).innerHTML = xo.label, qi.setAttribute("for", Qr.id), oo.appendChild(ko), oo.appendChild(qi), document.createElement("span"));
                  return xo.className = "dynamsoft-filter-close dynamsoft-camera-font dynamsoft-camera-icon-arrow", xo.onclick = function() {
                    _i(b), m = !1;
                  }, oo.appendChild(xo), Qr.checked ? (ko.classList.add(ce.filterCheckedBox), Ar.style.background = "") : (ko.classList.remove(ce.filterCheckedBox), Ar.style.background = "none"), Qr.addEventListener("click", function() {
                    var wa = this.checked, Ia = (wa ? (ko.classList.add(ce.filterCheckedBox), Ar.style.background = "", I ? b.filterApplyToAllValue = I.dataset.filterValue : (wa = !1, b.filterApplyToAllValue = void 0)) : (ko.classList.remove(ce.filterCheckedBox), Ar.style.background = "none", b.filterApplyToAllValue = void 0), (Ia = b.config.documentEditorSettings) == null ? void 0 : Ia.filter);
                    Ia.applyToAll || (Ia.applyToAll = {}), Ia.applyToAll.enableApplyToAll = wa;
                  }), oo;
                }, En = function() {
                  var Ar;
                  (Ar = I) != null && Ar.classList.remove(ce.filterSelectedItem), B != null && (Ar = B.querySelector("." + ce.filterDropDown)) != null && (Ar = Ar.querySelector("." + ce.filterSelectedItem)) != null && Ar.classList.remove(ce.filterSelectedItem);
                }, kn = function() {
                  return (kn = C(p().mark(function Ar(Qr) {
                    var qi, oo, ko, xo, wa, Ia, Ra, Kr, zt, ja, oa;
                    return p().wrap(function(ki) {
                      for (; ; )
                        switch (ki.prev = ki.next) {
                          case 0:
                            if (Qr.stopPropagation(), (qi = Qr.target) === I || qi.tagName !== "LI")
                              return ki.abrupt("return");
                            ki.next = 4;
                            break;
                          case 4:
                            if (b.showLoading("click filter"), ki.prev = 5, wa = b.getCurrentPage(), 0 <= (xo = ve.getCurrentIndex()))
                              return oo = ve.getUidByIndex(xo), Ia = wa.GetFilterDirty(), ki.next = 13, wa.getCurImageData(oo);
                            ki.next = 15;
                            break;
                          case 13:
                            ko = ki.sent, Ia || wa.ClearFilterDirty();
                          case 15:
                            if (oo && ko)
                              return Ra = ve.getRotateAngle(xo), En(), (I = qi).classList.add(ce.filterSelectedItem), Kr = qi.dataset.filterValue, ki.next = 23, Xt(ko);
                            ki.next = 38;
                            break;
                          case 23:
                            if (zt = ki.sent, Kr !== Z.ORIGINAL) {
                              ki.next = 28;
                              break;
                            }
                            ja = zt, ki.next = 31;
                            break;
                          case 28:
                            return ki.next = 30, b.filterHandlerByIImageData(ko, zt, Kr);
                          case 30:
                            ja = ki.sent;
                          case 31:
                            return oa = b.config.documentEditorSettings.filter, oa = oa.applyToAll, b.curFilterValue = Kr, oa && oa.enableApplyToAll ? b.filterApplyToAllValue = Kr : b.filterApplyToAllValue = void 0, ki.next = 37, no(ja, g, oo, !1, { filterValue: Kr, bitDepth: ja.imageBitDepth });
                          case 37:
                            ve.rotate(Ra);
                          case 38:
                            return ki.prev = 38, b.hideLoading("click filter"), ki.finish(38);
                          case 41:
                          case "end":
                            return ki.stop();
                        }
                    }, Ar, null, [[5, , 38, 41]]);
                  }))).apply(this, arguments);
                }, ir = function(Ar) {
                  return kn.apply(this, arguments);
                }, Nn = function(Ar, Qr) {
                  Ar && (Ar.classList[Qr ? "remove" : "add"](ce.displayNone), Qr && I && (Ar.scrollLeft = I.offsetLeft), m = Qr);
                }, vn = function() {
                  var Ar = B == null ? void 0 : B.querySelector("." + ce.filterDropDown);
                  Nn(Ar, !1);
                }, I = null, x = m = !(Xn = function() {
                  x || (ve.on(We, vn), ve.on(Re, vn), ve.on(le, function() {
                    _i(b), m = !1;
                  }), x = !0);
                }), !(D = b.getCurrentPage()) || D.isDestroyed)
                  return Ai.abrupt("return");
                Ai.next = 13;
                break;
              case 13:
                if (B = D.getHtmlElement()) {
                  Ai.next = 16;
                  break;
                }
                return Ai.abrupt("return");
              case 16:
                if (X = B == null ? void 0 : B.querySelector("." + ce.BUTTON_PREFIX + "filter"), Q = X == null ? void 0 : X.querySelector("." + ce.filterDropDown), ve = D.getViewerByUid(f), (ke = ve.getCurrentIndex()) < 0)
                  return Q && (Zi(Q), Q.remove()), Ai.abrupt("return");
                Ai.next = 23;
                break;
              case 23:
                if (mn(dt = ve.getUidByIndex(ke)) && dt != "") {
                  Ai.next = 27;
                  break;
                }
                return Q && (Zi(Q), Q.remove()), Ai.abrupt("return");
              case 27:
                if (Q && (et = Q.getAttribute("data")), Q && et == dt) {
                  Ai.next = 39;
                  break;
                }
                return $e = !Q, Q ? (Zi(Q), gt = (gt = Q) == null ? void 0 : gt.querySelector("ul")) : (Q = document.createElement("span"), gt = document.createElement("ul"), Q.appendChild(gt)), Ai.next = 33, D.appendFilterDropdownImages(ve);
              case 33:
                Tt = Ai.sent, hn = "", Tt && (gt.appendChild(Tt), I = (Tt = gt) == null ? void 0 : Tt.querySelector("." + ce.filterSelectedItem), Tt = !1, X != null && X.querySelector("." + ce.filterApplyAll) ? Tt = !0 : (Dn = b.config.documentEditorSettings.filter, (Dn = Dn.applyToAll) && Dn.visibility == "visible" && (Dn = Un()) && (Dn.classList.add(ce.filterApplyAll), Q.insertBefore(Dn, Q.firstChild), Tt = !0)), hn = Tt ? "dynamsoft-camera-H100" : "dynamsoft-camera-H71"), Q.className = ce.filterDropDown + " " + ce.displayNone + " " + hn, $e && (Q.addEventListener("click", function() {
                  var Ar = C(p().mark(function Qr(qi) {
                    return p().wrap(function(oo) {
                      for (; ; )
                        switch (oo.prev = oo.next) {
                          case 0:
                            ir(qi);
                          case 1:
                          case "end":
                            return oo.stop();
                        }
                    }, Qr);
                  }));
                  return function(Qr) {
                    return Ar.apply(this, arguments);
                  };
                }()), X.appendChild(Q)), dt && Q.setAttribute("data", dt);
              case 39:
                Nn(Q, m = !m), W.stopPropagation(), Xn();
              case 43:
              case "end":
                return Ai.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function In() {
      return { icon: ce.font + " " + ce.iconInsert, className: ce.BUTTON_PREFIX + "insert", onclick: function(te, m) {
        var g, f, b, m = m.dcs, I = m.getCurrentPage();
        function x(X) {
          var Q = X.dcs;
          Q.captureLoop.getIsLooping() ? setTimeout(x, 200, X) : X.callback.apply(null, [X.selectedFile, Q]);
        }
        function D(X, Q) {
          var ve;
          X && (X.type == "application/pdf" || X.type == "image/tiff" ? Q.emit("video-error", Dt.IMAGE_FORMAT_INVALID) : (ve = Q.getCurrentPage()) instanceof ya && (Q.emit("blurPage"), Q.showLoading("insert - load image"), x({ selectedFile: X, dcs: Q, callback: ve.selectedFile })));
        }
        function B(X, Q) {
          var ve = document.createElement("input");
          ve.style.display = "none", document.body.appendChild(ve), ve.addEventListener("click", function(ke) {
            ke.stopPropagation();
          }), ve.type = "file", ve.multiple = !1, ve.accept = "image/png,image/jpeg,image/jpg", ve.onchange = function() {
            var ke;
            ve.value !== "" && 0 < (ke = ve.files).length && (Q && Q(ke[0], X), Q = null), document.body.removeChild(ve), ve.value = null, ve.files = null, ve.onchange = null, ve = null;
          }, ve.click();
        }
        I && ((g = I._dcs.getPreviousPage()) && g instanceof vo && g.exitReuseMode(), f = m, m = (g = I).getDvs(), b = !1, f.showInsertPage({ fileName: g.getPageFileName(), footerButtons: { capture: { onclick: function(X, Q) {
          b || (b = !0, f.getCurrentPage() instanceof ya && f.captureLoop.startManualCapture({ dcs: f }), b = !1);
        } }, load: { onclick: function(X, Q) {
          f.getCurrentPage() instanceof ya && B(f, D);
        } } } }, m), f.emit("focusPage"));
      } };
    }
    var jt = "dynamsoft_camera_viewer_style", _t = O("bindCameraEvents"), St = O("getViewer"), sn = O("createCameraDvs"), yn = O("removeCameraDvs"), Wn = O("setViewerStyle"), Jn = O("addStyle"), pr = function(te) {
      function W(f, b, m) {
        return b = te.call(this, f, b, m) || this, Object.defineProperty(H(b), Jn, { value: Ki }), Object.defineProperty(H(b), Wn, { value: Wr }), Object.defineProperty(H(b), yn, { value: Di }), Object.defineProperty(H(b), sn, { value: Oi }), Object.defineProperty(H(b), St, { value: Fi }), Object.defineProperty(H(b), _t, { value: cr }), b._backFileName = null, b._initFileName = null, b._pageFileName = null, b._viewerId = null, b._editUid = null, b._zooming = !0, b._savedUid = null, b._copyRefMap = {}, b._isHandlingPageUid = !1, b._nextHandlePageUid = null, b._backInfo = { origApplyToAll: "", origDocumentData: {}, initDocumentData: {} }, b._currentInfo = { documentData: {} }, b._nextViewerPage = null, b._bSyncViewerDataFromBackupData = !1, b._backFileName = f.fileName, b._initFileName = f.initFileName, b._pageFileName = f.fileName, b.setPageFilename(), b.options.initDocumentData && (b._backInfo.initDocumentData = b.options.initDocumentData), b.setZooming(), F(H(b), sn)[sn](b.options), F(H(b), Jn)[Jn](), b;
      }
      Y(W, te);
      var g = W.prototype;
      return g.setPageFilename = function() {
      }, g.setZooming = function() {
      }, g.getPageFileName = function() {
        return this._pageFileName;
      }, g.getViewerUid = function() {
        return this._viewerId;
      }, g.getViewerByUid = function(f) {
        return this._dvs.ViewControl.getViewerByUid(f);
      }, g.getImageCount = function() {
        var f = F(this, St)[St]();
        return f ? f.getCurrentPageUids().length : 0;
      }, g.initPageOption = function(f, b) {
        f && f.fromInternal == 0 && f.documentEditorSettings ? this.options = f || {} : (this.options = Rr(f || {}, { scannerViewer: $(b.config.scannerViewer), documentEditorSettings: $(b.config.documentEditorSettings) }), b.config && b.config.documentEditorSettings && b.config.documentEditorSettings.element && (this.options.documentEditorSettings.element = b.config.documentEditorSettings.element));
      }, g.destroy = function() {
        this.isDestroyed = !0, this._nextViewerPage && (this._nextViewerPage.destroy(), this._nextViewerPage = null), F(this, yn)[yn](), te.prototype.destroy.call(this);
      }, g.getOptionsEl = function() {
        var f = this.options.documentEditorSettings, f = (f === void 0 ? {} : f).element;
        return f = mn(f) ? document.getElementById(f) : f;
      }, g.gotoViewPage = function(f) {
        var b = this.getViewerByUid(this._viewerId);
        if (b) {
          var m = b.getCurrentPageUids();
          if (0 <= f && f < m.length)
            return b.gotoPage(f), !0;
        }
        return !1;
      }, g.handlePageByIndex = function() {
        var f = C(p().mark(function b(m) {
          var I, x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if (x = this.getViewerByUid(this._viewerId), I = x.getCurrentPageUids(), !(0 <= m && m < I.length)) {
                    D.next = 9;
                    break;
                  }
                  if (x.gotoPage(m), mn(I = x.getUidByIndex(m)) && I != "")
                    return x = this._dvs, D.next = 9, this.handlePageByUid(I, x);
                  D.next = 9;
                  break;
                case 9:
                case "end":
                  return D.stop();
              }
          }, b, this);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.handlePageByUid = function() {
        var f = C(p().mark(function b(m, I) {
          return p().wrap(function(x) {
            for (; ; )
              switch (x.prev = x.next) {
                case 0:
                  return x.next = 2, this.initOrigDataByUid(m);
                case 2:
                case "end":
                  return x.stop();
              }
          }, b, this);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.getCurrentIndex = function() {
        return this.getViewerByUid(this._viewerId).getCurrentIndex();
      }, g.removePageFile = function() {
        this._pageFileName && ($n.log("remove file: " + this._pageFileName), this._dvs.File.removeFile(this._pageFileName), this._pageFileName = null);
      }, g.show = function() {
        var f = C(p().mark(function b() {
          var m, I;
          return p().wrap(function(x) {
            for (; ; )
              switch (x.prev = x.next) {
                case 0:
                  if (this.isDestroyed)
                    return x.abrupt("return");
                  x.next = 2;
                  break;
                case 2:
                  if (!(I = F(this, St)[St]())) {
                    x.next = 12;
                    break;
                  }
                  if (0 <= (m = I.getCurrentIndex()))
                    return I = I.getUidByIndex(m), x.next = 9, this.handlePageByUid(I, this._dvs);
                  x.next = 9;
                  break;
                case 9:
                  if (this.isDestroyed) {
                    x.next = 12;
                    break;
                  }
                  return x.next = 12, te.prototype.show.call(this);
                case 12:
                case "end":
                  return x.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.isVisible = function() {
        var f = !1;
        return f = this.element ? !this.element.classList.contains(ce.displayNone) : f;
      }, g.backupImageDataFromUids = function(f) {
        for (var b, m, I = f.length, x = 0; x < I; x++)
          mn(b = f[x]) && b != "" && (m = (m = this._dvsWrapper) == null ? void 0 : m.getCustomDataSync(b), this.backupImageDataFromSrcUid(b, m));
      }, g.backupImageDataFromSrcUid = function(f, b) {
        this.isDestroyed || (this._backInfo.origDocumentData[f] = b ? { detectArea: b.detectArea, angle: b.angle, filterValue: b.filterValue } : { detectArea: null, angle: 0, filterValue: Z.ORIGINAL });
      }, g.isCropPage = function() {
        return !1;
      }, g.fileDataCopyOneToViewer = function(f, b, m, I, x) {
        var D, B, X = (X = this._dvsWrapper) == null ? void 0 : X.getCustomDataSync(m), X = X ? Rr(X, {}) : {}, Q = X.oriBlob, ve = X.resBlob;
        return b ? Q && Q.imageData && (D = Q.imageData, B = ei(Q)) : ve && ve.imageData && (D = ve.imageData, B = ei(ve)), D && B || (D = (b = this._dvsWrapper) == null ? void 0 : b.getOriDataSync(m), (ve = Qi(B = (Q = this._dvsWrapper) == null ? void 0 : Q.getMetaDataSync(m))).imageData = D, X.oriBlob || (X.oriBlob = vi(ve))), b = I < 0 || x <= I ? this._dvs.DataControl.appendSync(this._pageFileName, [{ oriData: D, metadata: B, customData: X }]) : this._dvs.DataControl.insertSync(this._pageFileName, [{ oriData: D, metadata: B, customData: X }], I), B = D = null, b && b.length == 1 ? (Q = b[0], this._copyRefMap[Q] = m, Q) : null;
      }, g.fileDataCopyToViewer = function(f) {
        for (var b, m = this.isCropPage(), I = f.length, x = 0; x < I; x++)
          mn(b = f[x]) && b != "" && this.fileDataCopyOneToViewer(!1, m, b, -1, I);
      }, g.initOrigDataByUid = function() {
        var f = C(p().mark(function b(m) {
          var I, x, D, B, X, Q;
          return p().wrap(function(ve) {
            for (; ; )
              switch (ve.prev = ve.next) {
                case 0:
                  if (this._dvs, this.isCropPage(), this.isDestroyed)
                    return ve.abrupt("return");
                  ve.next = 4;
                  break;
                case 4:
                  if (mn(m) && m != "") {
                    ve.next = 6;
                    break;
                  }
                  return ve.abrupt("return");
                case 6:
                  if (I = this._dvsWrapper.getDataRootSync(m)) {
                    ve.next = 9;
                    break;
                  }
                  return ve.abrupt("return");
                case 9:
                  if (x = I.customData, x = x === void 0 ? {} : x, D = I.metadata, D = D === void 0 ? {} : D, Q = I.oriData, X = !1, x.oriBlob ? B = x.oriBlob : (B = Q, x.oriBlob = vi(Q)), mn(B))
                    return ve.next = 15, fetch(B);
                  ve.next = 20;
                  break;
                case 15:
                  return Q = ve.sent, ve.next = 18, Q.blob();
                case 18:
                  B = ve.sent, X = !0;
                case 20:
                  if (B instanceof Blob)
                    return ve.next = 23, Ro(B);
                  ve.next = 26;
                  break;
                case 23:
                  B = ve.sent, D.bitDepth == 1 && (B.imageBitDepth = 1), X = !0;
                case 26:
                  X && (x.oriBlob = vi(B), x.angle = 0);
                case 27:
                case "end":
                  return ve.stop();
              }
          }, b, this);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.ifOldDocumentDataChanged = function() {
        var f = this.getViewerByUid(this._viewerId), b = !1;
        if (f)
          for (var m = f.getCurrentPageUids(), I = 0; I < m.length; I++) {
            var x = m[I];
            if (mn(x) && x != "") {
              var D = this._copyRefMap[x];
              if (mn(D) && D != "") {
                if (D = this._backInfo.origDocumentData[D], !D)
                  return !0;
                var B = (B = this._dvsWrapper) == null ? void 0 : B.getCustomDataSync(x);
                if (B && (x = B.oriBlob, b = this.compareOldValueChanged(D, B, x)))
                  break;
              }
            }
          }
        return b;
      }, g.compareOldValueChanged = function(f, b, m) {
        if (!f || !b)
          return !0;
        if (f.detectArea === void 0) {
          if (m) {
            var I = m.imageWidth, m = m.imageHeight;
            if (!Vt(b.detectArea, I, m))
              return !0;
          }
        } else if (!wt(f.detectArea, b.detectArea))
          return !0;
        if (f.angle === void 0) {
          if (b.angle != 0)
            return !0;
        } else if (f.angle != b.angle)
          return !0;
        return !ia(f.filterValue, b.filterValue);
      }, g.getRefUid = function(f, b) {
        if (this.isDestroyed)
          return null;
        if (f = this._copyRefMap[f], b) {
          var m = this._dcs.getPreviousPageByPage(this);
          if (m && m instanceof W)
            return m.getRefUid(f, b);
        }
        return mn(f) && f != "" ? f : null;
      }, g.setNextViewerPage = function(f) {
        this._nextViewerPage = f;
      }, g.syncFiles = function() {
        var f = C(p().mark(function b(m, I) {
          var x, D, B, X, Q, ve, ke, dt, et, $e, gt, hn, Tt, Dn, Xn, vn, Nn, ir, kn, En;
          return p().wrap(function(Un) {
            for (; ; )
              switch (Un.prev = Un.next) {
                case 0:
                  if (this.isDestroyed)
                    return Un.abrupt("return");
                  Un.next = 2;
                  break;
                case 2:
                  if (x = this.getViewerByUid(this._viewerId), D = 0, !x) {
                    Un.next = 74;
                    break;
                  }
                  if (!(B = x.getCurrentPageUids())) {
                    Un.next = 73;
                    break;
                  }
                  ve = [], ke = [], dt = B.length, X = 0;
                case 9:
                  if (!(X < dt)) {
                    Un.next = 33;
                    break;
                  }
                  if (mn(et = B[X]) && et != "") {
                    Un.next = 13;
                    break;
                  }
                  return Un.abrupt("continue", 30);
                case 13:
                  if (mn($e = this._copyRefMap[et]) && $e != "") {
                    Un.next = 17;
                    break;
                  }
                  return ve.push(X), Un.abrupt("continue", 30);
                case 17:
                  gt = !1, Q = 0;
                case 19:
                  if (!(Q < I.length)) {
                    Un.next = 29;
                    break;
                  }
                  if (mn(hn = I[Q]) && hn != "") {
                    Un.next = 23;
                    break;
                  }
                  return Un.abrupt("continue", 26);
                case 23:
                  if (hn == $e)
                    return gt = !0, Un.abrupt("break", 29);
                  Un.next = 26;
                  break;
                case 26:
                  Q++, Un.next = 19;
                  break;
                case 29:
                  gt || (ve.push(X), this._dvsWrapper.removeSync($e), delete this._copyRefMap[et], delete this._backInfo.origDocumentData[$e]);
                case 30:
                  X++, Un.next = 9;
                  break;
                case 33:
                  0 < ve.length && (dt -= ve.length, x.removeSync(ve)), Q = 0;
                case 35:
                  if (!(Q < I.length)) {
                    Un.next = 43;
                    break;
                  }
                  if (mn(Tt = I[Q]) && Tt != "") {
                    Un.next = 39;
                    break;
                  }
                  return Un.abrupt("continue", 40);
                case 39:
                  this._backInfo.origDocumentData[Tt] || ke.push({ uid: Tt, index: Q });
                case 40:
                  Q++, Un.next = 35;
                  break;
                case 43:
                  if (Dn = this.isCropPage(), !(0 < ke.length)) {
                    Un.next = 71;
                    break;
                  }
                  Xn = [], Q = 0;
                case 47:
                  if (!(Q < ke.length)) {
                    Un.next = 60;
                    break;
                  }
                  if (vn = ke[Q], mn(Nn = vn.uid) && Nn != "") {
                    Un.next = 52;
                    break;
                  }
                  return Un.abrupt("continue", 57);
                case 52:
                  if (this._backInfo.origDocumentData[Nn])
                    return Un.abrupt("continue", 57);
                  Un.next = 54;
                  break;
                case 54:
                  kn = (kn = this._dvsWrapper) == null ? void 0 : kn.getCustomDataSync(Nn), this.backupImageDataFromSrcUid(Nn, kn), this._pageFileName && (kn = this.fileDataCopyOneToViewer(m, Dn, Nn, vn.index, dt)) && (dt++, Xn.push(kn), this._copyRefMap[kn] = Nn);
                case 57:
                  Q++, Un.next = 47;
                  break;
                case 60:
                  if (!this._pageFileName) {
                    Un.next = 71;
                    break;
                  }
                  Q = 0;
                case 62:
                  if (!(Q < Xn.length)) {
                    Un.next = 71;
                    break;
                  }
                  if (mn(ir = Xn[Q]) && ir != "") {
                    Un.next = 66;
                    break;
                  }
                  return Un.abrupt("continue", 68);
                case 66:
                  return Un.next = 68, this.fillOneCustomDataByUidFirstTime(ir, this.isCropPage(), !0);
                case 68:
                  Q++, Un.next = 62;
                  break;
                case 71:
                  (kn = this._dvs.File.openFile(this._pageFileName, x.uid)) && (D = kn.length);
                case 73:
                  this._nextViewerPage && (En = x.getCurrentPageUids(), this._nextViewerPage.syncFiles(m, En));
                case 74:
                  return Un.abrupt("return", D);
                case 75:
                case "end":
                  return Un.stop();
              }
          }, b, this);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.reorderImages = function(f, b) {
        for (var m, I, x = b.length, D = {}, B = 0; B < x; B++)
          !mn(I = b[B]) || I == "" || mn(m = this._copyRefMap[I]) && m != "" && (D[m] = I);
        var X, Q = f.length, ve = [];
        for (B = 0; B < Q; B++)
          mn(X = f[B]) && X != "" && ve.push(D[X]);
        return ve;
      }, g.resetViewerAngleByIndexes = function(f) {
        var b = this.getViewerByUid(this._viewerId);
        if (b && f)
          for (var m, I = f.length, x = 0; x < I; x++)
            m = f[x], b.resetByIndex(m, !1);
      }, g.restoreViewerCustomData = function() {
        var f = [], b = F(this, St)[St]();
        if (b)
          for (var m, I, x = b.getCurrentPageUids(), D = x.length, B = 0; B < D; B++)
            mn(I = x[B]) && I != "" && mn(m = this._copyRefMap[I]) && m != "" && (m = this._backInfo.origDocumentData[m]) && (I = this.restoreOneViewerCustomData(b, I, B, m)).changed && I.needReset && f.push(B);
        return f;
      }, g.regetViewerCustomDataFromSrc = function() {
        var f = [], b = F(this, St)[St]();
        if (b)
          for (var m, I, x, D = b.getCurrentPageUids(), B = D.length, X = 0; X < B; X++)
            mn(m = D[X]) && m != "" && mn(x = this._copyRefMap[m]) && x != "" && (I = (I = this._dvsWrapper) == null ? void 0 : I.getCustomDataSync(x)) && (x = this.restoreOneViewerCustomData(b, m, X, I)).changed && x.needReset && f.push(X);
        return f;
      }, g.restoreOneViewerCustomData = function(f, b, m, I) {
        var x = { changed: !1, needReset: !1 }, D = (D = this._dvsWrapper) == null ? void 0 : D.getCustomDataSync(b);
        return !D || !I ? x : (b = D.oriBlob, this.compareOldValueChanged(I, D, b) && (I.detectArea !== void 0 && (D.detectArea = I.detectArea), D.angle != I.angle && (D.angle = I.angle, x.needReset = !0), I.filterValue !== void 0 && (D.filterValue = I.filterValue), Co(D), x.changed = !0), x);
      }, g.saveViewerCustomData = function() {
        var f = F(this, St)[St]();
        if (f)
          for (var b, m, I, x, D = f.getCurrentPageUids(), B = D.length, X = 0; X < B; X++)
            mn(x = D[X]) && x != "" && mn(b = this._copyRefMap[x]) && b != "" && (m = (m = this._dvsWrapper) == null ? void 0 : m.getCustomDataSync(b)) && (I = (I = this._dvsWrapper) == null ? void 0 : I.getCustomDataSync(x)) && (x = !1, wt(m.detectArea, I.detectArea) || (m.detectArea = I.detectArea, x = !0), m.angle != I.angle && (m.angle = I.angle, x = !0), ia(m.filterValue, I.filterValue) || (m.filterValue = I.filterValue, x = !0), x && m.resBlob && delete m.resBlob, this._backInfo.origDocumentData[b] = { detectArea: I.detectArea, angle: I.angle, filterValue: I.filterValue });
      }, g.render = function() {
      }, g.syncFileFromExternalEvent = function() {
        var f = C(p().mark(function b(m, I) {
          var x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if (this.isDestroyed)
                    return D.abrupt("return");
                  D.next = 2;
                  break;
                case 2:
                  return x = (x = this._fileWrapper) == null ? void 0 : x.openFile(this._backFileName), D.next = 5, this.syncFiles(m, x);
                case 5:
                case "end":
                  return D.stop();
              }
          }, b, this);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.getCurrentEditUid = function() {
        return this._editUid;
      }, g.setEditUidAfterSyncImages = function() {
        var f = C(p().mark(function b(m) {
          var I, x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if (this.isDestroyed)
                    return D.abrupt("return");
                  D.next = 2;
                  break;
                case 2:
                  if (!(I = F(this, St)[St]())) {
                    D.next = 9;
                    break;
                  }
                  if (0 <= (x = !Hr(x = I.getIndexByUid(m)) || x < 0 ? I.getCurrentIndex() : x))
                    return D.next = 9, this.handlePageByIndex(x);
                  D.next = 9;
                  break;
                case 9:
                case "end":
                  return D.stop();
              }
          }, b, this);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.fillOneCustomDataByUidFirstTime = function() {
        var f = C(p().mark(function b(m, I, x) {
          var D, B, X, Q, ve, ke, dt, et, $e, gt, hn;
          return p().wrap(function(Tt) {
            for (; ; )
              switch (Tt.prev = Tt.next) {
                case 0:
                  if (this.isDestroyed)
                    return Tt.abrupt("return");
                  Tt.next = 2;
                  break;
                case 2:
                  if (mn(m) && m != "") {
                    Tt.next = 4;
                    break;
                  }
                  return Tt.abrupt("return");
                case 4:
                  if (D = this._dvsWrapper.getDataRootSync(m)) {
                    Tt.next = 7;
                    break;
                  }
                  return Tt.abrupt("return");
                case 7:
                  if (B = D.metadata, B = B === void 0 ? {} : B, gt = D.oriData, ve = Q = !1, (ke = D.customData) || (ke = {}, D.customData = ke, ve = !0), ke.resBlob ? ($e = I && ke.oriBlob ? ke.oriBlob : ke.resBlob) && $e.imageData && (D.oriData = vi($e.imageData), D.metadata = ei($e), dt = $e.imageWidth, et = $e.imageHeight) : (($e = Qi(B)).imageData = gt, I || x || (ke.resBlob = vi($e)), ke.oriBlob ? X = ke.oriBlob : (X = $e, ke.oriBlob = vi($e)), ke.angle === void 0 && (ke.angle = 0), Q = !0), mn(X))
                    return Tt.next = 14, fetch(X);
                  Tt.next = 19;
                  break;
                case 14:
                  return gt = Tt.sent, Tt.next = 17, gt.blob();
                case 17:
                  X = Tt.sent, ve = !0;
                case 19:
                  if (X instanceof Blob)
                    return Tt.next = 22, Ro(X);
                  Tt.next = 27;
                  break;
                case 22:
                  X = Tt.sent, dt = X.imageWidth, et = X.imageHeight, B.bitDepth == 1 && (X.imageBitDepth = 1), ve = !0;
                case 27:
                  ve && (ke.oriBlob = vi(X), ke.angle = 0, Q = !0), ke.detectArea || (dt && et || (X = ke.oriBlob) && (dt = X.imageWidth, et = X.imageHeight), 0 < dt && 0 < et && (ke.detectArea = [0, 0, dt, 0, dt, et, 0, et]), Q = !0), ke.filterValue || (ke.filterValue = Z.ORIGINAL, Q = !0), Q && (hn = this._copyRefMap[m]) && this.backupImageDataFromSrcUid(hn, ke);
                case 31:
                case "end":
                  return Tt.stop();
              }
          }, b, this);
        }));
        return function(b, m, I) {
          return f.apply(this, arguments);
        };
      }(), g.fillOrigCustomDataFirstTime = function() {
        var f = C(p().mark(function b() {
          var m, I, x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if (this.isDestroyed)
                    return D.abrupt("return");
                  D.next = 2;
                  break;
                case 2:
                  if (!(m = this.getViewerByUid(this._viewerId))) {
                    D.next = 17;
                    break;
                  }
                  if (!(m = m.getCurrentPageUids())) {
                    D.next = 17;
                    break;
                  }
                  I = 0;
                case 7:
                  if (!(I < m.length)) {
                    D.next = 17;
                    break;
                  }
                  if (mn(x = m[I]) && x != "") {
                    D.next = 11;
                    break;
                  }
                  return D.abrupt("continue", 14);
                case 11:
                  return D.next = 13, this.fillOneCustomDataByUidFirstTime(m[I], this.isCropPage(), !1);
                case 13:
                  this.copyOneBackupToInitData(x);
                case 14:
                  I++, D.next = 7;
                  break;
                case 17:
                case "end":
                  return D.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.copyOneBackupToInitData = function(f) {
        f = this._copyRefMap[f], mn(f) && f != "" && (this._backInfo.initDocumentData[f] = Rr(this._backInfo.origDocumentData[f], {}));
      }, W;
    }(fo);
    function cr() {
      var te = this;
      this.getViewerByUid(this._viewerId).on("slideFinished", C(p().mark(function W() {
        var g;
        return p().wrap(function(f) {
          for (; ; )
            switch (f.prev = f.next) {
              case 0:
                (g = te.getViewerByUid(te._viewerId)) && 0 <= (g = g.getCurrentIndex()) && te.handlePageByIndex(g);
              case 2:
              case "end":
                return f.stop();
            }
        }, W);
      })));
    }
    function Fi() {
      return this.getViewerByUid(this._viewerId);
    }
    function Oi(te) {
      var W = this._dvs.ViewControl.createViewer({ container: null, displayMode: "single", uiConfig: { canvasConfig: { canvasMouseShape: "pointer" }, outerBorder: "0px" }, scrollerConfig: {}, zooming: this._zooming }), g = (this._viewerId = W.uid, this.options.curIndex), f = (f = this._fileWrapper) == null ? void 0 : f.openFile(this._backFileName);
      this._dvs.File.createFile(this._pageFileName, this._viewerId), this._dvs.File.openFile(this._pageFileName, this._viewerId), f.length == 0 ? g = -1 : (this.backupImageDataFromUids(f), this._pageFileName && this.fileDataCopyToViewer(f), 0 <= g && (g >= f.length ? g = f.length - 1 : g < 0 && (g = 0), W.gotoPage(g)), 0 <= (f = W.getCurrentIndex()) && (this._savedUid = W.getUidByIndex(g = f))), this.options.curIndex = g, W && F(this, Wn)[Wn](W), F(this, _t)[_t]();
    }
    function Di() {
      var te = F(this, St)[St]();
      te.removeAllSync(), this._dvs.ViewControl.removeViewer(te);
    }
    function Wr(te) {
      var f = this.options.documentEditorSettings, f = f === void 0 ? {} : f, W = f.headerStyle, W = W === void 0 ? {} : W, g = f.bodyStyle, g = g === void 0 ? {} : g, f = f.footerStyle, f = f === void 0 ? {} : f;
      W.background || (W.background = "#000"), g.background || (g.background = "#323232"), f.background || (f.background = "#000"), te.topMenuBorder = "none", te.topMenuColor = W.background, te.canvasBorder = "none", te.canvasBackground = g.background, te.displayMode = "single", te.footerColor = f.background, te.width = "100%", te.height = "100%";
    }
    function Ki() {
      var te = this.options.documentEditorSettings, te = te === void 0 ? {} : te, g = te.headerStyle, g = g === void 0 ? {} : g, W = te.bodyStyle, te = te.footerStyle, te = te === void 0 ? {} : te, W = "." + ce.headerfont + " { color: " + g.color + "; background: " + g.background + ` !important; }
.` + ce.footerfont + " { color: " + te.color + ` !important; }
.` + ce.documentEditPage + " ." + ce.headerSelected + " i { color: " + g.selectedColor + ` !important; }
.` + ce.documentEditPage + " ." + ce.footerSelected + " i { color: " + te.selectedColor + ` !important; }
.` + ce.cropPage + " ." + ce.footerSelected + " i { color: " + te.selectedColor + ` !important; }
.` + ce.documentEditPage + " ." + ce.cvsContainer + ", ." + ce.cropPage + " ." + ce.cvsContainer + " { background: " + (W === void 0 ? {} : W).background + ` !important; }
.` + ce.documentEditPage + " .dvs-cameraPager, ." + ce.cropPage + " .dvs-cameraPager{  color: " + g.color + ` !important; }
.` + ce.documentEditPage + " .dvs-cameraPager p, ." + ce.cropPage + " .dvs-cameraPager p{  color: " + g.color + ` !important; }
.` + ce.documentEditPage + " .dvs-cameraPager .dvs-curPage, ." + ce.cropPage + " .dvs-cameraPager .dvs-curPage{ color: " + g.selectedColor + ` !important; }
.` + ce.documentEditPage + " .dvs-cameraPager ." + ce.disable + ", ." + ce.cropPage + " .dvs-cameraPager ." + ce.disable + "{ color: " + g.disabledColor + ` !important; }
.` + ce.filterDropDown + " {background: " + te.background + ` !important;}
.` + ce.filterDropDown + " ul {background: " + te.background + ` !important;}
.` + ce.filterDropDown + " ul li {border-color: " + te.background + `}
.` + ce.filterSelectedItem + " { border: 2px solid " + te.selectedColor + ` !important; }
.` + ce.filterCheckedBox + " { border-color:" + te.selectedColor + `; !important}
.` + ce.filterCheckedBox + " span { background: " + te.selectedColor + ` !important}
.` + ce.filterCheckedBox + " +label { color: " + te.selectedColor + " }", g = document.getElementById(jt);
      if (g)
        g.innerHTML = W;
      else {
        (g = document.createElement("style")).type = "text/css", g.id = jt;
        try {
          g.appendChild(document.createTextNode(W));
        } catch {
        }
        document.body.appendChild(g);
      }
    }
    var Lo = O("initElement"), Eo = O("initViewer"), ro = function(te) {
      function W(f, b, m) {
        return b = te.call(this, f, b, m) || this, Object.defineProperty(H(b), Eo, { value: Ga }), Object.defineProperty(H(b), Lo, { value: di }), b.viewerPagerEventId = null, b._curImageData = null, b._filterDirty = !1, b._preEditPageCropData = null, b._bInsertingImage = !1, b._iInsertingIndex = -1, b.pageName = at, F(H(b), Lo)[Lo](), b._backInfo.origApplyToAll = m.filterApplyToAllValue, f.visibility == "hidden" && b.clickSaveButton(), b;
      }
      Y(W, te);
      var g = W.prototype;
      return g.rotateLeft = function() {
        this._rotate(-90);
      }, g.rotateRight = function() {
        this._rotate(90);
      }, g._rotate = function(f) {
        if (!(this.isDestroyed || this.getImageCount() <= 0)) {
          var b = this._dcs, m = this.getViewerUid(), m = this.getViewerByUid(m), I = m.getCurrentIndex();
          if (!(I < 0)) {
            b.showLoading("rotate button init");
            try {
              m.rotateMode = 0, m.rotate(f), this._rotateFilterDropDown(m.getRotateAngle(I));
            } finally {
              b.hideLoading("rotate button init");
            }
          }
        }
      }, g._rotateFilterDropDown = function(f) {
        var b;
        if (!this.isDestroyed) {
          var m = (b = this.element) == null ? void 0 : b.querySelectorAll(".dynamsoft-camera-preFilter");
          if (m)
            for (var I = 0; I < m.length; I++) {
              var x = m[I];
              x && x.tagName == "IMG" && x.src && (x.style.transform = "rotate(" + f + "deg)");
            }
        }
      }, g.getOrigAngle = function(m) {
        var b = 0, m = this._copyRefMap[m];
        return b = m && (m = this._backInfo.origDocumentData[m]) ? m.angle : b;
      }, g.getCurrentCustomData = function() {
        var f, b, m = this._editUid;
        return f = mn(m) && m != "" ? (f = this._preEditPageCropData && mn(b = this._copyRefMap[m]) && b != "" ? this._preEditPageCropData[b] : f) || this._dvsWrapper.getCustomDataSync(m) : f;
      }, g.destroy = function() {
        this.isDestroyed = !0, _i(this._dcs);
        var f = this.getViewerByUid(this._viewerId);
        f && this.viewerPagerEventId && f.offById(le, this.viewerPagerEventId), this.viewerPagerEventId = null, this.removePageFile(), this.setCurImageData(null), te.prototype.destroy.call(this), this.options = null;
      }, g.setPageFilename = function() {
        this._pageFileName = ["__dynamsoft_edit_files", ht(6)].join("_");
      }, g.getHeaderButtons = function() {
        var b = this.options, f = b.headerButtons, b = b.documentEditorSettings, b = (b === void 0 ? {} : b).headerStyle;
        return te.prototype.createIconItems.call(this, f === void 0 ? {} : f, b === void 0 ? {} : b, !0, null);
      }, g.getFooterButtons = function() {
        var b = this.options, f = b.footerButtons, b = b.documentEditorSettings, b = (b === void 0 ? {} : b).footerStyle;
        return te.prototype.createIconItems.call(this, f === void 0 ? {} : f, b === void 0 ? {} : b, !1, null);
      }, g.initPageOption = function(X, b) {
        te.prototype.initPageOption.call(this, X, b);
        var X = this.options.documentEditorSettings, m = X.remove, m = m === void 0 ? {} : m, I = X.insert, I = I === void 0 ? {} : I, x = X.filter, x = x === void 0 ? {} : x, D = X.rotateLeft, D = D === void 0 ? {} : D, B = X.crop, B = B === void 0 ? {} : B, X = (X.cropViewer, x.defaultValue), X = X === void 0 ? Z.ORIGINAL : X, Q = x.applyToAll, Q = Q === void 0 ? {} : Q, Q = (b.curFilterValue = X, Q && Q.enableApplyToAll ? b.filterApplyToAllValue = X : b.filterApplyToAllValue = void 0, { curIndex: -1, fileName: null, initFileName: this._initFileName, headerButtons: { close: { icon: ce.font + " " + ce.iconBack, className: ce.BUTTON_PREFIX + "back", onclick: function(ve, ke) {
          ke = ke.dcs.getCurrentPage(), ke && ke.clickBackButton();
        } }, pager: { className: "dvs-cameraPager" }, delete: Zn(m, { icon: ce.font + " " + ce.iconDelete, className: ce.BUTTON_PREFIX + "delete", onclick: function(ve, ke) {
          ke = ke.dcs.getCurrentPage(), ke && ke.clickDeleteButton();
        } }) }, footerButtons: { insert: Zn(I, In()), rotate: Zn(D, { icon: ce.font + " " + ce.iconRotateLeft, className: ce.BUTTON_PREFIX + "rotateLeft", onclick: function(ve, ke) {
          ke = ke.dcs.getCurrentPage(), ke && ke.rotateLeft();
        } }), filter: Zn(x, _n()), crop: Zn(B, { icon: ce.font + " " + ce.iconCrop, className: ce.BUTTON_PREFIX + "crop", onclick: function(ve, ke) {
          ke = ke.dcs.getCurrentPage(), ke && ke.clickCropButton();
        } }), save: { icon: ce.font + " " + ce.iconSave, className: ce.BUTTON_PREFIX + "save", onclick: function(ve, ke) {
          ke = ke.dcs.getCurrentPage(), ke && ke.clickSaveButton();
        } } } });
        this.options = Rr(this.options, Q);
      }, g.changePageNumber = function(f, b) {
        var m, I;
        this.element && (m = (I = (I = this.element) == null ? void 0 : I.querySelector(".dvs-cameraPager")) == null ? void 0 : I.querySelector(".dvs-curPage"), I = I == null ? void 0 : I.querySelector(".dvs-totalPage"), m.innerText = String(f + 1), I.innerText = String(b));
      }, g.changeStatus = function(f, b) {
        var m, I;
        this.element && (m = (I = (I = this.element) == null ? void 0 : I.querySelector(".dvs-cameraPager")) == null ? void 0 : I.querySelector(".dvs-previousPage"), I = I == null ? void 0 : I.querySelector(".dvs-nextPage"), 0 <= f ? (m.classList[f <= 0 ? "add" : "remove"](ce.disable), I.classList[b === f + 1 ? "add" : "remove"](ce.disable)) : (m.classList.add(ce.disable), I.classList.add(ce.disable)));
      }, g.handlePageByUid = function() {
        var f = C(p().mark(function b(m, I) {
          var x, D, B, X, Q, ve, ke, dt, et;
          return p().wrap(function($e) {
            for (; ; )
              switch ($e.prev = $e.next) {
                case 0:
                  if (this.isDestroyed)
                    return $e.abrupt("return");
                  $e.next = 2;
                  break;
                case 2:
                  if (this._isHandlingPageUid)
                    return this._nextHandlePageUid = m, $e.abrupt("return");
                  $e.next = 5;
                  break;
                case 5:
                  return this._isHandlingPageUid = !0, x = this._dcs, D = m, this._editUid != D && (this.setCurPageId(D), this.setCurImageData(null)), x != null && x.showLoading("handle page by uid"), $e.prev = 10, $e.next = 13, this.initOrigDataByUid(D);
                case 13:
                  if (B = (B = this._dvsWrapper) == null ? void 0 : B.getCustomDataSync(D)) {
                    $e.next = 21;
                    break;
                  }
                  if (!(Q = this.getViewerByUid(this._viewerId))) {
                    $e.next = 21;
                    break;
                  }
                  if ((D = Q.getUidByIndex(0)) && (B = (Q = this._dvsWrapper) == null ? void 0 : Q.getCustomDataSync(D), this.setCurPageId(D)), B) {
                    $e.next = 21;
                    break;
                  }
                  return $e.abrupt("return");
                case 21:
                  if (X = B.detectArea, Q = B.filterValue, dt = B.resBlob, ve = Ne(x, Q), Q && ve == Q && dt || this.SetFilterDirty(!0), !X || !Q || this._filterDirty) {
                    $e.next = 29;
                    break;
                  }
                  $e.next = 44;
                  break;
                case 29:
                  return X || (this.setCurImageData(null), this.SetFilterDirty(!0)), $e.next = 32, this.getCurImageData(D);
                case 32:
                  if ((ke = $e.sent) && this._filterDirty)
                    return $e.next = 36, Xt(ke);
                  $e.next = 42;
                  break;
                case 36:
                  return dt = $e.sent, $e.next = 39, x.filterHandlerByIImageData(ke, dt, ve);
                case 39:
                  return et = $e.sent, $e.next = 42, no(et, I, D, !1, { resBlob: et, filterValue: ve, bitDepth: et.imageBitDepth });
                case 42:
                  this._filterDirty = !1, this.setFilterDropDownDirty();
                case 44:
                  return $e.prev = 44, x != null && x.hideLoading("handle page by uid"), this._isHandlingPageUid = !1, $e.finish(44);
                case 48:
                  if (this._nextHandlePageUid)
                    return et = this._nextHandlePageUid, this._nextHandlePageUid = null, $e.next = 53, this.handlePageByUid(et, this._dvs);
                  $e.next = 53;
                  break;
                case 53:
                case "end":
                  return $e.stop();
              }
          }, b, this, [[10, , 44, 48]]);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.setCurImageData = function(f) {
        this._curImageData && delete this._curImageData.imageData, this._curImageData = f;
      }, g.getCurImageData = function() {
        var f = C(p().mark(function b(m) {
          var I, x, D, B, X, Q, ve, ke, dt;
          return p().wrap(function(et) {
            for (; ; )
              switch (et.prev = et.next) {
                case 0:
                  if (this.isDestroyed)
                    return et.abrupt("return");
                  et.next = 2;
                  break;
                case 2:
                  if (I = this._dcs, !(x = this._editUid == m)) {
                    et.next = 6;
                    break;
                  }
                  if (this._curImageData)
                    return et.abrupt("return", this._curImageData);
                  et.next = 6;
                  break;
                case 6:
                  if (D = (D = this._dvsWrapper) == null ? void 0 : D.getCustomDataSync(m)) {
                    et.next = 9;
                    break;
                  }
                  return et.abrupt("return");
                case 9:
                  if (B = D.oriBlob, X = D.detectArea, Q = D.angle, Q = Q === void 0 ? 0 : Q, I != null && I.showLoading("handle page by uid"), et.prev = 11, X)
                    return et.next = 15, rt(B);
                  et.next = 22;
                  break;
                case 15:
                  return ke = et.sent, et.next = 18, xt(ke, Q, X);
                case 18:
                  ve = et.sent, x && (this.setCurImageData(ve), this.SetFilterDirty(!0)), et.next = 32;
                  break;
                case 22:
                  return et.next = 24, rt(B, Q);
                case 24:
                  return ke = et.sent, et.next = 27, Ut(ke, I, !0, !1, !1);
                case 27:
                  dt = et.sent, D.detectArea = dt.detectArea, ve = dt.resImage, this.setCurPageId(m), x && (this.setCurImageData(ve), this.SetFilterDirty(!0));
                case 32:
                  return et.prev = 32, I != null && I.hideLoading("handle page by uid"), et.finish(32);
                case 35:
                  return et.abrupt("return", ve);
                case 36:
                case "end":
                  return et.stop();
              }
          }, b, this, [[11, , 32, 35]]);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.render = function() {
        var f = this.getViewerByUid(this._viewerId), b = f.getCurrentPageUids();
        b && 0 < b.length && setTimeout(function() {
          var m;
          f != null && (m = f.ui) != null && m.styleChange(), f != null && f.rotate(0);
        }, 0);
      }, g.setCurPageId = function(f) {
        this._editUid = f;
      }, g.setFilterDropDownDirty = function() {
        var f = (f = this.element) == null ? void 0 : f.querySelector("." + ce.BUTTON_PREFIX + "filter");
        f && (f = f == null ? void 0 : f.querySelector("." + ce.filterDropDown)) && f.setAttribute("data", "");
      }, g.SetFilterDirty = function(f) {
        this._filterDirty = !0;
      }, g.ClearFilterDirty = function() {
        this._filterDirty = !1;
      }, g.GetFilterDirty = function() {
        return this._filterDirty;
      }, g.clickCropButton = function() {
        var f = C(p().mark(function b() {
          var m, I, x, D, B, X;
          return p().wrap(function(Q) {
            for (; ; )
              switch (Q.prev = Q.next) {
                case 0:
                  if (this.options.documentEditorSettings.cropViewer.visibility.toString().toLowerCase() == "hidden")
                    return Q.abrupt("return");
                  Q.next = 2;
                  break;
                case 2:
                  if (this.getImageCount() <= 0)
                    return Q.abrupt("return");
                  Q.next = 4;
                  break;
                case 4:
                  if (m = this.getDvs(), I = this.getCurrentIndex(), !this._pageFileName) {
                    Q.next = 23;
                    break;
                  }
                  if (x = this.saveViewerAngle(), D = { fileName: this._pageFileName, initFileName: this._initFileName, curIndex: I, saveData: !0, fromInternal: this.options.fromInternal, documentEditorSettings: this.options.documentEditorSettings, nextButtonCss: ce.font + " " + ce.iconSave }, (B = this._dcs.getPreviousPage()) && B instanceof vo)
                    return X = this.getViewerByUid(this._viewerId), X = X.getCurrentPageUids(), B.enterReuseMode(D, X), B.gotoViewPage(I), Q.next = 17, this._dcs.navigateToPage(B);
                  Q.next = 18;
                  break;
                case 17:
                  return Q.abrupt("return");
                case 18:
                  return (X = new vo(D, m, this._dcs)).gotoViewPage(I), Q.next = 22, this._dcs.navigateToPage(X);
                case 22:
                  this.resetViewerAngleByIndexes(x);
                case 23:
                case "end":
                  return Q.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.updateFileDataToViewer = function() {
        var f = C(p().mark(function b() {
          var m, I, x, D, B, X, Q, ve, ke, dt, et, $e, gt, hn;
          return p().wrap(function(Tt) {
            for (; ; )
              switch (Tt.prev = Tt.next) {
                case 0:
                  if (!(m = this.getViewerByUid(this._viewerId))) {
                    Tt.next = 47;
                    break;
                  }
                  0 <= (I = m.getCurrentIndex()) && (x = m.getUidByIndex(I)), D = m.getCurrentPageUids(), Q = D.length, ke = !(ve = []), X = 0;
                case 7:
                  if (!(X < Q)) {
                    Tt.next = 18;
                    break;
                  }
                  if (mn(B = D[X]) && B != "") {
                    Tt.next = 11;
                    break;
                  }
                  return Tt.abrupt("continue", 15);
                case 11:
                  if (mn(dt = this._copyRefMap[B]) && dt != "") {
                    Tt.next = 14;
                    break;
                  }
                  return Tt.abrupt("continue", 15);
                case 14:
                  ve.push(dt);
                case 15:
                  X++, Tt.next = 7;
                  break;
                case 18:
                  this.backupImageDataFromUids(ve), X = 0;
                case 20:
                  if (!(X < Q)) {
                    Tt.next = 47;
                    break;
                  }
                  if (mn(B = D[X]) && B != "") {
                    Tt.next = 24;
                    break;
                  }
                  return Tt.abrupt("continue", 44);
                case 24:
                  if (ke = x == B, mn(et = this._copyRefMap[B]) && et != "") {
                    Tt.next = 28;
                    break;
                  }
                  return Tt.abrupt("continue", 44);
                case 28:
                  if ($e = this._backInfo.origDocumentData[et], gt = this._preEditPageCropData[et], !((hn = (hn = this._dvsWrapper) == null ? void 0 : hn.getCustomDataSync(B)) && gt && $e)) {
                    Tt.next = 44;
                    break;
                  }
                  if (!wt(gt.detectArea, $e.detectArea) || gt.angle != $e.angle) {
                    Tt.next = 35;
                    break;
                  }
                  Tt.next = 44;
                  break;
                case 35:
                  if (hn.angle = $e.angle, hn.detectArea = $e.detectArea, hn.resBlob && delete hn.resBlob, this._dvsWrapper.setCustomDataSync(B, hn), ke)
                    return m.resetByIndex(I, !1), this.setCurImageData(null), Tt.next = 44, this.handlePageByUid(x, this._dvs);
                  Tt.next = 44;
                  break;
                case 44:
                  X++, Tt.next = 20;
                  break;
                case 47:
                case "end":
                  return Tt.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.hide = function() {
        te.prototype.hide.call(this);
      }, g.show = function() {
        var f = C(p().mark(function b() {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  if (this.isDestroyed)
                    return this.hide(), I.abrupt("return");
                  I.next = 3;
                  break;
                case 3:
                  if (this._bSyncViewerDataFromBackupData)
                    return I.next = 6, this.updateFileDataToViewer();
                  I.next = 8;
                  break;
                case 6:
                  this._preEditPageCropData = null, this._bSyncViewerDataFromBackupData = !1;
                case 8:
                  return this._dcs.config.documentEditorSettings.visibility = "visible", I.next = 11, te.prototype.show.call(this);
                case 11:
                  (m = this.getViewerByUid(this._viewerId)) && 0 < m.getCurrentPageUids().length && this.render();
                case 13:
                case "end":
                  return I.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.clickDeleteButton = function() {
        var f = C(p().mark(function b() {
          var m, I, x, D, B, X;
          return p().wrap(function(Q) {
            for (; ; )
              switch (Q.prev = Q.next) {
                case 0:
                  if (this.isDestroyed)
                    return Q.abrupt("return");
                  Q.next = 2;
                  break;
                case 2:
                  if (this.getImageCount() <= 0)
                    return Q.abrupt("return");
                  Q.next = 4;
                  break;
                case 4:
                  if ((x = this._dcs).config.documentEditorSettings.remove.funcConfirmRemove)
                    return Q.next = 8, x.config.documentEditorSettings.remove.funcConfirmRemove();
                  Q.next = 11;
                  break;
                case 8:
                  if (Q.sent == 0)
                    return Q.abrupt("return");
                  Q.next = 11;
                  break;
                case 11:
                  if (m = this.getViewerByUid(this._viewerId), (I = m.getCurrentIndex()) < 0)
                    return Q.abrupt("return");
                  Q.next = 15;
                  break;
                case 15:
                  if (x = m.getUidByIndex(I), (X = this._dcs.getPreviousPage()) && X instanceof vo && X.exitReuseMode(), X = this.getRefUid(x, !0), D = !1, !mn(X) || X == "") {
                    Q.next = 29;
                    break;
                  }
                  if (!(B = this._initFileName)) {
                    Q.next = 29;
                    break;
                  }
                  if (0 <= (B = this._fileWrapper.getIndexByUidInFile(B, X)))
                    return X = this._dcs.getRemovePhotoCallback(), Q.next = 28, X(this._initFileName, B);
                  Q.next = 29;
                  break;
                case 28:
                  D = !0;
                case 29:
                  if (D || m.removeSync(I), 0 < m.currentPageCount)
                    return Q.next = 33, this.refreshViewer();
                  Q.next = 33;
                  break;
                case 33:
                case "end":
                  return Q.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.clickSaveButton = function() {
        var f = C(p().mark(function b() {
          var m, I, x, D, B, X, Q;
          return p().wrap(function(ve) {
            for (; ; )
              switch (ve.prev = ve.next) {
                case 0:
                  if (this.isDestroyed)
                    return ve.abrupt("return");
                  ve.next = 2;
                  break;
                case 2:
                  if (m = this.getDvs(), I = this._dcs, B = this.getViewerByUid(this._viewerId), I.showLoading("save button init"), x = !1, D = this.options.fromInternal, ve.prev = 7, this.saveViewerAngle(), (X = I.getPreviousPage()) && X instanceof vo && X.exitReuseMode(), this.setCurImageData(null), this.SetFilterDirty(!0), !(0 < (X = B.getCurrentPageUids()).length)) {
                    ve.next = 23;
                    break;
                  }
                  if (D)
                    return ve.next = 18, this._saveToWebTwain(X);
                  ve.next = 21;
                  break;
                case 18:
                  m.File.removeFile(this._backFileName), ve.next = 23;
                  break;
                case 21:
                  return ve.next = 23, this.saveFromExternal(X);
                case 23:
                  (Q = (B = document) == null ? void 0 : B.querySelector(".dvs-showImageArea")) && (Q.style.display == "" ? Q.style.display = "block" : Q.style.display = ""), _i(I), x = !0, I.exit(m);
                case 28:
                  return ve.prev = 28, I.hideLoading("save button init"), ve.finish(28);
                case 31:
                  if (x && I.closeAllPages)
                    return ve.next = 34, I.closeAllPages();
                  ve.next = 37;
                  break;
                case 34:
                  if (I.config.documentEditorSettings.funcConfirmExitAfterSave)
                    return ve.next = 37, I.config.documentEditorSettings.funcConfirmExitAfterSave(!D);
                  ve.next = 37;
                  break;
                case 37:
                case "end":
                  return ve.stop();
              }
          }, b, this, [[7, , 28, 31]]);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.ifOldDocumentDataChanged = function() {
        if (this._backInfo.origApplyToAll != this._dcs.filterApplyToAllValue)
          return !0;
        var f = this.getViewerByUid(this._viewerId), b = !1;
        if (f)
          for (var m = f.getCurrentPageUids(), I = 0; I < m.length; I++) {
            var x = m[I];
            if (mn(x) && x != "") {
              var D = this._copyRefMap[x];
              if (mn(D) && D != "") {
                if (D = this._backInfo.origDocumentData[D], !D)
                  return !0;
                var B = (B = this._dvsWrapper) == null ? void 0 : B.getCustomDataSync(x);
                if (B && (x = Rr(B, {}), B = x.oriBlob, x.angle = Jr(x.angle + f.getRotateAngle(I)), b = this.compareOldValueChanged(D, x, B)))
                  break;
              }
            }
          }
        return b;
      }, g.refreshViewer = function() {
        var f = C(p().mark(function b() {
          var m, I;
          return p().wrap(function(x) {
            for (; ; )
              switch (x.prev = x.next) {
                case 0:
                  if (m = this.getViewerByUid(this._viewerId), 0 <= (I = m.getCurrentIndex()))
                    return I = m.getUidByIndex(I), x.next = 6, this.handlePageByUid(I, this._dvs);
                  x.next = 7;
                  break;
                case 6:
                  m.render();
                case 7:
                case "end":
                  return x.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g._saveToWebTwain = function() {
        var f = C(p().mark(function b(m) {
          var I, x, D, B, X, Q, ve, ke;
          return p().wrap(function(dt) {
            for (; ; )
              switch (dt.prev = dt.next) {
                case 0:
                  I = this._dvs, x = this._dcs, D = x.getSavePhotoCallback(), B = 0;
                case 3:
                  if (!(B < m.length)) {
                    dt.next = 24;
                    break;
                  }
                  if (mn(X = m[B]) && X != "") {
                    dt.next = 7;
                    break;
                  }
                  return dt.abrupt("continue", 21);
                case 7:
                  if (Q = this._dvsWrapper.getDataRootSync(X)) {
                    dt.next = 10;
                    break;
                  }
                  return dt.abrupt("continue", 21);
                case 10:
                  return ve = !1, Q.customData && !Q.customData.resBlob && (ve = !0), dt.next = 14, ns(x, Q, ve);
                case 14:
                  return ve = dt.sent, ke = ve.filterBlob, delete ve.filterBlob, dt.next = 19, D([{ file: ve, iImageData: ke }]);
                case 19:
                  return dt.next = 21, I.DataControl.removeData(X);
                case 21:
                  B++, dt.next = 3;
                  break;
                case 24:
                case "end":
                  return dt.stop();
              }
          }, b, this);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.getFileName = function() {
        return this._backFileName;
      }, g.saveCurrentCropData = function() {
        var f = this.getViewerByUid(this._viewerId), b = {};
        if (f)
          for (var m, I, x, D = f.getCurrentPageUids(), B = D.length, X = 0; X < B; X++)
            mn(m = D[X]) && m != "" && (I = this._copyRefMap[m], x = (x = this._dvsWrapper) == null ? void 0 : x.getCustomDataSync(m), b[I] = x ? { detectArea: x.detectArea, angle: x.angle, filterValue: x.filterValue } : { detectArea: null, angle: 0, filterValue: Z.ORIGINAL });
        return b;
      }, g.saveFromExternal = function() {
        var f = C(p().mark(function b(m) {
          var I, x, D, B, X, Q, ve, ke, dt, et, $e;
          return p().wrap(function(gt) {
            for (; ; )
              switch (gt.prev = gt.next) {
                case 0:
                  if (this.isDestroyed)
                    return gt.abrupt("return");
                  gt.next = 2;
                  break;
                case 2:
                  I = this._dvs, x = this._dcs.getPreviousPageByPage(this), D = m.length - 1;
                case 5:
                  if (!(0 <= D)) {
                    gt.next = 37;
                    break;
                  }
                  if (mn(B = m[D]) && B != "") {
                    gt.next = 9;
                    break;
                  }
                  return gt.abrupt("continue", 34);
                case 9:
                  if (X = !0, Q = void 0, ve = (ve = this._dvsWrapper) == null ? void 0 : ve.getCustomDataSync(B)) {
                    gt.next = 13;
                    break;
                  }
                  return gt.abrupt("continue", 34);
                case 13:
                  if (mn(ke = this._copyRefMap[B]) && ke != "" && (Q = (Q = this._backInfo.initDocumentData[ke]) || this._backInfo.origDocumentData[ke]) && (this._dcs.filterApplyToAllValue ? this._dcs.filterApplyToAllValue != Z.ORIGINAL || mn(Q.filterValue) && Q.filterValue != Z.ORIGINAL || wt(Q.detectArea, ve.detectArea) && Q.angle == ve.angle && (X = !1) : wt(Q.detectArea, ve.detectArea) && Q.angle == ve.angle && ia(Q.filterValue, ve.filterValue) && (X = !1)), !X) {
                    gt.next = 34;
                    break;
                  }
                  if (dt = this._dvsWrapper.getDataRootSync(B)) {
                    gt.next = 19;
                    break;
                  }
                  return gt.abrupt("continue", 34);
                case 19:
                  if (dt.customData && dt.customData.oriBlob) {
                    gt.next = 22;
                    break;
                  }
                  return gt.next = 22, this.handlePageByUid(B, I);
                case 22:
                  return gt.next = 24, ns(this._dcs, dt, !0);
                case 24:
                  if (et = gt.sent, $e = et.filterBlob, delete et.filterBlob, x && x instanceof vo)
                    return gt.next = 30, x.updateUid(ke, $e, et);
                  gt.next = 32;
                  break;
                case 30:
                  gt.next = 34;
                  break;
                case 32:
                  return gt.next = 34, no($e, I, ke, !0, et);
                case 34:
                  D--, gt.next = 5;
                  break;
                case 37:
                case "end":
                  return gt.stop();
              }
          }, b, this);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.clickBackButton = function() {
        var f = C(p().mark(function b() {
          var m, I, x, D, B, X, Q, ve, ke, dt, et, $e, gt, hn;
          return p().wrap(function(Tt) {
            for (; ; )
              switch (Tt.prev = Tt.next) {
                case 0:
                  if (this.isDestroyed)
                    return Tt.abrupt("return");
                  Tt.next = 2;
                  break;
                case 2:
                  if (m = this._dcs, I = this.getCurrentIndex(), x = m.getPreviousPage(), D = this.ifOldDocumentDataChanged(), (ke = this.options.documentEditorSettings.funcConfirmExit) && ln(ke))
                    return dt = "", x && (dt = x.pageName), Tt.next = 12, ke(D, dt);
                  Tt.next = 19;
                  break;
                case 12:
                  if ((B = Tt.sent) == Ye)
                    return Tt.abrupt("return");
                  Tt.next = 17;
                  break;
                case 17:
                  if (B != Et && B != Je)
                    return Tt.abrupt("return");
                  Tt.next = 19;
                  break;
                case 19:
                  if (B === void 0 && (B = x ? Je : Et), !x) {
                    Tt.next = 23;
                    break;
                  }
                  Tt.next = 29;
                  break;
                case 23:
                  if (B != Et) {
                    Tt.next = 26;
                    break;
                  }
                  Tt.next = 29;
                  break;
                case 26:
                  if (B == Je)
                    return this.clickSaveButton(), Tt.abrupt("return");
                  Tt.next = 29;
                  break;
                case 29:
                  if (X = !1, Tt.prev = 30, ve = m.getCurrentPage(), _i(m), x && x instanceof vo)
                    return x.exitReuseMode(), B == Je ? (Q = this.saveViewerAngle(), this.resetViewerAngleByIndexes(Q), this.saveViewerCustomData()) : B == Et && (this.restoreViewerCustomData(), this.resetViewerAngle()), D && (ke = x.getViewerByUid(x.getViewerUid()), dt = ke.getCurrentPageUids(), Q = x.resetCropInfoByUids(dt), x.resetViewerAngleByIndexes(Q)), this._bSyncViewerDataFromBackupData = !0, this._preEditPageCropData = this.saveCurrentCropData(), x.gotoViewPage(I), Tt.next = 42, m.navigateBack(1, !1);
                  Tt.next = 47;
                  break;
                case 42:
                  et = Tt.sent, m.showLoading("close edit page"), et.length == 1 ? x.setNextViewerPage(et.pop()) : m.destroyRemovedPages(), Tt.next = 88;
                  break;
                case 47:
                  if (x && x instanceof qe)
                    return B == Je ? (Q = this.saveViewerAngle(), this.resetViewerAngleByIndexes(Q), this.saveViewerCustomData()) : B == Et && (this.restoreViewerCustomData(), this.resetViewerAngle()), Tt.next = 51, x.refreshPreviewWhenChanged();
                  Tt.next = 78;
                  break;
                case 51:
                  return Tt.next = 53, m.navigateBack(1, !1);
                case 53:
                  if (et = Tt.sent, m.showLoading("close edit page"), et.length == 1 ? x.setNextViewerPage(et.pop()) : m.destroyRemovedPages(), ($e = m.getStatus()) != "playing") {
                    Tt.next = 60;
                    break;
                  }
                  Tt.next = 74;
                  break;
                case 60:
                  if ($e != "paused") {
                    Tt.next = 64;
                    break;
                  }
                  m.resume(), Tt.next = 74;
                  break;
                case 64:
                  if (gt = x.element, gt = gt.children[1], (hn = this.options.scannerViewer) && hn.resolution && hn.resolution.defaultValue)
                    return Tt.next = 70, m.play(gt, hn.resolution.defaultValue.width, hn.resolution.defaultValue.height, hn.fullScreen);
                  Tt.next = 72;
                  break;
                case 70:
                  Tt.next = 74;
                  break;
                case 72:
                  return Tt.next = 74, m.play(gt);
                case 74:
                  m.emit("resetResolution"), m.emit("focusPage"), Tt.next = 88;
                  break;
                case 78:
                  if (m.showLoading("close edit page"), x)
                    return Tt.next = 82, m.navigateBack();
                  Tt.next = 85;
                  break;
                case 82:
                  ve.hide(), Tt.next = 88;
                  break;
                case 85:
                  X = !0, ve.hide(), m.exit(this._dvs);
                case 88:
                  return Tt.prev = 88, m.hideLoading("close edit page"), Tt.finish(88);
                case 91:
                  if (X && m.closeAllPages)
                    return Tt.next = 94, m.closeAllPages();
                  Tt.next = 94;
                  break;
                case 94:
                case "end":
                  return Tt.stop();
              }
          }, b, this, [[30, , 88, 91]]);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.insertImgByBlobItem = function() {
        var f = C(p().mark(function b(m, I) {
          var x, D, B, X, Q;
          return p().wrap(function(ve) {
            for (; ; )
              switch (ve.prev = ve.next) {
                case 0:
                  if (x = m.oriBlob, Q = m.detectArea, D = m.filterBlob || m.resBlob || x, X = ((X = I.config.documentEditorSettings) == null ? void 0 : X.filter) || {}, X = X.defaultValue, Q = { detectArea: Q, oriBlob: x, resBlob: D, filterValue: X, angle: 0 }, x = { oriData: D.imageData, metadata: ei(D), customData: Q }, X = I.config.scannerViewer || {}, D = X.maxDocuments, X = Q = D === void 0 ? 20 : D, D = this.getViewerByUid(this._viewerId), B = ((B = I.config.documentEditorSettings) == null ? void 0 : B.insert) || {}, B = B.position, B = (B === void 0 ? "before" : B) === "before" ? D.getCurrentIndex() : D.getCurrentIndex() + 1, !this.options.fromInternal || D.currentPageCount + 1 <= X && D.currentPageCount + 1 <= Q)
                    return X = D.currentPageCount, (B < 0 || X - 1 < B) && (B = -1), this._bInsertingImage = !0, Q = this._dcs.getInsertPhotoCallback(), ve.next = 17, Q(this._initFileName, x, B);
                  ve.next = 19;
                  break;
                case 17:
                  ve.next = 20;
                  break;
                case 19:
                  I.emit("video-error", Dt.MAX_IMAGES_IN_BUFFER_LIMIT);
                case 20:
                  return ve.abrupt("return", B);
                case 21:
                case "end":
                  return ve.stop();
              }
          }, b, this);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.insertFile = function() {
        var f = C(p().mark(function b(m) {
          var I, x, D, B, X;
          return p().wrap(function(Q) {
            for (; ; )
              switch (Q.prev = Q.next) {
                case 0:
                  if (I = this._dcs, this.isDestroyed)
                    return Q.abrupt("return");
                  Q.next = 3;
                  break;
                case 3:
                  if (Q.prev = 3, B = I.config.scannerViewer || {}, B = B.maxDocuments, x = B = B === void 0 ? 20 : B, D = this.getViewerByUid(this._viewerId), !this.options.fromInternal || D.currentPageCount + 1 <= x && D.currentPageCount + 1 <= B)
                    return Q.next = 10, Ie(m);
                  Q.next = 29;
                  break;
                case 10:
                  return x = Q.sent, Q.next = 13, rt(x);
                case 13:
                  return D = Q.sent, Q.next = 16, I.packageBlobItemFromIImageData(D, !0, !0, !0);
                case 16:
                  return B = Q.sent, Q.next = 19, this.insertImgByBlobItem(B, I);
                case 19:
                  if (X = Q.sent, 0 <= (this._iInsertingIndex = X))
                    return Q.next = 24, this.handlePageByIndex(X);
                  Q.next = 24;
                  break;
                case 24:
                  return Q.next = 26, I.navigateBack();
                case 26:
                  Q.sent, Q.next = 32;
                  break;
                case 29:
                  return I.emit("video-error", Dt.MAX_IMAGES_IN_BUFFER_LIMIT), Q.next = 32, I.navigateBack();
                case 32:
                  return Q.prev = 32, I.stop(), Q.finish(32);
                case 35:
                case "end":
                  return Q.stop();
              }
          }, b, this, [[3, , 32, 35]]);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.isInsertingImage = function() {
        return this._bInsertingImage;
      }, g.setInsertingImageIndex = function(f) {
        this._iInsertingIndex = f, this._bInsertingImage = !0;
      }, g.clearInserting = function() {
        var f = C(p().mark(function b() {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  if (this._bInsertingImage = !1, 0 <= (m = (m = this._iInsertingIndex) < 0 && 0 < this.getImageCount() ? 0 : m))
                    return this.setCurImageData(null), this.SetFilterDirty(!0), I.next = 8, this.handlePageByIndex(m);
                  I.next = 8;
                  break;
                case 8:
                  this._iInsertingIndex = -1;
                case 9:
                case "end":
                  return I.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.applyChanged = function() {
        var f = this.getViewerByUid(this._viewerId);
        if (f)
          for (var b = f.getCurrentPageUids(), m = 0; m < b.length; m++) {
            var I, x, D, B = b[m];
            !mn(B) || B == "" || (D = (D = this._dvsWrapper) == null ? void 0 : D.getCustomDataSync(B)) && (I = D.detectArea, x = D.angle, (B = this._copyRefMap[B]) && (D = D.filterValue, this._backInfo.origDocumentData[B] && (D = this._backInfo.origDocumentData[B].filterValue), this._backInfo.origDocumentData[B] = { detectArea: I, angle: x === void 0 ? 0 : x, filterValue: D }));
          }
      }, g.appendFilterDropdownImages = function() {
        var f = C(p().mark(function b(m) {
          var I, x, D, B, X, Q, ve, ke, dt, et, $e, gt, hn, Tt, Dn, Xn, vn, Nn, ir, kn;
          return p().wrap(function(En) {
            for (; ; )
              switch (En.prev = En.next) {
                case 0:
                  if (I = this._dcs, En.prev = 1, 0 <= (D = m.getCurrentIndex()))
                    return B = m.getUidByIndex(D), Q = this.GetFilterDirty(), En.next = 8, this.getCurImageData(B);
                  En.next = 10;
                  break;
                case 8:
                  X = En.sent, Q || this.ClearFilterDirty();
                case 10:
                  if (!B || !X) {
                    En.next = 48;
                    break;
                  }
                  ve = m.getRotateAngle(D), ir = this._dvsWrapper.getCustomDataSync(B), dt = (dt = I.config.documentEditorSettings) == null ? void 0 : dt.filter, kn = dt.defaultValue, kn = kn === void 0 ? "original" : kn, Dn = dt.applyToAll, dt = dt.valueList, ke = (ke = Dn && Dn.enableApplyToAll && mn(I.filterApplyToAllValue) && I.filterApplyToAllValue != "" ? I.filterApplyToAllValue : ke) || (ke = ir.filterValue) || kn, En.next = 19;
                  var Un = X, Ai = { source: Un, output: { orgImage: !1, previewImage: { quality: 85, width: 200, height: 200, returnType: N.Enum_ImageType.IT_BGRA, returnBlob: !1, nInterplationMethod: 5 } } };
                  return N.ImageProcWrapper.createImage(Ai).then(function(Ar) {
                    return Un.imageData = Ar.src, ar(Ar.preview), Ar.preview;
                  });
                case 19:
                  if (et = En.sent)
                    return En.next = 23, Xt(et);
                  En.next = 48;
                  break;
                case 23:
                  $e = En.sent, hn = !(gt = []), Tt = 0;
                case 27:
                  if (!(Tt < dt.length)) {
                    En.next = 43;
                    break;
                  }
                  if (Dn = dt[Tt], Xn = Dn.value, vn = Dn.label, Nn = void 0, Xn !== "original") {
                    En.next = 35;
                    break;
                  }
                  Nn = $e, hn = !0, En.next = 39;
                  break;
                case 35:
                  return En.next = 37, I.filterHandlerByIImageData(et, $e, Xn);
                case 37:
                  ir = En.sent, Nn = ir;
                case 39:
                  Nn && (kn = tt.createURL(Nn), gt.push({ value: Xn, url: kn, label: vn }));
                case 40:
                  Tt++, En.next = 27;
                  break;
                case 43:
                  et = null, hn || gt.unshift({ value: Z.ORIGINAL, url: tt.createURL($e), label: "Original" }), dt.some(function(Ar) {
                    return Ar.value === ke;
                  }) || (ke = Z.ORIGINAL), 0 < gt.length && (x = document.createDocumentFragment()), gt.forEach(function(Ar, Qr) {
                    var qi = document.createElement("li");
                    qi.innerHTML = '<img class="dynamsoft-camera-preFilter" src="' + Ar.url + '" style="transform:rotate(' + ve + 'deg)"><p>' + Ar.label + "</p>", x.appendChild(qi), qi.dataset.filterValue = Ar.value, Ar.value === ke && qi.classList.add(ce.filterSelectedItem);
                  });
                case 48:
                  return En.prev = 48, En.finish(48);
                case 50:
                  return En.abrupt("return", x);
                case 51:
                case "end":
                  return En.stop();
              }
          }, b, this, [[1, , 48, 50]]);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.initOrigDataByUid = function() {
        var f = C(p().mark(function b(m) {
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return I.next = 2, te.prototype.initOrigDataByUid.call(this, m);
                case 2:
                case "end":
                  return I.stop();
              }
          }, b, this);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.restoreViewerCurrentCustomData = function() {
        var f = [], b = this.getViewerByUid(this._viewerId), m = b.getCurrentIndex();
        if (0 <= m) {
          var I = b.getCurrentPageUids()[m], D = this._copyRefMap[I];
          if (!mn(D) || D == "")
            return;
          var x = (x = this._dvsWrapper) == null ? void 0 : x.getCustomDataSync(D), D = this.restoreOneViewerCustomData(b, I, m, x);
          D.changed && (this.setCurImageData(null), D.needReset && f.push(m));
        }
        return f;
      }, g.saveViewerAngle = function() {
        var f = [], b = this.getViewerByUid(this._viewerId);
        if (b)
          for (var m, I = b.getCurrentPageUids(), x = I.length, D = b.getCurrentIndex(), B = 0; B < x; B++)
            mn(m = I[B]) && m != "" && this.saveViewerOneAngle(b, B == D, B, m) && f.push(B);
        return f;
      }, g.resetViewerAngle = function() {
        var f = [], b = this.getViewerByUid(this._viewerId);
        if (b)
          for (var m = b.getCurrentPageUids().length, I = 0; I < m; I++)
            b.getRotateAngle(I) !== 0 && f.push(I);
        this.resetViewerAngleByIndexes(f);
      }, g.saveViewerOneAngle = function(D, b, B, I) {
        var x = !1, D = D.getRotateAngle(B), B = (B = this._dvsWrapper) == null ? void 0 : B.getCustomDataSync(I);
        return B && D != 0 && (B.angle = Jr(B.angle + D), B.resBlob && delete B.resBlob, b && this.setCurImageData(null), x = !0), x;
      }, W;
    }(pr);
    function di() {
      var g = this.options.documentEditorSettings, g = g === void 0 ? {} : g, te = g.headerStyle, te = te === void 0 ? {} : te, W = g.bodyStyle, g = g.footerStyle, g = g === void 0 ? {} : g;
      this.setDefaultBackgroundColors(te, W === void 0 ? {} : W, g), this.template = ['<header style="background:' + te.background + '" class="headerButtons"></header>', '<div class="' + ce.cvsContainer + '" style="width:100%;height:100%"></div>', '<footer style="background:' + g.background + '" class="footerButtons"></footer>'].join(""), this.className = ce.documentEditPage, this.createEl(), F(this, Eo)[Eo]();
    }
    function Ga() {
      return ts.apply(this, arguments);
    }
    function ts() {
      return (ts = C(p().mark(function te() {
        var W, g, f, b, m, I, x, D = this;
        return p().wrap(function(B) {
          for (; ; )
            switch (B.prev = B.next) {
              case 0:
                if (this.element) {
                  B.next = 2;
                  break;
                }
                return B.abrupt("return");
              case 2:
                b = this.options, b = b.documentEditorSettings, b = (b === void 0 ? {} : b).bodyStyle, b = b === void 0 ? {} : b, W = this._dvs, this._dcs, I = (I = this.element) == null ? void 0 : I.querySelector(".dvs-cameraPager"), x = I == null ? void 0 : I.querySelector(".dvs-previousPage"), g = I == null ? void 0 : I.querySelector(".dvs-nextPage"), (f = this.getViewerByUid(this._viewerId)).canvasBackground = b.background, f.bindView((b = this.element) == null ? void 0 : b.querySelector("." + ce.cvsContainer)), b = f.getCurrentTab(), x && g || (I.innerHTML = '<div class="dvs-previousPage ' + ce.font + " " + ce.iconArrow + " " + ce.headerfont + " " + ce.disable + `"></div>
      <p><span class="dvs-curPage">0</span>/<span class="dvs-totalPage">0</span></p>
      <div class="dvs-nextPage ` + ce.font + " " + ce.iconArrow + " " + ce.headerfont + " " + ce.disable + '"></div>', x = I == null ? void 0 : I.querySelector(".dvs-previousPage"), g = I == null ? void 0 : I.querySelector(".dvs-nextPage"), b && 0 <= b.total && (x.onclick = C(p().mark(function X() {
                  var Q;
                  return p().wrap(function(ve) {
                    for (; ; )
                      switch (ve.prev = ve.next) {
                        case 0:
                          if ((Q = f.getPrePageIndex()) != -1)
                            return Q = f.getUidByIndex(Q), ve.next = 5, D.handlePageByUid(Q, W);
                          ve.next = 6;
                          break;
                        case 5:
                          f.prevPage();
                        case 6:
                        case "end":
                          return ve.stop();
                      }
                  }, X);
                })), g.onclick = C(p().mark(function X() {
                  var Q;
                  return p().wrap(function(ve) {
                    for (; ; )
                      switch (ve.prev = ve.next) {
                        case 0:
                          if ((Q = f.getNextPageIndex()) != -1)
                            return Q = f.getUidByIndex(Q), ve.next = 5, D.handlePageByUid(Q, W);
                          ve.next = 6;
                          break;
                        case 5:
                          f.nextPage();
                        case 6:
                        case "end":
                          return ve.stop();
                      }
                  }, X);
                })), (m = this).viewerPagerEventId = f.on(le, function(X) {
                  m && X && (m.changePageNumber(X.cur, X.total), m.changeStatus(X.cur, X.total));
                }))), b && 0 <= (I = b.total) && 0 <= (x = f.getCurrentIndex()) && (this.changeStatus(x, I), this.changePageNumber(x, I)), (g = f.ui) != null && g._resizeViewer();
              case 16:
              case "end":
                return B.stop();
            }
        }, te, this);
      }))).apply(this, arguments);
    }
    function ns() {
      return rs.apply(this, arguments);
    }
    function rs() {
      return (rs = C(p().mark(function te(W, g, f) {
        var b, m, I, x, D, B, X, Q, ve, ke, dt, et, $e;
        return p().wrap(function(gt) {
          for (; ; )
            switch (gt.prev = gt.next) {
              case 0:
                if (B = g.customData, b = B.oriBlob, m = B.detectArea, x = B.filterValue, I = B.angle, I = I === void 0 ? 0 : I, B = B.bitDepth, B = B === void 0 ? 0 : B, ve = f, I = Jr(I), x = x, D = vi(b), W.filterApplyToAllValue && x && x != W.filterApplyToAllValue && (x = W.filterApplyToAllValue, ve = !0), !ve && m && x && I == 0)
                  return (ve = g.metadata ? Qi(g.metadata) : {}).imageData = g.oriData, 0 < B && (ve.imageBitDepth = B), W.emit("resetResolution"), gt.abrupt("return", { filterBlob: ve, detectArea: m, oriBlob: D, angle: 0, filterValue: x });
                gt.next = 14;
                break;
              case 14:
                if (m)
                  return gt.next = 17, rt(b);
                gt.next = 32;
                break;
              case 17:
                return B = gt.sent, gt.next = 20, xt(B, I, m);
              case 20:
                return X = gt.sent, Q = Ne(W, x), gt.next = 24, Xt(X);
              case 24:
                return ve = gt.sent, gt.next = 27, W.filterHandlerByIImageData(X, ve, Q);
              case 27:
                return dt = gt.sent, W.emit("resetResolution"), gt.abrupt("return", { filterBlob: dt, detectArea: m, oriBlob: D, angle: I, filterValue: Q });
              case 32:
                return ke = Ne(W, x), gt.next = 35, rt(b, I);
              case 35:
                return dt = gt.sent, gt.next = 38, W.packageBlobItemFromIImageData(dt, !0, !0, !1, ke);
              case 38:
                return $e = gt.sent, et = $e.detectArea, $e = $e.filterBlob, W.emit("resetResolution"), gt.abrupt("return", { filterBlob: $e, detectArea: et, oriBlob: D, angle: I, filterValue: ke });
              case 42:
              case "end":
                return gt.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    var is = function() {
      function te(g) {
        var f = this;
        this.mode = "normal", this.vertexes = [], this.midpoints = [], this.probePoints = [], this.slopeRatio = [], this.isCrop = !1, this.ctrlRadius = 4, this.sensorRadius = 4, this.defaultLineColor = "rgba(0,0,0,1)", this.defaultFirstPointColor = "rgba(255,0,0,1)", this.invalidLineColor = "rgba(255,0,0,1)", this.invalidFirstPointColor = "rgba(0,0,0,1)", this.lineColor = "rgba(0,0,0,1)", this.firstPointColor = "rgba(0,0,0,1)", this.pointFillColor = "rgba(255,255,255,0)", this.lineWidth = 1, this.dashLine = [4, 2], this.isPointSelected = !1, this.activeProbePoint = null, this.moveLeft = 0, this.moveTop = 0, this.isMoveBox = !1, this.width = 0, this.height = 0, this.imgWidth = 0, this.imgHeight = 0, this.leftEdge = 0, this.topEdge = 0, this.type = "bottomRight", this.keepAspectRatio = !1, this.aspectRatio = 0, this._startX = null, this._startY = null, this._lastX = null, this._lastY = null, this._lastWhr = 1, this.dpr = 1, Object.keys(g).forEach(function(b) {
          f[b] = g[b];
        }), this.resetBox();
      }
      var W = te.prototype;
      return W.getRect = function() {
        var m = this._getMaxPoint(), g = m.minX, f = m.maxX, b = m.minY, m = m.maxY;
        return { x: Math.floor(g), y: Math.floor(b), width: Math.floor(f - g), height: Math.floor(m - b) };
      }, W.resetBox = function() {
        this.midpoints = _a(this.vertexes), this.probePoints = this.vertexes.slice().concat(this.midpoints.slice()), this.slopeRatio = Sn(this.vertexes);
      }, W._getMaxPoint = function() {
        return { minX: Math.min(this.probePoints[0], this.probePoints[2], this.probePoints[4], this.probePoints[6]), maxX: Math.max(this.probePoints[0], this.probePoints[2], this.probePoints[4], this.probePoints[6]), minY: Math.min(this.probePoints[1], this.probePoints[3], this.probePoints[5], this.probePoints[7]), maxY: Math.max(this.probePoints[1], this.probePoints[3], this.probePoints[5], this.probePoints[7]) };
      }, W.checkPointPosition = function(g) {
        var I = this._getMaxPoint(), f = I.minX, b = I.maxX, m = I.minY, I = I.maxY, x = this.probePoints[2 * g], D = this.probePoints[2 * g + 1];
        return g < 4 ? x === b && D === I ? "se" : x === b && D === m ? "ne" : x === f && D === m ? "nw" : x === f && D === I ? "sw" : null : x === b ? "e" : D === I ? "s" : x === f ? "w" : D === m ? "n" : null;
      }, W.onStartHandler = function(g, f, b) {
        var m = this.isBoxSelected(g, f);
        (m = b !== void 0 ? b : m) !== null && (this._startX = g, this._startY = f, this._lastX = g, this._lastY = f, m === -1 ? (this.isPointSelected = !1, this.activeProbePoint = null, this.mode === "normal" && (this.isMoveBox = !0)) : (this.isPointSelected = !0, this.activeProbePoint = m, this.isMoveBox = !1), this.mode === "free" && 3 < m && (this.k1 = this.slopeRatio[(1 + (b = m - 4)) % 4], this.b1 = this.probePoints[(2 * b + 3) % 8] - this.k1 * this.probePoints[(2 * b + 2) % 8], this.k2 = this.slopeRatio[(3 + b) % 4], this.b2 = this.probePoints[(2 * b + 1) % 8] - this.k2 * this.probePoints[(2 * b + 0) % 8]));
      }, W.onMoveHandler = function(g, f, b) {
        if (this.isPointSelected || this.isMoveBox) {
          var m = this.probePoints.slice();
          if (this.isPointSelected) {
            var I = this.activeProbePoint;
            b !== void 0 && (I = b), this.mode === "normal" ? m = this._movePointNormal(m, I, g, f) : (m = this._movePointFree(m, I, g, f), this.slopeRatio = Sn(this.probePoints).slice(0, 4)), this.probePoints = m.slice(), this._checkRectConvexity(this.probePoints) ? (this.lineColor = this.defaultLineColor, this.firstPointColor = this.defaultFirstPointColor) : (this.lineColor = this.invalidLineColor, this.firstPointColor = this.invalidFirstPointColor);
          } else if (this.isMoveBox) {
            if (b = g - this._lastX, I = f - this._lastY, b == 0 && I == 0)
              return;
            m = this._moveBox(m, b, I), this.probePoints = m.slice();
          }
          b = _a(this.probePoints), this.probePoints = this.probePoints.slice(0, 8).concat(b), this.midpoints = b, this._lastX = g, this._lastY = f;
        }
      }, W.onEndHandler = function() {
        this.lineColor = this.defaultLineColor, this.firstPointColor = this.defaultFirstPointColor;
        var g, f = this._startX, b = this._startY, m = (this._startX = 0, this._startY = 0, this._lastX), I = this._lastY;
        (this.isPointSelected || this.isMoveBox) && (this.isPointSelected = !1, this.isMoveBox = !1, this.activeProbePoint = null, g = this._checkRectConvexity(this.probePoints), (f !== m || b !== I) && g || (this.probePoints = this.vertexes.slice().concat(this.midpoints)), this.vertexes = this.probePoints.slice(0, 8), this.midpoints = _a(this.probePoints), this.probePoints = this.probePoints.slice(0, 8).concat(this.midpoints), this.slopeRatio = Sn(this.probePoints).slice(0, 4));
      }, W._checkEdge = function(g, f) {
        return 0 <= g && g <= this.width && 0 <= f && f < this.height;
      }, W._movePointNormal = function(g, f, b, m) {
        b = Math.max(this.leftEdge, Math.min(this.width, b)), m = Math.max(this.topEdge, Math.min(this.height, m));
        var I = 0, x = 0;
        if (this.keepAspectRatio) {
          var B = this._getMaxPoint(), ve = B.minX, Q = B.maxX, D = B.minY, B = B.maxY, X = this.checkPointPosition(f), Q = (Q - ve) / (B - D), ve = (Q === 0 || Q === 1 / 0 || Q === -1 / 0 || Number.isNaN(Q) ? Q = this._lastWhr : this._lastWhr = Q, x = I = 0, "width");
          if (f < 4) {
            if (I = b - g[2 * f], x = m - g[2 * f + 1], I === 0 || x === 0)
              return g;
            ve = "width";
          } else if (B = f - 4, X === "e" ? (f = (1 + B) % 4, ve = "width") : X === "s" ? (f = B, ve = "height") : X === "w" ? (f = B, ve = "width") : X === "n" && (f = (1 + B) % 4, ve = "height"), I = b - g[2 * B], x = m - g[2 * B + 1], I === 0 || x === 0)
            return g;
          ve === "height" ? (I = x * Q, X !== "ne" && X !== "sw" && X !== "n" && X !== "w" || (I = -I)) : (x = I / Q, X !== "ne" && X !== "sw" && X !== "n" && X !== "w" || (x = -x)), D = g[2 * f] + I, B = g[2 * f + 1] + x, ve = (D < 0 ? (I = 0 - g[2 * f], x = 0) : D > this.width ? (I = this.width - g[2 * f], x = 0) : B < 0 ? (x = 0 - g[2 * f + 1], I = 0) : B > this.height && (x = this.height - g[2 * f + 1], I = 0), g[2 * f] += I, g[2 * f + 1] += x, (f + 1) % 4), Q = (f + 3) % 4, f % 2 ? (g[2 * ve] += I, g[2 * Q + 1] += x) : (g[2 * ve + 1] += x, g[2 * Q] += I);
        } else if (f < 4) {
          if (I = b - g[2 * f], x = m - g[2 * f + 1], I === 0 && x === 0)
            return g;
          g[2 * f] = b, g[2 * f + 1] = m, X = (f + 1) % 4, D = (f + 3) % 4, f % 2 ? (g[2 * X] = b, g[2 * D + 1] = m) : (g[2 * X + 1] = m, g[2 * D] = b);
        } else
          B = f - 4, ve = this.slopeRatio[B % 4], ve === 0 ? (g[(2 * B + 3) % 8] = m, g[(2 * B + 1) % 8] = m) : ve !== 1 / 0 && ve !== -1 / 0 || (g[(2 * B + 2) % 8] = b, g[(2 * B + 0) % 8] = b);
        return g;
      }, W._movePointFree = function(g, f, b, m) {
        b = Math.max(this.leftEdge, Math.min(this.width, b)), m = Math.max(this.topEdge, Math.min(this.height, m));
        var I = g.slice();
        if (f < 4) {
          var x = b - g[2 * f], D = m - g[2 * f + 1];
          if (x == 0 && D == 0)
            return g;
          g[2 * f] = b, g[2 * f + 1] = m;
        } else {
          var x = f - 4, D = this.slopeRatio[x % 4], f = m - D * b, B = -f / D, X = f, Q = g[(2 * x + 9) % 8] - D * g[(2 * x + 8) % 8], ve = -Q / D, ke = this.k1, dt = this.b1, et = this.k2, $e = this.b2;
          D === 0 ? (g[(2 * x + 3) % 8] = m, ke !== 1 / 0 && ke !== -1 / 0 && (g[(2 * x + 2) % 8] = (m - dt) / ke), g[(2 * x + 1) % 8] = m, et !== 1 / 0 && et !== -1 / 0 && (g[(2 * x + 0) % 8] = (m - $e) / et)) : D === 1 / 0 || D === -1 / 0 ? (g[(2 * x + 2) % 8] = b, g[(2 * x + 3) % 8] = ke * b + dt, g[(2 * x + 0) % 8] = b, g[(2 * x + 1) % 8] = et * b + $e) : (ke === 0 ? g[(2 * x + 2) % 8] += B - ve : ke === 1 / 0 || ke === -1 / 0 ? g[(2 * x + 3) % 8] += X - Q : (g[(2 * x + 2) % 8] = (dt - f) / (D - ke), g[(2 * x + 3) % 8] = (D * dt - ke * f) / (D - ke)), et === 0 ? g[(2 * x + 0) % 8] += B - ve : et === 1 / 0 || et === -1 / 0 ? g[(2 * x + 1) % 8] += X - Q : (g[(2 * x + 0) % 8] = ($e - f) / (D - et), g[(2 * x + 1) % 8] = (D * $e - et * f) / (D - et)));
          for (var gt = 0; gt < 4; gt++) {
            var hn = g[2 * gt], Tt = g[2 * gt + 1];
            if (hn < this.leftEdge - 0.5 || hn > this.width + 0.5 || Tt < this.topEdge - 0.5 || Tt > this.height + 0.5)
              return I;
          }
        }
        return g;
      }, W._moveBox = function(g, f, b) {
        if (this.mode === "normal") {
          var m = Math.min(g[0], g[2], g[4], g[6]), I = Math.max(g[0], g[2], g[4], g[6]), x = Math.min(g[1], g[3], g[5], g[7]), D = Math.max(g[1], g[3], g[5], g[7]);
          I + (f = m + f < 0 ? -m : f) > this.width && (f = this.width - I), D + (b = x + b < 0 ? -x : b) > this.height && (b = this.height - D);
          for (var B = 0; B < 4; B++)
            g[2 * B] += f, g[2 * B + 1] += b;
        }
        return g;
      }, W._isPointOnBox = function(g, f) {
        var b, m, I, x;
        return this.mode === "normal" && (b = (x = this._getMaxPoint()).minX, m = x.maxX, I = x.minY, x = x.maxY, b <= g && g <= m && I <= f && f <= x);
      }, W.isBoxSelected = function(m, f) {
        var b = this._isPointOnBox(m, f), m = this.isCtrlPointSelected(m, f);
        return m !== null ? m : b ? -1 : null;
      }, W.isCtrlPointSelected = function(g, f) {
        var b = this.sensorRadius, D = this._getMaxPoint(), m = D.minX, I = D.maxX, x = D.minY, D = D.maxY, B = Math.min(Math.max(b, 0.1 * (I - m)), 3 * b) * this.dpr, X = Math.min(Math.max(b, 0.1 * (D - x)), 3 * b) * this.dpr, Q = 8;
        this.mode === "free" && (Q = 8);
        for (var ve = 0; ve < Q; ve++) {
          var ke = this.probePoints[2 * ve], dt = this.probePoints[2 * ve + 1];
          if (g <= ke + B && ke - B <= g && f <= dt + X && dt - X <= f)
            return ve;
        }
        return null;
      }, W._checkRectConvexity = function(g) {
        var f = (g[6] - g[0]) * (g[3] - g[1]) - (g[7] - g[1]) * (g[2] - g[0]), b = (g[0] - g[2]) * (g[5] - g[3]) - (g[1] - g[3]) * (g[4] - g[2]), m = (g[2] - g[4]) * (g[7] - g[5]) - (g[3] - g[5]) * (g[6] - g[4]), I = (g[4] - g[6]) * (g[1] - g[7]) - (g[5] - g[7]) * (g[0] - g[6]);
        if (f * b * m * I < 0)
          return !1;
        var x = g.slice().concat(g.slice(0, 2));
        if (this.slopeRatio.length) {
          for (var D = 0; D < 2; D++)
            if (this.slopeRatio[D] !== this.slopeRatio[D + 2] && function(B, X, Q, ve) {
              if (function(Xn, vn, Nn, ir) {
                var kn = Math.min, En = Math.max;
                return kn(Xn[0], vn[0]) <= En(Nn[0], ir[0]) && kn(Nn[0], ir[0]) <= En(Xn[0], vn[0]) && kn(Xn[1], vn[1]) <= En(Nn[1], ir[1]) && kn(Nn[1], ir[1]) <= En(Xn[1], vn[1]);
              }(B, X, Q, ve) && function(Xn, vn, Nn, ir) {
                var kn, En;
                if (kn = Xn[0] * (Nn[1] - vn[1]) + vn[0] * (Xn[1] - Nn[1]) + Nn[0] * (vn[1] - Xn[1]), En = Xn[0] * (ir[1] - vn[1]) + vn[0] * (Xn[1] - ir[1]) + ir[0] * (vn[1] - Xn[1]), !(0 <= (kn ^ En) && kn !== 0 && En !== 0) && (kn = Nn[0] * (Xn[1] - ir[1]) + ir[0] * (Nn[1] - Xn[1]) + Xn[0] * (ir[1] - Nn[1]), En = Nn[0] * (vn[1] - ir[1]) + ir[0] * (Nn[1] - vn[1]) + vn[0] * (ir[1] - Nn[1]), !(0 <= (kn ^ En) && kn !== 0 && En !== 0)))
                  return 1;
              }(B, X, Q, ve)) {
                var ke, dt;
                if (ke = (ve[0] - Q[0]) * (B[1] - X[1]) - (X[0] - B[0]) * (Q[1] - ve[1]), dt = (B[1] - Q[1]) * (X[0] - B[0]) * (ve[0] - Q[0]) + Q[0] * (ve[1] - Q[1]) * (X[0] - B[0]) - B[0] * (X[1] - B[1]) * (ve[0] - Q[0]), ke == 0 || dt === 0) {
                  var et = Kn(B, X), $e = Kn(Q, ve), gt = et[0], hn = et[1], Tt = $e[0], Dn = $e[1];
                  if (hn[0] === Tt[0] && hn[1] === Tt[1])
                    return hn;
                  if (gt[0] === Dn[0] && gt[1] === Dn[1])
                    return gt;
                  if (Cn(hn, $e) && Cn(Tt, et))
                    return [Tt, hn];
                  if (Cn(gt, $e) && Cn(Dn, et))
                    return [gt, Dn];
                  if (Cn(gt, $e) && Cn(hn, $e))
                    return [gt, hn];
                  if (Cn(Tt, $e) && Cn(Dn, $e))
                    return [Tt, Dn];
                }
                return et = dt / ke, gt = (ke = (B[0] - X[0]) * (ve[1] - Q[1]) - (X[1] - B[1]) * (Q[0] - ve[0]), (dt = X[1] * (B[0] - X[0]) * (ve[1] - Q[1]) + (ve[0] - X[0]) * (ve[1] - Q[1]) * (B[1] - X[1]) - ve[1] * (Q[0] - ve[0]) * (X[1] - B[1])) / ke), [et, gt];
              }
              return !1;
            }(x.slice(2 * D, 2 * D + 2), x.slice(2 * D + 2, 2 * D + 4), x.slice(2 * D + 4, 2 * D + 6), x.slice(2 * D + 6, 2 * D + 8)))
              return !1;
        }
        return 0 < f * b * m * I;
      }, te;
    }();
    function _a(te) {
      for (var W = te.slice(0, 8).concat(te[0], te[1]), g = [], f = 0; f < 4; f++) {
        var b = (W[2 * f] + W[2 * f + 2]) / 2, m = (W[2 * f + 1] + W[2 * f + 3]) / 2;
        g.push(b, m);
      }
      return g;
    }
    function Sn(te) {
      for (var W = [], g = null, f = te.slice(0, 8).concat(te[0], te[1]), b = 0; b < 4; b++)
        g = f[2 * b + 3] - f[2 * b + 1] == 0 && f[2 * b + 2] - f[2 * b] == 0 ? 0 : f[2 * b + 2] - f[2 * b] == 0 ? 1 / 0 : (f[2 * b + 3] - f[2 * b + 1]) / (f[2 * b + 2] - f[2 * b]), W.push(g);
      return W;
    }
    function Kn(te, W) {
      return te[0] === W[0] ? te[1] < W[1] ? [te, W] : [W, te] : te[0] < W[0] ? [te, W] : [W, te];
    }
    function Cn(te, W) {
      return W[0][0] === W[1][0] ? te[1] >= W[0][1] && te[1] <= W[1][1] : te[0] >= W[0][0] && te[0] <= W[1][0];
    }
    var lr = function() {
      function te(g) {
        this._cvs = null, this._cropBox = null, this._isCropping = !1, this._zoom = 1, this._edgeMargin = 10, this._cropStyle = { cornerColor: "#FE8E14", lineColor: "#FE8E14", lineWidth: 2, lineDash: "solid" }, this._cvs = g, this._initEvent();
      }
      var W = te.prototype;
      return W.getEdgeMargin = function() {
        return this._edgeMargin;
      }, W.dispose = function() {
        this._cvs.removeEventListener("touchstart", null), this._cvs.removeEventListener("touchmove", null), this._cvs.removeEventListener("touchend", null), this._cvs.removeEventListener("mousedown", null), document.removeEventListener("mousemove", null), document.removeEventListener("mouseup", null), this._cvs = null, this.onAreaChanged = null;
      }, W.setCropMode = function(g) {
        this._isCropping = g;
      }, W.getCropMode = function() {
        return this._isCropping;
      }, W.clearCropBox = function() {
        this._cropBox = null, this._cvs.getContext("2d", { willReadFrequently: !0 }).clearRect(0, 0, this._cvs.width, this._cvs.height);
      }, W.setZoom = function(g) {
        this._zoom = g;
      }, W.setCropArea = function(g, f) {
        var b, m, I, x, D, B;
        g && (b = f.relLeft, m = f.relTop, D = f.relWidth, f.relHeight, this._limitArea = f, f = this._cvs, I = this._zoom, x = this._edgeMargin, B = D = D / I, g = vr(_r(g.map(function(X, Q) {
          return Q % 2 == 0 ? X / I + b + x : X / I + m + x;
        }))), this._cropBox = new is({ vertexes: g, width: f.width - x - b, height: f.height - x - m, leftEdge: x + b, topEdge: x + m, imgWidth: D, imgHeight: B, mode: "free", dpr: window.devicePixelRatio }), this._isCropping && this._drawCropArea());
      }, W.getCropArea = function() {
        var g = this._cropBox, f = this._zoom, b = this._edgeMargin, m = this._limitArea;
        return g ? vr(_r(g.vertexes.map(function(I, x) {
          return x % 2 == 0 ? (I - m.relLeft - b) * f : (I - m.relTop - b) * f;
        }))) : [];
      }, W.setCropStyle = function(g) {
        Rr(g, this._cropStyle), this._isCropping && this._drawCropArea();
      }, W.resize = function(g) {
        var f, b, m = this._cropBox, I = this._edgeMargin;
        m && (f = (b = this._cvs).width, b = b.height, m.width = f - I - g.relLeft, m.height = b - I - g.relTop, m.leftEdge = I + g.relLeft, m.topEdge = I + g.relTop, m.imgWidth = g.relWidth, m.imgHeight = g.relHeight);
      }, W._initEvent = function() {
        var g = this, f = this._cvs;
        function b(x) {
          this._cvsBoundingRect = this._cvs.getBoundingClientRect();
          var D = this._cropBox, B = this._cvsBoundingRect;
          D && (D = B.left, B = B.top, this._cropBox.onStartHandler(x.clientX - D, x.clientY - B));
        }
        function m(x) {
          var D, B;
          this._cropBox && this._cropBox.isPointSelected && (D = (B = this._cvsBoundingRect).left, B = B.top, this._cropBox.onMoveHandler(x.clientX - D, x.clientY - B), this._drawCropArea());
        }
        function I() {
          var x;
          this._cropBox && this._cropBox.isPointSelected && (this._cropBox.onEndHandler(), this._drawCropArea(), (x = this.onAreaChanged) != null && x.call(this, this.getCropArea()));
        }
        f.addEventListener("touchstart", function(x) {
          x = x.touches, 1 < x.length || b.call(g, x[0]);
        }, { passive: !1 }), f.addEventListener("mousedown", b.bind(this)), f.addEventListener("touchmove", function(x) {
          var D = x.touches;
          1 < D.length || g._cropBox && g._cropBox.isPointSelected && (m.call(g, D[0]), x.preventDefault());
        }, { passive: !1 }), document.addEventListener("mousemove", m.bind(this)), f.addEventListener("touchend", I.bind(this)), document.addEventListener("mouseup", I.bind(this));
      }, W._drawCropArea = function() {
        var g = this._cropBox, f = this._cvs, b = this._cropStyle;
        if (g) {
          var m = g.probePoints.slice(), g = f.getContext("2d", { willReadFrequently: !0 }), I = (g.clearRect(0, 0, f.width, f.height), b.lineWidth);
          if (I % 2 != 0)
            for (var x = 0; x < m.length; x++)
              m[x] = Math.floor(m[x]) - I / 2;
          var dt = m.slice(0, 8), D = (g.fillStyle = "rgba(255,255,255,0)", g.fillRect(0, 0, f.width, f.height), g), B = dt, f = b;
          D.save(), D.beginPath(), D.strokeStyle = f.lineColor, D.lineWidth = f.lineWidth, f.lineDash === "dashed" && D.setLineDash([5, 5]), D.moveTo(B[0], B[1]);
          for (var X = 0; X < B.length; X += 2) {
            var Q = (X + 2) % 8, Q = [B[Q], B[1 + Q]];
            D.lineTo.apply(D, Q);
          }
          D.closePath(), D.globalCompositeOperation = "destination-out", D.fillStyle = "rgba(0,0,0)", D.fill(), D.globalCompositeOperation = "source-over", D.stroke(), D.closePath(), D.restore();
          var ve = g, ke = m, dt = b, et = Math.floor(8);
          ve.save(), ve.strokeStyle = dt.cornerColor, ve.lineWidth = dt.lineWidth;
          for (var $e = 0; $e < ke.length; $e += 2) {
            var gt = [ke[$e], ke[$e + 1]];
            ve.clearRect(gt[0] - et / 2, gt[1] - et / 2, et, et), ve.strokeRect(gt[0] - et / 2, gt[1] - et / 2, et, et);
          }
          ve.restore();
        }
      }, W.setFullArea = function() {
        var g, f, b, m;
        this._cropBox && (g = (m = this._cropBox).imgWidth, f = m.imgHeight, b = m.leftEdge, m = m.topEdge, this._cropBox.vertexes = [b, m, b + g, m, b + g, m + f, b, m + f], this._cropBox.resetBox(), this._isCropping && this._drawCropArea());
      }, W.checkFull = function() {
        if (!this._cropBox)
          return !1;
        var g = this.getInnerCropArea(), f = this._cropBox.getRect();
        return Vt(g, f.width, f.height);
      }, W.getInnerCropArea = function() {
        var g = this._cropBox, f = this._edgeMargin, b = this._limitArea;
        return g ? vr(_r(g.vertexes.map(function(m, I) {
          return I % 2 == 0 ? m - b.relLeft - f : m - b.relTop - f;
        }))) : [];
      }, te;
    }(), Vn = function() {
      function te(g, f) {
        this._obElement = null, this._callback = null, this._unbindFn = null, this._callback = f, this._obElement = g, this._initObserver();
      }
      var W = te.prototype;
      return W._initObserver = function() {
        var g, f, b = this._callback, m = this._obElement;
        window.ResizeObserver !== void 0 ? ((g = new window.ResizeObserver(function(I) {
          I = I[0], b(I.contentRect);
        })).observe(m), this._unbindFn = function() {
          g.unobserve(m), g.disconnect(), g = null;
        }) : ((f = document.createElement("iframe")).id = "fm", f.style.cssText = "width:100%;height:100%;z-index:-1;", f.onresize = function() {
          var I = m.getBoundingClientRect();
          b(I);
        }, this._unbindFn = function() {
          f.remove(), f = null;
        });
      }, W.dispose = function() {
        this._unbindFn(), this._unbindFn = null, this._callback = null, this._obElement = null;
      }, W.getCallback = function() {
        return this._callback;
      }, te;
    }(), wr = 0, rr = 1, Dr = 2, Do = 3, Wi = function() {
      function te() {
        this._cropInfoObjs = {};
      }
      var W = te.prototype;
      return W.getCropInfo = function(g) {
        return this._cropInfoObjs[g] || (this._cropInfoObjs[g] = {}), this._cropInfoObjs[g];
      }, W.destroy = function() {
        if (this._cropInfoObjs)
          for (var g in this._cropInfoObjs)
            delete this._cropInfoObjs[g];
        this._cropInfoObjs = null;
      }, te;
    }(), Ir = O("getCropInfo"), ti = O("initCanvas"), Pi = O("initToggleButtonEvent"), lo = O("getImageArea"), ji = O("initElement"), ho = O("initViewer"), vo = function(te) {
      function W(f, b, m) {
        return f = te.call(this, f, b, m) || this, Object.defineProperty(H(f), ho, { value: ps }), Object.defineProperty(H(f), ji, { value: Us }), Object.defineProperty(H(f), lo, { value: Vs }), Object.defineProperty(H(f), Pi, { value: yo }), Object.defineProperty(H(f), ti, { value: Qo }), Object.defineProperty(H(f), Ir, { value: va }), f.viewerPagerEventId = null, f.cropMng = null, f._resizeMng = null, f._cropInfoHelper = null, f._renderEvents = [], f._imageArea = null, f._reused = !1, f._bk = { _cropInfoHelper: null, _backInfo: null, _backFileName: null, _copyRefMap: null, _customData: null }, f._renderType = rr, f.pageName = mt, F(H(f), ji)[ji](), f;
      }
      Y(W, te);
      var g = W.prototype;
      return g.isCropPage = function() {
        return !0;
      }, g.enterReuseMode = function(f, b) {
        var m, I, x, D, B = this.getViewerByUid(this._viewerId), X = B.getCurrentPageUids(), Q = 0;
        if (!this._reused) {
          for (this._reused = !0, this._bk._cropInfoHelper = this._cropInfoHelper, this._bk._backInfo = this._backInfo, this._bk._backFileName = this._backFileName, this._bk._copyRefMap = this._copyRefMap, this._bk._customData = {}, Q = 0; Q < X.length; Q++) {
            var ve = X[Q], ke = (ke = this._dvsWrapper) == null ? void 0 : ke.getCustomDataSync(ve);
            ke && (this._bk._customData[ve] = { detectArea: ke.detectArea, angle: ke.angle });
          }
          this._cropInfoHelper = new Wi(), this._copyRefMap = {}, this._backInfo = { origApplyToAll: "", origDocumentData: {}, initDocumentData: {} }, this._backFileName = f.fileName;
        }
        for (this.backupImageDataFromUids(b), Q = 0; Q < X.length; Q++)
          ve = X[Q], m = b[Q], this._copyRefMap[ve] = m, (I = (I = this._dvsWrapper) == null ? void 0 : I.getCustomDataSync(ve)) && (x = (x = this._dvsWrapper) == null ? void 0 : x.getCustomDataSync(m)) && (I.detectArea = x.detectArea, I.angle = x.angle, F(this, Ir)[Ir](ve).alreadyHandle = !1, B.resetByIndex(Q, !1));
        f.nextButtonCss && (((D = this.element) == null ? void 0 : D.querySelector("." + ce.BUTTON_PREFIX + "save i")).className = f.nextButtonCss), this._editUid = null, this.render();
      }, g.render = function() {
        var f, b = this.getViewerByUid(this._viewerId), m = b.getCurrentPageUids();
        m && 0 < m.length && (f = this, setTimeout(function() {
          var I;
          b != null && (I = b.ui) != null && I.styleChange(), f._renderType = rr, b.rotate(0), f._resizeMng && ln(I = f._resizeMng.getCallback()) && I(null);
        }, 0));
      }, g.exitReuseMode = function() {
        var f;
        if (this._reused) {
          var b = this.getViewerByUid(this._viewerId), m = b.getCurrentPageUids(), I = 0;
          for (this._cropInfoHelper = this._bk._cropInfoHelper, this._backInfo = this._bk._backInfo, this._backFileName = this._bk._backFileName, this._copyRefMap = this._bk._copyRefMap, I = 0; I < m.length; I++) {
            var x, D = m[I], B = (B = this._dvsWrapper) == null ? void 0 : B.getCustomDataSync(D);
            B && this._bk._customData && (x = this._bk._customData[D]) && (B.detectArea = x.detectArea, B.angle = x.angle), F(this, Ir)[Ir](D).alreadyHandle = !1, b.resetByIndex(I, !1);
          }
          this._bk._cropInfoHelper = null, this._bk._backInfo = null, this._bk._backFileName = null, this._bk._copyRefMap = null, this._bk._customData = null, this._editUid = null, this._reused = !1;
        }
        ((f = this.element) == null ? void 0 : f.querySelector("." + ce.BUTTON_PREFIX + "save i")).className = ce.font + " " + ce.iconNext;
      }, g.getCurrentArea = function() {
        if (this.cropMng) {
          var f = this.cropMng.getCropArea();
          if (f && 0 < f.length)
            return f;
        }
        return F(this, Ir)[Ir](this._editUid).savedArea;
      }, g.getEditUid = function() {
        return this._editUid;
      }, g.setPageFilename = function() {
        this._pageFileName = ["__dynamsoft_crop_files", ht(6)].join("_");
      }, g.initImageCropInfoByUid = function(f) {
        var b, m, I, x, D, B, X;
        this.isDestroyed || mn(f) && f != "" && (b = F(this, Ir)[Ir](f), (m = (m = this._dvsWrapper) == null ? void 0 : m.getCustomDataSync(f)) && (I = (I = this._dvsWrapper) == null ? void 0 : I.getMetaDataSync(f), f = !1, X = B = 0, m.detectArea ? x = m.detectArea : (x = [], B = I.width, X = I.height, m.detectArea = x = 0 < B && 0 < X ? [0, 0, B, 0, B, X, 0, X] : x), m.angle ? D = Jr(m.angle) : m.angle = D = 0, I && (B = I.width, X = I.height, 0 < B && 0 < X && (b.w = B, b.h = X), f = Vt(x, B, X)), b.fullArea = f, b.savedArea = x, b.angle = D));
      }, g._updateViewerSize = function() {
        var f, b, m;
        !this.isDestroyed && this.element && (b = (b = this.element) == null ? void 0 : b.querySelector("." + ce.cvsContainer)) && (f = (b = b.getBoundingClientRect()).width, b = b.height, m = (m = this.element) == null ? void 0 : m.querySelector(".dvs-WebViewer"), f -= 2 * this.cropMng.getEdgeMargin(), b -= 2 * this.cropMng.getEdgeMargin(), m.width = f, m.height = b, m.style.cssText = "width:" + f + "px;height:" + b + "px");
      }, g._resetCropCanvas = function() {
        var f = (f = this.element) == null ? void 0 : f.querySelector(".dvs-cropper"), f = (f && (f.width = 1, f.height = 1, f.style.cssText = "width:1px !important;height:1px !important"), (f = this.element) == null ? void 0 : f.querySelector(".dvs-canvasEventLayer"));
        f && (f.width = 1, f.height = 1, f.style.cssText = "width:1px !important;height:1px !important;background:rgba(255,255,255,0)");
      }, g._listenResize = function() {
        var f = this, b = (b = (b = this.element) == null ? void 0 : b.querySelector(".dvs-WebViewer")) || this.element;
        this._resizeMng = new Vn(b, function() {
          setTimeout(function() {
            var m, I = f._editUid;
            I && (f._setDetectCanvasSize(I), f._updateViewerSize(), m = f._rotateSavedArea(I, 0), f._drawCropArea(I, m), f._renderType = Dr);
          }, 0);
        });
      }, g._drawFullArea = function() {
        this._setDetectCanvasSize(this._editUid);
        var f = F(this, lo)[lo]();
        if (!f)
          return this._renderType = rr, void this.render();
        this.cropMng.resize(f), this.cropMng.setFullArea();
      }, g.getAreaForResize = function() {
        var f = this.cropMng.getCropArea(), b = F(this, Ir)[Ir](this._editUid);
        return this.isAreaFulfilled(f) ? [0, 0, f = b.w, 0, f, f = b.h, 0, f] : b.savedArea;
      }, g.rotateLeft = function() {
        this._rotate(this._editUid, -90);
      }, g.rotateRight = function() {
        this._rotate(this._editUid, 90);
      }, g._rotateSavedArea = function(f, X, m) {
        m === void 0 && (m = null);
        var I, x, D, B, X = Jr(X);
        return this.cropMng && (I = (x = (f = F(this, Ir)[Ir](f)).angle % 180 == 0) ? f.w : f.h, x = x ? f.h : f.w, D = !1, (B = m || this.cropMng.getCropArea()).length == 0 && (B = f.savedArea), D = this.isAreaFulfilled(B), B = On(B, X, x, I), D ? (f.fullArea = !0, X != 0 && (f.savedArea = On(f.savedArea, X, x, I))) : (f.fullArea = !1, f.savedArea = B)), B;
      }, g._rotate = function(f, b, m) {
        if (m === void 0 && (m = -1), !(this.isDestroyed || this.getImageCount() <= 0)) {
          var I = this._dcs, x = this.getViewerByUid(this._viewerId), b = Jr(b), D = x.getCurrentPageUids();
          if (D.length != 0) {
            var B = -1;
            try {
              if (I != null && I.showLoading("rotate button init"), (B = (B = x && f ? x.getIndexByUid(f) : B) < 0 ? this.options.curIndex : B) < 0 || B >= D.length)
                return;
              var X, Q, ve, ke = this._rotateSavedArea(f, b);
              b != 0 && (this._renderType = Do, x.rotateMode = 0, x.rotate(b, B), (Q = (X = this._dvsWrapper) == null ? void 0 : X.getCustomDataSync(f)) && (m == -1 && (m = (ve = Q.angle) === void 0 ? 0 : ve), Q.angle = Jr(m + b), Q.resBlob && delete Q.resBlob, F(this, Ir)[Ir](f).angle = Q.angle));
            } finally {
              I != null && I.hideLoading("rotate button init");
            }
            this._drawCropArea(f, ke);
          }
        }
      }, g.getAngle = function(f) {
        return f = F(this, Ir)[Ir](f), Hr(f.angle) ? Jr(f.angle) : f.angle = 0;
      }, g.hide = function() {
        te.prototype.hide.call(this);
      }, g.show = function() {
        var f = C(p().mark(function b() {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  if (this.isDestroyed)
                    return this.hide(), I.abrupt("return");
                  I.next = 3;
                  break;
                case 3:
                  return this._dcs.config.documentEditorSettings.visibility = "visible", I.next = 6, te.prototype.show.call(this);
                case 6:
                  this._updateViewerSize(), (m = this.getViewerByUid(this._viewerId)) && (m.getCurrentPageUids().length <= 0 && this.disableCrop(), m.render());
                case 9:
                case "end":
                  return I.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.destroy = function() {
        var f;
        this._reused ? this.hide() : (this.isDestroyed = !0, (f = this.getViewerByUid(this._viewerId)) && this.viewerPagerEventId && f.offById(le, this.viewerPagerEventId), this.viewerPagerEventId = null, this.removePageFile(), (f = this._resizeMng) != null && f.dispose(), (this._resizeMng = null) != (f = this.cropMng) && f.dispose(), this.detectCvsEl && (this.detectCvsEl.width = 0, this.detectCvsEl.height = 0), (f = this.detectCvsEl) != null && f.remove(), this.cropMng = null, this.detectCvsEl = null, this._renderEvents.slice(0), (f = this._cropInfoHelper) != null && f.destroy(), this._cropInfoHelper = null, te.prototype.destroy.call(this), this.options = null);
      }, g._calImageArea = function(m) {
        var b = this.getViewerByUid(this._viewerId);
        if (!b || (b = b.getCurrentTab(), !b) || (b = b.getCurPage(), !b) || (b = { x: b.style.left, y: b.style.top, width: b.style.width, height: b.style.height }, b.width <= 1 || b.height <= 1))
          return null;
        var m = this.getAngle(m) % 180 == 0, D = F(this, Ir)[Ir](this._editUid), x = D.w, D = D.h, B = m ? b.width : b.height, X = m ? b.height : b.width, I = Math.min(B / x, X / D), x = Math.fround(I * x), D = Math.fround(I * D), B = Math.floor(0.5 * Math.abs(B - x)), X = Math.floor(0.5 * Math.abs(X - D));
        return this._imageArea = { relLeft: b.x + (m ? B : X), relTop: b.y + (m ? X : B), relWidth: m ? x : D, relHeight: m ? D : x, zoom: 1 / I }, this._imageArea;
      }, g._drawCropArea = function(f, b) {
        if (!this.isDestroyed && (this._setDetectCanvasSize(f), this.cropMng)) {
          var m = F(this, lo)[lo]();
          if (!m)
            return this._renderType = rr, void this.render();
          this.cropMng.resize(m), m = b, m = m ? vr(m = _r(m)) : F(this, Ir)[Ir](f).savedArea, this.cropMng.setCropArea(m, F(this, lo)[lo]());
        }
      }, g._setDetectCanvasSize = function(f) {
        var b, m, I;
        this.element && (b = (m = ((m = this.element) == null ? void 0 : m.querySelector("." + ce.cvsContainer)).getBoundingClientRect()).width, m = m.height, (I = this.detectCvsEl) && (I.width = b, I.height = m, I.style.cssText = "left:0px;top:0px;width:" + b + "px;height:" + m + "px")), this.cropMng && f && (I = this._calImageArea(f)) && this.cropMng.setZoom(I.zoom);
      }, g.getCropManage = function() {
        return this.cropMng;
      }, g.getDetectAreaForNotRotate = function(f) {
        if (!this.cropMng)
          return [];
        var b = this.cropMng.getCropArea(), I = F(this, lo)[lo]();
        if (!I)
          return this._renderType = rr, this.render(), [];
        var m = I.relWidth, I = I.relHeight, x = this.cropMng._zoom;
        return vr(function(D, B, X, Q) {
          var ve = [], ke = Jr(B);
          if (ke == 0)
            return D;
          for (var dt = 0; dt < D.length; dt += 2) {
            var et = void 0, hn = void 0, $e = D[dt], gt = D[dt + 1], hn = ke == 90 ? (et = gt, X - $e) : ke == 180 ? (et = X - $e, Q - gt) : ke == 270 ? (et = Q - gt, $e) : (et = $e, gt);
            ve.push(et, hn);
          }
          return ve;
        }(b, this.getAngle(f), Math.fround(m * x), Math.fround(I * x)));
      }, g.isAreaFulfilled = function(f) {
        var b = this.cropMng;
        if (!b)
          return !1;
        if (this._editUid) {
          var I = this._calImageArea(this._editUid);
          if (!I)
            return !0;
          var m = I.relWidth, I = I.relHeight, b = b._zoom;
          return Vt(f, Math.fround(m * b), Math.fround(I * b));
        }
        return !0;
      }, g.toggleFullAreaButton = function() {
        var f = this.cropMng;
        if (!f)
          return !1;
        if (!(this.getImageCount() <= 0)) {
          var b = F(this, Ir)[Ir](this._editUid), D = b.angle % 180 == 0, x = D ? b.w : b.h, D = D ? b.h : b.w, m = this._calImageArea(this._editUid);
          if (!m)
            return !1;
          var I, x = Math.fround(+x), D = Math.fround(+D), B = this.getCurrentArea(), X = Vt(B, x, D);
          return X ? b.savedArea.length === 0 ? (b.savedArea = [0, 0, x - 2, 0, x - 2, D - 2, 0, D - 2], I = b.savedArea) : Vt(I = vr(I = _r(I = b.savedArea)), x, D) && (b.savedArea = I = [0, 0, x - 2, 0, x - 2, D - 2, 0, D - 2]) : (b.savedArea = B, I = [0, 0, x, 0, x, D, 0, D]), f.setCropArea(I.slice(), m), X;
        }
      }, g.setZooming = function() {
        this._zooming = !1;
      }, g.getHeaderButtons = function() {
        var b = this.options, f = b.headerButtons, b = b.documentEditorSettings, b = (b === void 0 ? {} : b).headerStyle;
        return te.prototype.createIconItems.call(this, f === void 0 ? {} : f, b === void 0 ? {} : b, !0, null);
      }, g.getFooterButtons = function() {
        var b = this.options, f = b.footerButtons, b = b.documentEditorSettings, b = (b === void 0 ? {} : b).footerStyle;
        return te.prototype.createIconItems.call(this, f === void 0 ? {} : f, b === void 0 ? {} : b, !1, null);
      }, g.resetCropInfoByUids = function(f) {
        var b = [], m = this.getViewerByUid(this._viewerId);
        if (f && m)
          for (var I, x, D = m.getCurrentPageUids().length, B = 0; B < f.length; B++)
            !mn(x = f[B]) || x == "" || Hr(I = m.getIndexByUid(x)) && 0 <= I && I < D && (this.initImageCropInfoByUid(x), F(this, Ir)[Ir](x).alreadyHandle = !1, b.push(I));
        return b;
      }, g._resetViewerWhenChanged = function() {
        var f = [], b = [], m = this.getViewerByUid(this._viewerId);
        if (m)
          for (var I = m.getCurrentPageUids(), x = 0; x < I.length; x++) {
            var D, B, X, Q = I[x];
            mn(Q) && Q != "" && F(this, Ir)[Ir](Q).alreadyHandle && (this._editUid = null, (B = this._copyRefMap[Q]) && (B = this._backInfo.origDocumentData[B]) ? (D = B.detectArea, B = B.angle, (X = (X = this._dvsWrapper) == null ? void 0 : X.getCustomDataSync(Q)) && wt(D, X.detectArea) && B == X.angle || (b.push(Q), f.push(x))) : (b.push(Q), f.push(x)));
          }
        return this.resetCropInfoByUids(b), f;
      }, g.clickBackButton = function() {
        var f = C(p().mark(function b() {
          var m, I, x, D, B, X, Q, ve, ke, dt, et;
          return p().wrap(function($e) {
            for (; ; )
              switch ($e.prev = $e.next) {
                case 0:
                  if (this.isDestroyed)
                    return $e.abrupt("return");
                  $e.next = 2;
                  break;
                case 2:
                  if (m = this._dcs, this.options.fromInternal, m.getCurrentPage(), I = m.getPreviousPage(), this.saveCurrentDataToUid(this._editUid), x = this.ifOldDocumentDataChanged(), X = this.options.documentEditorSettings.cropViewer, (X = (X === void 0 ? {} : X).funcConfirmExit) && ln(X))
                    return Q = "", I && (Q = I.pageName), $e.next = 14, X(x, Q);
                  $e.next = 21;
                  break;
                case 14:
                  if ((D = $e.sent) == Ye)
                    return $e.abrupt("return");
                  $e.next = 19;
                  break;
                case 19:
                  if (D != Et && D != Je)
                    return $e.abrupt("return");
                  $e.next = 21;
                  break;
                case 21:
                  if (D === void 0 && (D = !I || I instanceof ro ? Et : Je), !I) {
                    $e.next = 35;
                    break;
                  }
                  if (!(I instanceof ro)) {
                    $e.next = 33;
                    break;
                  }
                  if (D != Et) {
                    $e.next = 27;
                    break;
                  }
                  $e.next = 31;
                  break;
                case 27:
                  if (D == Je)
                    return $e.next = 30, this.clickSaveButton();
                  $e.next = 31;
                  break;
                case 30:
                  return $e.abrupt("return");
                case 31:
                  $e.next = 33;
                  break;
                case 33:
                  $e.next = 42;
                  break;
                case 35:
                  if (D != Et) {
                    $e.next = 38;
                    break;
                  }
                  $e.next = 42;
                  break;
                case 38:
                  if (D != Je) {
                    $e.next = 42;
                    break;
                  }
                  m.showLoading("crop back button SaveAndExit");
                  try {
                    this.clickSaveButton(!0);
                  } finally {
                    m.hideLoading("crop back button SaveAndExit");
                  }
                  return $e.abrupt("return");
                case 42:
                  if (B = !1, $e.prev = 43, !I) {
                    $e.next = 85;
                    break;
                  }
                  if (x && (X = this._resetViewerWhenChanged(), this.resetViewerAngleByIndexes(X), D == Je ? this.saveViewerCustomData() : D == Et && (X = this.restoreViewerCustomData(), this.resetViewerAngleByIndexes(X))), I instanceof ro)
                    return B = !0, m.showLoading("click crop back"), Q = this.getCurrentIndex(), I.hide(), I.gotoViewPage(Q), $e.next = 54, m.navigateBack();
                  $e.next = 56;
                  break;
                case 54:
                  $e.next = 85;
                  break;
                case 56:
                  if (I instanceof qe)
                    return B = !0, $e.next = 60, m.navigateBack(1, !1);
                  $e.next = 85;
                  break;
                case 60:
                  return ve = $e.sent, m.showLoading("click crop back"), $e.next = 64, I.refreshPreviewWhenChanged();
                case 64:
                  if (ve.length == 1 ? I.setNextViewerPage(ve.pop()) : m.destroyRemovedPages(), (ke = m.getStatus()) != "playing") {
                    $e.next = 69;
                    break;
                  }
                  $e.next = 84;
                  break;
                case 69:
                  if (ke != "paused") {
                    $e.next = 73;
                    break;
                  }
                  m.isHidden() || m.resume(), $e.next = 84;
                  break;
                case 73:
                  if (m.isHidden()) {
                    $e.next = 84;
                    break;
                  }
                  if (dt = I.element, dt = dt.children[1], (et = this.options.scannerViewer) && et.resolution && et.resolution.defaultValue)
                    return $e.next = 80, m.play(dt, et.resolution.defaultValue.width, et.resolution.defaultValue.height, et.fullScreen);
                  $e.next = 82;
                  break;
                case 80:
                  $e.next = 84;
                  break;
                case 82:
                  return $e.next = 84, m.play(dt);
                case 84:
                  m.isHidden() || m.emit("resetResolution");
                case 85:
                  if (I) {
                    $e.next = 93;
                    break;
                  }
                  if (m.showLoading("click crop back"), m.closeAllPages)
                    return $e.next = 90, m.closeAllPages();
                  $e.next = 90;
                  break;
                case 90:
                  m.exit(this._dvs), $e.next = 96;
                  break;
                case 93:
                  if (B) {
                    $e.next = 96;
                    break;
                  }
                  return $e.next = 96, m.navigateBack();
                case 96:
                  return $e.prev = 96, I && m.emit("focusPage"), m.hideLoading("click crop back"), $e.finish(96);
                case 100:
                case "end":
                  return $e.stop();
              }
          }, b, this, [[43, , 96, 100]]);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.initPageOption = function(Q, B) {
        var m, I = this, B = (te.prototype.initPageOption.call(this, Q, B), this.options.documentEditorSettings.cropViewer), B = B === void 0 ? {} : B, x = B.rotateLeft, D = B.rotateRight, B = B.autoDetectBorder, X = { icon: ce.font + " " + ce.iconNext, className: ce.BUTTON_PREFIX + "save", onclick: function(ve, ke) {
          ke = ke.dcs.getCurrentPage(), ke && ke.clickSaveButton();
        } }, Q = (Q.nextButtonCss && (X.icon = Q.nextButtonCss), { footerButtons: { rotateLeft: Zn(x, { icon: ce.font + " " + ce.iconRotateLeft, className: ce.BUTTON_PREFIX + "rotateLeft", onclick: function(ve, ke) {
          ke = ke.dcs.getCurrentPage(), ke && ke.rotateLeft();
        } }), rotateRight: Zn(D, { icon: ce.font + " " + ce.iconRotateRight, className: ce.BUTTON_PREFIX + "rotateRight", onclick: function(ve, ke) {
          ke = ke.dcs.getCurrentPage(), ke && ke.rotateRight();
        } }), toggleFullArea: Zn(B, { icon: ce.font + " " + ce.iconFullCrop, className: ce.BUTTON_PREFIX + "toggleFullArea", onclick: function(ve, ke) {
          var dt = ke.page;
          ke.dcs, dt.getImageCount() <= 0 || (ke = dt.toggleFullAreaButton(), (dt = ve == null ? void 0 : ve.currentTarget) && dt.classList[ke ? "remove" : "add"](ce.footerSelected));
        } }), save: X }, headerButtons: { backBtn: { icon: ce.font + " " + ce.iconBack, className: ce.BUTTON_PREFIX + "backBtn", onclick: (m = C(p().mark(function ve(ke, dt) {
          return p().wrap(function(et) {
            for (; ; )
              switch (et.prev = et.next) {
                case 0:
                  return dt.dcs, et.next = 3, I.clickBackButton();
                case 3:
                case "end":
                  return et.stop();
              }
          }, ve);
        })), function(ve, ke) {
          return m.apply(this, arguments);
        }) }, pager: { className: "dvs-cameraPager" } } });
        this.options = Rr(this.options, Q);
      }, g.changePageNumber = function(f, b) {
        var m, I;
        this.element && (m = (I = (I = this.element) == null ? void 0 : I.querySelector(".dvs-cameraPager")) == null ? void 0 : I.querySelector(".dvs-curPage"), I = I == null ? void 0 : I.querySelector(".dvs-totalPage"), m.innerText = String(f + 1), I.innerText = String(b));
      }, g.changeStatus = function(f, b) {
        var m, I;
        this.element && (m = (I = (I = this.element) == null ? void 0 : I.querySelector(".dvs-cameraPager")) == null ? void 0 : I.querySelector(".dvs-previousPage"), I = I == null ? void 0 : I.querySelector(".dvs-nextPage"), 0 <= f ? (m.classList[f <= 0 ? "add" : "remove"](ce.disable), I.classList[b === f + 1 ? "add" : "remove"](ce.disable)) : (m.classList.add(ce.disable), I.classList.add(ce.disable)));
      }, g.handlePageByUid = function() {
        var f = C(p().mark(function b(m, I) {
          var x, D, B, X, Q;
          return p().wrap(function(ve) {
            for (; ; )
              switch (ve.prev = ve.next) {
                case 0:
                  if (x = this._dcs, this.isDestroyed)
                    return ve.abrupt("return");
                  ve.next = 3;
                  break;
                case 3:
                  if (this._editUid == m) {
                    ve.next = 7;
                    break;
                  }
                  this._editUid = m, ve.next = 8;
                  break;
                case 7:
                  return ve.abrupt("return");
                case 8:
                  if (this.isDestroyed)
                    return ve.abrupt("return");
                  ve.next = 10;
                  break;
                case 10:
                  return x.showLoading("handle crop page by uid"), ve.prev = 11, this._renderType = rr, ve.next = 15, this.initOrigDataByUid(m);
                case 15:
                  if (this.isDestroyed)
                    return ve.abrupt("return");
                  ve.next = 17;
                  break;
                case 17:
                  this.initImageCropInfoByUid(m), D = 0, Q = F(this, Ir)[Ir](m), X = Q.fullArea, D = Q.angle, Q.alreadyHandle ? Q.angle != null && (D = Q.angle, Q.angle = 0, B = this._rotateSavedArea(m, D, Q.savedArea), Q.angle = D, this._drawCropArea(m, B)) : ((D = D ?? this.getAngle(m)) != 0 ? (Q.angle = 0, B = this._rotateSavedArea(m, 0, Q.savedArea), this._drawCropArea(m, B), this._rotate(m, D, 0)) : (B = this._rotateSavedArea(m, 0, Q.savedArea), this._drawCropArea(m, B)), this._renderType = rr, Q.alreadyHandle = !0), (Q = (D = this.element) == null ? void 0 : D.querySelector("." + ce.BUTTON_PREFIX + "toggleFullArea")) && Q.classList[X ? "add" : "remove"](ce.footerSelected);
                case 25:
                  return ve.prev = 25, x.hideLoading("handle crop page by uid"), ve.finish(25);
                case 28:
                case "end":
                  return ve.stop();
              }
          }, b, this, [[11, , 25, 28]]);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.saveCurrentDataToUid = function(f) {
        if (mn(f) && f != "") {
          this._dcs.showLoading("crop save current data");
          try {
            var b, m, I, x = this.getAngle(f), D = (b = this._dvsWrapper) == null ? void 0 : b.getCustomDataSync(f);
            D && (m = !1, this.cropMng && this.cropMng.getCropMode() && (I = this.getDetectAreaForNotRotate(f), D.detectArea = I, m = !0), D.angle != x && (D.angle = x, m = !0), m && D.resBlob && delete D.resBlob);
          } finally {
            this._dcs.hideLoading("crop save current data");
          }
        }
      }, g.clickSaveButton = function() {
        var f = C(p().mark(function b(m) {
          var I, x, D, B, X, Q, ve, ke, dt, et, $e, gt, hn, Tt, Dn, Xn;
          return p().wrap(function(vn) {
            for (; ; )
              switch (vn.prev = vn.next) {
                case 0:
                  if (m === void 0 && (m = !1), this.isDestroyed)
                    return vn.abrupt("return");
                  vn.next = 3;
                  break;
                case 3:
                  if ((I = this._dcs).showLoading("crop save"), vn.prev = 5, Q = I.getPreviousPage(), this.saveCurrentDataToUid(this._editUid), x = !1, !Q) {
                    vn.next = 24;
                    break;
                  }
                  if (Q instanceof ro)
                    return (dt = this.ifOldDocumentDataChanged()) && (Q.setCurPageId(null), Q.setCurImageData(null), Q.SetFilterDirty(!0)), this.mergeChangedToSavedFileSync(), this._reused && this.saveChangedTo_bk(), dt && (this._editUid = null), this.options.fromInternal && Q.applyChanged(), x = !0, dt = this.getCurrentIndex(), Q.hide(), Q.gotoViewPage(dt), vn.next = 23, I.navigateBack();
                  vn.next = 24;
                  break;
                case 23:
                  _i(I);
                case 24:
                  if (x) {
                    vn.next = 85;
                    break;
                  }
                  if (B = this.getDvs(), X = this.getCurrentIndex(), Q = this.getViewerByUid(this._viewerId), ve = Q.getCurrentPageUids(), (ke = this._nextViewerPage) && ke instanceof ro)
                    return vn.next = 33, ke.syncFiles(!1, ve);
                  vn.next = 53;
                  break;
                case 33:
                  if (D = ke.regetViewerCustomDataFromSrc(), ke.resetViewerAngleByIndexes(D), dt = ke.getCurrentIndex(), X != dt && (ke.setCurImageData(null), ke.SetFilterDirty(!0)), this.isNextEditPageCurrentDataDifferent(ke) && (D = ke.restoreViewerCurrentCustomData(), ke.resetViewerAngleByIndexes(D), ke.setCurImageData(null), ke.SetFilterDirty(!0)), ke.gotoViewPage(X), m)
                    return vn.next = 42, this._dcs.navigateToPage(ke, !1);
                  vn.next = 48;
                  break;
                case 42:
                  return ke.hide(), this.show(), vn.next = 46, ke.clickSaveButton();
                case 46:
                  vn.next = 50;
                  break;
                case 48:
                  return vn.next = 50, this._dcs.navigateToPage(ke);
                case 50:
                  this._nextViewerPage = null, vn.next = 83;
                  break;
                case 53:
                  if (et = { fileName: this._pageFileName, initFileName: this._initFileName, curIndex: X, fromInternal: this.options.fromInternal, documentEditorSettings: this.options.documentEditorSettings }, this.options.fromInternal) {
                    vn.next = 70;
                    break;
                  }
                  $e = {}, gt = 0;
                case 57:
                  if (!(gt < ve.length)) {
                    vn.next = 69;
                    break;
                  }
                  if (mn(hn = ve[gt]) && hn != "") {
                    vn.next = 61;
                    break;
                  }
                  return vn.abrupt("continue", 66);
                case 61:
                  if (mn(Tt = this._copyRefMap[hn]) && Tt != "") {
                    vn.next = 64;
                    break;
                  }
                  return vn.abrupt("continue", 66);
                case 64:
                  Xn = this._backInfo.initDocumentData[Tt], $e[hn] = Rr(Xn, {});
                case 66:
                  gt++, vn.next = 57;
                  break;
                case 69:
                  et.initDocumentData = $e;
                case 70:
                  if (Dn = new ro(et, B, I), m)
                    return vn.next = 74, I.navigateToPage(Dn, !1);
                  vn.next = 80;
                  break;
                case 74:
                  return Dn.hide(), this.show(), vn.next = 78, Dn.clickSaveButton();
                case 78:
                  vn.next = 83;
                  break;
                case 80:
                  return Dn.gotoViewPage(X), vn.next = 83, I.navigateToPage(Dn);
                case 83:
                  m || ((Xn = I.getPreviousPage()) && Xn.hide(), D = this._resetViewerWhenChanged(), this.resetViewerAngleByIndexes(D)), x = !0;
                case 85:
                  return vn.prev = 85, I.hideLoading("crop save"), vn.finish(85);
                case 88:
                case "end":
                  return vn.stop();
              }
          }, b, this, [[5, , 85, 88]]);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.isNextEditPageCurrentDataDifferent = function(f) {
        var b = f.getCurrentEditUid();
        if (b) {
          var b = f.getRefUid(b, !1), m = f.getCurrentCustomData();
          if (m && b) {
            var I = (I = this._dvsWrapper) == null ? void 0 : I.getCustomDataSync(b);
            if (I)
              return f.compareOldValueChanged(I, m, null);
          }
        }
        return !0;
      }, g.mergeChangedToSavedFileSync = function() {
        for (var f = this.getViewerByUid(this._viewerId).getCurrentPageUids(), b = 0; b < f.length; b++) {
          var m, I, x = f[b], D = this._copyRefMap[x];
          !mn(D) || D == "" || (m = (m = this._dvsWrapper) == null ? void 0 : m.getCustomDataSync(x)) && (x = this._backInfo.origDocumentData[D], !(I = (I = this._dvsWrapper) == null ? void 0 : I.getCustomDataSync(D)) || wt(I.detectArea, m.detectArea) && I.angle == m.angle || (D = !1, wt(I.detectArea, m.detectArea) || (I.detectArea = m.detectArea, D = !0), I.angle != m.angle && (I.angle = m.angle, D = !0), D && I.resBlob && delete I.resBlob, x && (D = !1, wt(x.detectArea, m.detectArea) || (x.detectArea = m.detectArea, D = !0), x.angle != m.angle && (x.angle = m.angle, D = !0), D && x.resBlob && delete x.resBlob)));
        }
      }, g.compareOldValueChanged = function(f, b, m) {
        if (!f || !b)
          return !0;
        if (f.detectArea === void 0) {
          var I = m.imageWidth, m = m.imageHeight;
          if (!Vt(b.detectArea, I, m))
            return !0;
        } else if (!wt(f.detectArea, b.detectArea))
          return !0;
        if (f.angle === void 0) {
          if (b.angle != 0)
            return !0;
        } else if (f.angle != b.angle)
          return !0;
        return !1;
      }, g.saveChangedTo_bk = function() {
        if (this._bk && this._bk._customData) {
          var f = this._cropInfoHelper;
          this._cropInfoHelper = this._bk._cropInfoHelper;
          for (var b = this.getViewerByUid(this._viewerId).getCurrentPageUids(), m = 0; m < b.length; m++) {
            var I, x, D = b[m], B = (B = this._dvsWrapper) == null ? void 0 : B.getCustomDataSync(D);
            B && ((I = this._bk._customData[D]) && (x = !1, wt(I.detectArea, B.detectArea) || (I.detectArea = B.detectArea, x = !0), I.angle != B.angle && (I.angle = B.angle, x = !0), x && I.resBlob && delete I.resBlob), this._cropInfoHelper && this.initImageCropInfoByUid(D));
          }
          this._cropInfoHelper = f;
        }
      }, g.updateUid = function() {
        var f = C(p().mark(function b(m, I, x) {
          var D, B;
          return p().wrap(function(X) {
            for (; ; )
              switch (X.prev = X.next) {
                case 0:
                  if (this._reused)
                    return X.abrupt("return");
                  X.next = 2;
                  break;
                case 2:
                  if (D = this._dvs, mn(B = this._copyRefMap[m]) && B != "") {
                    X.next = 6;
                    break;
                  }
                  return X.abrupt("return");
                case 6:
                  return X.next = 8, no(I, D, B, !0, x);
                case 8:
                case "end":
                  return X.stop();
              }
          }, b, this);
        }));
        return function(b, m, I) {
          return f.apply(this, arguments);
        };
      }(), g.syncFileFromExternalEvent = function() {
        var f = C(p().mark(function b(m, I) {
          return p().wrap(function(x) {
            for (; ; )
              switch (x.prev = x.next) {
                case 0:
                  if (this.isDestroyed)
                    return x.abrupt("return");
                  x.next = 2;
                  break;
                case 2:
                  if (this._reused)
                    return x.next = 5, this.syncFileForReusedFromExternalEvent(m, I);
                  x.next = 7;
                  break;
                case 5:
                  x.next = 9;
                  break;
                case 7:
                  return x.next = 9, te.prototype.syncFileFromExternalEvent.call(this, m, I);
                case 9:
                  this.getImageCount() <= 0 && this.disableCrop();
                case 10:
                case "end":
                  return x.stop();
              }
          }, b, this);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.syncFileForReusedFromExternalEvent = function() {
        var f = C(p().mark(function b(m, I) {
          var x, D, B, X, Q, ve, ke, dt, et, $e;
          return p().wrap(function(gt) {
            for (; ; )
              switch (gt.prev = gt.next) {
                case 0:
                  if (this._reused)
                    return x = this._copyRefMap, D = this._backInfo, this._copyRefMap = this._bk._copyRefMap, this._backInfo = this._bk._backInfo, X = this._fileWrapper.openFile(this._bk._backFileName), gt.next = 8, this.syncFiles(m, X);
                  gt.next = 19;
                  break;
                case 8:
                  for (this._copyRefMap = x, this._backInfo = D, this._bk._copyRefMap = this._copyRefMap, this._bk._backInfo = this._backInfo, B = this._fileWrapper.openFile(this._backFileName), this.backupNewImageDataFromUids(B), X = this.getViewerByUid(this._viewerId), Q = X.getCurrentPageUids(), ve = Q.length, dt = B.length, ke = 0; ke < ve; ke++)
                    et = Q[ke], ke < dt ? ($e = B[ke], this._copyRefMap[et] = $e) : this._copyRefMap[et] = void 0;
                case 19:
                case "end":
                  return gt.stop();
              }
          }, b, this);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.backupNewImageDataFromUids = function(f) {
        for (var b, m, I = f.length, x = 0; x < I; x++)
          mn(b = f[x]) && b != "" && !this._backInfo.origDocumentData[b] && (m = (m = this._dvsWrapper) == null ? void 0 : m.getCustomDataSync(b), this._backInfo.origDocumentData[b] = m ? { detectArea: m.detectArea, angle: m.angle, filterValue: m.filterValue } : { detectArea: null, angle: 0, filterValue: this._dcs.curFilterValue });
      }, g.disableCrop = function() {
        this.cropMng && (this.cropMng.setCropMode(!1), this.cropMng.clearCropBox());
        var f = (f = this.element) == null ? void 0 : f.querySelector("." + ce.BUTTON_PREFIX + "toggleFullArea");
        f && f.classList.remove(ce.footerSelected);
      }, W;
    }(pr);
    function va(te) {
      return this._cropInfoHelper || (this._cropInfoHelper = new Wi()), this._cropInfoHelper.getCropInfo(te);
    }
    function Qo() {
      var te = this, W = this.element;
      this.detectCvsEl = W == null ? void 0 : W.querySelector("." + ce.detectCvs), this.detectCvsEl && (W = ((W = this.options.documentEditorSettings.cropViewer) === void 0 ? {} : W).polygonStyle, this.cropMng = new lr(this.detectCvsEl), W && this.cropMng.setCropStyle({ lineColor: W.stroke, lineWidth: parseInt(W.strokeWidth, 10), cornerColor: W.stroke, lineDash: W.dash }), this.cropMng.onAreaChanged = function(g) {
        for (var f in te.isAreaFulfilled(g) || (F(te, Ir)[Ir](te._editUid).savedArea = g), te._renderEvents)
          ln(te._renderEvents[f]) && te._renderEvents[f](g);
      });
    }
    function yo() {
      var te = this;
      this._renderEvents.push(function(g) {
        var g = g || te.getCurrentArea(), g = te.isAreaFulfilled(g), f = (f = te.element) == null ? void 0 : f.querySelector("." + ce.iconFullCrop);
        f && f.parentElement && f.parentElement.classList[g ? "add" : "remove"](ce.footerSelected);
      });
    }
    function Vs() {
      return this._imageArea || (this._imageArea = this._calImageArea(this._editUid)), this._imageArea;
    }
    function Us() {
      var g = this.options.documentEditorSettings, g = g === void 0 ? {} : g, te = g.headerStyle, te = te === void 0 ? {} : te, W = g.bodyStyle, g = g.footerStyle, g = g === void 0 ? {} : g;
      this.setDefaultBackgroundColors(te, W === void 0 ? {} : W, g), this.template = ['<header style="background:' + te.background + '" class="headerButtons"></header>', '<div class="' + ce.cvsContainer + '"><canvas class="' + ce.detectCvs + '"></canvas></div>', '</div><footer style="background:' + g.background + '" class="footerButtons"></footer>'].join(""), this.className = ce.cropPage, this.createEl(), this._listenResize(), F(this, ho)[ho](), F(this, ti)[ti](), F(this, Pi)[Pi]();
    }
    function ps() {
      return _s.apply(this, arguments);
    }
    function _s() {
      return (_s = C(p().mark(function te() {
        var W, g, f, b, m, I, x, D = this;
        return p().wrap(function(B) {
          for (; ; )
            switch (B.prev = B.next) {
              case 0:
                if (this.element) {
                  B.next = 2;
                  break;
                }
                return B.abrupt("return");
              case 2:
                f = this.options, f = f.documentEditorSettings, f = (f === void 0 ? {} : f).bodyStyle, f = f === void 0 ? {} : f, W = this._dvs, this._dcs, m = (m = this.element) == null ? void 0 : m.querySelector(".dvs-cameraPager"), I = m == null ? void 0 : m.querySelector(".dvs-previousPage"), x = m == null ? void 0 : m.querySelector(".dvs-nextPage"), (g = this.getViewerByUid(this._viewerId)).canvasBackground = f.background, g.bindView((f = this.element) == null ? void 0 : f.querySelector("." + ce.cvsContainer)), g.on(Ve, function() {
                  if (!D.isDestroyed)
                    if (D._renderType == Do)
                      D._renderType = wr;
                    else {
                      D._renderType != wr && (D._renderType = wr);
                      var X = g.getCurrentTab();
                      if (X && (X = X.getCurPage(), X && 1 < X.style.width && 1 < X.style.height)) {
                        D.cropMng.setCropMode(!0), D._resetCropCanvas();
                        var Q, ve = D._rotateSavedArea(D._editUid, 0);
                        for (Q in D._drawCropArea(X.uid, ve), D._renderEvents)
                          ln(D._renderEvents[Q]) && D._renderEvents[Q]();
                      }
                    }
                }), this._resetCropCanvas(), f = g.getCurrentTab(), I && x || (m.innerHTML = '<div class="dvs-previousPage ' + ce.font + " " + ce.iconArrow + " " + ce.headerfont + " " + ce.disable + `"></div>
      <p><span class="dvs-curPage">0</span>/<span class="dvs-totalPage">0</span></p>
      <div class="dvs-nextPage ` + ce.font + " " + ce.iconArrow + " " + ce.headerfont + " " + ce.disable + '"></div>', I = m == null ? void 0 : m.querySelector(".dvs-previousPage"), x = m == null ? void 0 : m.querySelector(".dvs-nextPage"), f && 0 <= f.total && (I.onclick = C(p().mark(function X() {
                  var Q;
                  return p().wrap(function(ve) {
                    for (; ; )
                      switch (ve.prev = ve.next) {
                        case 0:
                          if (D.isDestroyed)
                            return ve.abrupt("return");
                          ve.next = 2;
                          break;
                        case 2:
                          if ((Q = g.getPrePageIndex()) != -1)
                            return Q = g.getUidByIndex(Q), D.saveCurrentDataToUid(D._editUid), ve.next = 8, D.handlePageByUid(Q, W);
                          ve.next = 10;
                          break;
                        case 8:
                          D.disableCrop(), g.prevPage();
                        case 10:
                        case "end":
                          return ve.stop();
                      }
                  }, X);
                })), x.onclick = C(p().mark(function X() {
                  var Q;
                  return p().wrap(function(ve) {
                    for (; ; )
                      switch (ve.prev = ve.next) {
                        case 0:
                          if (D.isDestroyed)
                            return ve.abrupt("return");
                          ve.next = 2;
                          break;
                        case 2:
                          if ((Q = g.getNextPageIndex()) != -1)
                            return Q = g.getUidByIndex(Q), D.saveCurrentDataToUid(D._editUid), ve.next = 8, D.handlePageByUid(Q, W);
                          ve.next = 10;
                          break;
                        case 8:
                          D.disableCrop(), g.nextPage();
                        case 10:
                        case "end":
                          return ve.stop();
                      }
                  }, X);
                })), (b = this).viewerPagerEventId = g.on(le, function(X) {
                  D.isDestroyed || b && X && (b.changePageNumber(X.cur, X.total), b.changeStatus(X.cur, X.total));
                }))), f && 0 <= (m = f.total) && 0 <= (I = g.getCurrentIndex()) && (this.changeStatus(I, m), this.changePageNumber(I, m), mn(x = g.getUidByIndex(I)) && x != "" && this._editUid && this.saveCurrentDataToUid(this._editUid)), (f = g.ui) != null && f._resizeViewer();
              case 18:
              case "end":
                return B.stop();
            }
        }, te, this);
      }))).apply(this, arguments);
    }
    function On(te, W, g, f) {
      var b = [], m = Jr(W);
      if (m == 0)
        return $(te);
      for (var I = 0; I < te.length; I += 2) {
        var x = void 0, X = void 0, D = Math.fround(te[I]), B = Math.fround(te[I + 1]), X = m == 90 ? (x = g - B, D) : m == 180 ? (x = f - D, g - B) : m == 270 ? (x = B, f - D) : (x = D, B);
        b.push(x, X);
      }
      return b;
    }
    var ya = function(te) {
      function W(f, b, m) {
        return f = te.call(this, f, b, m) || this, f.pageName = "insertPage", f;
      }
      Y(W, te);
      var g = W.prototype;
      return g.initFileName = function(f) {
        f && f.fileName && (this.fileName = f.fileName);
      }, g.attachDefaultEvent = function() {
        this.on("onSaveCapture", function(f, b, m, I, x) {
          (function() {
            br.apply(this, arguments);
          })(f, b, m, I, x);
        });
      }, g.initPageOption = function(f, B) {
        f.scannerViewer || (f.scannerViewer = $(B.config.scannerViewer), B.config && B.config.scannerViewer && B.config.scannerViewer.element && (f.scannerViewer.element = B.config.scannerViewer.element));
        var B = f.scannerViewer, X = B.resolution, m = B.autoScan, I = B.autoDetect, x = B.switchCamera, D = B.loadLocalFile, B = B.torch, X = { headerButtons: { changeResBtn: Zn(X, ae()), autoDetect: U({ isSelected: (m == null ? void 0 : m.enableAutoScan) || (I == null ? void 0 : I.enableAutoDetect) }, Zn(I, _e())), flashBtn: Zn(B, de()), closeBtn: jn() }, footerButtons: { load: Zn(D, Er()), toggleCamera: Zn(x, ye()), capture: Ei(), autoCapture: U({ isSelected: m == null ? void 0 : m.enableAutoScan }, Zn(m, oe())), continuous: { icon: ce.font + " " + ce.iconContinuous, className: ce.BUTTON_PREFIX + "continuousMode", visibility: "hidden" } }, scannerViewer: { resolution: { defaultValue: { width: 1280, height: 720 } }, fullScreen: !1 } };
        Fn() && ((I = B.visibility) == null ? void 0 : I.toString().toLowerCase()) != "hidden" || delete X.headerButtons.flashBtn, this.options = Rr(f, X);
      }, g.selectedFile = function() {
        var f = C(p().mark(function b(m, I) {
          var x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if (I.stop(), D.prev = 1, (x = I.getPreviousPage()) && x instanceof ro)
                    return D.next = 6, x.insertFile(m);
                  D.next = 6;
                  break;
                case 6:
                  D.next = 12;
                  break;
                case 8:
                  throw D.prev = 8, D.t0 = D.catch(1), I.hideLoading("insert - load image"), D.t0;
                case 12:
                  return D.prev = 12, I.hideLoading("insert - load image"), D.finish(12);
                case 15:
                case "end":
                  return D.stop();
              }
          }, b, null, [[1, 8, 12, 15]]);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), W;
    }(qe);
    function br() {
      return (br = C(p().mark(function te(W, g, f, b, m) {
        var I, x, D, B, X;
        return p().wrap(function(Q) {
          for (; ; )
            switch (Q.prev = Q.next) {
              case 0:
                if (I = g.dcs, !(x = I.getPreviousPage()).isDestroyed && x instanceof ro) {
                  Q.next = 4;
                  break;
                }
                return Q.abrupt("return");
              case 4:
                if (I.showLoading("OnInsertPageSave"), Q.prev = 5, D = I.config.scannerViewer || {}, D = D.maxDocuments, B = D = D === void 0 ? 20 : D, X = x.getViewerByUid(x.getViewerUid()), !x.options.fromInternal || X.currentPageCount + 1 <= B && X.currentPageCount + 1 <= D)
                  return I.config && I.config.scannerViewer && I.config.scannerViewer.autoScan && !I.config.scannerViewer.autoScan.enableAutoScan && I.setLoadingNumber(2), Q.next = 13, I.packageBlobItemFromIImageData(f, !0, !0, !1);
                Q.next = 28;
                break;
              case 13:
                return B = Q.sent, Q.next = 16, x.insertImgByBlobItem(B, I);
              case 16:
                if (X = Q.sent, x.setInsertingImageIndex(X), 0 <= X)
                  return Q.next = 21, x.handlePageByIndex(X);
                Q.next = 21;
                break;
              case 21:
                return b && I.setImageDataBack(f.imageData), I.emit("blurPage"), Q.next = 25, I.navigateBack();
              case 25:
                Q.sent, Q.next = 31;
                break;
              case 28:
                return I.emit("video-error", Dt.MAX_IMAGES_IN_BUFFER_LIMIT), Q.next = 31, I.navigateBack();
              case 31:
                return Q.prev = 31, I.stop(), I.hideLoading("OnInsertPageSave"), Q.finish(31);
              case 35:
              case "end":
                return Q.stop();
            }
        }, te, null, [[5, , 31, 35]]);
      }))).apply(this, arguments);
    }
    var mu = [{ width: 320, height: 240, type: "exact" }, { width: 640, height: 480, type: "exact" }, { width: 640, height: 360, type: "exact" }, { width: 800, height: 600, type: "exact" }, { width: 1280, height: 720, type: "exact" }, { width: 1920, height: 1080, type: "exact" }, { width: 2560, height: 1440, type: "exact" }, { width: 3840, height: 2160, type: "exact" }], vt = { video: { width: { ideal: 1280 }, height: { ideal: 720 }, facingMode: { ideal: "environment" } } };
    function Gt(te) {
      function W(g) {
        if (Object(g) !== g)
          return Promise.reject(new TypeError(g + " is not an object."));
        var f = g.done;
        return Promise.resolve(g.value).then(function(b) {
          return { value: b, done: f };
        });
      }
      return (Gt = function(g) {
        this.s = g, this.n = g.next;
      }).prototype = { s: null, n: null, next: function() {
        return W(this.n.apply(this.s, arguments));
      }, return: function(g) {
        var f = this.s.return;
        return f === void 0 ? Promise.resolve({ value: g, done: !0 }) : W(f.apply(this.s, arguments));
      }, throw: function(g) {
        var f = this.s.return;
        return f === void 0 ? Promise.reject(g) : W(f.apply(this.s, arguments));
      } }, new Gt(te);
    }
    var Gs = function() {
      function te(g, f, b, m) {
        this.videoSettings = vt, this._browserInfo = null, this._isPlugOut = !1, this._resolutionSelector = null, this._cameraInfo = null, this._allCameras = null, this._videoTrack = null, this._allResolutions = [], this._curResolution = null, this._videoEle = null, this._isFill = !1, this._isUser = !1, this._useWebgl = !0, this.videoGlCvs = null, this.videoGl = null, this.glImgData = null, this.glCropImgData = null, this._cameraManager = null, this._oPub = null, this._browserInfo = N.navInfo, !this._browserInfo.bMobile && this._browserInfo.bSafari ? 15 <= parseInt(this._browserInfo.strBrowserVersion) && (this._useWebgl = !1) : this._browserInfo.bHuaWeiBrowser && (this._useWebgl = !1), this._cameraInfo = g || { deviceId: "", label: "" }, this._videoEle = f, this._allCameras = b, this._oPub = m || new Nt();
      }
      var W = te.prototype;
      return W.getFrame = function() {
        var g, f, b = this._videoEle.videoWidth, m = this._videoEle.videoHeight, I = (this.videoGlCvs || (this.videoGlCvs = document.createElement("canvas")), this.videoGlCvs), x = this._useWebgl, D = null;
        return (D = x ? this.videoGl || I.getContext("webgl", { alpha: !1, antialias: !1, depth: !1, stencil: !1, preserveDrawingBuffer: !0 }) || I.getContext("experimental-webgl", { alpha: !1, antialias: !1, depth: !1, stencil: !1, preserveDrawingBuffer: !0 }) : D) && x || (x = !1, this.videoGlCvs = document.createElement("canvas"), I = this.videoGlCvs), I.width == b && I.height == m || (I.height = m, I.width = b, D && D.viewport(0, 0, b, m)), x ? (this.videoGl || (x = (this.videoGl = D).createShader(D.VERTEX_SHADER), D.shaderSource(x, `
attribute vec4 a_position;
attribute vec2 a_uv;

varying vec2 v_uv;

void main() {
gl_Position = a_position;
v_uv = a_uv;
}
`), D.compileShader(x), D.getShaderParameter(x, D.COMPILE_STATUS), f = D.createShader(D.FRAGMENT_SHADER), D.shaderSource(f, `
precision lowp float;

varying vec2 v_uv;

uniform sampler2D u_texture;

void main() {
vec4 sample =  texture2D(u_texture, v_uv);
gl_FragColor = vec4(sample.b, sample.g, sample.r, 1.0);
}
`), D.compileShader(f), D.getShaderParameter(f, D.COMPILE_STATUS), g = D.createProgram(), D.attachShader(g, x), D.attachShader(g, f), D.linkProgram(g), D.getProgramParameter(g, D.LINK_STATUS), D.useProgram(g), D.bindBuffer(D.ARRAY_BUFFER, D.createBuffer()), D.bufferData(D.ARRAY_BUFFER, new Float32Array([-1, 1, 0, 1, 1, 1, 1, 1, -1, -1, 0, 0, 1, -1, 1, 0]), D.STATIC_DRAW), x = D.getAttribLocation(g, "a_position"), D.enableVertexAttribArray(x), D.vertexAttribPointer(x, 2, D.FLOAT, !1, 16, 0), f = D.getAttribLocation(g, "a_uv"), D.enableVertexAttribArray(f), D.vertexAttribPointer(f, 2, D.FLOAT, !1, 16, 8), D.activeTexture(D.TEXTURE0), D.bindTexture(D.TEXTURE_2D, D.createTexture()), D.texParameteri(D.TEXTURE_2D, D.TEXTURE_WRAP_S, D.CLAMP_TO_EDGE), D.texParameteri(D.TEXTURE_2D, D.TEXTURE_WRAP_T, D.CLAMP_TO_EDGE), D.texParameteri(D.TEXTURE_2D, D.TEXTURE_MIN_FILTER, D.NEAREST), D.texParameteri(D.TEXTURE_2D, D.TEXTURE_MAG_FILTER, D.NEAREST), D.uniform1i(D.getUniformLocation(g, "u_texture"), 0)), (!this.glImgData || this.glImgData.length < b * m * 4) && (this.glImgData = new Uint8Array(b * m * 4)), D.texImage2D(D.TEXTURE_2D, 0, D.RGBA, D.RGBA, D.UNSIGNED_BYTE, this._videoEle), D.drawArrays(D.TRIANGLE_STRIP, 0, 4), x = this.glImgData, D.readPixels(0, 0, D.drawingBufferWidth, D.drawingBufferHeight, D.RGBA, D.UNSIGNED_BYTE, x), this.glImgData) : ((f = I.getContext("2d")).drawImage(this._videoEle, 0, 0), I.width === 0 || I.height === 0 ? null : ((!this.glImgData || this.glImgData.length < I.width * I.height * 4) && (this.glImgData = new Uint8Array(I.width * I.height * 4)), this.glImgData.set(f.getImageData(0, 0, I.width, I.height).data), this.glImgData));
      }, W.capture = function() {
        var g = C(p().mark(function f(b) {
          var m, I, x, D, B, X, Q, ve, ke, dt, et, $e, gt, hn, Tt;
          return p().wrap(function(Dn) {
            for (; ; )
              switch (Dn.prev = Dn.next) {
                case 0:
                  if (b === void 0 && (b = !1), m = null, Dn.prev = 2, $n.log("capture"), X = this._videoEle, X.videoHeight, I = X.videoWidth, X = this.getVideoSizeInfo(), x = X.width, D = X.height, B = X.offsetX, X = X.offsetY, Q = this.getFrame(), ke = ve = !1, this.videoGl ? ke = !0 : ve = !0, m = { imageData: null, imageWidth: x, imageHeight: D, rgba: ve, bgra: ke }, this._isFill) {
                    for ((!this.glCropImgData || this.glCropImgData.length < x * D * 4) && (this.glCropImgData = new Uint8Array(x * D * 4)), dt = this.glCropImgData, et = 0, $e = X + D, gt = X; gt < $e; gt++)
                      hn = 4 * (gt * I + B), Tt = et * x * 4, dt.set(Q.subarray(hn, hn + 4 * x), Tt), et++;
                    m.imageData = dt.buffer;
                  } else
                    m.imageData = Q.buffer;
                  if (b) {
                    Dn.next = 16;
                    break;
                  }
                  return Dn.next = 15, Xt(m);
                case 15:
                  return Dn.abrupt("return", Dn.sent);
                case 16:
                  Dn.next = 21;
                  break;
                case 18:
                  return Dn.prev = 18, Dn.t0 = Dn.catch(2), Dn.abrupt("return", Promise.reject(Dn.t0));
                case 21:
                  return Dn.abrupt("return", m);
                case 22:
                case "end":
                  return Dn.stop();
              }
          }, f, this, [[2, 18]]);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), W.setImageDataBack = function(g) {
        $n.log("setImageDataBack"), this._isFill ? this.glCropImgData = new Uint8Array(g) : this.glImgData = new Uint8Array(g);
      }, W.getVideoSizeInfo = function() {
        var X = this._videoEle;
        if ((X == null || (f = X.style) == null ? void 0 : f.display) == "none")
          return f = X.videoHeight, { width: X.videoWidth, height: f, offsetX: 0, offsetY: 0 };
        if (this.getStatus() !== "playing")
          throw Dt.VIDEO_NOT_PLAY;
        var f = X.getBoundingClientRect(), g = f.width, f = f.height;
        if (g === 0 || f === 0)
          throw Dt.CAPTURE_NO_IMAGE;
        var b, m, I, x = 0, D = 0, B = X.videoHeight, X = X.videoWidth;
        return this._isFill ? (b = g / (X * (g = Math.max(g / X, f / B))), f = f / (B * g), m = Math.floor(X * b), I = Math.floor(B * f), x = Math.floor((1 - b) / 2 * X), D = Math.floor((1 - f) / 2 * B)) : (m = X, I = B), { width: m, height: I, offsetX: x, offsetY: D };
      }, W.setFillMode = function(g) {
        this._isFill = g, this._videoEle && (this._videoEle.style.objectFit = g ? "cover" : "contain");
      }, W.setPlugOut = function() {
        this._isPlugOut = !0;
      }, W._checkPlugOut = function() {
        this._isPlugOut && this._oPub.emit("video-error", Dt.CAMERA_PLUG_OUT);
      }, W.getResolutions = function() {
        var g = C(p().mark(function f(b) {
          var m, I, x, D, B, X, Q, ve, ke, dt;
          return p().wrap(function(et) {
            for (; ; )
              switch (et.prev = et.next) {
                case 0:
                  if (b === void 0 && (b = !1), 0 < this._allResolutions.length && !b)
                    return et.abrupt("return", this._allResolutions);
                  et.next = 3;
                  break;
                case 3:
                  if (this._cameraInfo) {
                    et.next = 5;
                    break;
                  }
                  return et.abrupt("return", null);
                case 5:
                  m = [], this._allResolutions = [], x = I = !1, et.prev = 9, B = function($e) {
                    var gt, hn, Tt, Dn = 2;
                    for (typeof Symbol < "u" && (hn = Symbol.asyncIterator, Tt = Symbol.iterator); Dn--; ) {
                      if (hn && (gt = $e[hn]) != null)
                        return gt.call($e);
                      if (Tt && (gt = $e[Tt]) != null)
                        return new Gt(gt.call($e));
                      hn = "@@asyncIterator", Tt = "@@iterator";
                    }
                    throw new TypeError("Object is not async iterable");
                  }(mu);
                case 11:
                  return et.next = 13, B.next();
                case 13:
                  if (I = !(ke = et.sent).done)
                    return ke = ke.value, X = ke.width, Q = ke.height, ke = ke.type, et.next = 18, ot(this._cameraInfo.deviceId, X, Q, ke, this._browserInfo, this._allCameras, this._oPub);
                  et.next = 32;
                  break;
                case 18:
                  if (ve = et.sent, ke = ve && ve.height, dt = ve.height === Q && ve.width === X || ve.height === X && ve.width === Q, ke && dt) {
                    et.next = 27;
                    break;
                  }
                  return et.next = 24, ot(this._cameraInfo.deviceId, X, Q, "ideal", this._browserInfo, this._allCameras, this._oPub);
                case 24:
                  return (dt = et.sent) && dt.height && !function($e, gt) {
                    for (var hn = $e.width, Tt = $e.height, Dn = Be(gt); !(Xn = Dn()).done; ) {
                      var Xn = Xn.value;
                      if (Xn.height === Tt && Xn.width === hn)
                        return 1;
                    }
                  }({ width: dt.width, height: dt.height }, m) && (delete dt.type, m.push(dt)), et.abrupt("continue", 29);
                case 27:
                  delete ve.type, m.push(ve);
                case 29:
                  I = !1, et.next = 11;
                  break;
                case 32:
                  et.next = 38;
                  break;
                case 34:
                  et.prev = 34, et.t0 = et.catch(9), x = !0, D = et.t0;
                case 38:
                  if (et.prev = 38, et.prev = 39, I && B.return != null)
                    return et.next = 43, B.return();
                  et.next = 43;
                  break;
                case 43:
                  if (et.prev = 43, x)
                    throw D;
                  et.next = 46;
                  break;
                case 46:
                  return et.finish(43);
                case 47:
                  return et.finish(38);
                case 48:
                  return this._allResolutions = m, et.abrupt("return", m);
                case 50:
                case "end":
                  return et.stop();
              }
          }, f, this, [[9, 34, 38, 48], [39, , 43, 47]]);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), W.setResolution = function() {
        var g = C(p().mark(function f(b, m) {
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  if (this.playing())
                    return I.abrupt("return", this.play(b, m, this._cameraManager));
                  I.next = 2;
                  break;
                case 2:
                  return this._curResolution = { width: b, height: m }, I.abrupt("return", this._curResolution);
                case 4:
                case "end":
                  return I.stop();
              }
          }, f, this);
        }));
        return function(f, b) {
          return g.apply(this, arguments);
        };
      }(), W.getCurrentResolution = function() {
        return this._curResolution;
      }, W.getCameraInfo = function() {
        return this._cameraInfo;
      }, W.destroy = function() {
        this.stop(), this._cameraInfo = null, this._allCameras = null, this._allResolutions = null, this._videoEle = null, this._browserInfo = null, this.videoGlCvs && (this.videoGlCvs.width = 0, this.videoGlCvs.height = 0), this.videoGlCvs = null;
      }, W.stop = function() {
        this._videoEle && this._videoEle.srcObject && (this._videoEle.srcObject.getTracks().forEach(function(g) {
          g.stop();
        }), this._videoEle.srcObject = null, this._videoTrack = null);
      }, W.getDeviceId = function(g) {
        return g && (g = g.getVideoTracks(), g.length) ? (this._videoTrack = g[0], this._videoTrack.getSettings().deviceId) : "";
      }, W.updateCameraInfo = function(g) {
        var f = {};
        return g && (g = g.getVideoTracks()).length && (this._videoTrack = g[0], g = { deviceId: (f = this._videoTrack.getSettings()).deviceId, label: this._videoTrack.label }, this._cameraInfo = g), f;
      }, W.getBestMediaStream = function() {
        var g = C(p().mark(function f(b, m, I) {
          var x, D, B, X;
          return p().wrap(function(Q) {
            for (; ; )
              switch (Q.prev = Q.next) {
                case 0:
                  return this.videoSettings = lt(this._cameraInfo.deviceId, b, m, I, !0, this._browserInfo, this._allCameras, this._isUser), x = this.videoSettings, Q.prev = 2, Q.next = 5, Lt(x, !0, this._browserInfo, this._allCameras);
                case 5:
                  if (D = Q.sent, B = this.getDeviceId(D), this._cameraManager && x.bFmEnvironment && !this._isUser)
                    return Q.next = 10, this._cameraManager.getAllCamerasInfo();
                  Q.next = 21;
                  break;
                case 10:
                  if (this._allCameras = Q.sent, this.videoSettings = lt(this._cameraInfo.deviceId, b, m, I, !0, this._browserInfo, this._allCameras, this._isUser), typeof (x = this.videoSettings).video == "boolean" && (x.video = {}), (X = (X = x.video.deviceId) && (X.exact || X.ideal || X)) && 0 < B.length && B != X)
                    return D.getTracks().forEach(function(ve) {
                      ve.stop();
                    }), Q.next = 20, Lt(x, !0, this._browserInfo, this._allCameras);
                  Q.next = 21;
                  break;
                case 20:
                  D = Q.sent;
                case 21:
                  return X = this.updateCameraInfo(D), Q.abrupt("return", { settings: X, stream: D });
                case 25:
                  Q.prev = 25, Q.t0 = Q.catch(2), Q.t0.name === "NotAllowedError" || Q.t0.message === "Permission denied" ? this.throwError(Dt.CAMERA_NOT_OPEN) : this.throwError(Dt.FAILED_GET_USERMEDIA);
                case 28:
                case "end":
                  return Q.stop();
              }
          }, f, this, [[2, 25]]);
        }));
        return function(f, b, m) {
          return g.apply(this, arguments);
        };
      }(), W.play = function() {
        var g = C(p().mark(function f(b, m, I) {
          var x, D, B, X, Q;
          return p().wrap(function(ve) {
            for (; ; )
              switch (ve.prev = ve.next) {
                case 0:
                  return (x = this._videoEle) || this.throwError(Dt.VIDEO_ELEMENT_REQUIRED), this._cameraManager = I, this._checkPlugOut(), Q = this._curResolution, X = this._allResolutions, typeof b == "number" && 0 < b && typeof m == "number" && 0 < m || (b = Q ? Q.width : 1280, m = Q ? Q.height : 720), Q = function(ke, dt) {
                    for (var et = ke.width, $e = ke.height, gt = Be(dt); !(hn = gt()).done; ) {
                      var hn = hn.value;
                      if (hn.height === $e && hn.width === et)
                        return hn.type;
                    }
                    return "ideal";
                  }({ width: b, height: m }, X), this.stop(), ve.next = 10, this.getBestMediaStream(b, m, Q);
                case 10:
                  if (D = ve.sent) {
                    ve.next = 13;
                    break;
                  }
                  return ve.abrupt("return", Promise.reject(Dt.NO_CAMERA_SELECTED));
                case 13:
                  return B = D.settings, X = D.stream, x.srcObject = X, ve.next = 17, new Promise(function(ke) {
                    x.onloadedmetadata = function(dt) {
                      ke(dt);
                    };
                  });
                case 17:
                  return ve.prev = 17, ve.next = 20, x.play();
                case 20:
                  ve.next = 28;
                  break;
                case 22:
                  return ve.prev = 22, ve.t0 = ve.catch(17), ve.next = 26, new Promise(function(ke) {
                    setTimeout(ke, 1e3);
                  });
                case 26:
                  return ve.next = 28, x.play();
                case 28:
                  return Q = { width: x.videoWidth, height: x.videoHeight }, B.width && B.height && (B.width === b && B.height === m || B.width === m && B.height === b) && (Q.width = b, Q.height = m), this._curResolution = Q, this._oPub.emit("onPlayed", x), ve.abrupt("return", Q);
                case 33:
                case "end":
                  return ve.stop();
              }
          }, f, this, [[17, 22]]);
        }));
        return function(f, b, m) {
          return g.apply(this, arguments);
        };
      }(), W.pause = function() {
        this._videoEle && this._videoEle.pause();
      }, W.resume = function() {
        this._videoEle && this.paused() && this.playing() && this._videoEle.play();
      }, W.paused = function() {
        return !!this._videoEle && this._videoEle.paused;
      }, W.playing = function() {
        if (this._isPlugOut)
          return !1;
        if (this._videoEle && this._videoEle.srcObject)
          try {
            var g = this._videoEle.srcObject;
            if (g) {
              var f = g.getVideoTracks();
              if (f && f.length !== 0)
                return !0;
            }
          } catch (b) {
            this.throwError(b);
          }
        return !1;
      }, W.getStatus = function() {
        return this.playing() ? this.paused() ? "paused" : "playing" : "stopped";
      }, W.getVideoSetting = function() {
        return this.videoSettings;
      }, W.toggleCamera = function(g, f, b) {
        return this._isUser = !this._isUser, this._cameraInfo.deviceId = "", this.play(g, f, b);
      }, W.throwError = function(g) {
        this._oPub.emit(ct, g);
      }, W.getCapabilities = function() {
        try {
          var g, f = (g = this._videoTrack) != null && g.getCapabilities ? this._videoTrack.getCapabilities() : {};
        } catch {
          f = {};
        }
        return Fn() || (f.torch = !1), f;
      }, W.getCameraSettings = function() {
        var g;
        return (g = this._videoTrack) == null ? void 0 : g.getSettings();
      }, W.getConstraints = function() {
        var g;
        return (g = this._videoTrack) == null ? void 0 : g.getConstraints();
      }, W._throw_NotSupportException = function() {
        throw this._oPub.emit("onThrowError", Dt.CAMERA_SETTINGS_NOT_SUPPORT), Dt.CAMERA_SETTINGS_NOT_SUPPORT;
      }, W._fireLog = function(g) {
        this._oPub.emit("onLog", g);
      }, W.applyConstraints = function() {
        var g = C(p().mark(function f(b) {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return (m = this._videoTrack) != null && m.applyConstraints || this._throw_NotSupportException(), I.next = 3, (m = this._videoTrack) == null ? void 0 : m.applyConstraints(b);
                case 3:
                  return I.abrupt("return", I.sent);
                case 4:
                case "end":
                  return I.stop();
              }
          }, f, this);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), W.turnOnTorch = function() {
        var g = C(p().mark(function f() {
          return p().wrap(function(b) {
            for (; ; )
              switch (b.prev = b.next) {
                case 0:
                  if (this._videoTrack) {
                    b.next = 2;
                    break;
                  }
                  return b.abrupt("return");
                case 2:
                  if (this.getCapabilities().torch)
                    return b.next = 6, this._videoTrack.applyConstraints({ advanced: [{ torch: !0 }] });
                  b.next = 7;
                  break;
                case 6:
                  return b.abrupt("return", b.sent);
                case 7:
                  this._throw_NotSupportException();
                case 8:
                case "end":
                  return b.stop();
              }
          }, f, this);
        }));
        return function() {
          return g.apply(this, arguments);
        };
      }(), W.turnOffTorch = function() {
        var g = C(p().mark(function f() {
          return p().wrap(function(b) {
            for (; ; )
              switch (b.prev = b.next) {
                case 0:
                  if (this._videoTrack) {
                    b.next = 2;
                    break;
                  }
                  return b.abrupt("return");
                case 2:
                  if (this.getCapabilities().torch)
                    return b.next = 6, this._videoTrack.applyConstraints({ advanced: [{ torch: !1 }] });
                  b.next = 7;
                  break;
                case 6:
                  return b.abrupt("return", b.sent);
                case 7:
                  this._throw_NotSupportException();
                case 8:
                case "end":
                  return b.stop();
              }
          }, f, this);
        }));
        return function() {
          return g.apply(this, arguments);
        };
      }(), W.setColorTemperature = function() {
        var g = C(p().mark(function f(b) {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return m = this.getCapabilities(), (m = m.colorTemperature) || this._throw_NotSupportException(), b < m.min ? b = m.min : b > m.max && (b = m.max), I.next = 6, (m = this._videoTrack) == null ? void 0 : m.applyConstraints({ advanced: [{ colorTemperature: b }] });
                case 6:
                  return I.abrupt("return", I.sent);
                case 7:
                case "end":
                  return I.stop();
              }
          }, f, this);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), W.setExposureCompensation = function() {
        var g = C(p().mark(function f(b) {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return m = this.getCapabilities(), (m = m.exposureCompensation) || this._throw_NotSupportException(), b < m.min ? b = m.min : b > m.max && (b = m.max), I.next = 6, (m = this._videoTrack) == null ? void 0 : m.applyConstraints({ advanced: [{ exposureCompensation: b }] });
                case 6:
                  return I.abrupt("return", I.sent);
                case 7:
                case "end":
                  return I.stop();
              }
          }, f, this);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), W.setZoom = function() {
        var g = C(p().mark(function f(b) {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return m = this.getCapabilities(), (m = m.zoom) || this._throw_NotSupportException(), b < m.min ? b = m.min : b > m.max && (b = m.max), I.next = 6, (m = this._videoTrack) == null ? void 0 : m.applyConstraints({ advanced: [{ zoom: b }] });
                case 6:
                  return I.abrupt("return", I.sent);
                case 7:
                case "end":
                  return I.stop();
              }
          }, f, this);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), W.setFrameRate = function() {
        var g = C(p().mark(function f(b) {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return m = this.getCapabilities(), (m = m.frameRate) || this._throw_NotSupportException(), b < m.min ? b = m.min : b > m.max && (b = m.max), I.next = 6, (m = this._videoTrack) == null ? void 0 : m.applyConstraints({ width: { ideal: Math.max(this._videoEle.videoWidth, this._videoEle.videoHeight) }, frameRate: b });
                case 6:
                  return I.abrupt("return", I.sent);
                case 7:
                case "end":
                  return I.stop();
              }
          }, f, this);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), te;
    }();
    function Zo(te, W) {
      var g, f = typeof Symbol < "u" && te[Symbol.iterator] || te["@@iterator"];
      if (f)
        return (f = f.call(te)).next.bind(f);
      if (Array.isArray(te) || (f = function(b, m) {
        if (b) {
          if (typeof b == "string")
            return zi(b, m);
          var I = Object.prototype.toString.call(b).slice(8, -1);
          return (I = I === "Object" && b.constructor ? b.constructor.name : I) === "Map" || I === "Set" ? Array.from(b) : I === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I) ? zi(b, m) : void 0;
        }
      }(te)) || W && te && typeof te.length == "number")
        return f && (te = f), g = 0, function() {
          return g >= te.length ? { done: !0 } : { done: !1, value: te[g++] };
        };
      throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
    }
    function zi(te, W) {
      (W == null || W > te.length) && (W = te.length);
      for (var g = 0, f = new Array(W); g < W; g++)
        f[g] = te[g];
      return f;
    }
    var vs = function(te) {
      function W(f, b) {
        return f = te.call(this, f) || this, f._allCamerasInfo = [], f.selectedCamera = null, f.videoEl = null, f._trackCameraDeviceChanged(), f._initEl(b), f;
      }
      Y(W, te);
      var g = W.prototype;
      return g.selectCamera = function() {
        var f = C(p().mark(function b(m) {
          var I, x, D, B, X;
          return p().wrap(function(Q) {
            for (; ; )
              switch (Q.prev = Q.next) {
                case 0:
                  if (this._allCamerasInfo.length) {
                    Q.next = 3;
                    break;
                  }
                  return Q.next = 3, this.getAllCamerasInfo();
                case 3:
                  if (I = this._allCamerasInfo, m = m || new Gs(null, this.videoEl, I, this._oPub), x = null, !mn(m)) {
                    Q.next = 21;
                    break;
                  }
                  D = { deviceId: "", label: "" }, B = 0;
                case 9:
                  if (!(B < I.length)) {
                    Q.next = 19;
                    break;
                  }
                  if (X = I[B], m === X.deviceId)
                    return D.deviceId = X.deviceId, D.label = X.label, x = new Gs(D, this.videoEl, I, this._oPub), Q.abrupt("break", 19);
                  Q.next = 16;
                  break;
                case 16:
                  B++, Q.next = 9;
                  break;
                case 19:
                  Q.next = 22;
                  break;
                case 21:
                  m instanceof Gs && (x = m);
                case 22:
                  return this.selectedCamera && this.selectedCamera.destroy(), this.selectedCamera = x, Q.abrupt("return", x);
                case 25:
                case "end":
                  return Q.stop();
              }
          }, b, this);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.closeCamera = function() {
        this.selectedCamera && (this.selectedCamera.destroy(), this.selectedCamera = null);
      }, g.getCurrentCamera = function() {
        return this.selectedCamera;
      }, g.destroy = function() {
        this._oPub.off("onCameraChanged");
      }, g.getAllCamerasInfo = function() {
        var f = C(p().mark(function b() {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return js(this._oPub), I.next = 3, function() {
                    return ys.apply(this, arguments);
                  }();
                case 3:
                  return m = I.sent, this._allCamerasInfo = m, I.abrupt("return", this._allCamerasInfo);
                case 6:
                case "end":
                  return I.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g._trackCameraDeviceChanged = function() {
        var f = this;
        navigator.mediaDevices !== void 0 && (navigator.mediaDevices.ondevicechange = function(b) {
          f._cameraChangedHandler(b);
        });
      }, g._initEl = function(f) {
        f ? this.videoEl = f : ((f = document.createElement("video")).className = ce.cameraVideo, f.playsInline = !0, f.muted = !0, this.videoEl = f, this._oPub.on("onPlayed", function(b) {
          zs(b);
        }));
      }, g._cameraChangedHandler = function(f) {
      }, g._requestCamera = function() {
        var f = C(p().mark(function b() {
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  return js(this._oPub), this._allCamerasInfo.length === 0 && this._oPub.emit("onThrowError", Dt.NO_CAMERA), m.next = 4, this._checkAllowCamera();
                case 4:
                case "end":
                  return m.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g._checkAllowCamera = function() {
        var f = C(p().mark(function b() {
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                case "end":
                  return m.stop();
              }
          }, b);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.requestCamera = function() {
        var f = C(p().mark(function b() {
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                case "end":
                  return m.stop();
              }
          }, b);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), W.cameraExist = function(f, b) {
        return !0;
      }, W;
    }(Bn);
    function js(te) {
      if (navigator.mediaDevices === void 0)
        throw W = location.origin, g = "https://", W.lastIndexOf(g, 0) !== 0 ? (pe(te, Dt.HTTPS_REQUIRED), Dt.HTTPS_REQUIRED) : (pe(te, Dt.MEDIADEVICES_NOT_IMPL), Dt.MEDIADEVICES_NOT_IMPL);
      if (navigator.mediaDevices.getUserMedia === void 0)
        throw pe(te, Dt.GETUSERMEDIA_NOT_IMPL), Dt.GETUSERMEDIA_NOT_IMPL;
      var W, g;
    }
    function ys() {
      return (ys = C(p().mark(function te() {
        var W, g, f, b, m, I, x, D;
        return p().wrap(function(B) {
          for (; ; )
            switch (B.prev = B.next) {
              case 0:
                return B.next = 3, navigator.mediaDevices.enumerateDevices();
              case 3:
                W = B.sent, g = [], b = f = 0;
              case 7:
                if (!(b < W.length)) {
                  B.next = 24;
                  break;
                }
                if ((m = W[b]).kind !== "videoinput")
                  return B.abrupt("continue", 21);
                B.next = 11;
                break;
              case 11:
                I = !1, x = Zo(g);
              case 13:
                if ((D = x()).done) {
                  B.next = 20;
                  break;
                }
                if (D.value.deviceId === m.deviceId)
                  return I = !0, B.abrupt("break", 20);
                B.next = 18;
                break;
              case 18:
                B.next = 13;
                break;
              case 20:
                I || ((D = {}).deviceId = m.deviceId, D.label = !m.label || /^camera\s[0-9]+$/.test(m.label) ? "camera " + f++ : m.label, g.push(D));
              case 21:
                b++, B.next = 7;
                break;
              case 24:
                return B.abrupt("return", g);
              case 25:
              case "end":
                return B.stop();
            }
        }, te);
      }))).apply(this, arguments);
    }
    function zs(te, W, g) {
      var f, b, m, I;
      te && (b = te.style.objectFit, W = W && g ? (I = W, g) : (I = te.videoWidth, te.videoHeight), m = (g = te.getBoundingClientRect()).width, g = g.height, f = { zoom: 1, left: 0, top: 0 }, b === "cover" ? (b = Math.max(m / I, g / W), f.zoom = b) : (m = (m - I * (b = Math.min(m / I, g / W))) / 2, I = (g - W * b) / 2, f.zoom = b, f.left = m, f.top = I), te.videoLayout = f);
    }
    var Hs = function(te) {
      function W(f, b) {
        return f = te.call(this, f) || this, f._showCanvas = null, f._containerEl = null, f._videoEl = null, f._obEl = null, f._srcVideoInfo = null, f._videoEl = b, f._showCanvas = f.createCameraCanvas(), f;
      }
      Y(W, te);
      var g = W.prototype;
      return g.createCameraCanvas = function() {
        var f = document.createElement("canvas");
        return f.className = ce.cameraCvs, f.addEventListener("touchstart", function(b) {
          b.type === "touchstart" && b.cancelable && b.preventDefault();
        }, { passive: !1 }), f;
      }, g.getCameraDvs = function() {
        return this._showCanvas;
      }, g.resetVideoInfo = function() {
        var f;
        N.navInfo.bMobile && (N.navInfo.biPhone || N.navInfo.biPad) && (f = (f = window.orientation) == 0 || f == 180 ? 0 : 90, this._srcVideoInfo = { videoWidth: this._videoEl.videoWidth, videoHeight: this._videoEl.videoHeight, orientation: f });
      }, g.bindView = function(m) {
        var b = this, m = mn(m) ? document.getElementById(m) : m;
        if (!m)
          return !1;
        var I = this._showCanvas, x = this._videoEl, D = x.parentElement, D = (D != null && D.remove(), document.createElement("div")), B = (D.className = ce.cameraContainer, D.appendChild(x), D.appendChild(I), this._containerEl = D, m.appendChild(D), this.updateCanvasRect(), this);
        return this._obEl = new Vn(D, function(X) {
          var Q, ve, ke;
          N.navInfo.bMobile && (N.navInfo.biPhone || N.navInfo.biPad) && B._videoEl && 0 < B._videoEl.videoWidth && 0 < B._videoEl.videoHeight && (ke = (ke = window.orientation) == 0 || ke == 180 ? 0 : 90, B._srcVideoInfo ? ke == B._srcVideoInfo.orientation ? (Q = B._srcVideoInfo.videoWidth, ve = B._srcVideoInfo.videoHeight) : (ve = B._srcVideoInfo.videoHeight, Q = B._srcVideoInfo.videoWidth) : (B._srcVideoInfo = { videoWidth: B._videoEl.videoWidth, videoHeight: B._videoEl.videoHeight, orientation: ke }, Q = B._srcVideoInfo.videoWidth, ve = B._srcVideoInfo.videoHeight)), zs(B._videoEl, Q, ve), B.updateCanvasRect(), b._oPub.emit("uiResize", X);
        }), !0;
      }, g.updateCanvasRect = function() {
        this._showCanvas && (this._showCanvas.width = this._showCanvas.getBoundingClientRect().width, this._showCanvas.height = this._showCanvas.getBoundingClientRect().height);
      }, g.unbindView = function() {
        this._obEl && (this._obEl.dispose(), this._obEl = null);
        var f = this._containerEl;
        return !!f && (f.remove(), !0);
      }, g.dispose = function() {
        this.unbindView(), this._showCanvas && (this._showCanvas.removeEventListener("touchstart", null), this._showCanvas.width = 1, this._showCanvas.height = 1, this._showCanvas.remove()), this._showCanvas = null, this._containerEl = null, this._videoEl = null, this._obEl = null;
      }, W;
    }(Bn);
    function pu(te, W) {
      for (var g = 0; g < W.length; g++) {
        var f = W[g];
        f.enumerable = f.enumerable || !1, f.configurable = !0, "value" in f && (f.writable = !0), Object.defineProperty(te, f.key, f);
      }
    }
    var ni, bs = function() {
      function te() {
        this.path = [], this._removedPages = [], this._currentPage = null;
      }
      var W, g = te.prototype;
      return g.setCurrentPage = function() {
        var f = C(p().mark(function b(m, I) {
          var x, D, B;
          return p().wrap(function(X) {
            for (; ; )
              switch (X.prev = X.next) {
                case 0:
                  if (I === void 0 && (I = !0), x = this._currentPage, this._currentPage = m, x && x instanceof qe ? (D = x.getDcs()) && D.emit("blurPage") : m && m instanceof qe && m.pageName == Me && (D = m.getDcs()) && D.emit("focusPage"), m)
                    return X.next = 7, function() {
                      return Wt.apply(this, arguments);
                    }(m, I);
                  X.next = 7;
                  break;
                case 7:
                  x && !m && (B = x.getDcs()) && (B.off("blurPage"), B.off("focusPage"));
                case 8:
                case "end":
                  return X.stop();
              }
          }, b, this);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.navigateTo = function() {
        var f = C(p().mark(function b(m, I) {
          return p().wrap(function(x) {
            for (; ; )
              switch (x.prev = x.next) {
                case 0:
                  return I === void 0 && (I = !0), this.path.push(m), x.next = 4, this.setCurrentPage(m, I);
                case 4:
                case "end":
                  return x.stop();
              }
          }, b, this);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.redirectTo = function(f) {
        this.closeAllPages(), this.navigateTo(f);
      }, g.redirectToHome = function() {
        var f = C(p().mark(function b() {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return m = this.path.length, this.navigatePopPageSync(m - 1), I.next = 4, this.resetCurrentPageAfterPopPage();
                case 4:
                case "end":
                  return I.stop();
              }
          }, b, this);
        }));
        return function() {
          return f.apply(this, arguments);
        };
      }(), g.navigatePopPageSync = function(f, b) {
        f === void 0 && (f = 1), b === void 0 && (b = !0);
        for (var m = this.path; 0 < f; ) {
          var I = m.pop();
          I && !I.isDestroyed && (b && I.hide(), this._removedPages.push(I)), f--;
        }
        return null;
      }, g.getRemovedPages = function() {
        return this._removedPages;
      }, g.destroyRemovedPages = function() {
        this._removedPages.forEach(function(f) {
          ge(f);
        }), this._removedPages = [];
      }, g.closeAllPages = function() {
        this.path.forEach(function(f) {
          ge(f);
        }), this.path = [], this.destroyRemovedPages(), this.setCurrentPage(null);
      }, g.hideAllPages = function() {
        this.path.forEach(function(f) {
          f.hide();
        });
      }, g.showAllPages = function() {
        this.path.forEach(function(f) {
          f.show();
        });
      }, g.showDocumentScanPage = function(f, b, m) {
        return f = new qe(f, b, m), this.navigateTo(f), m.captureLoop && (m.captureLoop.setEnable(), m.once("onPlayed", function() {
          m.captureLoop && m.captureLoop.startLoop({ dcs: m });
        }), m.once("video-closed", function() {
          _i(m), m.captureLoop && m.captureLoop.stopCaptureLoop();
        }), (m.config.scannerViewer.autoDetect || m.config.scannerViewer.autoScan) && (m.captureLoop.loadLoopTypeFromConfig(), m.captureLoop.clearCaptureTimer()), m.on("blurPage", function() {
          m.captureLoop && m.captureLoop.isEnable() && (m.captureLoop.saveLoopTypeToConfig(), m.captureLoop.stopCaptureLoop(), m.captureLoop.setDisable());
        }), m.on("focusPage", function() {
          m.captureLoop && (m.captureLoop.setEnable(), m.config.scannerViewer.autoScan.enableAutoScan ? m.captureLoop.setAutoScan() : m.config.scannerViewer.autoDetect.enableAutoDetect && !m.config.scannerViewer.autoScan.enableAutoScan ? m.captureLoop.setAutoDetect() : m.captureLoop.changeStyle());
        })), f.moveMultipleImgPosition(), f;
      }, g.showInsertPage = function(x, b, m) {
        var I = m.getCurrentPage(), x = new ya(x, b, m);
        return this.navigateTo(x), I.hide(), m.captureLoop && (m.captureLoop.setEnable(), m.once("onPlayed", function() {
          m.captureLoop && m.captureLoop.startLoop({ dcs: m });
        }), m.once("video-closed", function() {
          _i(m), m.captureLoop && m.captureLoop.stopCaptureLoop();
        }), m.captureLoop.loadLoopTypeFromConfig()), x;
      }, g.showCropPage = function(f, X, m) {
        var I = m.getCurrentPage(), x = new vo(f, X, m), D = f.documentEditorSettings || m.config.documentEditorSettings, B = this, X = f.doFillData ? x.fillOrigCustomDataFirstTime() : Promise.resolve();
        return X.then(C(p().mark(function Q() {
          var ve;
          return p().wrap(function(ke) {
            for (; ; )
              switch (ke.prev = ke.next) {
                case 0:
                  if (x.isDestroyed)
                    return ke.abrupt("return");
                  ke.next = 2;
                  break;
                case 2:
                  return ve = pt(f.visibility) && pt(D.visibility), ke.next = 5, B.navigateTo(x, ve);
                case 5:
                  !x.isDestroyed && ve ? x.render() : x.hide(), I && I.pageName != mt.toLowerCase && I.hide();
                case 7:
                case "end":
                  return ke.stop();
              }
          }, Q);
        }))), x;
      }, g.showDocumentEditPage = function(f, X, m) {
        var I, x = m.getCurrentPage(), D = new ro(f, X, m), B = f.documentEditorSettings || m.config.documentEditorSettings, X = f.doFillData ? D.fillOrigCustomDataFirstTime() : Promise.resolve();
        return pt(f.visibility) && (I = this, X.then(C(p().mark(function Q() {
          var ve;
          return p().wrap(function(ke) {
            for (; ; )
              switch (ke.prev = ke.next) {
                case 0:
                  if (D.isDestroyed)
                    return ke.abrupt("return");
                  ke.next = 2;
                  break;
                case 2:
                  return ve = pt(f.visibility) && pt(B.visibility), ke.next = 5, I.navigateTo(D, ve);
                case 5:
                  !D.isDestroyed && ve ? D.render() : D.hide(), x && x.pageName != at.toLowerCase && x.hide();
                case 7:
                case "end":
                  return ke.stop();
              }
          }, Q);
        })))), D;
      }, g.removePage = function() {
        var f = C(p().mark(function b(m) {
          var I, x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if ((I = this.path.length) <= 1)
                    return this.navigatePopPageSync(), D.next = 5, this.resetCurrentPageAfterPopPage();
                  D.next = 6;
                  break;
                case 5:
                  return D.abrupt("return");
                case 6:
                  if (this.path[I - 1] == m)
                    return this.navigatePopPageSync(), D.next = 11, this.resetCurrentPageAfterPopPage();
                  D.next = 12;
                  break;
                case 11:
                  return D.abrupt("return");
                case 12:
                  x = I - 2;
                case 13:
                  if (!(0 <= x)) {
                    D.next = 21;
                    break;
                  }
                  if (this.path[x] == m)
                    return this.path.splice(x, 1), D.abrupt("return");
                  D.next = 18;
                  break;
                case 18:
                  x--, D.next = 13;
                  break;
                case 21:
                case "end":
                  return D.stop();
              }
          }, b, this);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g.resetCurrentPageAfterPopPage = function() {
        var f = C(p().mark(function b(m) {
          var I, x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if (m === void 0 && (m = !0), 0 < (I = this.path).length)
                    return x = I[I.length - 1], D.next = 6, this.setCurrentPage(x, m);
                  D.next = 7;
                  break;
                case 6:
                  return D.abrupt("return", x);
                case 7:
                  return D.abrupt("return", null);
                case 8:
                case "end":
                  return D.stop();
              }
          }, b, this);
        }));
        return function(b) {
          return f.apply(this, arguments);
        };
      }(), g = te, (W = [{ key: "currentPage", get: function() {
        return this._currentPage;
      } }, { key: "previousPage", get: function() {
        var f = this.path;
        return 2 <= f.length ? f[f.length - 2] : null;
      } }]) && pu(g.prototype, W), Object.defineProperty(g, "prototype", { writable: !1 }), te;
    }(), ba = ((fo = ni = ni || {})[fo.None = 0] = "None", fo[fo.AutoScan = 1] = "AutoScan", fo[fo.AutoDetect = 2] = "AutoDetect", function() {
      function te(g) {
        this.isLooping = !1, this._dcs = null, this._cameraCvs = null, this._enabled = !1, this._loopType = ni.None, this.loopTimer = null, this.lastConfirmTime = 0, this.lastDetectTime = (/* @__PURE__ */ new Date()).getTime(), this._captureLoopSub = new Nt(), this._oldLoopType = [], this._dcs = g;
      }
      var W = te.prototype;
      return W.dispose = function() {
        this._loopType = ni.None, this.clearCaptureTimer(), this._dcs = null, this._captureLoopSub = null, this._cameraCvs = null;
      }, W.resetLastConfirmTime = function() {
        this.lastConfirmTime = 0;
      }, W.setAutoScan = function() {
        this.innerSetNextLoopType(ni.AutoScan);
      }, W.setAutoDetect = function() {
        this.innerSetNextLoopType(ni.AutoDetect);
      }, W.innerSetNextLoopType = function(g) {
        this._loopType == te.EnumLoopType_ManualScan ? this._oldLoopType.length == 0 ? this._oldLoopType.push(g) : this._oldLoopType[0] = g : (this._loopType = g, this.changeStyle(), this.clearCaptureTimer(), this.startLoop({ dcs: this._dcs }));
      }, W.saveLoopTypeToConfig = function() {
        this._loopType == ni.AutoScan ? (this._dcs.config.scannerViewer.autoScan.enableAutoScan = !0, this._dcs.config.scannerViewer.autoDetect.enableAutoDetect = !0) : this._loopType == ni.AutoDetect ? (this._dcs.config.scannerViewer.autoScan.enableAutoScan = !1, this._dcs.config.scannerViewer.autoDetect.enableAutoDetect = !0) : (this._dcs.config.scannerViewer.autoScan.enableAutoScan = !1, this._dcs.config.scannerViewer.autoDetect.enableAutoDetect = !1);
      }, W.loadLoopTypeFromConfig = function() {
        this.isAutoButtonEnabled() && this._dcs.config.scannerViewer.autoScan.enableAutoScan ? (this._loopType = ni.AutoScan, this._dcs.config.scannerViewer.autoDetect.enableAutoDetect = !0) : this.isAutoButtonEnabled() && this._dcs.config.scannerViewer.autoDetect.enableAutoDetect ? this._loopType = ni.AutoDetect : (this._loopType = ni.None, this._dcs.config.scannerViewer.autoDetect.enableAutoDetect = !1, this._dcs.config.scannerViewer.autoScan.enableAutoScan = !1), this.changeStyle();
      }, W.getLoopType = function() {
        return this._loopType;
      }, W._setLoopType = function(g) {
        this._loopType = g;
      }, W.setIsLooping = function(g) {
        this.isLooping = g;
      }, W.getIsLooping = function() {
        return this.isLooping;
      }, W.setEnable = function() {
        this.isAutoButtonEnabled() && (this._enabled = !0);
      }, W.setDisable = function() {
        this._enabled = !1;
      }, W.isEnable = function() {
        return this._enabled;
      }, W.isAutoButtonDisabled = function() {
        return this._dcs.config.scannerViewer.enableBorderDetection != 1;
      }, W.isAutoButtonEnabled = function() {
        return this._dcs.config.scannerViewer.enableBorderDetection == 1;
      }, W.startManualCapture = function(g) {
        var f = this;
        $n.log("startManualCapture"), this._oldLoopType.push(this._loopType), this._captureLoopSub.once("onCapturedImage", function() {
          var b = C(p().mark(function m(I, x, D) {
            var B, X, Q;
            return p().wrap(function(ve) {
              for (; ; )
                switch (ve.prev = ve.next) {
                  case 0:
                    return B = { dcs: I, page: I.getCurrentPage() }, ve.prev = 1, X = I.config.scannerViewer, X = (X === void 0 ? {} : X).continuousScan, (X === void 0 ? {} : X).enableContinuousScan == 0 && f.loadLoopTypeFromConfig(), ve.next = 7, B.page.emitEx("onSaveCapture", !1, B, x, !0, D);
                  case 7:
                    ve.next = 14;
                    break;
                  case 9:
                    ve.prev = 9, ve.t0 = ve.catch(1), $n.log("manual capture error."), $n.log(ve.t0), ve.t0.code == 702 && (I.hideLoading("startManualCapture 1"), I.emit(ct, ve.t0));
                  case 14:
                    if (!I.captureLoop) {
                      ve.next = 30;
                      break;
                    }
                    if ((Q = I.captureLoop._oldLoopType).length <= 0)
                      return $n.log("manual capture stack error."), I.captureLoop._loopType = ni.None, I.hideLoading("startManualCapture 2"), ve.abrupt("return");
                    ve.next = 21;
                    break;
                  case 21:
                    if (I.captureLoop._loopType = Q.pop(), I.captureLoop.resetLastConfirmTime(), I.captureLoop.loopTypeIsManualScan())
                      return I.captureLoop.innerLoop(B), I.hideLoading("startManualCapture 3"), ve.abrupt("return");
                    ve.next = 27;
                    break;
                  case 27:
                    I.hideLoading("startManualCapture 4"), I.captureLoop.innerLoop(B), I.captureLoop.changeStyle();
                  case 30:
                  case "end":
                    return ve.stop();
                }
            }, m, null, [[1, 9]]);
          }));
          return function(m, I, x) {
            return b.apply(this, arguments);
          };
        }()), this.lastConfirmTime = (/* @__PURE__ */ new Date()).getTime(), this.loopTypeIsManualScan() || (this._loopType = te.EnumLoopType_ManualScan, this._dcs.showLoading("startManualCapture start loop"), this.isLooping || (this.clearCaptureTimer(), this.innerLoop(g)));
      }, W.startLoop = function(g) {
        $n.log("startLoop"), this.isAutoButtonDisabled() && (this._loopType = ni.None), this._loopType == ni.AutoScan || this._loopType == ni.AutoDetect ? this.loopTimer == null && (this.lastConfirmTime = 0, this.isLooping || (this.clearCaptureTimer(), this.innerLoop(g))) : (this.stopCaptureLoop(), this._dcs.hideLoading("startLoop")), this.changeStyle();
      }, W.changeStyle = function() {
        var g = (g = this._dcs) == null || (g = g.getCurrentPage()) == null ? void 0 : g.element;
        if (g) {
          var f = g == null ? void 0 : g.querySelector("." + ce.BUTTON_PREFIX + "autoCapture"), b = g == null ? void 0 : g.querySelector("." + ce.BUTTON_PREFIX + "captureBtn"), g = g == null ? void 0 : g.querySelector("." + ce.BUTTON_PREFIX + "detectCamera");
          if (this.isAutoButtonDisabled())
            return f && (f.classList.remove(ce.footerSelected), f.classList.add(ce.disable), f.bSelected = !1), g && b.classList.remove(ce.capturing), void (g && (g.classList.remove(ce.headerSelected), g.classList.add(ce.disable), g.bSelected = !1));
          this._loopType == ni.AutoScan ? (f && (f.classList.add(ce.footerSelected), f.bSelected = !0), g && b.classList.add(ce.capturing), g && (g.classList.add(ce.headerSelected), g.bSelected = !0)) : this._loopType == ni.AutoDetect ? (f && (f.classList.remove(ce.footerSelected), f.bSelected = !1), g && b.classList.remove(ce.capturing), g && (g.classList.add(ce.headerSelected), g.bSelected = !0)) : (f && (f.classList.remove(ce.footerSelected), f.classList.remove(ce.disable), f.bSelected = !1), g && b.classList.remove(ce.capturing), g && (g.classList.remove(ce.headerSelected), g.classList.remove(ce.disable), g.bSelected = !1));
        }
      }, W.getDetectRemainTime = function() {
        var f = (/* @__PURE__ */ new Date()).getTime(), g = se(this._dcs, "config.scannerViewer.autoDetect").fpsLimit, f = f - this.lastDetectTime;
        return Math.max(0, 1e3 / (g === void 0 ? 3 : g) - f);
      }, W.loopTypeIsNone = function() {
        return this._loopType == ni.None;
      }, W.loopTypeIsManualScan = function() {
        return this._loopType == te.EnumLoopType_ManualScan;
      }, W.innerLoop = function(g) {
        var f = this, b = g.dcs, m = b.getAreaDetectCallback(), I = this.getDetectRemainTime();
        if (m)
          return this.loopTypeIsNone() ? this.exitAutoCaptureFromInner(0) : void ((this._loopType != ni.AutoScan && this._loopType != ni.AutoDetect || this.isEnable()) && (clearTimeout(this.loopTimer), this.loopTimer = setTimeout(C(p().mark(function x() {
            var D;
            return p().wrap(function(B) {
              for (; ; )
                switch (B.prev = B.next) {
                  case 0:
                    if (f.loopTypeIsNone())
                      return B.abrupt("return", f.exitAutoCaptureFromInner(1));
                    B.next = 2;
                    break;
                  case 2:
                    if (f.isLooping)
                      return B.abrupt("return");
                    B.next = 4;
                    break;
                  case 4:
                    return f.isLooping = !0, B.next = 7, f.innerLoopTimeout(g);
                  case 7:
                    D = B.sent, f.isLooping = !1, D && (f._loopType == ni.AutoScan || f._loopType == ni.AutoDetect) && f.isEnable() ? setTimeout(function() {
                      !b.captureLoop || b.captureLoop._loopType != ni.AutoScan && b.captureLoop._loopType != ni.AutoDetect || !b.captureLoop.isEnable() || b.captureLoop.innerLoop(g);
                    }, 10) : f.clearCaptureTimer();
                  case 10:
                  case "end":
                    return B.stop();
                }
            }, x);
          })), I)));
      }, W.innerLoopTimeout = function() {
        var g = C(p().mark(function f(b) {
          var m, I, x, D, B, X, Q, ve, ke, dt, et, $e;
          return p().wrap(function(gt) {
            for (; ; )
              switch (gt.prev = gt.next) {
                case 0:
                  if (m = b.dcs, this.lastDetectTime = (/* @__PURE__ */ new Date()).getTime(), x = m.config.scannerViewer, I = x.polygonStyle, I = I === void 0 ? { stroke: "#fe8e14", strokeWidth: "2px", dashed: "solid" } : I, x = x.autoDetect, x = x === void 0 ? {} : x, D = !0, gt.prev = 4, m.getStatus() != "playing")
                    return gt.abrupt("return", !0);
                  gt.next = 7;
                  break;
                case 7:
                  return gt.next = 9, m.capture(D);
                case 9:
                  if (B = gt.sent, this.loopTypeIsNone())
                    return gt.abrupt("return", this.exitAutoCaptureFromInner(2));
                  gt.next = 14;
                  break;
                case 14:
                  if (this.loopTypeIsManualScan())
                    return this._captureLoopSub.emit("onCapturedImage", m, B), gt.abrupt("return", !1);
                  gt.next = 17;
                  break;
                case 17:
                  return gt.prev = 17, gt.next = 20, Rn(B, m);
                case 20:
                  if (X = gt.sent, this._loopType != ni.AutoScan) {
                    gt.next = 69;
                    break;
                  }
                  if (Q = X.cornerPoints, this.loopTypeIsNone())
                    return $n.log("loop setImageDataBack"), m.setImageDataBack(B.imageData), gt.abrupt("return", this.exitAutoCaptureFromInner(3));
                  gt.next = 27;
                  break;
                case 27:
                  if (!X.detectedArea) {
                    gt.next = 58;
                    break;
                  }
                  if (this.drawArea(Q, I, m.getVideoElement()), this.loopTypeIsNone())
                    return $n.log("loop setImageDataBack"), m.setImageDataBack(B.imageData), gt.abrupt("return", this.exitAutoCaptureFromInner(5));
                  gt.next = 35;
                  break;
                case 35:
                  if (this.loopTypeIsManualScan())
                    return this._captureLoopSub.emit("onCapturedImage", m, B, X), gt.abrupt("return", !1);
                  gt.next = 38;
                  break;
                case 38:
                  if (dt = x.autoCaptureDelay, dt = dt === void 0 ? 2e3 : dt, ve = (/* @__PURE__ */ new Date()).getTime(), !(this._loopType == ni.AutoScan && 0 < this.lastConfirmTime && ve - this.lastConfirmTime > dt)) {
                    gt.next = 55;
                    break;
                  }
                  if (m.showLoading("auto capture"), gt.prev = 43, dt = b.dcs.getCurrentPage())
                    return gt.next = 48, dt.emitEx("onSaveCapture", !0, b, B, !0, X);
                  gt.next = 48;
                  break;
                case 48:
                  return gt.prev = 48, m.hideLoading("auto capture"), gt.finish(48);
                case 51:
                  return m.captureLoop.resetLastConfirmTime(), gt.abrupt("return", !0);
                case 55:
                  this.lastConfirmTime == 0 && (this.lastConfirmTime = ve);
                case 56:
                  gt.next = 62;
                  break;
                case 58:
                  $n.log("[capture loop] detect result:"), $n.log(X), this.lastConfirmTime = 0, this.clearCanvas();
                case 62:
                  if (this.loopTypeIsManualScan())
                    return this._captureLoopSub.emit("onCapturedImage", m, B, X), gt.abrupt("return", !1);
                  gt.next = 65;
                  break;
                case 65:
                  $n.log("loop setImageDataBack"), m.setImageDataBack(B.imageData), gt.next = 85;
                  break;
                case 69:
                  if (this._loopType != ni.AutoDetect) {
                    gt.next = 82;
                    break;
                  }
                  if (ke = X.cornerPoints, $n.log("loop setImageDataBack"), m.setImageDataBack(B.imageData), this.loopTypeIsNone())
                    return gt.abrupt("return", this.exitAutoCaptureFromInner(3));
                  gt.next = 75;
                  break;
                case 75:
                  if (dt = B.imageWidth, et = B.imageHeight, et = Vt(ke, dt, et), this.loopTypeIsNone())
                    return gt.abrupt("return", this.exitAutoCaptureFromInner(4));
                  gt.next = 79;
                  break;
                case 79:
                  et ? this.clearCanvas() : ($e = m.getVideoElement(), m.captureLoop.drawArea(ke, I, $e)), gt.next = 85;
                  break;
                case 82:
                  if (this.loopTypeIsManualScan())
                    return this._captureLoopSub.emit("onCapturedImage", m, B, X), gt.abrupt("return", !1);
                  gt.next = 85;
                  break;
                case 85:
                  gt.next = 90;
                  break;
                case 87:
                  gt.prev = 87, gt.t0 = gt.catch(17), $n.log(gt.t0);
                case 90:
                  gt.next = 95;
                  break;
                case 92:
                  gt.prev = 92, gt.t1 = gt.catch(4), $n.log(gt.t1);
                case 95:
                  return gt.abrupt("return", !0);
                case 97:
                case "end":
                  return gt.stop();
              }
          }, f, this, [[4, 92], [17, 87], [43, , 48, 51]]);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), W.exitAutoCaptureFromInner = function(g) {
        return this.clearCaptureTimer(), this._dcs.hideLoading("innerLoop exitAutoCaptureFromInner"), $n.log("auto capture loop: loopType is None " + g), !1;
      }, W.clearCaptureTimer = function() {
        clearTimeout(this.loopTimer), this.loopTimer = null, this.lastConfirmTime = 0;
      }, W.stopCaptureLoop = function() {
        this._loopType = ni.None, this.clearCaptureTimer(), this.clearCanvas();
      }, W.getCameraCvs = function() {
        return this._cameraCvs || (this._cameraCvs = this._dcs.getCameraView().getCameraDvs()), this._cameraCvs;
      }, W.clearCanvas = function() {
        var g = this.getCameraCvs();
        g && g.getContext("2d", { willReadFrequently: !0 }).clearRect(0, 0, g.width, g.height);
      }, W.drawArea = function(g, f, I) {
        var D = this.getCameraCvs(), m = D.getContext("2d", { willReadFrequently: !0 }), D = (m.save(), m.clearRect(0, 0, D.width, D.height), I.videoLayout), I = D.zoom, x = D.left, D = D.top;
        m.translate(x, D), m.scale(I, I), m.beginPath(), m.moveTo(g[0], g[1]);
        for (var B = 2; B < g.length; B += 2) {
          var X = g[B], Q = g[B + 1];
          m.lineTo(X, Q);
        }
        m.closePath(), x = parseInt(f.strokeWidth, 10) / I, m.strokeStyle = f.stroke, m.lineCap = "round", m.lineWidth = x, f.dash === "dashed" && m.setLineDash([Math.max(2, x), Math.max(4, 2 * x)]), m.stroke(), m.restore();
      }, te;
    }()), Aa = (ba.EnumLoopType_ManualScan = 3, ba._defaultConfig = { autoScan: { enableAutoScan: !1 }, autoDetect: { enableAutoDetect: !1 }, enableBorderDetection: !0 }, /* @__PURE__ */ new Map()), os = /* @__PURE__ */ new Map(), ws = /* @__PURE__ */ new Map(), as = function() {
      function te(g) {
        this._cameraMng = null, this._cameraView = null, this._uiRouters = null, this.captureLoop = null, this.filterApplyToAllValue = void 0, this.curFilterValue = void 0, this._runPlaying = !1, this._loadingConfig = { imageSource: null, background: "rgba(0, 0, 0, 0.2)" }, this._loadingNumber = 0, this.config = {}, this._container = null, this._savedFilename = null, this._externalViewerUid = null, this._oPub = null, this._areaDetectCallback = null, this._perspectiveCallback = null, this._licenseCallback = null, this._filterHandleList = [], this._savePhotoCallback = null, this._insertPhotoCallback = null, this._removeImageCallback = null, this._changeIndexCallback = null, this._freeCallback = null, this._loadCallback = null, this._exiting = !1, this._oPub = g, this._cameraMng = new vs(this._oPub), this._cameraView = new Hs(this._oPub, this._cameraMng.videoEl), this._uiRouters = new bs(), this.captureLoop = new ba(this), document.addEventListener("click", io), window.addEventListener("focus", vu), window.addEventListener("blur", _u);
      }
      var W = te.prototype;
      return W.bindView = function(g) {
        return (g = mn(g = g === void 0 ? this._container : g) ? document.getElementById(g) : g) ? (this._cameraView || (this._cameraView = new Hs(this._oPub, this._cameraMng.videoEl)), this.captureLoop || (this.captureLoop = new ba(this)), this._cameraView.bindView(g), this._container = g, !0) : (pe(this._oPub, Dt.VIDEO_ELEMENT_REQUIRED), !1);
      }, W.unbindView = function() {
        var g;
        return (this._container = null) != (g = this._cameraView) && g.dispose(), (this._cameraView = null) != (g = this.captureLoop) && g.dispose(), this.captureLoop = null, document.body.classList.remove(ce.overflowHidden), !0;
      }, W.getVideoElement = function() {
        return this._cameraMng.videoEl;
      }, W.getCameraView = function() {
        return this._cameraView;
      }, W.play = function() {
        var g = C(p().mark(function f(b, m, I, x, D) {
          var B, X, Q, ve;
          return p().wrap(function(ke) {
            for (; ; )
              switch (ke.prev = ke.next) {
                case 0:
                  if (D === void 0 && (D = !1), this._checkLicense()) {
                    ke.next = 4;
                    break;
                  }
                  return ke.abrupt("return", { width: 0, height: 0 });
                case 4:
                  if (!D && this._runPlaying)
                    return ke.abrupt("return", Promise.reject(Dt.VIDEO_NOT_STOP));
                  ke.next = 6;
                  break;
                case 6:
                  if (b && (b instanceof HTMLElement || Ks(this._oPub, typeof b, "HTMLElement"), this.bindView(b)), this._container) {
                    ke.next = 9;
                    break;
                  }
                  return ke.abrupt("return", Promise.reject(Dt.VIDEO_ELEMENT_REQUIRED));
                case 9:
                  if (m === void 0 || Hr(m) || Ks(this._oPub, typeof m, "number"), I === void 0 || Hr(I) || Ks(this._oPub, typeof I, "number"), this._runPlaying = !0, ke.prev = 12, X = this._cameraMng.getCurrentCamera()) {
                    ke.next = 18;
                    break;
                  }
                  return ke.next = 17, this._cameraMng.selectCamera();
                case 17:
                  X = ke.sent;
                case 18:
                  return x == null ? (Q = Ue.scannerViewer.fullScreen, this.config && this.config.scannerViewer && this.config.scannerViewer.fullScreen != null && (Q = this.config.scannerViewer.fullScreen), X.setFillMode(Q)) : X.setFillMode(x), ke.next = 21, X.play(m, I, this._cameraMng);
                case 21:
                  return B = ke.sent, Q = this.config.scannerViewer, ve = (Q === void 0 ? {} : Q).torch, (ve = ve === void 0 ? {} : ve).enableTorch ? ve.on = !0 : ve.on = !1, ke.next = 27, gi(this);
                case 27:
                  ke.next = 33;
                  break;
                case 29:
                  return ke.prev = 29, ke.t0 = ke.catch(12), this._setStopPlayingFlag(), ke.abrupt("return", Promise.reject(ke.t0));
                case 33:
                  return ke.abrupt("return", B);
                case 34:
                case "end":
                  return ke.stop();
              }
          }, f, this, [[12, 29]]);
        }));
        return function(f, b, m, I, x) {
          return g.apply(this, arguments);
        };
      }(), W.pause = function() {
        var g = this._cameraMng.getCurrentCamera();
        g && g.pause();
      }, W.stop = function() {
        var g = this._cameraMng.getCurrentCamera();
        g && (this._setStopPlayingFlag(), g.stop());
      }, W.resume = function() {
        var g = this._cameraMng.getCurrentCamera();
        g && g.resume();
      }, W.getStatus = function() {
        var g = this._cameraMng.getCurrentCamera();
        return g ? g.getStatus() : "";
      }, W.capture = function(g) {
        var f = this._cameraMng.getCurrentCamera();
        return f ? f.capture(g) : Promise.reject(Dt.NO_CAMERA_SELECTED);
      }, W.setImageDataBack = function(g) {
        var f = this._cameraMng.getCurrentCamera();
        return f ? f.setImageDataBack(g) : (pe(this._oPub, Dt.NO_CAMERA_SELECTED), null);
      }, W.getSourceList = function() {
        return this._cameraMng.getAllCamerasInfo();
      }, W.selectSource = function() {
        var g = C(p().mark(function f(b) {
          var m;
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return I.next = 2, this._cameraMng.selectCamera(b);
                case 2:
                  if (m = I.sent, this._setStopPlayingFlag(), m) {
                    I.next = 6;
                    break;
                  }
                  return I.abrupt("return", Promise.reject(Dt.SOURCE_NOT_FOUND));
                case 6:
                  return I.abrupt("return", m == null ? void 0 : m.getCameraInfo());
                case 7:
                case "end":
                  return I.stop();
              }
          }, f, this);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), W._setStopPlayingFlag = function() {
        var g = this.config.scannerViewer, g = (g === void 0 ? {} : g).torch;
        (g === void 0 ? {} : g).on = !1, gi(this), this._runPlaying = !1;
      }, W.closeSource = function() {
        var g = C(p().mark(function f() {
          var b;
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  if (b = this._cameraMng.getCurrentCamera())
                    return this._setStopPlayingFlag(), b = b.getCameraInfo(), this._cameraMng.closeCamera(), m.abrupt("return", b);
                  m.next = 6;
                  break;
                case 6:
                  return this._runPlaying = !1, m.abrupt("return", Promise.reject(Dt.NO_CAMERA_SELECTED));
                case 8:
                case "end":
                  return m.stop();
              }
          }, f, this);
        }));
        return function() {
          return g.apply(this, arguments);
        };
      }(), W.getCurrentSource = function() {
        var g = C(p().mark(function f() {
          var b;
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  if (b = this._cameraMng.getCurrentCamera())
                    return m.abrupt("return", b.getCameraInfo());
                  m.next = 3;
                  break;
                case 3:
                  return m.abrupt("return", null);
                case 4:
                case "end":
                  return m.stop();
              }
          }, f, this);
        }));
        return function() {
          return g.apply(this, arguments);
        };
      }(), W.getCurrentResolution = function() {
        var g = C(p().mark(function f() {
          var b;
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  if (b = this._cameraMng.getCurrentCamera())
                    return m.abrupt("return", b.getCurrentResolution());
                  m.next = 3;
                  break;
                case 3:
                  return m.abrupt("return", Promise.reject(Dt.NO_CAMERA_SELECTED));
                case 4:
                case "end":
                  return m.stop();
              }
          }, f, this);
        }));
        return function() {
          return g.apply(this, arguments);
        };
      }(), W.getResolution = function() {
        var g = C(p().mark(function f() {
          var b;
          return p().wrap(function(m) {
            for (; ; )
              switch (m.prev = m.next) {
                case 0:
                  if (b = this._cameraMng.getCurrentCamera())
                    return m.abrupt("return", b.getResolutions());
                  m.next = 3;
                  break;
                case 3:
                  return m.abrupt("return", Promise.reject(Dt.NO_CAMERA_SELECTED));
                case 4:
                case "end":
                  return m.stop();
              }
          }, f, this);
        }));
        return function() {
          return g.apply(this, arguments);
        };
      }(), W.setResolution = function() {
        var g = C(p().mark(function f(b) {
          var m, I, x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if (m = this._cameraMng.getCurrentCamera())
                    return Ln(b), b.width <= 0 || b.height, I = this.config.scannerViewer, I = (I === void 0 ? {} : I).torch, (I = I === void 0 ? {} : I).enableTorch ? I.on = !0 : I.on = !1, D.next = 9, m.setResolution(b.width, b.height);
                  D.next = 13;
                  break;
                case 9:
                  return x = D.sent, D.next = 12, gi(this);
                case 12:
                  return D.abrupt("return", x);
                case 13:
                  return D.abrupt("return", Promise.reject(Dt.NO_CAMERA_SELECTED));
                case 14:
                case "end":
                  return D.stop();
              }
          }, f, this);
        }));
        return function(f) {
          return g.apply(this, arguments);
        };
      }(), W.getVideoSetting = function() {
        var g = this._cameraMng.getCurrentCamera();
        return g ? g.getVideoSetting() : (pe(this._oPub, Dt.NO_CAMERA_SELECTED), null);
      }, W.toggleCamera = function() {
        var g = C(p().mark(function f(b, m) {
          var I, x, D;
          return p().wrap(function(B) {
            for (; ; )
              switch (B.prev = B.next) {
                case 0:
                  if (I = this._cameraMng.getCurrentCamera())
                    return x = this.config.scannerViewer, x = (x === void 0 ? {} : x).torch, (x = x === void 0 ? {} : x).enableTorch ? x.on = !0 : x.on = !1, B.next = 7, I.toggleCamera(b, m, this._cameraMng);
                  B.next = 11;
                  break;
                case 7:
                  return D = B.sent, B.next = 10, gi(this);
                case 10:
                  return B.abrupt("return", D);
                case 11:
                  return B.abrupt("return", Promise.reject(Dt.NO_CAMERA_SELECTED));
                case 12:
                case "end":
                  return B.stop();
              }
          }, f, this);
        }));
        return function(f, b) {
          return g.apply(this, arguments);
        };
      }(), W.getCapabilities = function() {
        var g = this._cameraMng.getCurrentCamera();
        return g ? g.getCapabilities() : {};
      }, W.turnOnTorch = function() {
        var g = this._cameraMng.getCurrentCamera();
        return g ? g.turnOnTorch() : Promise.reject(Dt.NO_CAMERA_SELECTED);
      }, W.turnOffTorch = function() {
        var g = this._cameraMng.getCurrentCamera();
        return g ? g.turnOffTorch() : Promise.reject(Dt.NO_CAMERA_SELECTED);
      }, W.isTorch = function() {
        var g = this.config.scannerViewer, g = (g === void 0 ? {} : g).torch;
        return (g === void 0 ? {} : g).on;
      }, W.show = function() {
        return !!this._container && this.bindView();
      }, W.isHidden = function() {
        return !this._container;
      }, W.hide = function() {
        this.unbindView();
      }, W.getAreaDetectCallback = function() {
        return this._areaDetectCallback;
      }, W.getPerspectiveCallback = function() {
        return this._perspectiveCallback;
      }, W.getLicenseCallback = function() {
        return this._licenseCallback;
      }, W.getSavePhotoCallback = function() {
        return this._savePhotoCallback;
      }, W.getInsertPhotoCallback = function() {
        return this._insertPhotoCallback;
      }, W.getRemovePhotoCallback = function() {
        return this._removeImageCallback;
      }, W.getChangeIndexCallback = function() {
        return this._changeIndexCallback;
      }, W.getFreeHandle = function() {
        return this._freeCallback;
      }, W.getLoadCallback = function() {
        return this._loadCallback;
      }, W.bindAreaDetectFunction = function(g) {
        return !!ln(g) && (this._areaDetectCallback = g, !0);
      }, W.bindPerspectiveFunction = function(g) {
        return !!ln(g) && (this._perspectiveCallback = g, !0);
      }, W.bindLicenseCallback = function(g) {
        return !!ln(g) && (this._licenseCallback = g, !0);
      }, W.bindLoadHandle = function(g) {
        return !!ln(g) && (this._loadCallback = g, !0);
      }, W.bindFilterHandleList = function(g) {
        return !!_o(g) && (this._filterHandleList = g, !0);
      }, W.bindFreeHandle = function(g) {
        return !!ln(g) && (this._freeCallback = g, !0);
      }, W.bindSavePhotoCallback = function(g) {
        return !!ln(g) && (this._savePhotoCallback = g, !0);
      }, W.bindInsertPhotoCallback = function(g) {
        return !!ln(g) && (this._insertPhotoCallback = g, !0);
      }, W.bindRemovePhotoCallback = function(g) {
        return !!ln(g) && (this._removeImageCallback = g, !0);
      }, W.bindChangeIndexCallback = function(g) {
        return !!ln(g) && (this._changeIndexCallback = g, !0);
      }, W.showDocumentScanPage = function() {
        var g = C(p().mark(function f(b, m) {
          var I, x, D;
          return p().wrap(function(B) {
            for (; ; )
              switch (B.prev = B.next) {
                case 0:
                  return b === void 0 && (b = {}), this.captureLoop || (this.captureLoop = new ba(this)), I = this._uiRouters.showDocumentScanPage(b, m, this), x = this, D = function() {
                    var X = C(p().mark(function Q(ve, ke, dt) {
                      var et, $e;
                      return p().wrap(function(gt) {
                        for (; ; )
                          switch (gt.prev = gt.next) {
                            case 0:
                              return et = I.insertDataByIndex(ve, ke, dt), $e = { action: "add", fileName: I.getFileName(), fromViewerBufferChanged: !1 }, gt.next = 4, x.syncFile($e, [et]);
                            case 4:
                            case "end":
                              return gt.stop();
                          }
                      }, Q);
                    }));
                    return function(Q, ve, ke) {
                      return X.apply(this, arguments);
                    };
                  }(), this.bindInsertPhotoCallback(D), D = function() {
                    var X = C(p().mark(function Q(ve, ke) {
                      var dt;
                      return p().wrap(function(et) {
                        for (; ; )
                          switch (et.prev = et.next) {
                            case 0:
                              return I.removeDataByIndex(ve, ke), dt = { action: "remove", fileName: I.getFileName(), fromViewerBufferChanged: !1 }, et.next = 4, x.syncFile(dt);
                            case 4:
                            case "end":
                              return et.stop();
                          }
                      }, Q);
                    }));
                    return function(Q, ve) {
                      return X.apply(this, arguments);
                    };
                  }(), this.bindRemovePhotoCallback(D), B.next = 10, I.playVideo();
                case 10:
                  return B.abrupt("return", I);
                case 11:
                case "end":
                  return B.stop();
              }
          }, f, this);
        }));
        return function(f, b) {
          return g.apply(this, arguments);
        };
      }(), W.showInsertPage = function() {
        var g = C(p().mark(function f(b, m) {
          var I;
          return p().wrap(function(x) {
            for (; ; )
              switch (x.prev = x.next) {
                case 0:
                  return b === void 0 && (b = {}), I = this._uiRouters.showInsertPage(b, m, this), x.next = 4, I.playVideo();
                case 4:
                  return x.abrupt("return", I);
                case 5:
                case "end":
                  return x.stop();
              }
          }, f, this);
        }));
        return function(f, b) {
          return g.apply(this, arguments);
        };
      }(), W.showDocumentEditPage = function(g, f) {
        return this._uiRouters.showDocumentEditPage(g, f, this);
      }, W.showCropPage = function(g, f) {
        return this._uiRouters.showCropPage(g, f, this);
      }, W.navigateToPage = function() {
        var g = C(p().mark(function f(b, m) {
          return p().wrap(function(I) {
            for (; ; )
              switch (I.prev = I.next) {
                case 0:
                  return I.abrupt("return", this._uiRouters.navigateTo(b, m));
                case 1:
                case "end":
                  return I.stop();
              }
          }, f, this);
        }));
        return function(f, b) {
          return g.apply(this, arguments);
        };
      }(), W.destroyRemovedPages = function() {
        return this._uiRouters.destroyRemovedPages();
      }, W.navigateBack = function() {
        var g = C(p().mark(function f(b, m) {
          var I, x, D, B;
          return p().wrap(function(X) {
            for (; ; )
              switch (X.prev = X.next) {
                case 0:
                  return m === void 0 && (m = !0), I = B = !0, (b = b === void 0 ? 1 : b) == 1 && (I = B = !1), this._uiRouters.navigatePopPageSync(b, B), X.next = 7, this._uiRouters.resetCurrentPageAfterPopPage(I);
                case 7:
                  if (x = X.sent, D = this._uiRouters.getRemovedPages(), b != 1) {
                    X.next = 14;
                    break;
                  }
                  if (x)
                    return X.next = 13, x.show();
                  X.next = 13;
                  break;
                case 13:
                  D[0].hide();
                case 14:
                  if (m && this._uiRouters.destroyRemovedPages(), (!x || x instanceof qe) && this._cameraMng.getCurrentCamera() && this.closeSource(), !x) {
                    X.next = 20;
                    break;
                  }
                  x instanceof qe && (B = x.element.children[1], this.bindView(B), x.pageName == Me && x.getDcs().emit("focusPage")), X.next = 22;
                  break;
                case 20:
                  return this.unbindView(), X.abrupt("return", []);
                case 22:
                  return X.abrupt("return", D);
                case 23:
                case "end":
                  return X.stop();
              }
          }, f, this);
        }));
        return function(f, b) {
          return g.apply(this, arguments);
        };
      }(), W.redirectToHome = function() {
        var g = C(p().mark(function f() {
          return p().wrap(function(b) {
            for (; ; )
              switch (b.prev = b.next) {
                case 0:
                  return b.abrupt("return", this._uiRouters.redirectToHome());
                case 1:
                case "end":
                  return b.stop();
              }
          }, f, this);
        }));
        return function() {
          return g.apply(this, arguments);
        };
      }(), W.closeAllPages = function() {
        var g;
        this._uiRouters.closeAllPages(), (g = this._container) != null && g.classList.remove(ce.relative), this._cameraMng.getCurrentCamera() && this.closeSource(), document.body.classList.remove(ce.overflowHidden);
      }, W._checkLicense = function() {
        return !this._licenseCallback || this._licenseCallback().errorCode === 0 || (pe(this._oPub, Dt.LICENSE_INVALID), !1);
      }, W.showLoading = function(m) {
        this._loadingNumber++, m && $n.log(["show loading: ", m, ", num: ", this._loadingNumber].join(""));
        var f, b, m = this.getCurrentPage(), I = { background: this._loadingConfig.background };
        m instanceof pr ? (f = (f = (f = m.options) == null || (f = f.documentEditorSettings) == null ? void 0 : f.bodyStyle) || se(this.config.documentEditorSettings, "bodyStyle"), m.options && m.options.documentEditorSettings && (I.wrapperEl = m.options.documentEditorSettings.element, I.wrapperEl && (I.confined = !0))) : m instanceof qe && (f = (f = (b = m.options) == null || (b = b.scannerViewer) == null ? void 0 : b.bodyStyle) || se(this.config.scannerViewer, "bodyStyle"), m.options && m.options.scannerViewer && (I.wrapperEl = m.options.scannerViewer.element, I.wrapperEl && (I.confined = !0))), f && mn(f.loaderBarSource) && f.loaderBarSource != "" && (I.imageSource = f.loaderBarSource), this._loadingConfig.imageSource !== I.imageSource && (this._loadingConfig.imageSource = I.imageSource, N.Lib.hideMask()), N.Lib.showMask(I);
      }, W.setLoadingNumber = function(g) {
        this._loadingNumber = g;
      }, W.hideLoading = function(g) {
        this._loadingNumber--, g && $n.log(["hide loading: ", g, ", num: ", this._loadingNumber].join("")), this._loadingNumber < 1 && (N.Lib.hideMask(), this._loadingNumber = 0);
      }, W.getDetectArea = function(g) {
        return Rn(g, this);
      }, W.filterHandler = function() {
        var g = C(p().mark(function f(b, m) {
          var I, x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  return I = se(this.config, "documentEditorSettings.filter"), I = I.valueList, x = this._filterHandleList, D.abrupt("return", function() {
                    return hr.apply(this, arguments);
                  }(this, b, x, I, m));
                case 4:
                case "end":
                  return D.stop();
              }
          }, f, this);
        }));
        return function(f, b) {
          return g.apply(this, arguments);
        };
      }(), W.filterHandlerByIImageData = function() {
        var g = C(p().mark(function f(b, m, I) {
          var x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  return x = this.config.documentEditorSettings, x = (x === void 0 ? {} : x).filter, x = (x === void 0 ? {} : x).valueList, D.abrupt("return", function() {
                    return Vr.apply(this, arguments);
                  }(b, m, this._filterHandleList, x, I));
                case 4:
                case "end":
                  return D.stop();
              }
          }, f, this);
        }));
        return function(f, b, m) {
          return g.apply(this, arguments);
        };
      }(), W.packageBlobItemFromIImageData = function(g, f, b, m, I) {
        return Ut(g, this, f = f === void 0 ? !1 : f, b = b === void 0 ? !1 : b, m = m === void 0 ? !1 : m, null, I);
      }, W.on = function(g, f) {
        this._oPub.on(g, f);
      }, W.once = function(g, f) {
        this._oPub.once(g, f);
      }, W.off = function(g, f) {
        this._oPub.off(g, f);
      }, W.emit = function(g) {
        for (var f, b = arguments.length, m = new Array(1 < b ? b - 1 : 0), I = 1; I < b; I++)
          m[I - 1] = arguments[I];
        (f = this._oPub).emit.apply(f, [g].concat(m));
      }, W.getCurrentPage = function() {
        return this._uiRouters.currentPage;
      }, W.getPreviousPage = function() {
        return this._uiRouters.previousPage;
      }, W.getPreviousPageByPage = function(g) {
        for (var f = this._uiRouters.path, b = -1, m = 0; m < f.length; m++)
          if (g == f[m]) {
            b = m;
            break;
          }
        return 0 < b ? f[b - 1] : null;
      }, W.dispose = function() {
        var g;
        document.removeEventListener("click", io), window.removeEventListener("focus", vu), window.removeEventListener("blur", _u), Aa.clear(), os.clear(), (this._container = null) != (g = this._cameraView) && g.dispose(), (this._cameraView = null) != (g = this._cameraMng) && g.destroy(), (this._cameraMng = null) != (g = this._uiRouters) && g.closeAllPages(), (this._uiRouters = null) != (g = this.captureLoop) && g.dispose(), this.captureLoop = null, this._areaDetectCallback = null, this._perspectiveCallback = null, this._licenseCallback = null, this._filterHandleList = [], this._savePhotoCallback = null, this._insertPhotoCallback = null, this._removeImageCallback = null, this._changeIndexCallback = null, this._freeCallback = null, this._loadCallback = null;
      }, W.addGlobalClickEvent = function(g, f) {
        var b;
        ln(f) && (b = this, Aa.set(g, function(m) {
          f(m, b) && b.removeGlobalClickEvent(m);
        }));
      }, W.removeGlobalClickEvent = function(g) {
        Aa.delete(g);
      }, W.addGlobalBlurEvent = function(g, f) {
        var b;
        ln(f) && (b = this, os.set(g, function(m) {
          f(m, b) && b.removeGlobalBlurEvent(m);
        }));
      }, W.removeGlobalBlurEvent = function(g) {
        os.delete(g);
      }, W.addGlobalFocusEvent = function(g, f) {
        var b;
        ln(f) && (b = this, ws.set(g, function(m) {
          f(m, b) && b.removeGlobalBlurEvent(m);
        }));
      }, W.removeGlobalFocusEvent = function(g) {
        ws.delete(g);
      }, W.getCameraManage = function() {
        return this._cameraMng;
      }, W.isRunPlaying = function() {
        return this._runPlaying;
      }, W.setSavedFilename = function(g) {
        this._savedFilename = g;
      }, W.getSavedFilename = function() {
        return this._savedFilename;
      }, W.setExternalViewerUid = function(g) {
        g && (this._externalViewerUid = g);
      }, W.getExternalViewerUid = function() {
        return this._externalViewerUid;
      }, W.openSavedFile = function(g) {
        var f = this.getSavedFilename();
        return f ? ($n.log("open file: " + f), g.File.openFile(f)) : ($n.log("open file: " + fe), g.File.openFile(fe)), !0;
      }, W.clearExitFlag = function() {
        this._exiting = !1;
      }, W.exit = function(g) {
        this._exiting = !0, this._freeCallback && this._freeCallback(), document.body.classList.remove(ce.overflowHidden), this._savedFilename && (this._savedFilename = null);
      }, W.syncFile = function() {
        var g = C(p().mark(function f(b, m) {
          var I, x, D, B, X;
          return p().wrap(function(Q) {
            for (; ; )
              switch (Q.prev = Q.next) {
                case 0:
                  if (this._exiting)
                    return Q.abrupt("return");
                  Q.next = 2;
                  break;
                case 2:
                  if (x = !1, !b) {
                    Q.next = 13;
                    break;
                  }
                  if (b.action != "remove") {
                    Q.next = 8;
                    break;
                  }
                  Q.next = 12;
                  break;
                case 8:
                  if (b.action != "add") {
                    Q.next = 11;
                    break;
                  }
                  Q.next = 12;
                  break;
                case 11:
                  return Q.abrupt("return");
                case 12:
                  b.fromViewerBufferChanged !== void 0 && (x = b.fromViewerBufferChanged);
                case 13:
                  if (!(0 < (D = this._uiRouters.path).length)) {
                    Q.next = 60;
                    break;
                  }
                  if ((X = D[D.length - 1]) instanceof pr && (B = X.getCurrentEditUid()), !((I = D[0]) instanceof qe)) {
                    Q.next = 32;
                    break;
                  }
                  if (1 < D.length)
                    return I = D[1], Q.next = 23, I.syncFileFromExternalEvent(x, m);
                  Q.next = 30;
                  break;
                case 23:
                  if (!(2 < D.length)) {
                    Q.next = 30;
                    break;
                  }
                  if (!((I = D[2]) instanceof ya)) {
                    Q.next = 28;
                    break;
                  }
                  Q.next = 30;
                  break;
                case 28:
                  return Q.next = 30, I.syncFileFromExternalEvent(x, m);
                case 30:
                  Q.next = 41;
                  break;
                case 32:
                  return Q.next = 34, I.syncFileFromExternalEvent(x);
                case 34:
                  if (!(1 < D.length)) {
                    Q.next = 41;
                    break;
                  }
                  if (!((I = D[1]) instanceof ya)) {
                    Q.next = 39;
                    break;
                  }
                  Q.next = 41;
                  break;
                case 39:
                  return Q.next = 41, I.syncFileFromExternalEvent(x);
                case 41:
                  if (!X) {
                    Q.next = 60;
                    break;
                  }
                  if (mn(B) && B != "") {
                    Q.next = 48;
                    break;
                  }
                  if (X instanceof ya)
                    return Q.abrupt("return");
                  Q.next = 47;
                  break;
                case 47:
                  B = X.getCurrentEditUid();
                case 48:
                  if (!(X instanceof ro)) {
                    Q.next = 58;
                    break;
                  }
                  if (X.isInsertingImage())
                    return Q.next = 52, X.clearInserting();
                  Q.next = 54;
                  break;
                case 52:
                  Q.next = 56;
                  break;
                case 54:
                  return Q.next = 56, X.setEditUidAfterSyncImages(B);
                case 56:
                  Q.next = 60;
                  break;
                case 58:
                  return Q.next = 60, X.setEditUidAfterSyncImages(B);
                case 60:
                case "end":
                  return Q.stop();
              }
          }, f, this);
        }));
        return function(f, b) {
          return g.apply(this, arguments);
        };
      }(), te;
    }();
    function io(te) {
      Aa.forEach(function(W, g) {
        ln(W) && W(g);
      });
    }
    function _u(te) {
      os.forEach(function(W, g) {
        ln(W) && W(g);
      });
    }
    function vu(te) {
      ws.forEach(function(W, g) {
        ln(W) && W(g);
      });
    }
    function Ks(te, W, g) {
      te && te.emit("typeError", W, g);
    }
    var Ju = function(te) {
      function W(f) {
        var b = te.call(this, f) || this;
        return b.errorMessage = "ok", b.errorCode = 0, b._on(Te, b.updateErrorMessage.bind(H(b))), b._on("error", function(m) {
          var I = new Error(m.message);
          I.code = m.code, b._throwErr(I);
        }), b._on("typeError", function(m, I) {
          m = new Error("Argument of type '" + m + "' is not assignable to parameter of type '" + I + "'."), m.code = -4212, b._throwErr(m);
        }), b._on("valueError", function(m, I) {
          m = new Error("The argument '" + m + "' is not valid for the parameter '" + I + "'"), m.code = -4213, b._throwErr(m);
        }), b;
      }
      Y(W, te);
      var g = W.prototype;
      return g.updateErrorMessage = function(f) {
        this.errorMessage = f.message, this.errorCode = f.code;
      }, g._throwErr = function(f) {
        throw this.updateErrorMessage(f), f;
      }, W;
    }(Bn), fo = function(te) {
      function W() {
        var f = te.call(this, new Nt()) || this;
        return f.Error = null, f.videoShown = !1, f._dvs = null, f._dcs = null, f.Error = new Ju(f._oPub), f._dcs = new as(f._oPub), f;
      }
      Y(W, te);
      var g = W.prototype;
      return g.notBindCamera = function() {
        return !this._dvs;
      }, g.bindCamera = function(f, b) {
        (this._dvs = b).ViewControl.bindViewUiConstructor(f), this._dcs.off("video-closed"), this._dcs.off("video-error");
        var m = this;
        return this._dcs.on("video-closed", function() {
          var I;
          m.videoShown = !1, _i(m._dcs), (I = b._oPub) != null && I.emit("video-closed");
        }), this._dcs.on("video-error", function(I) {
          b._oPub.emit("video-error", I);
        }), this._e(J), !0;
      }, g.bindAreaDetectFunction = function(f) {
        return ln(f) ? (this._dcs.bindAreaDetectFunction(f), this._e(J), !0) : (this._e(E), !1);
      }, g.bindPerspectiveFunction = function(f) {
        return ln(f) ? (this._dcs.bindPerspectiveFunction(f), this._e(J), !0) : (this._e(E), !1);
      }, g.bindLicenseCallback = function(f) {
        return ln(f) ? (this._dcs.bindLicenseCallback(f), this._e(J), !0) : (this._e(E), !1);
      }, g.bindSavePhotoCallback = function(f) {
        return ln(f) ? (this._dcs.bindSavePhotoCallback(f), this._e(J), !0) : (this._e(E), !1);
      }, g.bindInsertPhotoCallback = function(f) {
        return ln(f) ? (this._dcs.bindInsertPhotoCallback(f), this._e(J), !0) : (this._e(E), !1);
      }, g.bindRemovePhotoCallback = function(f) {
        return ln(f) ? (this._dcs.bindRemovePhotoCallback(f), this._e(J), !0) : (this._e(E), !1);
      }, g.bindFilterHandleList = function(f) {
        return this._dcs.bindFilterHandleList(f), this._e(J), !0;
      }, g.bindFreeHandle = function(f) {
        return _o(f) ? (this._dcs.bindFreeHandle(f), this._e(J), !0) : (this._e(E), !1);
      }, g._e = function(f) {
        te.prototype._emit.call(this, Te, f);
      }, g.dispose = function() {
        var f;
        te.prototype.dispose.call(this), (f = this.Error) != null && f.dispose(), this.Error = null, this._dcs && (this._dcs.exit(this._dvs), this._dcs.off("video-closed"), this._dcs.off("video-error"), this._dcs.dispose()), this._dcs = null;
      }, g.on = function(f, b) {
        te.prototype._on.call(this, f, b);
      }, g.emit = function(f) {
        for (var b, m = arguments.length, I = new Array(1 < m ? m - 1 : 0), x = 1; x < m; x++)
          I[x - 1] = arguments[x];
        (b = te.prototype._emit).call.apply(b, [this, f].concat(I));
      }, g.off = function(f, b) {
        te.prototype._off.call(this, f, b);
      }, W;
    }(Bn), Bn = function(te) {
      function W() {
        return te.call(this) || this;
      }
      Y(W, te);
      var g = W.prototype;
      return g.showVideo = function() {
        var f = C(p().mark(function b(m, I) {
          var x;
          return p().wrap(function(D) {
            for (; ; )
              switch (D.prev = D.next) {
                case 0:
                  if (this.videoShown)
                    return D.abrupt("return", Promise.reject(Ee));
                  D.next = 2;
                  break;
                case 2:
                  if (m) {
                    D.next = 4;
                    break;
                  }
                  return D.abrupt("return", Promise.reject(Le));
                case 4:
                  if (this._dvs) {
                    D.next = 6;
                    break;
                  }
                  return D.abrupt("return", Promise.reject(me));
                case 6:
                  return this.videoShown = !0, (x = Rr(m, $(Ue))).scannerViewer && (this._dcs.config.scannerViewer = x.scannerViewer), x.documentEditorSettings && (this._dcs.config.documentEditorSettings = x.documentEditorSettings), x.saveData = !0, x.fromInternal = !0, D.prev = 12, this._dcs.clearExitFlag(), this._dcs.setSavedFilename(I), D.next = 17, this._dcs.showDocumentScanPage(x, this._dvs);
                case 17:
                  D.next = 23;
                  break;
                case 19:
                  throw D.prev = 19, D.t0 = D.catch(12), this.videoShown = !1, D.t0;
                case 23:
                  return this.videoShown = !0, D.next = 26, this._dcs.getCurrentResolution();
                case 26:
                  return D.abrupt("return", D.sent);
                case 27:
                case "end":
                  return D.stop();
              }
          }, b, this, [[12, 19]]);
        }));
        return function(b, m) {
          return f.apply(this, arguments);
        };
      }(), g.closeVideo = function() {
        this._dcs.closeAllPages(), this._dcs.exit(this._dvs);
      }, W;
    }(fo), fo = function(te) {
      function W() {
        return te.call(this) || this;
      }
      Y(W, te);
      var g = W.prototype;
      return g.createEditPage = function(f, x) {
        if (!x)
          throw Le;
        var m = x.fileName;
        if (!mn(m) || m == "")
          throw Oe;
        var I = x.viewerUid, x = Rr(x, $(Ue));
        x.initFileName = m, x.scannerViewer && (this._dcs.config.scannerViewer = x.scannerViewer, delete x.scannerViewer);
        var D, B, X = !0;
        return x.documentEditorSettings && (this._dcs.config.documentEditorSettings = x.documentEditorSettings, ((B = x.documentEditorSettings.defaultViewerName) === void 0 ? mt : B).toLowerCase() == mt.toLowerCase() ? (D = "crop", mn(B = (B = this._dcs.config) == null || (B = B.documentEditorSettings) == null || (B = B.cropViewer) == null ? void 0 : B.visibility) && B.toLowerCase() == "hidden" && (X = !1)) : D = "edit"), this._dcs.setSavedFilename(m), this._dcs.setExternalViewerUid(I), x.saveData = !0, x.fromInternal = !1, x.curIndex = f, x.doFillData = !0, this._dcs.clearExitFlag(), D == "crop" && X ? this._dcs.showCropPage(x, this._dvs) : this._dcs.showDocumentEditPage(x, this._dvs);
      }, g.syncFile = function(f) {
        this._dcs.syncFile(f);
      }, g.removeEditPage = function(f) {
        try {
          _i(this._dcs), this._dcs.closeAllPages(), this._dcs.stop(), this._dcs.exit(null), f.isDestroyed || f.destroy();
        } catch {
          return !1;
        }
        return !0;
      }, W;
    }(fo);
    window.Dynamsoft || (window.Dynamsoft = {}), window.Dynamsoft.CameraViewer = as, window.Dynamsoft.CameraModel = Bn, window.Dynamsoft.DocumentEditManager = fo;
  }();
});
G.AddonReady(function(l, n) {
  var L;
  l.product.bHTML5Edition && !G.navInfoSync.bIE && (l.DynamicLoadAddonFuns && l.DynamicLoadAddonFuns.push(function(k) {
    function re() {
      this._stwain = k, this._viewer = null;
    }
    re.prototype._getCameraViewer = function() {
      var R;
      return this._viewer == null && (l.log("camera addon: bind viewer."), R = this._stwain, l.product.appendBrowserLicenseWhenServiceMode(R), this._viewer = new G.CameraViewer(), R._ImgManager) && R._ImgManager.getWebViewer() && R._ImgManager.getWebViewer().bindCameraForCameraManager(), this._viewer;
    }, re.prototype._checkWasmAndLic = function() {
      var R = !0, C = this._stwain;
      return !R || C._isMobileMode() || G.DWT.UseCameraAddonWasm || (l.Errors.WasmNotLoaded_UseWasmFalse(C), R = !1), R && !l.detect.wasmScriptLoaded && (l.Errors.WasmNotLoaded(C), R = !1), !(R = R && !l.License.checkProductKey(C, { Core: !0 }) ? !1 : R) && { code: C._errorCode, message: C._errorString };
    }, re.prototype.getSourceList = function() {
      var R = this, C = this._stwain, p = R._checkWasmAndLic();
      return p ? l.Promise.reject(p) : l.product.appendBrowserLicenseWhenServiceMode(C).then(function() {
        return R._getCameraViewer().getSourceList();
      });
    }, re.prototype.selectSource = function(R) {
      var C = this, p = this._stwain, N = C._checkWasmAndLic();
      return N ? l.Promise.reject(N) : (this._viewer != null && C._getCameraViewer().hide(), l.product.appendBrowserLicenseWhenServiceMode(p).then(function() {
        return C._getCameraViewer().selectSource(R);
      }));
    }, re.prototype.closeSource = function() {
      var R, C = this._checkWasmAndLic();
      return C ? l.Promise.reject(C) : (C = !0, this._viewer != null && (this._getCameraViewer().hide(), C = this._getCameraViewer().closeSource(), this._stwain._ImgManager) && this._stwain._ImgManager.getWebViewer() && this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()), (R = document.getElementById("dynamsoft_camera_inner_play")) && R.parentNode.removeChild(R), C);
    }, re.prototype.play = function(R, C, p) {
      var N = this, U = this._stwain, H = U._ImgManager.getWebViewer(), K = N._checkWasmAndLic();
      return K ? l.Promise.reject(K) : l.License.checkProductKey(U, { Core: !0 }) ? H && H._imageEditorInner && H._imageEditorInner.bShowImageEditForFullScreen ? (l.Errors.ImageEditorOpenCannotPlayVideo(U), l.Promise.reject({ code: U._errorCode, message: U._errorString })) : l.product.appendBrowserLicenseWhenServiceMode(U).then(function() {
        if (!l.License.checkCameraProductKey(U))
          return l.Promise.reject({ code: U._errorCode, message: U._errorString });
      }).then(function() {
        var Y, F, q, O = R;
        return !O && H && (!H.myViewer || !H.myViewer.bOnlyShowThumbnailsView && H.myViewer.showMain ? (q = l.one(["#container", H.GetIdPostfix()].join(""))) && 0 < q.length && q[0].className.indexOf("DVS_disabled") < 0 && (O = q[0]) : (q = l.one(["#showImageArea", H.GetIdPostfix()].join(""))) && 0 < q.length && q[0].className.indexOf("DVS_disabled") < 0 && (O = q[0])), O ? (typeof C == "object" && (Y = C.width, F = C.height), O && O.nodeName == "DIV" || ((O = document.getElementById(O)).offsetHeight || O.scrollHeight || O.clientHeight) && (O.offsetWidth || O.scrollWidth || O.clientWidth) || ((q = document.createElement("div")).id = "dynamsoft_camera_inner_play", O.appendChild(q), O = q), O.offsetHeight || O.scrollHeight || O.clientHeight || (O.style.height = "200px"), O.offsetWidth || O.scrollWidth || O.clientWidth || (O.style.width = "200px"), N._getCameraViewer().show()) : ((q = N._getCameraViewer()) && q.hide(), H && H.render()), l.log("camera addon: play."), l.isUndefined(p) && (p = !1), N._getCameraViewer().play(O, Y, F, p);
      }) : l.Promise.reject({ code: U._errorCode, message: U._errorString });
    }, re.prototype.pause = function() {
      return l.log("camera addon: pause."), this._getCameraViewer().pause();
    }, re.prototype.resume = function() {
      return l.log("camera addon: resume."), this._getCameraViewer().resume();
    }, re.prototype.getStatus = function() {
      return l.log("camera addon: get status."), this._viewer == null ? "" : this._getCameraViewer().getStatus();
    }, re.prototype.capture = function() {
      var R = this, C = this._stwain, p = R._checkWasmAndLic();
      return p ? l.Promise.reject(p) : l.License.checkProductKey(C, { Core: !0 }) ? l.product.appendBrowserLicenseWhenServiceMode(C).then(function() {
        if (!l.License.checkCameraProductKey(C))
          return l.Promise.reject({ code: C._errorCode, message: C._errorString });
      }).then(function() {
        return l.log("camera addon: start capture."), R._getCameraViewer().capture().then(function(N) {
          return l.log("camera addon: captured."), new l.Promise(function(U, H) {
            var K, Y = N.imageData || N.blob, F = -1, q = G.DWT.EnumDWT_ImageType;
            C._isMobileMode() ? ((K = C.GetCurrentDocumentName()) == "" && (K = C._ImgManager.getWebViewer().GetDefaultFileName()), C._innerSendToMobile("LoadImageFromBinary", [Y, 3006, null, K], 0, function() {
              l.log("camera addon: loaded image from capture."), U(Y);
            }, function(O, J) {
              l.log("camera addon: failed to load image from capture."), H({ code: O, message: J });
            })) : (l.isString(Y.type) && (Y.type == "application/pdf" ? F = q.IT_PDF : Y.type == "image/png" ? F = q.IT_PNG : Y.type == "image/jpeg" || Y.type == "image/jpg" ? F = q.IT_JPG : Y.type == "image/bmp" ? F = q.IT_BMP : Y.type == "image/tiff" || Y.type == "image/tif" ? F = q.IT_TIF : Y.type == "image/jp2" && (F = q.IT_J2K)), C.__captureImage(Y, F, function() {
              l.log("camera addon: loaded image from capture."), U(Y);
            }, function(O, J) {
              l.log("camera addon: failed to load image from capture."), H({ code: O, message: J });
            }));
          });
        });
      }) : l.Promise.reject({ code: C._errorCode, message: C._errorString });
    }, re.prototype.stop = function() {
      this._viewer != null && (this._getCameraViewer().hide(), l.log("camera addon: stop."), this._getCameraViewer().stop(), this._stwain._ImgManager) && this._stwain._ImgManager.getWebViewer() && (this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()), this._stwain._ImgManager.getWebViewer().render());
      var R = document.getElementById("dynamsoft_camera_inner_play");
      return R && R.parentNode.removeChild(R), !0;
    }, re.prototype.show = function() {
      if (l.log("camera addon: show."), this._viewer != null)
        return this._getCameraViewer().show();
    }, re.prototype.hide = function() {
      if (l.log("camera addon: hide."), this._viewer != null)
        return this._getCameraViewer().hide();
    }, re.prototype.getCurrentResolution = function() {
      return l.log("camera addon: get current resolution."), this._viewer == null ? 0 : this._getCameraViewer().getCurrentResolution();
    }, re.prototype.getCurrentSource = function() {
      return l.log("camera addon: get current source."), this._viewer == null ? "" : this._getCameraViewer().getCurrentSource();
    }, re.prototype.getResolution = function() {
      var R = this._checkWasmAndLic();
      return R ? l.Promise.reject(R) : this._viewer == null ? 0 : (l.log("camera addon: get resolution."), this._getCameraViewer().getResolution());
    }, re.prototype.setResolution = function(R) {
      var C = this._checkWasmAndLic();
      return C ? l.Promise.reject(C) : this._viewer != null && (l.log("camera addon: set resolution."), this._getCameraViewer().setResolution(R));
    }, re.prototype.showVideo = function(R, C, p, N) {
      var U = this._checkWasmAndLic();
      return U ? l.Promise.reject(U) : this._viewer != null && (this._getCameraViewer(), l.log("camera addon: show video."), !(!this._stwain._ImgManager || !this._stwain._ImgManager.getWebViewer())) && this._stwain._ImgManager.getWebViewer().showVideo(R, C, p, N);
    }, re.prototype.scanDocument = function(R) {
      var C = this, p = this._stwain, N = C._checkWasmAndLic();
      return N ? l.Promise.reject(N) : l.product.appendBrowserLicenseWhenServiceMode(p).then(function() {
        return l.License.checkCameraProductKey(p) ? (C._getCameraViewer(), l.log("camera addon: scan document."), p._ImgManager.getWebViewer().showVideoEx(R)) : l.Promise.reject({ code: p._errorCode, message: p._errorString });
      });
    }, re.prototype.closeVideo = function() {
      var R = this._checkWasmAndLic();
      return R ? l.Promise.reject(R) : this._viewer != null && (l.log("camera addon: close video."), !(!this._stwain._ImgManager || !this._stwain._ImgManager.getWebViewer())) && this._stwain._ImgManager.getWebViewer().closeVideo();
    }, re.prototype.turnOnTorch = function() {
      return l.log("camera addon: turnOnTorch."), this._viewer != null && this._getCameraViewer().turnOnTorch();
    }, re.prototype.turnOffTorch = function() {
      return l.log("camera addon: turnOffTorch."), this._viewer != null && this._getCameraViewer().turnOffTorch();
    }, re.prototype.getCapabilities = function() {
      return l.log("camera addon: getCapabilities."), this._viewer != null && this._getCameraViewer().getCapabilities();
    }, re.prototype.on = function(R, C) {
      R != "video-closed" && R != "video-error" ? l.Errors.EventNotExist(this._stwain) : l.isFunction(C) ? (l.log("camera addon: add event " + R), this._stwain._ImgManager && this._stwain._ImgManager.getWebViewer() ? this._stwain._ImgManager.getWebViewer().camera_on(R, C) : C()) : l.Errors.CallbackNotAFunction(this._stwain);
    }, re.prototype.off = function(R, C) {
      R != "video-closed" || R != "video-error" ? l.Errors.EventNotExist(this._stwain) : l.isUndefined(C) ? this._stwain._ImgManager && this._stwain._ImgManager.getWebViewer() && this._stwain._ImgManager.getWebViewer().off(R) : l.isFunction(C) ? (l.log("camera addon: remove event " + R), this._stwain._ImgManager && this._stwain._ImgManager.getWebViewer() ? this._stwain._ImgManager.getWebViewer().off(R, C) : C()) : l.Errors.CallbackNotAFunction(this._stwain);
    }, k.__addon = k.__addon || {}, k.__addon.Camera = new re();
  }), L = [G.DWT.ResourcesPath, "/addon/dynamsoft.webtwain.addon.camera.css", l.timestamp].join(""), l.addCss(L));
});
/*! 20221212133727
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: https://www.dynamsoft.com
*
* Copyright 2022, Dynamsoft Corporation
* Author: Dynamsoft Support Team
*
* Module: Upload
* Version: 18.0
* 
*/
var G = window.Dynamsoft || {};
(function(l) {
  l.DWT || (l.DWT = {}), l.Lib || (l.Lib = {});
})(G), G.aryAddonReadyFun = G.aryAddonReadyFun || [], G.AddonReady = G.AddonReady || function(l) {
  G.aryAddonReadyFun.push(l);
}, G.AddonReady(function(l, n) {
  G.DWT.EnumTransferErrorCode = { TRANS_OK: 0, TRANS_URL_MALFFORMAT: 1, TRANS_FAILED_RESOLVE_PROXY: 2, TRANS_FAILED_RESOLVE_HOST: 3, TRANS_FAILED_CONNECT: 4, TRANS_REMOTE_ACCESS_DENIED: 5, TRANS_PARTIAL_FILE: 6, TRANS_UPLOAD_FAILED: 7, TRANS_READ_FAILED: 8, TRANS_OUT_OF_MEMORY: 9, TRANS_REMOTE_FULL_DISK: 10, TRANS_OPERATION_TIMEOUT: 11, TRANS_SERVICE_ERROR_404: 12, TRANS_SERVICE_ERROR_500: 13, TRANS_SERVICE_ERROR_503: 14, TRANS_SERVICE_ERROR: 15, TRANS_NOT_SEND: 16, TRANS_WAITFOR_SEND: 17, TRANS_SENDING: 18, TRANS_PAUSE: 19, TRANS_FINISHED: 20, TRANS_NULL_POINTER: 21, TRANS_INVALID_ID: 22, TRANS_Failed: 23, TRANS_SERVICE_ERROR_MORE_THAN_500: 24, TRANS_SERVICE_ERROR_LESS_THAN_200: 25, TRANS_SERVICE_ERROR_MORE_THAN_300: 26, TRANS_CANNOT_FINDFILE: 27, TRANS_ABORT: 28, TRANS_NOT_FINISHED: 29, TRANS_TASK_PREPARE_INIT: 30, TRANS_TASK_INIT: 31, TRANS_BEYOND_MAXSIZE: 32 };
  function L() {
    var le, je = !1, fe = G.navInfoSync.bMobile;
    return G.DWT && (je = G.Lib.product.UseLocalService === !1), G.navInfo && (le = G.navInfo, fe = fe || le.bPad || le.biPhone || le.biPad), je || fe;
  }
  var k = G, re = G.dcp, R = [1, 7, 2, "1026"], C = "upload_" + R.join(""), p = { Version: "1.0", HttpVersion: "1.1", ServerUrl: "", FileName: "", VERIFYPEER: !1, VERIFYHOST: !1, BlockSize: 10240, ThreadNum: 1, OnUploadTransferPercentage: function(le, je) {
  }, OnRunSuccess: function(le) {
  }, OnRunFailure: function(le, je, fe) {
  } }, N = 0, U = "", H = function() {
    N = -1, U = "The zip file that contains the upload library (.dll) is invalid.";
  }, K = function() {
    N = -2, U = "Upload failed because the url to upload to is invalid.";
  }, Y = function(le, je, fe) {
    N = -3, le ? U = "Upload cancelled." : (U = je && je != "" ? "Upload failed with error: " + je : "Upload failed.", je && je != "" && (U = U + "(" + fe + ")"));
  }, F = function() {
    N = -4, U = "Upload failed because the file to upload has invalid content.";
  }, q = function() {
    N = -5, U = "Invalid upload job id.";
  }, O = function() {
    N = -6, U = "Cannot create an upload job.";
  }, J = function() {
    N = -7, U = "The file name is incorrect in the upload job.";
  }, E = function() {
    N = -8, U = "Can not cancel all jobs when at least one job is still being created.";
  }, me = function() {
    N = -9, U = "The zip file that contains the upload library (.dll) download failed.";
  }, Ee = function() {
    N = -2400, U = "File uploader addon doesn't work under current settings.";
  }, Le = function() {
    N = 0, U = "";
  };
  function Oe() {
  }
  function Te(le) {
    this.job = le;
  }
  function Re(le) {
    this.job = le;
  }
  Oe.prototype = { runWaiting: 0, CreateJob: function() {
    var le = { HttpHeader: {}, documents: [], formFields: [], bEvent: !1 };
    return l.mix(le, p), le.SourceValue = new Te(le), le.FormField = new Re(le), le;
  }, Run: function(le) {
    var je, fe = this, Me = '""', Z = le.ServerUrl, Ue = "";
    if (!l.isString(Z) || Z == "")
      return le.id = -1, K(), !le.bEvent && l.isFunction(le.OnRunFailure) && (le.bEvent = !0, le.OnRunFailure(le, N, U), le.bEvent = !1), !1;
    if (!le.documents || !l.isArray(le.documents) || le.documents.length <= 0)
      return le.id = -1, F(), !le.bEvent && l.isFunction(le.OnRunFailure) && (le.bEvent = !0, le.OnRunFailure(le, N, U), le.bEvent = !1), !1;
    if (!le.ar || !le.cu) {
      G.Lib.License.isLicenseMixed(null, !0) || G.Lib.License.reparseProductKey();
      var mt = G.DWT.licenseException;
      if (mt.code != 0)
        return le.id = -1, N = mt.code, U = mt.message, !le.bEvent && l.isFunction(le.OnRunFailure) && (le.bEvent = !0, le.OnRunFailure(le, N, U), le.bEvent = !1), !1;
      if (G.Lib.License.isLTS())
        return G.DWT.lglic(G.DWT.EnumInstance.dwt_desktop, "").then(function(Je) {
          le.ar = Je.ar, le.cu = Je.cu, fe.Run(le);
        }), !0;
      l.product.refProductKey && (Me = '"' + l.product.refProductKey + '"');
    }
    for (le.Url = Z, delete le.ServerUrl, je = 0; je < le.documents; je++) {
      var ct = le.documents[je];
      if (!l.isString(ct.files) || ct.files == "")
        return le.id = -1, J(), !le.bEvent && l.isFunction(le.OnRunFailure) && (le.bEvent = !0, le.OnRunFailure(le, N, U), le.bEvent = !1), !1;
      l.isString(ct.remoteName) && ct.remoteName != "" || (ct.remoteName = "RemoteFile");
    }
    var mt = le.SourceValue, at = (delete le.SourceValue, le.FormField), Ye = (delete le.FormField, l.stringify(le)), Ye = l.replaceAll(Ye, '"', "'");
    return le.ServerUrl = Z, delete le.Url, le.SourceValue = mt, le.FormField = at, Z = ['{"id":"', 1, '","method":"RunUploadFile","version":"', C, '","parameter":[', Me, ',"', Ye, '"'], le.ar && le.cu ? (Ue = [',"', le.ar, '","', le.cu, '",0]}'].join(""), delete le.ar, delete le.cu, Z.push(Ue)) : Z.push("]}"), mt = Z.join(""), fe.runWaiting++, G.FileUploader._sendCmd("RunUploadFile", mt, function(Et) {
      var Je;
      fe.runWaiting--, Et && ((Je = Et.UploadId) && 0 < Je ? (le.id = Je, k.FileUploader.map[le.id] = le, k.FileUploader.ids.push(Et.UploadId), le.OnUploadTransferPercentage && le.OnUploadTransferPercentage(le, 0)) : (Je = Et.errorcode, Et = Et.errorstring, Je && Et ? (N = Je, U = Et) : O(), !le.bEvent && l.isFunction(le.OnRunFailure) && (le.bEvent = !0, le.OnRunFailure(le, N, U), le.bEvent = !1)));
    }, function(Et, Je, ce) {
      fe.runWaiting--, k.FileUploader.parseHttpErrors(Et, Je, ce), !le.bEvent && l.isFunction(le.OnRunFailure) && (le.bEvent = !0, le.OnRunFailure(le, N, U), le.bEvent = !1);
    }), !0;
  }, Cancel: function(le) {
    var je;
    return !le.id || le.id < 0 ? (q(), !le.bEvent && l.isFunction(le.OnRunFailure) && (le.bEvent = !0, le.OnRunFailure(le, N, U), le.bEvent = !1), !1) : (je = '{"id":"1","method":"DeleteUploadTask","version":"' + C + '","parameter":["' + le.id + '"]}', G.FileUploader._sendCmd("DeleteUploadTask", je, function(fe) {
      k.FileUploader.deleteJobById(le.id);
    }, function(fe, Me, Z) {
      k.FileUploader.parseHttpErrors(fe, Me, Z), !le.bEvent && l.isFunction(le.OnRunFailure) && (le.bEvent = !0, le.OnRunFailure(le, N, U), le.bEvent = !1);
    }), !0);
  }, CancelAllUpload: function() {
    var le = k.FileUploader.ids, je = '{"id":"1","method":"DeleteUploadTask","version":"' + C + '","parameter":["' + le.join(",") + '"]}';
    return 0 < this.runWaiting ? (E(), !1) : (this.runWaiting < 0 && (this.runWaiting = 0), le.length <= 0 || G.FileUploader._sendCmd("DeleteUploadTask", je, function(fe) {
      for (var Me = 0; Me < le.length; Me++)
        k.FileUploader.deleteJobById(le[Me]);
      k.FileUploader.ids = [], k.FileUploader.map = [];
    }, function(fe, Me, Z) {
      k.FileUploader.parseHttpErrors(fe, Me, Z);
    }), !0);
  }, OnUploadTransferPercentage: function(le, je) {
  }, OnRunSuccess: function(le) {
  }, OnRunFailure: function(le, je, fe) {
  } }, (k.SourceValue = Te).prototype.Add = function(le, je, fe) {
    var Me = this.job;
    l.isString(le) && le != "" ? (fe = fe || "RemoteFile", le = G.Lib.replaceAll(le, "\\\\", "\\\\"), Me.documents.push({ files: [le], fileName: je, remoteName: fe })) : (J(), !Me.bEvent && l.isFunction(Me.OnRunFailure) && (Me.bEvent = !0, Me.OnRunFailure(Me, N, U), Me.bEvent = !1));
  }, k.FormField = Re, k.FileUploader = { ids: [], map: {}, port: 18625, protocol: "https://", ip: "127.0.0.1", wsUrl: "", running: !(Re.prototype.Add = function(le, je) {
    var fe, Me, Z = je, Ue = le;
    if (Z == null && (Z = ""), !l.isString(Ue) || Ue == "" || !l.isString(Z) || (Z = encodeURI(Z), -1 < (Ue = encodeURI(Ue)).indexOf("'") || -1 < Z.indexOf("'")))
      return !1;
    for (fe = 0; fe < this.job.formFields.length; fe++)
      if ((Me = this.job.formFields[fe]).name == Ue)
        return Me.value = Z, !0;
    return this.job.formFields.push({ name: Ue, value: Z }), !0;
  }), ws: null, nextLoopTime: 600, deleteJobById: function(le) {
    if (Le(), L())
      return Ee(), !1;
    var je;
    if (le) {
      for (je = 0; je < k.FileUploader.ids.length; je++)
        if (le == k.FileUploader.ids[je]) {
          k.FileUploader.ids.splice(je, 1);
          break;
        }
      var fe = k.FileUploader.map[le];
      for (fe.SourceValue.job = null, delete fe.SourceValue, fe.FormField.job = null, delete fe.FormField, delete k.FileUploader.map[le], je = fe.documents.length - 1; 0 <= je; je--)
        fe.documents.splice(je, 1);
      for (je = fe.formFields.length - 1; 0 <= je; je--)
        fe.formFields.splice(je, 1);
      var Me = '{"id":"1","method":"DeleteUploadTask","version":"' + C + '","parameter":["' + le + '"]}';
      G.FileUploader._sendCmd("DeleteUploadTask", Me);
    }
  }, _sendCmdByWS: function(le, je, fe) {
    var Me = k.FileUploader.ws;
    return Me && Me.readyState != G.DWT.EnumDWT_WebsocketReadyState.CLOSING && Me.readyState != G.DWT.EnumDWT_WebsocketReadyState.CLOSED || (Me = G.DWT.NetManager.newWebsocket(k.FileUploader.wsUrl), k.FileUploader.ws = Me), G.DWT.NetManager.postStringDataByWS(Me, le).then(function(Z) {
      Z = l.parse(Z), Z && "result" in Z ? l.isFunction(je) && je(Z.result) : l.isFunction(fe) && fe();
    }, fe), !0;
  }, _sendCmd: function(le, je, fe, Me) {
    return G.DWT.ConnectWithSocket ? _sendCmdByWS(je, fe, Me) : (le = [k.FileUploader.protocol, k.FileUploader.ip, ":", k.FileUploader.port, "/dcp/", C, "/", le, "?type=1&dsver=", R.join(""), "&ts=", l.now()].join(""), l.ajax({ url: le, method: "post", dataType: "json", processData: !1, data: je, onSuccess: fe, onError: Me }));
  }, parseHttpErrors: function(Z, je, fe) {
    var Me, Z = Z && l.isArray(Z) && 2 < Z.length ? (Me = Z[1], Z[2]) : (Me = je, fe);
    Z.state == 2 && Z.status == 0 ? Z.statusText === "abort" ? Y(!0) : K() : Y(!1, Me, Z.status);
  }, loadHttpBlob: function(le, je, fe, Me, Z, Ue, ct) {
    le = { method: le, url: je, dataType: "blob", async: fe, onSuccess: Me, onError: function(mt, at, Ye) {
      k.FileUploader.parseHttpErrors(mt, at, Ye), l.isFunction(Z) && Z();
    } }, l.isFunction(Ue) && (le.beforeSend = function(mt) {
      mt.addEventListener("progress", function(at) {
        delete at.totalSize, delete at.position, Ue(at);
      }, !1);
    }), l.ajax(le);
  }, _OnPercentDone: function() {
  }, Download: function(le, je, fe) {
    var Me;
    return l.isString(le) ? k.FileUploader.loadHttpBlob("get", le, !!(Me = function() {
      return me(), l.isFunction(fe) && fe(N, U), !1;
    }), function(Z) {
      re.loadZip(Z, 100, je, Me);
    }, Me, !1) : (H(), l.isFunction(fe) && fe(N, U), !1);
  }, Init: function(le, je, fe) {
    if (Le(), L())
      return Ee(), l.isFunction(fe) && fe(N, U), !1;
    function Me() {
      var Z, Ue = G.navInfoSync.bSSL ? (Z = "https://", G.dcp.SSLPort) : (Z = "http://", G.dcp.Port);
      k.FileUploader.port = Ue, k.FileUploader.protocol = Z, k.FileUploader.ip = G.DWT.Host, k.FileUploader.wsUrl = G.DWT.NetManager.getWsUrl(G.DWT.Host, Ue), k.FileUploader.running = !0, je(new Oe()), setTimeout(k.FileUploader.StatusLoop, 500);
    }
    G.dcp.detect.bConnected ? Me() : G.DWT.NetManager.checkModuleManager(Me, fe);
  }, Close: function() {
    var le;
    G.DWT.ConnectWithSocket && (le = G.FileUploader.ws) && (le.readyState != G.DWT.EnumDWT_WebsocketReadyState.CLOSED && le.readyState != G.DWT.EnumDWT_WebsocketReadyState.CLOSING && le.close(), G.FileUploader.ws = null), G.FileUploader.running = !1;
  }, VersionInfo: function(le, je) {
    var fe;
    return Le(), L() ? (Ee(), l.isFunction(je) && je(N, U), !1) : (fe = '{"id":"1","method":"VersionInfo","version":"' + C + '","parameter":[]}', G.FileUploader._sendCmd("VersionInfo", fe, le, function(Me, Z, Ue) {
      k.FileUploader.parseHttpErrors(Me, Z, Ue), l.isFunction(je) && je(N, U);
    }), !0);
  }, StatusLoop: function() {
    return Le(), L() ? (Ee(), !1) : (k.FileUploader.GetUploadStatus(), k.FileUploader.running && setTimeout(k.FileUploader.StatusLoop, k.FileUploader.nextLoopTime), !0);
  }, GetUploadStatus: function() {
    if (Le(), !(k.FileUploader.ids.length <= 0)) {
      if (L())
        return Ee(), !1;
      var le = '{"id":"1","method":"GetUploadStatus","version":"' + C + '","parameter":["' + k.FileUploader.ids.join(",") + '"]}';
      G.FileUploader._sendCmd("GetUploadStatus", le, function(je) {
        if (l.isArray(je))
          for (var fe = 0; fe < je.length; fe++) {
            var Me = (at = je[fe]).id, Z = k.FileUploader.map[Me], Ue = at.percentage, ct = at.errorcode, mt = at.response, at = at.errorstring;
            Z && (ct == G.DWT.EnumTransferErrorCode.TRANS_FINISHED ? (Z.OnUploadTransferPercentage(Z, 100, We(mt)), !Z.bEvent && l.isFunction(Z.OnRunSuccess) && (Z.bEvent = !0, Z.OnRunSuccess(Z, We(mt)), Z.bEvent = !1), k.FileUploader.deleteJobById(Me)) : ct == G.DWT.EnumTransferErrorCode.TRANS_OK || ct == G.DWT.EnumTransferErrorCode.TRANS_NOT_SEND || ct == G.DWT.EnumTransferErrorCode.TRANS_WAITFOR_SEND || ct == G.DWT.EnumTransferErrorCode.TRANS_SENDING || ct == G.DWT.EnumTransferErrorCode.TRANS_PAUSE || ct == G.DWT.EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT || ct == G.DWT.EnumTransferErrorCode.TRANS_TASK_INIT ? Z.OnUploadTransferPercentage(Z, Ue, We(mt)) : (!Z.bEvent && l.isFunction(Z.OnRunFailure) && (Z.bEvent = !0, Z.OnRunFailure(Z, ct, at, We(mt)), Z.bEvent = !1), k.FileUploader.deleteJobById(Me)));
          }
      }, function(je, fe, Me) {
      });
    }
    return !0;
  } };
  var Ve = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);
  function We(le) {
    for (var je, fe, Me, Z, Ue = le.length, ct = 0, mt = ""; ct < Ue; ) {
      for (; je = Ve[255 & le.charCodeAt(ct++)], ct < Ue && je == -1; )
        ;
      if (je == -1)
        break;
      for (; fe = Ve[255 & le.charCodeAt(ct++)], ct < Ue && fe == -1; )
        ;
      if (fe == -1)
        break;
      mt += String.fromCharCode(je << 2 | (48 & fe) >> 4);
      do
        if ((Me = 255 & le.charCodeAt(ct++)) == 61)
          return mt;
      while (Me = Ve[Me], ct < Ue && Me == -1);
      if (Me == -1)
        break;
      mt += String.fromCharCode((15 & fe) << 4 | (60 & Me) >> 2);
      do
        if ((Z = 255 & le.charCodeAt(ct++)) == 61)
          return mt;
      while (Z = Ve[Z], ct < Ue && Z == -1);
      if (Z == -1)
        break;
      mt += String.fromCharCode((3 & Me) << 6 | Z);
    }
    return mt;
  }
});
(function() {
  var l = screen.width, n = l > 550 ? 550 : l - 10, L = l > 680 ? 680 : l - 10, k = 0, re = {
    icn_download: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII=",
    icn_install: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg==",
    icn_scan: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII="
  };
  G.OnWebTwainNotFoundOnWindowsCallback = function(C, p, N, U, H, K, Y, F) {
    var q = G, O = {
      default: p
    };
    q._show_install_dialog(C, O, N, G.DWT.EnumDWT_PlatformType.enumWindow, U, H, K, Y, !1, F);
  }, G.OnWebTwainNotFoundOnLinuxCallback = function(C, p, N, U, H, K, Y, F, q, O) {
    var J = G, E = {
      default: p,
      deb: p,
      rpm: N
    };
    q || (q = G.DWT.EnumDWT_PlatformType.enumLinux), q == G.DWT.EnumDWT_PlatformType.enumAndroid && (E.default = "intent://dynamsoft.com/#Intent;scheme=http;package=com.dynamsoft.mobilescan;end"), J._show_install_dialog(C, E, U, q, H, K, Y, F, !1, O);
  }, G.OnWebTwainNotFoundOnMacCallback = function(C, p, N, U, H, K, Y, F) {
    var q = G, O = {
      default: p
    };
    q._show_install_dialog(C, O, N, G.DWT.EnumDWT_PlatformType.enumMac, U, H, K, Y, !1, F);
  }, G.OnWebTwainNotFoundOnAndroidCallback = function(C, p, N, U, H, K, Y, F, q, O) {
    var J = {
      default: "https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup.apk"
    }, E = Math.random();
    J.openService = "intent://dynamsoft.com/#Intent;scheme=http;package=com.dynamsoft.mobilescan;S.timestamp=" + E + ";end", G.DWT.Host = "local.dynamsoft.com", G._show_android_install_dialog(J);
  }, G.DWT_ReconnectForAndroid = function() {
    G.DWT.CheckConnectToTheService(function(C) {
      C ? (G.DWT.CloseDialog(), G.DWT.ConnectToTheService()) : setTimeout(G.DWT_ReconnectForAndroid, 500);
    }, function() {
      setTimeout(G.DWT_ReconnectForAndroid, 500);
    });
  }, G.dwt_change_install_url = function(C) {
    var p = document.getElementById("dwt-btn-install");
    p && (p.href = C);
  }, G.DWT_Reconnect = function() {
    var C = G;
    if ((/* @__PURE__ */ new Date() - k) / 1e3 > 30) {
      var p = document.getElementById("dwt-btn-install");
      p && (p.innerHTML = 'Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="Dynamsoft.DCP_DWT_onclickInstallButton()">click here to connect again</a>.');
      return;
    }
    C.DWT ? C.DWT.CheckConnectToTheService(function() {
      G.DWT.ConnectToTheService();
    }, function() {
      if (G.DWT.NeedCheckWebTwainBySocket()) {
        G.DWT.CheckWebTwainBySocket(function() {
          G.OnHTTPCorsError();
        }, function() {
          setTimeout(G.DWT_Reconnect, 500);
        }, function() {
          setTimeout(G.DWT_Reconnect, 500);
        });
        return;
      }
      setTimeout(G.DWT_Reconnect, 500);
    }) : console.log("The Dynamsoft namespace is missing");
  }, G.DCP_DWT_onclickInstallButton = function() {
    var C = document.getElementById("dwt-btn-install");
    return C && setTimeout(function() {
      var p = document.getElementById("dwt-install-url-div");
      p && (p.style.display = "none");
      var N = document.getElementById("dwt-btn-install");
      if (N && N.getAttribute("html5") == "1") {
        var U = N.parentNode, H = document.createElement("div");
        H.id = "dwt-btn-install", H.style.textAlign = "center", H.style.paddingBottom = "15px", H.innerHTML = "Connecting to the service...", H.setAttribute("html5", "1"), U.removeChild(N), U.appendChild(H), k = /* @__PURE__ */ new Date(), setTimeout(G.DWT_Reconnect, 10);
      } else {
        var U = N.parentNode;
        U.removeChild(N);
      }
    }, 10), !0;
  }, G._show_install_dialog = function(C, p, N, U, H, K, Y, F, q, O) {
    return G._show_install_dialog_Detail(C, p, N, U, H, K, Y, F, q, O);
  }, G._show_install_dialog_Detail = function(C, p, N, U, H, K, Y, F, q, O) {
    var J = G, E, me, Ee, Le = G.DWT.EnumDWT_PlatformType, Oe = U == Le.enumAndroid, Te = Oe, Re = U == Le.enumLinux || U == Le.enumEmbed || U == Le.enumChromeOS || U == Le.enumHarmonyOS || Oe;
    if (G.DWT.bNpm && G.navInfoSync.bFileSystem)
      return G._show_online_download_dialog(p, N, U);
    if (q ? me = "Please update your document scanning service" : me = "Please complete one-time setup", E = [
      '<div class="dynamsoft-dwt-dlg-title">',
      me,
      "</div>"
    ], J.DWT) {
      var Ve = G.navInfoSync.bFirefox;
      Re || Ve ? Ee = "RESTART" : Ee = "REFRESH", E.push('<div class="dynamsoft-dwt-installdlg-iconholder"> ');
      var We = "125px";
      Te && (We = "60px"), E.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: ' + We + '"></div>'), Te || E.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>');
      var le = "133px";
      if (Te && (le = "50px"), E.push('<img style="margin: 0px ' + le + ' 0px 0px" src=' + re.icn_download + ' alt="download">'), E.push('<img style="margin: 2px ' + le + ' 2px 0px" src=' + re.icn_install + ' alt="install">'), E.push("<img src=" + re.icn_scan + ' alt="scan">'), E.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>'), E.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>'), E.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>'), E.push("</div>"), E.push("</div>"), N && Re) {
        E.push('<div style="margin:10px 0 0 60px;">'), E.push('<div id="dwt-install-url-div">');
        var je = G.navInfo.bArm64, fe = G.navInfo.bMips64, Me = G.navInfoSync.bChromeOS, Z = G.navInfoSync.bHarmonyOS;
        je || fe || Me || Z || Oe || (E.push(`<div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url('` + p.deb + `')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>`), E.push(`<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url('` + p.rpm + `')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div>`)), E.push("</div></div>");
      }
      E.push('<div><a id="dwt-btn-install" target="_blank" href="'), E.push(p.default), E.push('"'), N ? E.push(' html5="1"') : E.push(' html5="0"'), E.push(' onclick="Dynamsoft.DCP_DWT_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>'), N ? H ? (E.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'), E.push("If you still see the dialog after installing the Dynamsoft Service, please<br />"), E.push("1. Add the website to the zone of trusted sites.<br />"), E.push("IE | Tools | Internet Options | Security | Trusted Sites.<br />"), E.push("2. Refresh your browser."), E.push("</div>")) : Re ? (E.push('<div class="dynamsoft-dwt-dlg-tail">'), E.push('<div class="dynamsoft-dwt-dlg-red">After the installation, please <strong>' + Ee + "</strong>  your browser.</div>"), E.push("</div>")) : Oe && (E.push('<div class="dynamsoft-dwt-dlg-tail">'), E.push('<div class="dynamsoft-dwt-dlg">Failed to connect to the service, have you finished the setup?</div>'), E.push('<div class="dynamsoft-dwt-dlg">Please make sure the setup is done and <a href="#">click here</a> to connect again.</div>'), E.push('<div class="dynamsoft-dwt-dlg">If the connection continues to fail, please refer to <a href="#">this article</a>.</div>'), E.push("</div>")) : (E.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'), H ? (E.push("After the installation, please<br />"), E.push("1. Restart the browser<br />"), E.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.')) : E.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>'), E.push("</div>")), J.DWT.ShowMessage(E.join(""), {
        width: n,
        headerStyle: 1
      });
    } else
      console.log("The Dynamsoft namespace is missing");
    G.DWT && G.DWT.OnWebTwainNotFound && G.DWT.OnWebTwainNotFound();
  }, G._show_android_install_dialog = function(C) {
    var p;
    if (G.DWT.bNpm && G.navInfoSync.bFileSystem)
      return G._show_online_download_dialog(C, bHTML5, iPlatform);
    p = [], G.DWT ? (p.push('<div class="ds-dwt-ui-dlg-android">'), p.push("<div>Please download and install the <strong>DYNAMSOFT SERVICE</strong> app via the </div>"), p.push('<div><a target="_blank" href="'), p.push(C.default), p.push('" onclick="Dynamsoft.DWT_ReconnectForAndroid()">direct APK download link</a>.</div>'), p.push("</div>"), p.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left">'), p.push("If you have installed it, please click on the button below to initiate the connection."), p.push('<a target="_blank" href="'), p.push(C.openService), p.push('" onclick="Dynamsoft.DWT_ReconnectForAndroid()"><div class="dynamsoft-dwt-dlg-button-android">Open Service</div></a>'), p.push("</div>"), p.push("</div>"), G.DWT.ShowMessage(p.join(""), {
      width: 335,
      headerStyle: 1,
      backgroundStyle: 1
    })) : console.log("The Dynamsoft namespace is missing"), G.DWT && G.DWT.OnWebTwainNotFound && G.DWT.OnWebTwainNotFound();
  }, G.OnWebTwainNeedUpgradeCallback = function(C, p, N, U, H, K, Y, F) {
    G._show_install_dialog(C, p, N, U, H, K, Y, F, !0, !0);
  }, G.OnRemoteWebTwainNotFoundCallback = function(C, p, N, U, H) {
    var K = G, Y;
    H ? Y = [
      '<div class="dynamsoft-dwt-dlg-tips" style="text-align:left;font-size:1.4em">',
      "Failed to connect to the Dynamsoft Service, please make sure that the certificate is valid.<br /><br />",
      "</div>"
    ] : Y = [
      '<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',
      "Failed to connect to the Dynamsoft Service.<br />",
      "Please make sure that the certificate is valid OR ",
      "If you change the Dynamsoft.DWT.Host to your own IP/domain, do not forget to update the certificate accordingly.",
      "</div>",
      '<div class="dynamsoft-dwt-dlg-tail">',
      '<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
    ], K.DWT ? K.DWT.ShowMessage(Y.join(""), {
      width: n,
      headerStyle: 1
    }) : console.log("The Dynamsoft namespace is missing");
  }, G.OnRemoteWebTwainNeedUpgradeCallback = function(C, p, N, U) {
    var H = G, K = [
      '<div class="dynamsoft-dwt-dlg-tips">',
      "Dynamsoft Service is outdated on the PC with IP/domain <br />",
      '"',
      p,
      '".<br />',
      "Please open the page on that PC to download and install it.",
      "</div>",
      '<div class="dynamsoft-dwt-dlg-tail">',
      '<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
    ];
    H.DWT ? H.DWT.ShowMessage(K.join(""), {
      width: n,
      headerStyle: 1
    }) : console.log("The Dynamsoft namespace is missing");
  }, G.OnWebTWAINDllDownloadSuccessful = function() {
    console.log("The Web TWAIN Module was downloaded successfully!");
  }, G.OnWebTWAINDllDownloadFailure = function(C, p, N) {
    var U = G;
    if (U.DWT) {
      if (p == -2371) {
        var H = [
          '<div class="dynamsoft-dwt-dlg-tips">',
          N,
          "</div>",
          '<div class="dynamsoft-dwt-dlg-tail">',
          '<div class="dynamsoft-dwt-dlg-red">You can try <strong>REFRESHING</strong> your browser to try again. <br /> If the issue persists, please contact the website administrator.</div></div>'
        ];
        U.DWT.ShowMessage(H.join(""), {
          width: n,
          headerStyle: 1
        });
      }
      return !0;
    } else
      console.log("The Dynamsoft namespace is missing");
  }, G.OnGetServiceUpdateStatus = function(C, p, N) {
    N != "Update skipped" && console.log(N);
  }, G.OnWebTWAINModuleDownloadManually = function(C, p, N, U, H, K) {
    var Y = G;
    return Y._show_install_dialog("", C, !0, p, N, U, H, K, !1, !1);
  }, G.OnLTSLicenseError = function(C) {
    var p = "", N, U = G.DWT.licenseException, H = 0;
    if (U && (H = U.code), H == -2440 || // NetworkError
    H == -2441 || // Timedout
    H == -2443 || // CorsError
    H == -2446 || // LtsJsLoadError
    C.indexOf("Internet connection") > -1 || C.indexOf("Storage") > -1) {
      var K = "https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&deploymenttype=js";
      p = '<div>You can register for a free 30-day trial <a href="' + K + '" target="_blank" class="dynamsoft-major-color">here</a>. Make sure to select the product Dynamic Web TWAIN.</div>';
    }
    N = [
      C,
      p
    ], G.DWT.ShowMessage(N.join(""), {
      width: L,
      headerStyle: 2
    });
  }, G.OnLTSConnectionFailure = G.OnLTSLicenseError, G.OnLTSReturnedAnError = G.OnLTSLicenseError, G.OnLTSUUIDError = G.OnLTSLicenseError, G.OnLTSConnectionWarning = function() {
    var C = [
      "Warning: You are seeing this dialog because Dynamic Web TWAIN has failed to connect to the License Tracking Server. ",
      "A cached authorization is being used, and you can continue to use the software as usual. ",
      "Please get connected to the network as soon as possible. ",
      G.DWT.isPublicLicense() ? '<a class="dynamsoft-major-color" href="https://www.dynamsoft.com/company/contact/">Contact Dynamsoft</a> ' : "Contact the site administrator ",
      "for more information."
    ].join("");
    G.DWT.ShowMessage(C, {
      width: L,
      caption: "Warning",
      headerStyle: 2
    });
  }, G.OnLTSPublicLicenseMessage = function(C) {
    G.DWT.ShowMessage(C, {
      width: L,
      caption: "Warning",
      headerStyle: 2
    });
  }, G.OnHTTPCorsError = function() {
    var C = [
      "<div>The Connection from the insecure (HTTP) web page to the local 'Dynamsoft Service' failed!</div>",
      '<div style="margin-top:10px">To fix the issue, please update your website to HTTPS or refer to <br /><a target="_blank" href="https://www.dynamsoft.com/web-twain/docs/faq/http-insecure-websites-in-chromium-browser.html?ver=latest">this article</a> for other workarounds.</div>'
    ].join("");
    G.DWT.ShowMessage(C, {
      width: L,
      headerStyle: 2
    });
  }, G.OnLicenseExpiredMessage = function(C, p) {
    var N, U = '<a target="_blank" href="https://www.dynamsoft.com/company/contact/">contact us</a>', H = '<a target="_blank" href="https://www.dynamsoft.com/store/dynamic-web-twain/#DynamicWebTWAIN">online store</a>', K = "https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product";
    if (!(p > 5))
      if (p > 0) {
        var Y;
        p <= 1 ? Y = "1 day" : Y = parseInt(p) + " days", N = [
          '<div style="padding:0 0 10px 0">Kindly note your trial key is expiring in ',
          Y,
          ". Two quick steps to extend your trial:</div>",
          '<div style="margin:0 0 0 10px">1. <a target="_blank" href="',
          K,
          '">Request a new trial key</a> and follow the instructions to set the new key</div>',
          '<div style="margin:0 0 0 10px">2. Refresh your scan page and try again</div>',
          '<div style="padding:10px 0 0 0">If you run into any issues, please ',
          U,
          ".</div>",
          '<div style="padding:0">If you are ready to purchase a full license, please go to the ',
          H,
          " or ",
          U,
          ".</div>"
        ].join("");
      } else
        N = [
          '<div style="padding:0">Sorry. Your trial key has expired on ',
          C,
          ". You can purchase a full license at the ",
          H,
          ".</div>",
          '<div style="padding:0">Or, you can try requesting a new trial key at <a target="_blank" href="',
          K,
          '">this page</a>.</div>',
          '<div style="padding:0">If you need any help, please ',
          U,
          ".</div>"
        ].join("");
    N && G.DWT.ShowMessage(N, {
      width: L,
      caption: "Warning",
      headerStyle: 2
    });
  }, G.OnLicenseError = function(C, p) {
    G.DWT.ShowMessage(C, {
      width: L,
      headerStyle: 2
    });
  }, G.OnSSLCertInfo = function(C) {
  }, G.funcConfirmRemove = function() {
    var C = "Are you sure you want to delete this image?";
    return R(C, !0, !1);
  }, G.funcConfirmExit = function(C) {
    var p = " Are you sure you want to exit without saving?";
    return C ? R(p, !0, !1) : Promise.resolve(!0);
  }, G.funcConfirmExitAfterSave = function(C) {
  }, G.funcConfirmCropViewerExit = function(C, p) {
    if (p == "mainViewer" && C) {
      var N = "Are you sure you want to exit without saving?";
      return R(N, G.DWT.EnumDWT_ConfirmExitType.Exit, G.DWT.EnumDWT_ConfirmExitType.Cancel);
    } else
      return p == "documentScanPage" && C ? Promise.resolve(G.DWT.EnumDWT_ConfirmExitType.SaveAndExit) : Promise.resolve(G.DWT.EnumDWT_ConfirmExitType.Exit);
  }, G.funcConfirmMainViewerExit = function(C, p) {
    if (p == "" && C) {
      var N = "Are you sure you want to exit without saving?";
      return R(N, G.DWT.EnumDWT_ConfirmExitType.Exit, G.DWT.EnumDWT_ConfirmExitType.Cancel);
    } else if (p == "cropViewer" && C)
      return Promise.resolve(G.DWT.EnumDWT_ConfirmExitType.SaveAndExit);
    return Promise.resolve(G.DWT.EnumDWT_ConfirmExitType.Exit);
  };
  function R(C, p, N) {
    var U = "position:fixed;top:50%;left:50%;width:260px;transform:translate(-50%,-50%);background:#fff;z-index:999;border-radius: 5px;overflow: hidden;", H = "flex:1;height:100%;display:flex;align-items:center;justify-content: center;font-size:14px", K = [
      "<div style=" + U + ">",
      '<div style="padding:20px;font-size: 16px; color:black;height:70%;text-align:center;display:flex;align-items:center">',
      C,
      "</div>",
      '<div style="height:40px;background:#f5f5f5;display:flex;border-top: solid 1px #cdcccc" >',
      '<span id="dynamsoft-confirm-dialog-yes" style="' + H + ';color:#fe8e14;border-right: solid 1px #cdcccc">OK</span>',
      '<span id="dynamsoft-confirm-dialog-no" style="' + H + '">Cancel</span></div>',
      "</div>"
    ];
    return G.DWT.ShowDialog(500, 0, K.join(""), !0, !0), new Promise(function(Y) {
      document.getElementById("dynamsoft-confirm-dialog-yes").addEventListener("click", function() {
        G.DWT.CloseDialog(), Y(p);
      }), document.getElementById("dynamsoft-confirm-dialog-no").addEventListener("click", function() {
        G.DWT.CloseDialog(), Y(N);
      });
    });
  }
  G.DWT_ReconnectForAndroidShowOpen = function() {
    G.DWT.CheckConnectToTheService(function(C) {
      C ? (G.DWT.CloseDialog(), G.DWT.ConnectToTheService(!0)) : setTimeout(G.DWT_ReconnectForAndroidShowOpen, 500);
    }, function() {
      setTimeout(G.DWT_ReconnectForAndroidShowOpen, 500);
    });
  }, G.ShowOpenAndroidAppDialog = function() {
    var C = [];
    if (G.DWT) {
      C.push('<div class="ds-dwt-ui-dlg-android" style="padding-bottom:10px">'), C.push("Dynamsoft Service was disconnected. Please click on the button below to initiate the connection again."), C.push("</div>"), C.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left;padding-top:5px">'), C.push('<a target="_blank" href="');
      var p, N = Math.random();
      p = "intent://dynamsoft.com/#Intent;scheme=http;package=com.dynamsoft.mobilescan;S.timestamp=" + N + ";end", C.push(p), C.push('" onclick="Dynamsoft.DWT_ReconnectForAndroidShowOpen()"><div class="dynamsoft-dwt-dlg-button-android">Open Service</div></a>'), C.push("</div>"), G.DWT.ShowMessage(C.join(""), {
        width: 335,
        headerStyle: 1,
        backgroundStyle: 1,
        onClose: function() {
          G.DWT.bConnectCanceled = !0;
        }
      });
    } else
      console.log("The Dynamsoft namespace is missing");
    G.DWT && G.DWT.OnWebTwainNotFound && G.DWT.OnWebTwainNotFound();
  }, G._show_online_download_dialog = function(C, p, N) {
    var U, H = G.DWT.JSVersion.split(","), K = H[0] + "." + H[1], Y = location.pathname, F, q, O;
    Y = Y.substring(0, Y.lastIndexOf("/") + 1), N == G.DWT.EnumDWT_PlatformType.enumLinux && (arm64 || mips64) && (arm64 ? C.default = getDebPath("arm64") : mips64 && (C.default = getDebPath("mips64el"))), O = C.default.substr(C.default.length - 3), F = [
      "https://www.dynamsoft.com/web-twain/install-dynamsoft-service/?productId=1000001",
      "&downloadLink=https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup_",
      K,
      ".",
      O
    ].join(""), q = G.Lib.Path.normalize([
      Y,
      C.default
    ].join("")), N == G.DWT.EnumDWT_PlatformType.enumWindow && q.indexOf("/") == 0 && (q = q.substr(1)), U = [
      '<div class="dynamsoft-dwt-ltsdlg-body" style="padding:0 20px 20px 20px">',
      "<div>To support document scanning, please complete one-time installation of the DynamsoftServiceSetup.",
      O,
      " on this machine.</div>",
      "<div>You can download the file via this trust site:</div>",
      '<div><a id="dwt-btn-install" target="_blank" href="',
      F,
      '"><div class="dynamsoft-dwt-dlg-button">Open Site</div></a></div>',
      '<div style="word-break: break-word;">Or, go to <br />',
      q,
      " if the file exists.</div>",
      "<div>After the installation, please <strong>REFRESH</strong>  your browser.<br /></div>",
      "</div>"
    ], G.DWT.ShowMessage(U.join(""), { width: n, headerStyle: 1, closeButton: !1 });
  };
})();
G.DWT.AutoLoad = !1;
G.DWT.IfAddMD5InUploadHeader = !1;
G.DWT.IfConfineMaskWithinTheViewer = !1;
const co = G;
var Sp = /* @__PURE__ */ ((l) => (l[l.JPG = 0] = "JPG", l[l.PNG = 1] = "PNG", l[l.PDF = 2] = "PDF", l[l.TIFF = 3] = "TIFF", l))(Sp || {});
class Cp {
  constructor(n) {
    ga(this, "container");
    ga(this, "filesSelected", []);
    ga(this, "DWObject");
    ga(this, "fileInput");
    ga(this, "useZipCheckbox");
    ga(this, "files");
    ga(this, "convertActions");
    ga(this, "formatSelect");
    ga(this, "convertButton");
    ga(this, "chooseFilesButton");
    n && (n.container && (this.container = n.container, this.createElements()), n.license && (co.DWT.ProductKey = n.license)), this.initDWT();
  }
  async convert(n, L) {
    let k = [];
    this.DWObject.RemoveAllImages(), await this.loadImageFromFile(n);
    let re = 7, R = "";
    if (L === 0 ? (re = co.DWT.EnumDWT_ImageType.IT_JPG, R = ".jpg") : L === 1 ? (re = co.DWT.EnumDWT_ImageType.IT_PNG, R = ".png") : L === 2 ? (re = co.DWT.EnumDWT_ImageType.IT_PDF, R = ".pdf") : L === 3 && (re = co.DWT.EnumDWT_ImageType.IT_TIF, R = ".tiff"), L > 1) {
      let C = await this.getBlob(this.getImageIndices(), re);
      k.push({ filename: this.getFileNameWithoutExtension(n.name) + R, blob: C });
    } else if (this.DWObject.HowManyImagesInBuffer > 1)
      for (let C = 0; C < this.DWObject.HowManyImagesInBuffer; C++) {
        let p = await this.getBlob([C], re);
        k.push({ filename: this.getFileNameWithoutExtension(n.name) + "-" + C + R, blob: p });
      }
    else {
      let C = await this.getBlob([0], re);
      k.push({ filename: this.getFileNameWithoutExtension(n.name) + R, blob: C });
    }
    return k;
  }
  getDWObject() {
    return this.DWObject;
  }
  createElements() {
    let n = this;
    this.files = document.createElement("div");
    let L = document.createElement("div");
    L.className = Ns.actions;
    let k = document.createElement("div");
    this.fileInput = document.createElement("input"), this.fileInput.style.display = "none", this.fileInput.multiple = !0, this.fileInput.accept = ".bmp,.jpeg,.jpg,.png,.pdf,.tiff,.tif,.zip", this.fileInput.type = "file", this.fileInput.addEventListener("change", async function() {
      n.chooseFilesButton.innerText = "Loading...", await n.appendFiles(), n.listFiles(), n.chooseFilesButton.innerText = "Choose Files";
    }), this.chooseFilesButton = this.DynamsoftButton("Choose Files"), this.chooseFilesButton.addEventListener("click", function() {
      n.fileInput.click();
    }), k.appendChild(this.fileInput), k.appendChild(this.chooseFilesButton), L.appendChild(k), this.convertActions = document.createElement("div"), this.convertActions.className = Ns.convertActions, this.convertActions.style.display = "none";
    let re = document.createElement("label");
    re.innerText = "To:", this.formatSelect = document.createElement("select");
    for (const C of ["JPG", "PNG", "PDF", "TIFF"])
      this.formatSelect.options.add(new Option(C, C));
    re.appendChild(this.formatSelect);
    let R = document.createElement("label");
    R.innerText = "Download as Zip:", R.style.marginLeft = "10px", this.useZipCheckbox = document.createElement("input"), this.useZipCheckbox.type = "checkbox", R.appendChild(this.useZipCheckbox), this.convertButton = this.DynamsoftButton("Convert"), this.convertButton.style.marginLeft = "10px", this.convertButton.addEventListener("click", function() {
      n.convertAndDownload();
    }), this.convertActions.appendChild(re), this.convertActions.appendChild(R), this.convertActions.appendChild(this.convertButton), L.appendChild(this.convertActions), this.container.appendChild(this.files), this.container.appendChild(L);
  }
  initDWT() {
    co.DWT.AutoLoad = !1, co.DWT.Containers = [], co.DWT.ResourcesPath = "https://unpkg.com/dwt@18.0.2/dist", co.DWT.UseLocalService = !1;
    let n = this;
    co.DWT.CreateDWTObjectEx(
      {
        WebTwainId: "dwtcontrol"
      },
      function(L) {
        n.DWObject = L;
      },
      function(L) {
        console.log(L);
      }
    );
  }
  DynamsoftButton(n) {
    let L = document.createElement("a");
    return L.innerText = n, L.className = Ns.primaryBtn + " " + Ns.textUpperCase, L;
  }
  async appendFiles() {
    if (this.fileInput.files)
      for (let n = 0; n < this.fileInput.files.length; n++) {
        let L = this.fileInput.files[n];
        L.name.endsWith(".zip") ? (this.useZipCheckbox.checked = !0, await this.loadImagesFromZip(L)) : this.filesSelected.push(L);
      }
  }
  listFiles() {
    this.files.innerHTML = "";
    for (let n = 0; n < this.filesSelected.length; n++) {
      const L = this.filesSelected[n];
      let k = this.fileItem(L);
      n != this.filesSelected.length - 1 && (k.style.marginBottom = "10px"), this.files.appendChild(k);
    }
    this.filesSelected.length > 0 ? this.convertActions.style.display = "" : this.convertActions.style.display = "none";
  }
  fileItem(n) {
    let L = document.createElement("div");
    L.className = Ns.oneFile;
    let k = document.createElement("div");
    k.innerText = this.useEllipsesForLongText(n.name), k.className = Ns.title;
    let re = document.createElement("div");
    re.innerText = n.size / 1e3 + "kb";
    let R = this.DynamsoftButton("Delete"), C = this;
    return R.addEventListener("click", function() {
      C.deleteSelected(n);
    }), L.appendChild(k), L.appendChild(re), L.appendChild(R), L;
  }
  deleteSelected(n) {
    let L = this.filesSelected.indexOf(n);
    this.filesSelected.splice(L, 1), this.listFiles();
  }
  useEllipsesForLongText(n) {
    return n.length > 28 && (n = n.substring(0, 14) + "..." + n.substring(n.length - 14, n.length)), n;
  }
  async convertAndDownload() {
    this.convertButton.innerText = "Converting...";
    let n;
    this.useZipCheckbox.checked && (n = new pf());
    for (let L = 0; L < this.filesSelected.length; L++) {
      const k = this.filesSelected[L];
      this.DWObject.RemoveAllImages(), await this.loadImageFromFile(k), await this.save(k, n);
    }
    if (this.useZipCheckbox.checked && n) {
      let L = this;
      n.generateAsync({ type: "blob" }).then(function(k) {
        L.downloadBlob(k, "images.zip");
      });
    }
    this.convertButton.innerText = "Convert";
  }
  async loadImageFromFile(n) {
    return new Promise((L, k) => {
      this.DWObject.LoadImageFromBinary(
        n,
        function() {
          L();
        },
        function(re, R) {
          k(R);
        }
      );
    });
  }
  async save(n, L) {
    this.useZipCheckbox.checked === !1 ? await this.saveImages(n) : L && await this.appendImagesToZip(n, L);
  }
  async saveImages(n) {
    let L = this.formatSelect.selectedIndex, k = 7, re = "";
    if (L === 0 ? (k = co.DWT.EnumDWT_ImageType.IT_JPG, re = ".jpg") : L === 1 ? (k = co.DWT.EnumDWT_ImageType.IT_PNG, re = ".png") : L === 2 ? (k = co.DWT.EnumDWT_ImageType.IT_PDF, re = ".pdf") : L === 3 && (k = co.DWT.EnumDWT_ImageType.IT_TIF, re = ".tiff"), L > 1) {
      let R = await this.getBlob(this.getImageIndices(), k);
      this.downloadBlob(R, this.getFileNameWithoutExtension(n.name) + re);
    } else if (this.DWObject.HowManyImagesInBuffer > 1)
      for (let R = 0; R < this.DWObject.HowManyImagesInBuffer; R++) {
        let C = await this.getBlob([R], k);
        this.downloadBlob(C, this.getFileNameWithoutExtension(n.name) + "-" + R + re);
      }
    else {
      let R = await this.getBlob([0], k);
      this.downloadBlob(R, this.getFileNameWithoutExtension(n.name) + re);
    }
  }
  async appendImagesToZip(n, L) {
    let k = this.formatSelect.selectedIndex, re = 7, R = "";
    if (k === 0 ? (re = co.DWT.EnumDWT_ImageType.IT_JPG, R = ".jpg") : k === 1 ? (re = co.DWT.EnumDWT_ImageType.IT_PNG, R = ".png") : k === 2 ? (re = co.DWT.EnumDWT_ImageType.IT_PDF, R = ".pdf") : k === 3 && (re = co.DWT.EnumDWT_ImageType.IT_TIF, R = ".tiff"), k > 1) {
      let C = await this.getBlob(this.getImageIndices(), re);
      L.file(this.getFileNameWithoutExtension(n.name) + R, C);
    } else if (this.DWObject.HowManyImagesInBuffer > 1)
      for (let C = 0; C < this.DWObject.HowManyImagesInBuffer; C++) {
        let p = await this.getBlob([C], re);
        L.file(this.getFileNameWithoutExtension(n.name) + "-" + C + R, p);
      }
    else {
      let C = await this.getBlob([0], re);
      L.file(this.getFileNameWithoutExtension(n.name) + R, C);
    }
  }
  getImageIndices() {
    let n = [];
    for (let L = 0; L < this.DWObject.HowManyImagesInBuffer; L++)
      n.push(L);
    return n;
  }
  downloadBlob(n, L) {
    const k = document.createElement("a");
    k.href = URL.createObjectURL(n), k.download = L, document.body.appendChild(k), k.click(), document.body.removeChild(k);
  }
  getBlob(n, L) {
    return new Promise((k, re) => {
      this.DWObject.ConvertToBlob(
        n,
        L,
        function(R) {
          k(R);
        },
        function(R, C) {
          re(C);
        }
      );
    });
  }
  /*
  * eg. filename.jpg -> filename
  */
  getFileNameWithoutExtension(n) {
    return n.lastIndexOf(".") != -1 ? n.substring(0, n.lastIndexOf(".")) : n;
  }
  async loadImagesFromZip(n) {
    const L = await n.arrayBuffer();
    let k = new pf();
    await k.loadAsync(L);
    const re = k.files, R = Object.keys(re);
    for (let C = 0; C < R.length; C++) {
      const p = R[C], N = p.toLowerCase(), U = re[p];
      if (U.dir === !1 && (N.endsWith(".jpg") || N.endsWith(".jpeg") || N.endsWith(".png") || N.endsWith(".bmp") || N.endsWith(".pdf") || N.endsWith(".tif") || N.endsWith(".tiff"))) {
        let H = await U.async("blob"), K = new File([H], p);
        this.filesSelected.push(K);
      }
    }
  }
}
export {
  Cp as ImageConverter,
  Sp as ImageFormat
};
